2025-10-29 13:47:50,369 - INFO     - 
==========================================================================================
2025-10-29 13:47:50,370 - INFO     - // OVERFIT EXPERIMENT
2025-10-29 13:47:50,370 - INFO     - ==========================================================================================

2025-10-29 13:47:50,370 - INFO     - Configuration:
2025-10-29 13:47:50,370 - INFO     -   Benchmark directory: benchmarks
2025-10-29 13:47:50,370 - INFO     -   Sizes: ['small']
2025-10-29 13:47:50,370 - INFO     -   Max problems: 5
2025-10-29 13:47:50,370 - INFO     -   Total timesteps: 2000
2025-10-29 13:47:50,375 - INFO     -   Reward variant: astar_search

2025-10-29 13:47:50,375 - INFO     - 
--------------------------------------------------------------------------------
2025-10-29 13:47:50,375 - INFO     - >>> PHASE 1: LOAD BENCHMARKS (NEW FORMAT)
2025-10-29 13:47:50,375 - INFO     - --------------------------------------------------------------------------------

2025-10-29 13:47:50,375 - INFO     - Loading benchmarks from: benchmarks
2025-10-29 13:47:50,375 - INFO     -   blocksworld_small: 4 problems
2025-10-29 13:47:50,375 - INFO     - 
✅ Loaded 4 total problems
2025-10-29 13:47:50,375 - INFO     - 
--------------------------------------------------------------------------------
2025-10-29 13:47:50,377 - INFO     - >>> PHASE 2: SELECT TRAINING PROBLEMS
2025-10-29 13:47:50,377 - INFO     - --------------------------------------------------------------------------------

2025-10-29 13:47:50,377 - INFO     - Collected 4 benchmarks for sizes ['small']
2025-10-29 13:47:50,377 - INFO     - Selected 4 problems:
2025-10-29 13:47:50,377 - INFO     -   1. problem_small_00.pddl
2025-10-29 13:47:50,377 - INFO     -   2. problem_small_01.pddl
2025-10-29 13:47:50,377 - INFO     -   3. problem_small_02.pddl
2025-10-29 13:47:50,377 - INFO     -   4. problem_small_03.pddl
2025-10-29 13:47:50,377 - INFO     - 
--------------------------------------------------------------------------------
2025-10-29 13:47:50,377 - INFO     - >>> PHASE 3: TRAINING
2025-10-29 13:47:50,377 - INFO     - --------------------------------------------------------------------------------

2025-10-29 13:47:50,377 - INFO     - Starting fresh training...
2025-10-29 13:48:01,703 - WARNING  - 
⚠️ Experiment interrupted by user
2025-10-29 13:48:25,409 - INFO     - 
==========================================================================================
2025-10-29 13:48:25,410 - INFO     - // OVERFIT EXPERIMENT
2025-10-29 13:48:25,410 - INFO     - ==========================================================================================

2025-10-29 13:48:25,410 - INFO     - Configuration:
2025-10-29 13:48:25,410 - INFO     -   Benchmark directory: benchmarks
2025-10-29 13:48:25,410 - INFO     -   Sizes: ['small']
2025-10-29 13:48:25,410 - INFO     -   Max problems: 5
2025-10-29 13:48:25,410 - INFO     -   Total timesteps: 12
2025-10-29 13:48:25,410 - INFO     -   Reward variant: astar_search

2025-10-29 13:48:25,410 - INFO     - 
--------------------------------------------------------------------------------
2025-10-29 13:48:25,410 - INFO     - >>> PHASE 1: LOAD BENCHMARKS (NEW FORMAT)
2025-10-29 13:48:25,410 - INFO     - --------------------------------------------------------------------------------

2025-10-29 13:48:25,410 - INFO     - Loading benchmarks from: benchmarks
2025-10-29 13:48:25,411 - INFO     -   blocksworld_small: 4 problems
2025-10-29 13:48:25,411 - INFO     - 
✅ Loaded 4 total problems
2025-10-29 13:48:25,411 - INFO     - 
--------------------------------------------------------------------------------
2025-10-29 13:48:25,411 - INFO     - >>> PHASE 2: SELECT TRAINING PROBLEMS
2025-10-29 13:48:25,413 - INFO     - --------------------------------------------------------------------------------

2025-10-29 13:48:25,413 - INFO     - Collected 4 benchmarks for sizes ['small']
2025-10-29 13:48:25,413 - INFO     - Selected 4 problems:
2025-10-29 13:48:25,413 - INFO     -   1. problem_small_00.pddl
2025-10-29 13:48:25,413 - INFO     -   2. problem_small_01.pddl
2025-10-29 13:48:25,413 - INFO     -   3. problem_small_02.pddl
2025-10-29 13:48:25,413 - INFO     -   4. problem_small_03.pddl
2025-10-29 13:48:25,413 - INFO     - 
--------------------------------------------------------------------------------
2025-10-29 13:48:25,413 - INFO     - >>> PHASE 3: TRAINING
2025-10-29 13:48:25,413 - INFO     - --------------------------------------------------------------------------------

2025-10-29 13:48:25,413 - INFO     - Starting fresh training...
2025-10-29 13:48:48,736 - INFO     - Training on 4 problem(s)
2025-10-29 13:48:48,736 - INFO     - Total timesteps: 12
2025-10-29 13:48:48,736 - INFO     - Timesteps per problem: 3

2025-10-29 13:48:48,737 - INFO     -   [1/4] problem_small_00.pddl
2025-10-29 13:48:48,737 - INFO     - Environment initialized with:
2025-10-29 13:48:48,737 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:48:48,737 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_00.pddl
2025-10-29 13:48:48,737 - INFO     -   FD base: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward
2025-10-29 13:48:48,737 - INFO     -   max_states: 4000
2025-10-29 13:48:48,737 - INFO     -   threshold_before_merge: 1
2025-10-29 13:48:48,737 - INFO     - ✓ Initialized reward function: astar_search
2025-10-29 13:48:48,737 - INFO     - ✓ RewardInfoExtractor initialized (output_dir: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output)
2025-10-29 13:48:48,738 - INFO     - ✓ Initialized reward info extractor
2025-10-29 13:48:48,744 - INFO     -     Creating new PPO model...
2025-10-29 13:48:49,614 - INFO     -     Training for 3 timesteps...
2025-10-29 13:48:49,853 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:48:49,858 - INFO     - [Handshake] Building FD command:
2025-10-29 13:48:49,858 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:48:49,858 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_00.pddl
2025-10-29 13:48:49,858 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:48:49,866 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:49:49,996 - WARNING  - ⚠️ Handshake attempt 1 failed: Translator failed to produce output.sas.
Log tail:
Warning! SIGXCPU is not available on your platform. This means that the planner cannot be gracefully terminated when using a time limit, which, however, is probably supported on your platform anyway.
Parsing...
Parsing task
	->Parsing element #1 in init block
Undefined predicate
Got: on-table

2025-10-29 13:49:50,997 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:49:50,997 - INFO     - [Handshake] Building FD command:
2025-10-29 13:49:50,997 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:49:50,997 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_00.pddl
2025-10-29 13:49:50,998 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:49:51,001 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:50:23,018 - WARNING  - 
⚠️ Experiment interrupted by user
2025-10-29 13:50:51,280 - INFO     - 
==========================================================================================
2025-10-29 13:50:51,280 - INFO     - // OVERFIT EXPERIMENT
2025-10-29 13:50:51,280 - INFO     - ==========================================================================================

2025-10-29 13:50:51,280 - INFO     - Configuration:
2025-10-29 13:50:51,280 - INFO     -   Benchmark directory: benchmarks
2025-10-29 13:50:51,280 - INFO     -   Sizes: ['small']
2025-10-29 13:50:51,280 - INFO     -   Max problems: 5
2025-10-29 13:50:51,280 - INFO     -   Total timesteps: 12
2025-10-29 13:50:51,280 - INFO     -   Reward variant: astar_search

2025-10-29 13:50:51,280 - INFO     - 
--------------------------------------------------------------------------------
2025-10-29 13:50:51,280 - INFO     - >>> PHASE 1: LOAD BENCHMARKS (NEW FORMAT)
2025-10-29 13:50:51,280 - INFO     - --------------------------------------------------------------------------------

2025-10-29 13:50:51,282 - INFO     - Loading benchmarks from: benchmarks
2025-10-29 13:50:51,282 - INFO     -   blocksworld_small: 5 problems
2025-10-29 13:50:51,282 - INFO     - 
✅ Loaded 5 total problems
2025-10-29 13:50:51,282 - INFO     - 
--------------------------------------------------------------------------------
2025-10-29 13:50:51,282 - INFO     - >>> PHASE 2: SELECT TRAINING PROBLEMS
2025-10-29 13:50:51,282 - INFO     - --------------------------------------------------------------------------------

2025-10-29 13:50:51,282 - INFO     - Collected 5 benchmarks for sizes ['small']
2025-10-29 13:50:51,282 - INFO     - Selected 5 problems:
2025-10-29 13:50:51,282 - INFO     -   1. problem_small_00.pddl
2025-10-29 13:50:51,282 - INFO     -   2. problem_small_01.pddl
2025-10-29 13:50:51,282 - INFO     -   3. problem_small_02.pddl
2025-10-29 13:50:51,282 - INFO     -   4. problem_small_03.pddl
2025-10-29 13:50:51,282 - INFO     -   5. problem_small_04.pddl
2025-10-29 13:50:51,282 - INFO     - 
--------------------------------------------------------------------------------
2025-10-29 13:50:51,283 - INFO     - >>> PHASE 3: TRAINING
2025-10-29 13:50:51,283 - INFO     - --------------------------------------------------------------------------------

2025-10-29 13:50:51,283 - INFO     - Starting fresh training...
2025-10-29 13:50:57,322 - INFO     - Training on 5 problem(s)
2025-10-29 13:50:57,322 - INFO     - Total timesteps: 12
2025-10-29 13:50:57,322 - INFO     - Timesteps per problem: 3

2025-10-29 13:50:57,323 - INFO     -   [1/5] problem_small_00.pddl
2025-10-29 13:50:57,323 - INFO     - Environment initialized with:
2025-10-29 13:50:57,323 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:50:57,323 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_00.pddl
2025-10-29 13:50:57,323 - INFO     -   FD base: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward
2025-10-29 13:50:57,323 - INFO     -   max_states: 4000
2025-10-29 13:50:57,323 - INFO     -   threshold_before_merge: 1
2025-10-29 13:50:57,323 - INFO     - ✓ Initialized reward function: astar_search
2025-10-29 13:50:57,323 - INFO     - ✓ RewardInfoExtractor initialized (output_dir: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output)
2025-10-29 13:50:57,323 - INFO     - ✓ Initialized reward info extractor
2025-10-29 13:50:57,324 - INFO     -     Creating new PPO model...
2025-10-29 13:50:57,915 - INFO     -     Training for 3 timesteps...
2025-10-29 13:50:57,917 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:50:57,920 - INFO     - [Handshake] Building FD command:
2025-10-29 13:50:57,920 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:50:57,920 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_00.pddl
2025-10-29 13:50:57,920 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:50:57,926 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:50:58,679 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:50:58,679 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:50:58,679 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:50:58,995 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:50:58,996 - INFO     - Initializing GraphTracker...
2025-10-29 13:50:58,996 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:50:58,996 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:50:58,996 - INFO     -    → Node 0 has 2 states
2025-10-29 13:50:58,996 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:50:58,998 - INFO     -    → Node 1 has 2 states
2025-10-29 13:50:58,998 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:50:58,998 - INFO     -    → Node 2 has 2 states
2025-10-29 13:50:58,998 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:50:58,998 - INFO     -    → Node 3 has 2 states
2025-10-29 13:50:58,998 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:50:58,998 - INFO     -    → Node 4 has 2 states
2025-10-29 13:50:58,998 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:50:58,998 - INFO     -    → Node 5 has 5 states
2025-10-29 13:50:58,998 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:50:58,998 - INFO     -    → Node 6 has 5 states
2025-10-29 13:50:58,998 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:50:58,998 - INFO     -    → Node 7 has 5 states
2025-10-29 13:50:58,998 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:50:58,998 - INFO     -    → Node 8 has 5 states
2025-10-29 13:50:58,999 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:50:58,999 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:50:59,006 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:50:59,006 - INFO     - Added edge (0, 1)
2025-10-29 13:50:59,006 - INFO     - Added edge (0, 2)
2025-10-29 13:50:59,006 - INFO     - Added edge (0, 3)
2025-10-29 13:50:59,006 - INFO     - Added edge (0, 4)
2025-10-29 13:50:59,006 - INFO     - Added edge (0, 5)
2025-10-29 13:50:59,006 - INFO     - Added edge (0, 6)
2025-10-29 13:50:59,006 - INFO     - Added edge (0, 7)
2025-10-29 13:50:59,006 - INFO     - Added edge (0, 8)
2025-10-29 13:50:59,006 - INFO     - Added edge (1, 0)
2025-10-29 13:50:59,006 - INFO     - Added edge (1, 2)
2025-10-29 13:50:59,006 - INFO     - Added edge (1, 3)
2025-10-29 13:50:59,006 - INFO     - Added edge (1, 4)
2025-10-29 13:50:59,006 - INFO     - Added edge (1, 5)
2025-10-29 13:50:59,006 - INFO     - Added edge (1, 6)
2025-10-29 13:50:59,006 - INFO     - Added edge (1, 7)
2025-10-29 13:50:59,006 - INFO     - Added edge (1, 8)
2025-10-29 13:50:59,006 - INFO     - Added edge (2, 0)
2025-10-29 13:50:59,006 - INFO     - Added edge (2, 1)
2025-10-29 13:50:59,007 - INFO     - Added edge (2, 3)
2025-10-29 13:50:59,007 - INFO     - Added edge (2, 4)
2025-10-29 13:50:59,007 - INFO     - Added edge (2, 5)
2025-10-29 13:50:59,007 - INFO     - Added edge (2, 6)
2025-10-29 13:50:59,007 - INFO     - Added edge (2, 7)
2025-10-29 13:50:59,007 - INFO     - Added edge (2, 8)
2025-10-29 13:50:59,007 - INFO     - Added edge (3, 0)
2025-10-29 13:50:59,007 - INFO     - Added edge (3, 1)
2025-10-29 13:50:59,007 - INFO     - Added edge (3, 2)
2025-10-29 13:50:59,007 - INFO     - Added edge (3, 4)
2025-10-29 13:50:59,007 - INFO     - Added edge (3, 5)
2025-10-29 13:50:59,007 - INFO     - Added edge (3, 6)
2025-10-29 13:50:59,007 - INFO     - Added edge (3, 7)
2025-10-29 13:50:59,007 - INFO     - Added edge (3, 8)
2025-10-29 13:50:59,007 - INFO     - Added edge (4, 0)
2025-10-29 13:50:59,007 - INFO     - Added edge (4, 1)
2025-10-29 13:50:59,007 - INFO     - Added edge (4, 2)
2025-10-29 13:50:59,007 - INFO     - Added edge (4, 3)
2025-10-29 13:50:59,007 - INFO     - Added edge (4, 5)
2025-10-29 13:50:59,007 - INFO     - Added edge (4, 6)
2025-10-29 13:50:59,007 - INFO     - Added edge (4, 7)
2025-10-29 13:50:59,007 - INFO     - Added edge (4, 8)
2025-10-29 13:50:59,007 - INFO     - Added edge (5, 0)
2025-10-29 13:50:59,007 - INFO     - Added edge (5, 1)
2025-10-29 13:50:59,007 - INFO     - Added edge (5, 2)
2025-10-29 13:50:59,007 - INFO     - Added edge (5, 3)
2025-10-29 13:50:59,007 - INFO     - Added edge (5, 4)
2025-10-29 13:50:59,007 - INFO     - Added edge (6, 0)
2025-10-29 13:50:59,007 - INFO     - Added edge (6, 1)
2025-10-29 13:50:59,007 - INFO     - Added edge (6, 2)
2025-10-29 13:50:59,007 - INFO     - Added edge (6, 3)
2025-10-29 13:50:59,007 - INFO     - Added edge (6, 4)
2025-10-29 13:50:59,008 - INFO     - Added edge (7, 0)
2025-10-29 13:50:59,008 - INFO     - Added edge (7, 1)
2025-10-29 13:50:59,008 - INFO     - Added edge (7, 2)
2025-10-29 13:50:59,008 - INFO     - Added edge (7, 3)
2025-10-29 13:50:59,008 - INFO     - Added edge (7, 4)
2025-10-29 13:50:59,008 - INFO     - Added edge (8, 0)
2025-10-29 13:50:59,008 - INFO     - Added edge (8, 1)
2025-10-29 13:50:59,008 - INFO     - Added edge (8, 2)
2025-10-29 13:50:59,008 - INFO     - Added edge (8, 3)
2025-10-29 13:50:59,008 - INFO     - Added edge (8, 4)
2025-10-29 13:50:59,008 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:50:59,123 - INFO     - 
==========================================================================================
2025-10-29 13:50:59,123 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:50:59,123 - INFO     - ==========================================================================================
2025-10-29 13:50:59,123 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:50:59,123 - INFO     -   Input action: 10 (type: int)
2025-10-29 13:50:59,123 - INFO     -   Available edges in graph: 60
2025-10-29 13:50:59,123 - INFO     -   Action index calculation:
2025-10-29 13:50:59,123 - INFO     -     - action % max(num_valid_edges, 1) = 10 % 60 = 10
2025-10-29 13:50:59,123 - INFO     -     - clamped to [0, 59]: 10
2025-10-29 13:50:59,123 - INFO     -   ✓ Extracted merge pair from edge 10: (1, 3)
2025-10-29 13:50:59,123 - INFO     -   ✓ Validation passed
2025-10-29 13:50:59,123 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:50:59,123 - INFO     -     - Total states before merge: 30
2025-10-29 13:50:59,123 - INFO     -     - Num nodes: 9
2025-10-29 13:50:59,124 - INFO     -     - Num edges: 60
2025-10-29 13:50:59,124 - INFO     - 
    Nodes being merged:
2025-10-29 13:50:59,124 - INFO     -       - Node 1: 2 states
2025-10-29 13:50:59,124 - INFO     -       - Node 3: 2 states
2025-10-29 13:50:59,124 - INFO     -       - Expected product: 4 states
2025-10-29 13:50:59,124 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:50:59,128 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:50:59,128 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:50:59,128 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:50:59,229 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:50:59,229 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:50:59,229 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:50:59,231 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:50:59,231 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:50:59,231 - INFO     -   Calling graph_tracker.merge_nodes([1, 3])...
2025-10-29 13:50:59,231 - INFO     - Attempting merge of nodes 1 and 3...
2025-10-29 13:50:59,231 - INFO     - Successfully merged nodes into new node 9 with 4 states.
2025-10-29 13:50:59,231 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:50:59,231 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:50:59,231 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:50:59,231 - INFO     - 
================================================================================
2025-10-29 13:50:59,231 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:50:59,231 - INFO     - ================================================================================
2025-10-29 13:50:59,231 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:50:59,231 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:50:59,232 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:50:59,232 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:50:59,232 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:50:59,232 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:50:59,232 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:50:59,232 - INFO     -   - Raw f_after length: 4
2025-10-29 13:50:59,232 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:50:59,233 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:50:59,233 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:50:59,233 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:50:59,233 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:50:59,233 - INFO     -   - ts1_id: 1
2025-10-29 13:50:59,233 - INFO     -   - ts2_id: 3
2025-10-29 13:50:59,233 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:50:59,233 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:50:59,233 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:50:59,233 - INFO     -   - Product space size: 4
2025-10-29 13:50:59,233 - INFO     -   - Using product state mapping
2025-10-29 13:50:59,233 - INFO     -   - f_before_product length: 4
2025-10-29 13:50:59,234 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:50:59,234 - INFO     -   - avg_f_after:  1.0000 (4 valid states)
2025-10-29 13:50:59,234 - INFO     -   - delta: 0.2500
2025-10-29 13:50:59,234 - INFO     -   - f_stability: 1.0 - |0.2500| / 0.7500 = 0.6667
2025-10-29 13:50:59,234 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:50:59,235 - INFO     -   - Compared 4 values
2025-10-29 13:50:59,235 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:50:59,235 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:50:59,235 - INFO     -   - states_before: 4
2025-10-29 13:50:59,235 - INFO     -   - states_after: 4
2025-10-29 13:50:59,235 - INFO     -   - delta_states: 0
2025-10-29 13:50:59,235 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:50:59,235 - INFO     -   - ts1_transitions: 5
2025-10-29 13:50:59,235 - INFO     -   - ts2_transitions: 5
2025-10-29 13:50:59,236 - INFO     -   - merged_transitions: 20
2025-10-29 13:50:59,236 - INFO     -   - transition_density_change: 2.5000
2025-10-29 13:50:59,237 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:50:59,237 - INFO     -   - search_signals present: True
2025-10-29 13:50:59,237 - INFO     -   - nodes_expanded: 4
2025-10-29 13:50:59,237 - INFO     -   - search_depth: 0
2025-10-29 13:50:59,237 - INFO     -   - solution_cost: 0
2025-10-29 13:50:59,237 - INFO     -   - branching_factor: 5.0000
2025-10-29 13:50:59,237 - INFO     -   - solution_found: True
2025-10-29 13:50:59,237 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:50:59,238 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:50:59,238 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:50:59,238 - INFO     -   - TS1(2) + TS3(2) → 4 states
2025-10-29 13:50:59,238 - INFO     -   - f_stability=0.667
2025-10-29 13:50:59,238 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:50:59,238 - INFO     -   - solution_found=True
2025-10-29 13:50:59,238 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:50:59,238 - INFO     - 
  Extracted signals:
2025-10-29 13:50:59,238 - INFO     -     - iteration: 0
2025-10-29 13:50:59,238 - INFO     -     - states_before: 4
2025-10-29 13:50:59,238 - INFO     -     - states_after: 4
2025-10-29 13:50:59,239 - INFO     -     - delta_states: 0
2025-10-29 13:50:59,239 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:50:59,239 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:50:59,239 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:50:59,239 - INFO     -     - nodes_expanded: 4
2025-10-29 13:50:59,239 - INFO     -     - search_depth: 0
2025-10-29 13:50:59,239 - INFO     -     - solution_cost: 0
2025-10-29 13:50:59,239 - INFO     -     - branching_factor: 5.0000
2025-10-29 13:50:59,239 - INFO     -     - solution_found: True
2025-10-29 13:50:59,239 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:50:59,239 - INFO     - 
  Computing reward:
2025-10-29 13:50:59,239 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:50:59,239 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:50:59,240 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:50:59,240 - INFO     -   [1] BRANCHING FACTOR: 5.000 → score 0.433 (tolerable)
2025-10-29 13:50:59,240 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:50:59,243 - INFO     -   [3] F-VALUE STABILITY: 0.176
2025-10-29 13:50:59,243 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:50:59,243 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:50:59,243 - INFO     - 
  [COMPOSITE]: 0.412
2025-10-29 13:50:59,243 - INFO     -     = 0.300*0.433 (bf)
2025-10-29 13:50:59,243 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:50:59,243 - INFO     -     + 0.350*0.176 (stability)
2025-10-29 13:50:59,243 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:50:59,243 - INFO     - 
  [BONUSES]:
2025-10-29 13:50:59,243 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:50:59,243 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:50:59,244 - INFO     - 
  [FINAL REWARD]: 0.0230
2025-10-29 13:50:59,244 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:50:59,244 - INFO     -     ✓ Reward computed: 0.0230
2025-10-29 13:50:59,244 - INFO     - 
  Reward component breakdown:
2025-10-29 13:50:59,244 - INFO     -     - bf_score                       0.4333
2025-10-29 13:50:59,244 - INFO     -     - depth_score                    0.5000
2025-10-29 13:50:59,244 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:50:59,244 - INFO     -     - f_stability                    0.1757
2025-10-29 13:50:59,244 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:50:59,244 - INFO     -     - state_score                    0.8000
2025-10-29 13:50:59,244 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:50:59,244 - INFO     -     - composite                      0.4115
2025-10-29 13:50:59,244 - INFO     -     - total                          0.0230
2025-10-29 13:50:59,244 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:50:59,244 - INFO     -   Num remaining nodes: 8
2025-10-29 13:50:59,245 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:50:59,245 - INFO     -   Done: False
2025-10-29 13:50:59,245 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:50:59,246 - INFO     -   ✓ Observation built successfully
2025-10-29 13:50:59,246 - INFO     -     - x shape: (100, 19)
2025-10-29 13:50:59,246 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:50:59,246 - INFO     -     - num_nodes: 8
2025-10-29 13:50:59,247 - INFO     -     - num_edges: 44
2025-10-29 13:50:59,247 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:50:59,247 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:50:59,247 - INFO     -   After: current_merge_step = 1
2025-10-29 13:50:59,247 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:50:59,249 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:50:59,249 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:50:59,250 - INFO     -   ✓ Step logged
2025-10-29 13:50:59,250 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:50:59,250 - INFO     -   Returning:
2025-10-29 13:50:59,251 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:50:59,251 - INFO     -     - reward: 0.0230
2025-10-29 13:50:59,251 - INFO     -     - done: False
2025-10-29 13:50:59,251 - INFO     -     - truncated: False
2025-10-29 13:50:59,251 - INFO     -     - info: 19 keys
2025-10-29 13:50:59,251 - INFO     - ==========================================================================================

2025-10-29 13:50:59,257 - INFO     - 
==========================================================================================
2025-10-29 13:50:59,257 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:50:59,257 - INFO     - ==========================================================================================
2025-10-29 13:50:59,257 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:50:59,257 - INFO     -   Input action: 15 (type: int)
2025-10-29 13:50:59,257 - INFO     -   Available edges in graph: 44
2025-10-29 13:50:59,257 - INFO     -   Action index calculation:
2025-10-29 13:50:59,257 - INFO     -     - action % max(num_valid_edges, 1) = 15 % 44 = 15
2025-10-29 13:50:59,257 - INFO     -     - clamped to [0, 43]: 15
2025-10-29 13:50:59,257 - INFO     -   ✓ Extracted merge pair from edge 15: (4, 2)
2025-10-29 13:50:59,258 - INFO     -   ✓ Validation passed
2025-10-29 13:50:59,258 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:50:59,258 - INFO     -     - Total states before merge: 30
2025-10-29 13:50:59,258 - INFO     -     - Num nodes: 8
2025-10-29 13:50:59,258 - INFO     -     - Num edges: 44
2025-10-29 13:50:59,258 - INFO     - 
    Nodes being merged:
2025-10-29 13:50:59,258 - INFO     -       - Node 4: 2 states
2025-10-29 13:50:59,258 - INFO     -       - Node 2: 2 states
2025-10-29 13:50:59,258 - INFO     -       - Expected product: 4 states
2025-10-29 13:50:59,258 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:50:59,265 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:50:59,265 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:50:59,265 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:50:59,366 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:50:59,366 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:50:59,366 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:50:59,366 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:50:59,367 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:50:59,367 - INFO     -   Calling graph_tracker.merge_nodes([4, 2])...
2025-10-29 13:50:59,367 - INFO     - Attempting merge of nodes 4 and 2...
2025-10-29 13:50:59,367 - INFO     - Successfully merged nodes into new node 10 with 4 states.
2025-10-29 13:50:59,367 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:50:59,367 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:50:59,367 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:50:59,367 - INFO     - 
================================================================================
2025-10-29 13:50:59,367 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:50:59,367 - INFO     - ================================================================================
2025-10-29 13:50:59,367 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:50:59,367 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:50:59,367 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:50:59,368 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:50:59,368 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:50:59,368 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:50:59,368 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:50:59,368 - INFO     -   - Raw f_after length: 4
2025-10-29 13:50:59,368 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:50:59,368 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:50:59,368 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:50:59,368 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:50:59,368 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:50:59,368 - INFO     -   - ts1_id: 4
2025-10-29 13:50:59,369 - INFO     -   - ts2_id: 2
2025-10-29 13:50:59,369 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:50:59,369 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:50:59,369 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:50:59,369 - INFO     -   - Product space size: 4
2025-10-29 13:50:59,369 - INFO     -   - Using product state mapping
2025-10-29 13:50:59,369 - INFO     -   - f_before_product length: 4
2025-10-29 13:50:59,369 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:50:59,369 - INFO     -   - avg_f_after:  0.7500 (4 valid states)
2025-10-29 13:50:59,369 - INFO     -   - delta: 0.0000
2025-10-29 13:50:59,369 - INFO     -   - f_stability: 1.0 - |0.0000| / 0.7500 = 1.0000
2025-10-29 13:50:59,370 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:50:59,370 - INFO     -   - Compared 4 values
2025-10-29 13:50:59,370 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:50:59,370 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:50:59,370 - INFO     -   - states_before: 4
2025-10-29 13:50:59,370 - INFO     -   - states_after: 4
2025-10-29 13:50:59,370 - INFO     -   - delta_states: 0
2025-10-29 13:50:59,370 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:50:59,370 - INFO     -   - ts1_transitions: 3
2025-10-29 13:50:59,370 - INFO     -   - ts2_transitions: 5
2025-10-29 13:50:59,370 - INFO     -   - merged_transitions: 15
2025-10-29 13:50:59,370 - INFO     -   - transition_density_change: 1.7500
2025-10-29 13:50:59,370 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:50:59,370 - INFO     -   - search_signals present: True
2025-10-29 13:50:59,370 - INFO     -   - nodes_expanded: 4
2025-10-29 13:50:59,371 - INFO     -   - search_depth: 0
2025-10-29 13:50:59,371 - INFO     -   - solution_cost: 0
2025-10-29 13:50:59,371 - INFO     -   - branching_factor: 3.7500
2025-10-29 13:50:59,371 - INFO     -   - solution_found: True
2025-10-29 13:50:59,371 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:50:59,371 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:50:59,371 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:50:59,371 - INFO     -   - TS4(2) + TS2(2) → 4 states
2025-10-29 13:50:59,371 - INFO     -   - f_stability=1.000
2025-10-29 13:50:59,371 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:50:59,371 - INFO     -   - solution_found=True
2025-10-29 13:50:59,372 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:50:59,372 - INFO     - 
  Extracted signals:
2025-10-29 13:50:59,372 - INFO     -     - iteration: 1
2025-10-29 13:50:59,372 - INFO     -     - states_before: 4
2025-10-29 13:50:59,372 - INFO     -     - states_after: 4
2025-10-29 13:50:59,372 - INFO     -     - delta_states: 0
2025-10-29 13:50:59,372 - INFO     -     - f_value_stability: 1.0000
2025-10-29 13:50:59,372 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:50:59,372 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:50:59,372 - INFO     -     - nodes_expanded: 4
2025-10-29 13:50:59,372 - INFO     -     - search_depth: 0
2025-10-29 13:50:59,372 - INFO     -     - solution_cost: 0
2025-10-29 13:50:59,372 - INFO     -     - branching_factor: 3.7500
2025-10-29 13:50:59,372 - INFO     -     - solution_found: True
2025-10-29 13:50:59,372 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:50:59,373 - INFO     - 
  Computing reward:
2025-10-29 13:50:59,373 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:50:59,373 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:50:59,373 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:50:59,373 - INFO     -   [1] BRANCHING FACTOR: 3.750 → score 0.600 (tolerable)
2025-10-29 13:50:59,373 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:50:59,373 - INFO     -   [3] F-VALUE STABILITY: 0.260
2025-10-29 13:50:59,373 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:50:59,373 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:50:59,373 - INFO     - 
  [COMPOSITE]: 0.491
2025-10-29 13:50:59,374 - INFO     -     = 0.300*0.600 (bf)
2025-10-29 13:50:59,374 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:50:59,374 - INFO     -     + 0.350*0.260 (stability)
2025-10-29 13:50:59,374 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:50:59,374 - INFO     - 
  [BONUSES]:
2025-10-29 13:50:59,374 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:50:59,374 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:50:59,374 - INFO     - 
  [FINAL REWARD]: 0.1819
2025-10-29 13:50:59,374 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:50:59,374 - INFO     -     ✓ Reward computed: 0.1819
2025-10-29 13:50:59,374 - INFO     - 
  Reward component breakdown:
2025-10-29 13:50:59,374 - INFO     -     - bf_score                       0.6000
2025-10-29 13:50:59,374 - INFO     -     - depth_score                    0.5000
2025-10-29 13:50:59,374 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:50:59,375 - INFO     -     - f_stability                    0.2598
2025-10-29 13:50:59,375 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:50:59,375 - INFO     -     - state_score                    0.8000
2025-10-29 13:50:59,375 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:50:59,375 - INFO     -     - composite                      0.4909
2025-10-29 13:50:59,375 - INFO     -     - total                          0.1819
2025-10-29 13:50:59,375 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:50:59,375 - INFO     -   Num remaining nodes: 7
2025-10-29 13:50:59,375 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:50:59,375 - INFO     -   Done: False
2025-10-29 13:50:59,375 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:50:59,377 - INFO     -   ✓ Observation built successfully
2025-10-29 13:50:59,377 - INFO     -     - x shape: (100, 19)
2025-10-29 13:50:59,377 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:50:59,377 - INFO     -     - num_nodes: 7
2025-10-29 13:50:59,377 - INFO     -     - num_edges: 30
2025-10-29 13:50:59,377 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:50:59,377 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:50:59,377 - INFO     -   After: current_merge_step = 2
2025-10-29 13:50:59,377 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:50:59,377 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:50:59,377 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:50:59,378 - INFO     -   ✓ Step logged
2025-10-29 13:50:59,378 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:50:59,378 - INFO     -   Returning:
2025-10-29 13:50:59,378 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:50:59,378 - INFO     -     - reward: 0.1819
2025-10-29 13:50:59,378 - INFO     -     - done: False
2025-10-29 13:50:59,378 - INFO     -     - truncated: False
2025-10-29 13:50:59,378 - INFO     -     - info: 19 keys
2025-10-29 13:50:59,378 - INFO     - ==========================================================================================

2025-10-29 13:50:59,384 - INFO     - 
==========================================================================================
2025-10-29 13:50:59,384 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:50:59,384 - INFO     - ==========================================================================================
2025-10-29 13:50:59,384 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:50:59,384 - INFO     -   Input action: 21 (type: int)
2025-10-29 13:50:59,384 - INFO     -   Available edges in graph: 30
2025-10-29 13:50:59,384 - INFO     -   Action index calculation:
2025-10-29 13:50:59,384 - INFO     -     - action % max(num_valid_edges, 1) = 21 % 30 = 21
2025-10-29 13:50:59,385 - INFO     -     - clamped to [0, 29]: 21
2025-10-29 13:50:59,385 - INFO     -   ✓ Extracted merge pair from edge 21: (9, 7)
2025-10-29 13:50:59,385 - INFO     -   ✓ Validation passed
2025-10-29 13:50:59,385 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:50:59,385 - INFO     -     - Total states before merge: 30
2025-10-29 13:50:59,385 - INFO     -     - Num nodes: 7
2025-10-29 13:50:59,385 - INFO     -     - Num edges: 30
2025-10-29 13:50:59,385 - INFO     - 
    Nodes being merged:
2025-10-29 13:50:59,385 - INFO     -       - Node 9: 4 states
2025-10-29 13:50:59,385 - INFO     -       - Node 7: 5 states
2025-10-29 13:50:59,385 - INFO     -       - Expected product: 20 states
2025-10-29 13:50:59,385 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:50:59,390 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:50:59,390 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:50:59,390 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:50:59,491 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:50:59,491 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:50:59,491 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:50:59,492 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:50:59,492 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:50:59,492 - INFO     -   Calling graph_tracker.merge_nodes([9, 7])...
2025-10-29 13:50:59,492 - INFO     - Attempting merge of nodes 9 and 7...
2025-10-29 13:50:59,493 - INFO     - Successfully merged nodes into new node 11 with 20 states.
2025-10-29 13:50:59,493 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:50:59,493 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:50:59,493 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:50:59,493 - INFO     - 
================================================================================
2025-10-29 13:50:59,493 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:50:59,493 - INFO     - ================================================================================
2025-10-29 13:50:59,493 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:50:59,493 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:50:59,493 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:50:59,494 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:50:59,494 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:50:59,494 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:50:59,494 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:50:59,494 - INFO     -   - Raw f_after length: 20
2025-10-29 13:50:59,496 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:50:59,496 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:50:59,496 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:50:59,496 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:50:59,496 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:50:59,496 - INFO     -   - ts1_id: 9
2025-10-29 13:50:59,496 - INFO     -   - ts2_id: 7
2025-10-29 13:50:59,496 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:50:59,496 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:50:59,496 - INFO     -   - ts1_size: 4, ts2_size: 5
2025-10-29 13:50:59,496 - INFO     -   - Product space size: 20
2025-10-29 13:50:59,496 - INFO     -   - Using product state mapping
2025-10-29 13:50:59,496 - INFO     -   - f_before_product length: 20
2025-10-29 13:50:59,496 - INFO     -   - avg_f_before: 2.8000 (20 valid states)
2025-10-29 13:50:59,496 - INFO     -   - avg_f_after:  4.1000 (20 valid states)
2025-10-29 13:50:59,496 - INFO     -   - delta: 1.3000
2025-10-29 13:50:59,496 - INFO     -   - f_stability: 1.0 - |1.3000| / 2.8000 = 0.5357
2025-10-29 13:50:59,496 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:50:59,497 - INFO     -   - Compared 9 values
2025-10-29 13:50:59,497 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:50:59,497 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:50:59,497 - INFO     -   - states_before: 20
2025-10-29 13:50:59,497 - INFO     -   - states_after: 20
2025-10-29 13:50:59,497 - INFO     -   - delta_states: 0
2025-10-29 13:50:59,497 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:50:59,497 - INFO     -   - ts1_transitions: 20
2025-10-29 13:50:59,497 - INFO     -   - ts2_transitions: 13
2025-10-29 13:50:59,497 - INFO     -   - merged_transitions: 128
2025-10-29 13:50:59,497 - INFO     -   - transition_density_change: 4.7500
2025-10-29 13:50:59,497 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:50:59,498 - INFO     -   - search_signals present: True
2025-10-29 13:50:59,498 - INFO     -   - nodes_expanded: 20
2025-10-29 13:50:59,498 - INFO     -   - search_depth: 2
2025-10-29 13:50:59,498 - INFO     -   - solution_cost: 2
2025-10-29 13:50:59,498 - INFO     -   - branching_factor: 6.4000
2025-10-29 13:50:59,498 - INFO     -   - solution_found: True
2025-10-29 13:50:59,498 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:50:59,498 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:50:59,498 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:50:59,498 - INFO     -   - TS9(4) + TS7(5) → 20 states
2025-10-29 13:50:59,498 - INFO     -   - f_stability=0.536
2025-10-29 13:50:59,498 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:50:59,498 - INFO     -   - solution_found=True
2025-10-29 13:50:59,500 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:50:59,500 - INFO     - 
  Extracted signals:
2025-10-29 13:50:59,500 - INFO     -     - iteration: 2
2025-10-29 13:50:59,500 - INFO     -     - states_before: 20
2025-10-29 13:50:59,500 - INFO     -     - states_after: 20
2025-10-29 13:50:59,501 - INFO     -     - delta_states: 0
2025-10-29 13:50:59,501 - INFO     -     - f_value_stability: 0.5357
2025-10-29 13:50:59,501 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:50:59,501 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:50:59,501 - INFO     -     - nodes_expanded: 20
2025-10-29 13:50:59,501 - INFO     -     - search_depth: 2
2025-10-29 13:50:59,501 - INFO     -     - solution_cost: 2
2025-10-29 13:50:59,501 - INFO     -     - branching_factor: 6.4000
2025-10-29 13:50:59,501 - INFO     -     - solution_found: True
2025-10-29 13:50:59,501 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:50:59,501 - INFO     - 
  Computing reward:
2025-10-29 13:50:59,501 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:50:59,501 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:50:59,502 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:50:59,502 - INFO     -   [1] BRANCHING FACTOR: 6.400 → score 0.260 (high BF, minimal credit)
2025-10-29 13:50:59,502 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:50:59,502 - INFO     -   [3] F-VALUE STABILITY: 0.252
2025-10-29 13:50:59,503 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:50:59,503 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:50:59,503 - INFO     - 
  [COMPOSITE]: 0.458
2025-10-29 13:50:59,503 - INFO     -     = 0.300*0.260 (bf)
2025-10-29 13:50:59,503 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:50:59,503 - INFO     -     + 0.350*0.252 (stability)
2025-10-29 13:50:59,503 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:50:59,503 - INFO     - 
  [BONUSES]:
2025-10-29 13:50:59,503 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:50:59,503 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:50:59,504 - INFO     - 
  [FINAL REWARD]: 0.1167
2025-10-29 13:50:59,504 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:50:59,504 - INFO     -     ✓ Reward computed: 0.1167
2025-10-29 13:50:59,504 - INFO     - 
  Reward component breakdown:
2025-10-29 13:50:59,504 - INFO     -     - bf_score                       0.2600
2025-10-29 13:50:59,504 - INFO     -     - depth_score                    0.8603
2025-10-29 13:50:59,504 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:50:59,504 - INFO     -     - f_stability                    0.2523
2025-10-29 13:50:59,504 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:50:59,504 - INFO     -     - state_score                    0.8000
2025-10-29 13:50:59,504 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:50:59,504 - INFO     -     - composite                      0.4584
2025-10-29 13:50:59,505 - INFO     -     - total                          0.1167
2025-10-29 13:50:59,505 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:50:59,505 - INFO     -   Num remaining nodes: 6
2025-10-29 13:50:59,505 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:50:59,505 - INFO     -   Done: False
2025-10-29 13:50:59,505 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:50:59,507 - INFO     -   ✓ Observation built successfully
2025-10-29 13:50:59,507 - INFO     -     - x shape: (100, 19)
2025-10-29 13:50:59,507 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:50:59,507 - INFO     -     - num_nodes: 6
2025-10-29 13:50:59,507 - INFO     -     - num_edges: 24
2025-10-29 13:50:59,507 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:50:59,507 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:50:59,507 - INFO     -   After: current_merge_step = 3
2025-10-29 13:50:59,507 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:50:59,507 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:50:59,507 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:50:59,508 - INFO     -   ✓ Step logged
2025-10-29 13:50:59,508 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:50:59,508 - INFO     -   Returning:
2025-10-29 13:50:59,509 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:50:59,509 - INFO     -     - reward: 0.1167
2025-10-29 13:50:59,509 - INFO     -     - done: False
2025-10-29 13:50:59,509 - INFO     -     - truncated: False
2025-10-29 13:50:59,509 - INFO     -     - info: 19 keys
2025-10-29 13:50:59,509 - INFO     - ==========================================================================================

2025-10-29 13:50:59,514 - INFO     - 
==========================================================================================
2025-10-29 13:50:59,514 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:50:59,514 - INFO     - ==========================================================================================
2025-10-29 13:50:59,514 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:50:59,514 - INFO     -   Input action: 8 (type: int)
2025-10-29 13:50:59,515 - INFO     -   Available edges in graph: 24
2025-10-29 13:50:59,515 - INFO     -   Action index calculation:
2025-10-29 13:50:59,515 - INFO     -     - action % max(num_valid_edges, 1) = 8 % 24 = 8
2025-10-29 13:50:59,515 - INFO     -     - clamped to [0, 23]: 8
2025-10-29 13:50:59,515 - INFO     -   ✓ Extracted merge pair from edge 8: (6, 0)
2025-10-29 13:50:59,515 - INFO     -   ✓ Validation passed
2025-10-29 13:50:59,515 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:50:59,515 - INFO     -     - Total states before merge: 41
2025-10-29 13:50:59,515 - INFO     -     - Num nodes: 6
2025-10-29 13:50:59,515 - INFO     -     - Num edges: 24
2025-10-29 13:50:59,515 - INFO     - 
    Nodes being merged:
2025-10-29 13:50:59,515 - INFO     -       - Node 6: 5 states
2025-10-29 13:50:59,515 - INFO     -       - Node 0: 2 states
2025-10-29 13:50:59,515 - INFO     -       - Expected product: 10 states
2025-10-29 13:50:59,515 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:50:59,521 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:50:59,521 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:50:59,521 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:50:59,622 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:50:59,622 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:50:59,622 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:50:59,622 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:50:59,622 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:50:59,622 - INFO     -   Calling graph_tracker.merge_nodes([6, 0])...
2025-10-29 13:50:59,622 - INFO     - Attempting merge of nodes 6 and 0...
2025-10-29 13:50:59,622 - INFO     - Successfully merged nodes into new node 12 with 10 states.
2025-10-29 13:50:59,624 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:50:59,624 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:50:59,624 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:50:59,624 - INFO     - 
================================================================================
2025-10-29 13:50:59,624 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:50:59,624 - INFO     - ================================================================================
2025-10-29 13:50:59,624 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:50:59,624 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:50:59,624 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:50:59,624 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:50:59,625 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:50:59,625 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:50:59,625 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:50:59,625 - INFO     -   - Raw f_after length: 10
2025-10-29 13:50:59,625 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:50:59,625 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:50:59,625 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:50:59,625 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:50:59,625 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:50:59,625 - INFO     -   - ts1_id: 6
2025-10-29 13:50:59,625 - INFO     -   - ts2_id: 0
2025-10-29 13:50:59,625 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:50:59,625 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:50:59,625 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:50:59,625 - INFO     -   - Product space size: 10
2025-10-29 13:50:59,625 - INFO     -   - Using product state mapping
2025-10-29 13:50:59,625 - INFO     -   - f_before_product length: 10
2025-10-29 13:50:59,626 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:50:59,626 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:50:59,626 - INFO     -   - delta: 0.4000
2025-10-29 13:50:59,626 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:50:59,626 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:50:59,626 - INFO     -   - Compared 7 values
2025-10-29 13:50:59,626 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:50:59,626 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:50:59,626 - INFO     -   - states_before: 10
2025-10-29 13:50:59,626 - INFO     -   - states_after: 10
2025-10-29 13:50:59,626 - INFO     -   - delta_states: 0
2025-10-29 13:50:59,626 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:50:59,626 - INFO     -   - ts1_transitions: 13
2025-10-29 13:50:59,626 - INFO     -   - ts2_transitions: 5
2025-10-29 13:50:59,626 - INFO     -   - merged_transitions: 40
2025-10-29 13:50:59,626 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:50:59,626 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:50:59,627 - INFO     -   - search_signals present: True
2025-10-29 13:50:59,627 - INFO     -   - nodes_expanded: 10
2025-10-29 13:50:59,627 - INFO     -   - search_depth: 1
2025-10-29 13:50:59,627 - INFO     -   - solution_cost: 0
2025-10-29 13:50:59,627 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:50:59,627 - INFO     -   - solution_found: True
2025-10-29 13:50:59,627 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:50:59,627 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:50:59,627 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:50:59,627 - INFO     -   - TS6(5) + TS0(2) → 10 states
2025-10-29 13:50:59,627 - INFO     -   - f_stability=0.862
2025-10-29 13:50:59,627 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:50:59,627 - INFO     -   - solution_found=True
2025-10-29 13:50:59,627 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:50:59,628 - INFO     - 
  Extracted signals:
2025-10-29 13:50:59,628 - INFO     -     - iteration: 3
2025-10-29 13:50:59,628 - INFO     -     - states_before: 10
2025-10-29 13:50:59,628 - INFO     -     - states_after: 10
2025-10-29 13:50:59,628 - INFO     -     - delta_states: 0
2025-10-29 13:50:59,628 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:50:59,628 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:50:59,628 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:50:59,628 - INFO     -     - nodes_expanded: 10
2025-10-29 13:50:59,628 - INFO     -     - search_depth: 1
2025-10-29 13:50:59,628 - INFO     -     - solution_cost: 0
2025-10-29 13:50:59,628 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:50:59,628 - INFO     -     - solution_found: True
2025-10-29 13:50:59,628 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:50:59,628 - INFO     - 
  Computing reward:
2025-10-29 13:50:59,628 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:50:59,628 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:50:59,629 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:50:59,629 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:50:59,629 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:50:59,629 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:50:59,629 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:50:59,629 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:50:59,629 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:50:59,629 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:50:59,629 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:50:59,629 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:50:59,629 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:50:59,629 - INFO     - 
  [BONUSES]:
2025-10-29 13:50:59,630 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:50:59,630 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:50:59,630 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:50:59,630 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:50:59,630 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:50:59,630 - INFO     - 
  Reward component breakdown:
2025-10-29 13:50:59,630 - INFO     -     - bf_score                       0.5667
2025-10-29 13:50:59,630 - INFO     -     - depth_score                    0.9119
2025-10-29 13:50:59,630 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:50:59,630 - INFO     -     - f_stability                    0.2913
2025-10-29 13:50:59,630 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:50:59,630 - INFO     -     - state_score                    0.8000
2025-10-29 13:50:59,630 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:50:59,630 - INFO     -     - composite                      0.5743
2025-10-29 13:50:59,630 - INFO     -     - total                          0.3487
2025-10-29 13:50:59,630 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:50:59,630 - INFO     -   Num remaining nodes: 5
2025-10-29 13:50:59,631 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:50:59,631 - INFO     -   Done: False
2025-10-29 13:50:59,631 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:50:59,631 - INFO     -   ✓ Observation built successfully
2025-10-29 13:50:59,631 - INFO     -     - x shape: (100, 19)
2025-10-29 13:50:59,631 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:50:59,631 - INFO     -     - num_nodes: 5
2025-10-29 13:50:59,631 - INFO     -     - num_edges: 18
2025-10-29 13:50:59,631 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:50:59,631 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:50:59,632 - INFO     -   After: current_merge_step = 4
2025-10-29 13:50:59,632 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:50:59,632 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:50:59,632 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:50:59,632 - INFO     -   ✓ Step logged
2025-10-29 13:50:59,632 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:50:59,632 - INFO     -   Returning:
2025-10-29 13:50:59,632 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:50:59,632 - INFO     -     - reward: 0.3487
2025-10-29 13:50:59,633 - INFO     -     - done: False
2025-10-29 13:50:59,633 - INFO     -     - truncated: False
2025-10-29 13:50:59,633 - INFO     -     - info: 19 keys
2025-10-29 13:50:59,633 - INFO     - ==========================================================================================

2025-10-29 13:50:59,637 - INFO     - 
==========================================================================================
2025-10-29 13:50:59,637 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:50:59,637 - INFO     - ==========================================================================================
2025-10-29 13:50:59,637 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:50:59,637 - INFO     -   Input action: 9 (type: int)
2025-10-29 13:50:59,637 - INFO     -   Available edges in graph: 18
2025-10-29 13:50:59,637 - INFO     -   Action index calculation:
2025-10-29 13:50:59,637 - INFO     -     - action % max(num_valid_edges, 1) = 9 % 18 = 9
2025-10-29 13:50:59,637 - INFO     -     - clamped to [0, 17]: 9
2025-10-29 13:50:59,637 - INFO     -   ✓ Extracted merge pair from edge 9: (10, 12)
2025-10-29 13:50:59,637 - INFO     -   ✓ Validation passed
2025-10-29 13:50:59,637 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:50:59,637 - INFO     -     - Total states before merge: 44
2025-10-29 13:50:59,637 - INFO     -     - Num nodes: 5
2025-10-29 13:50:59,638 - INFO     -     - Num edges: 18
2025-10-29 13:50:59,638 - INFO     - 
    Nodes being merged:
2025-10-29 13:50:59,638 - INFO     -       - Node 10: 4 states
2025-10-29 13:50:59,638 - INFO     -       - Node 12: 10 states
2025-10-29 13:50:59,638 - INFO     -       - Expected product: 40 states
2025-10-29 13:50:59,638 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:50:59,645 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:50:59,645 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:50:59,645 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:50:59,746 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:50:59,746 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:50:59,746 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:50:59,747 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:50:59,747 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:50:59,747 - INFO     -   Calling graph_tracker.merge_nodes([10, 12])...
2025-10-29 13:50:59,747 - INFO     - Attempting merge of nodes 10 and 12...
2025-10-29 13:50:59,747 - INFO     - Successfully merged nodes into new node 13 with 40 states.
2025-10-29 13:50:59,747 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:50:59,748 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:50:59,748 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:50:59,748 - INFO     - 
================================================================================
2025-10-29 13:50:59,748 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:50:59,748 - INFO     - ================================================================================
2025-10-29 13:50:59,748 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:50:59,748 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:50:59,748 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:50:59,749 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:50:59,749 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:50:59,749 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:50:59,750 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:50:59,750 - INFO     -   - Raw f_after length: 40
2025-10-29 13:50:59,750 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:50:59,750 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:50:59,750 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:50:59,750 - INFO     -   - after_valid: 40 / 40 (removed 0)
2025-10-29 13:50:59,750 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:50:59,750 - INFO     -   - ts1_id: 10
2025-10-29 13:50:59,750 - INFO     -   - ts2_id: 12
2025-10-29 13:50:59,750 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:50:59,750 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:50:59,750 - INFO     -   - ts1_size: 4, ts2_size: 10
2025-10-29 13:50:59,750 - INFO     -   - Product space size: 40
2025-10-29 13:50:59,750 - INFO     -   - Using product state mapping
2025-10-29 13:50:59,751 - INFO     -   - f_before_product length: 40
2025-10-29 13:50:59,751 - INFO     -   - avg_f_before: 3.3750 (40 valid states)
2025-10-29 13:50:59,751 - INFO     -   - avg_f_after:  4.1250 (40 valid states)
2025-10-29 13:50:59,751 - INFO     -   - delta: 0.7500
2025-10-29 13:50:59,751 - INFO     -   - f_stability: 1.0 - |0.7500| / 3.3750 = 0.7778
2025-10-29 13:50:59,751 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:50:59,751 - INFO     -   - Compared 14 values
2025-10-29 13:50:59,751 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:50:59,751 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:50:59,751 - INFO     -   - states_before: 40
2025-10-29 13:50:59,752 - INFO     -   - states_after: 40
2025-10-29 13:50:59,752 - INFO     -   - delta_states: 0
2025-10-29 13:50:59,752 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:50:59,752 - INFO     -   - ts1_transitions: 15
2025-10-29 13:50:59,752 - INFO     -   - ts2_transitions: 40
2025-10-29 13:50:59,752 - INFO     -   - merged_transitions: 340
2025-10-29 13:50:59,752 - INFO     -   - transition_density_change: 7.1250
2025-10-29 13:50:59,752 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:50:59,753 - INFO     -   - search_signals present: True
2025-10-29 13:50:59,753 - INFO     -   - nodes_expanded: 40
2025-10-29 13:50:59,753 - INFO     -   - search_depth: 2
2025-10-29 13:50:59,753 - INFO     -   - solution_cost: 0
2025-10-29 13:50:59,753 - INFO     -   - branching_factor: 8.5000
2025-10-29 13:50:59,753 - INFO     -   - solution_found: True
2025-10-29 13:50:59,753 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:50:59,753 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:50:59,753 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:50:59,753 - INFO     -   - TS10(4) + TS12(10) → 40 states
2025-10-29 13:50:59,753 - INFO     -   - f_stability=0.778
2025-10-29 13:50:59,753 - INFO     -   - A* nodes_expanded=40
2025-10-29 13:50:59,754 - INFO     -   - solution_found=True
2025-10-29 13:50:59,754 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:50:59,754 - INFO     - 
  Extracted signals:
2025-10-29 13:50:59,754 - INFO     -     - iteration: 4
2025-10-29 13:50:59,754 - INFO     -     - states_before: 40
2025-10-29 13:50:59,754 - INFO     -     - states_after: 40
2025-10-29 13:50:59,754 - INFO     -     - delta_states: 0
2025-10-29 13:50:59,754 - INFO     -     - f_value_stability: 0.7778
2025-10-29 13:50:59,754 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:50:59,754 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:50:59,754 - INFO     -     - nodes_expanded: 40
2025-10-29 13:50:59,754 - INFO     -     - search_depth: 2
2025-10-29 13:50:59,754 - INFO     -     - solution_cost: 0
2025-10-29 13:50:59,755 - INFO     -     - branching_factor: 8.5000
2025-10-29 13:50:59,755 - INFO     -     - solution_found: True
2025-10-29 13:50:59,755 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:50:59,755 - WARNING  -     ⚠️  High branching factor: 8.5000
2025-10-29 13:50:59,755 - INFO     - 
  Computing reward:
2025-10-29 13:50:59,755 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:50:59,755 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:50:59,755 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:50:59,755 - INFO     -   [1] BRANCHING FACTOR: 8.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:50:59,755 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:50:59,756 - INFO     -   [3] F-VALUE STABILITY: 0.292
2025-10-29 13:50:59,756 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:50:59,756 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:50:59,756 - INFO     - 
  [COMPOSITE]: 0.424
2025-10-29 13:50:59,756 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:50:59,756 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:50:59,756 - INFO     -     + 0.350*0.292 (stability)
2025-10-29 13:50:59,756 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:50:59,756 - INFO     - 
  [BONUSES]:
2025-10-29 13:50:59,757 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:50:59,757 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:50:59,757 - INFO     - 
  [FINAL REWARD]: 0.0489
2025-10-29 13:50:59,757 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:50:59,757 - INFO     -     ✓ Reward computed: 0.0489
2025-10-29 13:50:59,757 - INFO     - 
  Reward component breakdown:
2025-10-29 13:50:59,757 - INFO     -     - bf_score                       0.1000
2025-10-29 13:50:59,757 - INFO     -     - depth_score                    0.8603
2025-10-29 13:50:59,757 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:50:59,757 - INFO     -     - f_stability                    0.2925
2025-10-29 13:50:59,757 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:50:59,757 - INFO     -     - state_score                    0.8000
2025-10-29 13:50:59,757 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:50:59,757 - INFO     -     - composite                      0.4244
2025-10-29 13:50:59,757 - INFO     -     - total                          0.0489
2025-10-29 13:50:59,758 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:50:59,758 - INFO     -   Num remaining nodes: 4
2025-10-29 13:50:59,758 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:50:59,758 - INFO     -   Done: False
2025-10-29 13:50:59,758 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:50:59,759 - INFO     -   ✓ Observation built successfully
2025-10-29 13:50:59,759 - INFO     -     - x shape: (100, 19)
2025-10-29 13:50:59,759 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:50:59,759 - INFO     -     - num_nodes: 4
2025-10-29 13:50:59,759 - INFO     -     - num_edges: 10
2025-10-29 13:50:59,759 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:50:59,759 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:50:59,759 - INFO     -   After: current_merge_step = 5
2025-10-29 13:50:59,759 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:50:59,759 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:50:59,759 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:50:59,760 - INFO     -   ✓ Step logged
2025-10-29 13:50:59,760 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:50:59,760 - INFO     -   Returning:
2025-10-29 13:50:59,760 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:50:59,760 - INFO     -     - reward: 0.0489
2025-10-29 13:50:59,760 - INFO     -     - done: False
2025-10-29 13:50:59,760 - INFO     -     - truncated: False
2025-10-29 13:50:59,761 - INFO     -     - info: 19 keys
2025-10-29 13:50:59,761 - INFO     - ==========================================================================================

2025-10-29 13:50:59,767 - INFO     - 
==========================================================================================
2025-10-29 13:50:59,767 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:50:59,767 - INFO     - ==========================================================================================
2025-10-29 13:50:59,767 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:50:59,768 - INFO     -   Input action: 6 (type: int)
2025-10-29 13:50:59,768 - INFO     -   Available edges in graph: 10
2025-10-29 13:50:59,768 - INFO     -   Action index calculation:
2025-10-29 13:50:59,768 - INFO     -     - action % max(num_valid_edges, 1) = 6 % 10 = 6
2025-10-29 13:50:59,768 - INFO     -     - clamped to [0, 9]: 6
2025-10-29 13:50:59,768 - INFO     -   ✓ Extracted merge pair from edge 6: (11, 13)
2025-10-29 13:50:59,768 - INFO     -   ✓ Validation passed
2025-10-29 13:50:59,768 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:50:59,768 - INFO     -     - Total states before merge: 70
2025-10-29 13:50:59,768 - INFO     -     - Num nodes: 4
2025-10-29 13:50:59,768 - INFO     -     - Num edges: 10
2025-10-29 13:50:59,768 - INFO     - 
    Nodes being merged:
2025-10-29 13:50:59,768 - INFO     -       - Node 11: 20 states
2025-10-29 13:50:59,768 - INFO     -       - Node 13: 40 states
2025-10-29 13:50:59,768 - INFO     -       - Expected product: 800 states
2025-10-29 13:50:59,769 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:50:59,776 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:50:59,776 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:50:59,776 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:50:59,877 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:50:59,877 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:50:59,877 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:50:59,887 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:50:59,887 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:50:59,887 - INFO     -   Calling graph_tracker.merge_nodes([11, 13])...
2025-10-29 13:50:59,887 - INFO     - Attempting merge of nodes 11 and 13...
2025-10-29 13:50:59,887 - INFO     - Successfully merged nodes into new node 14 with 800 states.
2025-10-29 13:50:59,887 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:50:59,887 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:50:59,887 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:50:59,887 - INFO     - 
================================================================================
2025-10-29 13:50:59,887 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:50:59,888 - INFO     - ================================================================================
2025-10-29 13:50:59,888 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:50:59,888 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:50:59,888 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:50:59,889 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:50:59,889 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:50:59,889 - INFO     -   - Raw ts1_f length: 20
2025-10-29 13:50:59,889 - INFO     -   - Raw ts2_f length: 40
2025-10-29 13:50:59,889 - INFO     -   - Raw f_after length: 800
2025-10-29 13:50:59,889 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:50:59,890 - INFO     -   - ts1_valid: 20 / 20 (removed 0)
2025-10-29 13:50:59,890 - INFO     -   - ts2_valid: 40 / 40 (removed -40)
2025-10-29 13:50:59,890 - INFO     -   - after_valid: 680 / 800 (removed 120)
2025-10-29 13:50:59,890 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:50:59,890 - INFO     -   - ts1_id: 11
2025-10-29 13:50:59,890 - INFO     -   - ts2_id: 13
2025-10-29 13:50:59,890 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:50:59,891 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:50:59,891 - INFO     -   - ts1_size: 20, ts2_size: 40
2025-10-29 13:50:59,891 - INFO     -   - Product space size: 800
2025-10-29 13:50:59,891 - INFO     -   - Using product state mapping
2025-10-29 13:50:59,892 - INFO     -   - f_before_product length: 800
2025-10-29 13:50:59,894 - INFO     -   - avg_f_before: 5.0750 (800 valid states)
2025-10-29 13:50:59,894 - INFO     -   - avg_f_after:  9.0721 (680 valid states)
2025-10-29 13:50:59,894 - INFO     -   - delta: 3.9971
2025-10-29 13:50:59,894 - INFO     -   - f_stability: 1.0 - |3.9971| / 5.0750 = 0.2124
2025-10-29 13:50:59,894 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:50:59,895 - INFO     -   - Compared 60 values
2025-10-29 13:50:59,895 - INFO     -   - Significant changes (> 5.0): 19
2025-10-29 13:50:59,895 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:50:59,895 - INFO     -   - states_before: 800
2025-10-29 13:50:59,895 - INFO     -   - states_after: 800
2025-10-29 13:50:59,895 - INFO     -   - delta_states: 0
2025-10-29 13:50:59,895 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:50:59,895 - INFO     -   - ts1_transitions: 128
2025-10-29 13:50:59,895 - INFO     -   - ts2_transitions: 340
2025-10-29 13:50:59,895 - INFO     -   - merged_transitions: 6720
2025-10-29 13:50:59,895 - INFO     -   - transition_density_change: 7.8150
2025-10-29 13:50:59,895 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:50:59,895 - INFO     -   - search_signals present: True
2025-10-29 13:50:59,895 - INFO     -   - nodes_expanded: 680
2025-10-29 13:50:59,895 - INFO     -   - search_depth: 4
2025-10-29 13:50:59,895 - INFO     -   - solution_cost: 2
2025-10-29 13:50:59,895 - INFO     -   - branching_factor: 9.8824
2025-10-29 13:50:59,896 - INFO     -   - solution_found: True
2025-10-29 13:50:59,896 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:50:59,897 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:50:59,897 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:50:59,897 - INFO     -   - TS11(20) + TS13(40) → 800 states
2025-10-29 13:50:59,897 - INFO     -   - f_stability=0.212
2025-10-29 13:50:59,897 - INFO     -   - A* nodes_expanded=680
2025-10-29 13:50:59,897 - INFO     -   - solution_found=True
2025-10-29 13:50:59,897 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:50:59,897 - INFO     - 
  Extracted signals:
2025-10-29 13:50:59,897 - INFO     -     - iteration: 5
2025-10-29 13:50:59,897 - INFO     -     - states_before: 800
2025-10-29 13:50:59,897 - INFO     -     - states_after: 800
2025-10-29 13:50:59,898 - INFO     -     - delta_states: 0
2025-10-29 13:50:59,898 - INFO     -     - f_value_stability: 0.2124
2025-10-29 13:50:59,898 - INFO     -     - num_significant_f_changes: 19
2025-10-29 13:50:59,898 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:50:59,898 - INFO     -     - nodes_expanded: 680
2025-10-29 13:50:59,898 - INFO     -     - search_depth: 4
2025-10-29 13:50:59,898 - INFO     -     - solution_cost: 2
2025-10-29 13:50:59,898 - INFO     -     - branching_factor: 9.8824
2025-10-29 13:50:59,898 - INFO     -     - solution_found: True
2025-10-29 13:50:59,898 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:50:59,898 - WARNING  -     ⚠️  Poor F-stability: 0.2124
2025-10-29 13:50:59,899 - WARNING  -     ⚠️  High branching factor: 9.8824
2025-10-29 13:50:59,899 - INFO     - 
  Computing reward:
2025-10-29 13:50:59,899 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:50:59,899 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:50:59,899 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:50:59,899 - INFO     -   [1] BRANCHING FACTOR: 9.882 → score 0.100 (high BF, minimal credit)
2025-10-29 13:50:59,899 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:50:59,900 - INFO     -   [3] F-VALUE STABILITY: 0.123
2025-10-29 13:50:59,900 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:50:59,900 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:50:59,900 - INFO     - 
  [COMPOSITE]: 0.352
2025-10-29 13:50:59,900 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:50:59,900 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:50:59,900 - INFO     -     + 0.350*0.123 (stability)
2025-10-29 13:50:59,900 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:50:59,900 - INFO     - 
  [BONUSES]:
2025-10-29 13:50:59,900 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:50:59,901 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:50:59,901 - INFO     - 
  [FINAL REWARD]: -0.0958
2025-10-29 13:50:59,901 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:50:59,901 - INFO     -     ✓ Reward computed: -0.0958
2025-10-29 13:50:59,901 - INFO     - 
  Reward component breakdown:
2025-10-29 13:50:59,901 - INFO     -     - bf_score                       0.1000
2025-10-29 13:50:59,901 - INFO     -     - depth_score                    0.7953
2025-10-29 13:50:59,901 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:50:59,901 - INFO     -     - f_stability                    0.1230
2025-10-29 13:50:59,901 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:50:59,902 - INFO     -     - state_score                    0.8000
2025-10-29 13:50:59,902 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:50:59,902 - INFO     -     - composite                      0.3521
2025-10-29 13:50:59,902 - INFO     -     - total                          -0.0958
2025-10-29 13:50:59,902 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:50:59,902 - INFO     -   Num remaining nodes: 3
2025-10-29 13:50:59,902 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:50:59,902 - INFO     -   Done: False
2025-10-29 13:50:59,902 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:50:59,903 - INFO     -   ✓ Observation built successfully
2025-10-29 13:50:59,903 - INFO     -     - x shape: (100, 19)
2025-10-29 13:50:59,903 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:50:59,903 - INFO     -     - num_nodes: 3
2025-10-29 13:50:59,903 - INFO     -     - num_edges: 4
2025-10-29 13:50:59,903 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:50:59,904 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:50:59,904 - INFO     -   After: current_merge_step = 6
2025-10-29 13:50:59,904 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:50:59,904 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:50:59,904 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:50:59,905 - INFO     -   ✓ Step logged
2025-10-29 13:50:59,905 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:50:59,905 - INFO     -   Returning:
2025-10-29 13:50:59,905 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:50:59,905 - INFO     -     - reward: -0.0958
2025-10-29 13:50:59,906 - INFO     -     - done: False
2025-10-29 13:50:59,906 - INFO     -     - truncated: False
2025-10-29 13:50:59,906 - INFO     -     - info: 19 keys
2025-10-29 13:50:59,906 - INFO     - ==========================================================================================

2025-10-29 13:50:59,911 - INFO     - 
==========================================================================================
2025-10-29 13:50:59,912 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:50:59,912 - INFO     - ==========================================================================================
2025-10-29 13:50:59,912 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:50:59,912 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:50:59,912 - INFO     -   Available edges in graph: 4
2025-10-29 13:50:59,912 - INFO     -   Action index calculation:
2025-10-29 13:50:59,912 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 4 = 3
2025-10-29 13:50:59,912 - INFO     -     - clamped to [0, 3]: 3
2025-10-29 13:50:59,912 - INFO     -   ✓ Extracted merge pair from edge 3: (14, 8)
2025-10-29 13:50:59,912 - INFO     -   ✓ Validation passed
2025-10-29 13:50:59,912 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:50:59,913 - INFO     -     - Total states before merge: 810
2025-10-29 13:50:59,913 - INFO     -     - Num nodes: 3
2025-10-29 13:50:59,913 - INFO     -     - Num edges: 4
2025-10-29 13:50:59,913 - INFO     - 
    Nodes being merged:
2025-10-29 13:50:59,913 - INFO     -       - Node 14: 800 states
2025-10-29 13:50:59,913 - INFO     -       - Node 8: 5 states
2025-10-29 13:50:59,913 - INFO     -       - Expected product: 4000 states
2025-10-29 13:50:59,913 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:50:59,920 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:50:59,920 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:50:59,920 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:51:00,021 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:00,021 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:00,022 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:51:00,284 - INFO     -   ✓ TS file received after 0.26s
2025-10-29 13:51:00,284 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:00,284 - INFO     -   Calling graph_tracker.merge_nodes([14, 8])...
2025-10-29 13:51:00,284 - INFO     - Attempting merge of nodes 14 and 8...
2025-10-29 13:51:00,284 - INFO     - Successfully merged nodes into new node 15 with 4000 states.
2025-10-29 13:51:00,285 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:00,285 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:00,285 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:51:00,285 - INFO     - 
================================================================================
2025-10-29 13:51:00,285 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:51:00,285 - INFO     - ================================================================================
2025-10-29 13:51:00,285 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:00,285 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:51:00,286 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:51:00,289 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:00,289 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:00,289 - INFO     -   - Raw ts1_f length: 680
2025-10-29 13:51:00,289 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:51:00,289 - INFO     -   - Raw f_after length: 3400
2025-10-29 13:51:00,289 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:00,290 - INFO     -   - ts1_valid: 680 / 680 (removed 0)
2025-10-29 13:51:00,290 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:51:00,291 - INFO     -   - after_valid: 2984 / 3400 (removed 416)
2025-10-29 13:51:00,291 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:00,291 - INFO     -   - ts1_id: 14
2025-10-29 13:51:00,291 - INFO     -   - ts2_id: 8
2025-10-29 13:51:00,291 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:00,291 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:00,292 - INFO     -   - ts1_size: 680, ts2_size: 5
2025-10-29 13:51:00,292 - INFO     -   - Product space size: 3400
2025-10-29 13:51:00,292 - INFO     -   - Using product state mapping
2025-10-29 13:51:00,297 - INFO     -   - f_before_product length: 3400
2025-10-29 13:51:00,303 - INFO     -   - avg_f_before: 9.0915 (3400 valid states)
2025-10-29 13:51:00,303 - INFO     -   - avg_f_after:  13.0416 (2984 valid states)
2025-10-29 13:51:00,303 - INFO     -   - delta: 3.9501
2025-10-29 13:51:00,303 - INFO     -   - f_stability: 1.0 - |3.9501| / 9.0915 = 0.5655
2025-10-29 13:51:00,303 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:00,303 - INFO     -   - Compared 685 values
2025-10-29 13:51:00,303 - INFO     -   - Significant changes (> 5.0): 251
2025-10-29 13:51:00,303 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:00,304 - INFO     -   - states_before: 3400
2025-10-29 13:51:00,304 - INFO     -   - states_after: 3400
2025-10-29 13:51:00,304 - INFO     -   - delta_states: 0
2025-10-29 13:51:00,304 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:00,304 - INFO     -   - ts1_transitions: 6002
2025-10-29 13:51:00,304 - INFO     -   - ts2_transitions: 13
2025-10-29 13:51:00,304 - INFO     -   - merged_transitions: 20046
2025-10-29 13:51:00,304 - INFO     -   - transition_density_change: 4.1268
2025-10-29 13:51:00,304 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:00,304 - INFO     -   - search_signals present: True
2025-10-29 13:51:00,304 - INFO     -   - nodes_expanded: 2984
2025-10-29 13:51:00,304 - INFO     -   - search_depth: 6
2025-10-29 13:51:00,304 - INFO     -   - solution_cost: 2
2025-10-29 13:51:00,304 - INFO     -   - branching_factor: 6.7178
2025-10-29 13:51:00,304 - INFO     -   - solution_found: True
2025-10-29 13:51:00,304 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:00,307 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:00,307 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:51:00,307 - INFO     -   - TS14(680) + TS8(5) → 3400 states
2025-10-29 13:51:00,308 - INFO     -   - f_stability=0.566
2025-10-29 13:51:00,308 - INFO     -   - A* nodes_expanded=2984
2025-10-29 13:51:00,308 - INFO     -   - solution_found=True
2025-10-29 13:51:00,308 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:00,308 - INFO     - 
  Extracted signals:
2025-10-29 13:51:00,308 - INFO     -     - iteration: 6
2025-10-29 13:51:00,308 - INFO     -     - states_before: 3400
2025-10-29 13:51:00,308 - INFO     -     - states_after: 3400
2025-10-29 13:51:00,308 - INFO     -     - delta_states: 0
2025-10-29 13:51:00,308 - INFO     -     - f_value_stability: 0.5655
2025-10-29 13:51:00,308 - INFO     -     - num_significant_f_changes: 251
2025-10-29 13:51:00,308 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:00,308 - INFO     -     - nodes_expanded: 2984
2025-10-29 13:51:00,308 - INFO     -     - search_depth: 6
2025-10-29 13:51:00,308 - INFO     -     - solution_cost: 2
2025-10-29 13:51:00,308 - INFO     -     - branching_factor: 6.7178
2025-10-29 13:51:00,309 - INFO     -     - solution_found: True
2025-10-29 13:51:00,309 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:00,309 - INFO     - 
  Computing reward:
2025-10-29 13:51:00,309 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:00,309 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:00,309 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:00,309 - INFO     -   [1] BRANCHING FACTOR: 6.718 → score 0.228 (high BF, minimal credit)
2025-10-29 13:51:00,309 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:51:00,311 - INFO     -   [3] F-VALUE STABILITY: 0.626
2025-10-29 13:51:00,311 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:00,311 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:00,311 - INFO     - 
  [COMPOSITE]: 0.558
2025-10-29 13:51:00,311 - INFO     -     = 0.300*0.228 (bf)
2025-10-29 13:51:00,311 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:51:00,311 - INFO     -     + 0.350*0.626 (stability)
2025-10-29 13:51:00,311 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:00,311 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:00,311 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:00,311 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:00,311 - INFO     - 
  [FINAL REWARD]: 0.5159
2025-10-29 13:51:00,312 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:00,312 - INFO     -     ✓ Reward computed: 0.5159
2025-10-29 13:51:00,312 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:00,312 - INFO     -     - bf_score                       0.2282
2025-10-29 13:51:00,312 - INFO     -     - depth_score                    0.7525
2025-10-29 13:51:00,312 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:00,312 - INFO     -     - f_stability                    0.6256
2025-10-29 13:51:00,312 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:00,312 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:00,312 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:00,312 - INFO     -     - composite                      0.5579
2025-10-29 13:51:00,312 - INFO     -     - total                          0.5159
2025-10-29 13:51:00,312 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:00,312 - INFO     -   Num remaining nodes: 2
2025-10-29 13:51:00,312 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:51:00,312 - INFO     -   Done: False
2025-10-29 13:51:00,312 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:00,313 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:00,313 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:00,313 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:00,313 - INFO     -     - num_nodes: 2
2025-10-29 13:51:00,313 - INFO     -     - num_edges: 2
2025-10-29 13:51:00,313 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:00,313 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:51:00,313 - INFO     -   After: current_merge_step = 7
2025-10-29 13:51:00,313 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:00,313 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:00,313 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:00,314 - INFO     -   ✓ Step logged
2025-10-29 13:51:00,314 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:00,314 - INFO     -   Returning:
2025-10-29 13:51:00,314 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:00,314 - INFO     -     - reward: 0.5159
2025-10-29 13:51:00,314 - INFO     -     - done: False
2025-10-29 13:51:00,314 - INFO     -     - truncated: False
2025-10-29 13:51:00,314 - INFO     -     - info: 19 keys
2025-10-29 13:51:00,314 - INFO     - ==========================================================================================

2025-10-29 13:51:00,320 - INFO     - 
==========================================================================================
2025-10-29 13:51:00,320 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:00,320 - INFO     - ==========================================================================================
2025-10-29 13:51:00,320 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:00,320 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:51:00,320 - INFO     -   Available edges in graph: 2
2025-10-29 13:51:00,320 - INFO     -   Action index calculation:
2025-10-29 13:51:00,320 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 2 = 1
2025-10-29 13:51:00,320 - INFO     -     - clamped to [0, 1]: 1
2025-10-29 13:51:00,320 - INFO     -   ✓ Extracted merge pair from edge 1: (15, 5)
2025-10-29 13:51:00,321 - INFO     -   ✓ Validation passed
2025-10-29 13:51:00,321 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:00,321 - INFO     -     - Total states before merge: 4005
2025-10-29 13:51:00,321 - INFO     -     - Num nodes: 2
2025-10-29 13:51:00,321 - INFO     -     - Num edges: 2
2025-10-29 13:51:00,321 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:00,321 - INFO     -       - Node 15: 4000 states
2025-10-29 13:51:00,321 - INFO     -       - Node 5: 5 states
2025-10-29 13:51:00,321 - INFO     -       - Expected product: 20000 states
2025-10-29 13:51:00,321 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:00,330 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:51:00,330 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:00,331 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:51:00,431 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:00,431 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:00,431 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:51:00,651 - INFO     -   ✓ TS file received after 0.22s
2025-10-29 13:51:00,651 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:00,651 - INFO     -   Calling graph_tracker.merge_nodes([15, 5])...
2025-10-29 13:51:00,651 - INFO     - Attempting merge of nodes 15 and 5...
2025-10-29 13:51:00,651 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:51:00,651 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:00,651 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:00,651 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:51:00,651 - INFO     - 
================================================================================
2025-10-29 13:51:00,651 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:51:00,651 - INFO     - ================================================================================
2025-10-29 13:51:00,652 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:00,652 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:51:00,652 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:51:00,656 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:00,656 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:00,656 - INFO     -   - Raw ts1_f length: 791
2025-10-29 13:51:00,656 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:51:00,656 - INFO     -   - Raw f_after length: 3955
2025-10-29 13:51:00,656 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:00,656 - INFO     -   - ts1_valid: 791 / 791 (removed 0)
2025-10-29 13:51:00,656 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:51:00,658 - INFO     -   - after_valid: 3030 / 3955 (removed 925)
2025-10-29 13:51:00,658 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:00,658 - INFO     -   - ts1_id: 15
2025-10-29 13:51:00,658 - INFO     -   - ts2_id: 5
2025-10-29 13:51:00,658 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:00,658 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:00,658 - INFO     -   - ts1_size: 791, ts2_size: 5
2025-10-29 13:51:00,658 - INFO     -   - Product space size: 3955
2025-10-29 13:51:00,658 - INFO     -   - Using product state mapping
2025-10-29 13:51:00,663 - INFO     -   - f_before_product length: 3955
2025-10-29 13:51:00,670 - INFO     -   - avg_f_before: 9.3740 (3955 valid states)
2025-10-29 13:51:00,670 - INFO     -   - avg_f_after:  14.0122 (3030 valid states)
2025-10-29 13:51:00,670 - INFO     -   - delta: 4.6383
2025-10-29 13:51:00,670 - INFO     -   - f_stability: 1.0 - |4.6383| / 9.3740 = 0.5052
2025-10-29 13:51:00,670 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:00,670 - INFO     -   - Compared 796 values
2025-10-29 13:51:00,670 - INFO     -   - Significant changes (> 5.0): 97
2025-10-29 13:51:00,670 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:00,670 - INFO     -   - states_before: 3955
2025-10-29 13:51:00,670 - INFO     -   - states_after: 3955
2025-10-29 13:51:00,670 - INFO     -   - delta_states: 0
2025-10-29 13:51:00,670 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:00,670 - INFO     -   - ts1_transitions: 7520
2025-10-29 13:51:00,670 - INFO     -   - ts2_transitions: 13
2025-10-29 13:51:00,671 - INFO     -   - merged_transitions: 21984
2025-10-29 13:51:00,671 - INFO     -   - transition_density_change: 3.6539
2025-10-29 13:51:00,671 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:00,671 - INFO     -   - search_signals present: True
2025-10-29 13:51:00,671 - INFO     -   - nodes_expanded: 3030
2025-10-29 13:51:00,671 - INFO     -   - search_depth: 7
2025-10-29 13:51:00,671 - INFO     -   - solution_cost: 4
2025-10-29 13:51:00,671 - INFO     -   - branching_factor: 7.2554
2025-10-29 13:51:00,671 - INFO     -   - solution_found: True
2025-10-29 13:51:00,671 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:00,672 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:00,673 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:51:00,673 - INFO     -   - TS15(791) + TS5(5) → 3955 states
2025-10-29 13:51:00,673 - INFO     -   - f_stability=0.505
2025-10-29 13:51:00,673 - INFO     -   - A* nodes_expanded=3030
2025-10-29 13:51:00,673 - INFO     -   - solution_found=True
2025-10-29 13:51:00,673 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:00,673 - INFO     - 
  Extracted signals:
2025-10-29 13:51:00,673 - INFO     -     - iteration: 7
2025-10-29 13:51:00,673 - INFO     -     - states_before: 3955
2025-10-29 13:51:00,673 - INFO     -     - states_after: 3955
2025-10-29 13:51:00,673 - INFO     -     - delta_states: 0
2025-10-29 13:51:00,673 - INFO     -     - f_value_stability: 0.5052
2025-10-29 13:51:00,673 - INFO     -     - num_significant_f_changes: 97
2025-10-29 13:51:00,674 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:00,674 - INFO     -     - nodes_expanded: 3030
2025-10-29 13:51:00,674 - INFO     -     - search_depth: 7
2025-10-29 13:51:00,674 - INFO     -     - solution_cost: 4
2025-10-29 13:51:00,674 - INFO     -     - branching_factor: 7.2554
2025-10-29 13:51:00,674 - INFO     -     - solution_found: True
2025-10-29 13:51:00,674 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:00,674 - INFO     - 
  Computing reward:
2025-10-29 13:51:00,674 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:00,674 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:00,675 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:00,675 - INFO     -   [1] BRANCHING FACTOR: 7.255 → score 0.174 (high BF, minimal credit)
2025-10-29 13:51:00,675 - INFO     -   [2] SOLUTION QUALITY: depth=7 → score 0.736 + bonus 0.300
2025-10-29 13:51:00,676 - INFO     -   [3] F-VALUE STABILITY: 0.628
2025-10-29 13:51:00,676 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:00,676 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:00,676 - INFO     - 
  [COMPOSITE]: 0.539
2025-10-29 13:51:00,676 - INFO     -     = 0.300*0.174 (bf)
2025-10-29 13:51:00,676 - INFO     -     + 0.200*0.736 (depth)
2025-10-29 13:51:00,676 - INFO     -     + 0.350*0.628 (stability)
2025-10-29 13:51:00,676 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:00,676 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:00,676 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:00,677 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:00,677 - INFO     - 
  [FINAL REWARD]: 0.4782
2025-10-29 13:51:00,677 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:00,677 - INFO     -     ✓ Reward computed: 0.4782
2025-10-29 13:51:00,677 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:00,677 - INFO     -     - bf_score                       0.1745
2025-10-29 13:51:00,678 - INFO     -     - depth_score                    0.7356
2025-10-29 13:51:00,678 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:00,678 - INFO     -     - f_stability                    0.6275
2025-10-29 13:51:00,678 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:00,678 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:00,678 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:00,678 - INFO     -     - composite                      0.5391
2025-10-29 13:51:00,678 - INFO     -     - total                          0.4782
2025-10-29 13:51:00,678 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:00,678 - INFO     -   Num remaining nodes: 1
2025-10-29 13:51:00,678 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:51:00,678 - INFO     -   Done: True
2025-10-29 13:51:00,678 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:51:00,678 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:00,679 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:00,679 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:00,679 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:00,679 - INFO     -     - num_nodes: 1
2025-10-29 13:51:00,679 - INFO     -     - num_edges: 0
2025-10-29 13:51:00,679 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:00,679 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:51:00,679 - INFO     -   After: current_merge_step = 8
2025-10-29 13:51:00,679 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:00,679 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:00,679 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:00,680 - INFO     -   ✓ Step logged
2025-10-29 13:51:00,680 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:00,680 - INFO     -   Returning:
2025-10-29 13:51:00,680 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:00,680 - INFO     -     - reward: 0.4782
2025-10-29 13:51:00,680 - INFO     -     - done: True
2025-10-29 13:51:00,680 - INFO     -     - truncated: False
2025-10-29 13:51:00,680 - INFO     -     - info: 19 keys
2025-10-29 13:51:00,680 - INFO     - ==========================================================================================

2025-10-29 13:51:00,760 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:51:00,767 - INFO     - [Handshake] Building FD command:
2025-10-29 13:51:00,767 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:51:00,767 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_00.pddl
2025-10-29 13:51:00,767 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:51:00,770 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:51:01,372 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:51:01,372 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:51:01,372 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:51:01,686 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:51:01,686 - INFO     - Initializing GraphTracker...
2025-10-29 13:51:01,686 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:51:01,686 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:51:01,686 - INFO     -    → Node 0 has 2 states
2025-10-29 13:51:01,687 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:51:01,687 - INFO     -    → Node 1 has 2 states
2025-10-29 13:51:01,687 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:51:01,687 - INFO     -    → Node 2 has 2 states
2025-10-29 13:51:01,687 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:51:01,687 - INFO     -    → Node 3 has 2 states
2025-10-29 13:51:01,687 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:51:01,687 - INFO     -    → Node 4 has 2 states
2025-10-29 13:51:01,687 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:51:01,687 - INFO     -    → Node 5 has 5 states
2025-10-29 13:51:01,687 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:51:01,687 - INFO     -    → Node 6 has 5 states
2025-10-29 13:51:01,687 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:51:01,687 - INFO     -    → Node 7 has 5 states
2025-10-29 13:51:01,687 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:51:01,687 - INFO     -    → Node 8 has 5 states
2025-10-29 13:51:01,687 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:51:01,687 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:51:01,688 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:51:01,688 - INFO     - Added edge (0, 1)
2025-10-29 13:51:01,689 - INFO     - Added edge (0, 2)
2025-10-29 13:51:01,689 - INFO     - Added edge (0, 3)
2025-10-29 13:51:01,689 - INFO     - Added edge (0, 4)
2025-10-29 13:51:01,689 - INFO     - Added edge (0, 5)
2025-10-29 13:51:01,689 - INFO     - Added edge (0, 6)
2025-10-29 13:51:01,689 - INFO     - Added edge (0, 7)
2025-10-29 13:51:01,689 - INFO     - Added edge (0, 8)
2025-10-29 13:51:01,689 - INFO     - Added edge (1, 0)
2025-10-29 13:51:01,689 - INFO     - Added edge (1, 2)
2025-10-29 13:51:01,689 - INFO     - Added edge (1, 3)
2025-10-29 13:51:01,689 - INFO     - Added edge (1, 4)
2025-10-29 13:51:01,689 - INFO     - Added edge (1, 5)
2025-10-29 13:51:01,689 - INFO     - Added edge (1, 6)
2025-10-29 13:51:01,689 - INFO     - Added edge (1, 7)
2025-10-29 13:51:01,689 - INFO     - Added edge (1, 8)
2025-10-29 13:51:01,689 - INFO     - Added edge (2, 0)
2025-10-29 13:51:01,689 - INFO     - Added edge (2, 1)
2025-10-29 13:51:01,689 - INFO     - Added edge (2, 3)
2025-10-29 13:51:01,689 - INFO     - Added edge (2, 4)
2025-10-29 13:51:01,689 - INFO     - Added edge (2, 5)
2025-10-29 13:51:01,689 - INFO     - Added edge (2, 6)
2025-10-29 13:51:01,690 - INFO     - Added edge (2, 7)
2025-10-29 13:51:01,690 - INFO     - Added edge (2, 8)
2025-10-29 13:51:01,690 - INFO     - Added edge (3, 0)
2025-10-29 13:51:01,690 - INFO     - Added edge (3, 1)
2025-10-29 13:51:01,690 - INFO     - Added edge (3, 2)
2025-10-29 13:51:01,690 - INFO     - Added edge (3, 4)
2025-10-29 13:51:01,690 - INFO     - Added edge (3, 5)
2025-10-29 13:51:01,690 - INFO     - Added edge (3, 6)
2025-10-29 13:51:01,690 - INFO     - Added edge (3, 7)
2025-10-29 13:51:01,690 - INFO     - Added edge (3, 8)
2025-10-29 13:51:01,690 - INFO     - Added edge (4, 0)
2025-10-29 13:51:01,690 - INFO     - Added edge (4, 1)
2025-10-29 13:51:01,690 - INFO     - Added edge (4, 2)
2025-10-29 13:51:01,690 - INFO     - Added edge (4, 3)
2025-10-29 13:51:01,690 - INFO     - Added edge (4, 5)
2025-10-29 13:51:01,690 - INFO     - Added edge (4, 6)
2025-10-29 13:51:01,690 - INFO     - Added edge (4, 7)
2025-10-29 13:51:01,690 - INFO     - Added edge (4, 8)
2025-10-29 13:51:01,690 - INFO     - Added edge (5, 0)
2025-10-29 13:51:01,690 - INFO     - Added edge (5, 1)
2025-10-29 13:51:01,691 - INFO     - Added edge (5, 2)
2025-10-29 13:51:01,691 - INFO     - Added edge (5, 3)
2025-10-29 13:51:01,691 - INFO     - Added edge (5, 4)
2025-10-29 13:51:01,691 - INFO     - Added edge (6, 0)
2025-10-29 13:51:01,691 - INFO     - Added edge (6, 1)
2025-10-29 13:51:01,691 - INFO     - Added edge (6, 2)
2025-10-29 13:51:01,691 - INFO     - Added edge (6, 3)
2025-10-29 13:51:01,691 - INFO     - Added edge (6, 4)
2025-10-29 13:51:01,691 - INFO     - Added edge (7, 0)
2025-10-29 13:51:01,691 - INFO     - Added edge (7, 1)
2025-10-29 13:51:01,691 - INFO     - Added edge (7, 2)
2025-10-29 13:51:01,691 - INFO     - Added edge (7, 3)
2025-10-29 13:51:01,691 - INFO     - Added edge (7, 4)
2025-10-29 13:51:01,691 - INFO     - Added edge (8, 0)
2025-10-29 13:51:01,691 - INFO     - Added edge (8, 1)
2025-10-29 13:51:01,691 - INFO     - Added edge (8, 2)
2025-10-29 13:51:01,691 - INFO     - Added edge (8, 3)
2025-10-29 13:51:01,691 - INFO     - Added edge (8, 4)
2025-10-29 13:51:01,691 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:51:01,699 - INFO     - 
==========================================================================================
2025-10-29 13:51:01,700 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:01,701 - INFO     - ==========================================================================================
2025-10-29 13:51:01,701 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:01,701 - INFO     -   Input action: 25 (type: int)
2025-10-29 13:51:01,701 - INFO     -   Available edges in graph: 60
2025-10-29 13:51:01,701 - INFO     -   Action index calculation:
2025-10-29 13:51:01,701 - INFO     -     - action % max(num_valid_edges, 1) = 25 % 60 = 25
2025-10-29 13:51:01,701 - INFO     -     - clamped to [0, 59]: 25
2025-10-29 13:51:01,701 - INFO     -   ✓ Extracted merge pair from edge 25: (3, 1)
2025-10-29 13:51:01,701 - INFO     -   ✓ Validation passed
2025-10-29 13:51:01,701 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:01,701 - INFO     -     - Total states before merge: 30
2025-10-29 13:51:01,701 - INFO     -     - Num nodes: 9
2025-10-29 13:51:01,701 - INFO     -     - Num edges: 60
2025-10-29 13:51:01,701 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:01,701 - INFO     -       - Node 3: 2 states
2025-10-29 13:51:01,701 - INFO     -       - Node 1: 2 states
2025-10-29 13:51:01,701 - INFO     -       - Expected product: 4 states
2025-10-29 13:51:01,702 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:01,726 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:51:01,726 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:01,726 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:51:01,827 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:01,827 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:01,827 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:51:01,827 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:01,827 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:01,827 - INFO     -   Calling graph_tracker.merge_nodes([3, 1])...
2025-10-29 13:51:01,827 - INFO     - Attempting merge of nodes 3 and 1...
2025-10-29 13:51:01,827 - INFO     - Successfully merged nodes into new node 9 with 4 states.
2025-10-29 13:51:01,827 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:01,827 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:01,827 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:51:01,827 - INFO     - 
================================================================================
2025-10-29 13:51:01,828 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:51:01,828 - INFO     - ================================================================================
2025-10-29 13:51:01,828 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:01,828 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:51:01,828 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:51:01,828 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:01,828 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:01,829 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:01,829 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:01,829 - INFO     -   - Raw f_after length: 4
2025-10-29 13:51:01,829 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:01,829 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:01,829 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:01,829 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:51:01,829 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:01,829 - INFO     -   - ts1_id: 3
2025-10-29 13:51:01,829 - INFO     -   - ts2_id: 1
2025-10-29 13:51:01,829 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:01,829 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:01,829 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:51:01,829 - INFO     -   - Product space size: 4
2025-10-29 13:51:01,829 - INFO     -   - Using product state mapping
2025-10-29 13:51:01,829 - INFO     -   - f_before_product length: 4
2025-10-29 13:51:01,830 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:51:01,830 - INFO     -   - avg_f_after:  1.0000 (4 valid states)
2025-10-29 13:51:01,830 - INFO     -   - delta: 0.2500
2025-10-29 13:51:01,830 - INFO     -   - f_stability: 1.0 - |0.2500| / 0.7500 = 0.6667
2025-10-29 13:51:01,830 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:01,830 - INFO     -   - Compared 4 values
2025-10-29 13:51:01,830 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:01,830 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:01,830 - INFO     -   - states_before: 4
2025-10-29 13:51:01,830 - INFO     -   - states_after: 4
2025-10-29 13:51:01,830 - INFO     -   - delta_states: 0
2025-10-29 13:51:01,830 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:01,831 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:01,831 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:01,831 - INFO     -   - merged_transitions: 20
2025-10-29 13:51:01,831 - INFO     -   - transition_density_change: 2.5000
2025-10-29 13:51:01,831 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:01,832 - INFO     -   - search_signals present: True
2025-10-29 13:51:01,832 - INFO     -   - nodes_expanded: 4
2025-10-29 13:51:01,832 - INFO     -   - search_depth: 0
2025-10-29 13:51:01,832 - INFO     -   - solution_cost: 0
2025-10-29 13:51:01,832 - INFO     -   - branching_factor: 5.0000
2025-10-29 13:51:01,832 - INFO     -   - solution_found: True
2025-10-29 13:51:01,832 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:01,832 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:01,832 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:51:01,832 - INFO     -   - TS3(2) + TS1(2) → 4 states
2025-10-29 13:51:01,834 - INFO     -   - f_stability=0.667
2025-10-29 13:51:01,834 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:51:01,834 - INFO     -   - solution_found=True
2025-10-29 13:51:01,834 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:01,834 - INFO     - 
  Extracted signals:
2025-10-29 13:51:01,834 - INFO     -     - iteration: 0
2025-10-29 13:51:01,834 - INFO     -     - states_before: 4
2025-10-29 13:51:01,834 - INFO     -     - states_after: 4
2025-10-29 13:51:01,834 - INFO     -     - delta_states: 0
2025-10-29 13:51:01,834 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:51:01,834 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:01,834 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:01,834 - INFO     -     - nodes_expanded: 4
2025-10-29 13:51:01,834 - INFO     -     - search_depth: 0
2025-10-29 13:51:01,834 - INFO     -     - solution_cost: 0
2025-10-29 13:51:01,834 - INFO     -     - branching_factor: 5.0000
2025-10-29 13:51:01,835 - INFO     -     - solution_found: True
2025-10-29 13:51:01,835 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:01,835 - INFO     - 
  Computing reward:
2025-10-29 13:51:01,835 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:01,835 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:01,835 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:01,835 - INFO     -   [1] BRANCHING FACTOR: 5.000 → score 0.433 (tolerable)
2025-10-29 13:51:01,835 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:51:01,835 - INFO     -   [3] F-VALUE STABILITY: 0.176
2025-10-29 13:51:01,835 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:01,835 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:01,836 - INFO     - 
  [COMPOSITE]: 0.412
2025-10-29 13:51:01,836 - INFO     -     = 0.300*0.433 (bf)
2025-10-29 13:51:01,836 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:51:01,836 - INFO     -     + 0.350*0.176 (stability)
2025-10-29 13:51:01,836 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:01,836 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:01,836 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:01,836 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:01,836 - INFO     - 
  [FINAL REWARD]: 0.0230
2025-10-29 13:51:01,836 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:01,836 - INFO     -     ✓ Reward computed: 0.0230
2025-10-29 13:51:01,836 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:01,837 - INFO     -     - bf_score                       0.4333
2025-10-29 13:51:01,837 - INFO     -     - depth_score                    0.5000
2025-10-29 13:51:01,837 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:01,837 - INFO     -     - f_stability                    0.1757
2025-10-29 13:51:01,837 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:01,837 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:01,837 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:01,837 - INFO     -     - composite                      0.4115
2025-10-29 13:51:01,837 - INFO     -     - total                          0.0230
2025-10-29 13:51:01,837 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:01,838 - INFO     -   Num remaining nodes: 8
2025-10-29 13:51:01,838 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:51:01,838 - INFO     -   Done: False
2025-10-29 13:51:01,838 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:01,839 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:01,839 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:01,839 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:01,839 - INFO     -     - num_nodes: 8
2025-10-29 13:51:01,839 - INFO     -     - num_edges: 44
2025-10-29 13:51:01,839 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:01,839 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:51:01,839 - INFO     -   After: current_merge_step = 1
2025-10-29 13:51:01,839 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:01,839 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:01,839 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:01,840 - INFO     -   ✓ Step logged
2025-10-29 13:51:01,840 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:01,840 - INFO     -   Returning:
2025-10-29 13:51:01,840 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:01,840 - INFO     -     - reward: 0.0230
2025-10-29 13:51:01,840 - INFO     -     - done: False
2025-10-29 13:51:01,840 - INFO     -     - truncated: False
2025-10-29 13:51:01,841 - INFO     -     - info: 19 keys
2025-10-29 13:51:01,841 - INFO     - ==========================================================================================

2025-10-29 13:51:01,845 - INFO     - 
==========================================================================================
2025-10-29 13:51:01,845 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:01,845 - INFO     - ==========================================================================================
2025-10-29 13:51:01,845 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:01,845 - INFO     -   Input action: 38 (type: int)
2025-10-29 13:51:01,845 - INFO     -   Available edges in graph: 44
2025-10-29 13:51:01,845 - INFO     -   Action index calculation:
2025-10-29 13:51:01,845 - INFO     -     - action % max(num_valid_edges, 1) = 38 % 44 = 38
2025-10-29 13:51:01,845 - INFO     -     - clamped to [0, 43]: 38
2025-10-29 13:51:01,845 - INFO     -   ✓ Extracted merge pair from edge 38: (9, 2)
2025-10-29 13:51:01,845 - INFO     -   ✓ Validation passed
2025-10-29 13:51:01,845 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:01,845 - INFO     -     - Total states before merge: 30
2025-10-29 13:51:01,846 - INFO     -     - Num nodes: 8
2025-10-29 13:51:01,846 - INFO     -     - Num edges: 44
2025-10-29 13:51:01,846 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:01,846 - INFO     -       - Node 9: 4 states
2025-10-29 13:51:01,846 - INFO     -       - Node 2: 2 states
2025-10-29 13:51:01,846 - INFO     -       - Expected product: 8 states
2025-10-29 13:51:01,846 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:01,856 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:51:01,856 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:01,857 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:51:01,957 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:01,957 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:01,957 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:51:01,958 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:01,958 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:01,958 - INFO     -   Calling graph_tracker.merge_nodes([9, 2])...
2025-10-29 13:51:01,958 - INFO     - Attempting merge of nodes 9 and 2...
2025-10-29 13:51:01,958 - INFO     - Successfully merged nodes into new node 10 with 8 states.
2025-10-29 13:51:01,958 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:01,958 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:01,958 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:51:01,958 - INFO     - 
================================================================================
2025-10-29 13:51:01,958 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:51:01,958 - INFO     - ================================================================================
2025-10-29 13:51:01,958 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:01,958 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:51:01,958 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:51:01,959 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:01,959 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:01,959 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:51:01,959 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:01,959 - INFO     -   - Raw f_after length: 8
2025-10-29 13:51:01,959 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:01,959 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:51:01,959 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:01,959 - INFO     -   - after_valid: 8 / 8 (removed 0)
2025-10-29 13:51:01,959 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:01,959 - INFO     -   - ts1_id: 9
2025-10-29 13:51:01,959 - INFO     -   - ts2_id: 2
2025-10-29 13:51:01,959 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:01,959 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:01,960 - INFO     -   - ts1_size: 4, ts2_size: 2
2025-10-29 13:51:01,960 - INFO     -   - Product space size: 8
2025-10-29 13:51:01,960 - INFO     -   - Using product state mapping
2025-10-29 13:51:01,960 - INFO     -   - f_before_product length: 8
2025-10-29 13:51:01,960 - INFO     -   - avg_f_before: 1.1250 (8 valid states)
2025-10-29 13:51:01,960 - INFO     -   - avg_f_after:  1.5000 (8 valid states)
2025-10-29 13:51:01,961 - INFO     -   - delta: 0.3750
2025-10-29 13:51:01,961 - INFO     -   - f_stability: 1.0 - |0.3750| / 1.1250 = 0.6667
2025-10-29 13:51:01,961 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:01,961 - INFO     -   - Compared 6 values
2025-10-29 13:51:01,961 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:01,961 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:01,961 - INFO     -   - states_before: 8
2025-10-29 13:51:01,961 - INFO     -   - states_after: 8
2025-10-29 13:51:01,961 - INFO     -   - delta_states: 0
2025-10-29 13:51:01,961 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:01,961 - INFO     -   - ts1_transitions: 20
2025-10-29 13:51:01,961 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:01,961 - INFO     -   - merged_transitions: 68
2025-10-29 13:51:01,961 - INFO     -   - transition_density_change: 5.3750
2025-10-29 13:51:01,961 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:01,961 - INFO     -   - search_signals present: True
2025-10-29 13:51:01,962 - INFO     -   - nodes_expanded: 8
2025-10-29 13:51:01,962 - INFO     -   - search_depth: 0
2025-10-29 13:51:01,962 - INFO     -   - solution_cost: 0
2025-10-29 13:51:01,962 - INFO     -   - branching_factor: 8.5000
2025-10-29 13:51:01,962 - INFO     -   - solution_found: True
2025-10-29 13:51:01,962 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:01,962 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:01,962 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:51:01,962 - INFO     -   - TS9(4) + TS2(2) → 8 states
2025-10-29 13:51:01,962 - INFO     -   - f_stability=0.667
2025-10-29 13:51:01,962 - INFO     -   - A* nodes_expanded=8
2025-10-29 13:51:01,962 - INFO     -   - solution_found=True
2025-10-29 13:51:01,962 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:01,963 - INFO     - 
  Extracted signals:
2025-10-29 13:51:01,963 - INFO     -     - iteration: 1
2025-10-29 13:51:01,963 - INFO     -     - states_before: 8
2025-10-29 13:51:01,963 - INFO     -     - states_after: 8
2025-10-29 13:51:01,963 - INFO     -     - delta_states: 0
2025-10-29 13:51:01,963 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:51:01,963 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:01,963 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:01,963 - INFO     -     - nodes_expanded: 8
2025-10-29 13:51:01,963 - INFO     -     - search_depth: 0
2025-10-29 13:51:01,963 - INFO     -     - solution_cost: 0
2025-10-29 13:51:01,963 - INFO     -     - branching_factor: 8.5000
2025-10-29 13:51:01,963 - INFO     -     - solution_found: True
2025-10-29 13:51:01,963 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:01,963 - WARNING  -     ⚠️  High branching factor: 8.5000
2025-10-29 13:51:01,964 - INFO     - 
  Computing reward:
2025-10-29 13:51:01,964 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:01,964 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:01,964 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:01,964 - INFO     -   [1] BRANCHING FACTOR: 8.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:51:01,964 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:51:01,965 - INFO     -   [3] F-VALUE STABILITY: 0.572
2025-10-29 13:51:01,965 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:01,965 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:01,965 - INFO     - 
  [COMPOSITE]: 0.450
2025-10-29 13:51:01,965 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:51:01,965 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:51:01,965 - INFO     -     + 0.350*0.572 (stability)
2025-10-29 13:51:01,965 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:01,965 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:01,965 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:01,965 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:01,965 - INFO     - 
  [FINAL REWARD]: 0.3003
2025-10-29 13:51:01,965 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:01,965 - INFO     -     ✓ Reward computed: 0.3003
2025-10-29 13:51:01,965 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:01,965 - INFO     -     - bf_score                       0.1000
2025-10-29 13:51:01,965 - INFO     -     - depth_score                    0.5000
2025-10-29 13:51:01,965 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:01,966 - INFO     -     - f_stability                    0.5719
2025-10-29 13:51:01,966 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:01,966 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:01,966 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:01,966 - INFO     -     - composite                      0.4502
2025-10-29 13:51:01,966 - INFO     -     - total                          0.3003
2025-10-29 13:51:01,966 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:01,966 - INFO     -   Num remaining nodes: 7
2025-10-29 13:51:01,966 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:51:01,966 - INFO     -   Done: False
2025-10-29 13:51:01,966 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:01,969 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:01,970 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:01,970 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:01,970 - INFO     -     - num_nodes: 7
2025-10-29 13:51:01,970 - INFO     -     - num_edges: 30
2025-10-29 13:51:01,970 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:01,970 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:51:01,970 - INFO     -   After: current_merge_step = 2
2025-10-29 13:51:01,971 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:01,971 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:01,971 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:01,972 - INFO     -   ✓ Step logged
2025-10-29 13:51:01,972 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:01,972 - INFO     -   Returning:
2025-10-29 13:51:01,972 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:01,972 - INFO     -     - reward: 0.3003
2025-10-29 13:51:01,972 - INFO     -     - done: False
2025-10-29 13:51:01,972 - INFO     -     - truncated: False
2025-10-29 13:51:01,972 - INFO     -     - info: 19 keys
2025-10-29 13:51:01,972 - INFO     - ==========================================================================================

2025-10-29 13:51:01,977 - INFO     - 
==========================================================================================
2025-10-29 13:51:01,977 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:01,977 - INFO     - ==========================================================================================
2025-10-29 13:51:01,977 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:01,977 - INFO     -   Input action: 18 (type: int)
2025-10-29 13:51:01,977 - INFO     -   Available edges in graph: 30
2025-10-29 13:51:01,977 - INFO     -   Action index calculation:
2025-10-29 13:51:01,977 - INFO     -     - action % max(num_valid_edges, 1) = 18 % 30 = 18
2025-10-29 13:51:01,977 - INFO     -     - clamped to [0, 29]: 18
2025-10-29 13:51:01,978 - INFO     -   ✓ Extracted merge pair from edge 18: (7, 0)
2025-10-29 13:51:01,978 - INFO     -   ✓ Validation passed
2025-10-29 13:51:01,978 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:01,978 - INFO     -     - Total states before merge: 32
2025-10-29 13:51:01,978 - INFO     -     - Num nodes: 7
2025-10-29 13:51:01,978 - INFO     -     - Num edges: 30
2025-10-29 13:51:01,978 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:01,978 - INFO     -       - Node 7: 5 states
2025-10-29 13:51:01,978 - INFO     -       - Node 0: 2 states
2025-10-29 13:51:01,978 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:01,978 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:01,983 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:51:01,985 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:01,985 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:51:02,085 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:02,085 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:02,086 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:51:02,086 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:02,086 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:02,086 - INFO     -   Calling graph_tracker.merge_nodes([7, 0])...
2025-10-29 13:51:02,086 - INFO     - Attempting merge of nodes 7 and 0...
2025-10-29 13:51:02,086 - INFO     - Successfully merged nodes into new node 11 with 10 states.
2025-10-29 13:51:02,086 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:02,086 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:02,086 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:51:02,086 - INFO     - 
================================================================================
2025-10-29 13:51:02,087 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:51:02,087 - INFO     - ================================================================================
2025-10-29 13:51:02,087 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:02,087 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:51:02,087 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:51:02,087 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:02,087 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:02,087 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:02,087 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:02,087 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:02,087 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:02,088 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:02,088 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:02,088 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:02,088 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:02,088 - INFO     -   - ts1_id: 7
2025-10-29 13:51:02,088 - INFO     -   - ts2_id: 0
2025-10-29 13:51:02,088 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:02,088 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:02,088 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:51:02,088 - INFO     -   - Product space size: 10
2025-10-29 13:51:02,088 - INFO     -   - Using product state mapping
2025-10-29 13:51:02,088 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:02,088 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:51:02,089 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:51:02,089 - INFO     -   - delta: 0.5000
2025-10-29 13:51:02,089 - INFO     -   - f_stability: 1.0 - |0.5000| / 2.8000 = 0.8214
2025-10-29 13:51:02,089 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:02,089 - INFO     -   - Compared 7 values
2025-10-29 13:51:02,089 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:02,089 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:02,089 - INFO     -   - states_before: 10
2025-10-29 13:51:02,089 - INFO     -   - states_after: 10
2025-10-29 13:51:02,089 - INFO     -   - delta_states: 0
2025-10-29 13:51:02,089 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:02,089 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:02,089 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:02,089 - INFO     -   - merged_transitions: 40
2025-10-29 13:51:02,090 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:51:02,090 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:02,090 - INFO     -   - search_signals present: True
2025-10-29 13:51:02,090 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:02,090 - INFO     -   - search_depth: 1
2025-10-29 13:51:02,090 - INFO     -   - solution_cost: 2
2025-10-29 13:51:02,090 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:51:02,091 - INFO     -   - solution_found: True
2025-10-29 13:51:02,091 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:02,091 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:02,091 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:51:02,091 - INFO     -   - TS7(5) + TS0(2) → 10 states
2025-10-29 13:51:02,091 - INFO     -   - f_stability=0.821
2025-10-29 13:51:02,092 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:02,092 - INFO     -   - solution_found=True
2025-10-29 13:51:02,092 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:02,092 - INFO     - 
  Extracted signals:
2025-10-29 13:51:02,092 - INFO     -     - iteration: 2
2025-10-29 13:51:02,093 - INFO     -     - states_before: 10
2025-10-29 13:51:02,093 - INFO     -     - states_after: 10
2025-10-29 13:51:02,093 - INFO     -     - delta_states: 0
2025-10-29 13:51:02,093 - INFO     -     - f_value_stability: 0.8214
2025-10-29 13:51:02,093 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:02,093 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:02,093 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:02,093 - INFO     -     - search_depth: 1
2025-10-29 13:51:02,093 - INFO     -     - solution_cost: 2
2025-10-29 13:51:02,093 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:51:02,093 - INFO     -     - solution_found: True
2025-10-29 13:51:02,093 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:02,093 - INFO     - 
  Computing reward:
2025-10-29 13:51:02,093 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:02,093 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:02,093 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:02,093 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:51:02,093 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:51:02,094 - INFO     -   [3] F-VALUE STABILITY: 0.593
2025-10-29 13:51:02,094 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:02,094 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:02,094 - INFO     - 
  [COMPOSITE]: 0.680
2025-10-29 13:51:02,094 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:51:02,094 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:51:02,094 - INFO     -     + 0.350*0.593 (stability)
2025-10-29 13:51:02,094 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:02,094 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:02,094 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:02,094 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:02,094 - INFO     - 
  [FINAL REWARD]: 0.7602
2025-10-29 13:51:02,094 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:02,094 - INFO     -     ✓ Reward computed: 0.7602
2025-10-29 13:51:02,094 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:02,095 - INFO     -     - bf_score                       0.5667
2025-10-29 13:51:02,095 - INFO     -     - depth_score                    0.9119
2025-10-29 13:51:02,095 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:02,095 - INFO     -     - f_stability                    0.5935
2025-10-29 13:51:02,095 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:02,095 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:02,095 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:02,095 - INFO     -     - composite                      0.6801
2025-10-29 13:51:02,095 - INFO     -     - total                          0.7602
2025-10-29 13:51:02,095 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:02,095 - INFO     -   Num remaining nodes: 6
2025-10-29 13:51:02,095 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:51:02,095 - INFO     -   Done: False
2025-10-29 13:51:02,095 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:02,097 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:02,097 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:02,097 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:02,097 - INFO     -     - num_nodes: 6
2025-10-29 13:51:02,097 - INFO     -     - num_edges: 24
2025-10-29 13:51:02,097 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:02,097 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:51:02,097 - INFO     -   After: current_merge_step = 3
2025-10-29 13:51:02,097 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:02,098 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:02,098 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:02,099 - INFO     -   ✓ Step logged
2025-10-29 13:51:02,099 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:02,100 - INFO     -   Returning:
2025-10-29 13:51:02,100 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:02,100 - INFO     -     - reward: 0.7602
2025-10-29 13:51:02,100 - INFO     -     - done: False
2025-10-29 13:51:02,100 - INFO     -     - truncated: False
2025-10-29 13:51:02,100 - INFO     -     - info: 19 keys
2025-10-29 13:51:02,100 - INFO     - ==========================================================================================

2025-10-29 13:51:02,106 - INFO     - 
==========================================================================================
2025-10-29 13:51:02,106 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:02,106 - INFO     - ==========================================================================================
2025-10-29 13:51:02,107 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:02,107 - INFO     -   Input action: 8 (type: int)
2025-10-29 13:51:02,107 - INFO     -   Available edges in graph: 24
2025-10-29 13:51:02,107 - INFO     -   Action index calculation:
2025-10-29 13:51:02,107 - INFO     -     - action % max(num_valid_edges, 1) = 8 % 24 = 8
2025-10-29 13:51:02,107 - INFO     -     - clamped to [0, 23]: 8
2025-10-29 13:51:02,107 - INFO     -   ✓ Extracted merge pair from edge 8: (6, 4)
2025-10-29 13:51:02,107 - INFO     -   ✓ Validation passed
2025-10-29 13:51:02,107 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:02,107 - INFO     -     - Total states before merge: 35
2025-10-29 13:51:02,107 - INFO     -     - Num nodes: 6
2025-10-29 13:51:02,107 - INFO     -     - Num edges: 24
2025-10-29 13:51:02,107 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:02,107 - INFO     -       - Node 6: 5 states
2025-10-29 13:51:02,107 - INFO     -       - Node 4: 2 states
2025-10-29 13:51:02,108 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:02,108 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:02,114 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:51:02,114 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:02,114 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:51:02,214 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:02,214 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:02,214 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:51:02,215 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:02,215 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:02,216 - INFO     -   Calling graph_tracker.merge_nodes([6, 4])...
2025-10-29 13:51:02,216 - INFO     - Attempting merge of nodes 6 and 4...
2025-10-29 13:51:02,216 - INFO     - Successfully merged nodes into new node 12 with 10 states.
2025-10-29 13:51:02,216 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:02,216 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:02,216 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:51:02,216 - INFO     - 
================================================================================
2025-10-29 13:51:02,216 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:51:02,216 - INFO     - ================================================================================
2025-10-29 13:51:02,216 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:02,216 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:51:02,216 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:51:02,217 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:02,217 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:02,217 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:02,218 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:02,218 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:02,218 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:02,218 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:02,218 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:02,218 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:02,218 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:02,218 - INFO     -   - ts1_id: 6
2025-10-29 13:51:02,218 - INFO     -   - ts2_id: 4
2025-10-29 13:51:02,218 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:02,218 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:02,218 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:51:02,218 - INFO     -   - Product space size: 10
2025-10-29 13:51:02,218 - INFO     -   - Using product state mapping
2025-10-29 13:51:02,219 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:02,219 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:51:02,219 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:51:02,219 - INFO     -   - delta: 0.7000
2025-10-29 13:51:02,219 - INFO     -   - f_stability: 1.0 - |0.7000| / 2.9000 = 0.7586
2025-10-29 13:51:02,219 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:02,219 - INFO     -   - Compared 7 values
2025-10-29 13:51:02,219 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:51:02,219 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:02,220 - INFO     -   - states_before: 10
2025-10-29 13:51:02,220 - INFO     -   - states_after: 10
2025-10-29 13:51:02,220 - INFO     -   - delta_states: 0
2025-10-29 13:51:02,220 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:02,220 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:02,220 - INFO     -   - ts2_transitions: 3
2025-10-29 13:51:02,220 - INFO     -   - merged_transitions: 27
2025-10-29 13:51:02,220 - INFO     -   - transition_density_change: 1.1000
2025-10-29 13:51:02,220 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:02,220 - INFO     -   - search_signals present: True
2025-10-29 13:51:02,220 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:02,221 - INFO     -   - search_depth: 2
2025-10-29 13:51:02,221 - INFO     -   - solution_cost: 0
2025-10-29 13:51:02,221 - INFO     -   - branching_factor: 2.7000
2025-10-29 13:51:02,221 - INFO     -   - solution_found: True
2025-10-29 13:51:02,221 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:02,221 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:02,221 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:51:02,222 - INFO     -   - TS6(5) + TS4(2) → 10 states
2025-10-29 13:51:02,222 - INFO     -   - f_stability=0.759
2025-10-29 13:51:02,222 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:02,222 - INFO     -   - solution_found=True
2025-10-29 13:51:02,222 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:02,222 - INFO     - 
  Extracted signals:
2025-10-29 13:51:02,222 - INFO     -     - iteration: 3
2025-10-29 13:51:02,222 - INFO     -     - states_before: 10
2025-10-29 13:51:02,222 - INFO     -     - states_after: 10
2025-10-29 13:51:02,222 - INFO     -     - delta_states: 0
2025-10-29 13:51:02,222 - INFO     -     - f_value_stability: 0.7586
2025-10-29 13:51:02,223 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:51:02,223 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:02,223 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:02,223 - INFO     -     - search_depth: 2
2025-10-29 13:51:02,223 - INFO     -     - solution_cost: 0
2025-10-29 13:51:02,223 - INFO     -     - branching_factor: 2.7000
2025-10-29 13:51:02,223 - INFO     -     - solution_found: True
2025-10-29 13:51:02,223 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:02,223 - INFO     - 
  Computing reward:
2025-10-29 13:51:02,223 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:02,223 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:02,223 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:02,224 - INFO     -   [1] BRANCHING FACTOR: 2.700 → score 0.745 (good (in comfort zone))
2025-10-29 13:51:02,224 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:02,225 - INFO     -   [3] F-VALUE STABILITY: 0.251
2025-10-29 13:51:02,225 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:02,225 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:02,225 - INFO     - 
  [COMPOSITE]: 0.603
2025-10-29 13:51:02,225 - INFO     -     = 0.300*0.745 (bf)
2025-10-29 13:51:02,225 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:02,226 - INFO     -     + 0.350*0.251 (stability)
2025-10-29 13:51:02,226 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:02,226 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:02,226 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:02,226 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:02,226 - INFO     - 
  [FINAL REWARD]: 0.4066
2025-10-29 13:51:02,226 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:02,226 - INFO     -     ✓ Reward computed: 0.4066
2025-10-29 13:51:02,226 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:02,226 - INFO     -     - bf_score                       0.7450
2025-10-29 13:51:02,226 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:02,226 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:02,226 - INFO     -     - f_stability                    0.2507
2025-10-29 13:51:02,226 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:02,226 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:02,226 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:02,226 - INFO     -     - composite                      0.6033
2025-10-29 13:51:02,226 - INFO     -     - total                          0.4066
2025-10-29 13:51:02,226 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:02,227 - INFO     -   Num remaining nodes: 5
2025-10-29 13:51:02,227 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:51:02,227 - INFO     -   Done: False
2025-10-29 13:51:02,227 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:02,228 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:02,228 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:02,228 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:02,228 - INFO     -     - num_nodes: 5
2025-10-29 13:51:02,228 - INFO     -     - num_edges: 18
2025-10-29 13:51:02,228 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:02,228 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:51:02,228 - INFO     -   After: current_merge_step = 4
2025-10-29 13:51:02,229 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:02,229 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:02,229 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:02,229 - INFO     -   ✓ Step logged
2025-10-29 13:51:02,230 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:02,230 - INFO     -   Returning:
2025-10-29 13:51:02,230 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:02,230 - INFO     -     - reward: 0.4066
2025-10-29 13:51:02,230 - INFO     -     - done: False
2025-10-29 13:51:02,230 - INFO     -     - truncated: False
2025-10-29 13:51:02,230 - INFO     -     - info: 19 keys
2025-10-29 13:51:02,230 - INFO     - ==========================================================================================

2025-10-29 13:51:02,236 - INFO     - 
==========================================================================================
2025-10-29 13:51:02,236 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:02,236 - INFO     - ==========================================================================================
2025-10-29 13:51:02,238 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:02,238 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:51:02,238 - INFO     -   Available edges in graph: 18
2025-10-29 13:51:02,238 - INFO     -   Action index calculation:
2025-10-29 13:51:02,238 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 18 = 3
2025-10-29 13:51:02,238 - INFO     -     - clamped to [0, 17]: 3
2025-10-29 13:51:02,238 - INFO     -   ✓ Extracted merge pair from edge 3: (8, 10)
2025-10-29 13:51:02,238 - INFO     -   ✓ Validation passed
2025-10-29 13:51:02,238 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:02,238 - INFO     -     - Total states before merge: 38
2025-10-29 13:51:02,238 - INFO     -     - Num nodes: 5
2025-10-29 13:51:02,238 - INFO     -     - Num edges: 18
2025-10-29 13:51:02,238 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:02,238 - INFO     -       - Node 8: 5 states
2025-10-29 13:51:02,238 - INFO     -       - Node 10: 8 states
2025-10-29 13:51:02,238 - INFO     -       - Expected product: 40 states
2025-10-29 13:51:02,239 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:02,246 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:51:02,246 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:02,246 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:51:02,347 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:02,347 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:02,347 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:51:02,347 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:02,348 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:02,348 - INFO     -   Calling graph_tracker.merge_nodes([8, 10])...
2025-10-29 13:51:02,348 - INFO     - Attempting merge of nodes 8 and 10...
2025-10-29 13:51:02,348 - INFO     - Successfully merged nodes into new node 13 with 40 states.
2025-10-29 13:51:02,348 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:02,348 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:02,348 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:51:02,348 - INFO     - 
================================================================================
2025-10-29 13:51:02,348 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:51:02,348 - INFO     - ================================================================================
2025-10-29 13:51:02,348 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:02,348 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:51:02,348 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:51:02,349 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:02,349 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:02,349 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:02,349 - INFO     -   - Raw ts2_f length: 8
2025-10-29 13:51:02,349 - INFO     -   - Raw f_after length: 40
2025-10-29 13:51:02,349 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:02,349 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:02,349 - INFO     -   - ts2_valid: 8 / 8 (removed -8)
2025-10-29 13:51:02,349 - INFO     -   - after_valid: 40 / 40 (removed 0)
2025-10-29 13:51:02,349 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:02,349 - INFO     -   - ts1_id: 8
2025-10-29 13:51:02,349 - INFO     -   - ts2_id: 10
2025-10-29 13:51:02,349 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:02,350 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:02,350 - INFO     -   - ts1_size: 5, ts2_size: 8
2025-10-29 13:51:02,350 - INFO     -   - Product space size: 40
2025-10-29 13:51:02,350 - INFO     -   - Using product state mapping
2025-10-29 13:51:02,350 - INFO     -   - f_before_product length: 40
2025-10-29 13:51:02,350 - INFO     -   - avg_f_before: 3.1250 (40 valid states)
2025-10-29 13:51:02,350 - INFO     -   - avg_f_after:  4.3750 (40 valid states)
2025-10-29 13:51:02,350 - INFO     -   - delta: 1.2500
2025-10-29 13:51:02,350 - INFO     -   - f_stability: 1.0 - |1.2500| / 3.1250 = 0.6000
2025-10-29 13:51:02,350 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:02,350 - INFO     -   - Compared 13 values
2025-10-29 13:51:02,350 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:02,350 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:02,351 - INFO     -   - states_before: 40
2025-10-29 13:51:02,351 - INFO     -   - states_after: 40
2025-10-29 13:51:02,351 - INFO     -   - delta_states: 0
2025-10-29 13:51:02,351 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:02,351 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:02,351 - INFO     -   - ts2_transitions: 68
2025-10-29 13:51:02,351 - INFO     -   - merged_transitions: 380
2025-10-29 13:51:02,351 - INFO     -   - transition_density_change: 7.4750
2025-10-29 13:51:02,351 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:02,351 - INFO     -   - search_signals present: True
2025-10-29 13:51:02,351 - INFO     -   - nodes_expanded: 40
2025-10-29 13:51:02,351 - INFO     -   - search_depth: 2
2025-10-29 13:51:02,351 - INFO     -   - solution_cost: 0
2025-10-29 13:51:02,351 - INFO     -   - branching_factor: 9.5000
2025-10-29 13:51:02,351 - INFO     -   - solution_found: True
2025-10-29 13:51:02,351 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:02,351 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:02,352 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:51:02,352 - INFO     -   - TS8(5) + TS10(8) → 40 states
2025-10-29 13:51:02,352 - INFO     -   - f_stability=0.600
2025-10-29 13:51:02,352 - INFO     -   - A* nodes_expanded=40
2025-10-29 13:51:02,352 - INFO     -   - solution_found=True
2025-10-29 13:51:02,352 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:02,352 - INFO     - 
  Extracted signals:
2025-10-29 13:51:02,352 - INFO     -     - iteration: 4
2025-10-29 13:51:02,352 - INFO     -     - states_before: 40
2025-10-29 13:51:02,352 - INFO     -     - states_after: 40
2025-10-29 13:51:02,352 - INFO     -     - delta_states: 0
2025-10-29 13:51:02,352 - INFO     -     - f_value_stability: 0.6000
2025-10-29 13:51:02,352 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:02,352 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:02,352 - INFO     -     - nodes_expanded: 40
2025-10-29 13:51:02,352 - INFO     -     - search_depth: 2
2025-10-29 13:51:02,352 - INFO     -     - solution_cost: 0
2025-10-29 13:51:02,353 - INFO     -     - branching_factor: 9.5000
2025-10-29 13:51:02,353 - INFO     -     - solution_found: True
2025-10-29 13:51:02,353 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:02,353 - WARNING  -     ⚠️  High branching factor: 9.5000
2025-10-29 13:51:02,353 - INFO     - 
  Computing reward:
2025-10-29 13:51:02,353 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:02,353 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:02,353 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:02,353 - INFO     -   [1] BRANCHING FACTOR: 9.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:51:02,353 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:02,353 - INFO     -   [3] F-VALUE STABILITY: 0.157
2025-10-29 13:51:02,353 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:02,353 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:02,354 - INFO     - 
  [COMPOSITE]: 0.377
2025-10-29 13:51:02,354 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:51:02,354 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:02,354 - INFO     -     + 0.350*0.157 (stability)
2025-10-29 13:51:02,354 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:02,354 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:02,354 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:02,354 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:02,354 - INFO     - 
  [FINAL REWARD]: -0.0463
2025-10-29 13:51:02,354 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:02,354 - INFO     -     ✓ Reward computed: -0.0463
2025-10-29 13:51:02,354 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:02,354 - INFO     -     - bf_score                       0.1000
2025-10-29 13:51:02,354 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:02,354 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:02,354 - INFO     -     - f_stability                    0.1565
2025-10-29 13:51:02,354 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:02,354 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:02,354 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:02,354 - INFO     -     - composite                      0.3768
2025-10-29 13:51:02,354 - INFO     -     - total                          -0.0463
2025-10-29 13:51:02,354 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:02,354 - INFO     -   Num remaining nodes: 4
2025-10-29 13:51:02,354 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:51:02,354 - INFO     -   Done: False
2025-10-29 13:51:02,354 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:02,356 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:02,356 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:02,356 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:02,356 - INFO     -     - num_nodes: 4
2025-10-29 13:51:02,356 - INFO     -     - num_edges: 12
2025-10-29 13:51:02,356 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:02,356 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:51:02,357 - INFO     -   After: current_merge_step = 5
2025-10-29 13:51:02,357 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:02,357 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:02,357 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:02,357 - INFO     -   ✓ Step logged
2025-10-29 13:51:02,357 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:02,357 - INFO     -   Returning:
2025-10-29 13:51:02,357 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:02,357 - INFO     -     - reward: -0.0463
2025-10-29 13:51:02,357 - INFO     -     - done: False
2025-10-29 13:51:02,358 - INFO     -     - truncated: False
2025-10-29 13:51:02,358 - INFO     -     - info: 19 keys
2025-10-29 13:51:02,358 - INFO     - ==========================================================================================

2025-10-29 13:51:02,361 - INFO     - 
==========================================================================================
2025-10-29 13:51:02,361 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:02,362 - INFO     - ==========================================================================================
2025-10-29 13:51:02,362 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:02,362 - INFO     -   Input action: 10 (type: int)
2025-10-29 13:51:02,362 - INFO     -   Available edges in graph: 12
2025-10-29 13:51:02,362 - INFO     -   Action index calculation:
2025-10-29 13:51:02,362 - INFO     -     - action % max(num_valid_edges, 1) = 10 % 12 = 10
2025-10-29 13:51:02,362 - INFO     -     - clamped to [0, 11]: 10
2025-10-29 13:51:02,362 - INFO     -   ✓ Extracted merge pair from edge 10: (13, 12)
2025-10-29 13:51:02,362 - INFO     -   ✓ Validation passed
2025-10-29 13:51:02,362 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:02,362 - INFO     -     - Total states before merge: 65
2025-10-29 13:51:02,362 - INFO     -     - Num nodes: 4
2025-10-29 13:51:02,362 - INFO     -     - Num edges: 12
2025-10-29 13:51:02,362 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:02,362 - INFO     -       - Node 13: 40 states
2025-10-29 13:51:02,362 - INFO     -       - Node 12: 10 states
2025-10-29 13:51:02,362 - INFO     -       - Expected product: 400 states
2025-10-29 13:51:02,362 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:02,370 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:51:02,370 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:02,371 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:51:02,471 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:02,471 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:02,471 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:51:02,474 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:02,475 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:02,475 - INFO     -   Calling graph_tracker.merge_nodes([13, 12])...
2025-10-29 13:51:02,475 - INFO     - Attempting merge of nodes 13 and 12...
2025-10-29 13:51:02,475 - INFO     - Successfully merged nodes into new node 14 with 400 states.
2025-10-29 13:51:02,475 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:02,475 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:02,475 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:51:02,475 - INFO     - 
================================================================================
2025-10-29 13:51:02,475 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:51:02,475 - INFO     - ================================================================================
2025-10-29 13:51:02,475 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:02,475 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:51:02,475 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:51:02,477 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:02,477 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:02,477 - INFO     -   - Raw ts1_f length: 40
2025-10-29 13:51:02,477 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:51:02,477 - INFO     -   - Raw f_after length: 400
2025-10-29 13:51:02,477 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:02,477 - INFO     -   - ts1_valid: 40 / 40 (removed 0)
2025-10-29 13:51:02,477 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:51:02,478 - INFO     -   - after_valid: 400 / 400 (removed 0)
2025-10-29 13:51:02,478 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:02,478 - INFO     -   - ts1_id: 13
2025-10-29 13:51:02,478 - INFO     -   - ts2_id: 12
2025-10-29 13:51:02,478 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:02,478 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:02,478 - INFO     -   - ts1_size: 40, ts2_size: 10
2025-10-29 13:51:02,478 - INFO     -   - Product space size: 400
2025-10-29 13:51:02,478 - INFO     -   - Using product state mapping
2025-10-29 13:51:02,479 - INFO     -   - f_before_product length: 400
2025-10-29 13:51:02,480 - INFO     -   - avg_f_before: 5.1725 (400 valid states)
2025-10-29 13:51:02,480 - INFO     -   - avg_f_after:  8.7525 (400 valid states)
2025-10-29 13:51:02,480 - INFO     -   - delta: 3.5800
2025-10-29 13:51:02,480 - INFO     -   - f_stability: 1.0 - |3.5800| / 5.1725 = 0.3079
2025-10-29 13:51:02,480 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:02,480 - INFO     -   - Compared 50 values
2025-10-29 13:51:02,480 - INFO     -   - Significant changes (> 5.0): 16
2025-10-29 13:51:02,480 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:02,480 - INFO     -   - states_before: 400
2025-10-29 13:51:02,481 - INFO     -   - states_after: 400
2025-10-29 13:51:02,481 - INFO     -   - delta_states: 0
2025-10-29 13:51:02,481 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:02,481 - INFO     -   - ts1_transitions: 380
2025-10-29 13:51:02,481 - INFO     -   - ts2_transitions: 27
2025-10-29 13:51:02,481 - INFO     -   - merged_transitions: 3540
2025-10-29 13:51:02,481 - INFO     -   - transition_density_change: 7.8325
2025-10-29 13:51:02,481 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:02,481 - INFO     -   - search_signals present: True
2025-10-29 13:51:02,481 - INFO     -   - nodes_expanded: 400
2025-10-29 13:51:02,481 - INFO     -   - search_depth: 4
2025-10-29 13:51:02,481 - INFO     -   - solution_cost: 0
2025-10-29 13:51:02,482 - INFO     -   - branching_factor: 8.8500
2025-10-29 13:51:02,482 - INFO     -   - solution_found: True
2025-10-29 13:51:02,482 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:02,482 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:02,482 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:51:02,482 - INFO     -   - TS13(40) + TS12(10) → 400 states
2025-10-29 13:51:02,482 - INFO     -   - f_stability=0.308
2025-10-29 13:51:02,482 - INFO     -   - A* nodes_expanded=400
2025-10-29 13:51:02,482 - INFO     -   - solution_found=True
2025-10-29 13:51:02,483 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:02,483 - INFO     - 
  Extracted signals:
2025-10-29 13:51:02,483 - INFO     -     - iteration: 5
2025-10-29 13:51:02,483 - INFO     -     - states_before: 400
2025-10-29 13:51:02,483 - INFO     -     - states_after: 400
2025-10-29 13:51:02,483 - INFO     -     - delta_states: 0
2025-10-29 13:51:02,483 - INFO     -     - f_value_stability: 0.3079
2025-10-29 13:51:02,483 - INFO     -     - num_significant_f_changes: 16
2025-10-29 13:51:02,483 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:02,483 - INFO     -     - nodes_expanded: 400
2025-10-29 13:51:02,483 - INFO     -     - search_depth: 4
2025-10-29 13:51:02,484 - INFO     -     - solution_cost: 0
2025-10-29 13:51:02,484 - INFO     -     - branching_factor: 8.8500
2025-10-29 13:51:02,484 - INFO     -     - solution_found: True
2025-10-29 13:51:02,484 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:02,484 - WARNING  -     ⚠️  High branching factor: 8.8500
2025-10-29 13:51:02,484 - INFO     - 
  Computing reward:
2025-10-29 13:51:02,484 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:02,484 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:02,484 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:02,485 - INFO     -   [1] BRANCHING FACTOR: 8.850 → score 0.100 (high BF, minimal credit)
2025-10-29 13:51:02,485 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:51:02,485 - INFO     -   [3] F-VALUE STABILITY: 0.123
2025-10-29 13:51:02,485 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:02,486 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:02,486 - INFO     - 
  [COMPOSITE]: 0.352
2025-10-29 13:51:02,486 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:51:02,486 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:51:02,486 - INFO     -     + 0.350*0.123 (stability)
2025-10-29 13:51:02,486 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:02,486 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:02,486 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:02,486 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:02,486 - INFO     - 
  [FINAL REWARD]: -0.0957
2025-10-29 13:51:02,487 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:02,487 - INFO     -     ✓ Reward computed: -0.0957
2025-10-29 13:51:02,487 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:02,487 - INFO     -     - bf_score                       0.1000
2025-10-29 13:51:02,487 - INFO     -     - depth_score                    0.7953
2025-10-29 13:51:02,487 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:02,487 - INFO     -     - f_stability                    0.1231
2025-10-29 13:51:02,487 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:02,487 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:02,487 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:02,487 - INFO     -     - composite                      0.3521
2025-10-29 13:51:02,487 - INFO     -     - total                          -0.0957
2025-10-29 13:51:02,487 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:02,487 - INFO     -   Num remaining nodes: 3
2025-10-29 13:51:02,487 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:51:02,487 - INFO     -   Done: False
2025-10-29 13:51:02,487 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:02,488 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:02,489 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:02,489 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:02,489 - INFO     -     - num_nodes: 3
2025-10-29 13:51:02,489 - INFO     -     - num_edges: 6
2025-10-29 13:51:02,489 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:02,489 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:51:02,489 - INFO     -   After: current_merge_step = 6
2025-10-29 13:51:02,490 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:02,490 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:02,490 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:02,491 - INFO     -   ✓ Step logged
2025-10-29 13:51:02,491 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:02,491 - INFO     -   Returning:
2025-10-29 13:51:02,491 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:02,491 - INFO     -     - reward: -0.0957
2025-10-29 13:51:02,491 - INFO     -     - done: False
2025-10-29 13:51:02,491 - INFO     -     - truncated: False
2025-10-29 13:51:02,491 - INFO     -     - info: 19 keys
2025-10-29 13:51:02,491 - INFO     - ==========================================================================================

2025-10-29 13:51:02,497 - INFO     - 
==========================================================================================
2025-10-29 13:51:02,497 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:02,497 - INFO     - ==========================================================================================
2025-10-29 13:51:02,497 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:02,497 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:51:02,497 - INFO     -   Available edges in graph: 6
2025-10-29 13:51:02,497 - INFO     -   Action index calculation:
2025-10-29 13:51:02,497 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 6 = 1
2025-10-29 13:51:02,497 - INFO     -     - clamped to [0, 5]: 1
2025-10-29 13:51:02,497 - INFO     -   ✓ Extracted merge pair from edge 1: (5, 14)
2025-10-29 13:51:02,498 - INFO     -   ✓ Validation passed
2025-10-29 13:51:02,498 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:02,498 - INFO     -     - Total states before merge: 415
2025-10-29 13:51:02,498 - INFO     -     - Num nodes: 3
2025-10-29 13:51:02,498 - INFO     -     - Num edges: 6
2025-10-29 13:51:02,498 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:02,498 - INFO     -       - Node 5: 5 states
2025-10-29 13:51:02,498 - INFO     -       - Node 14: 400 states
2025-10-29 13:51:02,498 - INFO     -       - Expected product: 2000 states
2025-10-29 13:51:02,498 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:02,508 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:51:02,508 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:02,508 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:51:02,609 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:02,609 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:02,609 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:51:02,620 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:51:02,620 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:02,620 - INFO     -   Calling graph_tracker.merge_nodes([5, 14])...
2025-10-29 13:51:02,620 - INFO     - Attempting merge of nodes 5 and 14...
2025-10-29 13:51:02,620 - INFO     - Successfully merged nodes into new node 15 with 2000 states.
2025-10-29 13:51:02,620 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:02,620 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:02,622 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:51:02,622 - INFO     - 
================================================================================
2025-10-29 13:51:02,622 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:51:02,622 - INFO     - ================================================================================
2025-10-29 13:51:02,622 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:02,622 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:51:02,622 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:51:02,625 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:02,625 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:02,625 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:02,625 - INFO     -   - Raw ts2_f length: 400
2025-10-29 13:51:02,625 - INFO     -   - Raw f_after length: 2000
2025-10-29 13:51:02,625 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:02,625 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:02,625 - INFO     -   - ts2_valid: 400 / 400 (removed -400)
2025-10-29 13:51:02,626 - INFO     -   - after_valid: 1619 / 2000 (removed 381)
2025-10-29 13:51:02,626 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:02,626 - INFO     -   - ts1_id: 5
2025-10-29 13:51:02,626 - INFO     -   - ts2_id: 14
2025-10-29 13:51:02,626 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:02,626 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:02,626 - INFO     -   - ts1_size: 5, ts2_size: 400
2025-10-29 13:51:02,627 - INFO     -   - Product space size: 2000
2025-10-29 13:51:02,627 - INFO     -   - Using product state mapping
2025-10-29 13:51:02,629 - INFO     -   - f_before_product length: 2000
2025-10-29 13:51:02,636 - INFO     -   - avg_f_before: 8.8130 (2000 valid states)
2025-10-29 13:51:02,636 - INFO     -   - avg_f_after:  12.0914 (1619 valid states)
2025-10-29 13:51:02,636 - INFO     -   - delta: 3.2784
2025-10-29 13:51:02,636 - INFO     -   - f_stability: 1.0 - |3.2784| / 8.8130 = 0.6280
2025-10-29 13:51:02,636 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:02,637 - INFO     -   - Compared 405 values
2025-10-29 13:51:02,637 - INFO     -   - Significant changes (> 5.0): 103
2025-10-29 13:51:02,637 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:02,637 - INFO     -   - states_before: 2000
2025-10-29 13:51:02,637 - INFO     -   - states_after: 2000
2025-10-29 13:51:02,637 - INFO     -   - delta_states: 0
2025-10-29 13:51:02,637 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:02,637 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:02,637 - INFO     -   - ts2_transitions: 3540
2025-10-29 13:51:02,637 - INFO     -   - merged_transitions: 10500
2025-10-29 13:51:02,638 - INFO     -   - transition_density_change: 3.4735
2025-10-29 13:51:02,638 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:02,638 - INFO     -   - search_signals present: True
2025-10-29 13:51:02,638 - INFO     -   - nodes_expanded: 1619
2025-10-29 13:51:02,638 - INFO     -   - search_depth: 5
2025-10-29 13:51:02,638 - INFO     -   - solution_cost: 2
2025-10-29 13:51:02,638 - INFO     -   - branching_factor: 6.4855
2025-10-29 13:51:02,638 - INFO     -   - solution_found: True
2025-10-29 13:51:02,638 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:02,640 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:02,640 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:51:02,640 - INFO     -   - TS5(5) + TS14(400) → 2000 states
2025-10-29 13:51:02,640 - INFO     -   - f_stability=0.628
2025-10-29 13:51:02,640 - INFO     -   - A* nodes_expanded=1619
2025-10-29 13:51:02,640 - INFO     -   - solution_found=True
2025-10-29 13:51:02,640 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:02,641 - INFO     - 
  Extracted signals:
2025-10-29 13:51:02,641 - INFO     -     - iteration: 6
2025-10-29 13:51:02,641 - INFO     -     - states_before: 2000
2025-10-29 13:51:02,641 - INFO     -     - states_after: 2000
2025-10-29 13:51:02,641 - INFO     -     - delta_states: 0
2025-10-29 13:51:02,641 - INFO     -     - f_value_stability: 0.6280
2025-10-29 13:51:02,641 - INFO     -     - num_significant_f_changes: 103
2025-10-29 13:51:02,641 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:02,641 - INFO     -     - nodes_expanded: 1619
2025-10-29 13:51:02,641 - INFO     -     - search_depth: 5
2025-10-29 13:51:02,641 - INFO     -     - solution_cost: 2
2025-10-29 13:51:02,641 - INFO     -     - branching_factor: 6.4855
2025-10-29 13:51:02,641 - INFO     -     - solution_found: True
2025-10-29 13:51:02,641 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:02,642 - INFO     - 
  Computing reward:
2025-10-29 13:51:02,642 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:02,642 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:02,642 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:02,642 - INFO     -   [1] BRANCHING FACTOR: 6.485 → score 0.251 (high BF, minimal credit)
2025-10-29 13:51:02,642 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:51:02,643 - INFO     -   [3] F-VALUE STABILITY: 0.760
2025-10-29 13:51:02,643 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:51:02,643 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:02,643 - INFO     - 
  [COMPOSITE]: 0.616
2025-10-29 13:51:02,643 - INFO     -     = 0.300*0.251 (bf)
2025-10-29 13:51:02,643 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:51:02,643 - INFO     -     + 0.350*0.760 (stability)
2025-10-29 13:51:02,643 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:02,643 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:02,644 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:02,644 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:51:02,645 - INFO     - 
  [FINAL REWARD]: 0.7321
2025-10-29 13:51:02,645 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:02,645 - INFO     -     ✓ Reward computed: 0.7321
2025-10-29 13:51:02,645 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:02,645 - INFO     -     - bf_score                       0.2515
2025-10-29 13:51:02,645 - INFO     -     - depth_score                    0.7721
2025-10-29 13:51:02,645 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:02,645 - INFO     -     - f_stability                    0.7605
2025-10-29 13:51:02,645 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:51:02,645 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:02,645 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:02,646 - INFO     -     - composite                      0.6160
2025-10-29 13:51:02,646 - INFO     -     - total                          0.7321
2025-10-29 13:51:02,646 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:02,646 - INFO     -   Num remaining nodes: 2
2025-10-29 13:51:02,646 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:51:02,646 - INFO     -   Done: False
2025-10-29 13:51:02,646 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:02,646 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:02,647 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:02,647 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:02,647 - INFO     -     - num_nodes: 2
2025-10-29 13:51:02,647 - INFO     -     - num_edges: 2
2025-10-29 13:51:02,647 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:02,647 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:51:02,647 - INFO     -   After: current_merge_step = 7
2025-10-29 13:51:02,647 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:02,647 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:02,647 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:02,648 - INFO     -   ✓ Step logged
2025-10-29 13:51:02,648 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:02,648 - INFO     -   Returning:
2025-10-29 13:51:02,648 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:02,648 - INFO     -     - reward: 0.7321
2025-10-29 13:51:02,648 - INFO     -     - done: False
2025-10-29 13:51:02,649 - INFO     -     - truncated: False
2025-10-29 13:51:02,649 - INFO     -     - info: 19 keys
2025-10-29 13:51:02,649 - INFO     - ==========================================================================================

2025-10-29 13:51:02,654 - INFO     - 
==========================================================================================
2025-10-29 13:51:02,654 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:02,654 - INFO     - ==========================================================================================
2025-10-29 13:51:02,654 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:02,654 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:51:02,654 - INFO     -   Available edges in graph: 2
2025-10-29 13:51:02,654 - INFO     -   Action index calculation:
2025-10-29 13:51:02,654 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:51:02,654 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:51:02,655 - INFO     -   ✓ Extracted merge pair from edge 0: (11, 15)
2025-10-29 13:51:02,655 - INFO     -   ✓ Validation passed
2025-10-29 13:51:02,655 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:02,655 - INFO     -     - Total states before merge: 2010
2025-10-29 13:51:02,655 - INFO     -     - Num nodes: 2
2025-10-29 13:51:02,655 - INFO     -     - Num edges: 2
2025-10-29 13:51:02,655 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:02,655 - INFO     -       - Node 11: 10 states
2025-10-29 13:51:02,655 - INFO     -       - Node 15: 2000 states
2025-10-29 13:51:02,655 - INFO     -       - Expected product: 20000 states
2025-10-29 13:51:02,655 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:02,660 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:51:02,660 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:02,660 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:51:02,761 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:02,761 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:02,761 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:51:02,980 - INFO     -   ✓ TS file received after 0.22s
2025-10-29 13:51:02,980 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:02,980 - INFO     -   Calling graph_tracker.merge_nodes([11, 15])...
2025-10-29 13:51:02,982 - INFO     - Attempting merge of nodes 11 and 15...
2025-10-29 13:51:02,982 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:51:02,982 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:02,982 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:02,982 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:51:02,982 - INFO     - 
================================================================================
2025-10-29 13:51:02,982 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:51:02,982 - INFO     - ================================================================================
2025-10-29 13:51:02,982 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:02,982 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:51:02,982 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:51:02,986 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:02,986 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:02,986 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:51:02,986 - INFO     -   - Raw ts2_f length: 354
2025-10-29 13:51:02,986 - INFO     -   - Raw f_after length: 3540
2025-10-29 13:51:02,986 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:02,986 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:51:02,986 - INFO     -   - ts2_valid: 354 / 354 (removed -354)
2025-10-29 13:51:02,988 - INFO     -   - after_valid: 2561 / 3540 (removed 979)
2025-10-29 13:51:02,988 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:02,988 - INFO     -   - ts1_id: 11
2025-10-29 13:51:02,988 - INFO     -   - ts2_id: 15
2025-10-29 13:51:02,988 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:02,988 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:02,988 - INFO     -   - ts1_size: 10, ts2_size: 354
2025-10-29 13:51:02,988 - INFO     -   - Product space size: 3540
2025-10-29 13:51:02,988 - INFO     -   - Using product state mapping
2025-10-29 13:51:02,993 - INFO     -   - f_before_product length: 3540
2025-10-29 13:51:03,002 - INFO     -   - avg_f_before: 7.2356 (3540 valid states)
2025-10-29 13:51:03,002 - INFO     -   - avg_f_after:  11.6474 (2561 valid states)
2025-10-29 13:51:03,002 - INFO     -   - delta: 4.4118
2025-10-29 13:51:03,002 - INFO     -   - f_stability: 1.0 - |4.4118| / 7.2356 = 0.3903
2025-10-29 13:51:03,002 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:03,003 - INFO     -   - Compared 364 values
2025-10-29 13:51:03,003 - INFO     -   - Significant changes (> 5.0): 124
2025-10-29 13:51:03,003 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:03,003 - INFO     -   - states_before: 3540
2025-10-29 13:51:03,003 - INFO     -   - states_after: 3540
2025-10-29 13:51:03,003 - INFO     -   - delta_states: 0
2025-10-29 13:51:03,003 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:03,003 - INFO     -   - ts1_transitions: 40
2025-10-29 13:51:03,003 - INFO     -   - ts2_transitions: 3212
2025-10-29 13:51:03,003 - INFO     -   - merged_transitions: 19135
2025-10-29 13:51:03,003 - INFO     -   - transition_density_change: 4.4867
2025-10-29 13:51:03,003 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:03,003 - INFO     -   - search_signals present: True
2025-10-29 13:51:03,004 - INFO     -   - nodes_expanded: 2561
2025-10-29 13:51:03,004 - INFO     -   - search_depth: 5
2025-10-29 13:51:03,004 - INFO     -   - solution_cost: 4
2025-10-29 13:51:03,004 - INFO     -   - branching_factor: 7.4717
2025-10-29 13:51:03,004 - INFO     -   - solution_found: True
2025-10-29 13:51:03,005 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:03,006 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:03,006 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:51:03,006 - INFO     -   - TS11(10) + TS15(354) → 3540 states
2025-10-29 13:51:03,006 - INFO     -   - f_stability=0.390
2025-10-29 13:51:03,006 - INFO     -   - A* nodes_expanded=2561
2025-10-29 13:51:03,006 - INFO     -   - solution_found=True
2025-10-29 13:51:03,007 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:03,007 - INFO     - 
  Extracted signals:
2025-10-29 13:51:03,007 - INFO     -     - iteration: 7
2025-10-29 13:51:03,007 - INFO     -     - states_before: 3540
2025-10-29 13:51:03,007 - INFO     -     - states_after: 3540
2025-10-29 13:51:03,007 - INFO     -     - delta_states: 0
2025-10-29 13:51:03,007 - INFO     -     - f_value_stability: 0.3903
2025-10-29 13:51:03,007 - INFO     -     - num_significant_f_changes: 124
2025-10-29 13:51:03,007 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:03,007 - INFO     -     - nodes_expanded: 2561
2025-10-29 13:51:03,007 - INFO     -     - search_depth: 5
2025-10-29 13:51:03,007 - INFO     -     - solution_cost: 4
2025-10-29 13:51:03,007 - INFO     -     - branching_factor: 7.4717
2025-10-29 13:51:03,007 - INFO     -     - solution_found: True
2025-10-29 13:51:03,007 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:03,008 - INFO     - 
  Computing reward:
2025-10-29 13:51:03,008 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:03,008 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:03,008 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:03,009 - INFO     -   [1] BRANCHING FACTOR: 7.472 → score 0.153 (high BF, minimal credit)
2025-10-29 13:51:03,009 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:51:03,010 - INFO     -   [3] F-VALUE STABILITY: 0.442
2025-10-29 13:51:03,010 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:51:03,010 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:03,011 - INFO     - 
  [COMPOSITE]: 0.475
2025-10-29 13:51:03,011 - INFO     -     = 0.300*0.153 (bf)
2025-10-29 13:51:03,011 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:51:03,011 - INFO     -     + 0.350*0.442 (stability)
2025-10-29 13:51:03,011 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:03,011 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:03,011 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:03,011 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:51:03,012 - INFO     - 
  [FINAL REWARD]: 0.2498
2025-10-29 13:51:03,012 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:03,012 - INFO     -     ✓ Reward computed: 0.2498
2025-10-29 13:51:03,012 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:03,012 - INFO     -     - bf_score                       0.1528
2025-10-29 13:51:03,012 - INFO     -     - depth_score                    0.7721
2025-10-29 13:51:03,012 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:03,012 - INFO     -     - f_stability                    0.4418
2025-10-29 13:51:03,012 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:51:03,012 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:03,012 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:03,012 - INFO     -     - composite                      0.4749
2025-10-29 13:51:03,012 - INFO     -     - total                          0.2498
2025-10-29 13:51:03,012 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:03,012 - INFO     -   Num remaining nodes: 1
2025-10-29 13:51:03,013 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:51:03,013 - INFO     -   Done: True
2025-10-29 13:51:03,013 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:51:03,013 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:03,013 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:03,013 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:03,013 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:03,013 - INFO     -     - num_nodes: 1
2025-10-29 13:51:03,013 - INFO     -     - num_edges: 0
2025-10-29 13:51:03,013 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:03,013 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:51:03,013 - INFO     -   After: current_merge_step = 8
2025-10-29 13:51:03,013 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:03,014 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:03,014 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:03,014 - INFO     -   ✓ Step logged
2025-10-29 13:51:03,014 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:03,015 - INFO     -   Returning:
2025-10-29 13:51:03,015 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:03,015 - INFO     -     - reward: 0.2498
2025-10-29 13:51:03,015 - INFO     -     - done: True
2025-10-29 13:51:03,015 - INFO     -     - truncated: False
2025-10-29 13:51:03,015 - INFO     -     - info: 19 keys
2025-10-29 13:51:03,015 - INFO     - ==========================================================================================

2025-10-29 13:51:03,100 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:51:03,108 - INFO     - [Handshake] Building FD command:
2025-10-29 13:51:03,108 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:51:03,108 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_00.pddl
2025-10-29 13:51:03,108 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:51:03,111 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:51:03,864 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:51:03,865 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:51:03,866 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:51:04,177 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:51:04,178 - INFO     - Initializing GraphTracker...
2025-10-29 13:51:04,178 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:51:04,178 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:51:04,178 - INFO     -    → Node 0 has 2 states
2025-10-29 13:51:04,178 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:51:04,178 - INFO     -    → Node 1 has 2 states
2025-10-29 13:51:04,179 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:51:04,179 - INFO     -    → Node 2 has 2 states
2025-10-29 13:51:04,179 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:51:04,179 - INFO     -    → Node 3 has 2 states
2025-10-29 13:51:04,179 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:51:04,179 - INFO     -    → Node 4 has 2 states
2025-10-29 13:51:04,179 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:51:04,179 - INFO     -    → Node 5 has 5 states
2025-10-29 13:51:04,179 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:51:04,179 - INFO     -    → Node 6 has 5 states
2025-10-29 13:51:04,179 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:51:04,179 - INFO     -    → Node 7 has 5 states
2025-10-29 13:51:04,179 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:51:04,179 - INFO     -    → Node 8 has 5 states
2025-10-29 13:51:04,180 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:51:04,180 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:51:04,182 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:51:04,182 - INFO     - Added edge (0, 1)
2025-10-29 13:51:04,182 - INFO     - Added edge (0, 2)
2025-10-29 13:51:04,182 - INFO     - Added edge (0, 3)
2025-10-29 13:51:04,182 - INFO     - Added edge (0, 4)
2025-10-29 13:51:04,182 - INFO     - Added edge (0, 5)
2025-10-29 13:51:04,182 - INFO     - Added edge (0, 6)
2025-10-29 13:51:04,182 - INFO     - Added edge (0, 7)
2025-10-29 13:51:04,182 - INFO     - Added edge (0, 8)
2025-10-29 13:51:04,182 - INFO     - Added edge (1, 0)
2025-10-29 13:51:04,182 - INFO     - Added edge (1, 2)
2025-10-29 13:51:04,182 - INFO     - Added edge (1, 3)
2025-10-29 13:51:04,182 - INFO     - Added edge (1, 4)
2025-10-29 13:51:04,182 - INFO     - Added edge (1, 5)
2025-10-29 13:51:04,182 - INFO     - Added edge (1, 6)
2025-10-29 13:51:04,182 - INFO     - Added edge (1, 7)
2025-10-29 13:51:04,183 - INFO     - Added edge (1, 8)
2025-10-29 13:51:04,183 - INFO     - Added edge (2, 0)
2025-10-29 13:51:04,183 - INFO     - Added edge (2, 1)
2025-10-29 13:51:04,183 - INFO     - Added edge (2, 3)
2025-10-29 13:51:04,183 - INFO     - Added edge (2, 4)
2025-10-29 13:51:04,183 - INFO     - Added edge (2, 5)
2025-10-29 13:51:04,183 - INFO     - Added edge (2, 6)
2025-10-29 13:51:04,183 - INFO     - Added edge (2, 7)
2025-10-29 13:51:04,183 - INFO     - Added edge (2, 8)
2025-10-29 13:51:04,183 - INFO     - Added edge (3, 0)
2025-10-29 13:51:04,183 - INFO     - Added edge (3, 1)
2025-10-29 13:51:04,183 - INFO     - Added edge (3, 2)
2025-10-29 13:51:04,183 - INFO     - Added edge (3, 4)
2025-10-29 13:51:04,183 - INFO     - Added edge (3, 5)
2025-10-29 13:51:04,183 - INFO     - Added edge (3, 6)
2025-10-29 13:51:04,183 - INFO     - Added edge (3, 7)
2025-10-29 13:51:04,183 - INFO     - Added edge (3, 8)
2025-10-29 13:51:04,183 - INFO     - Added edge (4, 0)
2025-10-29 13:51:04,183 - INFO     - Added edge (4, 1)
2025-10-29 13:51:04,183 - INFO     - Added edge (4, 2)
2025-10-29 13:51:04,183 - INFO     - Added edge (4, 3)
2025-10-29 13:51:04,183 - INFO     - Added edge (4, 5)
2025-10-29 13:51:04,183 - INFO     - Added edge (4, 6)
2025-10-29 13:51:04,184 - INFO     - Added edge (4, 7)
2025-10-29 13:51:04,184 - INFO     - Added edge (4, 8)
2025-10-29 13:51:04,184 - INFO     - Added edge (5, 0)
2025-10-29 13:51:04,184 - INFO     - Added edge (5, 1)
2025-10-29 13:51:04,184 - INFO     - Added edge (5, 2)
2025-10-29 13:51:04,184 - INFO     - Added edge (5, 3)
2025-10-29 13:51:04,184 - INFO     - Added edge (5, 4)
2025-10-29 13:51:04,184 - INFO     - Added edge (6, 0)
2025-10-29 13:51:04,184 - INFO     - Added edge (6, 1)
2025-10-29 13:51:04,184 - INFO     - Added edge (6, 2)
2025-10-29 13:51:04,184 - INFO     - Added edge (6, 3)
2025-10-29 13:51:04,184 - INFO     - Added edge (6, 4)
2025-10-29 13:51:04,184 - INFO     - Added edge (7, 0)
2025-10-29 13:51:04,184 - INFO     - Added edge (7, 1)
2025-10-29 13:51:04,184 - INFO     - Added edge (7, 2)
2025-10-29 13:51:04,184 - INFO     - Added edge (7, 3)
2025-10-29 13:51:04,184 - INFO     - Added edge (7, 4)
2025-10-29 13:51:04,184 - INFO     - Added edge (8, 0)
2025-10-29 13:51:04,184 - INFO     - Added edge (8, 1)
2025-10-29 13:51:04,184 - INFO     - Added edge (8, 2)
2025-10-29 13:51:04,184 - INFO     - Added edge (8, 3)
2025-10-29 13:51:04,185 - INFO     - Added edge (8, 4)
2025-10-29 13:51:04,185 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:51:04,191 - INFO     - 
==========================================================================================
2025-10-29 13:51:04,191 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:04,191 - INFO     - ==========================================================================================
2025-10-29 13:51:04,191 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:04,191 - INFO     -   Input action: 54 (type: int)
2025-10-29 13:51:04,191 - INFO     -   Available edges in graph: 60
2025-10-29 13:51:04,191 - INFO     -   Action index calculation:
2025-10-29 13:51:04,191 - INFO     -     - action % max(num_valid_edges, 1) = 54 % 60 = 54
2025-10-29 13:51:04,191 - INFO     -     - clamped to [0, 59]: 54
2025-10-29 13:51:04,192 - INFO     -   ✓ Extracted merge pair from edge 54: (7, 4)
2025-10-29 13:51:04,192 - INFO     -   ✓ Validation passed
2025-10-29 13:51:04,192 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:04,192 - INFO     -     - Total states before merge: 30
2025-10-29 13:51:04,192 - INFO     -     - Num nodes: 9
2025-10-29 13:51:04,192 - INFO     -     - Num edges: 60
2025-10-29 13:51:04,192 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:04,193 - INFO     -       - Node 7: 5 states
2025-10-29 13:51:04,193 - INFO     -       - Node 4: 2 states
2025-10-29 13:51:04,193 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:04,193 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:04,222 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:51:04,222 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:04,223 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:51:04,323 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:04,323 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:04,323 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:51:04,323 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:04,324 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:04,324 - INFO     -   Calling graph_tracker.merge_nodes([7, 4])...
2025-10-29 13:51:04,324 - INFO     - Attempting merge of nodes 7 and 4...
2025-10-29 13:51:04,324 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:51:04,324 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:04,324 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:04,324 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:51:04,324 - INFO     - 
================================================================================
2025-10-29 13:51:04,324 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:51:04,324 - INFO     - ================================================================================
2025-10-29 13:51:04,324 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:04,324 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:51:04,324 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:51:04,326 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:04,326 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:04,326 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:04,326 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:04,326 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:04,326 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:04,326 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:04,326 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:04,326 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:04,326 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:04,326 - INFO     -   - ts1_id: 7
2025-10-29 13:51:04,326 - INFO     -   - ts2_id: 4
2025-10-29 13:51:04,326 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:04,327 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:04,327 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:51:04,327 - INFO     -   - Product space size: 10
2025-10-29 13:51:04,327 - INFO     -   - Using product state mapping
2025-10-29 13:51:04,327 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:04,327 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:51:04,327 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:51:04,327 - INFO     -   - delta: 0.8000
2025-10-29 13:51:04,327 - INFO     -   - f_stability: 1.0 - |0.8000| / 2.8000 = 0.7143
2025-10-29 13:51:04,327 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:04,327 - INFO     -   - Compared 7 values
2025-10-29 13:51:04,327 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:51:04,327 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:04,328 - INFO     -   - states_before: 10
2025-10-29 13:51:04,328 - INFO     -   - states_after: 10
2025-10-29 13:51:04,328 - INFO     -   - delta_states: 0
2025-10-29 13:51:04,328 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:04,328 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:04,328 - INFO     -   - ts2_transitions: 3
2025-10-29 13:51:04,328 - INFO     -   - merged_transitions: 27
2025-10-29 13:51:04,328 - INFO     -   - transition_density_change: 1.1000
2025-10-29 13:51:04,328 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:04,328 - INFO     -   - search_signals present: True
2025-10-29 13:51:04,328 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:04,328 - INFO     -   - search_depth: 2
2025-10-29 13:51:04,328 - INFO     -   - solution_cost: 2
2025-10-29 13:51:04,328 - INFO     -   - branching_factor: 2.7000
2025-10-29 13:51:04,328 - INFO     -   - solution_found: True
2025-10-29 13:51:04,328 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:04,329 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:04,329 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:51:04,329 - INFO     -   - TS7(5) + TS4(2) → 10 states
2025-10-29 13:51:04,329 - INFO     -   - f_stability=0.714
2025-10-29 13:51:04,329 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:04,329 - INFO     -   - solution_found=True
2025-10-29 13:51:04,329 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:04,330 - INFO     - 
  Extracted signals:
2025-10-29 13:51:04,330 - INFO     -     - iteration: 0
2025-10-29 13:51:04,330 - INFO     -     - states_before: 10
2025-10-29 13:51:04,330 - INFO     -     - states_after: 10
2025-10-29 13:51:04,330 - INFO     -     - delta_states: 0
2025-10-29 13:51:04,330 - INFO     -     - f_value_stability: 0.7143
2025-10-29 13:51:04,330 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:51:04,330 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:04,330 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:04,331 - INFO     -     - search_depth: 2
2025-10-29 13:51:04,331 - INFO     -     - solution_cost: 2
2025-10-29 13:51:04,331 - INFO     -     - branching_factor: 2.7000
2025-10-29 13:51:04,331 - INFO     -     - solution_found: True
2025-10-29 13:51:04,331 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:04,331 - INFO     - 
  Computing reward:
2025-10-29 13:51:04,331 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:04,331 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:04,331 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:04,331 - INFO     -   [1] BRANCHING FACTOR: 2.700 → score 0.745 (good (in comfort zone))
2025-10-29 13:51:04,331 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:04,332 - INFO     -   [3] F-VALUE STABILITY: 0.459
2025-10-29 13:51:04,332 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:51:04,332 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:04,332 - INFO     - 
  [COMPOSITE]: 0.676
2025-10-29 13:51:04,332 - INFO     -     = 0.300*0.745 (bf)
2025-10-29 13:51:04,332 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:04,332 - INFO     -     + 0.350*0.459 (stability)
2025-10-29 13:51:04,332 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:04,332 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:04,332 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:04,332 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:51:04,332 - INFO     - 
  [FINAL REWARD]: 0.6523
2025-10-29 13:51:04,332 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:04,333 - INFO     -     ✓ Reward computed: 0.6523
2025-10-29 13:51:04,333 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:04,333 - INFO     -     - bf_score                       0.7450
2025-10-29 13:51:04,333 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:04,333 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:04,333 - INFO     -     - f_stability                    0.4588
2025-10-29 13:51:04,333 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:51:04,333 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:04,333 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:04,333 - INFO     -     - composite                      0.6762
2025-10-29 13:51:04,333 - INFO     -     - total                          0.6523
2025-10-29 13:51:04,333 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:04,333 - INFO     -   Num remaining nodes: 8
2025-10-29 13:51:04,333 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:51:04,333 - INFO     -   Done: False
2025-10-29 13:51:04,333 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:04,335 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:04,335 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:04,335 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:04,335 - INFO     -     - num_nodes: 8
2025-10-29 13:51:04,335 - INFO     -     - num_edges: 50
2025-10-29 13:51:04,335 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:04,335 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:51:04,335 - INFO     -   After: current_merge_step = 1
2025-10-29 13:51:04,335 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:04,335 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:04,335 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:04,336 - INFO     -   ✓ Step logged
2025-10-29 13:51:04,336 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:04,336 - INFO     -   Returning:
2025-10-29 13:51:04,336 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:04,336 - INFO     -     - reward: 0.6523
2025-10-29 13:51:04,336 - INFO     -     - done: False
2025-10-29 13:51:04,336 - INFO     -     - truncated: False
2025-10-29 13:51:04,337 - INFO     -     - info: 19 keys
2025-10-29 13:51:04,337 - INFO     - ==========================================================================================

2025-10-29 13:51:04,341 - INFO     - 
==========================================================================================
2025-10-29 13:51:04,342 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:04,342 - INFO     - ==========================================================================================
2025-10-29 13:51:04,342 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:04,342 - INFO     -   Input action: 40 (type: int)
2025-10-29 13:51:04,342 - INFO     -   Available edges in graph: 50
2025-10-29 13:51:04,342 - INFO     -   Action index calculation:
2025-10-29 13:51:04,342 - INFO     -     - action % max(num_valid_edges, 1) = 40 % 50 = 40
2025-10-29 13:51:04,342 - INFO     -     - clamped to [0, 49]: 40
2025-10-29 13:51:04,342 - INFO     -   ✓ Extracted merge pair from edge 40: (8, 2)
2025-10-29 13:51:04,342 - INFO     -   ✓ Validation passed
2025-10-29 13:51:04,342 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:04,342 - INFO     -     - Total states before merge: 33
2025-10-29 13:51:04,342 - INFO     -     - Num nodes: 8
2025-10-29 13:51:04,343 - INFO     -     - Num edges: 50
2025-10-29 13:51:04,343 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:04,343 - INFO     -       - Node 8: 5 states
2025-10-29 13:51:04,343 - INFO     -       - Node 2: 2 states
2025-10-29 13:51:04,343 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:04,343 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:04,350 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:51:04,350 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:04,350 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:51:04,450 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:04,450 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:04,450 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:51:04,451 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:04,451 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:04,451 - INFO     -   Calling graph_tracker.merge_nodes([8, 2])...
2025-10-29 13:51:04,451 - INFO     - Attempting merge of nodes 8 and 2...
2025-10-29 13:51:04,452 - INFO     - Successfully merged nodes into new node 10 with 10 states.
2025-10-29 13:51:04,452 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:04,452 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:04,452 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:51:04,452 - INFO     - 
================================================================================
2025-10-29 13:51:04,452 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:51:04,452 - INFO     - ================================================================================
2025-10-29 13:51:04,452 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:04,452 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:51:04,452 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:51:04,453 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:04,453 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:04,453 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:04,453 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:04,453 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:04,454 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:04,454 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:04,454 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:04,454 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:04,454 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:04,454 - INFO     -   - ts1_id: 8
2025-10-29 13:51:04,454 - INFO     -   - ts2_id: 2
2025-10-29 13:51:04,454 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:04,454 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:04,454 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:51:04,454 - INFO     -   - Product space size: 10
2025-10-29 13:51:04,455 - INFO     -   - Using product state mapping
2025-10-29 13:51:04,455 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:04,455 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:51:04,455 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:51:04,455 - INFO     -   - delta: 0.4000
2025-10-29 13:51:04,455 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:51:04,456 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:04,456 - INFO     -   - Compared 7 values
2025-10-29 13:51:04,456 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:04,456 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:04,457 - INFO     -   - states_before: 10
2025-10-29 13:51:04,457 - INFO     -   - states_after: 10
2025-10-29 13:51:04,457 - INFO     -   - delta_states: 0
2025-10-29 13:51:04,457 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:04,457 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:04,457 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:04,457 - INFO     -   - merged_transitions: 40
2025-10-29 13:51:04,457 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:51:04,457 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:04,457 - INFO     -   - search_signals present: True
2025-10-29 13:51:04,457 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:04,457 - INFO     -   - search_depth: 1
2025-10-29 13:51:04,458 - INFO     -   - solution_cost: 0
2025-10-29 13:51:04,458 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:51:04,458 - INFO     -   - solution_found: True
2025-10-29 13:51:04,458 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:04,458 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:04,458 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:51:04,458 - INFO     -   - TS8(5) + TS2(2) → 10 states
2025-10-29 13:51:04,458 - INFO     -   - f_stability=0.862
2025-10-29 13:51:04,458 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:04,459 - INFO     -   - solution_found=True
2025-10-29 13:51:04,459 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:04,459 - INFO     - 
  Extracted signals:
2025-10-29 13:51:04,459 - INFO     -     - iteration: 1
2025-10-29 13:51:04,459 - INFO     -     - states_before: 10
2025-10-29 13:51:04,459 - INFO     -     - states_after: 10
2025-10-29 13:51:04,459 - INFO     -     - delta_states: 0
2025-10-29 13:51:04,459 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:51:04,459 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:04,459 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:04,459 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:04,459 - INFO     -     - search_depth: 1
2025-10-29 13:51:04,460 - INFO     -     - solution_cost: 0
2025-10-29 13:51:04,460 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:51:04,460 - INFO     -     - solution_found: True
2025-10-29 13:51:04,460 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:04,460 - INFO     - 
  Computing reward:
2025-10-29 13:51:04,460 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:04,460 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:04,460 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:04,460 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:51:04,461 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:51:04,461 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:51:04,461 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:04,461 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:04,461 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:51:04,461 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:51:04,461 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:51:04,461 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:51:04,462 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:04,462 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:04,462 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:04,462 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:04,462 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:51:04,462 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:04,462 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:51:04,462 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:04,462 - INFO     -     - bf_score                       0.5667
2025-10-29 13:51:04,462 - INFO     -     - depth_score                    0.9119
2025-10-29 13:51:04,463 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:04,463 - INFO     -     - f_stability                    0.2913
2025-10-29 13:51:04,463 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:04,463 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:04,463 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:04,463 - INFO     -     - composite                      0.5743
2025-10-29 13:51:04,463 - INFO     -     - total                          0.3487
2025-10-29 13:51:04,463 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:04,463 - INFO     -   Num remaining nodes: 7
2025-10-29 13:51:04,463 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:51:04,463 - INFO     -   Done: False
2025-10-29 13:51:04,463 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:04,465 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:04,465 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:04,465 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:04,466 - INFO     -     - num_nodes: 7
2025-10-29 13:51:04,466 - INFO     -     - num_edges: 40
2025-10-29 13:51:04,466 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:04,466 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:51:04,466 - INFO     -   After: current_merge_step = 2
2025-10-29 13:51:04,466 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:04,466 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:04,466 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:04,467 - INFO     -   ✓ Step logged
2025-10-29 13:51:04,468 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:04,468 - INFO     -   Returning:
2025-10-29 13:51:04,468 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:04,468 - INFO     -     - reward: 0.3487
2025-10-29 13:51:04,468 - INFO     -     - done: False
2025-10-29 13:51:04,469 - INFO     -     - truncated: False
2025-10-29 13:51:04,469 - INFO     -     - info: 19 keys
2025-10-29 13:51:04,469 - INFO     - ==========================================================================================

2025-10-29 13:51:04,475 - INFO     - 
==========================================================================================
2025-10-29 13:51:04,475 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:04,475 - INFO     - ==========================================================================================
2025-10-29 13:51:04,475 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:04,475 - INFO     -   Input action: 20 (type: int)
2025-10-29 13:51:04,475 - INFO     -   Available edges in graph: 40
2025-10-29 13:51:04,476 - INFO     -   Action index calculation:
2025-10-29 13:51:04,476 - INFO     -     - action % max(num_valid_edges, 1) = 20 % 40 = 20
2025-10-29 13:51:04,476 - INFO     -     - clamped to [0, 39]: 20
2025-10-29 13:51:04,476 - INFO     -   ✓ Extracted merge pair from edge 20: (5, 3)
2025-10-29 13:51:04,476 - INFO     -   ✓ Validation passed
2025-10-29 13:51:04,476 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:04,476 - INFO     -     - Total states before merge: 36
2025-10-29 13:51:04,476 - INFO     -     - Num nodes: 7
2025-10-29 13:51:04,476 - INFO     -     - Num edges: 40
2025-10-29 13:51:04,476 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:04,476 - INFO     -       - Node 5: 5 states
2025-10-29 13:51:04,476 - INFO     -       - Node 3: 2 states
2025-10-29 13:51:04,477 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:04,477 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:04,481 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:51:04,481 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:04,481 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:51:04,582 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:04,582 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:04,582 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:51:04,583 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:04,583 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:04,583 - INFO     -   Calling graph_tracker.merge_nodes([5, 3])...
2025-10-29 13:51:04,583 - INFO     - Attempting merge of nodes 5 and 3...
2025-10-29 13:51:04,583 - INFO     - Successfully merged nodes into new node 11 with 10 states.
2025-10-29 13:51:04,583 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:04,583 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:04,583 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:51:04,583 - INFO     - 
================================================================================
2025-10-29 13:51:04,583 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:51:04,583 - INFO     - ================================================================================
2025-10-29 13:51:04,583 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:04,583 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:51:04,584 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:51:04,584 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:04,584 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:04,584 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:04,584 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:04,584 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:04,585 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:04,585 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:04,585 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:04,585 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:04,585 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:04,585 - INFO     -   - ts1_id: 5
2025-10-29 13:51:04,585 - INFO     -   - ts2_id: 3
2025-10-29 13:51:04,585 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:04,585 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:04,585 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:51:04,585 - INFO     -   - Product space size: 10
2025-10-29 13:51:04,585 - INFO     -   - Using product state mapping
2025-10-29 13:51:04,585 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:04,586 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:51:04,586 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:51:04,586 - INFO     -   - delta: 0.5000
2025-10-29 13:51:04,586 - INFO     -   - f_stability: 1.0 - |0.5000| / 2.8000 = 0.8214
2025-10-29 13:51:04,586 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:04,586 - INFO     -   - Compared 7 values
2025-10-29 13:51:04,586 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:04,586 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:04,586 - INFO     -   - states_before: 10
2025-10-29 13:51:04,586 - INFO     -   - states_after: 10
2025-10-29 13:51:04,586 - INFO     -   - delta_states: 0
2025-10-29 13:51:04,587 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:04,587 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:04,587 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:04,587 - INFO     -   - merged_transitions: 40
2025-10-29 13:51:04,587 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:51:04,587 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:04,587 - INFO     -   - search_signals present: True
2025-10-29 13:51:04,587 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:04,587 - INFO     -   - search_depth: 1
2025-10-29 13:51:04,587 - INFO     -   - solution_cost: 2
2025-10-29 13:51:04,587 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:51:04,587 - INFO     -   - solution_found: True
2025-10-29 13:51:04,587 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:04,588 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:04,588 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:51:04,588 - INFO     -   - TS5(5) + TS3(2) → 10 states
2025-10-29 13:51:04,588 - INFO     -   - f_stability=0.821
2025-10-29 13:51:04,588 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:04,588 - INFO     -   - solution_found=True
2025-10-29 13:51:04,588 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:04,588 - INFO     - 
  Extracted signals:
2025-10-29 13:51:04,588 - INFO     -     - iteration: 2
2025-10-29 13:51:04,588 - INFO     -     - states_before: 10
2025-10-29 13:51:04,588 - INFO     -     - states_after: 10
2025-10-29 13:51:04,588 - INFO     -     - delta_states: 0
2025-10-29 13:51:04,588 - INFO     -     - f_value_stability: 0.8214
2025-10-29 13:51:04,588 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:04,590 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:04,590 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:04,590 - INFO     -     - search_depth: 1
2025-10-29 13:51:04,590 - INFO     -     - solution_cost: 2
2025-10-29 13:51:04,590 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:51:04,590 - INFO     -     - solution_found: True
2025-10-29 13:51:04,590 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:04,590 - INFO     - 
  Computing reward:
2025-10-29 13:51:04,590 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:04,590 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:04,590 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:04,590 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:51:04,590 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:51:04,591 - INFO     -   [3] F-VALUE STABILITY: 0.593
2025-10-29 13:51:04,591 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:04,591 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:04,591 - INFO     - 
  [COMPOSITE]: 0.680
2025-10-29 13:51:04,591 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:51:04,591 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:51:04,591 - INFO     -     + 0.350*0.593 (stability)
2025-10-29 13:51:04,591 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:04,591 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:04,591 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:04,591 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:04,592 - INFO     - 
  [FINAL REWARD]: 0.7602
2025-10-29 13:51:04,592 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:04,592 - INFO     -     ✓ Reward computed: 0.7602
2025-10-29 13:51:04,592 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:04,592 - INFO     -     - bf_score                       0.5667
2025-10-29 13:51:04,592 - INFO     -     - depth_score                    0.9119
2025-10-29 13:51:04,592 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:04,592 - INFO     -     - f_stability                    0.5935
2025-10-29 13:51:04,592 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:04,592 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:04,592 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:04,593 - INFO     -     - composite                      0.6801
2025-10-29 13:51:04,593 - INFO     -     - total                          0.7602
2025-10-29 13:51:04,593 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:04,593 - INFO     -   Num remaining nodes: 6
2025-10-29 13:51:04,593 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:51:04,593 - INFO     -   Done: False
2025-10-29 13:51:04,593 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:04,594 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:04,594 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:04,594 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:04,595 - INFO     -     - num_nodes: 6
2025-10-29 13:51:04,595 - INFO     -     - num_edges: 30
2025-10-29 13:51:04,595 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:04,595 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:51:04,595 - INFO     -   After: current_merge_step = 3
2025-10-29 13:51:04,595 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:04,595 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:04,595 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:04,596 - INFO     -   ✓ Step logged
2025-10-29 13:51:04,596 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:04,597 - INFO     -   Returning:
2025-10-29 13:51:04,597 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:04,597 - INFO     -     - reward: 0.7602
2025-10-29 13:51:04,597 - INFO     -     - done: False
2025-10-29 13:51:04,597 - INFO     -     - truncated: False
2025-10-29 13:51:04,597 - INFO     -     - info: 19 keys
2025-10-29 13:51:04,597 - INFO     - ==========================================================================================

2025-10-29 13:51:04,601 - INFO     - 
==========================================================================================
2025-10-29 13:51:04,601 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:04,601 - INFO     - ==========================================================================================
2025-10-29 13:51:04,601 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:04,601 - INFO     -   Input action: 14 (type: int)
2025-10-29 13:51:04,601 - INFO     -   Available edges in graph: 30
2025-10-29 13:51:04,601 - INFO     -   Action index calculation:
2025-10-29 13:51:04,601 - INFO     -     - action % max(num_valid_edges, 1) = 14 % 30 = 14
2025-10-29 13:51:04,601 - INFO     -     - clamped to [0, 29]: 14
2025-10-29 13:51:04,602 - INFO     -   ✓ Extracted merge pair from edge 14: (6, 11)
2025-10-29 13:51:04,602 - INFO     -   ✓ Validation passed
2025-10-29 13:51:04,602 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:04,602 - INFO     -     - Total states before merge: 39
2025-10-29 13:51:04,602 - INFO     -     - Num nodes: 6
2025-10-29 13:51:04,602 - INFO     -     - Num edges: 30
2025-10-29 13:51:04,602 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:04,602 - INFO     -       - Node 6: 5 states
2025-10-29 13:51:04,602 - INFO     -       - Node 11: 10 states
2025-10-29 13:51:04,602 - INFO     -       - Expected product: 50 states
2025-10-29 13:51:04,602 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:04,606 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:51:04,606 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:04,607 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:51:04,708 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:04,708 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:04,708 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:51:04,709 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:04,709 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:04,709 - INFO     -   Calling graph_tracker.merge_nodes([6, 11])...
2025-10-29 13:51:04,709 - INFO     - Attempting merge of nodes 6 and 11...
2025-10-29 13:51:04,711 - INFO     - Successfully merged nodes into new node 12 with 50 states.
2025-10-29 13:51:04,711 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:04,711 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:04,711 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:51:04,711 - INFO     - 
================================================================================
2025-10-29 13:51:04,711 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:51:04,711 - INFO     - ================================================================================
2025-10-29 13:51:04,711 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:04,711 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:51:04,711 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:51:04,712 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:04,712 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:04,712 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:04,712 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:51:04,713 - INFO     -   - Raw f_after length: 50
2025-10-29 13:51:04,713 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:04,713 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:04,713 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:51:04,713 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:51:04,713 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:04,713 - INFO     -   - ts1_id: 6
2025-10-29 13:51:04,713 - INFO     -   - ts2_id: 11
2025-10-29 13:51:04,713 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:04,713 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:04,713 - INFO     -   - ts1_size: 5, ts2_size: 10
2025-10-29 13:51:04,713 - INFO     -   - Product space size: 50
2025-10-29 13:51:04,713 - INFO     -   - Using product state mapping
2025-10-29 13:51:04,714 - INFO     -   - f_before_product length: 50
2025-10-29 13:51:04,714 - INFO     -   - avg_f_before: 3.8400 (50 valid states)
2025-10-29 13:51:04,714 - INFO     -   - avg_f_after:  6.1400 (50 valid states)
2025-10-29 13:51:04,714 - INFO     -   - delta: 2.3000
2025-10-29 13:51:04,715 - INFO     -   - f_stability: 1.0 - |2.3000| / 3.8400 = 0.4010
2025-10-29 13:51:04,715 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:04,715 - INFO     -   - Compared 15 values
2025-10-29 13:51:04,715 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:51:04,715 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:04,715 - INFO     -   - states_before: 50
2025-10-29 13:51:04,715 - INFO     -   - states_after: 50
2025-10-29 13:51:04,715 - INFO     -   - delta_states: 0
2025-10-29 13:51:04,715 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:04,715 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:04,715 - INFO     -   - ts2_transitions: 40
2025-10-29 13:51:04,715 - INFO     -   - merged_transitions: 275
2025-10-29 13:51:04,715 - INFO     -   - transition_density_change: 4.4400
2025-10-29 13:51:04,716 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:04,716 - INFO     -   - search_signals present: True
2025-10-29 13:51:04,716 - INFO     -   - nodes_expanded: 50
2025-10-29 13:51:04,716 - INFO     -   - search_depth: 3
2025-10-29 13:51:04,716 - INFO     -   - solution_cost: 2
2025-10-29 13:51:04,716 - INFO     -   - branching_factor: 5.5000
2025-10-29 13:51:04,716 - INFO     -   - solution_found: True
2025-10-29 13:51:04,716 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:04,716 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:04,717 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:51:04,717 - INFO     -   - TS6(5) + TS11(10) → 50 states
2025-10-29 13:51:04,717 - INFO     -   - f_stability=0.401
2025-10-29 13:51:04,717 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:51:04,717 - INFO     -   - solution_found=True
2025-10-29 13:51:04,717 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:04,717 - INFO     - 
  Extracted signals:
2025-10-29 13:51:04,717 - INFO     -     - iteration: 3
2025-10-29 13:51:04,717 - INFO     -     - states_before: 50
2025-10-29 13:51:04,717 - INFO     -     - states_after: 50
2025-10-29 13:51:04,717 - INFO     -     - delta_states: 0
2025-10-29 13:51:04,717 - INFO     -     - f_value_stability: 0.4010
2025-10-29 13:51:04,717 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:51:04,718 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:04,718 - INFO     -     - nodes_expanded: 50
2025-10-29 13:51:04,718 - INFO     -     - search_depth: 3
2025-10-29 13:51:04,718 - INFO     -     - solution_cost: 2
2025-10-29 13:51:04,718 - INFO     -     - branching_factor: 5.5000
2025-10-29 13:51:04,718 - INFO     -     - solution_found: True
2025-10-29 13:51:04,718 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:04,718 - INFO     - 
  Computing reward:
2025-10-29 13:51:04,718 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:04,718 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:04,718 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:04,718 - INFO     -   [1] BRANCHING FACTOR: 5.500 → score 0.367 (tolerable)
2025-10-29 13:51:04,719 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:51:04,719 - INFO     -   [3] F-VALUE STABILITY: 0.142
2025-10-29 13:51:04,719 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:04,719 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:04,719 - INFO     - 
  [COMPOSITE]: 0.444
2025-10-29 13:51:04,719 - INFO     -     = 0.300*0.367 (bf)
2025-10-29 13:51:04,719 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:51:04,719 - INFO     -     + 0.350*0.142 (stability)
2025-10-29 13:51:04,719 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:04,719 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:04,719 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:04,719 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:04,719 - INFO     - 
  [FINAL REWARD]: 0.0888
2025-10-29 13:51:04,719 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:04,720 - INFO     -     ✓ Reward computed: 0.0888
2025-10-29 13:51:04,720 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:04,720 - INFO     -     - bf_score                       0.3667
2025-10-29 13:51:04,720 - INFO     -     - depth_score                    0.8237
2025-10-29 13:51:04,720 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:04,720 - INFO     -     - f_stability                    0.1419
2025-10-29 13:51:04,720 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:04,720 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:04,720 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:04,720 - INFO     -     - composite                      0.4444
2025-10-29 13:51:04,720 - INFO     -     - total                          0.0888
2025-10-29 13:51:04,720 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:04,720 - INFO     -   Num remaining nodes: 5
2025-10-29 13:51:04,720 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:51:04,720 - INFO     -   Done: False
2025-10-29 13:51:04,720 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:04,723 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:04,723 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:04,723 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:04,723 - INFO     -     - num_nodes: 5
2025-10-29 13:51:04,723 - INFO     -     - num_edges: 20
2025-10-29 13:51:04,723 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:04,724 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:51:04,724 - INFO     -   After: current_merge_step = 4
2025-10-29 13:51:04,724 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:04,724 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:04,724 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:04,724 - INFO     -   ✓ Step logged
2025-10-29 13:51:04,725 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:04,725 - INFO     -   Returning:
2025-10-29 13:51:04,725 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:04,725 - INFO     -     - reward: 0.0888
2025-10-29 13:51:04,725 - INFO     -     - done: False
2025-10-29 13:51:04,725 - INFO     -     - truncated: False
2025-10-29 13:51:04,725 - INFO     -     - info: 19 keys
2025-10-29 13:51:04,726 - INFO     - ==========================================================================================

2025-10-29 13:51:04,731 - INFO     - 
==========================================================================================
2025-10-29 13:51:04,731 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:04,731 - INFO     - ==========================================================================================
2025-10-29 13:51:04,731 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:04,731 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:51:04,731 - INFO     -   Available edges in graph: 20
2025-10-29 13:51:04,731 - INFO     -   Action index calculation:
2025-10-29 13:51:04,731 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 20 = 1
2025-10-29 13:51:04,731 - INFO     -     - clamped to [0, 19]: 1
2025-10-29 13:51:04,731 - INFO     -   ✓ Extracted merge pair from edge 1: (0, 9)
2025-10-29 13:51:04,731 - INFO     -   ✓ Validation passed
2025-10-29 13:51:04,732 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:04,732 - INFO     -     - Total states before merge: 74
2025-10-29 13:51:04,732 - INFO     -     - Num nodes: 5
2025-10-29 13:51:04,732 - INFO     -     - Num edges: 20
2025-10-29 13:51:04,732 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:04,733 - INFO     -       - Node 0: 2 states
2025-10-29 13:51:04,733 - INFO     -       - Node 9: 10 states
2025-10-29 13:51:04,733 - INFO     -       - Expected product: 20 states
2025-10-29 13:51:04,733 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:04,738 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:51:04,738 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:04,739 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:51:04,839 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:04,840 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:04,840 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:51:04,840 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:04,840 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:04,841 - INFO     -   Calling graph_tracker.merge_nodes([0, 9])...
2025-10-29 13:51:04,841 - INFO     - Attempting merge of nodes 0 and 9...
2025-10-29 13:51:04,841 - INFO     - Successfully merged nodes into new node 13 with 20 states.
2025-10-29 13:51:04,841 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:04,841 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:04,841 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:51:04,841 - INFO     - 
================================================================================
2025-10-29 13:51:04,841 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:51:04,841 - INFO     - ================================================================================
2025-10-29 13:51:04,841 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:04,841 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:51:04,841 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:51:04,842 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:04,842 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:04,842 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:04,842 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:51:04,842 - INFO     -   - Raw f_after length: 20
2025-10-29 13:51:04,842 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:04,843 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:04,843 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:51:04,843 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:51:04,843 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:04,843 - INFO     -   - ts1_id: 0
2025-10-29 13:51:04,843 - INFO     -   - ts2_id: 9
2025-10-29 13:51:04,843 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:04,843 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:04,843 - INFO     -   - ts1_size: 2, ts2_size: 10
2025-10-29 13:51:04,843 - INFO     -   - Product space size: 20
2025-10-29 13:51:04,843 - INFO     -   - Using product state mapping
2025-10-29 13:51:04,843 - INFO     -   - f_before_product length: 20
2025-10-29 13:51:04,844 - INFO     -   - avg_f_before: 3.6000 (20 valid states)
2025-10-29 13:51:04,844 - INFO     -   - avg_f_after:  3.8500 (20 valid states)
2025-10-29 13:51:04,844 - INFO     -   - delta: 0.2500
2025-10-29 13:51:04,844 - INFO     -   - f_stability: 1.0 - |0.2500| / 3.6000 = 0.9306
2025-10-29 13:51:04,844 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:04,844 - INFO     -   - Compared 12 values
2025-10-29 13:51:04,844 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:04,844 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:04,844 - INFO     -   - states_before: 20
2025-10-29 13:51:04,844 - INFO     -   - states_after: 20
2025-10-29 13:51:04,845 - INFO     -   - delta_states: 0
2025-10-29 13:51:04,845 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:04,845 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:04,845 - INFO     -   - ts2_transitions: 27
2025-10-29 13:51:04,845 - INFO     -   - merged_transitions: 97
2025-10-29 13:51:04,845 - INFO     -   - transition_density_change: 3.2500
2025-10-29 13:51:04,845 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:04,845 - INFO     -   - search_signals present: True
2025-10-29 13:51:04,845 - INFO     -   - nodes_expanded: 20
2025-10-29 13:51:04,845 - INFO     -   - search_depth: 2
2025-10-29 13:51:04,845 - INFO     -   - solution_cost: 2
2025-10-29 13:51:04,845 - INFO     -   - branching_factor: 4.8500
2025-10-29 13:51:04,845 - INFO     -   - solution_found: True
2025-10-29 13:51:04,846 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:04,846 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:04,846 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:51:04,846 - INFO     -   - TS0(2) + TS9(10) → 20 states
2025-10-29 13:51:04,846 - INFO     -   - f_stability=0.931
2025-10-29 13:51:04,846 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:51:04,846 - INFO     -   - solution_found=True
2025-10-29 13:51:04,846 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:04,846 - INFO     - 
  Extracted signals:
2025-10-29 13:51:04,846 - INFO     -     - iteration: 4
2025-10-29 13:51:04,847 - INFO     -     - states_before: 20
2025-10-29 13:51:04,847 - INFO     -     - states_after: 20
2025-10-29 13:51:04,847 - INFO     -     - delta_states: 0
2025-10-29 13:51:04,847 - INFO     -     - f_value_stability: 0.9306
2025-10-29 13:51:04,847 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:04,847 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:04,847 - INFO     -     - nodes_expanded: 20
2025-10-29 13:51:04,847 - INFO     -     - search_depth: 2
2025-10-29 13:51:04,847 - INFO     -     - solution_cost: 2
2025-10-29 13:51:04,847 - INFO     -     - branching_factor: 4.8500
2025-10-29 13:51:04,847 - INFO     -     - solution_found: True
2025-10-29 13:51:04,847 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:04,848 - INFO     - 
  Computing reward:
2025-10-29 13:51:04,848 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:04,848 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:04,848 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:04,848 - INFO     -   [1] BRANCHING FACTOR: 4.850 → score 0.453 (tolerable)
2025-10-29 13:51:04,848 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:04,848 - INFO     -   [3] F-VALUE STABILITY: 0.815
2025-10-29 13:51:04,849 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:51:04,849 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:04,849 - INFO     - 
  [COMPOSITE]: 0.713
2025-10-29 13:51:04,849 - INFO     -     = 0.300*0.453 (bf)
2025-10-29 13:51:04,849 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:04,849 - INFO     -     + 0.350*0.815 (stability)
2025-10-29 13:51:04,849 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:04,849 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:04,849 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:04,849 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:51:04,850 - INFO     - 
  [FINAL REWARD]: 0.9263
2025-10-29 13:51:04,850 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:04,850 - INFO     -     ✓ Reward computed: 0.9263
2025-10-29 13:51:04,850 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:04,850 - INFO     -     - bf_score                       0.4533
2025-10-29 13:51:04,850 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:04,850 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:04,850 - INFO     -     - f_stability                    0.8146
2025-10-29 13:51:04,850 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:51:04,850 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:04,851 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:04,851 - INFO     -     - composite                      0.7132
2025-10-29 13:51:04,851 - INFO     -     - total                          0.9263
2025-10-29 13:51:04,851 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:04,851 - INFO     -   Num remaining nodes: 4
2025-10-29 13:51:04,851 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:51:04,851 - INFO     -   Done: False
2025-10-29 13:51:04,851 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:04,851 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:04,851 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:04,851 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:04,852 - INFO     -     - num_nodes: 4
2025-10-29 13:51:04,852 - INFO     -     - num_edges: 12
2025-10-29 13:51:04,852 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:04,852 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:51:04,852 - INFO     -   After: current_merge_step = 5
2025-10-29 13:51:04,852 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:04,852 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:04,852 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:04,854 - INFO     -   ✓ Step logged
2025-10-29 13:51:04,854 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:04,854 - INFO     -   Returning:
2025-10-29 13:51:04,854 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:04,854 - INFO     -     - reward: 0.9263
2025-10-29 13:51:04,854 - INFO     -     - done: False
2025-10-29 13:51:04,854 - INFO     -     - truncated: False
2025-10-29 13:51:04,854 - INFO     -     - info: 19 keys
2025-10-29 13:51:04,854 - INFO     - ==========================================================================================

2025-10-29 13:51:04,859 - INFO     - 
==========================================================================================
2025-10-29 13:51:04,859 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:04,859 - INFO     - ==========================================================================================
2025-10-29 13:51:04,859 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:04,859 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:51:04,859 - INFO     -   Available edges in graph: 12
2025-10-29 13:51:04,859 - INFO     -   Action index calculation:
2025-10-29 13:51:04,859 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 12 = 2
2025-10-29 13:51:04,859 - INFO     -     - clamped to [0, 11]: 2
2025-10-29 13:51:04,860 - INFO     -   ✓ Extracted merge pair from edge 2: (1, 13)
2025-10-29 13:51:04,860 - INFO     -   ✓ Validation passed
2025-10-29 13:51:04,860 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:04,860 - INFO     -     - Total states before merge: 82
2025-10-29 13:51:04,860 - INFO     -     - Num nodes: 4
2025-10-29 13:51:04,860 - INFO     -     - Num edges: 12
2025-10-29 13:51:04,860 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:04,860 - INFO     -       - Node 1: 2 states
2025-10-29 13:51:04,860 - INFO     -       - Node 13: 20 states
2025-10-29 13:51:04,860 - INFO     -       - Expected product: 40 states
2025-10-29 13:51:04,860 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:04,867 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:51:04,867 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:04,867 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:51:04,968 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:04,968 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:04,968 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:51:04,969 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:04,969 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:04,969 - INFO     -   Calling graph_tracker.merge_nodes([1, 13])...
2025-10-29 13:51:04,969 - INFO     - Attempting merge of nodes 1 and 13...
2025-10-29 13:51:04,969 - INFO     - Successfully merged nodes into new node 14 with 40 states.
2025-10-29 13:51:04,969 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:04,969 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:04,969 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:51:04,970 - INFO     - 
================================================================================
2025-10-29 13:51:04,970 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:51:04,970 - INFO     - ================================================================================
2025-10-29 13:51:04,970 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:04,970 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:51:04,970 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:51:04,970 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:04,971 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:04,971 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:04,971 - INFO     -   - Raw ts2_f length: 20
2025-10-29 13:51:04,971 - INFO     -   - Raw f_after length: 40
2025-10-29 13:51:04,971 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:04,971 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:04,971 - INFO     -   - ts2_valid: 20 / 20 (removed -20)
2025-10-29 13:51:04,971 - INFO     -   - after_valid: 40 / 40 (removed 0)
2025-10-29 13:51:04,971 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:04,971 - INFO     -   - ts1_id: 1
2025-10-29 13:51:04,971 - INFO     -   - ts2_id: 13
2025-10-29 13:51:04,971 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:04,971 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:04,971 - INFO     -   - ts1_size: 2, ts2_size: 20
2025-10-29 13:51:04,971 - INFO     -   - Product space size: 40
2025-10-29 13:51:04,971 - INFO     -   - Using product state mapping
2025-10-29 13:51:04,972 - INFO     -   - f_before_product length: 40
2025-10-29 13:51:04,972 - INFO     -   - avg_f_before: 3.8500 (40 valid states)
2025-10-29 13:51:04,972 - INFO     -   - avg_f_after:  4.1250 (40 valid states)
2025-10-29 13:51:04,972 - INFO     -   - delta: 0.2750
2025-10-29 13:51:04,972 - INFO     -   - f_stability: 1.0 - |0.2750| / 3.8500 = 0.9286
2025-10-29 13:51:04,972 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:04,972 - INFO     -   - Compared 22 values
2025-10-29 13:51:04,972 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:04,972 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:04,972 - INFO     -   - states_before: 40
2025-10-29 13:51:04,972 - INFO     -   - states_after: 40
2025-10-29 13:51:04,972 - INFO     -   - delta_states: 0
2025-10-29 13:51:04,972 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:04,974 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:04,974 - INFO     -   - ts2_transitions: 97
2025-10-29 13:51:04,974 - INFO     -   - merged_transitions: 340
2025-10-29 13:51:04,974 - INFO     -   - transition_density_change: 5.9500
2025-10-29 13:51:04,974 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:04,974 - INFO     -   - search_signals present: True
2025-10-29 13:51:04,974 - INFO     -   - nodes_expanded: 40
2025-10-29 13:51:04,974 - INFO     -   - search_depth: 2
2025-10-29 13:51:04,974 - INFO     -   - solution_cost: 2
2025-10-29 13:51:04,974 - INFO     -   - branching_factor: 8.5000
2025-10-29 13:51:04,974 - INFO     -   - solution_found: True
2025-10-29 13:51:04,974 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:04,975 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:04,975 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:51:04,975 - INFO     -   - TS1(2) + TS13(20) → 40 states
2025-10-29 13:51:04,975 - INFO     -   - f_stability=0.929
2025-10-29 13:51:04,975 - INFO     -   - A* nodes_expanded=40
2025-10-29 13:51:04,975 - INFO     -   - solution_found=True
2025-10-29 13:51:04,975 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:04,975 - INFO     - 
  Extracted signals:
2025-10-29 13:51:04,976 - INFO     -     - iteration: 5
2025-10-29 13:51:04,976 - INFO     -     - states_before: 40
2025-10-29 13:51:04,976 - INFO     -     - states_after: 40
2025-10-29 13:51:04,976 - INFO     -     - delta_states: 0
2025-10-29 13:51:04,976 - INFO     -     - f_value_stability: 0.9286
2025-10-29 13:51:04,976 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:04,976 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:04,976 - INFO     -     - nodes_expanded: 40
2025-10-29 13:51:04,976 - INFO     -     - search_depth: 2
2025-10-29 13:51:04,976 - INFO     -     - solution_cost: 2
2025-10-29 13:51:04,976 - INFO     -     - branching_factor: 8.5000
2025-10-29 13:51:04,976 - INFO     -     - solution_found: True
2025-10-29 13:51:04,977 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:04,977 - WARNING  -     ⚠️  High branching factor: 8.5000
2025-10-29 13:51:04,977 - INFO     - 
  Computing reward:
2025-10-29 13:51:04,977 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:04,977 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:04,977 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:04,977 - INFO     -   [1] BRANCHING FACTOR: 8.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:51:04,977 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:04,978 - INFO     -   [3] F-VALUE STABILITY: 0.698
2025-10-29 13:51:04,978 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:04,978 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:04,978 - INFO     - 
  [COMPOSITE]: 0.567
2025-10-29 13:51:04,978 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:51:04,978 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:04,978 - INFO     -     + 0.350*0.698 (stability)
2025-10-29 13:51:04,978 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:04,978 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:04,978 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:04,979 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:04,979 - INFO     - 
  [FINAL REWARD]: 0.5331
2025-10-29 13:51:04,979 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:04,979 - INFO     -     ✓ Reward computed: 0.5331
2025-10-29 13:51:04,979 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:04,979 - INFO     -     - bf_score                       0.1000
2025-10-29 13:51:04,979 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:04,979 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:04,979 - INFO     -     - f_stability                    0.6985
2025-10-29 13:51:04,979 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:04,979 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:04,980 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:04,980 - INFO     -     - composite                      0.5665
2025-10-29 13:51:04,980 - INFO     -     - total                          0.5331
2025-10-29 13:51:04,980 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:04,980 - INFO     -   Num remaining nodes: 3
2025-10-29 13:51:04,980 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:51:04,980 - INFO     -   Done: False
2025-10-29 13:51:04,980 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:04,981 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:04,981 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:04,981 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:04,981 - INFO     -     - num_nodes: 3
2025-10-29 13:51:04,982 - INFO     -     - num_edges: 6
2025-10-29 13:51:04,982 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:04,982 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:51:04,982 - INFO     -   After: current_merge_step = 6
2025-10-29 13:51:04,982 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:04,982 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:04,982 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:04,983 - INFO     -   ✓ Step logged
2025-10-29 13:51:04,983 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:04,983 - INFO     -   Returning:
2025-10-29 13:51:04,983 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:04,984 - INFO     -     - reward: 0.5331
2025-10-29 13:51:04,984 - INFO     -     - done: False
2025-10-29 13:51:04,984 - INFO     -     - truncated: False
2025-10-29 13:51:04,984 - INFO     -     - info: 19 keys
2025-10-29 13:51:04,984 - INFO     - ==========================================================================================

2025-10-29 13:51:04,990 - INFO     - 
==========================================================================================
2025-10-29 13:51:04,990 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:04,991 - INFO     - ==========================================================================================
2025-10-29 13:51:04,991 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:04,991 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:51:04,991 - INFO     -   Available edges in graph: 6
2025-10-29 13:51:04,991 - INFO     -   Action index calculation:
2025-10-29 13:51:04,991 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 6 = 0
2025-10-29 13:51:04,991 - INFO     -     - clamped to [0, 5]: 0
2025-10-29 13:51:04,991 - INFO     -   ✓ Extracted merge pair from edge 0: (10, 12)
2025-10-29 13:51:04,991 - INFO     -   ✓ Validation passed
2025-10-29 13:51:04,991 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:04,991 - INFO     -     - Total states before merge: 100
2025-10-29 13:51:04,991 - INFO     -     - Num nodes: 3
2025-10-29 13:51:04,991 - INFO     -     - Num edges: 6
2025-10-29 13:51:04,991 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:04,992 - INFO     -       - Node 10: 10 states
2025-10-29 13:51:04,992 - INFO     -       - Node 12: 50 states
2025-10-29 13:51:04,992 - INFO     -       - Expected product: 500 states
2025-10-29 13:51:04,992 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:04,999 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:51:04,999 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:04,999 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:51:05,100 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:05,100 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:05,100 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:51:05,103 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:05,103 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:05,103 - INFO     -   Calling graph_tracker.merge_nodes([10, 12])...
2025-10-29 13:51:05,103 - INFO     - Attempting merge of nodes 10 and 12...
2025-10-29 13:51:05,103 - INFO     - Successfully merged nodes into new node 15 with 500 states.
2025-10-29 13:51:05,103 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:05,103 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:05,103 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:51:05,103 - INFO     - 
================================================================================
2025-10-29 13:51:05,103 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:51:05,103 - INFO     - ================================================================================
2025-10-29 13:51:05,103 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:05,104 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:51:05,104 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:51:05,105 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:05,105 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:05,105 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:51:05,105 - INFO     -   - Raw ts2_f length: 50
2025-10-29 13:51:05,105 - INFO     -   - Raw f_after length: 500
2025-10-29 13:51:05,105 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:05,105 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:51:05,105 - INFO     -   - ts2_valid: 50 / 50 (removed -50)
2025-10-29 13:51:05,105 - INFO     -   - after_valid: 500 / 500 (removed 0)
2025-10-29 13:51:05,105 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:05,105 - INFO     -   - ts1_id: 10
2025-10-29 13:51:05,105 - INFO     -   - ts2_id: 12
2025-10-29 13:51:05,105 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:05,106 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:05,106 - INFO     -   - ts1_size: 10, ts2_size: 50
2025-10-29 13:51:05,106 - INFO     -   - Product space size: 500
2025-10-29 13:51:05,106 - INFO     -   - Using product state mapping
2025-10-29 13:51:05,106 - INFO     -   - f_before_product length: 500
2025-10-29 13:51:05,108 - INFO     -   - avg_f_before: 6.3200 (500 valid states)
2025-10-29 13:51:05,108 - INFO     -   - avg_f_after:  9.9620 (500 valid states)
2025-10-29 13:51:05,108 - INFO     -   - delta: 3.6420
2025-10-29 13:51:05,108 - INFO     -   - f_stability: 1.0 - |3.6420| / 6.3200 = 0.4237
2025-10-29 13:51:05,108 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:05,108 - INFO     -   - Compared 60 values
2025-10-29 13:51:05,108 - INFO     -   - Significant changes (> 5.0): 21
2025-10-29 13:51:05,108 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:05,108 - INFO     -   - states_before: 500
2025-10-29 13:51:05,108 - INFO     -   - states_after: 500
2025-10-29 13:51:05,108 - INFO     -   - delta_states: 0
2025-10-29 13:51:05,108 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:05,109 - INFO     -   - ts1_transitions: 40
2025-10-29 13:51:05,109 - INFO     -   - ts2_transitions: 275
2025-10-29 13:51:05,109 - INFO     -   - merged_transitions: 3200
2025-10-29 13:51:05,109 - INFO     -   - transition_density_change: 5.7700
2025-10-29 13:51:05,109 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:05,109 - INFO     -   - search_signals present: True
2025-10-29 13:51:05,109 - INFO     -   - nodes_expanded: 500
2025-10-29 13:51:05,109 - INFO     -   - search_depth: 4
2025-10-29 13:51:05,109 - INFO     -   - solution_cost: 2
2025-10-29 13:51:05,109 - INFO     -   - branching_factor: 6.4000
2025-10-29 13:51:05,109 - INFO     -   - solution_found: True
2025-10-29 13:51:05,109 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:05,110 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:05,110 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:51:05,110 - INFO     -   - TS10(10) + TS12(50) → 500 states
2025-10-29 13:51:05,110 - INFO     -   - f_stability=0.424
2025-10-29 13:51:05,110 - INFO     -   - A* nodes_expanded=500
2025-10-29 13:51:05,110 - INFO     -   - solution_found=True
2025-10-29 13:51:05,110 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:05,110 - INFO     - 
  Extracted signals:
2025-10-29 13:51:05,110 - INFO     -     - iteration: 6
2025-10-29 13:51:05,110 - INFO     -     - states_before: 500
2025-10-29 13:51:05,110 - INFO     -     - states_after: 500
2025-10-29 13:51:05,110 - INFO     -     - delta_states: 0
2025-10-29 13:51:05,110 - INFO     -     - f_value_stability: 0.4237
2025-10-29 13:51:05,110 - INFO     -     - num_significant_f_changes: 21
2025-10-29 13:51:05,110 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:05,111 - INFO     -     - nodes_expanded: 500
2025-10-29 13:51:05,111 - INFO     -     - search_depth: 4
2025-10-29 13:51:05,111 - INFO     -     - solution_cost: 2
2025-10-29 13:51:05,111 - INFO     -     - branching_factor: 6.4000
2025-10-29 13:51:05,111 - INFO     -     - solution_found: True
2025-10-29 13:51:05,111 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:05,111 - INFO     - 
  Computing reward:
2025-10-29 13:51:05,111 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:05,111 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:05,111 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:05,111 - INFO     -   [1] BRANCHING FACTOR: 6.400 → score 0.260 (high BF, minimal credit)
2025-10-29 13:51:05,111 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:51:05,112 - INFO     -   [3] F-VALUE STABILITY: 0.432
2025-10-29 13:51:05,112 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:51:05,112 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:05,112 - INFO     - 
  [COMPOSITE]: 0.508
2025-10-29 13:51:05,112 - INFO     -     = 0.300*0.260 (bf)
2025-10-29 13:51:05,112 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:51:05,112 - INFO     -     + 0.350*0.432 (stability)
2025-10-29 13:51:05,112 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:05,112 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:05,112 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:05,112 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:51:05,113 - INFO     - 
  [FINAL REWARD]: 0.3168
2025-10-29 13:51:05,113 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:05,113 - INFO     -     ✓ Reward computed: 0.3168
2025-10-29 13:51:05,113 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:05,113 - INFO     -     - bf_score                       0.2600
2025-10-29 13:51:05,113 - INFO     -     - depth_score                    0.7953
2025-10-29 13:51:05,113 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:05,113 - INFO     -     - f_stability                    0.4324
2025-10-29 13:51:05,113 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:51:05,113 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:05,113 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:05,113 - INFO     -     - composite                      0.5084
2025-10-29 13:51:05,113 - INFO     -     - total                          0.3168
2025-10-29 13:51:05,113 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:05,113 - INFO     -   Num remaining nodes: 2
2025-10-29 13:51:05,114 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:51:05,114 - INFO     -   Done: False
2025-10-29 13:51:05,114 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:05,114 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:05,114 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:05,114 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:05,114 - INFO     -     - num_nodes: 2
2025-10-29 13:51:05,115 - INFO     -     - num_edges: 2
2025-10-29 13:51:05,115 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:05,115 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:51:05,115 - INFO     -   After: current_merge_step = 7
2025-10-29 13:51:05,115 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:05,115 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:05,115 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:05,116 - INFO     -   ✓ Step logged
2025-10-29 13:51:05,116 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:05,116 - INFO     -   Returning:
2025-10-29 13:51:05,116 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:05,116 - INFO     -     - reward: 0.3168
2025-10-29 13:51:05,116 - INFO     -     - done: False
2025-10-29 13:51:05,116 - INFO     -     - truncated: False
2025-10-29 13:51:05,116 - INFO     -     - info: 19 keys
2025-10-29 13:51:05,116 - INFO     - ==========================================================================================

2025-10-29 13:51:05,122 - INFO     - 
==========================================================================================
2025-10-29 13:51:05,122 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:05,122 - INFO     - ==========================================================================================
2025-10-29 13:51:05,122 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:05,122 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:51:05,122 - INFO     -   Available edges in graph: 2
2025-10-29 13:51:05,122 - INFO     -   Action index calculation:
2025-10-29 13:51:05,122 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 2 = 1
2025-10-29 13:51:05,122 - INFO     -     - clamped to [0, 1]: 1
2025-10-29 13:51:05,122 - INFO     -   ✓ Extracted merge pair from edge 1: (15, 14)
2025-10-29 13:51:05,122 - INFO     -   ✓ Validation passed
2025-10-29 13:51:05,122 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:05,122 - INFO     -     - Total states before merge: 540
2025-10-29 13:51:05,122 - INFO     -     - Num nodes: 2
2025-10-29 13:51:05,122 - INFO     -     - Num edges: 2
2025-10-29 13:51:05,122 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:05,122 - INFO     -       - Node 15: 500 states
2025-10-29 13:51:05,123 - INFO     -       - Node 14: 40 states
2025-10-29 13:51:05,123 - INFO     -       - Expected product: 20000 states
2025-10-29 13:51:05,123 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:05,130 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:51:05,130 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:05,130 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:51:05,232 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:05,233 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:05,233 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:51:05,253 - INFO     -   ✓ TS file received after 0.02s
2025-10-29 13:51:05,253 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:05,254 - INFO     -   Calling graph_tracker.merge_nodes([15, 14])...
2025-10-29 13:51:05,254 - INFO     - Attempting merge of nodes 15 and 14...
2025-10-29 13:51:05,254 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:51:05,254 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:05,254 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:05,254 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:51:05,254 - INFO     - 
================================================================================
2025-10-29 13:51:05,254 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:51:05,254 - INFO     - ================================================================================
2025-10-29 13:51:05,254 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:05,254 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:51:05,254 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:51:05,259 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:05,259 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:05,259 - INFO     -   - Raw ts1_f length: 92
2025-10-29 13:51:05,259 - INFO     -   - Raw ts2_f length: 40
2025-10-29 13:51:05,259 - INFO     -   - Raw f_after length: 3680
2025-10-29 13:51:05,259 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:05,259 - INFO     -   - ts1_valid: 92 / 92 (removed 0)
2025-10-29 13:51:05,260 - INFO     -   - ts2_valid: 40 / 40 (removed -40)
2025-10-29 13:51:05,262 - INFO     -   - after_valid: 2100 / 3680 (removed 1580)
2025-10-29 13:51:05,262 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:05,262 - INFO     -   - ts1_id: 15
2025-10-29 13:51:05,262 - INFO     -   - ts2_id: 14
2025-10-29 13:51:05,262 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:05,262 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:05,263 - INFO     -   - ts1_size: 92, ts2_size: 40
2025-10-29 13:51:05,263 - INFO     -   - Product space size: 3680
2025-10-29 13:51:05,263 - INFO     -   - Using product state mapping
2025-10-29 13:51:05,273 - INFO     -   - f_before_product length: 3680
2025-10-29 13:51:05,285 - INFO     -   - avg_f_before: 5.7641 (3680 valid states)
2025-10-29 13:51:05,285 - INFO     -   - avg_f_after:  10.9900 (2100 valid states)
2025-10-29 13:51:05,286 - INFO     -   - delta: 5.2259
2025-10-29 13:51:05,286 - INFO     -   - f_stability: 1.0 - |5.2259| / 5.7641 = 0.0934
2025-10-29 13:51:05,286 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:05,286 - INFO     -   - Compared 132 values
2025-10-29 13:51:05,286 - INFO     -   - Significant changes (> 5.0): 56
2025-10-29 13:51:05,286 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:05,286 - INFO     -   - states_before: 3680
2025-10-29 13:51:05,286 - INFO     -   - states_after: 3680
2025-10-29 13:51:05,286 - INFO     -   - delta_states: 0
2025-10-29 13:51:05,286 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:05,286 - INFO     -   - ts1_transitions: 831
2025-10-29 13:51:05,287 - INFO     -   - ts2_transitions: 340
2025-10-29 13:51:05,287 - INFO     -   - merged_transitions: 15476
2025-10-29 13:51:05,287 - INFO     -   - transition_density_change: 3.8872
2025-10-29 13:51:05,287 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:05,287 - INFO     -   - search_signals present: True
2025-10-29 13:51:05,287 - INFO     -   - nodes_expanded: 2100
2025-10-29 13:51:05,287 - INFO     -   - search_depth: 5
2025-10-29 13:51:05,287 - INFO     -   - solution_cost: 4
2025-10-29 13:51:05,287 - INFO     -   - branching_factor: 7.3695
2025-10-29 13:51:05,287 - INFO     -   - solution_found: True
2025-10-29 13:51:05,287 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:05,289 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:05,289 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:51:05,289 - INFO     -   - TS15(92) + TS14(40) → 3680 states
2025-10-29 13:51:05,289 - INFO     -   - f_stability=0.093
2025-10-29 13:51:05,289 - INFO     -   - A* nodes_expanded=2100
2025-10-29 13:51:05,289 - INFO     -   - solution_found=True
2025-10-29 13:51:05,290 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:05,290 - INFO     - 
  Extracted signals:
2025-10-29 13:51:05,290 - INFO     -     - iteration: 7
2025-10-29 13:51:05,290 - INFO     -     - states_before: 3680
2025-10-29 13:51:05,290 - INFO     -     - states_after: 3680
2025-10-29 13:51:05,290 - INFO     -     - delta_states: 0
2025-10-29 13:51:05,290 - INFO     -     - f_value_stability: 0.0934
2025-10-29 13:51:05,290 - INFO     -     - num_significant_f_changes: 56
2025-10-29 13:51:05,290 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:05,291 - INFO     -     - nodes_expanded: 2100
2025-10-29 13:51:05,291 - INFO     -     - search_depth: 5
2025-10-29 13:51:05,291 - INFO     -     - solution_cost: 4
2025-10-29 13:51:05,291 - INFO     -     - branching_factor: 7.3695
2025-10-29 13:51:05,291 - INFO     -     - solution_found: True
2025-10-29 13:51:05,291 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:05,291 - WARNING  -     ⚠️  Poor F-stability: 0.0934
2025-10-29 13:51:05,292 - INFO     - 
  Computing reward:
2025-10-29 13:51:05,292 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:05,292 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:05,292 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:05,292 - INFO     -   [1] BRANCHING FACTOR: 7.370 → score 0.163 (high BF, minimal credit)
2025-10-29 13:51:05,293 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:51:05,295 - INFO     -   [3] F-VALUE STABILITY: 0.354
2025-10-29 13:51:05,295 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:51:05,295 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:05,295 - INFO     - 
  [COMPOSITE]: 0.447
2025-10-29 13:51:05,295 - INFO     -     = 0.300*0.163 (bf)
2025-10-29 13:51:05,295 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:51:05,295 - INFO     -     + 0.350*0.354 (stability)
2025-10-29 13:51:05,295 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:05,295 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:05,295 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:05,295 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:51:05,295 - WARNING  -   ⚠️  BAD MERGE DETECTED: F-stability extremely poor: 0.093
2025-10-29 13:51:05,296 - INFO     -     + Bad merge penalty: -0.150
2025-10-29 13:51:05,296 - INFO     - 
  [FINAL REWARD]: 0.0442
2025-10-29 13:51:05,296 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:05,296 - INFO     -     ✓ Reward computed: 0.0442
2025-10-29 13:51:05,296 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:05,298 - INFO     -     - bf_score                       0.1630
2025-10-29 13:51:05,298 - INFO     -     - depth_score                    0.7721
2025-10-29 13:51:05,298 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:05,298 - INFO     -     - f_stability                    0.3536
2025-10-29 13:51:05,298 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:51:05,298 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:05,298 - INFO     -     - bad_merge_penalty              -0.1500
2025-10-29 13:51:05,298 - INFO     -     - composite                      0.4471
2025-10-29 13:51:05,298 - INFO     -     - total                          0.0442
2025-10-29 13:51:05,298 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:05,298 - INFO     -   Num remaining nodes: 1
2025-10-29 13:51:05,298 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:51:05,298 - INFO     -   Done: True
2025-10-29 13:51:05,298 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:51:05,298 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:05,299 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:05,299 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:05,299 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:05,299 - INFO     -     - num_nodes: 1
2025-10-29 13:51:05,299 - INFO     -     - num_edges: 0
2025-10-29 13:51:05,299 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:05,299 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:51:05,300 - INFO     -   After: current_merge_step = 8
2025-10-29 13:51:05,300 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:05,300 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:05,300 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:05,301 - INFO     -   ✓ Step logged
2025-10-29 13:51:05,302 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:05,302 - INFO     -   Returning:
2025-10-29 13:51:05,302 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:05,302 - INFO     -     - reward: 0.0442
2025-10-29 13:51:05,302 - INFO     -     - done: True
2025-10-29 13:51:05,302 - INFO     -     - truncated: False
2025-10-29 13:51:05,302 - INFO     -     - info: 19 keys
2025-10-29 13:51:05,302 - INFO     - ==========================================================================================

2025-10-29 13:51:05,377 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:51:05,385 - INFO     - [Handshake] Building FD command:
2025-10-29 13:51:05,385 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:51:05,385 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_00.pddl
2025-10-29 13:51:05,385 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:51:05,388 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:51:06,141 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:51:06,141 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:51:06,141 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:51:06,451 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:51:06,451 - INFO     - Initializing GraphTracker...
2025-10-29 13:51:06,451 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:51:06,451 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:51:06,452 - INFO     -    → Node 0 has 2 states
2025-10-29 13:51:06,452 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:51:06,452 - INFO     -    → Node 1 has 2 states
2025-10-29 13:51:06,452 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:51:06,452 - INFO     -    → Node 2 has 2 states
2025-10-29 13:51:06,452 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:51:06,452 - INFO     -    → Node 3 has 2 states
2025-10-29 13:51:06,452 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:51:06,452 - INFO     -    → Node 4 has 2 states
2025-10-29 13:51:06,452 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:51:06,452 - INFO     -    → Node 5 has 5 states
2025-10-29 13:51:06,452 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:51:06,452 - INFO     -    → Node 6 has 5 states
2025-10-29 13:51:06,452 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:51:06,452 - INFO     -    → Node 7 has 5 states
2025-10-29 13:51:06,452 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:51:06,452 - INFO     -    → Node 8 has 5 states
2025-10-29 13:51:06,452 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:51:06,452 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:51:06,453 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:51:06,454 - INFO     - Added edge (0, 1)
2025-10-29 13:51:06,454 - INFO     - Added edge (0, 2)
2025-10-29 13:51:06,454 - INFO     - Added edge (0, 3)
2025-10-29 13:51:06,454 - INFO     - Added edge (0, 4)
2025-10-29 13:51:06,454 - INFO     - Added edge (0, 5)
2025-10-29 13:51:06,454 - INFO     - Added edge (0, 6)
2025-10-29 13:51:06,454 - INFO     - Added edge (0, 7)
2025-10-29 13:51:06,454 - INFO     - Added edge (0, 8)
2025-10-29 13:51:06,454 - INFO     - Added edge (1, 0)
2025-10-29 13:51:06,454 - INFO     - Added edge (1, 2)
2025-10-29 13:51:06,454 - INFO     - Added edge (1, 3)
2025-10-29 13:51:06,454 - INFO     - Added edge (1, 4)
2025-10-29 13:51:06,454 - INFO     - Added edge (1, 5)
2025-10-29 13:51:06,454 - INFO     - Added edge (1, 6)
2025-10-29 13:51:06,454 - INFO     - Added edge (1, 7)
2025-10-29 13:51:06,454 - INFO     - Added edge (1, 8)
2025-10-29 13:51:06,454 - INFO     - Added edge (2, 0)
2025-10-29 13:51:06,454 - INFO     - Added edge (2, 1)
2025-10-29 13:51:06,454 - INFO     - Added edge (2, 3)
2025-10-29 13:51:06,454 - INFO     - Added edge (2, 4)
2025-10-29 13:51:06,454 - INFO     - Added edge (2, 5)
2025-10-29 13:51:06,454 - INFO     - Added edge (2, 6)
2025-10-29 13:51:06,456 - INFO     - Added edge (2, 7)
2025-10-29 13:51:06,456 - INFO     - Added edge (2, 8)
2025-10-29 13:51:06,456 - INFO     - Added edge (3, 0)
2025-10-29 13:51:06,456 - INFO     - Added edge (3, 1)
2025-10-29 13:51:06,456 - INFO     - Added edge (3, 2)
2025-10-29 13:51:06,456 - INFO     - Added edge (3, 4)
2025-10-29 13:51:06,456 - INFO     - Added edge (3, 5)
2025-10-29 13:51:06,456 - INFO     - Added edge (3, 6)
2025-10-29 13:51:06,456 - INFO     - Added edge (3, 7)
2025-10-29 13:51:06,456 - INFO     - Added edge (3, 8)
2025-10-29 13:51:06,456 - INFO     - Added edge (4, 0)
2025-10-29 13:51:06,456 - INFO     - Added edge (4, 1)
2025-10-29 13:51:06,456 - INFO     - Added edge (4, 2)
2025-10-29 13:51:06,456 - INFO     - Added edge (4, 3)
2025-10-29 13:51:06,456 - INFO     - Added edge (4, 5)
2025-10-29 13:51:06,456 - INFO     - Added edge (4, 6)
2025-10-29 13:51:06,456 - INFO     - Added edge (4, 7)
2025-10-29 13:51:06,456 - INFO     - Added edge (4, 8)
2025-10-29 13:51:06,456 - INFO     - Added edge (5, 0)
2025-10-29 13:51:06,456 - INFO     - Added edge (5, 1)
2025-10-29 13:51:06,457 - INFO     - Added edge (5, 2)
2025-10-29 13:51:06,457 - INFO     - Added edge (5, 3)
2025-10-29 13:51:06,457 - INFO     - Added edge (5, 4)
2025-10-29 13:51:06,457 - INFO     - Added edge (6, 0)
2025-10-29 13:51:06,457 - INFO     - Added edge (6, 1)
2025-10-29 13:51:06,457 - INFO     - Added edge (6, 2)
2025-10-29 13:51:06,457 - INFO     - Added edge (6, 3)
2025-10-29 13:51:06,457 - INFO     - Added edge (6, 4)
2025-10-29 13:51:06,457 - INFO     - Added edge (7, 0)
2025-10-29 13:51:06,457 - INFO     - Added edge (7, 1)
2025-10-29 13:51:06,457 - INFO     - Added edge (7, 2)
2025-10-29 13:51:06,457 - INFO     - Added edge (7, 3)
2025-10-29 13:51:06,457 - INFO     - Added edge (7, 4)
2025-10-29 13:51:06,457 - INFO     - Added edge (8, 0)
2025-10-29 13:51:06,457 - INFO     - Added edge (8, 1)
2025-10-29 13:51:06,457 - INFO     - Added edge (8, 2)
2025-10-29 13:51:06,457 - INFO     - Added edge (8, 3)
2025-10-29 13:51:06,457 - INFO     - Added edge (8, 4)
2025-10-29 13:51:06,457 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:51:06,463 - INFO     - 
==========================================================================================
2025-10-29 13:51:06,463 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:06,463 - INFO     - ==========================================================================================
2025-10-29 13:51:06,463 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:06,463 - INFO     -   Input action: 50 (type: int)
2025-10-29 13:51:06,463 - INFO     -   Available edges in graph: 60
2025-10-29 13:51:06,463 - INFO     -   Action index calculation:
2025-10-29 13:51:06,464 - INFO     -     - action % max(num_valid_edges, 1) = 50 % 60 = 50
2025-10-29 13:51:06,464 - INFO     -     - clamped to [0, 59]: 50
2025-10-29 13:51:06,464 - INFO     -   ✓ Extracted merge pair from edge 50: (7, 0)
2025-10-29 13:51:06,464 - INFO     -   ✓ Validation passed
2025-10-29 13:51:06,464 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:06,464 - INFO     -     - Total states before merge: 30
2025-10-29 13:51:06,464 - INFO     -     - Num nodes: 9
2025-10-29 13:51:06,464 - INFO     -     - Num edges: 60
2025-10-29 13:51:06,464 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:06,464 - INFO     -       - Node 7: 5 states
2025-10-29 13:51:06,464 - INFO     -       - Node 0: 2 states
2025-10-29 13:51:06,464 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:06,464 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:06,475 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:51:06,475 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:06,475 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:51:06,576 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:06,576 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:06,576 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:51:06,577 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:06,577 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:06,577 - INFO     -   Calling graph_tracker.merge_nodes([7, 0])...
2025-10-29 13:51:06,577 - INFO     - Attempting merge of nodes 7 and 0...
2025-10-29 13:51:06,577 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:51:06,577 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:06,577 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:06,577 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:51:06,577 - INFO     - 
================================================================================
2025-10-29 13:51:06,577 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:51:06,577 - INFO     - ================================================================================
2025-10-29 13:51:06,577 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:06,577 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:51:06,577 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:51:06,578 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:06,578 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:06,578 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:06,578 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:06,578 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:06,578 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:06,578 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:06,578 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:06,578 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:06,578 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:06,578 - INFO     -   - ts1_id: 7
2025-10-29 13:51:06,578 - INFO     -   - ts2_id: 0
2025-10-29 13:51:06,578 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:06,578 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:06,578 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:51:06,579 - INFO     -   - Product space size: 10
2025-10-29 13:51:06,579 - INFO     -   - Using product state mapping
2025-10-29 13:51:06,579 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:06,579 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:51:06,579 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:51:06,579 - INFO     -   - delta: 0.5000
2025-10-29 13:51:06,579 - INFO     -   - f_stability: 1.0 - |0.5000| / 2.8000 = 0.8214
2025-10-29 13:51:06,579 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:06,579 - INFO     -   - Compared 7 values
2025-10-29 13:51:06,579 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:06,579 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:06,579 - INFO     -   - states_before: 10
2025-10-29 13:51:06,579 - INFO     -   - states_after: 10
2025-10-29 13:51:06,579 - INFO     -   - delta_states: 0
2025-10-29 13:51:06,579 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:06,579 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:06,579 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:06,579 - INFO     -   - merged_transitions: 40
2025-10-29 13:51:06,579 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:51:06,579 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:06,580 - INFO     -   - search_signals present: True
2025-10-29 13:51:06,580 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:06,580 - INFO     -   - search_depth: 1
2025-10-29 13:51:06,580 - INFO     -   - solution_cost: 2
2025-10-29 13:51:06,580 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:51:06,580 - INFO     -   - solution_found: True
2025-10-29 13:51:06,580 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:06,580 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:06,580 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:51:06,582 - INFO     -   - TS7(5) + TS0(2) → 10 states
2025-10-29 13:51:06,582 - INFO     -   - f_stability=0.821
2025-10-29 13:51:06,582 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:06,582 - INFO     -   - solution_found=True
2025-10-29 13:51:06,582 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:06,582 - INFO     - 
  Extracted signals:
2025-10-29 13:51:06,582 - INFO     -     - iteration: 0
2025-10-29 13:51:06,582 - INFO     -     - states_before: 10
2025-10-29 13:51:06,582 - INFO     -     - states_after: 10
2025-10-29 13:51:06,582 - INFO     -     - delta_states: 0
2025-10-29 13:51:06,582 - INFO     -     - f_value_stability: 0.8214
2025-10-29 13:51:06,582 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:06,582 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:06,582 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:06,582 - INFO     -     - search_depth: 1
2025-10-29 13:51:06,582 - INFO     -     - solution_cost: 2
2025-10-29 13:51:06,582 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:51:06,583 - INFO     -     - solution_found: True
2025-10-29 13:51:06,583 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:06,583 - INFO     - 
  Computing reward:
2025-10-29 13:51:06,583 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:06,583 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:06,583 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:06,583 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:51:06,583 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:51:06,583 - INFO     -   [3] F-VALUE STABILITY: 0.593
2025-10-29 13:51:06,583 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:06,583 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:06,583 - INFO     - 
  [COMPOSITE]: 0.680
2025-10-29 13:51:06,583 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:51:06,584 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:51:06,584 - INFO     -     + 0.350*0.593 (stability)
2025-10-29 13:51:06,584 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:06,584 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:06,584 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:06,584 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:06,584 - INFO     - 
  [FINAL REWARD]: 0.7602
2025-10-29 13:51:06,584 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:06,584 - INFO     -     ✓ Reward computed: 0.7602
2025-10-29 13:51:06,584 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:06,584 - INFO     -     - bf_score                       0.5667
2025-10-29 13:51:06,584 - INFO     -     - depth_score                    0.9119
2025-10-29 13:51:06,584 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:06,584 - INFO     -     - f_stability                    0.5935
2025-10-29 13:51:06,584 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:06,584 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:06,585 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:06,585 - INFO     -     - composite                      0.6801
2025-10-29 13:51:06,585 - INFO     -     - total                          0.7602
2025-10-29 13:51:06,585 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:06,585 - INFO     -   Num remaining nodes: 8
2025-10-29 13:51:06,585 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:51:06,585 - INFO     -   Done: False
2025-10-29 13:51:06,585 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:06,586 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:06,586 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:06,586 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:06,586 - INFO     -     - num_nodes: 8
2025-10-29 13:51:06,587 - INFO     -     - num_edges: 50
2025-10-29 13:51:06,587 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:06,587 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:51:06,587 - INFO     -   After: current_merge_step = 1
2025-10-29 13:51:06,587 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:06,587 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:06,587 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:06,588 - INFO     -   ✓ Step logged
2025-10-29 13:51:06,588 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:06,588 - INFO     -   Returning:
2025-10-29 13:51:06,588 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:06,588 - INFO     -     - reward: 0.7602
2025-10-29 13:51:06,588 - INFO     -     - done: False
2025-10-29 13:51:06,588 - INFO     -     - truncated: False
2025-10-29 13:51:06,588 - INFO     -     - info: 19 keys
2025-10-29 13:51:06,588 - INFO     - ==========================================================================================

2025-10-29 13:51:06,593 - INFO     - 
==========================================================================================
2025-10-29 13:51:06,593 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:06,593 - INFO     - ==========================================================================================
2025-10-29 13:51:06,593 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:06,593 - INFO     -   Input action: 17 (type: int)
2025-10-29 13:51:06,593 - INFO     -   Available edges in graph: 50
2025-10-29 13:51:06,594 - INFO     -   Action index calculation:
2025-10-29 13:51:06,594 - INFO     -     - action % max(num_valid_edges, 1) = 17 % 50 = 17
2025-10-29 13:51:06,594 - INFO     -     - clamped to [0, 49]: 17
2025-10-29 13:51:06,594 - INFO     -   ✓ Extracted merge pair from edge 17: (3, 5)
2025-10-29 13:51:06,594 - INFO     -   ✓ Validation passed
2025-10-29 13:51:06,594 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:06,594 - INFO     -     - Total states before merge: 33
2025-10-29 13:51:06,594 - INFO     -     - Num nodes: 8
2025-10-29 13:51:06,594 - INFO     -     - Num edges: 50
2025-10-29 13:51:06,594 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:06,594 - INFO     -       - Node 3: 2 states
2025-10-29 13:51:06,594 - INFO     -       - Node 5: 5 states
2025-10-29 13:51:06,594 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:06,594 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:06,603 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:51:06,604 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:06,604 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:51:06,705 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:06,705 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:06,705 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:51:06,706 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:06,706 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:06,706 - INFO     -   Calling graph_tracker.merge_nodes([3, 5])...
2025-10-29 13:51:06,706 - INFO     - Attempting merge of nodes 3 and 5...
2025-10-29 13:51:06,706 - INFO     - Successfully merged nodes into new node 10 with 10 states.
2025-10-29 13:51:06,707 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:06,707 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:06,707 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:51:06,707 - INFO     - 
================================================================================
2025-10-29 13:51:06,707 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:51:06,707 - INFO     - ================================================================================
2025-10-29 13:51:06,707 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:06,707 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:51:06,707 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:51:06,708 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:06,708 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:06,708 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:06,708 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:51:06,708 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:06,708 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:06,708 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:06,709 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:51:06,709 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:06,709 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:06,709 - INFO     -   - ts1_id: 3
2025-10-29 13:51:06,709 - INFO     -   - ts2_id: 5
2025-10-29 13:51:06,709 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:06,709 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:06,709 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:51:06,709 - INFO     -   - Product space size: 10
2025-10-29 13:51:06,709 - INFO     -   - Using product state mapping
2025-10-29 13:51:06,710 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:06,710 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:51:06,710 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:51:06,710 - INFO     -   - delta: 0.5000
2025-10-29 13:51:06,710 - INFO     -   - f_stability: 1.0 - |0.5000| / 2.8000 = 0.8214
2025-10-29 13:51:06,710 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:06,711 - INFO     -   - Compared 7 values
2025-10-29 13:51:06,711 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:06,711 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:06,711 - INFO     -   - states_before: 10
2025-10-29 13:51:06,711 - INFO     -   - states_after: 10
2025-10-29 13:51:06,711 - INFO     -   - delta_states: 0
2025-10-29 13:51:06,711 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:06,711 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:06,711 - INFO     -   - ts2_transitions: 13
2025-10-29 13:51:06,712 - INFO     -   - merged_transitions: 40
2025-10-29 13:51:06,712 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:51:06,712 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:06,712 - INFO     -   - search_signals present: True
2025-10-29 13:51:06,712 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:06,712 - INFO     -   - search_depth: 1
2025-10-29 13:51:06,712 - INFO     -   - solution_cost: 2
2025-10-29 13:51:06,712 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:51:06,712 - INFO     -   - solution_found: True
2025-10-29 13:51:06,712 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:06,714 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:06,714 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:51:06,714 - INFO     -   - TS3(2) + TS5(5) → 10 states
2025-10-29 13:51:06,714 - INFO     -   - f_stability=0.821
2025-10-29 13:51:06,714 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:06,714 - INFO     -   - solution_found=True
2025-10-29 13:51:06,714 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:06,714 - INFO     - 
  Extracted signals:
2025-10-29 13:51:06,715 - INFO     -     - iteration: 1
2025-10-29 13:51:06,715 - INFO     -     - states_before: 10
2025-10-29 13:51:06,715 - INFO     -     - states_after: 10
2025-10-29 13:51:06,715 - INFO     -     - delta_states: 0
2025-10-29 13:51:06,715 - INFO     -     - f_value_stability: 0.8214
2025-10-29 13:51:06,715 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:06,715 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:06,716 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:06,716 - INFO     -     - search_depth: 1
2025-10-29 13:51:06,716 - INFO     -     - solution_cost: 2
2025-10-29 13:51:06,716 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:51:06,716 - INFO     -     - solution_found: True
2025-10-29 13:51:06,716 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:06,716 - INFO     - 
  Computing reward:
2025-10-29 13:51:06,716 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:06,716 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:06,717 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:06,717 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:51:06,717 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:51:06,718 - INFO     -   [3] F-VALUE STABILITY: 0.593
2025-10-29 13:51:06,718 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:06,718 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:06,718 - INFO     - 
  [COMPOSITE]: 0.680
2025-10-29 13:51:06,718 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:51:06,719 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:51:06,719 - INFO     -     + 0.350*0.593 (stability)
2025-10-29 13:51:06,719 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:06,719 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:06,719 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:06,719 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:06,719 - INFO     - 
  [FINAL REWARD]: 0.7602
2025-10-29 13:51:06,720 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:06,720 - INFO     -     ✓ Reward computed: 0.7602
2025-10-29 13:51:06,720 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:06,720 - INFO     -     - bf_score                       0.5667
2025-10-29 13:51:06,720 - INFO     -     - depth_score                    0.9119
2025-10-29 13:51:06,720 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:06,720 - INFO     -     - f_stability                    0.5935
2025-10-29 13:51:06,720 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:06,721 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:06,721 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:06,721 - INFO     -     - composite                      0.6801
2025-10-29 13:51:06,721 - INFO     -     - total                          0.7602
2025-10-29 13:51:06,721 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:06,721 - INFO     -   Num remaining nodes: 7
2025-10-29 13:51:06,721 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:51:06,721 - INFO     -   Done: False
2025-10-29 13:51:06,722 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:06,723 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:06,724 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:06,724 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:06,724 - INFO     -     - num_nodes: 7
2025-10-29 13:51:06,724 - INFO     -     - num_edges: 40
2025-10-29 13:51:06,724 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:06,724 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:51:06,724 - INFO     -   After: current_merge_step = 2
2025-10-29 13:51:06,724 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:06,724 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:06,725 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:06,725 - INFO     -   ✓ Step logged
2025-10-29 13:51:06,726 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:06,726 - INFO     -   Returning:
2025-10-29 13:51:06,726 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:06,726 - INFO     -     - reward: 0.7602
2025-10-29 13:51:06,726 - INFO     -     - done: False
2025-10-29 13:51:06,726 - INFO     -     - truncated: False
2025-10-29 13:51:06,726 - INFO     -     - info: 19 keys
2025-10-29 13:51:06,726 - INFO     - ==========================================================================================

2025-10-29 13:51:06,734 - INFO     - 
==========================================================================================
2025-10-29 13:51:06,734 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:06,734 - INFO     - ==========================================================================================
2025-10-29 13:51:06,734 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:06,734 - INFO     -   Input action: 12 (type: int)
2025-10-29 13:51:06,734 - INFO     -   Available edges in graph: 40
2025-10-29 13:51:06,734 - INFO     -   Action index calculation:
2025-10-29 13:51:06,734 - INFO     -     - action % max(num_valid_edges, 1) = 12 % 40 = 12
2025-10-29 13:51:06,736 - INFO     -     - clamped to [0, 39]: 12
2025-10-29 13:51:06,736 - INFO     -   ✓ Extracted merge pair from edge 12: (4, 1)
2025-10-29 13:51:06,736 - INFO     -   ✓ Validation passed
2025-10-29 13:51:06,736 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:06,736 - INFO     -     - Total states before merge: 36
2025-10-29 13:51:06,736 - INFO     -     - Num nodes: 7
2025-10-29 13:51:06,736 - INFO     -     - Num edges: 40
2025-10-29 13:51:06,736 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:06,736 - INFO     -       - Node 4: 2 states
2025-10-29 13:51:06,736 - INFO     -       - Node 1: 2 states
2025-10-29 13:51:06,736 - INFO     -       - Expected product: 4 states
2025-10-29 13:51:06,736 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:06,746 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:51:06,746 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:06,746 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:51:06,847 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:06,847 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:06,847 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:51:06,848 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:06,848 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:06,848 - INFO     -   Calling graph_tracker.merge_nodes([4, 1])...
2025-10-29 13:51:06,848 - INFO     - Attempting merge of nodes 4 and 1...
2025-10-29 13:51:06,848 - INFO     - Successfully merged nodes into new node 11 with 4 states.
2025-10-29 13:51:06,849 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:06,849 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:06,849 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:51:06,849 - INFO     - 
================================================================================
2025-10-29 13:51:06,849 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:51:06,849 - INFO     - ================================================================================
2025-10-29 13:51:06,849 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:06,849 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:51:06,849 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:51:06,850 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:06,850 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:06,850 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:06,850 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:06,850 - INFO     -   - Raw f_after length: 4
2025-10-29 13:51:06,850 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:06,850 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:06,851 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:06,851 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:51:06,851 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:06,851 - INFO     -   - ts1_id: 4
2025-10-29 13:51:06,851 - INFO     -   - ts2_id: 1
2025-10-29 13:51:06,851 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:06,851 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:06,851 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:51:06,851 - INFO     -   - Product space size: 4
2025-10-29 13:51:06,851 - INFO     -   - Using product state mapping
2025-10-29 13:51:06,852 - INFO     -   - f_before_product length: 4
2025-10-29 13:51:06,852 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:51:06,852 - INFO     -   - avg_f_after:  0.7500 (4 valid states)
2025-10-29 13:51:06,852 - INFO     -   - delta: 0.0000
2025-10-29 13:51:06,852 - INFO     -   - f_stability: 1.0 - |0.0000| / 0.7500 = 1.0000
2025-10-29 13:51:06,852 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:06,852 - INFO     -   - Compared 4 values
2025-10-29 13:51:06,852 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:06,852 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:06,853 - INFO     -   - states_before: 4
2025-10-29 13:51:06,853 - INFO     -   - states_after: 4
2025-10-29 13:51:06,853 - INFO     -   - delta_states: 0
2025-10-29 13:51:06,853 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:06,853 - INFO     -   - ts1_transitions: 3
2025-10-29 13:51:06,853 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:06,853 - INFO     -   - merged_transitions: 15
2025-10-29 13:51:06,853 - INFO     -   - transition_density_change: 1.7500
2025-10-29 13:51:06,853 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:06,853 - INFO     -   - search_signals present: True
2025-10-29 13:51:06,853 - INFO     -   - nodes_expanded: 4
2025-10-29 13:51:06,853 - INFO     -   - search_depth: 0
2025-10-29 13:51:06,854 - INFO     -   - solution_cost: 0
2025-10-29 13:51:06,854 - INFO     -   - branching_factor: 3.7500
2025-10-29 13:51:06,854 - INFO     -   - solution_found: True
2025-10-29 13:51:06,854 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:06,854 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:06,854 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:51:06,854 - INFO     -   - TS4(2) + TS1(2) → 4 states
2025-10-29 13:51:06,854 - INFO     -   - f_stability=1.000
2025-10-29 13:51:06,855 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:51:06,855 - INFO     -   - solution_found=True
2025-10-29 13:51:06,855 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:06,855 - INFO     - 
  Extracted signals:
2025-10-29 13:51:06,855 - INFO     -     - iteration: 2
2025-10-29 13:51:06,855 - INFO     -     - states_before: 4
2025-10-29 13:51:06,855 - INFO     -     - states_after: 4
2025-10-29 13:51:06,855 - INFO     -     - delta_states: 0
2025-10-29 13:51:06,855 - INFO     -     - f_value_stability: 1.0000
2025-10-29 13:51:06,855 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:06,855 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:06,855 - INFO     -     - nodes_expanded: 4
2025-10-29 13:51:06,855 - INFO     -     - search_depth: 0
2025-10-29 13:51:06,855 - INFO     -     - solution_cost: 0
2025-10-29 13:51:06,855 - INFO     -     - branching_factor: 3.7500
2025-10-29 13:51:06,856 - INFO     -     - solution_found: True
2025-10-29 13:51:06,856 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:06,856 - INFO     - 
  Computing reward:
2025-10-29 13:51:06,856 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:06,856 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:06,856 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:06,857 - INFO     -   [1] BRANCHING FACTOR: 3.750 → score 0.600 (tolerable)
2025-10-29 13:51:06,857 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:51:06,857 - INFO     -   [3] F-VALUE STABILITY: 0.260
2025-10-29 13:51:06,857 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:06,857 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:06,857 - INFO     - 
  [COMPOSITE]: 0.491
2025-10-29 13:51:06,857 - INFO     -     = 0.300*0.600 (bf)
2025-10-29 13:51:06,857 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:51:06,857 - INFO     -     + 0.350*0.260 (stability)
2025-10-29 13:51:06,857 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:06,857 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:06,857 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:06,857 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:06,858 - INFO     - 
  [FINAL REWARD]: 0.1819
2025-10-29 13:51:06,858 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:06,858 - INFO     -     ✓ Reward computed: 0.1819
2025-10-29 13:51:06,858 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:06,858 - INFO     -     - bf_score                       0.6000
2025-10-29 13:51:06,858 - INFO     -     - depth_score                    0.5000
2025-10-29 13:51:06,858 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:06,858 - INFO     -     - f_stability                    0.2598
2025-10-29 13:51:06,858 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:06,858 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:06,858 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:06,858 - INFO     -     - composite                      0.4909
2025-10-29 13:51:06,858 - INFO     -     - total                          0.1819
2025-10-29 13:51:06,858 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:06,858 - INFO     -   Num remaining nodes: 6
2025-10-29 13:51:06,858 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:51:06,858 - INFO     -   Done: False
2025-10-29 13:51:06,859 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:06,859 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:06,860 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:06,860 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:06,860 - INFO     -     - num_nodes: 6
2025-10-29 13:51:06,860 - INFO     -     - num_edges: 28
2025-10-29 13:51:06,860 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:06,860 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:51:06,860 - INFO     -   After: current_merge_step = 3
2025-10-29 13:51:06,860 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:06,860 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:06,860 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:06,861 - INFO     -   ✓ Step logged
2025-10-29 13:51:06,861 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:06,861 - INFO     -   Returning:
2025-10-29 13:51:06,861 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:06,861 - INFO     -     - reward: 0.1819
2025-10-29 13:51:06,861 - INFO     -     - done: False
2025-10-29 13:51:06,861 - INFO     -     - truncated: False
2025-10-29 13:51:06,861 - INFO     -     - info: 19 keys
2025-10-29 13:51:06,862 - INFO     - ==========================================================================================

2025-10-29 13:51:06,866 - INFO     - 
==========================================================================================
2025-10-29 13:51:06,866 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:06,866 - INFO     - ==========================================================================================
2025-10-29 13:51:06,866 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:06,866 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:51:06,866 - INFO     -   Available edges in graph: 28
2025-10-29 13:51:06,866 - INFO     -   Action index calculation:
2025-10-29 13:51:06,866 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 28 = 2
2025-10-29 13:51:06,866 - INFO     -     - clamped to [0, 27]: 2
2025-10-29 13:51:06,867 - INFO     -   ✓ Extracted merge pair from edge 2: (2, 9)
2025-10-29 13:51:06,867 - INFO     -   ✓ Validation passed
2025-10-29 13:51:06,867 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:06,867 - INFO     -     - Total states before merge: 36
2025-10-29 13:51:06,867 - INFO     -     - Num nodes: 6
2025-10-29 13:51:06,867 - INFO     -     - Num edges: 28
2025-10-29 13:51:06,867 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:06,867 - INFO     -       - Node 2: 2 states
2025-10-29 13:51:06,867 - INFO     -       - Node 9: 10 states
2025-10-29 13:51:06,867 - INFO     -       - Expected product: 20 states
2025-10-29 13:51:06,867 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:06,872 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:51:06,872 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:06,872 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:51:06,974 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:06,974 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:06,974 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:51:06,974 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:06,974 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:06,975 - INFO     -   Calling graph_tracker.merge_nodes([2, 9])...
2025-10-29 13:51:06,975 - INFO     - Attempting merge of nodes 2 and 9...
2025-10-29 13:51:06,975 - INFO     - Successfully merged nodes into new node 12 with 20 states.
2025-10-29 13:51:06,975 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:06,975 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:06,975 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:51:06,975 - INFO     - 
================================================================================
2025-10-29 13:51:06,975 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:51:06,975 - INFO     - ================================================================================
2025-10-29 13:51:06,975 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:06,976 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:51:06,976 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:51:06,976 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:06,976 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:06,976 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:06,976 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:51:06,976 - INFO     -   - Raw f_after length: 20
2025-10-29 13:51:06,977 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:06,977 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:06,977 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:51:06,977 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:51:06,977 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:06,977 - INFO     -   - ts1_id: 2
2025-10-29 13:51:06,977 - INFO     -   - ts2_id: 9
2025-10-29 13:51:06,977 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:06,977 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:06,977 - INFO     -   - ts1_size: 2, ts2_size: 10
2025-10-29 13:51:06,977 - INFO     -   - Product space size: 20
2025-10-29 13:51:06,977 - INFO     -   - Using product state mapping
2025-10-29 13:51:06,977 - INFO     -   - f_before_product length: 20
2025-10-29 13:51:06,978 - INFO     -   - avg_f_before: 3.3000 (20 valid states)
2025-10-29 13:51:06,978 - INFO     -   - avg_f_after:  4.0000 (20 valid states)
2025-10-29 13:51:06,978 - INFO     -   - delta: 0.7000
2025-10-29 13:51:06,978 - INFO     -   - f_stability: 1.0 - |0.7000| / 3.3000 = 0.7879
2025-10-29 13:51:06,978 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:06,978 - INFO     -   - Compared 12 values
2025-10-29 13:51:06,978 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:06,978 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:06,978 - INFO     -   - states_before: 20
2025-10-29 13:51:06,979 - INFO     -   - states_after: 20
2025-10-29 13:51:06,979 - INFO     -   - delta_states: 0
2025-10-29 13:51:06,979 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:06,979 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:06,979 - INFO     -   - ts2_transitions: 40
2025-10-29 13:51:06,979 - INFO     -   - merged_transitions: 122
2025-10-29 13:51:06,979 - INFO     -   - transition_density_change: 3.8500
2025-10-29 13:51:06,979 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:06,979 - INFO     -   - search_signals present: True
2025-10-29 13:51:06,979 - INFO     -   - nodes_expanded: 20
2025-10-29 13:51:06,979 - INFO     -   - search_depth: 2
2025-10-29 13:51:06,979 - INFO     -   - solution_cost: 2
2025-10-29 13:51:06,979 - INFO     -   - branching_factor: 6.1000
2025-10-29 13:51:06,979 - INFO     -   - solution_found: True
2025-10-29 13:51:06,979 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:06,980 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:06,980 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:51:06,980 - INFO     -   - TS2(2) + TS9(10) → 20 states
2025-10-29 13:51:06,980 - INFO     -   - f_stability=0.788
2025-10-29 13:51:06,980 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:51:06,980 - INFO     -   - solution_found=True
2025-10-29 13:51:06,980 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:06,980 - INFO     - 
  Extracted signals:
2025-10-29 13:51:06,980 - INFO     -     - iteration: 3
2025-10-29 13:51:06,980 - INFO     -     - states_before: 20
2025-10-29 13:51:06,981 - INFO     -     - states_after: 20
2025-10-29 13:51:06,981 - INFO     -     - delta_states: 0
2025-10-29 13:51:06,981 - INFO     -     - f_value_stability: 0.7879
2025-10-29 13:51:06,981 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:06,981 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:06,981 - INFO     -     - nodes_expanded: 20
2025-10-29 13:51:06,981 - INFO     -     - search_depth: 2
2025-10-29 13:51:06,981 - INFO     -     - solution_cost: 2
2025-10-29 13:51:06,981 - INFO     -     - branching_factor: 6.1000
2025-10-29 13:51:06,981 - INFO     -     - solution_found: True
2025-10-29 13:51:06,981 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:06,981 - INFO     - 
  Computing reward:
2025-10-29 13:51:06,981 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:06,982 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:06,982 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:06,982 - INFO     -   [1] BRANCHING FACTOR: 6.100 → score 0.290 (high BF, minimal credit)
2025-10-29 13:51:06,982 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:06,982 - INFO     -   [3] F-VALUE STABILITY: 0.764
2025-10-29 13:51:06,982 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:51:06,982 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:06,983 - INFO     - 
  [COMPOSITE]: 0.646
2025-10-29 13:51:06,983 - INFO     -     = 0.300*0.290 (bf)
2025-10-29 13:51:06,983 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:06,983 - INFO     -     + 0.350*0.764 (stability)
2025-10-29 13:51:06,983 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:06,983 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:06,983 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:06,983 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:51:06,983 - INFO     - 
  [FINAL REWARD]: 0.7929
2025-10-29 13:51:06,983 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:06,983 - INFO     -     ✓ Reward computed: 0.7929
2025-10-29 13:51:06,984 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:06,984 - INFO     -     - bf_score                       0.2900
2025-10-29 13:51:06,984 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:06,984 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:06,984 - INFO     -     - f_stability                    0.7639
2025-10-29 13:51:06,984 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:51:06,984 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:06,984 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:06,984 - INFO     -     - composite                      0.6464
2025-10-29 13:51:06,984 - INFO     -     - total                          0.7929
2025-10-29 13:51:06,984 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:06,984 - INFO     -   Num remaining nodes: 5
2025-10-29 13:51:06,985 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:51:06,985 - INFO     -   Done: False
2025-10-29 13:51:06,985 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:06,986 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:06,986 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:06,986 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:06,986 - INFO     -     - num_nodes: 5
2025-10-29 13:51:06,986 - INFO     -     - num_edges: 18
2025-10-29 13:51:06,986 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:06,986 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:51:06,986 - INFO     -   After: current_merge_step = 4
2025-10-29 13:51:06,986 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:06,987 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:06,987 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:06,987 - INFO     -   ✓ Step logged
2025-10-29 13:51:06,987 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:06,988 - INFO     -   Returning:
2025-10-29 13:51:06,988 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:06,988 - INFO     -     - reward: 0.7929
2025-10-29 13:51:06,988 - INFO     -     - done: False
2025-10-29 13:51:06,988 - INFO     -     - truncated: False
2025-10-29 13:51:06,988 - INFO     -     - info: 19 keys
2025-10-29 13:51:06,988 - INFO     - ==========================================================================================

2025-10-29 13:51:06,993 - INFO     - 
==========================================================================================
2025-10-29 13:51:06,993 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:06,993 - INFO     - ==========================================================================================
2025-10-29 13:51:06,993 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:06,994 - INFO     -   Input action: 15 (type: int)
2025-10-29 13:51:06,994 - INFO     -   Available edges in graph: 18
2025-10-29 13:51:06,994 - INFO     -   Action index calculation:
2025-10-29 13:51:06,994 - INFO     -     - action % max(num_valid_edges, 1) = 15 % 18 = 15
2025-10-29 13:51:06,994 - INFO     -     - clamped to [0, 17]: 15
2025-10-29 13:51:06,994 - INFO     -   ✓ Extracted merge pair from edge 15: (12, 8)
2025-10-29 13:51:06,994 - INFO     -   ✓ Validation passed
2025-10-29 13:51:06,994 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:06,994 - INFO     -     - Total states before merge: 44
2025-10-29 13:51:06,994 - INFO     -     - Num nodes: 5
2025-10-29 13:51:06,994 - INFO     -     - Num edges: 18
2025-10-29 13:51:06,994 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:06,994 - INFO     -       - Node 12: 20 states
2025-10-29 13:51:06,994 - INFO     -       - Node 8: 5 states
2025-10-29 13:51:06,994 - INFO     -       - Expected product: 100 states
2025-10-29 13:51:06,995 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:06,999 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:51:06,999 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:06,999 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:51:07,099 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:07,099 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:07,099 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:51:07,101 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:07,101 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:07,101 - INFO     -   Calling graph_tracker.merge_nodes([12, 8])...
2025-10-29 13:51:07,101 - INFO     - Attempting merge of nodes 12 and 8...
2025-10-29 13:51:07,101 - INFO     - Successfully merged nodes into new node 13 with 100 states.
2025-10-29 13:51:07,101 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:07,101 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:07,101 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:51:07,101 - INFO     - 
================================================================================
2025-10-29 13:51:07,102 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:51:07,102 - INFO     - ================================================================================
2025-10-29 13:51:07,102 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:07,102 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:51:07,102 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:51:07,102 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:07,102 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:07,102 - INFO     -   - Raw ts1_f length: 20
2025-10-29 13:51:07,102 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:51:07,104 - INFO     -   - Raw f_after length: 100
2025-10-29 13:51:07,104 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:07,104 - INFO     -   - ts1_valid: 20 / 20 (removed 0)
2025-10-29 13:51:07,104 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:51:07,104 - INFO     -   - after_valid: 100 / 100 (removed 0)
2025-10-29 13:51:07,104 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:07,104 - INFO     -   - ts1_id: 12
2025-10-29 13:51:07,104 - INFO     -   - ts2_id: 8
2025-10-29 13:51:07,104 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:07,104 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:07,104 - INFO     -   - ts1_size: 20, ts2_size: 5
2025-10-29 13:51:07,104 - INFO     -   - Product space size: 100
2025-10-29 13:51:07,104 - INFO     -   - Using product state mapping
2025-10-29 13:51:07,104 - INFO     -   - f_before_product length: 100
2025-10-29 13:51:07,105 - INFO     -   - avg_f_before: 4.3600 (100 valid states)
2025-10-29 13:51:07,105 - INFO     -   - avg_f_after:  6.7600 (100 valid states)
2025-10-29 13:51:07,105 - INFO     -   - delta: 2.4000
2025-10-29 13:51:07,105 - INFO     -   - f_stability: 1.0 - |2.4000| / 4.3600 = 0.4495
2025-10-29 13:51:07,105 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:07,105 - INFO     -   - Compared 25 values
2025-10-29 13:51:07,105 - INFO     -   - Significant changes (> 5.0): 3
2025-10-29 13:51:07,105 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:07,105 - INFO     -   - states_before: 100
2025-10-29 13:51:07,105 - INFO     -   - states_after: 100
2025-10-29 13:51:07,106 - INFO     -   - delta_states: 0
2025-10-29 13:51:07,106 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:07,106 - INFO     -   - ts1_transitions: 122
2025-10-29 13:51:07,106 - INFO     -   - ts2_transitions: 13
2025-10-29 13:51:07,106 - INFO     -   - merged_transitions: 750
2025-10-29 13:51:07,106 - INFO     -   - transition_density_change: 6.1500
2025-10-29 13:51:07,106 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:07,106 - INFO     -   - search_signals present: True
2025-10-29 13:51:07,106 - INFO     -   - nodes_expanded: 100
2025-10-29 13:51:07,106 - INFO     -   - search_depth: 3
2025-10-29 13:51:07,106 - INFO     -   - solution_cost: 2
2025-10-29 13:51:07,106 - INFO     -   - branching_factor: 7.5000
2025-10-29 13:51:07,106 - INFO     -   - solution_found: True
2025-10-29 13:51:07,106 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:07,107 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:07,107 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:51:07,107 - INFO     -   - TS12(20) + TS8(5) → 100 states
2025-10-29 13:51:07,107 - INFO     -   - f_stability=0.450
2025-10-29 13:51:07,107 - INFO     -   - A* nodes_expanded=100
2025-10-29 13:51:07,107 - INFO     -   - solution_found=True
2025-10-29 13:51:07,107 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:07,107 - INFO     - 
  Extracted signals:
2025-10-29 13:51:07,107 - INFO     -     - iteration: 4
2025-10-29 13:51:07,107 - INFO     -     - states_before: 100
2025-10-29 13:51:07,107 - INFO     -     - states_after: 100
2025-10-29 13:51:07,107 - INFO     -     - delta_states: 0
2025-10-29 13:51:07,107 - INFO     -     - f_value_stability: 0.4495
2025-10-29 13:51:07,107 - INFO     -     - num_significant_f_changes: 3
2025-10-29 13:51:07,107 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:07,107 - INFO     -     - nodes_expanded: 100
2025-10-29 13:51:07,107 - INFO     -     - search_depth: 3
2025-10-29 13:51:07,107 - INFO     -     - solution_cost: 2
2025-10-29 13:51:07,107 - INFO     -     - branching_factor: 7.5000
2025-10-29 13:51:07,107 - INFO     -     - solution_found: True
2025-10-29 13:51:07,107 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:07,108 - INFO     - 
  Computing reward:
2025-10-29 13:51:07,108 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:07,108 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:07,108 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:07,108 - INFO     -   [1] BRANCHING FACTOR: 7.500 → score 0.150 (high BF, minimal credit)
2025-10-29 13:51:07,108 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:51:07,108 - INFO     -   [3] F-VALUE STABILITY: 0.370
2025-10-29 13:51:07,108 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:51:07,108 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:07,109 - INFO     - 
  [COMPOSITE]: 0.459
2025-10-29 13:51:07,109 - INFO     -     = 0.300*0.150 (bf)
2025-10-29 13:51:07,109 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:51:07,109 - INFO     -     + 0.350*0.370 (stability)
2025-10-29 13:51:07,109 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:07,109 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:07,109 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:07,109 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:51:07,110 - INFO     - 
  [FINAL REWARD]: 0.2182
2025-10-29 13:51:07,110 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:07,110 - INFO     -     ✓ Reward computed: 0.2182
2025-10-29 13:51:07,110 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:07,110 - INFO     -     - bf_score                       0.1500
2025-10-29 13:51:07,110 - INFO     -     - depth_score                    0.8237
2025-10-29 13:51:07,110 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:07,110 - INFO     -     - f_stability                    0.3697
2025-10-29 13:51:07,110 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:51:07,110 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:07,110 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:07,110 - INFO     -     - composite                      0.4591
2025-10-29 13:51:07,110 - INFO     -     - total                          0.2182
2025-10-29 13:51:07,110 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:07,110 - INFO     -   Num remaining nodes: 4
2025-10-29 13:51:07,111 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:51:07,111 - INFO     -   Done: False
2025-10-29 13:51:07,111 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:07,111 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:07,111 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:07,111 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:07,111 - INFO     -     - num_nodes: 4
2025-10-29 13:51:07,112 - INFO     -     - num_edges: 12
2025-10-29 13:51:07,112 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:07,112 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:51:07,112 - INFO     -   After: current_merge_step = 5
2025-10-29 13:51:07,112 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:07,112 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:07,112 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:07,112 - INFO     -   ✓ Step logged
2025-10-29 13:51:07,112 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:07,113 - INFO     -   Returning:
2025-10-29 13:51:07,113 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:07,113 - INFO     -     - reward: 0.2182
2025-10-29 13:51:07,113 - INFO     -     - done: False
2025-10-29 13:51:07,113 - INFO     -     - truncated: False
2025-10-29 13:51:07,113 - INFO     -     - info: 19 keys
2025-10-29 13:51:07,113 - INFO     - ==========================================================================================

2025-10-29 13:51:07,117 - INFO     - 
==========================================================================================
2025-10-29 13:51:07,117 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:07,117 - INFO     - ==========================================================================================
2025-10-29 13:51:07,117 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:07,117 - INFO     -   Input action: 10 (type: int)
2025-10-29 13:51:07,118 - INFO     -   Available edges in graph: 12
2025-10-29 13:51:07,118 - INFO     -   Action index calculation:
2025-10-29 13:51:07,118 - INFO     -     - action % max(num_valid_edges, 1) = 10 % 12 = 10
2025-10-29 13:51:07,118 - INFO     -     - clamped to [0, 11]: 10
2025-10-29 13:51:07,118 - INFO     -   ✓ Extracted merge pair from edge 10: (13, 10)
2025-10-29 13:51:07,118 - INFO     -   ✓ Validation passed
2025-10-29 13:51:07,118 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:07,118 - INFO     -     - Total states before merge: 119
2025-10-29 13:51:07,118 - INFO     -     - Num nodes: 4
2025-10-29 13:51:07,118 - INFO     -     - Num edges: 12
2025-10-29 13:51:07,118 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:07,118 - INFO     -       - Node 13: 100 states
2025-10-29 13:51:07,118 - INFO     -       - Node 10: 10 states
2025-10-29 13:51:07,118 - INFO     -       - Expected product: 1000 states
2025-10-29 13:51:07,118 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:07,124 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:51:07,124 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:07,124 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:51:07,225 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:07,225 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:07,225 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:51:07,236 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:51:07,236 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:07,236 - INFO     -   Calling graph_tracker.merge_nodes([13, 10])...
2025-10-29 13:51:07,236 - INFO     - Attempting merge of nodes 13 and 10...
2025-10-29 13:51:07,237 - INFO     - Successfully merged nodes into new node 14 with 1000 states.
2025-10-29 13:51:07,237 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:07,237 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:07,237 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:51:07,237 - INFO     - 
================================================================================
2025-10-29 13:51:07,237 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:51:07,237 - INFO     - ================================================================================
2025-10-29 13:51:07,237 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:07,237 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:51:07,237 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:51:07,239 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:07,239 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:07,239 - INFO     -   - Raw ts1_f length: 100
2025-10-29 13:51:07,239 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:51:07,239 - INFO     -   - Raw f_after length: 1000
2025-10-29 13:51:07,239 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:07,239 - INFO     -   - ts1_valid: 100 / 100 (removed 0)
2025-10-29 13:51:07,239 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:51:07,239 - INFO     -   - after_valid: 1000 / 1000 (removed 0)
2025-10-29 13:51:07,239 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:07,239 - INFO     -   - ts1_id: 13
2025-10-29 13:51:07,239 - INFO     -   - ts2_id: 10
2025-10-29 13:51:07,239 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:07,239 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:07,240 - INFO     -   - ts1_size: 100, ts2_size: 10
2025-10-29 13:51:07,240 - INFO     -   - Product space size: 1000
2025-10-29 13:51:07,240 - INFO     -   - Using product state mapping
2025-10-29 13:51:07,241 - INFO     -   - f_before_product length: 1000
2025-10-29 13:51:07,245 - INFO     -   - avg_f_before: 6.8490 (1000 valid states)
2025-10-29 13:51:07,245 - INFO     -   - avg_f_after:  10.9790 (1000 valid states)
2025-10-29 13:51:07,245 - INFO     -   - delta: 4.1300
2025-10-29 13:51:07,245 - INFO     -   - f_stability: 1.0 - |4.1300| / 6.8490 = 0.3970
2025-10-29 13:51:07,245 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:07,246 - INFO     -   - Compared 110 values
2025-10-29 13:51:07,246 - INFO     -   - Significant changes (> 5.0): 37
2025-10-29 13:51:07,246 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:07,246 - INFO     -   - states_before: 1000
2025-10-29 13:51:07,246 - INFO     -   - states_after: 1000
2025-10-29 13:51:07,246 - INFO     -   - delta_states: 0
2025-10-29 13:51:07,246 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:07,246 - INFO     -   - ts1_transitions: 750
2025-10-29 13:51:07,246 - INFO     -   - ts2_transitions: 40
2025-10-29 13:51:07,246 - INFO     -   - merged_transitions: 8500
2025-10-29 13:51:07,247 - INFO     -   - transition_density_change: 7.7100
2025-10-29 13:51:07,247 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:07,247 - INFO     -   - search_signals present: True
2025-10-29 13:51:07,247 - INFO     -   - nodes_expanded: 1000
2025-10-29 13:51:07,247 - INFO     -   - search_depth: 5
2025-10-29 13:51:07,247 - INFO     -   - solution_cost: 4
2025-10-29 13:51:07,247 - INFO     -   - branching_factor: 8.5000
2025-10-29 13:51:07,247 - INFO     -   - solution_found: True
2025-10-29 13:51:07,247 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:07,249 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:07,249 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:51:07,249 - INFO     -   - TS13(100) + TS10(10) → 1000 states
2025-10-29 13:51:07,249 - INFO     -   - f_stability=0.397
2025-10-29 13:51:07,249 - INFO     -   - A* nodes_expanded=1000
2025-10-29 13:51:07,249 - INFO     -   - solution_found=True
2025-10-29 13:51:07,249 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:07,249 - INFO     - 
  Extracted signals:
2025-10-29 13:51:07,250 - INFO     -     - iteration: 5
2025-10-29 13:51:07,250 - INFO     -     - states_before: 1000
2025-10-29 13:51:07,250 - INFO     -     - states_after: 1000
2025-10-29 13:51:07,250 - INFO     -     - delta_states: 0
2025-10-29 13:51:07,250 - INFO     -     - f_value_stability: 0.3970
2025-10-29 13:51:07,250 - INFO     -     - num_significant_f_changes: 37
2025-10-29 13:51:07,250 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:07,250 - INFO     -     - nodes_expanded: 1000
2025-10-29 13:51:07,250 - INFO     -     - search_depth: 5
2025-10-29 13:51:07,250 - INFO     -     - solution_cost: 4
2025-10-29 13:51:07,251 - INFO     -     - branching_factor: 8.5000
2025-10-29 13:51:07,251 - INFO     -     - solution_found: True
2025-10-29 13:51:07,251 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:07,251 - WARNING  -     ⚠️  High branching factor: 8.5000
2025-10-29 13:51:07,251 - INFO     - 
  Computing reward:
2025-10-29 13:51:07,251 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:07,251 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:07,251 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:07,252 - INFO     -   [1] BRANCHING FACTOR: 8.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:51:07,252 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:51:07,253 - INFO     -   [3] F-VALUE STABILITY: 0.547
2025-10-29 13:51:07,253 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:07,253 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:07,253 - INFO     - 
  [COMPOSITE]: 0.496
2025-10-29 13:51:07,253 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:51:07,253 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:51:07,253 - INFO     -     + 0.350*0.547 (stability)
2025-10-29 13:51:07,253 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:07,253 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:07,253 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:07,253 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:07,254 - INFO     - 
  [FINAL REWARD]: 0.3916
2025-10-29 13:51:07,254 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:07,254 - INFO     -     ✓ Reward computed: 0.3916
2025-10-29 13:51:07,254 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:07,254 - INFO     -     - bf_score                       0.1000
2025-10-29 13:51:07,254 - INFO     -     - depth_score                    0.7721
2025-10-29 13:51:07,254 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:07,254 - INFO     -     - f_stability                    0.5468
2025-10-29 13:51:07,254 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:07,254 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:07,254 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:07,255 - INFO     -     - composite                      0.4958
2025-10-29 13:51:07,255 - INFO     -     - total                          0.3916
2025-10-29 13:51:07,255 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:07,255 - INFO     -   Num remaining nodes: 3
2025-10-29 13:51:07,255 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:51:07,255 - INFO     -   Done: False
2025-10-29 13:51:07,255 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:07,256 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:07,256 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:07,256 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:07,256 - INFO     -     - num_nodes: 3
2025-10-29 13:51:07,256 - INFO     -     - num_edges: 6
2025-10-29 13:51:07,256 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:07,256 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:51:07,256 - INFO     -   After: current_merge_step = 6
2025-10-29 13:51:07,256 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:07,256 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:07,256 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:07,257 - INFO     -   ✓ Step logged
2025-10-29 13:51:07,257 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:07,257 - INFO     -   Returning:
2025-10-29 13:51:07,257 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:07,257 - INFO     -     - reward: 0.3916
2025-10-29 13:51:07,257 - INFO     -     - done: False
2025-10-29 13:51:07,257 - INFO     -     - truncated: False
2025-10-29 13:51:07,257 - INFO     -     - info: 19 keys
2025-10-29 13:51:07,257 - INFO     - ==========================================================================================

2025-10-29 13:51:07,262 - INFO     - 
==========================================================================================
2025-10-29 13:51:07,262 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:07,262 - INFO     - ==========================================================================================
2025-10-29 13:51:07,262 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:07,262 - INFO     -   Input action: 5 (type: int)
2025-10-29 13:51:07,262 - INFO     -   Available edges in graph: 6
2025-10-29 13:51:07,262 - INFO     -   Action index calculation:
2025-10-29 13:51:07,262 - INFO     -     - action % max(num_valid_edges, 1) = 5 % 6 = 5
2025-10-29 13:51:07,262 - INFO     -     - clamped to [0, 5]: 5
2025-10-29 13:51:07,262 - INFO     -   ✓ Extracted merge pair from edge 5: (14, 11)
2025-10-29 13:51:07,262 - INFO     -   ✓ Validation passed
2025-10-29 13:51:07,262 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:07,262 - INFO     -     - Total states before merge: 1009
2025-10-29 13:51:07,262 - INFO     -     - Num nodes: 3
2025-10-29 13:51:07,262 - INFO     -     - Num edges: 6
2025-10-29 13:51:07,262 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:07,262 - INFO     -       - Node 14: 1000 states
2025-10-29 13:51:07,262 - INFO     -       - Node 11: 4 states
2025-10-29 13:51:07,263 - INFO     -       - Expected product: 4000 states
2025-10-29 13:51:07,263 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:07,269 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:51:07,269 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:07,269 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:51:07,370 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:07,370 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:07,370 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:51:07,407 - INFO     -   ✓ TS file received after 0.04s
2025-10-29 13:51:07,407 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:07,407 - INFO     -   Calling graph_tracker.merge_nodes([14, 11])...
2025-10-29 13:51:07,407 - INFO     - Attempting merge of nodes 14 and 11...
2025-10-29 13:51:07,407 - INFO     - Successfully merged nodes into new node 15 with 4000 states.
2025-10-29 13:51:07,407 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:07,407 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:07,407 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:51:07,407 - INFO     - 
================================================================================
2025-10-29 13:51:07,407 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:51:07,408 - INFO     - ================================================================================
2025-10-29 13:51:07,408 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:07,408 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:51:07,408 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:51:07,414 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:07,415 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:07,415 - INFO     -   - Raw ts1_f length: 1000
2025-10-29 13:51:07,415 - INFO     -   - Raw ts2_f length: 4
2025-10-29 13:51:07,415 - INFO     -   - Raw f_after length: 4000
2025-10-29 13:51:07,415 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:07,416 - INFO     -   - ts1_valid: 1000 / 1000 (removed 0)
2025-10-29 13:51:07,416 - INFO     -   - ts2_valid: 4 / 4 (removed -4)
2025-10-29 13:51:07,419 - INFO     -   - after_valid: 2984 / 4000 (removed 1016)
2025-10-29 13:51:07,419 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:07,419 - INFO     -   - ts1_id: 14
2025-10-29 13:51:07,419 - INFO     -   - ts2_id: 11
2025-10-29 13:51:07,419 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:07,419 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:07,419 - INFO     -   - ts1_size: 1000, ts2_size: 4
2025-10-29 13:51:07,420 - INFO     -   - Product space size: 4000
2025-10-29 13:51:07,420 - INFO     -   - Using product state mapping
2025-10-29 13:51:07,425 - INFO     -   - f_before_product length: 4000
2025-10-29 13:51:07,439 - INFO     -   - avg_f_before: 10.9790 (4000 valid states)
2025-10-29 13:51:07,439 - INFO     -   - avg_f_after:  13.3747 (2984 valid states)
2025-10-29 13:51:07,439 - INFO     -   - delta: 2.3957
2025-10-29 13:51:07,439 - INFO     -   - f_stability: 1.0 - |2.3957| / 10.9790 = 0.7818
2025-10-29 13:51:07,439 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:07,439 - INFO     -   - Compared 1004 values
2025-10-29 13:51:07,440 - INFO     -   - Significant changes (> 5.0): 274
2025-10-29 13:51:07,440 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:07,440 - INFO     -   - states_before: 4000
2025-10-29 13:51:07,440 - INFO     -   - states_after: 4000
2025-10-29 13:51:07,440 - INFO     -   - delta_states: 0
2025-10-29 13:51:07,440 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:07,440 - INFO     -   - ts1_transitions: 8500
2025-10-29 13:51:07,440 - INFO     -   - ts2_transitions: 15
2025-10-29 13:51:07,440 - INFO     -   - merged_transitions: 22400
2025-10-29 13:51:07,440 - INFO     -   - transition_density_change: 3.4712
2025-10-29 13:51:07,440 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:07,440 - INFO     -   - search_signals present: True
2025-10-29 13:51:07,440 - INFO     -   - nodes_expanded: 2984
2025-10-29 13:51:07,440 - INFO     -   - search_depth: 6
2025-10-29 13:51:07,441 - INFO     -   - solution_cost: 4
2025-10-29 13:51:07,441 - INFO     -   - branching_factor: 7.5067
2025-10-29 13:51:07,441 - INFO     -   - solution_found: True
2025-10-29 13:51:07,441 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:07,443 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:07,443 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:51:07,443 - INFO     -   - TS14(1000) + TS11(4) → 4000 states
2025-10-29 13:51:07,443 - INFO     -   - f_stability=0.782
2025-10-29 13:51:07,443 - INFO     -   - A* nodes_expanded=2984
2025-10-29 13:51:07,443 - INFO     -   - solution_found=True
2025-10-29 13:51:07,443 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:07,443 - INFO     - 
  Extracted signals:
2025-10-29 13:51:07,443 - INFO     -     - iteration: 6
2025-10-29 13:51:07,443 - INFO     -     - states_before: 4000
2025-10-29 13:51:07,443 - INFO     -     - states_after: 4000
2025-10-29 13:51:07,443 - INFO     -     - delta_states: 0
2025-10-29 13:51:07,444 - INFO     -     - f_value_stability: 0.7818
2025-10-29 13:51:07,444 - INFO     -     - num_significant_f_changes: 274
2025-10-29 13:51:07,444 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:07,444 - INFO     -     - nodes_expanded: 2984
2025-10-29 13:51:07,444 - INFO     -     - search_depth: 6
2025-10-29 13:51:07,444 - INFO     -     - solution_cost: 4
2025-10-29 13:51:07,444 - INFO     -     - branching_factor: 7.5067
2025-10-29 13:51:07,444 - INFO     -     - solution_found: True
2025-10-29 13:51:07,444 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:07,446 - INFO     - 
  Computing reward:
2025-10-29 13:51:07,446 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:07,446 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:07,446 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:07,446 - INFO     -   [1] BRANCHING FACTOR: 7.507 → score 0.149 (high BF, minimal credit)
2025-10-29 13:51:07,446 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:51:07,447 - INFO     -   [3] F-VALUE STABILITY: 0.827
2025-10-29 13:51:07,447 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:51:07,447 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:07,448 - INFO     - 
  [COMPOSITE]: 0.605
2025-10-29 13:51:07,448 - INFO     -     = 0.300*0.149 (bf)
2025-10-29 13:51:07,448 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:51:07,448 - INFO     -     + 0.350*0.827 (stability)
2025-10-29 13:51:07,448 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:07,448 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:07,448 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:07,448 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:51:07,449 - INFO     - 
  [FINAL REWARD]: 0.7096
2025-10-29 13:51:07,451 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:07,451 - INFO     -     ✓ Reward computed: 0.7096
2025-10-29 13:51:07,452 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:07,452 - INFO     -     - bf_score                       0.1493
2025-10-29 13:51:07,452 - INFO     -     - depth_score                    0.7525
2025-10-29 13:51:07,452 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:07,452 - INFO     -     - f_stability                    0.8271
2025-10-29 13:51:07,452 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:51:07,452 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:07,452 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:07,452 - INFO     -     - composite                      0.6048
2025-10-29 13:51:07,452 - INFO     -     - total                          0.7096
2025-10-29 13:51:07,453 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:07,453 - INFO     -   Num remaining nodes: 2
2025-10-29 13:51:07,453 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:51:07,453 - INFO     -   Done: False
2025-10-29 13:51:07,453 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:07,453 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:07,454 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:07,454 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:07,454 - INFO     -     - num_nodes: 2
2025-10-29 13:51:07,454 - INFO     -     - num_edges: 2
2025-10-29 13:51:07,454 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:07,454 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:51:07,454 - INFO     -   After: current_merge_step = 7
2025-10-29 13:51:07,454 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:07,454 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:07,454 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:07,455 - INFO     -   ✓ Step logged
2025-10-29 13:51:07,455 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:07,455 - INFO     -   Returning:
2025-10-29 13:51:07,455 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:07,455 - INFO     -     - reward: 0.7096
2025-10-29 13:51:07,455 - INFO     -     - done: False
2025-10-29 13:51:07,455 - INFO     -     - truncated: False
2025-10-29 13:51:07,455 - INFO     -     - info: 19 keys
2025-10-29 13:51:07,455 - INFO     - ==========================================================================================

2025-10-29 13:51:07,466 - INFO     - 
==========================================================================================
2025-10-29 13:51:07,466 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:07,466 - INFO     - ==========================================================================================
2025-10-29 13:51:07,466 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:07,467 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:51:07,467 - INFO     -   Available edges in graph: 2
2025-10-29 13:51:07,467 - INFO     -   Action index calculation:
2025-10-29 13:51:07,467 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:51:07,467 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:51:07,467 - INFO     -   ✓ Extracted merge pair from edge 0: (6, 15)
2025-10-29 13:51:07,467 - INFO     -   ✓ Validation passed
2025-10-29 13:51:07,467 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:07,467 - INFO     -     - Total states before merge: 4005
2025-10-29 13:51:07,467 - INFO     -     - Num nodes: 2
2025-10-29 13:51:07,467 - INFO     -     - Num edges: 2
2025-10-29 13:51:07,467 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:07,467 - INFO     -       - Node 6: 5 states
2025-10-29 13:51:07,467 - INFO     -       - Node 15: 4000 states
2025-10-29 13:51:07,467 - INFO     -       - Expected product: 20000 states
2025-10-29 13:51:07,467 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:07,478 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:51:07,478 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:07,478 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:51:07,579 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:07,579 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:07,579 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:51:07,828 - INFO     -   ✓ TS file received after 0.25s
2025-10-29 13:51:07,828 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:07,828 - INFO     -   Calling graph_tracker.merge_nodes([6, 15])...
2025-10-29 13:51:07,829 - INFO     - Attempting merge of nodes 6 and 15...
2025-10-29 13:51:07,829 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:51:07,829 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:07,829 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:07,829 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:51:07,829 - INFO     - 
================================================================================
2025-10-29 13:51:07,829 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:51:07,829 - INFO     - ================================================================================
2025-10-29 13:51:07,829 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:07,829 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:51:07,829 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:51:07,835 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:07,835 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:07,835 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:07,835 - INFO     -   - Raw ts2_f length: 668
2025-10-29 13:51:07,835 - INFO     -   - Raw f_after length: 3340
2025-10-29 13:51:07,835 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:07,835 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:07,836 - INFO     -   - ts2_valid: 668 / 668 (removed -668)
2025-10-29 13:51:07,837 - INFO     -   - after_valid: 2749 / 3340 (removed 591)
2025-10-29 13:51:07,837 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:07,838 - INFO     -   - ts1_id: 6
2025-10-29 13:51:07,838 - INFO     -   - ts2_id: 15
2025-10-29 13:51:07,838 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:07,838 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:07,838 - INFO     -   - ts1_size: 5, ts2_size: 668
2025-10-29 13:51:07,838 - INFO     -   - Product space size: 3340
2025-10-29 13:51:07,838 - INFO     -   - Using product state mapping
2025-10-29 13:51:07,843 - INFO     -   - f_before_product length: 3340
2025-10-29 13:51:07,850 - INFO     -   - avg_f_before: 8.1722 (3340 valid states)
2025-10-29 13:51:07,850 - INFO     -   - avg_f_after:  12.2346 (2749 valid states)
2025-10-29 13:51:07,850 - INFO     -   - delta: 4.0625
2025-10-29 13:51:07,850 - INFO     -   - f_stability: 1.0 - |4.0625| / 8.1722 = 0.5029
2025-10-29 13:51:07,850 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:07,850 - INFO     -   - Compared 673 values
2025-10-29 13:51:07,850 - INFO     -   - Significant changes (> 5.0): 122
2025-10-29 13:51:07,850 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:07,850 - INFO     -   - states_before: 3340
2025-10-29 13:51:07,852 - INFO     -   - states_after: 3340
2025-10-29 13:51:07,852 - INFO     -   - delta_states: 0
2025-10-29 13:51:07,852 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:07,852 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:07,852 - INFO     -   - ts2_transitions: 6703
2025-10-29 13:51:07,852 - INFO     -   - merged_transitions: 19291
2025-10-29 13:51:07,852 - INFO     -   - transition_density_change: 3.7650
2025-10-29 13:51:07,852 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:07,852 - INFO     -   - search_signals present: True
2025-10-29 13:51:07,852 - INFO     -   - nodes_expanded: 2749
2025-10-29 13:51:07,853 - INFO     -   - search_depth: 6
2025-10-29 13:51:07,853 - INFO     -   - solution_cost: 4
2025-10-29 13:51:07,853 - INFO     -   - branching_factor: 7.0175
2025-10-29 13:51:07,853 - INFO     -   - solution_found: True
2025-10-29 13:51:07,853 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:07,854 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:07,854 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:51:07,854 - INFO     -   - TS6(5) + TS15(668) → 3340 states
2025-10-29 13:51:07,854 - INFO     -   - f_stability=0.503
2025-10-29 13:51:07,854 - INFO     -   - A* nodes_expanded=2749
2025-10-29 13:51:07,854 - INFO     -   - solution_found=True
2025-10-29 13:51:07,854 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:07,854 - INFO     - 
  Extracted signals:
2025-10-29 13:51:07,854 - INFO     -     - iteration: 7
2025-10-29 13:51:07,854 - INFO     -     - states_before: 3340
2025-10-29 13:51:07,854 - INFO     -     - states_after: 3340
2025-10-29 13:51:07,855 - INFO     -     - delta_states: 0
2025-10-29 13:51:07,855 - INFO     -     - f_value_stability: 0.5029
2025-10-29 13:51:07,855 - INFO     -     - num_significant_f_changes: 122
2025-10-29 13:51:07,855 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:07,855 - INFO     -     - nodes_expanded: 2749
2025-10-29 13:51:07,855 - INFO     -     - search_depth: 6
2025-10-29 13:51:07,855 - INFO     -     - solution_cost: 4
2025-10-29 13:51:07,855 - INFO     -     - branching_factor: 7.0175
2025-10-29 13:51:07,855 - INFO     -     - solution_found: True
2025-10-29 13:51:07,855 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:07,856 - INFO     - 
  Computing reward:
2025-10-29 13:51:07,856 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:07,856 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:07,856 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:07,856 - INFO     -   [1] BRANCHING FACTOR: 7.017 → score 0.198 (high BF, minimal credit)
2025-10-29 13:51:07,856 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:51:07,857 - INFO     -   [3] F-VALUE STABILITY: 0.604
2025-10-29 13:51:07,857 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:07,857 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:07,857 - INFO     - 
  [COMPOSITE]: 0.541
2025-10-29 13:51:07,857 - INFO     -     = 0.300*0.198 (bf)
2025-10-29 13:51:07,857 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:51:07,857 - INFO     -     + 0.350*0.604 (stability)
2025-10-29 13:51:07,857 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:07,857 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:07,857 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:07,858 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:07,858 - INFO     - 
  [FINAL REWARD]: 0.4828
2025-10-29 13:51:07,858 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:07,858 - INFO     -     ✓ Reward computed: 0.4828
2025-10-29 13:51:07,858 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:07,858 - INFO     -     - bf_score                       0.1983
2025-10-29 13:51:07,858 - INFO     -     - depth_score                    0.7525
2025-10-29 13:51:07,858 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:07,858 - INFO     -     - f_stability                    0.6040
2025-10-29 13:51:07,858 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:07,859 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:07,859 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:07,859 - INFO     -     - composite                      0.5414
2025-10-29 13:51:07,859 - INFO     -     - total                          0.4828
2025-10-29 13:51:07,859 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:07,859 - INFO     -   Num remaining nodes: 1
2025-10-29 13:51:07,859 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:51:07,859 - INFO     -   Done: True
2025-10-29 13:51:07,859 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:51:07,859 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:07,859 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:07,860 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:07,860 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:07,860 - INFO     -     - num_nodes: 1
2025-10-29 13:51:07,860 - INFO     -     - num_edges: 0
2025-10-29 13:51:07,860 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:07,860 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:51:07,860 - INFO     -   After: current_merge_step = 8
2025-10-29 13:51:07,860 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:07,860 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:07,860 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:07,861 - INFO     -   ✓ Step logged
2025-10-29 13:51:07,861 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:07,861 - INFO     -   Returning:
2025-10-29 13:51:07,861 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:07,861 - INFO     -     - reward: 0.4828
2025-10-29 13:51:07,861 - INFO     -     - done: True
2025-10-29 13:51:07,861 - INFO     -     - truncated: False
2025-10-29 13:51:07,861 - INFO     -     - info: 19 keys
2025-10-29 13:51:07,862 - INFO     - ==========================================================================================

2025-10-29 13:51:07,946 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:51:07,954 - INFO     - [Handshake] Building FD command:
2025-10-29 13:51:07,954 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:51:07,954 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_00.pddl
2025-10-29 13:51:07,954 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:51:07,957 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:51:08,558 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:51:08,559 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:51:08,559 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:51:08,873 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:51:08,874 - INFO     - Initializing GraphTracker...
2025-10-29 13:51:08,874 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:51:08,875 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:51:08,875 - INFO     -    → Node 0 has 2 states
2025-10-29 13:51:08,875 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:51:08,875 - INFO     -    → Node 1 has 2 states
2025-10-29 13:51:08,875 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:51:08,875 - INFO     -    → Node 2 has 2 states
2025-10-29 13:51:08,875 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:51:08,875 - INFO     -    → Node 3 has 2 states
2025-10-29 13:51:08,875 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:51:08,875 - INFO     -    → Node 4 has 2 states
2025-10-29 13:51:08,875 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:51:08,875 - INFO     -    → Node 5 has 5 states
2025-10-29 13:51:08,875 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:51:08,875 - INFO     -    → Node 6 has 5 states
2025-10-29 13:51:08,875 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:51:08,876 - INFO     -    → Node 7 has 5 states
2025-10-29 13:51:08,876 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:51:08,876 - INFO     -    → Node 8 has 5 states
2025-10-29 13:51:08,876 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:51:08,876 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:51:08,877 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:51:08,877 - INFO     - Added edge (0, 1)
2025-10-29 13:51:08,877 - INFO     - Added edge (0, 2)
2025-10-29 13:51:08,877 - INFO     - Added edge (0, 3)
2025-10-29 13:51:08,877 - INFO     - Added edge (0, 4)
2025-10-29 13:51:08,877 - INFO     - Added edge (0, 5)
2025-10-29 13:51:08,879 - INFO     - Added edge (0, 6)
2025-10-29 13:51:08,879 - INFO     - Added edge (0, 7)
2025-10-29 13:51:08,879 - INFO     - Added edge (0, 8)
2025-10-29 13:51:08,879 - INFO     - Added edge (1, 0)
2025-10-29 13:51:08,879 - INFO     - Added edge (1, 2)
2025-10-29 13:51:08,879 - INFO     - Added edge (1, 3)
2025-10-29 13:51:08,879 - INFO     - Added edge (1, 4)
2025-10-29 13:51:08,879 - INFO     - Added edge (1, 5)
2025-10-29 13:51:08,879 - INFO     - Added edge (1, 6)
2025-10-29 13:51:08,879 - INFO     - Added edge (1, 7)
2025-10-29 13:51:08,879 - INFO     - Added edge (1, 8)
2025-10-29 13:51:08,879 - INFO     - Added edge (2, 0)
2025-10-29 13:51:08,879 - INFO     - Added edge (2, 1)
2025-10-29 13:51:08,880 - INFO     - Added edge (2, 3)
2025-10-29 13:51:08,880 - INFO     - Added edge (2, 4)
2025-10-29 13:51:08,880 - INFO     - Added edge (2, 5)
2025-10-29 13:51:08,880 - INFO     - Added edge (2, 6)
2025-10-29 13:51:08,880 - INFO     - Added edge (2, 7)
2025-10-29 13:51:08,880 - INFO     - Added edge (2, 8)
2025-10-29 13:51:08,880 - INFO     - Added edge (3, 0)
2025-10-29 13:51:08,880 - INFO     - Added edge (3, 1)
2025-10-29 13:51:08,880 - INFO     - Added edge (3, 2)
2025-10-29 13:51:08,880 - INFO     - Added edge (3, 4)
2025-10-29 13:51:08,880 - INFO     - Added edge (3, 5)
2025-10-29 13:51:08,880 - INFO     - Added edge (3, 6)
2025-10-29 13:51:08,880 - INFO     - Added edge (3, 7)
2025-10-29 13:51:08,881 - INFO     - Added edge (3, 8)
2025-10-29 13:51:08,881 - INFO     - Added edge (4, 0)
2025-10-29 13:51:08,881 - INFO     - Added edge (4, 1)
2025-10-29 13:51:08,881 - INFO     - Added edge (4, 2)
2025-10-29 13:51:08,881 - INFO     - Added edge (4, 3)
2025-10-29 13:51:08,881 - INFO     - Added edge (4, 5)
2025-10-29 13:51:08,881 - INFO     - Added edge (4, 6)
2025-10-29 13:51:08,881 - INFO     - Added edge (4, 7)
2025-10-29 13:51:08,881 - INFO     - Added edge (4, 8)
2025-10-29 13:51:08,881 - INFO     - Added edge (5, 0)
2025-10-29 13:51:08,881 - INFO     - Added edge (5, 1)
2025-10-29 13:51:08,881 - INFO     - Added edge (5, 2)
2025-10-29 13:51:08,882 - INFO     - Added edge (5, 3)
2025-10-29 13:51:08,882 - INFO     - Added edge (5, 4)
2025-10-29 13:51:08,882 - INFO     - Added edge (6, 0)
2025-10-29 13:51:08,882 - INFO     - Added edge (6, 1)
2025-10-29 13:51:08,882 - INFO     - Added edge (6, 2)
2025-10-29 13:51:08,882 - INFO     - Added edge (6, 3)
2025-10-29 13:51:08,882 - INFO     - Added edge (6, 4)
2025-10-29 13:51:08,882 - INFO     - Added edge (7, 0)
2025-10-29 13:51:08,882 - INFO     - Added edge (7, 1)
2025-10-29 13:51:08,882 - INFO     - Added edge (7, 2)
2025-10-29 13:51:08,882 - INFO     - Added edge (7, 3)
2025-10-29 13:51:08,882 - INFO     - Added edge (7, 4)
2025-10-29 13:51:08,882 - INFO     - Added edge (8, 0)
2025-10-29 13:51:08,883 - INFO     - Added edge (8, 1)
2025-10-29 13:51:08,883 - INFO     - Added edge (8, 2)
2025-10-29 13:51:08,883 - INFO     - Added edge (8, 3)
2025-10-29 13:51:08,883 - INFO     - Added edge (8, 4)
2025-10-29 13:51:08,883 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:51:08,890 - INFO     - 
==========================================================================================
2025-10-29 13:51:08,890 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:08,890 - INFO     - ==========================================================================================
2025-10-29 13:51:08,890 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:08,891 - INFO     -   Input action: 25 (type: int)
2025-10-29 13:51:08,891 - INFO     -   Available edges in graph: 60
2025-10-29 13:51:08,891 - INFO     -   Action index calculation:
2025-10-29 13:51:08,891 - INFO     -     - action % max(num_valid_edges, 1) = 25 % 60 = 25
2025-10-29 13:51:08,891 - INFO     -     - clamped to [0, 59]: 25
2025-10-29 13:51:08,891 - INFO     -   ✓ Extracted merge pair from edge 25: (3, 1)
2025-10-29 13:51:08,891 - INFO     -   ✓ Validation passed
2025-10-29 13:51:08,891 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:08,891 - INFO     -     - Total states before merge: 30
2025-10-29 13:51:08,891 - INFO     -     - Num nodes: 9
2025-10-29 13:51:08,891 - INFO     -     - Num edges: 60
2025-10-29 13:51:08,891 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:08,891 - INFO     -       - Node 3: 2 states
2025-10-29 13:51:08,892 - INFO     -       - Node 1: 2 states
2025-10-29 13:51:08,892 - INFO     -       - Expected product: 4 states
2025-10-29 13:51:08,892 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:08,900 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:51:08,901 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:08,901 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:51:09,002 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:09,002 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:09,002 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:51:09,002 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:09,002 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:09,002 - INFO     -   Calling graph_tracker.merge_nodes([3, 1])...
2025-10-29 13:51:09,003 - INFO     - Attempting merge of nodes 3 and 1...
2025-10-29 13:51:09,003 - INFO     - Successfully merged nodes into new node 9 with 4 states.
2025-10-29 13:51:09,003 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:09,003 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:09,003 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:51:09,003 - INFO     - 
================================================================================
2025-10-29 13:51:09,003 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:51:09,003 - INFO     - ================================================================================
2025-10-29 13:51:09,003 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:09,003 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:51:09,003 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:51:09,003 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:09,003 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:09,003 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:09,003 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:09,003 - INFO     -   - Raw f_after length: 4
2025-10-29 13:51:09,003 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:09,003 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:09,003 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:09,003 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:51:09,004 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:09,004 - INFO     -   - ts1_id: 3
2025-10-29 13:51:09,004 - INFO     -   - ts2_id: 1
2025-10-29 13:51:09,004 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:09,004 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:09,004 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:51:09,004 - INFO     -   - Product space size: 4
2025-10-29 13:51:09,004 - INFO     -   - Using product state mapping
2025-10-29 13:51:09,004 - INFO     -   - f_before_product length: 4
2025-10-29 13:51:09,004 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:51:09,004 - INFO     -   - avg_f_after:  1.0000 (4 valid states)
2025-10-29 13:51:09,004 - INFO     -   - delta: 0.2500
2025-10-29 13:51:09,005 - INFO     -   - f_stability: 1.0 - |0.2500| / 0.7500 = 0.6667
2025-10-29 13:51:09,005 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:09,005 - INFO     -   - Compared 4 values
2025-10-29 13:51:09,005 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:09,005 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:09,005 - INFO     -   - states_before: 4
2025-10-29 13:51:09,005 - INFO     -   - states_after: 4
2025-10-29 13:51:09,005 - INFO     -   - delta_states: 0
2025-10-29 13:51:09,006 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:09,006 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:09,006 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:09,006 - INFO     -   - merged_transitions: 20
2025-10-29 13:51:09,006 - INFO     -   - transition_density_change: 2.5000
2025-10-29 13:51:09,006 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:09,007 - INFO     -   - search_signals present: True
2025-10-29 13:51:09,007 - INFO     -   - nodes_expanded: 4
2025-10-29 13:51:09,007 - INFO     -   - search_depth: 0
2025-10-29 13:51:09,007 - INFO     -   - solution_cost: 0
2025-10-29 13:51:09,007 - INFO     -   - branching_factor: 5.0000
2025-10-29 13:51:09,007 - INFO     -   - solution_found: True
2025-10-29 13:51:09,007 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:09,007 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:09,007 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:51:09,008 - INFO     -   - TS3(2) + TS1(2) → 4 states
2025-10-29 13:51:09,008 - INFO     -   - f_stability=0.667
2025-10-29 13:51:09,008 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:51:09,008 - INFO     -   - solution_found=True
2025-10-29 13:51:09,008 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:09,008 - INFO     - 
  Extracted signals:
2025-10-29 13:51:09,008 - INFO     -     - iteration: 0
2025-10-29 13:51:09,008 - INFO     -     - states_before: 4
2025-10-29 13:51:09,008 - INFO     -     - states_after: 4
2025-10-29 13:51:09,008 - INFO     -     - delta_states: 0
2025-10-29 13:51:09,008 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:51:09,008 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:09,008 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:09,009 - INFO     -     - nodes_expanded: 4
2025-10-29 13:51:09,009 - INFO     -     - search_depth: 0
2025-10-29 13:51:09,009 - INFO     -     - solution_cost: 0
2025-10-29 13:51:09,009 - INFO     -     - branching_factor: 5.0000
2025-10-29 13:51:09,009 - INFO     -     - solution_found: True
2025-10-29 13:51:09,009 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:09,009 - INFO     - 
  Computing reward:
2025-10-29 13:51:09,009 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:09,009 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:09,009 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:09,009 - INFO     -   [1] BRANCHING FACTOR: 5.000 → score 0.433 (tolerable)
2025-10-29 13:51:09,009 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:51:09,010 - INFO     -   [3] F-VALUE STABILITY: 0.176
2025-10-29 13:51:09,010 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:09,010 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:09,010 - INFO     - 
  [COMPOSITE]: 0.412
2025-10-29 13:51:09,010 - INFO     -     = 0.300*0.433 (bf)
2025-10-29 13:51:09,010 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:51:09,010 - INFO     -     + 0.350*0.176 (stability)
2025-10-29 13:51:09,010 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:09,010 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:09,010 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:09,010 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:09,011 - INFO     - 
  [FINAL REWARD]: 0.0230
2025-10-29 13:51:09,011 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:09,011 - INFO     -     ✓ Reward computed: 0.0230
2025-10-29 13:51:09,011 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:09,011 - INFO     -     - bf_score                       0.4333
2025-10-29 13:51:09,011 - INFO     -     - depth_score                    0.5000
2025-10-29 13:51:09,011 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:09,011 - INFO     -     - f_stability                    0.1757
2025-10-29 13:51:09,011 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:09,011 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:09,011 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:09,011 - INFO     -     - composite                      0.4115
2025-10-29 13:51:09,011 - INFO     -     - total                          0.0230
2025-10-29 13:51:09,012 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:09,012 - INFO     -   Num remaining nodes: 8
2025-10-29 13:51:09,012 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:51:09,012 - INFO     -   Done: False
2025-10-29 13:51:09,012 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:09,014 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:09,014 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:09,014 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:09,014 - INFO     -     - num_nodes: 8
2025-10-29 13:51:09,014 - INFO     -     - num_edges: 44
2025-10-29 13:51:09,014 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:09,014 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:51:09,014 - INFO     -   After: current_merge_step = 1
2025-10-29 13:51:09,014 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:09,014 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:09,014 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:09,015 - INFO     -   ✓ Step logged
2025-10-29 13:51:09,015 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:09,015 - INFO     -   Returning:
2025-10-29 13:51:09,016 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:09,016 - INFO     -     - reward: 0.0230
2025-10-29 13:51:09,016 - INFO     -     - done: False
2025-10-29 13:51:09,016 - INFO     -     - truncated: False
2025-10-29 13:51:09,016 - INFO     -     - info: 19 keys
2025-10-29 13:51:09,016 - INFO     - ==========================================================================================

2025-10-29 13:51:09,021 - INFO     - 
==========================================================================================
2025-10-29 13:51:09,021 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:09,021 - INFO     - ==========================================================================================
2025-10-29 13:51:09,021 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:09,021 - INFO     -   Input action: 39 (type: int)
2025-10-29 13:51:09,021 - INFO     -   Available edges in graph: 44
2025-10-29 13:51:09,021 - INFO     -   Action index calculation:
2025-10-29 13:51:09,022 - INFO     -     - action % max(num_valid_edges, 1) = 39 % 44 = 39
2025-10-29 13:51:09,022 - INFO     -     - clamped to [0, 43]: 39
2025-10-29 13:51:09,022 - INFO     -   ✓ Extracted merge pair from edge 39: (9, 4)
2025-10-29 13:51:09,022 - INFO     -   ✓ Validation passed
2025-10-29 13:51:09,022 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:09,022 - INFO     -     - Total states before merge: 30
2025-10-29 13:51:09,022 - INFO     -     - Num nodes: 8
2025-10-29 13:51:09,022 - INFO     -     - Num edges: 44
2025-10-29 13:51:09,022 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:09,022 - INFO     -       - Node 9: 4 states
2025-10-29 13:51:09,022 - INFO     -       - Node 4: 2 states
2025-10-29 13:51:09,022 - INFO     -       - Expected product: 8 states
2025-10-29 13:51:09,022 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:09,029 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:51:09,029 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:09,029 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:51:09,130 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:09,130 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:09,130 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:51:09,131 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:09,131 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:09,131 - INFO     -   Calling graph_tracker.merge_nodes([9, 4])...
2025-10-29 13:51:09,131 - INFO     - Attempting merge of nodes 9 and 4...
2025-10-29 13:51:09,131 - INFO     - Successfully merged nodes into new node 10 with 8 states.
2025-10-29 13:51:09,131 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:09,131 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:09,131 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:51:09,131 - INFO     - 
================================================================================
2025-10-29 13:51:09,131 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:51:09,131 - INFO     - ================================================================================
2025-10-29 13:51:09,131 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:09,131 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:51:09,132 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:51:09,132 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:09,132 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:09,132 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:51:09,132 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:09,132 - INFO     -   - Raw f_after length: 8
2025-10-29 13:51:09,132 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:09,133 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:51:09,133 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:09,133 - INFO     -   - after_valid: 8 / 8 (removed 0)
2025-10-29 13:51:09,133 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:09,133 - INFO     -   - ts1_id: 9
2025-10-29 13:51:09,133 - INFO     -   - ts2_id: 4
2025-10-29 13:51:09,133 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:09,133 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:09,133 - INFO     -   - ts1_size: 4, ts2_size: 2
2025-10-29 13:51:09,133 - INFO     -   - Product space size: 8
2025-10-29 13:51:09,133 - INFO     -   - Using product state mapping
2025-10-29 13:51:09,133 - INFO     -   - f_before_product length: 8
2025-10-29 13:51:09,134 - INFO     -   - avg_f_before: 1.1250 (8 valid states)
2025-10-29 13:51:09,134 - INFO     -   - avg_f_after:  1.1250 (8 valid states)
2025-10-29 13:51:09,134 - INFO     -   - delta: 0.0000
2025-10-29 13:51:09,134 - INFO     -   - f_stability: 1.0 - |0.0000| / 1.1250 = 1.0000
2025-10-29 13:51:09,134 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:09,134 - INFO     -   - Compared 6 values
2025-10-29 13:51:09,134 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:09,134 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:09,134 - INFO     -   - states_before: 8
2025-10-29 13:51:09,134 - INFO     -   - states_after: 8
2025-10-29 13:51:09,134 - INFO     -   - delta_states: 0
2025-10-29 13:51:09,134 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:09,134 - INFO     -   - ts1_transitions: 20
2025-10-29 13:51:09,134 - INFO     -   - ts2_transitions: 3
2025-10-29 13:51:09,134 - INFO     -   - merged_transitions: 60
2025-10-29 13:51:09,135 - INFO     -   - transition_density_change: 4.6250
2025-10-29 13:51:09,135 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:09,135 - INFO     -   - search_signals present: True
2025-10-29 13:51:09,135 - INFO     -   - nodes_expanded: 8
2025-10-29 13:51:09,135 - INFO     -   - search_depth: 0
2025-10-29 13:51:09,135 - INFO     -   - solution_cost: 0
2025-10-29 13:51:09,135 - INFO     -   - branching_factor: 7.5000
2025-10-29 13:51:09,135 - INFO     -   - solution_found: True
2025-10-29 13:51:09,135 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:09,135 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:09,135 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:51:09,135 - INFO     -   - TS9(4) + TS4(2) → 8 states
2025-10-29 13:51:09,135 - INFO     -   - f_stability=1.000
2025-10-29 13:51:09,135 - INFO     -   - A* nodes_expanded=8
2025-10-29 13:51:09,135 - INFO     -   - solution_found=True
2025-10-29 13:51:09,135 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:09,135 - INFO     - 
  Extracted signals:
2025-10-29 13:51:09,136 - INFO     -     - iteration: 1
2025-10-29 13:51:09,136 - INFO     -     - states_before: 8
2025-10-29 13:51:09,136 - INFO     -     - states_after: 8
2025-10-29 13:51:09,136 - INFO     -     - delta_states: 0
2025-10-29 13:51:09,136 - INFO     -     - f_value_stability: 1.0000
2025-10-29 13:51:09,136 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:09,136 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:09,136 - INFO     -     - nodes_expanded: 8
2025-10-29 13:51:09,136 - INFO     -     - search_depth: 0
2025-10-29 13:51:09,136 - INFO     -     - solution_cost: 0
2025-10-29 13:51:09,136 - INFO     -     - branching_factor: 7.5000
2025-10-29 13:51:09,136 - INFO     -     - solution_found: True
2025-10-29 13:51:09,136 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:09,136 - INFO     - 
  Computing reward:
2025-10-29 13:51:09,136 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:09,136 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:09,136 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:09,138 - INFO     -   [1] BRANCHING FACTOR: 7.500 → score 0.150 (high BF, minimal credit)
2025-10-29 13:51:09,138 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:51:09,138 - INFO     -   [3] F-VALUE STABILITY: 0.962
2025-10-29 13:51:09,138 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:51:09,138 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:09,138 - INFO     - 
  [COMPOSITE]: 0.602
2025-10-29 13:51:09,138 - INFO     -     = 0.300*0.150 (bf)
2025-10-29 13:51:09,138 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:51:09,138 - INFO     -     + 0.350*0.962 (stability)
2025-10-29 13:51:09,138 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:09,138 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:09,138 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:09,138 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:51:09,139 - INFO     - 
  [FINAL REWARD]: 0.7032
2025-10-29 13:51:09,139 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:09,139 - INFO     -     ✓ Reward computed: 0.7032
2025-10-29 13:51:09,139 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:09,139 - INFO     -     - bf_score                       0.1500
2025-10-29 13:51:09,139 - INFO     -     - depth_score                    0.5000
2025-10-29 13:51:09,139 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:09,139 - INFO     -     - f_stability                    0.9617
2025-10-29 13:51:09,139 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:51:09,139 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:09,139 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:09,139 - INFO     -     - composite                      0.6016
2025-10-29 13:51:09,139 - INFO     -     - total                          0.7032
2025-10-29 13:51:09,139 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:09,139 - INFO     -   Num remaining nodes: 7
2025-10-29 13:51:09,139 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:51:09,139 - INFO     -   Done: False
2025-10-29 13:51:09,140 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:09,140 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:09,141 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:09,141 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:09,141 - INFO     -     - num_nodes: 7
2025-10-29 13:51:09,141 - INFO     -     - num_edges: 30
2025-10-29 13:51:09,141 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:09,141 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:51:09,141 - INFO     -   After: current_merge_step = 2
2025-10-29 13:51:09,141 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:09,141 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:09,141 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:09,142 - INFO     -   ✓ Step logged
2025-10-29 13:51:09,142 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:09,142 - INFO     -   Returning:
2025-10-29 13:51:09,142 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:09,142 - INFO     -     - reward: 0.7032
2025-10-29 13:51:09,142 - INFO     -     - done: False
2025-10-29 13:51:09,142 - INFO     -     - truncated: False
2025-10-29 13:51:09,142 - INFO     -     - info: 19 keys
2025-10-29 13:51:09,142 - INFO     - ==========================================================================================

2025-10-29 13:51:09,146 - INFO     - 
==========================================================================================
2025-10-29 13:51:09,146 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:09,146 - INFO     - ==========================================================================================
2025-10-29 13:51:09,146 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:09,146 - INFO     -   Input action: 15 (type: int)
2025-10-29 13:51:09,147 - INFO     -   Available edges in graph: 30
2025-10-29 13:51:09,147 - INFO     -   Action index calculation:
2025-10-29 13:51:09,147 - INFO     -     - action % max(num_valid_edges, 1) = 15 % 30 = 15
2025-10-29 13:51:09,147 - INFO     -     - clamped to [0, 29]: 15
2025-10-29 13:51:09,147 - INFO     -   ✓ Extracted merge pair from edge 15: (6, 0)
2025-10-29 13:51:09,147 - INFO     -   ✓ Validation passed
2025-10-29 13:51:09,147 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:09,147 - INFO     -     - Total states before merge: 32
2025-10-29 13:51:09,147 - INFO     -     - Num nodes: 7
2025-10-29 13:51:09,147 - INFO     -     - Num edges: 30
2025-10-29 13:51:09,147 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:09,147 - INFO     -       - Node 6: 5 states
2025-10-29 13:51:09,147 - INFO     -       - Node 0: 2 states
2025-10-29 13:51:09,147 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:09,147 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:09,153 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:51:09,153 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:09,153 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:51:09,255 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:09,255 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:09,255 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:51:09,255 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:09,255 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:09,255 - INFO     -   Calling graph_tracker.merge_nodes([6, 0])...
2025-10-29 13:51:09,255 - INFO     - Attempting merge of nodes 6 and 0...
2025-10-29 13:51:09,255 - INFO     - Successfully merged nodes into new node 11 with 10 states.
2025-10-29 13:51:09,255 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:09,255 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:09,255 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:51:09,256 - INFO     - 
================================================================================
2025-10-29 13:51:09,256 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:51:09,256 - INFO     - ================================================================================
2025-10-29 13:51:09,256 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:09,256 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:51:09,256 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:51:09,257 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:09,257 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:09,257 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:09,257 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:09,257 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:09,257 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:09,257 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:09,257 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:09,257 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:09,257 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:09,257 - INFO     -   - ts1_id: 6
2025-10-29 13:51:09,257 - INFO     -   - ts2_id: 0
2025-10-29 13:51:09,258 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:09,258 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:09,258 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:51:09,258 - INFO     -   - Product space size: 10
2025-10-29 13:51:09,258 - INFO     -   - Using product state mapping
2025-10-29 13:51:09,258 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:09,258 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:51:09,258 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:51:09,258 - INFO     -   - delta: 0.4000
2025-10-29 13:51:09,258 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:51:09,258 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:09,258 - INFO     -   - Compared 7 values
2025-10-29 13:51:09,258 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:09,258 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:09,259 - INFO     -   - states_before: 10
2025-10-29 13:51:09,259 - INFO     -   - states_after: 10
2025-10-29 13:51:09,259 - INFO     -   - delta_states: 0
2025-10-29 13:51:09,259 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:09,259 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:09,259 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:09,259 - INFO     -   - merged_transitions: 40
2025-10-29 13:51:09,259 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:51:09,259 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:09,259 - INFO     -   - search_signals present: True
2025-10-29 13:51:09,259 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:09,259 - INFO     -   - search_depth: 1
2025-10-29 13:51:09,259 - INFO     -   - solution_cost: 0
2025-10-29 13:51:09,259 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:51:09,259 - INFO     -   - solution_found: True
2025-10-29 13:51:09,259 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:09,260 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:09,260 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:51:09,260 - INFO     -   - TS6(5) + TS0(2) → 10 states
2025-10-29 13:51:09,260 - INFO     -   - f_stability=0.862
2025-10-29 13:51:09,260 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:09,260 - INFO     -   - solution_found=True
2025-10-29 13:51:09,260 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:09,260 - INFO     - 
  Extracted signals:
2025-10-29 13:51:09,260 - INFO     -     - iteration: 2
2025-10-29 13:51:09,260 - INFO     -     - states_before: 10
2025-10-29 13:51:09,260 - INFO     -     - states_after: 10
2025-10-29 13:51:09,261 - INFO     -     - delta_states: 0
2025-10-29 13:51:09,261 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:51:09,261 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:09,261 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:09,261 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:09,261 - INFO     -     - search_depth: 1
2025-10-29 13:51:09,261 - INFO     -     - solution_cost: 0
2025-10-29 13:51:09,261 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:51:09,261 - INFO     -     - solution_found: True
2025-10-29 13:51:09,261 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:09,261 - INFO     - 
  Computing reward:
2025-10-29 13:51:09,261 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:09,261 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:09,261 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:09,261 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:51:09,262 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:51:09,262 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:51:09,262 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:09,262 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:09,262 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:51:09,262 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:51:09,262 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:51:09,262 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:51:09,262 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:09,262 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:09,262 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:09,262 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:09,263 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:51:09,263 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:09,263 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:51:09,263 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:09,263 - INFO     -     - bf_score                       0.5667
2025-10-29 13:51:09,263 - INFO     -     - depth_score                    0.9119
2025-10-29 13:51:09,263 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:09,263 - INFO     -     - f_stability                    0.2913
2025-10-29 13:51:09,263 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:09,263 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:09,263 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:09,263 - INFO     -     - composite                      0.5743
2025-10-29 13:51:09,263 - INFO     -     - total                          0.3487
2025-10-29 13:51:09,263 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:09,264 - INFO     -   Num remaining nodes: 6
2025-10-29 13:51:09,264 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:51:09,264 - INFO     -   Done: False
2025-10-29 13:51:09,264 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:09,265 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:09,265 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:09,265 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:09,265 - INFO     -     - num_nodes: 6
2025-10-29 13:51:09,265 - INFO     -     - num_edges: 24
2025-10-29 13:51:09,265 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:09,265 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:51:09,265 - INFO     -   After: current_merge_step = 3
2025-10-29 13:51:09,265 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:09,266 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:09,266 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:09,266 - INFO     -   ✓ Step logged
2025-10-29 13:51:09,266 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:09,267 - INFO     -   Returning:
2025-10-29 13:51:09,267 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:09,267 - INFO     -     - reward: 0.3487
2025-10-29 13:51:09,267 - INFO     -     - done: False
2025-10-29 13:51:09,267 - INFO     -     - truncated: False
2025-10-29 13:51:09,267 - INFO     -     - info: 19 keys
2025-10-29 13:51:09,267 - INFO     - ==========================================================================================

2025-10-29 13:51:09,272 - INFO     - 
==========================================================================================
2025-10-29 13:51:09,272 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:09,272 - INFO     - ==========================================================================================
2025-10-29 13:51:09,272 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:09,272 - INFO     -   Input action: 10 (type: int)
2025-10-29 13:51:09,272 - INFO     -   Available edges in graph: 24
2025-10-29 13:51:09,272 - INFO     -   Action index calculation:
2025-10-29 13:51:09,272 - INFO     -     - action % max(num_valid_edges, 1) = 10 % 24 = 10
2025-10-29 13:51:09,272 - INFO     -     - clamped to [0, 23]: 10
2025-10-29 13:51:09,272 - INFO     -   ✓ Extracted merge pair from edge 10: (7, 11)
2025-10-29 13:51:09,273 - INFO     -   ✓ Validation passed
2025-10-29 13:51:09,273 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:09,273 - INFO     -     - Total states before merge: 35
2025-10-29 13:51:09,273 - INFO     -     - Num nodes: 6
2025-10-29 13:51:09,273 - INFO     -     - Num edges: 24
2025-10-29 13:51:09,273 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:09,273 - INFO     -       - Node 7: 5 states
2025-10-29 13:51:09,273 - INFO     -       - Node 11: 10 states
2025-10-29 13:51:09,273 - INFO     -       - Expected product: 50 states
2025-10-29 13:51:09,273 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:09,278 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:51:09,278 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:09,278 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:51:09,379 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:09,379 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:09,379 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:51:09,380 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:09,381 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:09,381 - INFO     -   Calling graph_tracker.merge_nodes([7, 11])...
2025-10-29 13:51:09,381 - INFO     - Attempting merge of nodes 7 and 11...
2025-10-29 13:51:09,381 - INFO     - Successfully merged nodes into new node 12 with 50 states.
2025-10-29 13:51:09,381 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:09,381 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:09,381 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:51:09,381 - INFO     - 
================================================================================
2025-10-29 13:51:09,381 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:51:09,382 - INFO     - ================================================================================
2025-10-29 13:51:09,382 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:09,382 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:51:09,382 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:51:09,383 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:09,383 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:09,383 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:09,383 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:51:09,383 - INFO     -   - Raw f_after length: 50
2025-10-29 13:51:09,383 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:09,383 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:09,383 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:51:09,384 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:51:09,384 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:09,384 - INFO     -   - ts1_id: 7
2025-10-29 13:51:09,384 - INFO     -   - ts2_id: 11
2025-10-29 13:51:09,384 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:09,384 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:09,384 - INFO     -   - ts1_size: 5, ts2_size: 10
2025-10-29 13:51:09,384 - INFO     -   - Product space size: 50
2025-10-29 13:51:09,384 - INFO     -   - Using product state mapping
2025-10-29 13:51:09,384 - INFO     -   - f_before_product length: 50
2025-10-29 13:51:09,385 - INFO     -   - avg_f_before: 3.8800 (50 valid states)
2025-10-29 13:51:09,385 - INFO     -   - avg_f_after:  6.1400 (50 valid states)
2025-10-29 13:51:09,385 - INFO     -   - delta: 2.2600
2025-10-29 13:51:09,385 - INFO     -   - f_stability: 1.0 - |2.2600| / 3.8800 = 0.4175
2025-10-29 13:51:09,385 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:09,385 - INFO     -   - Compared 15 values
2025-10-29 13:51:09,385 - INFO     -   - Significant changes (> 5.0): 2
2025-10-29 13:51:09,385 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:09,385 - INFO     -   - states_before: 50
2025-10-29 13:51:09,385 - INFO     -   - states_after: 50
2025-10-29 13:51:09,385 - INFO     -   - delta_states: 0
2025-10-29 13:51:09,385 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:09,385 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:09,386 - INFO     -   - ts2_transitions: 40
2025-10-29 13:51:09,386 - INFO     -   - merged_transitions: 275
2025-10-29 13:51:09,386 - INFO     -   - transition_density_change: 4.4400
2025-10-29 13:51:09,386 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:09,386 - INFO     -   - search_signals present: True
2025-10-29 13:51:09,386 - INFO     -   - nodes_expanded: 50
2025-10-29 13:51:09,386 - INFO     -   - search_depth: 3
2025-10-29 13:51:09,386 - INFO     -   - solution_cost: 2
2025-10-29 13:51:09,386 - INFO     -   - branching_factor: 5.5000
2025-10-29 13:51:09,386 - INFO     -   - solution_found: True
2025-10-29 13:51:09,386 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:09,386 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:09,386 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:51:09,386 - INFO     -   - TS7(5) + TS11(10) → 50 states
2025-10-29 13:51:09,387 - INFO     -   - f_stability=0.418
2025-10-29 13:51:09,387 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:51:09,387 - INFO     -   - solution_found=True
2025-10-29 13:51:09,387 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:09,387 - INFO     - 
  Extracted signals:
2025-10-29 13:51:09,387 - INFO     -     - iteration: 3
2025-10-29 13:51:09,387 - INFO     -     - states_before: 50
2025-10-29 13:51:09,387 - INFO     -     - states_after: 50
2025-10-29 13:51:09,387 - INFO     -     - delta_states: 0
2025-10-29 13:51:09,387 - INFO     -     - f_value_stability: 0.4175
2025-10-29 13:51:09,387 - INFO     -     - num_significant_f_changes: 2
2025-10-29 13:51:09,387 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:09,387 - INFO     -     - nodes_expanded: 50
2025-10-29 13:51:09,387 - INFO     -     - search_depth: 3
2025-10-29 13:51:09,387 - INFO     -     - solution_cost: 2
2025-10-29 13:51:09,387 - INFO     -     - branching_factor: 5.5000
2025-10-29 13:51:09,387 - INFO     -     - solution_found: True
2025-10-29 13:51:09,387 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:09,388 - INFO     - 
  Computing reward:
2025-10-29 13:51:09,388 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:09,388 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:09,388 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:09,388 - INFO     -   [1] BRANCHING FACTOR: 5.500 → score 0.367 (tolerable)
2025-10-29 13:51:09,388 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:51:09,388 - INFO     -   [3] F-VALUE STABILITY: 0.550
2025-10-29 13:51:09,388 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:09,388 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:09,388 - INFO     - 
  [COMPOSITE]: 0.587
2025-10-29 13:51:09,390 - INFO     -     = 0.300*0.367 (bf)
2025-10-29 13:51:09,390 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:51:09,390 - INFO     -     + 0.350*0.550 (stability)
2025-10-29 13:51:09,390 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:09,390 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:09,390 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:09,390 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:09,390 - INFO     - 
  [FINAL REWARD]: 0.5744
2025-10-29 13:51:09,390 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:09,390 - INFO     -     ✓ Reward computed: 0.5744
2025-10-29 13:51:09,390 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:09,390 - INFO     -     - bf_score                       0.3667
2025-10-29 13:51:09,390 - INFO     -     - depth_score                    0.8237
2025-10-29 13:51:09,390 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:09,390 - INFO     -     - f_stability                    0.5499
2025-10-29 13:51:09,390 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:09,390 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:09,390 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:09,390 - INFO     -     - composite                      0.5872
2025-10-29 13:51:09,390 - INFO     -     - total                          0.5744
2025-10-29 13:51:09,390 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:09,390 - INFO     -   Num remaining nodes: 5
2025-10-29 13:51:09,390 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:51:09,390 - INFO     -   Done: False
2025-10-29 13:51:09,390 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:09,391 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:09,391 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:09,391 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:09,391 - INFO     -     - num_nodes: 5
2025-10-29 13:51:09,391 - INFO     -     - num_edges: 18
2025-10-29 13:51:09,391 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:09,392 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:51:09,392 - INFO     -   After: current_merge_step = 4
2025-10-29 13:51:09,392 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:09,392 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:09,392 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:09,392 - INFO     -   ✓ Step logged
2025-10-29 13:51:09,393 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:09,393 - INFO     -   Returning:
2025-10-29 13:51:09,393 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:09,393 - INFO     -     - reward: 0.5744
2025-10-29 13:51:09,393 - INFO     -     - done: False
2025-10-29 13:51:09,393 - INFO     -     - truncated: False
2025-10-29 13:51:09,393 - INFO     -     - info: 19 keys
2025-10-29 13:51:09,393 - INFO     - ==========================================================================================

2025-10-29 13:51:09,398 - INFO     - 
==========================================================================================
2025-10-29 13:51:09,398 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:09,398 - INFO     - ==========================================================================================
2025-10-29 13:51:09,399 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:09,399 - INFO     -   Input action: 14 (type: int)
2025-10-29 13:51:09,399 - INFO     -   Available edges in graph: 18
2025-10-29 13:51:09,399 - INFO     -   Action index calculation:
2025-10-29 13:51:09,399 - INFO     -     - action % max(num_valid_edges, 1) = 14 % 18 = 14
2025-10-29 13:51:09,399 - INFO     -     - clamped to [0, 17]: 14
2025-10-29 13:51:09,399 - INFO     -   ✓ Extracted merge pair from edge 14: (12, 2)
2025-10-29 13:51:09,399 - INFO     -   ✓ Validation passed
2025-10-29 13:51:09,399 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:09,400 - INFO     -     - Total states before merge: 70
2025-10-29 13:51:09,400 - INFO     -     - Num nodes: 5
2025-10-29 13:51:09,401 - INFO     -     - Num edges: 18
2025-10-29 13:51:09,401 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:09,401 - INFO     -       - Node 12: 50 states
2025-10-29 13:51:09,401 - INFO     -       - Node 2: 2 states
2025-10-29 13:51:09,401 - INFO     -       - Expected product: 100 states
2025-10-29 13:51:09,401 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:09,410 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:51:09,410 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:09,410 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:51:09,511 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:09,511 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:09,511 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:51:09,513 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:09,513 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:09,513 - INFO     -   Calling graph_tracker.merge_nodes([12, 2])...
2025-10-29 13:51:09,513 - INFO     - Attempting merge of nodes 12 and 2...
2025-10-29 13:51:09,513 - INFO     - Successfully merged nodes into new node 13 with 100 states.
2025-10-29 13:51:09,513 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:09,513 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:09,513 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:51:09,513 - INFO     - 
================================================================================
2025-10-29 13:51:09,514 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:51:09,514 - INFO     - ================================================================================
2025-10-29 13:51:09,514 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:09,514 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:51:09,514 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:51:09,514 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:09,514 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:09,515 - INFO     -   - Raw ts1_f length: 50
2025-10-29 13:51:09,515 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:09,515 - INFO     -   - Raw f_after length: 100
2025-10-29 13:51:09,515 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:09,515 - INFO     -   - ts1_valid: 50 / 50 (removed 0)
2025-10-29 13:51:09,515 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:09,515 - INFO     -   - after_valid: 100 / 100 (removed 0)
2025-10-29 13:51:09,515 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:09,515 - INFO     -   - ts1_id: 12
2025-10-29 13:51:09,515 - INFO     -   - ts2_id: 2
2025-10-29 13:51:09,515 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:09,515 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:09,515 - INFO     -   - ts1_size: 50, ts2_size: 2
2025-10-29 13:51:09,515 - INFO     -   - Product space size: 100
2025-10-29 13:51:09,515 - INFO     -   - Using product state mapping
2025-10-29 13:51:09,516 - INFO     -   - f_before_product length: 100
2025-10-29 13:51:09,516 - INFO     -   - avg_f_before: 6.1400 (100 valid states)
2025-10-29 13:51:09,516 - INFO     -   - avg_f_after:  6.7600 (100 valid states)
2025-10-29 13:51:09,516 - INFO     -   - delta: 0.6200
2025-10-29 13:51:09,516 - INFO     -   - f_stability: 1.0 - |0.6200| / 6.1400 = 0.8990
2025-10-29 13:51:09,516 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:09,516 - INFO     -   - Compared 52 values
2025-10-29 13:51:09,516 - INFO     -   - Significant changes (> 5.0): 7
2025-10-29 13:51:09,516 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:09,516 - INFO     -   - states_before: 100
2025-10-29 13:51:09,517 - INFO     -   - states_after: 100
2025-10-29 13:51:09,517 - INFO     -   - delta_states: 0
2025-10-29 13:51:09,517 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:09,517 - INFO     -   - ts1_transitions: 275
2025-10-29 13:51:09,517 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:09,517 - INFO     -   - merged_transitions: 750
2025-10-29 13:51:09,517 - INFO     -   - transition_density_change: 4.7000
2025-10-29 13:51:09,517 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:09,517 - INFO     -   - search_signals present: True
2025-10-29 13:51:09,517 - INFO     -   - nodes_expanded: 100
2025-10-29 13:51:09,517 - INFO     -   - search_depth: 3
2025-10-29 13:51:09,517 - INFO     -   - solution_cost: 2
2025-10-29 13:51:09,517 - INFO     -   - branching_factor: 7.5000
2025-10-29 13:51:09,517 - INFO     -   - solution_found: True
2025-10-29 13:51:09,517 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:09,517 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:09,518 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:51:09,518 - INFO     -   - TS12(50) + TS2(2) → 100 states
2025-10-29 13:51:09,518 - INFO     -   - f_stability=0.899
2025-10-29 13:51:09,518 - INFO     -   - A* nodes_expanded=100
2025-10-29 13:51:09,518 - INFO     -   - solution_found=True
2025-10-29 13:51:09,518 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:09,518 - INFO     - 
  Extracted signals:
2025-10-29 13:51:09,518 - INFO     -     - iteration: 4
2025-10-29 13:51:09,518 - INFO     -     - states_before: 100
2025-10-29 13:51:09,518 - INFO     -     - states_after: 100
2025-10-29 13:51:09,518 - INFO     -     - delta_states: 0
2025-10-29 13:51:09,518 - INFO     -     - f_value_stability: 0.8990
2025-10-29 13:51:09,518 - INFO     -     - num_significant_f_changes: 7
2025-10-29 13:51:09,518 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:09,518 - INFO     -     - nodes_expanded: 100
2025-10-29 13:51:09,518 - INFO     -     - search_depth: 3
2025-10-29 13:51:09,518 - INFO     -     - solution_cost: 2
2025-10-29 13:51:09,518 - INFO     -     - branching_factor: 7.5000
2025-10-29 13:51:09,519 - INFO     -     - solution_found: True
2025-10-29 13:51:09,519 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:09,519 - INFO     - 
  Computing reward:
2025-10-29 13:51:09,519 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:09,519 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:09,519 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:09,519 - INFO     -   [1] BRANCHING FACTOR: 7.500 → score 0.150 (high BF, minimal credit)
2025-10-29 13:51:09,519 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:51:09,519 - INFO     -   [3] F-VALUE STABILITY: 0.865
2025-10-29 13:51:09,519 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:51:09,519 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:09,519 - INFO     - 
  [COMPOSITE]: 0.632
2025-10-29 13:51:09,519 - INFO     -     = 0.300*0.150 (bf)
2025-10-29 13:51:09,519 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:51:09,519 - INFO     -     + 0.350*0.865 (stability)
2025-10-29 13:51:09,519 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:09,519 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:09,519 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:09,519 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:51:09,519 - INFO     - 
  [FINAL REWARD]: 0.7647
2025-10-29 13:51:09,519 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:09,520 - INFO     -     ✓ Reward computed: 0.7647
2025-10-29 13:51:09,520 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:09,520 - INFO     -     - bf_score                       0.1500
2025-10-29 13:51:09,520 - INFO     -     - depth_score                    0.8237
2025-10-29 13:51:09,520 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:09,520 - INFO     -     - f_stability                    0.8646
2025-10-29 13:51:09,520 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:51:09,520 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:09,521 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:09,521 - INFO     -     - composite                      0.6323
2025-10-29 13:51:09,521 - INFO     -     - total                          0.7647
2025-10-29 13:51:09,521 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:09,521 - INFO     -   Num remaining nodes: 4
2025-10-29 13:51:09,521 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:51:09,521 - INFO     -   Done: False
2025-10-29 13:51:09,521 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:09,521 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:09,521 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:09,521 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:09,521 - INFO     -     - num_nodes: 4
2025-10-29 13:51:09,521 - INFO     -     - num_edges: 10
2025-10-29 13:51:09,521 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:09,521 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:51:09,522 - INFO     -   After: current_merge_step = 5
2025-10-29 13:51:09,522 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:09,522 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:09,522 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:09,522 - INFO     -   ✓ Step logged
2025-10-29 13:51:09,522 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:09,522 - INFO     -   Returning:
2025-10-29 13:51:09,522 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:09,522 - INFO     -     - reward: 0.7647
2025-10-29 13:51:09,523 - INFO     -     - done: False
2025-10-29 13:51:09,523 - INFO     -     - truncated: False
2025-10-29 13:51:09,523 - INFO     -     - info: 19 keys
2025-10-29 13:51:09,523 - INFO     - ==========================================================================================

2025-10-29 13:51:09,527 - INFO     - 
==========================================================================================
2025-10-29 13:51:09,527 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:09,527 - INFO     - ==========================================================================================
2025-10-29 13:51:09,527 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:09,527 - INFO     -   Input action: 7 (type: int)
2025-10-29 13:51:09,527 - INFO     -   Available edges in graph: 10
2025-10-29 13:51:09,527 - INFO     -   Action index calculation:
2025-10-29 13:51:09,527 - INFO     -     - action % max(num_valid_edges, 1) = 7 % 10 = 7
2025-10-29 13:51:09,527 - INFO     -     - clamped to [0, 9]: 7
2025-10-29 13:51:09,527 - INFO     -   ✓ Extracted merge pair from edge 7: (13, 10)
2025-10-29 13:51:09,527 - INFO     -   ✓ Validation passed
2025-10-29 13:51:09,527 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:09,527 - INFO     -     - Total states before merge: 118
2025-10-29 13:51:09,527 - INFO     -     - Num nodes: 4
2025-10-29 13:51:09,527 - INFO     -     - Num edges: 10
2025-10-29 13:51:09,528 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:09,528 - INFO     -       - Node 13: 100 states
2025-10-29 13:51:09,528 - INFO     -       - Node 10: 8 states
2025-10-29 13:51:09,528 - INFO     -       - Expected product: 800 states
2025-10-29 13:51:09,528 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:09,534 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:51:09,534 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:09,535 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:51:09,635 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:09,635 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:09,635 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:51:09,641 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:51:09,641 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:09,641 - INFO     -   Calling graph_tracker.merge_nodes([13, 10])...
2025-10-29 13:51:09,641 - INFO     - Attempting merge of nodes 13 and 10...
2025-10-29 13:51:09,641 - INFO     - Successfully merged nodes into new node 14 with 800 states.
2025-10-29 13:51:09,641 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:09,642 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:09,642 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:51:09,642 - INFO     - 
================================================================================
2025-10-29 13:51:09,642 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:51:09,642 - INFO     - ================================================================================
2025-10-29 13:51:09,642 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:09,642 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:51:09,642 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:51:09,643 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:09,643 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:09,643 - INFO     -   - Raw ts1_f length: 100
2025-10-29 13:51:09,643 - INFO     -   - Raw ts2_f length: 8
2025-10-29 13:51:09,643 - INFO     -   - Raw f_after length: 800
2025-10-29 13:51:09,643 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:09,643 - INFO     -   - ts1_valid: 100 / 100 (removed 0)
2025-10-29 13:51:09,643 - INFO     -   - ts2_valid: 8 / 8 (removed -8)
2025-10-29 13:51:09,644 - INFO     -   - after_valid: 680 / 800 (removed 120)
2025-10-29 13:51:09,644 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:09,644 - INFO     -   - ts1_id: 13
2025-10-29 13:51:09,644 - INFO     -   - ts2_id: 10
2025-10-29 13:51:09,644 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:09,644 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:09,644 - INFO     -   - ts1_size: 100, ts2_size: 8
2025-10-29 13:51:09,644 - INFO     -   - Product space size: 800
2025-10-29 13:51:09,644 - INFO     -   - Using product state mapping
2025-10-29 13:51:09,645 - INFO     -   - f_before_product length: 800
2025-10-29 13:51:09,647 - INFO     -   - avg_f_before: 6.7600 (800 valid states)
2025-10-29 13:51:09,647 - INFO     -   - avg_f_after:  9.0721 (680 valid states)
2025-10-29 13:51:09,647 - INFO     -   - delta: 2.3121
2025-10-29 13:51:09,647 - INFO     -   - f_stability: 1.0 - |2.3121| / 6.7600 = 0.6580
2025-10-29 13:51:09,648 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:09,648 - INFO     -   - Compared 108 values
2025-10-29 13:51:09,648 - INFO     -   - Significant changes (> 5.0): 27
2025-10-29 13:51:09,648 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:09,648 - INFO     -   - states_before: 800
2025-10-29 13:51:09,648 - INFO     -   - states_after: 800
2025-10-29 13:51:09,648 - INFO     -   - delta_states: 0
2025-10-29 13:51:09,648 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:09,648 - INFO     -   - ts1_transitions: 750
2025-10-29 13:51:09,648 - INFO     -   - ts2_transitions: 60
2025-10-29 13:51:09,648 - INFO     -   - merged_transitions: 6720
2025-10-29 13:51:09,648 - INFO     -   - transition_density_change: 7.3875
2025-10-29 13:51:09,649 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:09,649 - INFO     -   - search_signals present: True
2025-10-29 13:51:09,649 - INFO     -   - nodes_expanded: 680
2025-10-29 13:51:09,649 - INFO     -   - search_depth: 4
2025-10-29 13:51:09,649 - INFO     -   - solution_cost: 2
2025-10-29 13:51:09,649 - INFO     -   - branching_factor: 9.8824
2025-10-29 13:51:09,649 - INFO     -   - solution_found: True
2025-10-29 13:51:09,649 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:09,650 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:09,650 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:51:09,650 - INFO     -   - TS13(100) + TS10(8) → 800 states
2025-10-29 13:51:09,650 - INFO     -   - f_stability=0.658
2025-10-29 13:51:09,650 - INFO     -   - A* nodes_expanded=680
2025-10-29 13:51:09,650 - INFO     -   - solution_found=True
2025-10-29 13:51:09,650 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:09,650 - INFO     - 
  Extracted signals:
2025-10-29 13:51:09,650 - INFO     -     - iteration: 5
2025-10-29 13:51:09,650 - INFO     -     - states_before: 800
2025-10-29 13:51:09,650 - INFO     -     - states_after: 800
2025-10-29 13:51:09,650 - INFO     -     - delta_states: 0
2025-10-29 13:51:09,650 - INFO     -     - f_value_stability: 0.6580
2025-10-29 13:51:09,650 - INFO     -     - num_significant_f_changes: 27
2025-10-29 13:51:09,650 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:09,651 - INFO     -     - nodes_expanded: 680
2025-10-29 13:51:09,651 - INFO     -     - search_depth: 4
2025-10-29 13:51:09,651 - INFO     -     - solution_cost: 2
2025-10-29 13:51:09,651 - INFO     -     - branching_factor: 9.8824
2025-10-29 13:51:09,651 - INFO     -     - solution_found: True
2025-10-29 13:51:09,651 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:09,651 - WARNING  -     ⚠️  High branching factor: 9.8824
2025-10-29 13:51:09,651 - INFO     - 
  Computing reward:
2025-10-29 13:51:09,651 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:09,651 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:09,651 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:09,651 - INFO     -   [1] BRANCHING FACTOR: 9.882 → score 0.100 (high BF, minimal credit)
2025-10-29 13:51:09,651 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:51:09,653 - INFO     -   [3] F-VALUE STABILITY: 0.767
2025-10-29 13:51:09,653 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:51:09,653 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:09,653 - INFO     - 
  [COMPOSITE]: 0.578
2025-10-29 13:51:09,653 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:51:09,653 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:51:09,653 - INFO     -     + 0.350*0.767 (stability)
2025-10-29 13:51:09,653 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:09,653 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:09,653 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:09,654 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:51:09,654 - INFO     - 
  [FINAL REWARD]: 0.6550
2025-10-29 13:51:09,654 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:09,654 - INFO     -     ✓ Reward computed: 0.6550
2025-10-29 13:51:09,654 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:09,654 - INFO     -     - bf_score                       0.1000
2025-10-29 13:51:09,654 - INFO     -     - depth_score                    0.7953
2025-10-29 13:51:09,654 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:09,654 - INFO     -     - f_stability                    0.7670
2025-10-29 13:51:09,654 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:51:09,654 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:09,654 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:09,654 - INFO     -     - composite                      0.5775
2025-10-29 13:51:09,654 - INFO     -     - total                          0.6550
2025-10-29 13:51:09,654 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:09,654 - INFO     -   Num remaining nodes: 3
2025-10-29 13:51:09,654 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:51:09,654 - INFO     -   Done: False
2025-10-29 13:51:09,655 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:09,655 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:09,655 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:09,655 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:09,655 - INFO     -     - num_nodes: 3
2025-10-29 13:51:09,655 - INFO     -     - num_edges: 4
2025-10-29 13:51:09,655 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:09,655 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:51:09,655 - INFO     -   After: current_merge_step = 6
2025-10-29 13:51:09,655 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:09,656 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:09,656 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:09,656 - INFO     -   ✓ Step logged
2025-10-29 13:51:09,656 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:09,656 - INFO     -   Returning:
2025-10-29 13:51:09,656 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:09,656 - INFO     -     - reward: 0.6550
2025-10-29 13:51:09,657 - INFO     -     - done: False
2025-10-29 13:51:09,657 - INFO     -     - truncated: False
2025-10-29 13:51:09,657 - INFO     -     - info: 19 keys
2025-10-29 13:51:09,657 - INFO     - ==========================================================================================

2025-10-29 13:51:09,661 - INFO     - 
==========================================================================================
2025-10-29 13:51:09,661 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:09,661 - INFO     - ==========================================================================================
2025-10-29 13:51:09,661 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:09,661 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:51:09,661 - INFO     -   Available edges in graph: 4
2025-10-29 13:51:09,661 - INFO     -   Action index calculation:
2025-10-29 13:51:09,661 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 4 = 0
2025-10-29 13:51:09,661 - INFO     -     - clamped to [0, 3]: 0
2025-10-29 13:51:09,661 - INFO     -   ✓ Extracted merge pair from edge 0: (5, 14)
2025-10-29 13:51:09,661 - INFO     -   ✓ Validation passed
2025-10-29 13:51:09,661 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:09,662 - INFO     -     - Total states before merge: 810
2025-10-29 13:51:09,662 - INFO     -     - Num nodes: 3
2025-10-29 13:51:09,662 - INFO     -     - Num edges: 4
2025-10-29 13:51:09,662 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:09,662 - INFO     -       - Node 5: 5 states
2025-10-29 13:51:09,662 - INFO     -       - Node 14: 800 states
2025-10-29 13:51:09,662 - INFO     -       - Expected product: 4000 states
2025-10-29 13:51:09,662 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:09,668 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:51:09,669 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:09,669 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:51:09,770 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:09,770 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:09,770 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:51:09,786 - INFO     -   ✓ TS file received after 0.02s
2025-10-29 13:51:09,786 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:09,786 - INFO     -   Calling graph_tracker.merge_nodes([5, 14])...
2025-10-29 13:51:09,786 - INFO     - Attempting merge of nodes 5 and 14...
2025-10-29 13:51:09,786 - INFO     - Successfully merged nodes into new node 15 with 4000 states.
2025-10-29 13:51:09,786 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:09,786 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:09,786 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:51:09,786 - INFO     - 
================================================================================
2025-10-29 13:51:09,787 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:51:09,787 - INFO     - ================================================================================
2025-10-29 13:51:09,787 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:09,787 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:51:09,787 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:51:09,790 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:09,790 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:09,790 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:09,790 - INFO     -   - Raw ts2_f length: 680
2025-10-29 13:51:09,790 - INFO     -   - Raw f_after length: 3400
2025-10-29 13:51:09,791 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:09,791 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:09,791 - INFO     -   - ts2_valid: 680 / 680 (removed -680)
2025-10-29 13:51:09,793 - INFO     -   - after_valid: 2984 / 3400 (removed 416)
2025-10-29 13:51:09,793 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:09,793 - INFO     -   - ts1_id: 5
2025-10-29 13:51:09,793 - INFO     -   - ts2_id: 14
2025-10-29 13:51:09,793 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:09,793 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:09,793 - INFO     -   - ts1_size: 5, ts2_size: 680
2025-10-29 13:51:09,793 - INFO     -   - Product space size: 3400
2025-10-29 13:51:09,793 - INFO     -   - Using product state mapping
2025-10-29 13:51:09,801 - INFO     -   - f_before_product length: 3400
2025-10-29 13:51:09,812 - INFO     -   - avg_f_before: 9.0850 (3400 valid states)
2025-10-29 13:51:09,812 - INFO     -   - avg_f_after:  13.3747 (2984 valid states)
2025-10-29 13:51:09,812 - INFO     -   - delta: 4.2897
2025-10-29 13:51:09,813 - INFO     -   - f_stability: 1.0 - |4.2897| / 9.0850 = 0.5278
2025-10-29 13:51:09,813 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:09,813 - INFO     -   - Compared 685 values
2025-10-29 13:51:09,813 - INFO     -   - Significant changes (> 5.0): 224
2025-10-29 13:51:09,813 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:09,813 - INFO     -   - states_before: 3400
2025-10-29 13:51:09,813 - INFO     -   - states_after: 3400
2025-10-29 13:51:09,813 - INFO     -   - delta_states: 0
2025-10-29 13:51:09,813 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:09,813 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:09,813 - INFO     -   - ts2_transitions: 6002
2025-10-29 13:51:09,814 - INFO     -   - merged_transitions: 20046
2025-10-29 13:51:09,814 - INFO     -   - transition_density_change: 4.1268
2025-10-29 13:51:09,814 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:09,814 - INFO     -   - search_signals present: True
2025-10-29 13:51:09,814 - INFO     -   - nodes_expanded: 2984
2025-10-29 13:51:09,814 - INFO     -   - search_depth: 6
2025-10-29 13:51:09,814 - INFO     -   - solution_cost: 4
2025-10-29 13:51:09,814 - INFO     -   - branching_factor: 6.7178
2025-10-29 13:51:09,814 - INFO     -   - solution_found: True
2025-10-29 13:51:09,814 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:09,817 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:09,817 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:51:09,817 - INFO     -   - TS5(5) + TS14(680) → 3400 states
2025-10-29 13:51:09,817 - INFO     -   - f_stability=0.528
2025-10-29 13:51:09,818 - INFO     -   - A* nodes_expanded=2984
2025-10-29 13:51:09,818 - INFO     -   - solution_found=True
2025-10-29 13:51:09,818 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:09,818 - INFO     - 
  Extracted signals:
2025-10-29 13:51:09,818 - INFO     -     - iteration: 6
2025-10-29 13:51:09,818 - INFO     -     - states_before: 3400
2025-10-29 13:51:09,818 - INFO     -     - states_after: 3400
2025-10-29 13:51:09,818 - INFO     -     - delta_states: 0
2025-10-29 13:51:09,819 - INFO     -     - f_value_stability: 0.5278
2025-10-29 13:51:09,819 - INFO     -     - num_significant_f_changes: 224
2025-10-29 13:51:09,819 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:09,819 - INFO     -     - nodes_expanded: 2984
2025-10-29 13:51:09,819 - INFO     -     - search_depth: 6
2025-10-29 13:51:09,819 - INFO     -     - solution_cost: 4
2025-10-29 13:51:09,819 - INFO     -     - branching_factor: 6.7178
2025-10-29 13:51:09,819 - INFO     -     - solution_found: True
2025-10-29 13:51:09,819 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:09,819 - INFO     - 
  Computing reward:
2025-10-29 13:51:09,820 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:09,820 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:09,820 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:09,820 - INFO     -   [1] BRANCHING FACTOR: 6.718 → score 0.228 (high BF, minimal credit)
2025-10-29 13:51:09,820 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:51:09,823 - INFO     -   [3] F-VALUE STABILITY: 0.654
2025-10-29 13:51:09,823 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:09,823 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:09,823 - INFO     - 
  [COMPOSITE]: 0.568
2025-10-29 13:51:09,823 - INFO     -     = 0.300*0.228 (bf)
2025-10-29 13:51:09,823 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:51:09,823 - INFO     -     + 0.350*0.654 (stability)
2025-10-29 13:51:09,823 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:09,823 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:09,823 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:09,823 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:09,824 - INFO     - 
  [FINAL REWARD]: 0.5360
2025-10-29 13:51:09,825 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:09,825 - INFO     -     ✓ Reward computed: 0.5360
2025-10-29 13:51:09,825 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:09,825 - INFO     -     - bf_score                       0.2282
2025-10-29 13:51:09,825 - INFO     -     - depth_score                    0.7525
2025-10-29 13:51:09,825 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:09,825 - INFO     -     - f_stability                    0.6544
2025-10-29 13:51:09,825 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:09,825 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:09,825 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:09,826 - INFO     -     - composite                      0.5680
2025-10-29 13:51:09,826 - INFO     -     - total                          0.5360
2025-10-29 13:51:09,826 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:09,826 - INFO     -   Num remaining nodes: 2
2025-10-29 13:51:09,826 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:51:09,826 - INFO     -   Done: False
2025-10-29 13:51:09,826 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:09,827 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:09,827 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:09,827 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:09,827 - INFO     -     - num_nodes: 2
2025-10-29 13:51:09,827 - INFO     -     - num_edges: 2
2025-10-29 13:51:09,827 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:09,827 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:51:09,827 - INFO     -   After: current_merge_step = 7
2025-10-29 13:51:09,827 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:09,827 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:09,827 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:09,828 - INFO     -   ✓ Step logged
2025-10-29 13:51:09,828 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:09,828 - INFO     -   Returning:
2025-10-29 13:51:09,828 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:09,829 - INFO     -     - reward: 0.5360
2025-10-29 13:51:09,829 - INFO     -     - done: False
2025-10-29 13:51:09,829 - INFO     -     - truncated: False
2025-10-29 13:51:09,829 - INFO     -     - info: 19 keys
2025-10-29 13:51:09,829 - INFO     - ==========================================================================================

2025-10-29 13:51:09,836 - INFO     - 
==========================================================================================
2025-10-29 13:51:09,836 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:09,836 - INFO     - ==========================================================================================
2025-10-29 13:51:09,836 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:09,836 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:51:09,836 - INFO     -   Available edges in graph: 2
2025-10-29 13:51:09,837 - INFO     -   Action index calculation:
2025-10-29 13:51:09,837 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 2 = 1
2025-10-29 13:51:09,837 - INFO     -     - clamped to [0, 1]: 1
2025-10-29 13:51:09,837 - INFO     -   ✓ Extracted merge pair from edge 1: (15, 8)
2025-10-29 13:51:09,837 - INFO     -   ✓ Validation passed
2025-10-29 13:51:09,837 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:09,837 - INFO     -     - Total states before merge: 4005
2025-10-29 13:51:09,837 - INFO     -     - Num nodes: 2
2025-10-29 13:51:09,838 - INFO     -     - Num edges: 2
2025-10-29 13:51:09,838 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:09,838 - INFO     -       - Node 15: 4000 states
2025-10-29 13:51:09,838 - INFO     -       - Node 8: 5 states
2025-10-29 13:51:09,838 - INFO     -       - Expected product: 20000 states
2025-10-29 13:51:09,838 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:09,849 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:51:09,849 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:09,849 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:51:09,950 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:09,950 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:09,950 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:51:10,173 - INFO     -   ✓ TS file received after 0.22s
2025-10-29 13:51:10,173 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:10,173 - INFO     -   Calling graph_tracker.merge_nodes([15, 8])...
2025-10-29 13:51:10,173 - INFO     - Attempting merge of nodes 15 and 8...
2025-10-29 13:51:10,174 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:51:10,174 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:10,174 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:10,174 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:51:10,174 - INFO     - 
================================================================================
2025-10-29 13:51:10,174 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:51:10,174 - INFO     - ================================================================================
2025-10-29 13:51:10,174 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:10,174 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:51:10,174 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:51:10,178 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:10,178 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:10,178 - INFO     -   - Raw ts1_f length: 668
2025-10-29 13:51:10,178 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:51:10,178 - INFO     -   - Raw f_after length: 3340
2025-10-29 13:51:10,178 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:10,179 - INFO     -   - ts1_valid: 668 / 668 (removed 0)
2025-10-29 13:51:10,179 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:51:10,179 - INFO     -   - after_valid: 2749 / 3340 (removed 591)
2025-10-29 13:51:10,179 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:10,179 - INFO     -   - ts1_id: 15
2025-10-29 13:51:10,179 - INFO     -   - ts2_id: 8
2025-10-29 13:51:10,180 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:10,180 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:10,180 - INFO     -   - ts1_size: 668, ts2_size: 5
2025-10-29 13:51:10,180 - INFO     -   - Product space size: 3340
2025-10-29 13:51:10,180 - INFO     -   - Using product state mapping
2025-10-29 13:51:10,184 - INFO     -   - f_before_product length: 3340
2025-10-29 13:51:10,190 - INFO     -   - avg_f_before: 8.1722 (3340 valid states)
2025-10-29 13:51:10,191 - INFO     -   - avg_f_after:  12.2346 (2749 valid states)
2025-10-29 13:51:10,191 - INFO     -   - delta: 4.0625
2025-10-29 13:51:10,191 - INFO     -   - f_stability: 1.0 - |4.0625| / 8.1722 = 0.5029
2025-10-29 13:51:10,191 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:10,191 - INFO     -   - Compared 673 values
2025-10-29 13:51:10,191 - INFO     -   - Significant changes (> 5.0): 108
2025-10-29 13:51:10,191 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:10,191 - INFO     -   - states_before: 3340
2025-10-29 13:51:10,191 - INFO     -   - states_after: 3340
2025-10-29 13:51:10,191 - INFO     -   - delta_states: 0
2025-10-29 13:51:10,191 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:10,191 - INFO     -   - ts1_transitions: 6703
2025-10-29 13:51:10,191 - INFO     -   - ts2_transitions: 13
2025-10-29 13:51:10,191 - INFO     -   - merged_transitions: 19291
2025-10-29 13:51:10,191 - INFO     -   - transition_density_change: 3.7650
2025-10-29 13:51:10,191 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:10,192 - INFO     -   - search_signals present: True
2025-10-29 13:51:10,192 - INFO     -   - nodes_expanded: 2749
2025-10-29 13:51:10,192 - INFO     -   - search_depth: 6
2025-10-29 13:51:10,192 - INFO     -   - solution_cost: 4
2025-10-29 13:51:10,192 - INFO     -   - branching_factor: 7.0175
2025-10-29 13:51:10,192 - INFO     -   - solution_found: True
2025-10-29 13:51:10,192 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:10,194 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:10,194 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:51:10,194 - INFO     -   - TS15(668) + TS8(5) → 3340 states
2025-10-29 13:51:10,194 - INFO     -   - f_stability=0.503
2025-10-29 13:51:10,194 - INFO     -   - A* nodes_expanded=2749
2025-10-29 13:51:10,194 - INFO     -   - solution_found=True
2025-10-29 13:51:10,194 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:10,194 - INFO     - 
  Extracted signals:
2025-10-29 13:51:10,194 - INFO     -     - iteration: 7
2025-10-29 13:51:10,194 - INFO     -     - states_before: 3340
2025-10-29 13:51:10,194 - INFO     -     - states_after: 3340
2025-10-29 13:51:10,194 - INFO     -     - delta_states: 0
2025-10-29 13:51:10,194 - INFO     -     - f_value_stability: 0.5029
2025-10-29 13:51:10,195 - INFO     -     - num_significant_f_changes: 108
2025-10-29 13:51:10,195 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:10,195 - INFO     -     - nodes_expanded: 2749
2025-10-29 13:51:10,195 - INFO     -     - search_depth: 6
2025-10-29 13:51:10,195 - INFO     -     - solution_cost: 4
2025-10-29 13:51:10,195 - INFO     -     - branching_factor: 7.0175
2025-10-29 13:51:10,195 - INFO     -     - solution_found: True
2025-10-29 13:51:10,195 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:10,195 - INFO     - 
  Computing reward:
2025-10-29 13:51:10,195 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:10,195 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:10,196 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:10,196 - INFO     -   [1] BRANCHING FACTOR: 7.017 → score 0.198 (high BF, minimal credit)
2025-10-29 13:51:10,196 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:51:10,197 - INFO     -   [3] F-VALUE STABILITY: 0.604
2025-10-29 13:51:10,197 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:10,197 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:10,197 - INFO     - 
  [COMPOSITE]: 0.541
2025-10-29 13:51:10,197 - INFO     -     = 0.300*0.198 (bf)
2025-10-29 13:51:10,197 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:51:10,197 - INFO     -     + 0.350*0.604 (stability)
2025-10-29 13:51:10,197 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:10,197 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:10,197 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:10,197 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:10,198 - INFO     - 
  [FINAL REWARD]: 0.4828
2025-10-29 13:51:10,198 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:10,198 - INFO     -     ✓ Reward computed: 0.4828
2025-10-29 13:51:10,198 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:10,198 - INFO     -     - bf_score                       0.1983
2025-10-29 13:51:10,198 - INFO     -     - depth_score                    0.7525
2025-10-29 13:51:10,198 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:10,198 - INFO     -     - f_stability                    0.6040
2025-10-29 13:51:10,198 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:10,198 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:10,198 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:10,198 - INFO     -     - composite                      0.5414
2025-10-29 13:51:10,198 - INFO     -     - total                          0.4828
2025-10-29 13:51:10,198 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:10,198 - INFO     -   Num remaining nodes: 1
2025-10-29 13:51:10,198 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:51:10,199 - INFO     -   Done: True
2025-10-29 13:51:10,199 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:51:10,199 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:10,199 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:10,199 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:10,199 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:10,199 - INFO     -     - num_nodes: 1
2025-10-29 13:51:10,199 - INFO     -     - num_edges: 0
2025-10-29 13:51:10,199 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:10,199 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:51:10,199 - INFO     -   After: current_merge_step = 8
2025-10-29 13:51:10,199 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:10,199 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:10,199 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:10,200 - INFO     -   ✓ Step logged
2025-10-29 13:51:10,200 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:10,200 - INFO     -   Returning:
2025-10-29 13:51:10,200 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:10,200 - INFO     -     - reward: 0.4828
2025-10-29 13:51:10,200 - INFO     -     - done: True
2025-10-29 13:51:10,200 - INFO     -     - truncated: False
2025-10-29 13:51:10,200 - INFO     -     - info: 19 keys
2025-10-29 13:51:10,200 - INFO     - ==========================================================================================

2025-10-29 13:51:10,285 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:51:10,294 - INFO     - [Handshake] Building FD command:
2025-10-29 13:51:10,295 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:51:10,295 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_00.pddl
2025-10-29 13:51:10,295 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:51:10,298 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:51:11,052 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:51:11,052 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:51:11,052 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:51:11,365 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:51:11,365 - INFO     - Initializing GraphTracker...
2025-10-29 13:51:11,365 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:51:11,365 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:51:11,366 - INFO     -    → Node 0 has 2 states
2025-10-29 13:51:11,366 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:51:11,366 - INFO     -    → Node 1 has 2 states
2025-10-29 13:51:11,366 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:51:11,366 - INFO     -    → Node 2 has 2 states
2025-10-29 13:51:11,366 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:51:11,366 - INFO     -    → Node 3 has 2 states
2025-10-29 13:51:11,366 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:51:11,366 - INFO     -    → Node 4 has 2 states
2025-10-29 13:51:11,366 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:51:11,366 - INFO     -    → Node 5 has 5 states
2025-10-29 13:51:11,366 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:51:11,366 - INFO     -    → Node 6 has 5 states
2025-10-29 13:51:11,366 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:51:11,366 - INFO     -    → Node 7 has 5 states
2025-10-29 13:51:11,366 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:51:11,366 - INFO     -    → Node 8 has 5 states
2025-10-29 13:51:11,366 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:51:11,367 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:51:11,367 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:51:11,368 - INFO     - Added edge (0, 1)
2025-10-29 13:51:11,368 - INFO     - Added edge (0, 2)
2025-10-29 13:51:11,368 - INFO     - Added edge (0, 3)
2025-10-29 13:51:11,368 - INFO     - Added edge (0, 4)
2025-10-29 13:51:11,368 - INFO     - Added edge (0, 5)
2025-10-29 13:51:11,368 - INFO     - Added edge (0, 6)
2025-10-29 13:51:11,368 - INFO     - Added edge (0, 7)
2025-10-29 13:51:11,368 - INFO     - Added edge (0, 8)
2025-10-29 13:51:11,368 - INFO     - Added edge (1, 0)
2025-10-29 13:51:11,368 - INFO     - Added edge (1, 2)
2025-10-29 13:51:11,368 - INFO     - Added edge (1, 3)
2025-10-29 13:51:11,368 - INFO     - Added edge (1, 4)
2025-10-29 13:51:11,368 - INFO     - Added edge (1, 5)
2025-10-29 13:51:11,368 - INFO     - Added edge (1, 6)
2025-10-29 13:51:11,368 - INFO     - Added edge (1, 7)
2025-10-29 13:51:11,368 - INFO     - Added edge (1, 8)
2025-10-29 13:51:11,368 - INFO     - Added edge (2, 0)
2025-10-29 13:51:11,368 - INFO     - Added edge (2, 1)
2025-10-29 13:51:11,368 - INFO     - Added edge (2, 3)
2025-10-29 13:51:11,368 - INFO     - Added edge (2, 4)
2025-10-29 13:51:11,368 - INFO     - Added edge (2, 5)
2025-10-29 13:51:11,368 - INFO     - Added edge (2, 6)
2025-10-29 13:51:11,370 - INFO     - Added edge (2, 7)
2025-10-29 13:51:11,370 - INFO     - Added edge (2, 8)
2025-10-29 13:51:11,370 - INFO     - Added edge (3, 0)
2025-10-29 13:51:11,370 - INFO     - Added edge (3, 1)
2025-10-29 13:51:11,370 - INFO     - Added edge (3, 2)
2025-10-29 13:51:11,370 - INFO     - Added edge (3, 4)
2025-10-29 13:51:11,370 - INFO     - Added edge (3, 5)
2025-10-29 13:51:11,370 - INFO     - Added edge (3, 6)
2025-10-29 13:51:11,370 - INFO     - Added edge (3, 7)
2025-10-29 13:51:11,370 - INFO     - Added edge (3, 8)
2025-10-29 13:51:11,370 - INFO     - Added edge (4, 0)
2025-10-29 13:51:11,370 - INFO     - Added edge (4, 1)
2025-10-29 13:51:11,370 - INFO     - Added edge (4, 2)
2025-10-29 13:51:11,370 - INFO     - Added edge (4, 3)
2025-10-29 13:51:11,370 - INFO     - Added edge (4, 5)
2025-10-29 13:51:11,370 - INFO     - Added edge (4, 6)
2025-10-29 13:51:11,370 - INFO     - Added edge (4, 7)
2025-10-29 13:51:11,370 - INFO     - Added edge (4, 8)
2025-10-29 13:51:11,370 - INFO     - Added edge (5, 0)
2025-10-29 13:51:11,370 - INFO     - Added edge (5, 1)
2025-10-29 13:51:11,370 - INFO     - Added edge (5, 2)
2025-10-29 13:51:11,371 - INFO     - Added edge (5, 3)
2025-10-29 13:51:11,371 - INFO     - Added edge (5, 4)
2025-10-29 13:51:11,371 - INFO     - Added edge (6, 0)
2025-10-29 13:51:11,371 - INFO     - Added edge (6, 1)
2025-10-29 13:51:11,371 - INFO     - Added edge (6, 2)
2025-10-29 13:51:11,371 - INFO     - Added edge (6, 3)
2025-10-29 13:51:11,371 - INFO     - Added edge (6, 4)
2025-10-29 13:51:11,371 - INFO     - Added edge (7, 0)
2025-10-29 13:51:11,371 - INFO     - Added edge (7, 1)
2025-10-29 13:51:11,371 - INFO     - Added edge (7, 2)
2025-10-29 13:51:11,371 - INFO     - Added edge (7, 3)
2025-10-29 13:51:11,371 - INFO     - Added edge (7, 4)
2025-10-29 13:51:11,371 - INFO     - Added edge (8, 0)
2025-10-29 13:51:11,371 - INFO     - Added edge (8, 1)
2025-10-29 13:51:11,371 - INFO     - Added edge (8, 2)
2025-10-29 13:51:11,371 - INFO     - Added edge (8, 3)
2025-10-29 13:51:11,371 - INFO     - Added edge (8, 4)
2025-10-29 13:51:11,371 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:51:11,377 - INFO     - 
==========================================================================================
2025-10-29 13:51:11,377 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:11,377 - INFO     - ==========================================================================================
2025-10-29 13:51:11,378 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:11,378 - INFO     -   Input action: 10 (type: int)
2025-10-29 13:51:11,378 - INFO     -   Available edges in graph: 60
2025-10-29 13:51:11,378 - INFO     -   Action index calculation:
2025-10-29 13:51:11,378 - INFO     -     - action % max(num_valid_edges, 1) = 10 % 60 = 10
2025-10-29 13:51:11,378 - INFO     -     - clamped to [0, 59]: 10
2025-10-29 13:51:11,378 - INFO     -   ✓ Extracted merge pair from edge 10: (1, 3)
2025-10-29 13:51:11,378 - INFO     -   ✓ Validation passed
2025-10-29 13:51:11,378 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:11,378 - INFO     -     - Total states before merge: 30
2025-10-29 13:51:11,378 - INFO     -     - Num nodes: 9
2025-10-29 13:51:11,379 - INFO     -     - Num edges: 60
2025-10-29 13:51:11,379 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:11,379 - INFO     -       - Node 1: 2 states
2025-10-29 13:51:11,379 - INFO     -       - Node 3: 2 states
2025-10-29 13:51:11,379 - INFO     -       - Expected product: 4 states
2025-10-29 13:51:11,379 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:11,388 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:51:11,388 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:11,388 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:51:11,489 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:11,489 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:11,489 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:51:11,489 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:11,489 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:11,490 - INFO     -   Calling graph_tracker.merge_nodes([1, 3])...
2025-10-29 13:51:11,490 - INFO     - Attempting merge of nodes 1 and 3...
2025-10-29 13:51:11,490 - INFO     - Successfully merged nodes into new node 9 with 4 states.
2025-10-29 13:51:11,490 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:11,490 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:11,490 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:51:11,490 - INFO     - 
================================================================================
2025-10-29 13:51:11,490 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:51:11,490 - INFO     - ================================================================================
2025-10-29 13:51:11,490 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:11,490 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:51:11,490 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:51:11,491 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:11,491 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:11,491 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:11,491 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:11,491 - INFO     -   - Raw f_after length: 4
2025-10-29 13:51:11,491 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:11,491 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:11,491 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:11,491 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:51:11,491 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:11,491 - INFO     -   - ts1_id: 1
2025-10-29 13:51:11,491 - INFO     -   - ts2_id: 3
2025-10-29 13:51:11,491 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:11,491 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:11,492 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:51:11,492 - INFO     -   - Product space size: 4
2025-10-29 13:51:11,492 - INFO     -   - Using product state mapping
2025-10-29 13:51:11,492 - INFO     -   - f_before_product length: 4
2025-10-29 13:51:11,492 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:51:11,492 - INFO     -   - avg_f_after:  1.0000 (4 valid states)
2025-10-29 13:51:11,492 - INFO     -   - delta: 0.2500
2025-10-29 13:51:11,492 - INFO     -   - f_stability: 1.0 - |0.2500| / 0.7500 = 0.6667
2025-10-29 13:51:11,492 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:11,492 - INFO     -   - Compared 4 values
2025-10-29 13:51:11,492 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:11,492 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:11,492 - INFO     -   - states_before: 4
2025-10-29 13:51:11,492 - INFO     -   - states_after: 4
2025-10-29 13:51:11,492 - INFO     -   - delta_states: 0
2025-10-29 13:51:11,493 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:11,493 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:11,493 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:11,493 - INFO     -   - merged_transitions: 20
2025-10-29 13:51:11,493 - INFO     -   - transition_density_change: 2.5000
2025-10-29 13:51:11,493 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:11,493 - INFO     -   - search_signals present: True
2025-10-29 13:51:11,493 - INFO     -   - nodes_expanded: 4
2025-10-29 13:51:11,493 - INFO     -   - search_depth: 0
2025-10-29 13:51:11,493 - INFO     -   - solution_cost: 0
2025-10-29 13:51:11,493 - INFO     -   - branching_factor: 5.0000
2025-10-29 13:51:11,493 - INFO     -   - solution_found: True
2025-10-29 13:51:11,493 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:11,493 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:11,493 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:51:11,494 - INFO     -   - TS1(2) + TS3(2) → 4 states
2025-10-29 13:51:11,494 - INFO     -   - f_stability=0.667
2025-10-29 13:51:11,494 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:51:11,494 - INFO     -   - solution_found=True
2025-10-29 13:51:11,494 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:11,494 - INFO     - 
  Extracted signals:
2025-10-29 13:51:11,494 - INFO     -     - iteration: 0
2025-10-29 13:51:11,494 - INFO     -     - states_before: 4
2025-10-29 13:51:11,494 - INFO     -     - states_after: 4
2025-10-29 13:51:11,494 - INFO     -     - delta_states: 0
2025-10-29 13:51:11,494 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:51:11,494 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:11,494 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:11,494 - INFO     -     - nodes_expanded: 4
2025-10-29 13:51:11,494 - INFO     -     - search_depth: 0
2025-10-29 13:51:11,494 - INFO     -     - solution_cost: 0
2025-10-29 13:51:11,494 - INFO     -     - branching_factor: 5.0000
2025-10-29 13:51:11,495 - INFO     -     - solution_found: True
2025-10-29 13:51:11,495 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:11,495 - INFO     - 
  Computing reward:
2025-10-29 13:51:11,495 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:11,495 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:11,495 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:11,495 - INFO     -   [1] BRANCHING FACTOR: 5.000 → score 0.433 (tolerable)
2025-10-29 13:51:11,495 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:51:11,495 - INFO     -   [3] F-VALUE STABILITY: 0.176
2025-10-29 13:51:11,495 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:11,495 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:11,495 - INFO     - 
  [COMPOSITE]: 0.412
2025-10-29 13:51:11,496 - INFO     -     = 0.300*0.433 (bf)
2025-10-29 13:51:11,496 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:51:11,496 - INFO     -     + 0.350*0.176 (stability)
2025-10-29 13:51:11,496 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:11,496 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:11,496 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:11,496 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:11,496 - INFO     - 
  [FINAL REWARD]: 0.0230
2025-10-29 13:51:11,496 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:11,496 - INFO     -     ✓ Reward computed: 0.0230
2025-10-29 13:51:11,496 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:11,496 - INFO     -     - bf_score                       0.4333
2025-10-29 13:51:11,496 - INFO     -     - depth_score                    0.5000
2025-10-29 13:51:11,496 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:11,496 - INFO     -     - f_stability                    0.1757
2025-10-29 13:51:11,496 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:11,496 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:11,497 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:11,497 - INFO     -     - composite                      0.4115
2025-10-29 13:51:11,497 - INFO     -     - total                          0.0230
2025-10-29 13:51:11,497 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:11,497 - INFO     -   Num remaining nodes: 8
2025-10-29 13:51:11,497 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:51:11,497 - INFO     -   Done: False
2025-10-29 13:51:11,497 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:11,498 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:11,498 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:11,499 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:11,499 - INFO     -     - num_nodes: 8
2025-10-29 13:51:11,499 - INFO     -     - num_edges: 44
2025-10-29 13:51:11,499 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:11,499 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:51:11,499 - INFO     -   After: current_merge_step = 1
2025-10-29 13:51:11,499 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:11,499 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:11,499 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:11,500 - INFO     -   ✓ Step logged
2025-10-29 13:51:11,500 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:11,500 - INFO     -   Returning:
2025-10-29 13:51:11,500 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:11,500 - INFO     -     - reward: 0.0230
2025-10-29 13:51:11,500 - INFO     -     - done: False
2025-10-29 13:51:11,500 - INFO     -     - truncated: False
2025-10-29 13:51:11,500 - INFO     -     - info: 19 keys
2025-10-29 13:51:11,500 - INFO     - ==========================================================================================

2025-10-29 13:51:11,505 - INFO     - 
==========================================================================================
2025-10-29 13:51:11,505 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:11,505 - INFO     - ==========================================================================================
2025-10-29 13:51:11,505 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:11,505 - INFO     -   Input action: 27 (type: int)
2025-10-29 13:51:11,505 - INFO     -   Available edges in graph: 44
2025-10-29 13:51:11,505 - INFO     -   Action index calculation:
2025-10-29 13:51:11,505 - INFO     -     - action % max(num_valid_edges, 1) = 27 % 44 = 27
2025-10-29 13:51:11,505 - INFO     -     - clamped to [0, 43]: 27
2025-10-29 13:51:11,505 - INFO     -   ✓ Extracted merge pair from edge 27: (6, 4)
2025-10-29 13:51:11,505 - INFO     -   ✓ Validation passed
2025-10-29 13:51:11,505 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:11,506 - INFO     -     - Total states before merge: 30
2025-10-29 13:51:11,506 - INFO     -     - Num nodes: 8
2025-10-29 13:51:11,506 - INFO     -     - Num edges: 44
2025-10-29 13:51:11,506 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:11,506 - INFO     -       - Node 6: 5 states
2025-10-29 13:51:11,506 - INFO     -       - Node 4: 2 states
2025-10-29 13:51:11,506 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:11,506 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:11,515 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:51:11,515 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:11,516 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:51:11,617 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:11,617 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:11,617 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:51:11,617 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:11,617 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:11,617 - INFO     -   Calling graph_tracker.merge_nodes([6, 4])...
2025-10-29 13:51:11,618 - INFO     - Attempting merge of nodes 6 and 4...
2025-10-29 13:51:11,618 - INFO     - Successfully merged nodes into new node 10 with 10 states.
2025-10-29 13:51:11,618 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:11,618 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:11,618 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:51:11,618 - INFO     - 
================================================================================
2025-10-29 13:51:11,618 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:51:11,618 - INFO     - ================================================================================
2025-10-29 13:51:11,618 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:11,618 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:51:11,618 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:51:11,619 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:11,619 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:11,619 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:11,619 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:11,619 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:11,619 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:11,619 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:11,619 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:11,619 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:11,619 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:11,619 - INFO     -   - ts1_id: 6
2025-10-29 13:51:11,619 - INFO     -   - ts2_id: 4
2025-10-29 13:51:11,619 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:11,619 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:11,619 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:51:11,619 - INFO     -   - Product space size: 10
2025-10-29 13:51:11,619 - INFO     -   - Using product state mapping
2025-10-29 13:51:11,619 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:11,619 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:51:11,619 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:51:11,620 - INFO     -   - delta: 0.7000
2025-10-29 13:51:11,620 - INFO     -   - f_stability: 1.0 - |0.7000| / 2.9000 = 0.7586
2025-10-29 13:51:11,620 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:11,620 - INFO     -   - Compared 7 values
2025-10-29 13:51:11,620 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:51:11,620 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:11,621 - INFO     -   - states_before: 10
2025-10-29 13:51:11,621 - INFO     -   - states_after: 10
2025-10-29 13:51:11,621 - INFO     -   - delta_states: 0
2025-10-29 13:51:11,621 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:11,621 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:11,621 - INFO     -   - ts2_transitions: 3
2025-10-29 13:51:11,621 - INFO     -   - merged_transitions: 27
2025-10-29 13:51:11,621 - INFO     -   - transition_density_change: 1.1000
2025-10-29 13:51:11,621 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:11,621 - INFO     -   - search_signals present: True
2025-10-29 13:51:11,621 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:11,621 - INFO     -   - search_depth: 2
2025-10-29 13:51:11,621 - INFO     -   - solution_cost: 0
2025-10-29 13:51:11,621 - INFO     -   - branching_factor: 2.7000
2025-10-29 13:51:11,621 - INFO     -   - solution_found: True
2025-10-29 13:51:11,621 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:11,622 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:11,622 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:51:11,622 - INFO     -   - TS6(5) + TS4(2) → 10 states
2025-10-29 13:51:11,622 - INFO     -   - f_stability=0.759
2025-10-29 13:51:11,622 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:11,622 - INFO     -   - solution_found=True
2025-10-29 13:51:11,622 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:11,622 - INFO     - 
  Extracted signals:
2025-10-29 13:51:11,622 - INFO     -     - iteration: 1
2025-10-29 13:51:11,622 - INFO     -     - states_before: 10
2025-10-29 13:51:11,622 - INFO     -     - states_after: 10
2025-10-29 13:51:11,622 - INFO     -     - delta_states: 0
2025-10-29 13:51:11,622 - INFO     -     - f_value_stability: 0.7586
2025-10-29 13:51:11,622 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:51:11,622 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:11,622 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:11,622 - INFO     -     - search_depth: 2
2025-10-29 13:51:11,623 - INFO     -     - solution_cost: 0
2025-10-29 13:51:11,623 - INFO     -     - branching_factor: 2.7000
2025-10-29 13:51:11,623 - INFO     -     - solution_found: True
2025-10-29 13:51:11,623 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:11,623 - INFO     - 
  Computing reward:
2025-10-29 13:51:11,623 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:11,623 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:11,623 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:11,623 - INFO     -   [1] BRANCHING FACTOR: 2.700 → score 0.745 (good (in comfort zone))
2025-10-29 13:51:11,623 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:11,623 - INFO     -   [3] F-VALUE STABILITY: 0.251
2025-10-29 13:51:11,623 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:11,623 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:11,624 - INFO     - 
  [COMPOSITE]: 0.603
2025-10-29 13:51:11,624 - INFO     -     = 0.300*0.745 (bf)
2025-10-29 13:51:11,624 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:11,624 - INFO     -     + 0.350*0.251 (stability)
2025-10-29 13:51:11,624 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:11,624 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:11,624 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:11,624 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:11,624 - INFO     - 
  [FINAL REWARD]: 0.4066
2025-10-29 13:51:11,624 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:11,624 - INFO     -     ✓ Reward computed: 0.4066
2025-10-29 13:51:11,624 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:11,624 - INFO     -     - bf_score                       0.7450
2025-10-29 13:51:11,624 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:11,624 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:11,624 - INFO     -     - f_stability                    0.2507
2025-10-29 13:51:11,624 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:11,625 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:11,625 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:11,625 - INFO     -     - composite                      0.6033
2025-10-29 13:51:11,625 - INFO     -     - total                          0.4066
2025-10-29 13:51:11,625 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:11,625 - INFO     -   Num remaining nodes: 7
2025-10-29 13:51:11,625 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:51:11,625 - INFO     -   Done: False
2025-10-29 13:51:11,625 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:11,626 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:11,626 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:11,626 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:11,626 - INFO     -     - num_nodes: 7
2025-10-29 13:51:11,626 - INFO     -     - num_edges: 36
2025-10-29 13:51:11,626 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:11,626 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:51:11,626 - INFO     -   After: current_merge_step = 2
2025-10-29 13:51:11,627 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:11,627 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:11,627 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:11,627 - INFO     -   ✓ Step logged
2025-10-29 13:51:11,628 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:11,628 - INFO     -   Returning:
2025-10-29 13:51:11,628 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:11,628 - INFO     -     - reward: 0.4066
2025-10-29 13:51:11,628 - INFO     -     - done: False
2025-10-29 13:51:11,628 - INFO     -     - truncated: False
2025-10-29 13:51:11,628 - INFO     -     - info: 19 keys
2025-10-29 13:51:11,628 - INFO     - ==========================================================================================

2025-10-29 13:51:11,633 - INFO     - 
==========================================================================================
2025-10-29 13:51:11,633 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:11,633 - INFO     - ==========================================================================================
2025-10-29 13:51:11,633 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:11,634 - INFO     -   Input action: 21 (type: int)
2025-10-29 13:51:11,634 - INFO     -   Available edges in graph: 36
2025-10-29 13:51:11,634 - INFO     -   Action index calculation:
2025-10-29 13:51:11,634 - INFO     -     - action % max(num_valid_edges, 1) = 21 % 36 = 21
2025-10-29 13:51:11,634 - INFO     -     - clamped to [0, 35]: 21
2025-10-29 13:51:11,634 - INFO     -   ✓ Extracted merge pair from edge 21: (8, 2)
2025-10-29 13:51:11,634 - INFO     -   ✓ Validation passed
2025-10-29 13:51:11,634 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:11,634 - INFO     -     - Total states before merge: 33
2025-10-29 13:51:11,634 - INFO     -     - Num nodes: 7
2025-10-29 13:51:11,634 - INFO     -     - Num edges: 36
2025-10-29 13:51:11,634 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:11,634 - INFO     -       - Node 8: 5 states
2025-10-29 13:51:11,634 - INFO     -       - Node 2: 2 states
2025-10-29 13:51:11,634 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:11,635 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:11,641 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:51:11,641 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:11,641 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:51:11,742 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:11,742 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:11,742 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:51:11,743 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:11,743 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:11,743 - INFO     -   Calling graph_tracker.merge_nodes([8, 2])...
2025-10-29 13:51:11,743 - INFO     - Attempting merge of nodes 8 and 2...
2025-10-29 13:51:11,743 - INFO     - Successfully merged nodes into new node 11 with 10 states.
2025-10-29 13:51:11,743 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:11,743 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:11,743 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:51:11,743 - INFO     - 
================================================================================
2025-10-29 13:51:11,743 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:51:11,743 - INFO     - ================================================================================
2025-10-29 13:51:11,743 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:11,743 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:51:11,743 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:51:11,744 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:11,744 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:11,744 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:11,744 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:11,744 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:11,744 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:11,744 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:11,744 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:11,744 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:11,744 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:11,744 - INFO     -   - ts1_id: 8
2025-10-29 13:51:11,744 - INFO     -   - ts2_id: 2
2025-10-29 13:51:11,744 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:11,745 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:11,745 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:51:11,745 - INFO     -   - Product space size: 10
2025-10-29 13:51:11,745 - INFO     -   - Using product state mapping
2025-10-29 13:51:11,745 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:11,745 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:51:11,745 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:51:11,745 - INFO     -   - delta: 0.4000
2025-10-29 13:51:11,745 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:51:11,745 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:11,745 - INFO     -   - Compared 7 values
2025-10-29 13:51:11,745 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:11,745 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:11,745 - INFO     -   - states_before: 10
2025-10-29 13:51:11,745 - INFO     -   - states_after: 10
2025-10-29 13:51:11,746 - INFO     -   - delta_states: 0
2025-10-29 13:51:11,746 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:11,746 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:11,746 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:11,746 - INFO     -   - merged_transitions: 40
2025-10-29 13:51:11,746 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:51:11,746 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:11,746 - INFO     -   - search_signals present: True
2025-10-29 13:51:11,746 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:11,746 - INFO     -   - search_depth: 1
2025-10-29 13:51:11,746 - INFO     -   - solution_cost: 0
2025-10-29 13:51:11,746 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:51:11,746 - INFO     -   - solution_found: True
2025-10-29 13:51:11,746 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:11,746 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:11,747 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:51:11,747 - INFO     -   - TS8(5) + TS2(2) → 10 states
2025-10-29 13:51:11,747 - INFO     -   - f_stability=0.862
2025-10-29 13:51:11,747 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:11,747 - INFO     -   - solution_found=True
2025-10-29 13:51:11,747 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:11,747 - INFO     - 
  Extracted signals:
2025-10-29 13:51:11,747 - INFO     -     - iteration: 2
2025-10-29 13:51:11,747 - INFO     -     - states_before: 10
2025-10-29 13:51:11,747 - INFO     -     - states_after: 10
2025-10-29 13:51:11,747 - INFO     -     - delta_states: 0
2025-10-29 13:51:11,747 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:51:11,747 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:11,747 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:11,747 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:11,748 - INFO     -     - search_depth: 1
2025-10-29 13:51:11,748 - INFO     -     - solution_cost: 0
2025-10-29 13:51:11,748 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:51:11,748 - INFO     -     - solution_found: True
2025-10-29 13:51:11,748 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:11,748 - INFO     - 
  Computing reward:
2025-10-29 13:51:11,748 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:11,748 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:11,748 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:11,748 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:51:11,748 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:51:11,748 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:51:11,749 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:11,749 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:11,749 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:51:11,749 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:51:11,749 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:51:11,749 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:51:11,749 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:11,749 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:11,749 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:11,749 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:11,749 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:51:11,749 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:11,749 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:51:11,749 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:11,749 - INFO     -     - bf_score                       0.5667
2025-10-29 13:51:11,749 - INFO     -     - depth_score                    0.9119
2025-10-29 13:51:11,750 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:11,750 - INFO     -     - f_stability                    0.2913
2025-10-29 13:51:11,750 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:11,750 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:11,750 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:11,750 - INFO     -     - composite                      0.5743
2025-10-29 13:51:11,750 - INFO     -     - total                          0.3487
2025-10-29 13:51:11,750 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:11,750 - INFO     -   Num remaining nodes: 6
2025-10-29 13:51:11,750 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:51:11,750 - INFO     -   Done: False
2025-10-29 13:51:11,750 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:11,751 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:11,751 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:11,751 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:11,751 - INFO     -     - num_nodes: 6
2025-10-29 13:51:11,751 - INFO     -     - num_edges: 28
2025-10-29 13:51:11,751 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:11,751 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:51:11,751 - INFO     -   After: current_merge_step = 3
2025-10-29 13:51:11,751 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:11,751 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:11,751 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:11,755 - INFO     -   ✓ Step logged
2025-10-29 13:51:11,755 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:11,755 - INFO     -   Returning:
2025-10-29 13:51:11,755 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:11,755 - INFO     -     - reward: 0.3487
2025-10-29 13:51:11,755 - INFO     -     - done: False
2025-10-29 13:51:11,755 - INFO     -     - truncated: False
2025-10-29 13:51:11,755 - INFO     -     - info: 19 keys
2025-10-29 13:51:11,755 - INFO     - ==========================================================================================

2025-10-29 13:51:11,759 - INFO     - 
==========================================================================================
2025-10-29 13:51:11,759 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:11,759 - INFO     - ==========================================================================================
2025-10-29 13:51:11,759 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:11,760 - INFO     -   Input action: 8 (type: int)
2025-10-29 13:51:11,760 - INFO     -   Available edges in graph: 28
2025-10-29 13:51:11,760 - INFO     -   Action index calculation:
2025-10-29 13:51:11,760 - INFO     -     - action % max(num_valid_edges, 1) = 8 % 28 = 8
2025-10-29 13:51:11,760 - INFO     -     - clamped to [0, 27]: 8
2025-10-29 13:51:11,760 - INFO     -   ✓ Extracted merge pair from edge 8: (5, 11)
2025-10-29 13:51:11,760 - INFO     -   ✓ Validation passed
2025-10-29 13:51:11,760 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:11,760 - INFO     -     - Total states before merge: 36
2025-10-29 13:51:11,760 - INFO     -     - Num nodes: 6
2025-10-29 13:51:11,760 - INFO     -     - Num edges: 28
2025-10-29 13:51:11,760 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:11,760 - INFO     -       - Node 5: 5 states
2025-10-29 13:51:11,760 - INFO     -       - Node 11: 10 states
2025-10-29 13:51:11,760 - INFO     -       - Expected product: 50 states
2025-10-29 13:51:11,760 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:11,765 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:51:11,765 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:11,765 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:51:11,866 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:11,866 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:11,866 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:51:11,867 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:11,867 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:11,867 - INFO     -   Calling graph_tracker.merge_nodes([5, 11])...
2025-10-29 13:51:11,867 - INFO     - Attempting merge of nodes 5 and 11...
2025-10-29 13:51:11,868 - INFO     - Successfully merged nodes into new node 12 with 50 states.
2025-10-29 13:51:11,868 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:11,868 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:11,868 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:51:11,868 - INFO     - 
================================================================================
2025-10-29 13:51:11,868 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:51:11,868 - INFO     - ================================================================================
2025-10-29 13:51:11,868 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:11,868 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:51:11,868 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:51:11,869 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:11,869 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:11,869 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:11,869 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:51:11,869 - INFO     -   - Raw f_after length: 50
2025-10-29 13:51:11,869 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:11,869 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:11,869 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:51:11,869 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:51:11,869 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:11,869 - INFO     -   - ts1_id: 5
2025-10-29 13:51:11,869 - INFO     -   - ts2_id: 11
2025-10-29 13:51:11,869 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:11,869 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:11,869 - INFO     -   - ts1_size: 5, ts2_size: 10
2025-10-29 13:51:11,869 - INFO     -   - Product space size: 50
2025-10-29 13:51:11,870 - INFO     -   - Using product state mapping
2025-10-29 13:51:11,870 - INFO     -   - f_before_product length: 50
2025-10-29 13:51:11,870 - INFO     -   - avg_f_before: 3.8800 (50 valid states)
2025-10-29 13:51:11,870 - INFO     -   - avg_f_after:  6.1400 (50 valid states)
2025-10-29 13:51:11,870 - INFO     -   - delta: 2.2600
2025-10-29 13:51:11,870 - INFO     -   - f_stability: 1.0 - |2.2600| / 3.8800 = 0.4175
2025-10-29 13:51:11,870 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:11,870 - INFO     -   - Compared 15 values
2025-10-29 13:51:11,870 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:51:11,870 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:11,870 - INFO     -   - states_before: 50
2025-10-29 13:51:11,871 - INFO     -   - states_after: 50
2025-10-29 13:51:11,871 - INFO     -   - delta_states: 0
2025-10-29 13:51:11,871 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:11,871 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:11,871 - INFO     -   - ts2_transitions: 40
2025-10-29 13:51:11,871 - INFO     -   - merged_transitions: 275
2025-10-29 13:51:11,871 - INFO     -   - transition_density_change: 4.4400
2025-10-29 13:51:11,871 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:11,871 - INFO     -   - search_signals present: True
2025-10-29 13:51:11,871 - INFO     -   - nodes_expanded: 50
2025-10-29 13:51:11,871 - INFO     -   - search_depth: 3
2025-10-29 13:51:11,871 - INFO     -   - solution_cost: 2
2025-10-29 13:51:11,871 - INFO     -   - branching_factor: 5.5000
2025-10-29 13:51:11,871 - INFO     -   - solution_found: True
2025-10-29 13:51:11,871 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:11,872 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:11,872 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:51:11,872 - INFO     -   - TS5(5) + TS11(10) → 50 states
2025-10-29 13:51:11,872 - INFO     -   - f_stability=0.418
2025-10-29 13:51:11,872 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:51:11,873 - INFO     -   - solution_found=True
2025-10-29 13:51:11,873 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:11,873 - INFO     - 
  Extracted signals:
2025-10-29 13:51:11,873 - INFO     -     - iteration: 3
2025-10-29 13:51:11,873 - INFO     -     - states_before: 50
2025-10-29 13:51:11,873 - INFO     -     - states_after: 50
2025-10-29 13:51:11,873 - INFO     -     - delta_states: 0
2025-10-29 13:51:11,873 - INFO     -     - f_value_stability: 0.4175
2025-10-29 13:51:11,873 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:51:11,873 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:11,873 - INFO     -     - nodes_expanded: 50
2025-10-29 13:51:11,873 - INFO     -     - search_depth: 3
2025-10-29 13:51:11,873 - INFO     -     - solution_cost: 2
2025-10-29 13:51:11,873 - INFO     -     - branching_factor: 5.5000
2025-10-29 13:51:11,873 - INFO     -     - solution_found: True
2025-10-29 13:51:11,873 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:11,873 - INFO     - 
  Computing reward:
2025-10-29 13:51:11,874 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:11,874 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:11,874 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:11,874 - INFO     -   [1] BRANCHING FACTOR: 5.500 → score 0.367 (tolerable)
2025-10-29 13:51:11,874 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:51:11,874 - INFO     -   [3] F-VALUE STABILITY: 0.550
2025-10-29 13:51:11,874 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:11,874 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:11,875 - INFO     - 
  [COMPOSITE]: 0.587
2025-10-29 13:51:11,875 - INFO     -     = 0.300*0.367 (bf)
2025-10-29 13:51:11,875 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:51:11,875 - INFO     -     + 0.350*0.550 (stability)
2025-10-29 13:51:11,875 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:11,875 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:11,875 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:11,875 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:11,875 - INFO     - 
  [FINAL REWARD]: 0.5744
2025-10-29 13:51:11,875 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:11,875 - INFO     -     ✓ Reward computed: 0.5744
2025-10-29 13:51:11,875 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:11,875 - INFO     -     - bf_score                       0.3667
2025-10-29 13:51:11,875 - INFO     -     - depth_score                    0.8237
2025-10-29 13:51:11,875 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:11,875 - INFO     -     - f_stability                    0.5499
2025-10-29 13:51:11,876 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:11,876 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:11,876 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:11,876 - INFO     -     - composite                      0.5872
2025-10-29 13:51:11,876 - INFO     -     - total                          0.5744
2025-10-29 13:51:11,876 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:11,876 - INFO     -   Num remaining nodes: 5
2025-10-29 13:51:11,876 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:51:11,876 - INFO     -   Done: False
2025-10-29 13:51:11,876 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:11,877 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:11,877 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:11,877 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:11,877 - INFO     -     - num_nodes: 5
2025-10-29 13:51:11,877 - INFO     -     - num_edges: 20
2025-10-29 13:51:11,877 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:11,877 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:51:11,877 - INFO     -   After: current_merge_step = 4
2025-10-29 13:51:11,877 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:11,877 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:11,878 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:11,878 - INFO     -   ✓ Step logged
2025-10-29 13:51:11,878 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:11,878 - INFO     -   Returning:
2025-10-29 13:51:11,878 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:11,878 - INFO     -     - reward: 0.5744
2025-10-29 13:51:11,878 - INFO     -     - done: False
2025-10-29 13:51:11,878 - INFO     -     - truncated: False
2025-10-29 13:51:11,879 - INFO     -     - info: 19 keys
2025-10-29 13:51:11,879 - INFO     - ==========================================================================================

2025-10-29 13:51:11,883 - INFO     - 
==========================================================================================
2025-10-29 13:51:11,883 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:11,883 - INFO     - ==========================================================================================
2025-10-29 13:51:11,883 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:11,883 - INFO     -   Input action: 8 (type: int)
2025-10-29 13:51:11,883 - INFO     -   Available edges in graph: 20
2025-10-29 13:51:11,883 - INFO     -   Action index calculation:
2025-10-29 13:51:11,883 - INFO     -     - action % max(num_valid_edges, 1) = 8 % 20 = 8
2025-10-29 13:51:11,883 - INFO     -     - clamped to [0, 19]: 8
2025-10-29 13:51:11,883 - INFO     -   ✓ Extracted merge pair from edge 8: (9, 0)
2025-10-29 13:51:11,883 - INFO     -   ✓ Validation passed
2025-10-29 13:51:11,883 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:11,883 - INFO     -     - Total states before merge: 71
2025-10-29 13:51:11,883 - INFO     -     - Num nodes: 5
2025-10-29 13:51:11,883 - INFO     -     - Num edges: 20
2025-10-29 13:51:11,883 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:11,883 - INFO     -       - Node 9: 4 states
2025-10-29 13:51:11,884 - INFO     -       - Node 0: 2 states
2025-10-29 13:51:11,884 - INFO     -       - Expected product: 8 states
2025-10-29 13:51:11,884 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:11,891 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:51:11,891 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:11,891 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:51:11,992 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:11,992 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:11,992 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:51:11,992 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:11,992 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:11,992 - INFO     -   Calling graph_tracker.merge_nodes([9, 0])...
2025-10-29 13:51:11,992 - INFO     - Attempting merge of nodes 9 and 0...
2025-10-29 13:51:11,992 - INFO     - Successfully merged nodes into new node 13 with 8 states.
2025-10-29 13:51:11,992 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:11,992 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:11,992 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:51:11,993 - INFO     - 
================================================================================
2025-10-29 13:51:11,993 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:51:11,993 - INFO     - ================================================================================
2025-10-29 13:51:11,993 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:11,993 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:51:11,993 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:51:11,993 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:11,993 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:11,993 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:51:11,993 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:11,994 - INFO     -   - Raw f_after length: 8
2025-10-29 13:51:11,994 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:11,994 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:51:11,994 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:11,994 - INFO     -   - after_valid: 8 / 8 (removed 0)
2025-10-29 13:51:11,994 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:11,994 - INFO     -   - ts1_id: 9
2025-10-29 13:51:11,994 - INFO     -   - ts2_id: 0
2025-10-29 13:51:11,994 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:11,994 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:11,994 - INFO     -   - ts1_size: 4, ts2_size: 2
2025-10-29 13:51:11,994 - INFO     -   - Product space size: 8
2025-10-29 13:51:11,994 - INFO     -   - Using product state mapping
2025-10-29 13:51:11,994 - INFO     -   - f_before_product length: 8
2025-10-29 13:51:11,995 - INFO     -   - avg_f_before: 1.1250 (8 valid states)
2025-10-29 13:51:11,995 - INFO     -   - avg_f_after:  1.5000 (8 valid states)
2025-10-29 13:51:11,995 - INFO     -   - delta: 0.3750
2025-10-29 13:51:11,995 - INFO     -   - f_stability: 1.0 - |0.3750| / 1.1250 = 0.6667
2025-10-29 13:51:11,995 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:11,995 - INFO     -   - Compared 6 values
2025-10-29 13:51:11,995 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:11,995 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:11,995 - INFO     -   - states_before: 8
2025-10-29 13:51:11,995 - INFO     -   - states_after: 8
2025-10-29 13:51:11,995 - INFO     -   - delta_states: 0
2025-10-29 13:51:11,995 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:11,995 - INFO     -   - ts1_transitions: 20
2025-10-29 13:51:11,995 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:11,995 - INFO     -   - merged_transitions: 68
2025-10-29 13:51:11,995 - INFO     -   - transition_density_change: 5.3750
2025-10-29 13:51:11,995 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:11,996 - INFO     -   - search_signals present: True
2025-10-29 13:51:11,996 - INFO     -   - nodes_expanded: 8
2025-10-29 13:51:11,996 - INFO     -   - search_depth: 0
2025-10-29 13:51:11,996 - INFO     -   - solution_cost: 0
2025-10-29 13:51:11,996 - INFO     -   - branching_factor: 8.5000
2025-10-29 13:51:11,996 - INFO     -   - solution_found: True
2025-10-29 13:51:11,996 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:11,996 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:11,996 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:51:11,996 - INFO     -   - TS9(4) + TS0(2) → 8 states
2025-10-29 13:51:11,996 - INFO     -   - f_stability=0.667
2025-10-29 13:51:11,996 - INFO     -   - A* nodes_expanded=8
2025-10-29 13:51:11,996 - INFO     -   - solution_found=True
2025-10-29 13:51:11,997 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:11,997 - INFO     - 
  Extracted signals:
2025-10-29 13:51:11,997 - INFO     -     - iteration: 4
2025-10-29 13:51:11,997 - INFO     -     - states_before: 8
2025-10-29 13:51:11,997 - INFO     -     - states_after: 8
2025-10-29 13:51:11,997 - INFO     -     - delta_states: 0
2025-10-29 13:51:11,997 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:51:11,997 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:11,997 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:11,997 - INFO     -     - nodes_expanded: 8
2025-10-29 13:51:11,997 - INFO     -     - search_depth: 0
2025-10-29 13:51:11,998 - INFO     -     - solution_cost: 0
2025-10-29 13:51:11,998 - INFO     -     - branching_factor: 8.5000
2025-10-29 13:51:11,998 - INFO     -     - solution_found: True
2025-10-29 13:51:11,998 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:11,998 - WARNING  -     ⚠️  High branching factor: 8.5000
2025-10-29 13:51:11,998 - INFO     - 
  Computing reward:
2025-10-29 13:51:11,998 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:11,998 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:11,998 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:11,998 - INFO     -   [1] BRANCHING FACTOR: 8.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:51:11,998 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:51:11,999 - INFO     -   [3] F-VALUE STABILITY: 0.572
2025-10-29 13:51:11,999 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:11,999 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:11,999 - INFO     - 
  [COMPOSITE]: 0.450
2025-10-29 13:51:11,999 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:51:11,999 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:51:11,999 - INFO     -     + 0.350*0.572 (stability)
2025-10-29 13:51:11,999 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:11,999 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:11,999 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:11,999 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:11,999 - INFO     - 
  [FINAL REWARD]: 0.3003
2025-10-29 13:51:11,999 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:11,999 - INFO     -     ✓ Reward computed: 0.3003
2025-10-29 13:51:11,999 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:12,000 - INFO     -     - bf_score                       0.1000
2025-10-29 13:51:12,000 - INFO     -     - depth_score                    0.5000
2025-10-29 13:51:12,000 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:12,000 - INFO     -     - f_stability                    0.5719
2025-10-29 13:51:12,000 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:12,000 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:12,000 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:12,000 - INFO     -     - composite                      0.4502
2025-10-29 13:51:12,000 - INFO     -     - total                          0.3003
2025-10-29 13:51:12,000 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:12,000 - INFO     -   Num remaining nodes: 4
2025-10-29 13:51:12,000 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:51:12,000 - INFO     -   Done: False
2025-10-29 13:51:12,000 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:12,001 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:12,001 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:12,001 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:12,001 - INFO     -     - num_nodes: 4
2025-10-29 13:51:12,001 - INFO     -     - num_edges: 12
2025-10-29 13:51:12,001 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:12,001 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:51:12,002 - INFO     -   After: current_merge_step = 5
2025-10-29 13:51:12,002 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:12,002 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:12,002 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:12,002 - INFO     -   ✓ Step logged
2025-10-29 13:51:12,002 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:12,002 - INFO     -   Returning:
2025-10-29 13:51:12,002 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:12,003 - INFO     -     - reward: 0.3003
2025-10-29 13:51:12,003 - INFO     -     - done: False
2025-10-29 13:51:12,003 - INFO     -     - truncated: False
2025-10-29 13:51:12,003 - INFO     -     - info: 19 keys
2025-10-29 13:51:12,003 - INFO     - ==========================================================================================

2025-10-29 13:51:12,008 - INFO     - 
==========================================================================================
2025-10-29 13:51:12,008 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:12,008 - INFO     - ==========================================================================================
2025-10-29 13:51:12,008 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:12,008 - INFO     -   Input action: 11 (type: int)
2025-10-29 13:51:12,008 - INFO     -   Available edges in graph: 12
2025-10-29 13:51:12,008 - INFO     -   Action index calculation:
2025-10-29 13:51:12,009 - INFO     -     - action % max(num_valid_edges, 1) = 11 % 12 = 11
2025-10-29 13:51:12,009 - INFO     -     - clamped to [0, 11]: 11
2025-10-29 13:51:12,009 - INFO     -   ✓ Extracted merge pair from edge 11: (13, 12)
2025-10-29 13:51:12,009 - INFO     -   ✓ Validation passed
2025-10-29 13:51:12,009 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:12,009 - INFO     -     - Total states before merge: 73
2025-10-29 13:51:12,009 - INFO     -     - Num nodes: 4
2025-10-29 13:51:12,009 - INFO     -     - Num edges: 12
2025-10-29 13:51:12,009 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:12,009 - INFO     -       - Node 13: 8 states
2025-10-29 13:51:12,009 - INFO     -       - Node 12: 50 states
2025-10-29 13:51:12,009 - INFO     -       - Expected product: 400 states
2025-10-29 13:51:12,009 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:12,015 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:51:12,015 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:12,015 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:51:12,117 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:12,117 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:12,117 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:51:12,122 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:51:12,122 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:12,122 - INFO     -   Calling graph_tracker.merge_nodes([13, 12])...
2025-10-29 13:51:12,122 - INFO     - Attempting merge of nodes 13 and 12...
2025-10-29 13:51:12,123 - INFO     - Successfully merged nodes into new node 14 with 400 states.
2025-10-29 13:51:12,123 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:12,123 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:12,123 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:51:12,123 - INFO     - 
================================================================================
2025-10-29 13:51:12,123 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:51:12,123 - INFO     - ================================================================================
2025-10-29 13:51:12,123 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:12,123 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:51:12,124 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:51:12,125 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:12,125 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:12,125 - INFO     -   - Raw ts1_f length: 8
2025-10-29 13:51:12,125 - INFO     -   - Raw ts2_f length: 50
2025-10-29 13:51:12,125 - INFO     -   - Raw f_after length: 400
2025-10-29 13:51:12,125 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:12,126 - INFO     -   - ts1_valid: 8 / 8 (removed 0)
2025-10-29 13:51:12,126 - INFO     -   - ts2_valid: 50 / 50 (removed -50)
2025-10-29 13:51:12,126 - INFO     -   - after_valid: 400 / 400 (removed 0)
2025-10-29 13:51:12,126 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:12,126 - INFO     -   - ts1_id: 13
2025-10-29 13:51:12,126 - INFO     -   - ts2_id: 12
2025-10-29 13:51:12,126 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:12,127 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:12,127 - INFO     -   - ts1_size: 8, ts2_size: 50
2025-10-29 13:51:12,127 - INFO     -   - Product space size: 400
2025-10-29 13:51:12,127 - INFO     -   - Using product state mapping
2025-10-29 13:51:12,128 - INFO     -   - f_before_product length: 400
2025-10-29 13:51:12,129 - INFO     -   - avg_f_before: 6.1475 (400 valid states)
2025-10-29 13:51:12,129 - INFO     -   - avg_f_after:  8.3125 (400 valid states)
2025-10-29 13:51:12,129 - INFO     -   - delta: 2.1650
2025-10-29 13:51:12,129 - INFO     -   - f_stability: 1.0 - |2.1650| / 6.1475 = 0.6478
2025-10-29 13:51:12,129 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:12,129 - INFO     -   - Compared 58 values
2025-10-29 13:51:12,130 - INFO     -   - Significant changes (> 5.0): 12
2025-10-29 13:51:12,130 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:12,130 - INFO     -   - states_before: 400
2025-10-29 13:51:12,130 - INFO     -   - states_after: 400
2025-10-29 13:51:12,130 - INFO     -   - delta_states: 0
2025-10-29 13:51:12,130 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:12,130 - INFO     -   - ts1_transitions: 68
2025-10-29 13:51:12,130 - INFO     -   - ts2_transitions: 275
2025-10-29 13:51:12,132 - INFO     -   - merged_transitions: 3920
2025-10-29 13:51:12,132 - INFO     -   - transition_density_change: 8.9425
2025-10-29 13:51:12,132 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:12,132 - INFO     -   - search_signals present: True
2025-10-29 13:51:12,132 - INFO     -   - nodes_expanded: 400
2025-10-29 13:51:12,132 - INFO     -   - search_depth: 4
2025-10-29 13:51:12,132 - INFO     -   - solution_cost: 2
2025-10-29 13:51:12,132 - INFO     -   - branching_factor: 9.8000
2025-10-29 13:51:12,132 - INFO     -   - solution_found: True
2025-10-29 13:51:12,132 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:12,133 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:12,133 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:51:12,133 - INFO     -   - TS13(8) + TS12(50) → 400 states
2025-10-29 13:51:12,134 - INFO     -   - f_stability=0.648
2025-10-29 13:51:12,134 - INFO     -   - A* nodes_expanded=400
2025-10-29 13:51:12,134 - INFO     -   - solution_found=True
2025-10-29 13:51:12,134 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:12,134 - INFO     - 
  Extracted signals:
2025-10-29 13:51:12,134 - INFO     -     - iteration: 5
2025-10-29 13:51:12,134 - INFO     -     - states_before: 400
2025-10-29 13:51:12,134 - INFO     -     - states_after: 400
2025-10-29 13:51:12,134 - INFO     -     - delta_states: 0
2025-10-29 13:51:12,134 - INFO     -     - f_value_stability: 0.6478
2025-10-29 13:51:12,134 - INFO     -     - num_significant_f_changes: 12
2025-10-29 13:51:12,135 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:12,135 - INFO     -     - nodes_expanded: 400
2025-10-29 13:51:12,135 - INFO     -     - search_depth: 4
2025-10-29 13:51:12,135 - INFO     -     - solution_cost: 2
2025-10-29 13:51:12,135 - INFO     -     - branching_factor: 9.8000
2025-10-29 13:51:12,135 - INFO     -     - solution_found: True
2025-10-29 13:51:12,135 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:12,135 - WARNING  -     ⚠️  High branching factor: 9.8000
2025-10-29 13:51:12,135 - INFO     - 
  Computing reward:
2025-10-29 13:51:12,135 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:12,135 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:12,135 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:12,135 - INFO     -   [1] BRANCHING FACTOR: 9.800 → score 0.100 (high BF, minimal credit)
2025-10-29 13:51:12,135 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:51:12,136 - INFO     -   [3] F-VALUE STABILITY: 0.761
2025-10-29 13:51:12,136 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:51:12,137 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:12,137 - INFO     - 
  [COMPOSITE]: 0.575
2025-10-29 13:51:12,137 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:51:12,137 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:51:12,137 - INFO     -     + 0.350*0.761 (stability)
2025-10-29 13:51:12,137 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:12,137 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:12,137 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:12,137 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:51:12,137 - INFO     - 
  [FINAL REWARD]: 0.6505
2025-10-29 13:51:12,138 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:12,138 - INFO     -     ✓ Reward computed: 0.6505
2025-10-29 13:51:12,138 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:12,138 - INFO     -     - bf_score                       0.1000
2025-10-29 13:51:12,138 - INFO     -     - depth_score                    0.7953
2025-10-29 13:51:12,138 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:12,138 - INFO     -     - f_stability                    0.7605
2025-10-29 13:51:12,138 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:51:12,138 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:12,138 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:12,138 - INFO     -     - composite                      0.5753
2025-10-29 13:51:12,138 - INFO     -     - total                          0.6505
2025-10-29 13:51:12,139 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:12,139 - INFO     -   Num remaining nodes: 3
2025-10-29 13:51:12,139 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:51:12,139 - INFO     -   Done: False
2025-10-29 13:51:12,139 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:12,139 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:12,140 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:12,140 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:12,140 - INFO     -     - num_nodes: 3
2025-10-29 13:51:12,140 - INFO     -     - num_edges: 6
2025-10-29 13:51:12,140 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:12,140 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:51:12,140 - INFO     -   After: current_merge_step = 6
2025-10-29 13:51:12,140 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:12,140 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:12,140 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:12,141 - INFO     -   ✓ Step logged
2025-10-29 13:51:12,141 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:12,141 - INFO     -   Returning:
2025-10-29 13:51:12,141 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:12,141 - INFO     -     - reward: 0.6505
2025-10-29 13:51:12,142 - INFO     -     - done: False
2025-10-29 13:51:12,142 - INFO     -     - truncated: False
2025-10-29 13:51:12,142 - INFO     -     - info: 19 keys
2025-10-29 13:51:12,142 - INFO     - ==========================================================================================

2025-10-29 13:51:12,146 - INFO     - 
==========================================================================================
2025-10-29 13:51:12,146 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:12,146 - INFO     - ==========================================================================================
2025-10-29 13:51:12,146 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:12,146 - INFO     -   Input action: 4 (type: int)
2025-10-29 13:51:12,147 - INFO     -   Available edges in graph: 6
2025-10-29 13:51:12,147 - INFO     -   Action index calculation:
2025-10-29 13:51:12,147 - INFO     -     - action % max(num_valid_edges, 1) = 4 % 6 = 4
2025-10-29 13:51:12,147 - INFO     -     - clamped to [0, 5]: 4
2025-10-29 13:51:12,147 - INFO     -   ✓ Extracted merge pair from edge 4: (14, 7)
2025-10-29 13:51:12,147 - INFO     -   ✓ Validation passed
2025-10-29 13:51:12,147 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:12,147 - INFO     -     - Total states before merge: 415
2025-10-29 13:51:12,147 - INFO     -     - Num nodes: 3
2025-10-29 13:51:12,147 - INFO     -     - Num edges: 6
2025-10-29 13:51:12,147 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:12,147 - INFO     -       - Node 14: 400 states
2025-10-29 13:51:12,147 - INFO     -       - Node 7: 5 states
2025-10-29 13:51:12,147 - INFO     -       - Expected product: 2000 states
2025-10-29 13:51:12,147 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:12,153 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:51:12,153 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:12,153 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:51:12,254 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:12,254 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:12,254 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:51:12,267 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:51:12,267 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:12,267 - INFO     -   Calling graph_tracker.merge_nodes([14, 7])...
2025-10-29 13:51:12,267 - INFO     - Attempting merge of nodes 14 and 7...
2025-10-29 13:51:12,267 - INFO     - Successfully merged nodes into new node 15 with 2000 states.
2025-10-29 13:51:12,267 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:12,267 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:12,267 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:51:12,267 - INFO     - 
================================================================================
2025-10-29 13:51:12,267 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:51:12,267 - INFO     - ================================================================================
2025-10-29 13:51:12,267 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:12,268 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:51:12,268 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:51:12,271 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:12,271 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:12,271 - INFO     -   - Raw ts1_f length: 400
2025-10-29 13:51:12,271 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:51:12,271 - INFO     -   - Raw f_after length: 2000
2025-10-29 13:51:12,271 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:12,272 - INFO     -   - ts1_valid: 400 / 400 (removed 0)
2025-10-29 13:51:12,272 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:51:12,273 - INFO     -   - after_valid: 2000 / 2000 (removed 0)
2025-10-29 13:51:12,273 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:12,273 - INFO     -   - ts1_id: 14
2025-10-29 13:51:12,273 - INFO     -   - ts2_id: 7
2025-10-29 13:51:12,273 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:12,273 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:12,273 - INFO     -   - ts1_size: 400, ts2_size: 5
2025-10-29 13:51:12,273 - INFO     -   - Product space size: 2000
2025-10-29 13:51:12,273 - INFO     -   - Using product state mapping
2025-10-29 13:51:12,278 - INFO     -   - f_before_product length: 2000
2025-10-29 13:51:12,286 - INFO     -   - avg_f_before: 8.3305 (2000 valid states)
2025-10-29 13:51:12,286 - INFO     -   - avg_f_after:  12.5360 (2000 valid states)
2025-10-29 13:51:12,286 - INFO     -   - delta: 4.2055
2025-10-29 13:51:12,287 - INFO     -   - f_stability: 1.0 - |4.2055| / 8.3305 = 0.4952
2025-10-29 13:51:12,287 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:12,287 - INFO     -   - Compared 405 values
2025-10-29 13:51:12,287 - INFO     -   - Significant changes (> 5.0): 131
2025-10-29 13:51:12,287 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:12,287 - INFO     -   - states_before: 2000
2025-10-29 13:51:12,287 - INFO     -   - states_after: 2000
2025-10-29 13:51:12,287 - INFO     -   - delta_states: 0
2025-10-29 13:51:12,287 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:12,287 - INFO     -   - ts1_transitions: 3920
2025-10-29 13:51:12,288 - INFO     -   - ts2_transitions: 13
2025-10-29 13:51:12,288 - INFO     -   - merged_transitions: 14400
2025-10-29 13:51:12,288 - INFO     -   - transition_density_change: 5.2335
2025-10-29 13:51:12,288 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:12,288 - INFO     -   - search_signals present: True
2025-10-29 13:51:12,288 - INFO     -   - nodes_expanded: 2000
2025-10-29 13:51:12,288 - INFO     -   - search_depth: 6
2025-10-29 13:51:12,288 - INFO     -   - solution_cost: 4
2025-10-29 13:51:12,288 - INFO     -   - branching_factor: 7.2000
2025-10-29 13:51:12,288 - INFO     -   - solution_found: True
2025-10-29 13:51:12,288 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:12,289 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:12,290 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:51:12,290 - INFO     -   - TS14(400) + TS7(5) → 2000 states
2025-10-29 13:51:12,290 - INFO     -   - f_stability=0.495
2025-10-29 13:51:12,290 - INFO     -   - A* nodes_expanded=2000
2025-10-29 13:51:12,290 - INFO     -   - solution_found=True
2025-10-29 13:51:12,290 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:12,290 - INFO     - 
  Extracted signals:
2025-10-29 13:51:12,290 - INFO     -     - iteration: 6
2025-10-29 13:51:12,290 - INFO     -     - states_before: 2000
2025-10-29 13:51:12,290 - INFO     -     - states_after: 2000
2025-10-29 13:51:12,290 - INFO     -     - delta_states: 0
2025-10-29 13:51:12,290 - INFO     -     - f_value_stability: 0.4952
2025-10-29 13:51:12,290 - INFO     -     - num_significant_f_changes: 131
2025-10-29 13:51:12,290 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:12,291 - INFO     -     - nodes_expanded: 2000
2025-10-29 13:51:12,291 - INFO     -     - search_depth: 6
2025-10-29 13:51:12,291 - INFO     -     - solution_cost: 4
2025-10-29 13:51:12,291 - INFO     -     - branching_factor: 7.2000
2025-10-29 13:51:12,291 - INFO     -     - solution_found: True
2025-10-29 13:51:12,291 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:12,291 - INFO     - 
  Computing reward:
2025-10-29 13:51:12,291 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:12,291 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:12,291 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:12,292 - INFO     -   [1] BRANCHING FACTOR: 7.200 → score 0.180 (high BF, minimal credit)
2025-10-29 13:51:12,292 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:51:12,293 - INFO     -   [3] F-VALUE STABILITY: 0.598
2025-10-29 13:51:12,293 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:12,293 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:12,293 - INFO     - 
  [COMPOSITE]: 0.534
2025-10-29 13:51:12,294 - INFO     -     = 0.300*0.180 (bf)
2025-10-29 13:51:12,294 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:51:12,294 - INFO     -     + 0.350*0.598 (stability)
2025-10-29 13:51:12,294 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:12,294 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:12,294 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:12,294 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:12,294 - INFO     - 
  [FINAL REWARD]: 0.4679
2025-10-29 13:51:12,294 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:12,295 - INFO     -     ✓ Reward computed: 0.4679
2025-10-29 13:51:12,295 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:12,295 - INFO     -     - bf_score                       0.1800
2025-10-29 13:51:12,295 - INFO     -     - depth_score                    0.7525
2025-10-29 13:51:12,295 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:12,295 - INFO     -     - f_stability                    0.5984
2025-10-29 13:51:12,295 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:12,295 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:12,295 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:12,295 - INFO     -     - composite                      0.5340
2025-10-29 13:51:12,295 - INFO     -     - total                          0.4679
2025-10-29 13:51:12,295 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:12,295 - INFO     -   Num remaining nodes: 2
2025-10-29 13:51:12,295 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:51:12,295 - INFO     -   Done: False
2025-10-29 13:51:12,296 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:12,296 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:12,296 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:12,296 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:12,296 - INFO     -     - num_nodes: 2
2025-10-29 13:51:12,296 - INFO     -     - num_edges: 2
2025-10-29 13:51:12,296 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:12,296 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:51:12,296 - INFO     -   After: current_merge_step = 7
2025-10-29 13:51:12,296 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:12,296 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:12,297 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:12,297 - INFO     -   ✓ Step logged
2025-10-29 13:51:12,297 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:12,297 - INFO     -   Returning:
2025-10-29 13:51:12,297 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:12,297 - INFO     -     - reward: 0.4679
2025-10-29 13:51:12,297 - INFO     -     - done: False
2025-10-29 13:51:12,298 - INFO     -     - truncated: False
2025-10-29 13:51:12,298 - INFO     -     - info: 19 keys
2025-10-29 13:51:12,298 - INFO     - ==========================================================================================

2025-10-29 13:51:12,304 - INFO     - 
==========================================================================================
2025-10-29 13:51:12,304 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:12,304 - INFO     - ==========================================================================================
2025-10-29 13:51:12,304 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:12,304 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:51:12,304 - INFO     -   Available edges in graph: 2
2025-10-29 13:51:12,305 - INFO     -   Action index calculation:
2025-10-29 13:51:12,305 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 2 = 1
2025-10-29 13:51:12,305 - INFO     -     - clamped to [0, 1]: 1
2025-10-29 13:51:12,305 - INFO     -   ✓ Extracted merge pair from edge 1: (15, 10)
2025-10-29 13:51:12,305 - INFO     -   ✓ Validation passed
2025-10-29 13:51:12,305 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:12,305 - INFO     -     - Total states before merge: 2010
2025-10-29 13:51:12,305 - INFO     -     - Num nodes: 2
2025-10-29 13:51:12,305 - INFO     -     - Num edges: 2
2025-10-29 13:51:12,305 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:12,305 - INFO     -       - Node 15: 2000 states
2025-10-29 13:51:12,305 - INFO     -       - Node 10: 10 states
2025-10-29 13:51:12,305 - INFO     -       - Expected product: 20000 states
2025-10-29 13:51:12,306 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:12,315 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:51:12,315 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:12,316 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:51:12,417 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:12,417 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:12,417 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:51:12,666 - INFO     -   ✓ TS file received after 0.25s
2025-10-29 13:51:12,667 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:12,667 - INFO     -   Calling graph_tracker.merge_nodes([15, 10])...
2025-10-29 13:51:12,668 - INFO     - Attempting merge of nodes 15 and 10...
2025-10-29 13:51:12,668 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:51:12,668 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:12,669 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:12,669 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:51:12,669 - INFO     - 
================================================================================
2025-10-29 13:51:12,670 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:51:12,670 - INFO     - ================================================================================
2025-10-29 13:51:12,670 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:12,670 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:51:12,670 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:51:12,678 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:12,678 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:12,678 - INFO     -   - Raw ts1_f length: 344
2025-10-29 13:51:12,678 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:51:12,678 - INFO     -   - Raw f_after length: 3440
2025-10-29 13:51:12,679 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:12,679 - INFO     -   - ts1_valid: 344 / 344 (removed 0)
2025-10-29 13:51:12,679 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:51:12,681 - INFO     -   - after_valid: 2053 / 3440 (removed 1387)
2025-10-29 13:51:12,681 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:12,681 - INFO     -   - ts1_id: 15
2025-10-29 13:51:12,682 - INFO     -   - ts2_id: 10
2025-10-29 13:51:12,682 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:12,682 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:12,682 - INFO     -   - ts1_size: 344, ts2_size: 10
2025-10-29 13:51:12,682 - INFO     -   - Product space size: 3440
2025-10-29 13:51:12,682 - INFO     -   - Using product state mapping
2025-10-29 13:51:12,692 - INFO     -   - f_before_product length: 3440
2025-10-29 13:51:12,702 - INFO     -   - avg_f_before: 6.1919 (3440 valid states)
2025-10-29 13:51:12,702 - INFO     -   - avg_f_after:  9.2367 (2053 valid states)
2025-10-29 13:51:12,702 - INFO     -   - delta: 3.0449
2025-10-29 13:51:12,702 - INFO     -   - f_stability: 1.0 - |3.0449| / 6.1919 = 0.5082
2025-10-29 13:51:12,702 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:12,702 - INFO     -   - Compared 354 values
2025-10-29 13:51:12,703 - INFO     -   - Significant changes (> 5.0): 72
2025-10-29 13:51:12,703 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:12,703 - INFO     -   - states_before: 3440
2025-10-29 13:51:12,703 - INFO     -   - states_after: 3440
2025-10-29 13:51:12,703 - INFO     -   - delta_states: 0
2025-10-29 13:51:12,703 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:12,703 - INFO     -   - ts1_transitions: 3490
2025-10-29 13:51:12,703 - INFO     -   - ts2_transitions: 27
2025-10-29 13:51:12,703 - INFO     -   - merged_transitions: 14291
2025-10-29 13:51:12,703 - INFO     -   - transition_density_change: 3.1320
2025-10-29 13:51:12,703 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:12,704 - INFO     -   - search_signals present: True
2025-10-29 13:51:12,704 - INFO     -   - nodes_expanded: 2053
2025-10-29 13:51:12,704 - INFO     -   - search_depth: 5
2025-10-29 13:51:12,704 - INFO     -   - solution_cost: 4
2025-10-29 13:51:12,704 - INFO     -   - branching_factor: 6.9610
2025-10-29 13:51:12,704 - INFO     -   - solution_found: True
2025-10-29 13:51:12,704 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:12,706 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:12,706 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:51:12,706 - INFO     -   - TS15(344) + TS10(10) → 3440 states
2025-10-29 13:51:12,706 - INFO     -   - f_stability=0.508
2025-10-29 13:51:12,706 - INFO     -   - A* nodes_expanded=2053
2025-10-29 13:51:12,706 - INFO     -   - solution_found=True
2025-10-29 13:51:12,706 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:12,706 - INFO     - 
  Extracted signals:
2025-10-29 13:51:12,706 - INFO     -     - iteration: 7
2025-10-29 13:51:12,706 - INFO     -     - states_before: 3440
2025-10-29 13:51:12,706 - INFO     -     - states_after: 3440
2025-10-29 13:51:12,707 - INFO     -     - delta_states: 0
2025-10-29 13:51:12,707 - INFO     -     - f_value_stability: 0.5082
2025-10-29 13:51:12,707 - INFO     -     - num_significant_f_changes: 72
2025-10-29 13:51:12,707 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:12,707 - INFO     -     - nodes_expanded: 2053
2025-10-29 13:51:12,707 - INFO     -     - search_depth: 5
2025-10-29 13:51:12,707 - INFO     -     - solution_cost: 4
2025-10-29 13:51:12,707 - INFO     -     - branching_factor: 6.9610
2025-10-29 13:51:12,707 - INFO     -     - solution_found: True
2025-10-29 13:51:12,707 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:12,708 - INFO     - 
  Computing reward:
2025-10-29 13:51:12,708 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:12,708 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:12,708 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:12,708 - INFO     -   [1] BRANCHING FACTOR: 6.961 → score 0.204 (high BF, minimal credit)
2025-10-29 13:51:12,708 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:51:12,710 - INFO     -   [3] F-VALUE STABILITY: 0.476
2025-10-29 13:51:12,710 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:51:12,710 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:12,710 - INFO     - 
  [COMPOSITE]: 0.502
2025-10-29 13:51:12,710 - INFO     -     = 0.300*0.204 (bf)
2025-10-29 13:51:12,710 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:51:12,710 - INFO     -     + 0.350*0.476 (stability)
2025-10-29 13:51:12,710 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:12,710 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:12,711 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:12,711 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:51:12,711 - INFO     - 
  [FINAL REWARD]: 0.3045
2025-10-29 13:51:12,711 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:12,711 - INFO     -     ✓ Reward computed: 0.3045
2025-10-29 13:51:12,711 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:12,711 - INFO     -     - bf_score                       0.2039
2025-10-29 13:51:12,711 - INFO     -     - depth_score                    0.7721
2025-10-29 13:51:12,711 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:12,711 - INFO     -     - f_stability                    0.4761
2025-10-29 13:51:12,711 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:51:12,711 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:12,713 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:12,713 - INFO     -     - composite                      0.5022
2025-10-29 13:51:12,713 - INFO     -     - total                          0.3045
2025-10-29 13:51:12,713 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:12,713 - INFO     -   Num remaining nodes: 1
2025-10-29 13:51:12,713 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:51:12,713 - INFO     -   Done: True
2025-10-29 13:51:12,713 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:51:12,713 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:12,713 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:12,713 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:12,713 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:12,714 - INFO     -     - num_nodes: 1
2025-10-29 13:51:12,714 - INFO     -     - num_edges: 0
2025-10-29 13:51:12,714 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:12,714 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:51:12,714 - INFO     -   After: current_merge_step = 8
2025-10-29 13:51:12,714 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:12,714 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:12,714 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:12,715 - INFO     -   ✓ Step logged
2025-10-29 13:51:12,715 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:12,715 - INFO     -   Returning:
2025-10-29 13:51:12,715 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:12,715 - INFO     -     - reward: 0.3045
2025-10-29 13:51:12,715 - INFO     -     - done: True
2025-10-29 13:51:12,715 - INFO     -     - truncated: False
2025-10-29 13:51:12,715 - INFO     -     - info: 19 keys
2025-10-29 13:51:12,715 - INFO     - ==========================================================================================

2025-10-29 13:51:12,787 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:51:12,794 - INFO     - [Handshake] Building FD command:
2025-10-29 13:51:12,794 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:51:12,794 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_00.pddl
2025-10-29 13:51:12,794 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:51:12,798 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:51:13,400 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:51:13,400 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:51:13,400 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:51:13,730 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:51:13,730 - INFO     - Initializing GraphTracker...
2025-10-29 13:51:13,730 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:51:13,731 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:51:13,731 - INFO     -    → Node 0 has 2 states
2025-10-29 13:51:13,731 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:51:13,731 - INFO     -    → Node 1 has 2 states
2025-10-29 13:51:13,733 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:51:13,733 - INFO     -    → Node 2 has 2 states
2025-10-29 13:51:13,733 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:51:13,733 - INFO     -    → Node 3 has 2 states
2025-10-29 13:51:13,733 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:51:13,733 - INFO     -    → Node 4 has 2 states
2025-10-29 13:51:13,733 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:51:13,734 - INFO     -    → Node 5 has 5 states
2025-10-29 13:51:13,734 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:51:13,734 - INFO     -    → Node 6 has 5 states
2025-10-29 13:51:13,734 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:51:13,734 - INFO     -    → Node 7 has 5 states
2025-10-29 13:51:13,734 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:51:13,734 - INFO     -    → Node 8 has 5 states
2025-10-29 13:51:13,734 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:51:13,734 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:51:13,736 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:51:13,736 - INFO     - Added edge (0, 1)
2025-10-29 13:51:13,736 - INFO     - Added edge (0, 2)
2025-10-29 13:51:13,736 - INFO     - Added edge (0, 3)
2025-10-29 13:51:13,736 - INFO     - Added edge (0, 4)
2025-10-29 13:51:13,737 - INFO     - Added edge (0, 5)
2025-10-29 13:51:13,737 - INFO     - Added edge (0, 6)
2025-10-29 13:51:13,737 - INFO     - Added edge (0, 7)
2025-10-29 13:51:13,737 - INFO     - Added edge (0, 8)
2025-10-29 13:51:13,737 - INFO     - Added edge (1, 0)
2025-10-29 13:51:13,737 - INFO     - Added edge (1, 2)
2025-10-29 13:51:13,737 - INFO     - Added edge (1, 3)
2025-10-29 13:51:13,737 - INFO     - Added edge (1, 4)
2025-10-29 13:51:13,737 - INFO     - Added edge (1, 5)
2025-10-29 13:51:13,737 - INFO     - Added edge (1, 6)
2025-10-29 13:51:13,737 - INFO     - Added edge (1, 7)
2025-10-29 13:51:13,738 - INFO     - Added edge (1, 8)
2025-10-29 13:51:13,738 - INFO     - Added edge (2, 0)
2025-10-29 13:51:13,738 - INFO     - Added edge (2, 1)
2025-10-29 13:51:13,738 - INFO     - Added edge (2, 3)
2025-10-29 13:51:13,738 - INFO     - Added edge (2, 4)
2025-10-29 13:51:13,738 - INFO     - Added edge (2, 5)
2025-10-29 13:51:13,738 - INFO     - Added edge (2, 6)
2025-10-29 13:51:13,738 - INFO     - Added edge (2, 7)
2025-10-29 13:51:13,738 - INFO     - Added edge (2, 8)
2025-10-29 13:51:13,738 - INFO     - Added edge (3, 0)
2025-10-29 13:51:13,738 - INFO     - Added edge (3, 1)
2025-10-29 13:51:13,738 - INFO     - Added edge (3, 2)
2025-10-29 13:51:13,739 - INFO     - Added edge (3, 4)
2025-10-29 13:51:13,739 - INFO     - Added edge (3, 5)
2025-10-29 13:51:13,739 - INFO     - Added edge (3, 6)
2025-10-29 13:51:13,739 - INFO     - Added edge (3, 7)
2025-10-29 13:51:13,739 - INFO     - Added edge (3, 8)
2025-10-29 13:51:13,739 - INFO     - Added edge (4, 0)
2025-10-29 13:51:13,739 - INFO     - Added edge (4, 1)
2025-10-29 13:51:13,739 - INFO     - Added edge (4, 2)
2025-10-29 13:51:13,739 - INFO     - Added edge (4, 3)
2025-10-29 13:51:13,739 - INFO     - Added edge (4, 5)
2025-10-29 13:51:13,739 - INFO     - Added edge (4, 6)
2025-10-29 13:51:13,739 - INFO     - Added edge (4, 7)
2025-10-29 13:51:13,739 - INFO     - Added edge (4, 8)
2025-10-29 13:51:13,740 - INFO     - Added edge (5, 0)
2025-10-29 13:51:13,740 - INFO     - Added edge (5, 1)
2025-10-29 13:51:13,740 - INFO     - Added edge (5, 2)
2025-10-29 13:51:13,740 - INFO     - Added edge (5, 3)
2025-10-29 13:51:13,740 - INFO     - Added edge (5, 4)
2025-10-29 13:51:13,740 - INFO     - Added edge (6, 0)
2025-10-29 13:51:13,740 - INFO     - Added edge (6, 1)
2025-10-29 13:51:13,740 - INFO     - Added edge (6, 2)
2025-10-29 13:51:13,740 - INFO     - Added edge (6, 3)
2025-10-29 13:51:13,740 - INFO     - Added edge (6, 4)
2025-10-29 13:51:13,740 - INFO     - Added edge (7, 0)
2025-10-29 13:51:13,740 - INFO     - Added edge (7, 1)
2025-10-29 13:51:13,740 - INFO     - Added edge (7, 2)
2025-10-29 13:51:13,741 - INFO     - Added edge (7, 3)
2025-10-29 13:51:13,741 - INFO     - Added edge (7, 4)
2025-10-29 13:51:13,741 - INFO     - Added edge (8, 0)
2025-10-29 13:51:13,741 - INFO     - Added edge (8, 1)
2025-10-29 13:51:13,741 - INFO     - Added edge (8, 2)
2025-10-29 13:51:13,741 - INFO     - Added edge (8, 3)
2025-10-29 13:51:13,741 - INFO     - Added edge (8, 4)
2025-10-29 13:51:13,741 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:51:13,748 - INFO     - 
==========================================================================================
2025-10-29 13:51:13,748 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:13,748 - INFO     - ==========================================================================================
2025-10-29 13:51:13,748 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:13,748 - INFO     -   Input action: 46 (type: int)
2025-10-29 13:51:13,748 - INFO     -   Available edges in graph: 60
2025-10-29 13:51:13,748 - INFO     -   Action index calculation:
2025-10-29 13:51:13,748 - INFO     -     - action % max(num_valid_edges, 1) = 46 % 60 = 46
2025-10-29 13:51:13,748 - INFO     -     - clamped to [0, 59]: 46
2025-10-29 13:51:13,748 - INFO     -   ✓ Extracted merge pair from edge 46: (6, 1)
2025-10-29 13:51:13,748 - INFO     -   ✓ Validation passed
2025-10-29 13:51:13,748 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:13,749 - INFO     -     - Total states before merge: 30
2025-10-29 13:51:13,749 - INFO     -     - Num nodes: 9
2025-10-29 13:51:13,749 - INFO     -     - Num edges: 60
2025-10-29 13:51:13,749 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:13,749 - INFO     -       - Node 6: 5 states
2025-10-29 13:51:13,749 - INFO     -       - Node 1: 2 states
2025-10-29 13:51:13,749 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:13,749 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:13,758 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:51:13,758 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:13,758 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:51:13,859 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:13,859 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:13,859 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:51:13,860 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:13,860 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:13,860 - INFO     -   Calling graph_tracker.merge_nodes([6, 1])...
2025-10-29 13:51:13,860 - INFO     - Attempting merge of nodes 6 and 1...
2025-10-29 13:51:13,860 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:51:13,860 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:13,860 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:13,860 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:51:13,860 - INFO     - 
================================================================================
2025-10-29 13:51:13,861 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:51:13,861 - INFO     - ================================================================================
2025-10-29 13:51:13,861 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:13,861 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:51:13,861 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:51:13,861 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:13,861 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:13,862 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:13,862 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:13,862 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:13,862 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:13,862 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:13,862 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:13,862 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:13,862 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:13,862 - INFO     -   - ts1_id: 6
2025-10-29 13:51:13,862 - INFO     -   - ts2_id: 1
2025-10-29 13:51:13,862 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:13,862 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:13,862 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:51:13,863 - INFO     -   - Product space size: 10
2025-10-29 13:51:13,863 - INFO     -   - Using product state mapping
2025-10-29 13:51:13,863 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:13,863 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:51:13,863 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:51:13,863 - INFO     -   - delta: 0.7000
2025-10-29 13:51:13,863 - INFO     -   - f_stability: 1.0 - |0.7000| / 2.9000 = 0.7586
2025-10-29 13:51:13,863 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:13,863 - INFO     -   - Compared 7 values
2025-10-29 13:51:13,863 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:51:13,863 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:13,863 - INFO     -   - states_before: 10
2025-10-29 13:51:13,863 - INFO     -   - states_after: 10
2025-10-29 13:51:13,863 - INFO     -   - delta_states: 0
2025-10-29 13:51:13,863 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:13,863 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:13,864 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:13,864 - INFO     -   - merged_transitions: 37
2025-10-29 13:51:13,864 - INFO     -   - transition_density_change: 1.9000
2025-10-29 13:51:13,864 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:13,864 - INFO     -   - search_signals present: True
2025-10-29 13:51:13,864 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:13,864 - INFO     -   - search_depth: 2
2025-10-29 13:51:13,864 - INFO     -   - solution_cost: 0
2025-10-29 13:51:13,864 - INFO     -   - branching_factor: 3.7000
2025-10-29 13:51:13,864 - INFO     -   - solution_found: True
2025-10-29 13:51:13,864 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:13,866 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:13,866 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:51:13,866 - INFO     -   - TS6(5) + TS1(2) → 10 states
2025-10-29 13:51:13,866 - INFO     -   - f_stability=0.759
2025-10-29 13:51:13,866 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:13,866 - INFO     -   - solution_found=True
2025-10-29 13:51:13,866 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:13,866 - INFO     - 
  Extracted signals:
2025-10-29 13:51:13,866 - INFO     -     - iteration: 0
2025-10-29 13:51:13,867 - INFO     -     - states_before: 10
2025-10-29 13:51:13,867 - INFO     -     - states_after: 10
2025-10-29 13:51:13,867 - INFO     -     - delta_states: 0
2025-10-29 13:51:13,867 - INFO     -     - f_value_stability: 0.7586
2025-10-29 13:51:13,867 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:51:13,867 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:13,867 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:13,867 - INFO     -     - search_depth: 2
2025-10-29 13:51:13,867 - INFO     -     - solution_cost: 0
2025-10-29 13:51:13,867 - INFO     -     - branching_factor: 3.7000
2025-10-29 13:51:13,867 - INFO     -     - solution_found: True
2025-10-29 13:51:13,867 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:13,867 - INFO     - 
  Computing reward:
2025-10-29 13:51:13,868 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:13,868 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:13,868 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:13,868 - INFO     -   [1] BRANCHING FACTOR: 3.700 → score 0.607 (tolerable)
2025-10-29 13:51:13,868 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:13,868 - INFO     -   [3] F-VALUE STABILITY: 0.251
2025-10-29 13:51:13,868 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:13,868 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:13,869 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:51:13,869 - INFO     -     = 0.300*0.607 (bf)
2025-10-29 13:51:13,869 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:13,869 - INFO     -     + 0.350*0.251 (stability)
2025-10-29 13:51:13,869 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:13,869 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:13,869 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:13,869 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:13,869 - INFO     - 
  [FINAL REWARD]: 0.3236
2025-10-29 13:51:13,869 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:13,869 - INFO     -     ✓ Reward computed: 0.3236
2025-10-29 13:51:13,870 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:13,870 - INFO     -     - bf_score                       0.6067
2025-10-29 13:51:13,870 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:13,870 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:13,870 - INFO     -     - f_stability                    0.2507
2025-10-29 13:51:13,870 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:13,870 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:13,870 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:13,870 - INFO     -     - composite                      0.5618
2025-10-29 13:51:13,870 - INFO     -     - total                          0.3236
2025-10-29 13:51:13,870 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:13,870 - INFO     -   Num remaining nodes: 8
2025-10-29 13:51:13,871 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:51:13,871 - INFO     -   Done: False
2025-10-29 13:51:13,871 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:13,873 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:13,873 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:13,874 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:13,874 - INFO     -     - num_nodes: 8
2025-10-29 13:51:13,874 - INFO     -     - num_edges: 50
2025-10-29 13:51:13,874 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:13,874 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:51:13,874 - INFO     -   After: current_merge_step = 1
2025-10-29 13:51:13,874 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:13,874 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:13,874 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:13,875 - INFO     -   ✓ Step logged
2025-10-29 13:51:13,875 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:13,875 - INFO     -   Returning:
2025-10-29 13:51:13,875 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:13,875 - INFO     -     - reward: 0.3236
2025-10-29 13:51:13,875 - INFO     -     - done: False
2025-10-29 13:51:13,875 - INFO     -     - truncated: False
2025-10-29 13:51:13,875 - INFO     -     - info: 19 keys
2025-10-29 13:51:13,875 - INFO     - ==========================================================================================

2025-10-29 13:51:13,880 - INFO     - 
==========================================================================================
2025-10-29 13:51:13,880 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:13,880 - INFO     - ==========================================================================================
2025-10-29 13:51:13,880 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:13,880 - INFO     -   Input action: 5 (type: int)
2025-10-29 13:51:13,880 - INFO     -   Available edges in graph: 50
2025-10-29 13:51:13,880 - INFO     -   Action index calculation:
2025-10-29 13:51:13,880 - INFO     -     - action % max(num_valid_edges, 1) = 5 % 50 = 5
2025-10-29 13:51:13,881 - INFO     -     - clamped to [0, 49]: 5
2025-10-29 13:51:13,881 - INFO     -   ✓ Extracted merge pair from edge 5: (0, 8)
2025-10-29 13:51:13,881 - INFO     -   ✓ Validation passed
2025-10-29 13:51:13,881 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:13,881 - INFO     -     - Total states before merge: 33
2025-10-29 13:51:13,881 - INFO     -     - Num nodes: 8
2025-10-29 13:51:13,881 - INFO     -     - Num edges: 50
2025-10-29 13:51:13,881 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:13,881 - INFO     -       - Node 0: 2 states
2025-10-29 13:51:13,881 - INFO     -       - Node 8: 5 states
2025-10-29 13:51:13,881 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:13,881 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:13,888 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:51:13,889 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:13,889 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:51:13,990 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:13,990 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:13,990 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:51:13,990 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:13,991 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:13,991 - INFO     -   Calling graph_tracker.merge_nodes([0, 8])...
2025-10-29 13:51:13,991 - INFO     - Attempting merge of nodes 0 and 8...
2025-10-29 13:51:13,991 - INFO     - Successfully merged nodes into new node 10 with 10 states.
2025-10-29 13:51:13,991 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:13,991 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:13,991 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:51:13,991 - INFO     - 
================================================================================
2025-10-29 13:51:13,991 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:51:13,991 - INFO     - ================================================================================
2025-10-29 13:51:13,991 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:13,991 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:51:13,991 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:51:13,992 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:13,992 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:13,992 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:13,992 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:51:13,992 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:13,992 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:13,992 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:13,992 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:51:13,992 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:13,993 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:13,993 - INFO     -   - ts1_id: 0
2025-10-29 13:51:13,993 - INFO     -   - ts2_id: 8
2025-10-29 13:51:13,993 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:13,993 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:13,993 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:51:13,993 - INFO     -   - Product space size: 10
2025-10-29 13:51:13,993 - INFO     -   - Using product state mapping
2025-10-29 13:51:13,993 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:13,993 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:51:13,994 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:51:13,994 - INFO     -   - delta: 0.4000
2025-10-29 13:51:13,994 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:51:13,994 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:13,994 - INFO     -   - Compared 7 values
2025-10-29 13:51:13,994 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:13,994 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:13,994 - INFO     -   - states_before: 10
2025-10-29 13:51:13,994 - INFO     -   - states_after: 10
2025-10-29 13:51:13,994 - INFO     -   - delta_states: 0
2025-10-29 13:51:13,994 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:13,994 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:13,994 - INFO     -   - ts2_transitions: 13
2025-10-29 13:51:13,994 - INFO     -   - merged_transitions: 40
2025-10-29 13:51:13,995 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:51:13,995 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:13,995 - INFO     -   - search_signals present: True
2025-10-29 13:51:13,995 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:13,995 - INFO     -   - search_depth: 1
2025-10-29 13:51:13,995 - INFO     -   - solution_cost: 0
2025-10-29 13:51:13,995 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:51:13,995 - INFO     -   - solution_found: True
2025-10-29 13:51:13,995 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:13,995 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:13,995 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:51:13,995 - INFO     -   - TS0(2) + TS8(5) → 10 states
2025-10-29 13:51:13,995 - INFO     -   - f_stability=0.862
2025-10-29 13:51:13,995 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:13,995 - INFO     -   - solution_found=True
2025-10-29 13:51:13,995 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:13,995 - INFO     - 
  Extracted signals:
2025-10-29 13:51:13,995 - INFO     -     - iteration: 1
2025-10-29 13:51:13,995 - INFO     -     - states_before: 10
2025-10-29 13:51:13,995 - INFO     -     - states_after: 10
2025-10-29 13:51:13,995 - INFO     -     - delta_states: 0
2025-10-29 13:51:13,995 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:51:13,995 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:13,995 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:13,996 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:13,996 - INFO     -     - search_depth: 1
2025-10-29 13:51:13,996 - INFO     -     - solution_cost: 0
2025-10-29 13:51:13,996 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:51:13,996 - INFO     -     - solution_found: True
2025-10-29 13:51:13,996 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:13,997 - INFO     - 
  Computing reward:
2025-10-29 13:51:13,997 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:13,997 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:13,997 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:13,997 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:51:13,997 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:51:13,997 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:51:13,997 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:13,997 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:13,997 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:51:13,998 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:51:13,998 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:51:13,998 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:51:13,998 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:13,998 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:13,998 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:13,998 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:13,998 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:51:13,998 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:13,998 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:51:13,998 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:13,999 - INFO     -     - bf_score                       0.5667
2025-10-29 13:51:13,999 - INFO     -     - depth_score                    0.9119
2025-10-29 13:51:13,999 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:13,999 - INFO     -     - f_stability                    0.2913
2025-10-29 13:51:13,999 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:13,999 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:13,999 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:13,999 - INFO     -     - composite                      0.5743
2025-10-29 13:51:13,999 - INFO     -     - total                          0.3487
2025-10-29 13:51:13,999 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:13,999 - INFO     -   Num remaining nodes: 7
2025-10-29 13:51:13,999 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:51:13,999 - INFO     -   Done: False
2025-10-29 13:51:13,999 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:14,001 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:14,001 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:14,001 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:14,001 - INFO     -     - num_nodes: 7
2025-10-29 13:51:14,001 - INFO     -     - num_edges: 40
2025-10-29 13:51:14,002 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:14,002 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:51:14,002 - INFO     -   After: current_merge_step = 2
2025-10-29 13:51:14,002 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:14,002 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:14,002 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:14,003 - INFO     -   ✓ Step logged
2025-10-29 13:51:14,003 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:14,003 - INFO     -   Returning:
2025-10-29 13:51:14,003 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:14,003 - INFO     -     - reward: 0.3487
2025-10-29 13:51:14,003 - INFO     -     - done: False
2025-10-29 13:51:14,003 - INFO     -     - truncated: False
2025-10-29 13:51:14,003 - INFO     -     - info: 19 keys
2025-10-29 13:51:14,003 - INFO     - ==========================================================================================

2025-10-29 13:51:14,008 - INFO     - 
==========================================================================================
2025-10-29 13:51:14,008 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:14,008 - INFO     - ==========================================================================================
2025-10-29 13:51:14,008 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:14,009 - INFO     -   Input action: 7 (type: int)
2025-10-29 13:51:14,009 - INFO     -   Available edges in graph: 40
2025-10-29 13:51:14,009 - INFO     -   Action index calculation:
2025-10-29 13:51:14,009 - INFO     -     - action % max(num_valid_edges, 1) = 7 % 40 = 7
2025-10-29 13:51:14,009 - INFO     -     - clamped to [0, 39]: 7
2025-10-29 13:51:14,009 - INFO     -   ✓ Extracted merge pair from edge 7: (3, 4)
2025-10-29 13:51:14,009 - INFO     -   ✓ Validation passed
2025-10-29 13:51:14,009 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:14,009 - INFO     -     - Total states before merge: 36
2025-10-29 13:51:14,009 - INFO     -     - Num nodes: 7
2025-10-29 13:51:14,009 - INFO     -     - Num edges: 40
2025-10-29 13:51:14,009 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:14,009 - INFO     -       - Node 3: 2 states
2025-10-29 13:51:14,009 - INFO     -       - Node 4: 2 states
2025-10-29 13:51:14,010 - INFO     -       - Expected product: 4 states
2025-10-29 13:51:14,010 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:14,014 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:51:14,014 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:14,014 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:51:14,115 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:14,115 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:14,115 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:51:14,115 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:14,115 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:14,115 - INFO     -   Calling graph_tracker.merge_nodes([3, 4])...
2025-10-29 13:51:14,115 - INFO     - Attempting merge of nodes 3 and 4...
2025-10-29 13:51:14,115 - INFO     - Successfully merged nodes into new node 11 with 4 states.
2025-10-29 13:51:14,115 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:14,115 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:14,117 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:51:14,117 - INFO     - 
================================================================================
2025-10-29 13:51:14,117 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:51:14,117 - INFO     - ================================================================================
2025-10-29 13:51:14,117 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:14,117 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:51:14,117 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:51:14,118 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:14,118 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:14,118 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:14,118 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:14,118 - INFO     -   - Raw f_after length: 4
2025-10-29 13:51:14,118 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:14,118 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:14,118 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:14,118 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:51:14,118 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:14,118 - INFO     -   - ts1_id: 3
2025-10-29 13:51:14,118 - INFO     -   - ts2_id: 4
2025-10-29 13:51:14,118 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:14,119 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:14,119 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:51:14,119 - INFO     -   - Product space size: 4
2025-10-29 13:51:14,119 - INFO     -   - Using product state mapping
2025-10-29 13:51:14,119 - INFO     -   - f_before_product length: 4
2025-10-29 13:51:14,119 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:51:14,119 - INFO     -   - avg_f_after:  0.7500 (4 valid states)
2025-10-29 13:51:14,119 - INFO     -   - delta: 0.0000
2025-10-29 13:51:14,119 - INFO     -   - f_stability: 1.0 - |0.0000| / 0.7500 = 1.0000
2025-10-29 13:51:14,119 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:14,120 - INFO     -   - Compared 4 values
2025-10-29 13:51:14,120 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:14,120 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:14,120 - INFO     -   - states_before: 4
2025-10-29 13:51:14,120 - INFO     -   - states_after: 4
2025-10-29 13:51:14,120 - INFO     -   - delta_states: 0
2025-10-29 13:51:14,120 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:14,120 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:14,120 - INFO     -   - ts2_transitions: 3
2025-10-29 13:51:14,120 - INFO     -   - merged_transitions: 15
2025-10-29 13:51:14,120 - INFO     -   - transition_density_change: 1.7500
2025-10-29 13:51:14,120 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:14,121 - INFO     -   - search_signals present: True
2025-10-29 13:51:14,121 - INFO     -   - nodes_expanded: 4
2025-10-29 13:51:14,121 - INFO     -   - search_depth: 0
2025-10-29 13:51:14,121 - INFO     -   - solution_cost: 0
2025-10-29 13:51:14,121 - INFO     -   - branching_factor: 3.7500
2025-10-29 13:51:14,121 - INFO     -   - solution_found: True
2025-10-29 13:51:14,121 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:14,121 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:14,121 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:51:14,121 - INFO     -   - TS3(2) + TS4(2) → 4 states
2025-10-29 13:51:14,122 - INFO     -   - f_stability=1.000
2025-10-29 13:51:14,122 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:51:14,122 - INFO     -   - solution_found=True
2025-10-29 13:51:14,122 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:14,122 - INFO     - 
  Extracted signals:
2025-10-29 13:51:14,122 - INFO     -     - iteration: 2
2025-10-29 13:51:14,122 - INFO     -     - states_before: 4
2025-10-29 13:51:14,122 - INFO     -     - states_after: 4
2025-10-29 13:51:14,122 - INFO     -     - delta_states: 0
2025-10-29 13:51:14,122 - INFO     -     - f_value_stability: 1.0000
2025-10-29 13:51:14,122 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:14,122 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:14,122 - INFO     -     - nodes_expanded: 4
2025-10-29 13:51:14,123 - INFO     -     - search_depth: 0
2025-10-29 13:51:14,123 - INFO     -     - solution_cost: 0
2025-10-29 13:51:14,123 - INFO     -     - branching_factor: 3.7500
2025-10-29 13:51:14,123 - INFO     -     - solution_found: True
2025-10-29 13:51:14,123 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:14,123 - INFO     - 
  Computing reward:
2025-10-29 13:51:14,123 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:14,123 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:14,123 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:14,123 - INFO     -   [1] BRANCHING FACTOR: 3.750 → score 0.600 (tolerable)
2025-10-29 13:51:14,124 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:51:14,124 - INFO     -   [3] F-VALUE STABILITY: 0.260
2025-10-29 13:51:14,124 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:14,124 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:14,124 - INFO     - 
  [COMPOSITE]: 0.491
2025-10-29 13:51:14,124 - INFO     -     = 0.300*0.600 (bf)
2025-10-29 13:51:14,124 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:51:14,125 - INFO     -     + 0.350*0.260 (stability)
2025-10-29 13:51:14,125 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:14,125 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:14,125 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:14,125 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:14,125 - INFO     - 
  [FINAL REWARD]: 0.1819
2025-10-29 13:51:14,125 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:14,125 - INFO     -     ✓ Reward computed: 0.1819
2025-10-29 13:51:14,125 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:14,125 - INFO     -     - bf_score                       0.6000
2025-10-29 13:51:14,125 - INFO     -     - depth_score                    0.5000
2025-10-29 13:51:14,125 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:14,125 - INFO     -     - f_stability                    0.2598
2025-10-29 13:51:14,126 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:14,126 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:14,126 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:14,126 - INFO     -     - composite                      0.4909
2025-10-29 13:51:14,126 - INFO     -     - total                          0.1819
2025-10-29 13:51:14,126 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:14,126 - INFO     -   Num remaining nodes: 6
2025-10-29 13:51:14,126 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:51:14,126 - INFO     -   Done: False
2025-10-29 13:51:14,126 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:14,127 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:14,127 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:14,127 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:14,127 - INFO     -     - num_nodes: 6
2025-10-29 13:51:14,127 - INFO     -     - num_edges: 28
2025-10-29 13:51:14,127 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:14,128 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:51:14,128 - INFO     -   After: current_merge_step = 3
2025-10-29 13:51:14,128 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:14,128 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:14,128 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:14,134 - INFO     -   ✓ Step logged
2025-10-29 13:51:14,134 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:14,134 - INFO     -   Returning:
2025-10-29 13:51:14,134 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:14,134 - INFO     -     - reward: 0.1819
2025-10-29 13:51:14,134 - INFO     -     - done: False
2025-10-29 13:51:14,134 - INFO     -     - truncated: False
2025-10-29 13:51:14,134 - INFO     -     - info: 19 keys
2025-10-29 13:51:14,134 - INFO     - ==========================================================================================

2025-10-29 13:51:14,138 - INFO     - 
==========================================================================================
2025-10-29 13:51:14,138 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:14,138 - INFO     - ==========================================================================================
2025-10-29 13:51:14,138 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:14,138 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:51:14,138 - INFO     -   Available edges in graph: 28
2025-10-29 13:51:14,138 - INFO     -   Action index calculation:
2025-10-29 13:51:14,138 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 28 = 3
2025-10-29 13:51:14,139 - INFO     -     - clamped to [0, 27]: 3
2025-10-29 13:51:14,139 - INFO     -   ✓ Extracted merge pair from edge 3: (2, 10)
2025-10-29 13:51:14,139 - INFO     -   ✓ Validation passed
2025-10-29 13:51:14,139 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:14,139 - INFO     -     - Total states before merge: 36
2025-10-29 13:51:14,139 - INFO     -     - Num nodes: 6
2025-10-29 13:51:14,139 - INFO     -     - Num edges: 28
2025-10-29 13:51:14,139 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:14,139 - INFO     -       - Node 2: 2 states
2025-10-29 13:51:14,139 - INFO     -       - Node 10: 10 states
2025-10-29 13:51:14,139 - INFO     -       - Expected product: 20 states
2025-10-29 13:51:14,139 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:14,144 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:51:14,144 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:14,144 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:51:14,246 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:14,246 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:14,246 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:51:14,247 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:14,247 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:14,247 - INFO     -   Calling graph_tracker.merge_nodes([2, 10])...
2025-10-29 13:51:14,247 - INFO     - Attempting merge of nodes 2 and 10...
2025-10-29 13:51:14,247 - INFO     - Successfully merged nodes into new node 12 with 20 states.
2025-10-29 13:51:14,247 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:14,247 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:14,247 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:51:14,247 - INFO     - 
================================================================================
2025-10-29 13:51:14,247 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:51:14,247 - INFO     - ================================================================================
2025-10-29 13:51:14,247 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:14,247 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:51:14,247 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:51:14,248 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:14,248 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:14,248 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:14,248 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:51:14,248 - INFO     -   - Raw f_after length: 20
2025-10-29 13:51:14,248 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:14,249 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:14,249 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:51:14,249 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:51:14,249 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:14,249 - INFO     -   - ts1_id: 2
2025-10-29 13:51:14,249 - INFO     -   - ts2_id: 10
2025-10-29 13:51:14,249 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:14,249 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:14,249 - INFO     -   - ts1_size: 2, ts2_size: 10
2025-10-29 13:51:14,249 - INFO     -   - Product space size: 20
2025-10-29 13:51:14,249 - INFO     -   - Using product state mapping
2025-10-29 13:51:14,249 - INFO     -   - f_before_product length: 20
2025-10-29 13:51:14,249 - INFO     -   - avg_f_before: 3.3500 (20 valid states)
2025-10-29 13:51:14,249 - INFO     -   - avg_f_after:  3.7000 (20 valid states)
2025-10-29 13:51:14,249 - INFO     -   - delta: 0.3500
2025-10-29 13:51:14,249 - INFO     -   - f_stability: 1.0 - |0.3500| / 3.3500 = 0.8955
2025-10-29 13:51:14,250 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:14,250 - INFO     -   - Compared 12 values
2025-10-29 13:51:14,250 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:14,250 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:14,250 - INFO     -   - states_before: 20
2025-10-29 13:51:14,250 - INFO     -   - states_after: 20
2025-10-29 13:51:14,250 - INFO     -   - delta_states: 0
2025-10-29 13:51:14,250 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:14,250 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:14,250 - INFO     -   - ts2_transitions: 40
2025-10-29 13:51:14,251 - INFO     -   - merged_transitions: 128
2025-10-29 13:51:14,251 - INFO     -   - transition_density_change: 4.1500
2025-10-29 13:51:14,251 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:14,251 - INFO     -   - search_signals present: True
2025-10-29 13:51:14,251 - INFO     -   - nodes_expanded: 20
2025-10-29 13:51:14,251 - INFO     -   - search_depth: 1
2025-10-29 13:51:14,251 - INFO     -   - solution_cost: 0
2025-10-29 13:51:14,251 - INFO     -   - branching_factor: 6.4000
2025-10-29 13:51:14,251 - INFO     -   - solution_found: True
2025-10-29 13:51:14,251 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:14,251 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:14,251 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:51:14,251 - INFO     -   - TS2(2) + TS10(10) → 20 states
2025-10-29 13:51:14,251 - INFO     -   - f_stability=0.896
2025-10-29 13:51:14,251 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:51:14,252 - INFO     -   - solution_found=True
2025-10-29 13:51:14,252 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:14,252 - INFO     - 
  Extracted signals:
2025-10-29 13:51:14,252 - INFO     -     - iteration: 3
2025-10-29 13:51:14,252 - INFO     -     - states_before: 20
2025-10-29 13:51:14,252 - INFO     -     - states_after: 20
2025-10-29 13:51:14,252 - INFO     -     - delta_states: 0
2025-10-29 13:51:14,252 - INFO     -     - f_value_stability: 0.8955
2025-10-29 13:51:14,252 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:14,252 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:14,252 - INFO     -     - nodes_expanded: 20
2025-10-29 13:51:14,252 - INFO     -     - search_depth: 1
2025-10-29 13:51:14,252 - INFO     -     - solution_cost: 0
2025-10-29 13:51:14,252 - INFO     -     - branching_factor: 6.4000
2025-10-29 13:51:14,252 - INFO     -     - solution_found: True
2025-10-29 13:51:14,252 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:14,252 - INFO     - 
  Computing reward:
2025-10-29 13:51:14,253 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:14,253 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:14,253 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:14,253 - INFO     -   [1] BRANCHING FACTOR: 6.400 → score 0.260 (high BF, minimal credit)
2025-10-29 13:51:14,253 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:51:14,253 - INFO     -   [3] F-VALUE STABILITY: 0.865
2025-10-29 13:51:14,253 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:51:14,253 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:14,253 - INFO     - 
  [COMPOSITE]: 0.683
2025-10-29 13:51:14,253 - INFO     -     = 0.300*0.260 (bf)
2025-10-29 13:51:14,253 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:51:14,253 - INFO     -     + 0.350*0.865 (stability)
2025-10-29 13:51:14,254 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:14,254 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:14,254 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:14,254 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:51:14,254 - INFO     - 
  [FINAL REWARD]: 0.8663
2025-10-29 13:51:14,254 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:14,254 - INFO     -     ✓ Reward computed: 0.8663
2025-10-29 13:51:14,254 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:14,254 - INFO     -     - bf_score                       0.2600
2025-10-29 13:51:14,254 - INFO     -     - depth_score                    0.9119
2025-10-29 13:51:14,254 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:14,254 - INFO     -     - f_stability                    0.8650
2025-10-29 13:51:14,254 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:51:14,254 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:14,254 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:14,254 - INFO     -     - composite                      0.6831
2025-10-29 13:51:14,254 - INFO     -     - total                          0.8663
2025-10-29 13:51:14,254 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:14,255 - INFO     -   Num remaining nodes: 5
2025-10-29 13:51:14,255 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:51:14,255 - INFO     -   Done: False
2025-10-29 13:51:14,255 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:14,255 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:14,256 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:14,256 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:14,256 - INFO     -     - num_nodes: 5
2025-10-29 13:51:14,256 - INFO     -     - num_edges: 18
2025-10-29 13:51:14,256 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:14,256 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:51:14,256 - INFO     -   After: current_merge_step = 4
2025-10-29 13:51:14,256 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:14,256 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:14,256 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:14,257 - INFO     -   ✓ Step logged
2025-10-29 13:51:14,257 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:14,257 - INFO     -   Returning:
2025-10-29 13:51:14,257 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:14,257 - INFO     -     - reward: 0.8663
2025-10-29 13:51:14,257 - INFO     -     - done: False
2025-10-29 13:51:14,257 - INFO     -     - truncated: False
2025-10-29 13:51:14,257 - INFO     -     - info: 19 keys
2025-10-29 13:51:14,257 - INFO     - ==========================================================================================

2025-10-29 13:51:14,261 - INFO     - 
==========================================================================================
2025-10-29 13:51:14,261 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:14,261 - INFO     - ==========================================================================================
2025-10-29 13:51:14,261 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:14,261 - INFO     -   Input action: 14 (type: int)
2025-10-29 13:51:14,261 - INFO     -   Available edges in graph: 18
2025-10-29 13:51:14,261 - INFO     -   Action index calculation:
2025-10-29 13:51:14,261 - INFO     -     - action % max(num_valid_edges, 1) = 14 % 18 = 14
2025-10-29 13:51:14,261 - INFO     -     - clamped to [0, 17]: 14
2025-10-29 13:51:14,261 - INFO     -   ✓ Extracted merge pair from edge 14: (12, 5)
2025-10-29 13:51:14,262 - INFO     -   ✓ Validation passed
2025-10-29 13:51:14,262 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:14,262 - INFO     -     - Total states before merge: 44
2025-10-29 13:51:14,262 - INFO     -     - Num nodes: 5
2025-10-29 13:51:14,262 - INFO     -     - Num edges: 18
2025-10-29 13:51:14,262 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:14,262 - INFO     -       - Node 12: 20 states
2025-10-29 13:51:14,262 - INFO     -       - Node 5: 5 states
2025-10-29 13:51:14,262 - INFO     -       - Expected product: 100 states
2025-10-29 13:51:14,262 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:14,268 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:51:14,268 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:14,268 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:51:14,369 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:14,369 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:14,369 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:51:14,372 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:14,372 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:14,372 - INFO     -   Calling graph_tracker.merge_nodes([12, 5])...
2025-10-29 13:51:14,372 - INFO     - Attempting merge of nodes 12 and 5...
2025-10-29 13:51:14,373 - INFO     - Successfully merged nodes into new node 13 with 100 states.
2025-10-29 13:51:14,373 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:14,373 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:14,373 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:51:14,373 - INFO     - 
================================================================================
2025-10-29 13:51:14,373 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:51:14,373 - INFO     - ================================================================================
2025-10-29 13:51:14,373 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:14,373 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:51:14,373 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:51:14,374 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:14,374 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:14,374 - INFO     -   - Raw ts1_f length: 20
2025-10-29 13:51:14,374 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:51:14,374 - INFO     -   - Raw f_after length: 100
2025-10-29 13:51:14,374 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:14,374 - INFO     -   - ts1_valid: 20 / 20 (removed 0)
2025-10-29 13:51:14,374 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:51:14,374 - INFO     -   - after_valid: 100 / 100 (removed 0)
2025-10-29 13:51:14,374 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:14,374 - INFO     -   - ts1_id: 12
2025-10-29 13:51:14,374 - INFO     -   - ts2_id: 5
2025-10-29 13:51:14,374 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:14,374 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:14,374 - INFO     -   - ts1_size: 20, ts2_size: 5
2025-10-29 13:51:14,375 - INFO     -   - Product space size: 100
2025-10-29 13:51:14,375 - INFO     -   - Using product state mapping
2025-10-29 13:51:14,375 - INFO     -   - f_before_product length: 100
2025-10-29 13:51:14,375 - INFO     -   - avg_f_before: 4.1400 (100 valid states)
2025-10-29 13:51:14,375 - INFO     -   - avg_f_after:  6.7600 (100 valid states)
2025-10-29 13:51:14,375 - INFO     -   - delta: 2.6200
2025-10-29 13:51:14,375 - INFO     -   - f_stability: 1.0 - |2.6200| / 4.1400 = 0.3671
2025-10-29 13:51:14,375 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:14,376 - INFO     -   - Compared 25 values
2025-10-29 13:51:14,376 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:51:14,376 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:14,376 - INFO     -   - states_before: 100
2025-10-29 13:51:14,376 - INFO     -   - states_after: 100
2025-10-29 13:51:14,376 - INFO     -   - delta_states: 0
2025-10-29 13:51:14,376 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:14,376 - INFO     -   - ts1_transitions: 128
2025-10-29 13:51:14,376 - INFO     -   - ts2_transitions: 13
2025-10-29 13:51:14,376 - INFO     -   - merged_transitions: 750
2025-10-29 13:51:14,376 - INFO     -   - transition_density_change: 6.0900
2025-10-29 13:51:14,376 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:14,376 - INFO     -   - search_signals present: True
2025-10-29 13:51:14,376 - INFO     -   - nodes_expanded: 100
2025-10-29 13:51:14,376 - INFO     -   - search_depth: 3
2025-10-29 13:51:14,377 - INFO     -   - solution_cost: 2
2025-10-29 13:51:14,377 - INFO     -   - branching_factor: 7.5000
2025-10-29 13:51:14,378 - INFO     -   - solution_found: True
2025-10-29 13:51:14,378 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:14,378 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:14,378 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:51:14,378 - INFO     -   - TS12(20) + TS5(5) → 100 states
2025-10-29 13:51:14,378 - INFO     -   - f_stability=0.367
2025-10-29 13:51:14,378 - INFO     -   - A* nodes_expanded=100
2025-10-29 13:51:14,378 - INFO     -   - solution_found=True
2025-10-29 13:51:14,378 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:14,378 - INFO     - 
  Extracted signals:
2025-10-29 13:51:14,379 - INFO     -     - iteration: 4
2025-10-29 13:51:14,379 - INFO     -     - states_before: 100
2025-10-29 13:51:14,379 - INFO     -     - states_after: 100
2025-10-29 13:51:14,379 - INFO     -     - delta_states: 0
2025-10-29 13:51:14,379 - INFO     -     - f_value_stability: 0.3671
2025-10-29 13:51:14,379 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:51:14,379 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:14,379 - INFO     -     - nodes_expanded: 100
2025-10-29 13:51:14,379 - INFO     -     - search_depth: 3
2025-10-29 13:51:14,379 - INFO     -     - solution_cost: 2
2025-10-29 13:51:14,379 - INFO     -     - branching_factor: 7.5000
2025-10-29 13:51:14,379 - INFO     -     - solution_found: True
2025-10-29 13:51:14,379 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:14,379 - INFO     - 
  Computing reward:
2025-10-29 13:51:14,379 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:14,379 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:14,379 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:14,379 - INFO     -   [1] BRANCHING FACTOR: 7.500 → score 0.150 (high BF, minimal credit)
2025-10-29 13:51:14,379 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:51:14,379 - INFO     -   [3] F-VALUE STABILITY: 0.375
2025-10-29 13:51:14,379 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:51:14,380 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:14,380 - INFO     - 
  [COMPOSITE]: 0.461
2025-10-29 13:51:14,380 - INFO     -     = 0.300*0.150 (bf)
2025-10-29 13:51:14,380 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:51:14,380 - INFO     -     + 0.350*0.375 (stability)
2025-10-29 13:51:14,380 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:14,380 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:14,381 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:14,381 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:51:14,381 - INFO     - 
  [FINAL REWARD]: 0.2221
2025-10-29 13:51:14,381 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:14,381 - INFO     -     ✓ Reward computed: 0.2221
2025-10-29 13:51:14,381 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:14,381 - INFO     -     - bf_score                       0.1500
2025-10-29 13:51:14,381 - INFO     -     - depth_score                    0.8237
2025-10-29 13:51:14,381 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:14,381 - INFO     -     - f_stability                    0.3752
2025-10-29 13:51:14,381 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:51:14,381 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:14,381 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:14,381 - INFO     -     - composite                      0.4610
2025-10-29 13:51:14,381 - INFO     -     - total                          0.2221
2025-10-29 13:51:14,381 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:14,381 - INFO     -   Num remaining nodes: 4
2025-10-29 13:51:14,381 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:51:14,381 - INFO     -   Done: False
2025-10-29 13:51:14,381 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:14,384 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:14,384 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:14,384 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:14,384 - INFO     -     - num_nodes: 4
2025-10-29 13:51:14,384 - INFO     -     - num_edges: 12
2025-10-29 13:51:14,384 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:14,384 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:51:14,384 - INFO     -   After: current_merge_step = 5
2025-10-29 13:51:14,384 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:14,384 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:14,384 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:14,385 - INFO     -   ✓ Step logged
2025-10-29 13:51:14,385 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:14,385 - INFO     -   Returning:
2025-10-29 13:51:14,385 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:14,385 - INFO     -     - reward: 0.2221
2025-10-29 13:51:14,386 - INFO     -     - done: False
2025-10-29 13:51:14,386 - INFO     -     - truncated: False
2025-10-29 13:51:14,386 - INFO     -     - info: 19 keys
2025-10-29 13:51:14,386 - INFO     - ==========================================================================================

2025-10-29 13:51:14,392 - INFO     - 
==========================================================================================
2025-10-29 13:51:14,392 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:14,392 - INFO     - ==========================================================================================
2025-10-29 13:51:14,393 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:14,393 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:51:14,393 - INFO     -   Available edges in graph: 12
2025-10-29 13:51:14,393 - INFO     -   Action index calculation:
2025-10-29 13:51:14,393 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 12 = 1
2025-10-29 13:51:14,393 - INFO     -     - clamped to [0, 11]: 1
2025-10-29 13:51:14,393 - INFO     -   ✓ Extracted merge pair from edge 1: (7, 11)
2025-10-29 13:51:14,393 - INFO     -   ✓ Validation passed
2025-10-29 13:51:14,394 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:14,394 - INFO     -     - Total states before merge: 119
2025-10-29 13:51:14,394 - INFO     -     - Num nodes: 4
2025-10-29 13:51:14,394 - INFO     -     - Num edges: 12
2025-10-29 13:51:14,394 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:14,394 - INFO     -       - Node 7: 5 states
2025-10-29 13:51:14,394 - INFO     -       - Node 11: 4 states
2025-10-29 13:51:14,394 - INFO     -       - Expected product: 20 states
2025-10-29 13:51:14,394 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:14,402 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:51:14,402 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:14,402 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:51:14,503 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:14,503 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:14,503 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:51:14,504 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:14,504 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:14,504 - INFO     -   Calling graph_tracker.merge_nodes([7, 11])...
2025-10-29 13:51:14,504 - INFO     - Attempting merge of nodes 7 and 11...
2025-10-29 13:51:14,504 - INFO     - Successfully merged nodes into new node 14 with 20 states.
2025-10-29 13:51:14,504 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:14,504 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:14,504 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:51:14,504 - INFO     - 
================================================================================
2025-10-29 13:51:14,505 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:51:14,505 - INFO     - ================================================================================
2025-10-29 13:51:14,505 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:14,505 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:51:14,505 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:51:14,506 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:14,506 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:14,506 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:14,506 - INFO     -   - Raw ts2_f length: 4
2025-10-29 13:51:14,506 - INFO     -   - Raw f_after length: 20
2025-10-29 13:51:14,506 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:14,506 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:14,506 - INFO     -   - ts2_valid: 4 / 4 (removed -4)
2025-10-29 13:51:14,507 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:51:14,507 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:14,507 - INFO     -   - ts1_id: 7
2025-10-29 13:51:14,507 - INFO     -   - ts2_id: 11
2025-10-29 13:51:14,507 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:14,507 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:14,507 - INFO     -   - ts1_size: 5, ts2_size: 4
2025-10-29 13:51:14,507 - INFO     -   - Product space size: 20
2025-10-29 13:51:14,507 - INFO     -   - Using product state mapping
2025-10-29 13:51:14,507 - INFO     -   - f_before_product length: 20
2025-10-29 13:51:14,508 - INFO     -   - avg_f_before: 2.8000 (20 valid states)
2025-10-29 13:51:14,508 - INFO     -   - avg_f_after:  4.1000 (20 valid states)
2025-10-29 13:51:14,508 - INFO     -   - delta: 1.3000
2025-10-29 13:51:14,508 - INFO     -   - f_stability: 1.0 - |1.3000| / 2.8000 = 0.5357
2025-10-29 13:51:14,508 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:14,508 - INFO     -   - Compared 9 values
2025-10-29 13:51:14,509 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:51:14,509 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:14,509 - INFO     -   - states_before: 20
2025-10-29 13:51:14,509 - INFO     -   - states_after: 20
2025-10-29 13:51:14,509 - INFO     -   - delta_states: 0
2025-10-29 13:51:14,509 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:14,509 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:14,509 - INFO     -   - ts2_transitions: 15
2025-10-29 13:51:14,509 - INFO     -   - merged_transitions: 97
2025-10-29 13:51:14,509 - INFO     -   - transition_density_change: 3.4500
2025-10-29 13:51:14,510 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:14,510 - INFO     -   - search_signals present: True
2025-10-29 13:51:14,510 - INFO     -   - nodes_expanded: 20
2025-10-29 13:51:14,510 - INFO     -   - search_depth: 2
2025-10-29 13:51:14,510 - INFO     -   - solution_cost: 2
2025-10-29 13:51:14,510 - INFO     -   - branching_factor: 4.8500
2025-10-29 13:51:14,510 - INFO     -   - solution_found: True
2025-10-29 13:51:14,510 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:14,511 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:14,511 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:51:14,511 - INFO     -   - TS7(5) + TS11(4) → 20 states
2025-10-29 13:51:14,511 - INFO     -   - f_stability=0.536
2025-10-29 13:51:14,511 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:51:14,511 - INFO     -   - solution_found=True
2025-10-29 13:51:14,512 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:14,512 - INFO     - 
  Extracted signals:
2025-10-29 13:51:14,512 - INFO     -     - iteration: 5
2025-10-29 13:51:14,512 - INFO     -     - states_before: 20
2025-10-29 13:51:14,513 - INFO     -     - states_after: 20
2025-10-29 13:51:14,513 - INFO     -     - delta_states: 0
2025-10-29 13:51:14,513 - INFO     -     - f_value_stability: 0.5357
2025-10-29 13:51:14,513 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:51:14,513 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:14,513 - INFO     -     - nodes_expanded: 20
2025-10-29 13:51:14,513 - INFO     -     - search_depth: 2
2025-10-29 13:51:14,513 - INFO     -     - solution_cost: 2
2025-10-29 13:51:14,513 - INFO     -     - branching_factor: 4.8500
2025-10-29 13:51:14,513 - INFO     -     - solution_found: True
2025-10-29 13:51:14,513 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:14,514 - INFO     - 
  Computing reward:
2025-10-29 13:51:14,514 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:14,514 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:14,514 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:14,514 - INFO     -   [1] BRANCHING FACTOR: 4.850 → score 0.453 (tolerable)
2025-10-29 13:51:14,514 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:14,515 - INFO     -   [3] F-VALUE STABILITY: 0.271
2025-10-29 13:51:14,515 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:14,515 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:14,515 - INFO     - 
  [COMPOSITE]: 0.523
2025-10-29 13:51:14,515 - INFO     -     = 0.300*0.453 (bf)
2025-10-29 13:51:14,515 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:14,516 - INFO     -     + 0.350*0.271 (stability)
2025-10-29 13:51:14,516 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:14,516 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:14,516 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:14,516 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:14,516 - INFO     - 
  [FINAL REWARD]: 0.2458
2025-10-29 13:51:14,517 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:14,517 - INFO     -     ✓ Reward computed: 0.2458
2025-10-29 13:51:14,517 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:14,517 - INFO     -     - bf_score                       0.4533
2025-10-29 13:51:14,517 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:14,517 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:14,517 - INFO     -     - f_stability                    0.2710
2025-10-29 13:51:14,517 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:14,518 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:14,518 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:14,518 - INFO     -     - composite                      0.5229
2025-10-29 13:51:14,518 - INFO     -     - total                          0.2458
2025-10-29 13:51:14,518 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:14,518 - INFO     -   Num remaining nodes: 3
2025-10-29 13:51:14,518 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:51:14,518 - INFO     -   Done: False
2025-10-29 13:51:14,519 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:14,519 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:14,520 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:14,520 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:14,520 - INFO     -     - num_nodes: 3
2025-10-29 13:51:14,520 - INFO     -     - num_edges: 6
2025-10-29 13:51:14,520 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:14,520 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:51:14,520 - INFO     -   After: current_merge_step = 6
2025-10-29 13:51:14,520 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:14,520 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:14,521 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:14,521 - INFO     -   ✓ Step logged
2025-10-29 13:51:14,522 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:14,522 - INFO     -   Returning:
2025-10-29 13:51:14,522 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:14,522 - INFO     -     - reward: 0.2458
2025-10-29 13:51:14,522 - INFO     -     - done: False
2025-10-29 13:51:14,522 - INFO     -     - truncated: False
2025-10-29 13:51:14,522 - INFO     -     - info: 19 keys
2025-10-29 13:51:14,523 - INFO     - ==========================================================================================

2025-10-29 13:51:14,528 - INFO     - 
==========================================================================================
2025-10-29 13:51:14,528 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:14,528 - INFO     - ==========================================================================================
2025-10-29 13:51:14,528 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:14,528 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:51:14,528 - INFO     -   Available edges in graph: 6
2025-10-29 13:51:14,528 - INFO     -   Action index calculation:
2025-10-29 13:51:14,528 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 6 = 2
2025-10-29 13:51:14,529 - INFO     -     - clamped to [0, 5]: 2
2025-10-29 13:51:14,529 - INFO     -   ✓ Extracted merge pair from edge 2: (13, 9)
2025-10-29 13:51:14,529 - INFO     -   ✓ Validation passed
2025-10-29 13:51:14,529 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:14,529 - INFO     -     - Total states before merge: 130
2025-10-29 13:51:14,529 - INFO     -     - Num nodes: 3
2025-10-29 13:51:14,529 - INFO     -     - Num edges: 6
2025-10-29 13:51:14,529 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:14,529 - INFO     -       - Node 13: 100 states
2025-10-29 13:51:14,529 - INFO     -       - Node 9: 10 states
2025-10-29 13:51:14,530 - INFO     -       - Expected product: 1000 states
2025-10-29 13:51:14,530 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:14,537 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:51:14,537 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:14,537 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:51:14,638 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:14,638 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:14,638 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:51:14,647 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:51:14,647 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:14,647 - INFO     -   Calling graph_tracker.merge_nodes([13, 9])...
2025-10-29 13:51:14,647 - INFO     - Attempting merge of nodes 13 and 9...
2025-10-29 13:51:14,647 - INFO     - Successfully merged nodes into new node 15 with 1000 states.
2025-10-29 13:51:14,648 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:14,648 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:14,648 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:51:14,648 - INFO     - 
================================================================================
2025-10-29 13:51:14,648 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:51:14,648 - INFO     - ================================================================================
2025-10-29 13:51:14,648 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:14,648 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:51:14,648 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:51:14,650 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:14,650 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:14,650 - INFO     -   - Raw ts1_f length: 100
2025-10-29 13:51:14,650 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:51:14,650 - INFO     -   - Raw f_after length: 1000
2025-10-29 13:51:14,650 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:14,651 - INFO     -   - ts1_valid: 100 / 100 (removed 0)
2025-10-29 13:51:14,651 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:51:14,651 - INFO     -   - after_valid: 1000 / 1000 (removed 0)
2025-10-29 13:51:14,651 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:14,652 - INFO     -   - ts1_id: 13
2025-10-29 13:51:14,652 - INFO     -   - ts2_id: 9
2025-10-29 13:51:14,652 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:14,652 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:14,652 - INFO     -   - ts1_size: 100, ts2_size: 10
2025-10-29 13:51:14,652 - INFO     -   - Product space size: 1000
2025-10-29 13:51:14,652 - INFO     -   - Using product state mapping
2025-10-29 13:51:14,654 - INFO     -   - f_before_product length: 1000
2025-10-29 13:51:14,656 - INFO     -   - avg_f_before: 6.9580 (1000 valid states)
2025-10-29 13:51:14,656 - INFO     -   - avg_f_after:  11.0440 (1000 valid states)
2025-10-29 13:51:14,656 - INFO     -   - delta: 4.0860
2025-10-29 13:51:14,656 - INFO     -   - f_stability: 1.0 - |4.0860| / 6.9580 = 0.4128
2025-10-29 13:51:14,657 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:14,657 - INFO     -   - Compared 110 values
2025-10-29 13:51:14,657 - INFO     -   - Significant changes (> 5.0): 53
2025-10-29 13:51:14,657 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:14,657 - INFO     -   - states_before: 1000
2025-10-29 13:51:14,657 - INFO     -   - states_after: 1000
2025-10-29 13:51:14,657 - INFO     -   - delta_states: 0
2025-10-29 13:51:14,657 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:14,657 - INFO     -   - ts1_transitions: 750
2025-10-29 13:51:14,657 - INFO     -   - ts2_transitions: 37
2025-10-29 13:51:14,657 - INFO     -   - merged_transitions: 6800
2025-10-29 13:51:14,657 - INFO     -   - transition_density_change: 6.0130
2025-10-29 13:51:14,657 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:14,657 - INFO     -   - search_signals present: True
2025-10-29 13:51:14,657 - INFO     -   - nodes_expanded: 1000
2025-10-29 13:51:14,657 - INFO     -   - search_depth: 5
2025-10-29 13:51:14,657 - INFO     -   - solution_cost: 2
2025-10-29 13:51:14,657 - INFO     -   - branching_factor: 6.8000
2025-10-29 13:51:14,657 - INFO     -   - solution_found: True
2025-10-29 13:51:14,657 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:14,658 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:14,658 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:51:14,658 - INFO     -   - TS13(100) + TS9(10) → 1000 states
2025-10-29 13:51:14,658 - INFO     -   - f_stability=0.413
2025-10-29 13:51:14,658 - INFO     -   - A* nodes_expanded=1000
2025-10-29 13:51:14,658 - INFO     -   - solution_found=True
2025-10-29 13:51:14,658 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:14,659 - INFO     - 
  Extracted signals:
2025-10-29 13:51:14,659 - INFO     -     - iteration: 6
2025-10-29 13:51:14,659 - INFO     -     - states_before: 1000
2025-10-29 13:51:14,659 - INFO     -     - states_after: 1000
2025-10-29 13:51:14,659 - INFO     -     - delta_states: 0
2025-10-29 13:51:14,659 - INFO     -     - f_value_stability: 0.4128
2025-10-29 13:51:14,659 - INFO     -     - num_significant_f_changes: 53
2025-10-29 13:51:14,659 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:14,659 - INFO     -     - nodes_expanded: 1000
2025-10-29 13:51:14,659 - INFO     -     - search_depth: 5
2025-10-29 13:51:14,659 - INFO     -     - solution_cost: 2
2025-10-29 13:51:14,660 - INFO     -     - branching_factor: 6.8000
2025-10-29 13:51:14,660 - INFO     -     - solution_found: True
2025-10-29 13:51:14,660 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:14,660 - INFO     - 
  Computing reward:
2025-10-29 13:51:14,660 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:14,660 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:14,660 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:14,660 - INFO     -   [1] BRANCHING FACTOR: 6.800 → score 0.220 (high BF, minimal credit)
2025-10-29 13:51:14,661 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:51:14,661 - INFO     -   [3] F-VALUE STABILITY: 0.503
2025-10-29 13:51:14,661 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:14,662 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:14,662 - INFO     - 
  [COMPOSITE]: 0.517
2025-10-29 13:51:14,662 - INFO     -     = 0.300*0.220 (bf)
2025-10-29 13:51:14,662 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:51:14,662 - INFO     -     + 0.350*0.503 (stability)
2025-10-29 13:51:14,662 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:14,662 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:14,662 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:14,663 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:14,663 - INFO     - 
  [FINAL REWARD]: 0.4331
2025-10-29 13:51:14,663 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:14,663 - INFO     -     ✓ Reward computed: 0.4331
2025-10-29 13:51:14,663 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:14,663 - INFO     -     - bf_score                       0.2200
2025-10-29 13:51:14,664 - INFO     -     - depth_score                    0.7721
2025-10-29 13:51:14,664 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:14,664 - INFO     -     - f_stability                    0.5032
2025-10-29 13:51:14,664 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:14,664 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:14,664 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:14,664 - INFO     -     - composite                      0.5165
2025-10-29 13:51:14,664 - INFO     -     - total                          0.4331
2025-10-29 13:51:14,664 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:14,664 - INFO     -   Num remaining nodes: 2
2025-10-29 13:51:14,664 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:51:14,665 - INFO     -   Done: False
2025-10-29 13:51:14,665 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:14,665 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:14,665 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:14,665 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:14,665 - INFO     -     - num_nodes: 2
2025-10-29 13:51:14,665 - INFO     -     - num_edges: 2
2025-10-29 13:51:14,666 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:14,666 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:51:14,666 - INFO     -   After: current_merge_step = 7
2025-10-29 13:51:14,666 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:14,666 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:14,666 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:14,666 - INFO     -   ✓ Step logged
2025-10-29 13:51:14,667 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:14,667 - INFO     -   Returning:
2025-10-29 13:51:14,667 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:14,667 - INFO     -     - reward: 0.4331
2025-10-29 13:51:14,667 - INFO     -     - done: False
2025-10-29 13:51:14,667 - INFO     -     - truncated: False
2025-10-29 13:51:14,667 - INFO     -     - info: 19 keys
2025-10-29 13:51:14,667 - INFO     - ==========================================================================================

2025-10-29 13:51:14,673 - INFO     - 
==========================================================================================
2025-10-29 13:51:14,673 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:14,673 - INFO     - ==========================================================================================
2025-10-29 13:51:14,673 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:14,673 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:51:14,673 - INFO     -   Available edges in graph: 2
2025-10-29 13:51:14,673 - INFO     -   Action index calculation:
2025-10-29 13:51:14,673 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:51:14,673 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:51:14,673 - INFO     -   ✓ Extracted merge pair from edge 0: (14, 15)
2025-10-29 13:51:14,674 - INFO     -   ✓ Validation passed
2025-10-29 13:51:14,674 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:14,674 - INFO     -     - Total states before merge: 1020
2025-10-29 13:51:14,674 - INFO     -     - Num nodes: 2
2025-10-29 13:51:14,674 - INFO     -     - Num edges: 2
2025-10-29 13:51:14,674 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:14,674 - INFO     -       - Node 14: 20 states
2025-10-29 13:51:14,674 - INFO     -       - Node 15: 1000 states
2025-10-29 13:51:14,674 - INFO     -       - Expected product: 20000 states
2025-10-29 13:51:14,674 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:14,678 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:51:14,679 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:14,679 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:51:14,779 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:14,779 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:14,779 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:51:14,996 - INFO     -   ✓ TS file received after 0.22s
2025-10-29 13:51:14,997 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:14,997 - INFO     -   Calling graph_tracker.merge_nodes([14, 15])...
2025-10-29 13:51:14,997 - INFO     - Attempting merge of nodes 14 and 15...
2025-10-29 13:51:14,997 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:51:14,997 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:14,997 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:14,997 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:51:14,997 - INFO     - 
================================================================================
2025-10-29 13:51:14,997 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:51:14,998 - INFO     - ================================================================================
2025-10-29 13:51:14,998 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:14,998 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:51:14,998 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:51:15,002 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:15,002 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:15,002 - INFO     -   - Raw ts1_f length: 20
2025-10-29 13:51:15,002 - INFO     -   - Raw ts2_f length: 142
2025-10-29 13:51:15,002 - INFO     -   - Raw f_after length: 2840
2025-10-29 13:51:15,002 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:15,002 - INFO     -   - ts1_valid: 20 / 20 (removed 0)
2025-10-29 13:51:15,002 - INFO     -   - ts2_valid: 142 / 142 (removed -142)
2025-10-29 13:51:15,003 - INFO     -   - after_valid: 1743 / 2840 (removed 1097)
2025-10-29 13:51:15,004 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:15,004 - INFO     -   - ts1_id: 14
2025-10-29 13:51:15,004 - INFO     -   - ts2_id: 15
2025-10-29 13:51:15,004 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:15,004 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:15,004 - INFO     -   - ts1_size: 20, ts2_size: 142
2025-10-29 13:51:15,004 - INFO     -   - Product space size: 2840
2025-10-29 13:51:15,004 - INFO     -   - Using product state mapping
2025-10-29 13:51:15,009 - INFO     -   - f_before_product length: 2840
2025-10-29 13:51:15,017 - INFO     -   - avg_f_before: 5.8296 (2840 valid states)
2025-10-29 13:51:15,017 - INFO     -   - avg_f_after:  10.2978 (1743 valid states)
2025-10-29 13:51:15,017 - INFO     -   - delta: 4.4682
2025-10-29 13:51:15,017 - INFO     -   - f_stability: 1.0 - |4.4682| / 5.8296 = 0.2335
2025-10-29 13:51:15,018 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:15,018 - INFO     -   - Compared 162 values
2025-10-29 13:51:15,018 - INFO     -   - Significant changes (> 5.0): 24
2025-10-29 13:51:15,018 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:15,018 - INFO     -   - states_before: 2840
2025-10-29 13:51:15,018 - INFO     -   - states_after: 2840
2025-10-29 13:51:15,018 - INFO     -   - delta_states: 0
2025-10-29 13:51:15,018 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:15,018 - INFO     -   - ts1_transitions: 97
2025-10-29 13:51:15,018 - INFO     -   - ts2_transitions: 1395
2025-10-29 13:51:15,018 - INFO     -   - merged_transitions: 12632
2025-10-29 13:51:15,018 - INFO     -   - transition_density_change: 3.9225
2025-10-29 13:51:15,019 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:15,019 - INFO     -   - search_signals present: True
2025-10-29 13:51:15,019 - INFO     -   - nodes_expanded: 1743
2025-10-29 13:51:15,019 - INFO     -   - search_depth: 5
2025-10-29 13:51:15,019 - INFO     -   - solution_cost: 4
2025-10-29 13:51:15,019 - INFO     -   - branching_factor: 7.2473
2025-10-29 13:51:15,019 - INFO     -   - solution_found: True
2025-10-29 13:51:15,019 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:15,021 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:15,022 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:51:15,022 - INFO     -   - TS14(20) + TS15(142) → 2840 states
2025-10-29 13:51:15,022 - INFO     -   - f_stability=0.234
2025-10-29 13:51:15,022 - INFO     -   - A* nodes_expanded=1743
2025-10-29 13:51:15,022 - INFO     -   - solution_found=True
2025-10-29 13:51:15,023 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:15,023 - INFO     - 
  Extracted signals:
2025-10-29 13:51:15,023 - INFO     -     - iteration: 7
2025-10-29 13:51:15,023 - INFO     -     - states_before: 2840
2025-10-29 13:51:15,023 - INFO     -     - states_after: 2840
2025-10-29 13:51:15,023 - INFO     -     - delta_states: 0
2025-10-29 13:51:15,023 - INFO     -     - f_value_stability: 0.2335
2025-10-29 13:51:15,024 - INFO     -     - num_significant_f_changes: 24
2025-10-29 13:51:15,024 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:15,024 - INFO     -     - nodes_expanded: 1743
2025-10-29 13:51:15,024 - INFO     -     - search_depth: 5
2025-10-29 13:51:15,024 - INFO     -     - solution_cost: 4
2025-10-29 13:51:15,024 - INFO     -     - branching_factor: 7.2473
2025-10-29 13:51:15,024 - INFO     -     - solution_found: True
2025-10-29 13:51:15,024 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:15,025 - WARNING  -     ⚠️  Poor F-stability: 0.2335
2025-10-29 13:51:15,026 - INFO     - 
  Computing reward:
2025-10-29 13:51:15,026 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:15,026 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:15,026 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:15,026 - INFO     -   [1] BRANCHING FACTOR: 7.247 → score 0.175 (high BF, minimal credit)
2025-10-29 13:51:15,027 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:51:15,028 - INFO     -   [3] F-VALUE STABILITY: 0.334
2025-10-29 13:51:15,028 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:51:15,028 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:15,028 - INFO     - 
  [COMPOSITE]: 0.444
2025-10-29 13:51:15,029 - INFO     -     = 0.300*0.175 (bf)
2025-10-29 13:51:15,029 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:51:15,029 - INFO     -     + 0.350*0.334 (stability)
2025-10-29 13:51:15,029 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:15,029 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:15,029 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:15,029 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:51:15,030 - INFO     - 
  [FINAL REWARD]: 0.1881
2025-10-29 13:51:15,030 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:15,030 - INFO     -     ✓ Reward computed: 0.1881
2025-10-29 13:51:15,030 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:15,030 - INFO     -     - bf_score                       0.1753
2025-10-29 13:51:15,030 - INFO     -     - depth_score                    0.7721
2025-10-29 13:51:15,030 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:15,031 - INFO     -     - f_stability                    0.3344
2025-10-29 13:51:15,031 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:51:15,031 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:15,031 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:15,031 - INFO     -     - composite                      0.4441
2025-10-29 13:51:15,031 - INFO     -     - total                          0.1881
2025-10-29 13:51:15,031 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:15,031 - INFO     -   Num remaining nodes: 1
2025-10-29 13:51:15,031 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:51:15,031 - INFO     -   Done: True
2025-10-29 13:51:15,032 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:51:15,032 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:15,032 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:15,032 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:15,033 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:15,033 - INFO     -     - num_nodes: 1
2025-10-29 13:51:15,033 - INFO     -     - num_edges: 0
2025-10-29 13:51:15,033 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:15,033 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:51:15,033 - INFO     -   After: current_merge_step = 8
2025-10-29 13:51:15,033 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:15,034 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:15,034 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:15,036 - INFO     -   ✓ Step logged
2025-10-29 13:51:15,036 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:15,036 - INFO     -   Returning:
2025-10-29 13:51:15,036 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:15,036 - INFO     -     - reward: 0.1881
2025-10-29 13:51:15,036 - INFO     -     - done: True
2025-10-29 13:51:15,036 - INFO     -     - truncated: False
2025-10-29 13:51:15,036 - INFO     -     - info: 19 keys
2025-10-29 13:51:15,036 - INFO     - ==========================================================================================

2025-10-29 13:51:15,111 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:51:15,118 - INFO     - [Handshake] Building FD command:
2025-10-29 13:51:15,118 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:51:15,118 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_00.pddl
2025-10-29 13:51:15,118 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:51:15,121 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:51:15,873 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:51:15,873 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:51:15,873 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:51:16,185 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:51:16,185 - INFO     - Initializing GraphTracker...
2025-10-29 13:51:16,185 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:51:16,187 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:51:16,187 - INFO     -    → Node 0 has 2 states
2025-10-29 13:51:16,187 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:51:16,187 - INFO     -    → Node 1 has 2 states
2025-10-29 13:51:16,187 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:51:16,187 - INFO     -    → Node 2 has 2 states
2025-10-29 13:51:16,187 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:51:16,187 - INFO     -    → Node 3 has 2 states
2025-10-29 13:51:16,187 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:51:16,187 - INFO     -    → Node 4 has 2 states
2025-10-29 13:51:16,187 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:51:16,187 - INFO     -    → Node 5 has 5 states
2025-10-29 13:51:16,188 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:51:16,188 - INFO     -    → Node 6 has 5 states
2025-10-29 13:51:16,188 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:51:16,188 - INFO     -    → Node 7 has 5 states
2025-10-29 13:51:16,188 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:51:16,188 - INFO     -    → Node 8 has 5 states
2025-10-29 13:51:16,188 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:51:16,188 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:51:16,189 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:51:16,190 - INFO     - Added edge (0, 1)
2025-10-29 13:51:16,190 - INFO     - Added edge (0, 2)
2025-10-29 13:51:16,190 - INFO     - Added edge (0, 3)
2025-10-29 13:51:16,190 - INFO     - Added edge (0, 4)
2025-10-29 13:51:16,190 - INFO     - Added edge (0, 5)
2025-10-29 13:51:16,190 - INFO     - Added edge (0, 6)
2025-10-29 13:51:16,190 - INFO     - Added edge (0, 7)
2025-10-29 13:51:16,190 - INFO     - Added edge (0, 8)
2025-10-29 13:51:16,190 - INFO     - Added edge (1, 0)
2025-10-29 13:51:16,190 - INFO     - Added edge (1, 2)
2025-10-29 13:51:16,191 - INFO     - Added edge (1, 3)
2025-10-29 13:51:16,191 - INFO     - Added edge (1, 4)
2025-10-29 13:51:16,191 - INFO     - Added edge (1, 5)
2025-10-29 13:51:16,191 - INFO     - Added edge (1, 6)
2025-10-29 13:51:16,191 - INFO     - Added edge (1, 7)
2025-10-29 13:51:16,191 - INFO     - Added edge (1, 8)
2025-10-29 13:51:16,191 - INFO     - Added edge (2, 0)
2025-10-29 13:51:16,191 - INFO     - Added edge (2, 1)
2025-10-29 13:51:16,191 - INFO     - Added edge (2, 3)
2025-10-29 13:51:16,191 - INFO     - Added edge (2, 4)
2025-10-29 13:51:16,191 - INFO     - Added edge (2, 5)
2025-10-29 13:51:16,191 - INFO     - Added edge (2, 6)
2025-10-29 13:51:16,191 - INFO     - Added edge (2, 7)
2025-10-29 13:51:16,191 - INFO     - Added edge (2, 8)
2025-10-29 13:51:16,191 - INFO     - Added edge (3, 0)
2025-10-29 13:51:16,191 - INFO     - Added edge (3, 1)
2025-10-29 13:51:16,191 - INFO     - Added edge (3, 2)
2025-10-29 13:51:16,191 - INFO     - Added edge (3, 4)
2025-10-29 13:51:16,191 - INFO     - Added edge (3, 5)
2025-10-29 13:51:16,191 - INFO     - Added edge (3, 6)
2025-10-29 13:51:16,193 - INFO     - Added edge (3, 7)
2025-10-29 13:51:16,193 - INFO     - Added edge (3, 8)
2025-10-29 13:51:16,193 - INFO     - Added edge (4, 0)
2025-10-29 13:51:16,193 - INFO     - Added edge (4, 1)
2025-10-29 13:51:16,193 - INFO     - Added edge (4, 2)
2025-10-29 13:51:16,193 - INFO     - Added edge (4, 3)
2025-10-29 13:51:16,193 - INFO     - Added edge (4, 5)
2025-10-29 13:51:16,193 - INFO     - Added edge (4, 6)
2025-10-29 13:51:16,193 - INFO     - Added edge (4, 7)
2025-10-29 13:51:16,193 - INFO     - Added edge (4, 8)
2025-10-29 13:51:16,193 - INFO     - Added edge (5, 0)
2025-10-29 13:51:16,193 - INFO     - Added edge (5, 1)
2025-10-29 13:51:16,193 - INFO     - Added edge (5, 2)
2025-10-29 13:51:16,193 - INFO     - Added edge (5, 3)
2025-10-29 13:51:16,193 - INFO     - Added edge (5, 4)
2025-10-29 13:51:16,193 - INFO     - Added edge (6, 0)
2025-10-29 13:51:16,193 - INFO     - Added edge (6, 1)
2025-10-29 13:51:16,193 - INFO     - Added edge (6, 2)
2025-10-29 13:51:16,193 - INFO     - Added edge (6, 3)
2025-10-29 13:51:16,193 - INFO     - Added edge (6, 4)
2025-10-29 13:51:16,193 - INFO     - Added edge (7, 0)
2025-10-29 13:51:16,193 - INFO     - Added edge (7, 1)
2025-10-29 13:51:16,193 - INFO     - Added edge (7, 2)
2025-10-29 13:51:16,194 - INFO     - Added edge (7, 3)
2025-10-29 13:51:16,194 - INFO     - Added edge (7, 4)
2025-10-29 13:51:16,194 - INFO     - Added edge (8, 0)
2025-10-29 13:51:16,194 - INFO     - Added edge (8, 1)
2025-10-29 13:51:16,194 - INFO     - Added edge (8, 2)
2025-10-29 13:51:16,194 - INFO     - Added edge (8, 3)
2025-10-29 13:51:16,194 - INFO     - Added edge (8, 4)
2025-10-29 13:51:16,194 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:51:16,201 - INFO     - 
==========================================================================================
2025-10-29 13:51:16,201 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:16,201 - INFO     - ==========================================================================================
2025-10-29 13:51:16,201 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:16,201 - INFO     -   Input action: 7 (type: int)
2025-10-29 13:51:16,202 - INFO     -   Available edges in graph: 60
2025-10-29 13:51:16,202 - INFO     -   Action index calculation:
2025-10-29 13:51:16,202 - INFO     -     - action % max(num_valid_edges, 1) = 7 % 60 = 7
2025-10-29 13:51:16,202 - INFO     -     - clamped to [0, 59]: 7
2025-10-29 13:51:16,202 - INFO     -   ✓ Extracted merge pair from edge 7: (0, 8)
2025-10-29 13:51:16,202 - INFO     -   ✓ Validation passed
2025-10-29 13:51:16,202 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:16,202 - INFO     -     - Total states before merge: 30
2025-10-29 13:51:16,202 - INFO     -     - Num nodes: 9
2025-10-29 13:51:16,202 - INFO     -     - Num edges: 60
2025-10-29 13:51:16,202 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:16,202 - INFO     -       - Node 0: 2 states
2025-10-29 13:51:16,202 - INFO     -       - Node 8: 5 states
2025-10-29 13:51:16,202 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:16,202 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:16,210 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:51:16,210 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:16,210 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:51:16,311 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:16,311 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:16,311 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:51:16,312 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:16,312 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:16,312 - INFO     -   Calling graph_tracker.merge_nodes([0, 8])...
2025-10-29 13:51:16,312 - INFO     - Attempting merge of nodes 0 and 8...
2025-10-29 13:51:16,312 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:51:16,312 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:16,312 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:16,312 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:51:16,312 - INFO     - 
================================================================================
2025-10-29 13:51:16,312 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:51:16,312 - INFO     - ================================================================================
2025-10-29 13:51:16,312 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:16,312 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:51:16,312 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:51:16,313 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:16,313 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:16,313 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:16,313 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:51:16,313 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:16,313 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:16,313 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:16,313 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:51:16,313 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:16,313 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:16,313 - INFO     -   - ts1_id: 0
2025-10-29 13:51:16,313 - INFO     -   - ts2_id: 8
2025-10-29 13:51:16,313 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:16,314 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:16,314 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:51:16,314 - INFO     -   - Product space size: 10
2025-10-29 13:51:16,314 - INFO     -   - Using product state mapping
2025-10-29 13:51:16,314 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:16,314 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:51:16,314 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:51:16,314 - INFO     -   - delta: 0.4000
2025-10-29 13:51:16,314 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:51:16,314 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:16,314 - INFO     -   - Compared 7 values
2025-10-29 13:51:16,314 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:16,314 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:16,314 - INFO     -   - states_before: 10
2025-10-29 13:51:16,315 - INFO     -   - states_after: 10
2025-10-29 13:51:16,315 - INFO     -   - delta_states: 0
2025-10-29 13:51:16,315 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:16,315 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:16,315 - INFO     -   - ts2_transitions: 13
2025-10-29 13:51:16,315 - INFO     -   - merged_transitions: 40
2025-10-29 13:51:16,315 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:51:16,315 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:16,315 - INFO     -   - search_signals present: True
2025-10-29 13:51:16,315 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:16,315 - INFO     -   - search_depth: 1
2025-10-29 13:51:16,315 - INFO     -   - solution_cost: 0
2025-10-29 13:51:16,315 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:51:16,315 - INFO     -   - solution_found: True
2025-10-29 13:51:16,315 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:16,316 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:16,316 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:51:16,316 - INFO     -   - TS0(2) + TS8(5) → 10 states
2025-10-29 13:51:16,316 - INFO     -   - f_stability=0.862
2025-10-29 13:51:16,316 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:16,316 - INFO     -   - solution_found=True
2025-10-29 13:51:16,316 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:16,316 - INFO     - 
  Extracted signals:
2025-10-29 13:51:16,316 - INFO     -     - iteration: 0
2025-10-29 13:51:16,316 - INFO     -     - states_before: 10
2025-10-29 13:51:16,316 - INFO     -     - states_after: 10
2025-10-29 13:51:16,316 - INFO     -     - delta_states: 0
2025-10-29 13:51:16,316 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:51:16,316 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:16,316 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:16,316 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:16,316 - INFO     -     - search_depth: 1
2025-10-29 13:51:16,317 - INFO     -     - solution_cost: 0
2025-10-29 13:51:16,317 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:51:16,317 - INFO     -     - solution_found: True
2025-10-29 13:51:16,317 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:16,317 - INFO     - 
  Computing reward:
2025-10-29 13:51:16,317 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:16,317 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:16,317 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:16,317 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:51:16,317 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:51:16,317 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:51:16,317 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:16,318 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:16,318 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:51:16,318 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:51:16,318 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:51:16,318 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:51:16,318 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:16,318 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:16,318 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:16,318 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:16,318 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:51:16,318 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:16,318 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:51:16,318 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:16,318 - INFO     -     - bf_score                       0.5667
2025-10-29 13:51:16,318 - INFO     -     - depth_score                    0.9119
2025-10-29 13:51:16,318 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:16,318 - INFO     -     - f_stability                    0.2913
2025-10-29 13:51:16,318 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:16,319 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:16,319 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:16,319 - INFO     -     - composite                      0.5743
2025-10-29 13:51:16,319 - INFO     -     - total                          0.3487
2025-10-29 13:51:16,319 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:16,319 - INFO     -   Num remaining nodes: 8
2025-10-29 13:51:16,319 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:51:16,319 - INFO     -   Done: False
2025-10-29 13:51:16,319 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:16,320 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:16,320 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:16,321 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:16,321 - INFO     -     - num_nodes: 8
2025-10-29 13:51:16,321 - INFO     -     - num_edges: 50
2025-10-29 13:51:16,321 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:16,321 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:51:16,321 - INFO     -   After: current_merge_step = 1
2025-10-29 13:51:16,321 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:16,321 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:16,321 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:16,322 - INFO     -   ✓ Step logged
2025-10-29 13:51:16,322 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:16,322 - INFO     -   Returning:
2025-10-29 13:51:16,322 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:16,322 - INFO     -     - reward: 0.3487
2025-10-29 13:51:16,322 - INFO     -     - done: False
2025-10-29 13:51:16,322 - INFO     -     - truncated: False
2025-10-29 13:51:16,322 - INFO     -     - info: 19 keys
2025-10-29 13:51:16,322 - INFO     - ==========================================================================================

2025-10-29 13:51:16,327 - INFO     - 
==========================================================================================
2025-10-29 13:51:16,327 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:16,327 - INFO     - ==========================================================================================
2025-10-29 13:51:16,327 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:16,327 - INFO     -   Input action: 9 (type: int)
2025-10-29 13:51:16,327 - INFO     -   Available edges in graph: 50
2025-10-29 13:51:16,327 - INFO     -   Action index calculation:
2025-10-29 13:51:16,327 - INFO     -     - action % max(num_valid_edges, 1) = 9 % 50 = 9
2025-10-29 13:51:16,327 - INFO     -     - clamped to [0, 49]: 9
2025-10-29 13:51:16,327 - INFO     -   ✓ Extracted merge pair from edge 9: (2, 4)
2025-10-29 13:51:16,328 - INFO     -   ✓ Validation passed
2025-10-29 13:51:16,328 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:16,328 - INFO     -     - Total states before merge: 33
2025-10-29 13:51:16,328 - INFO     -     - Num nodes: 8
2025-10-29 13:51:16,328 - INFO     -     - Num edges: 50
2025-10-29 13:51:16,328 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:16,328 - INFO     -       - Node 2: 2 states
2025-10-29 13:51:16,328 - INFO     -       - Node 4: 2 states
2025-10-29 13:51:16,328 - INFO     -       - Expected product: 4 states
2025-10-29 13:51:16,328 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:16,335 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:51:16,335 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:16,335 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:51:16,436 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:16,436 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:16,436 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:51:16,437 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:16,437 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:16,437 - INFO     -   Calling graph_tracker.merge_nodes([2, 4])...
2025-10-29 13:51:16,437 - INFO     - Attempting merge of nodes 2 and 4...
2025-10-29 13:51:16,437 - INFO     - Successfully merged nodes into new node 10 with 4 states.
2025-10-29 13:51:16,437 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:16,437 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:16,437 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:51:16,437 - INFO     - 
================================================================================
2025-10-29 13:51:16,438 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:51:16,438 - INFO     - ================================================================================
2025-10-29 13:51:16,438 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:16,438 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:51:16,438 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:51:16,438 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:16,438 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:16,438 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:16,439 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:16,439 - INFO     -   - Raw f_after length: 4
2025-10-29 13:51:16,439 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:16,439 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:16,439 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:16,439 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:51:16,439 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:16,439 - INFO     -   - ts1_id: 2
2025-10-29 13:51:16,439 - INFO     -   - ts2_id: 4
2025-10-29 13:51:16,439 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:16,439 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:16,439 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:51:16,439 - INFO     -   - Product space size: 4
2025-10-29 13:51:16,439 - INFO     -   - Using product state mapping
2025-10-29 13:51:16,440 - INFO     -   - f_before_product length: 4
2025-10-29 13:51:16,440 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:51:16,440 - INFO     -   - avg_f_after:  0.7500 (4 valid states)
2025-10-29 13:51:16,440 - INFO     -   - delta: 0.0000
2025-10-29 13:51:16,440 - INFO     -   - f_stability: 1.0 - |0.0000| / 0.7500 = 1.0000
2025-10-29 13:51:16,440 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:16,440 - INFO     -   - Compared 4 values
2025-10-29 13:51:16,440 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:16,440 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:16,440 - INFO     -   - states_before: 4
2025-10-29 13:51:16,440 - INFO     -   - states_after: 4
2025-10-29 13:51:16,441 - INFO     -   - delta_states: 0
2025-10-29 13:51:16,441 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:16,441 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:16,441 - INFO     -   - ts2_transitions: 3
2025-10-29 13:51:16,441 - INFO     -   - merged_transitions: 15
2025-10-29 13:51:16,441 - INFO     -   - transition_density_change: 1.7500
2025-10-29 13:51:16,441 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:16,441 - INFO     -   - search_signals present: True
2025-10-29 13:51:16,441 - INFO     -   - nodes_expanded: 4
2025-10-29 13:51:16,441 - INFO     -   - search_depth: 0
2025-10-29 13:51:16,441 - INFO     -   - solution_cost: 0
2025-10-29 13:51:16,441 - INFO     -   - branching_factor: 3.7500
2025-10-29 13:51:16,441 - INFO     -   - solution_found: True
2025-10-29 13:51:16,441 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:16,442 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:16,442 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:51:16,442 - INFO     -   - TS2(2) + TS4(2) → 4 states
2025-10-29 13:51:16,442 - INFO     -   - f_stability=1.000
2025-10-29 13:51:16,442 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:51:16,442 - INFO     -   - solution_found=True
2025-10-29 13:51:16,442 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:16,442 - INFO     - 
  Extracted signals:
2025-10-29 13:51:16,442 - INFO     -     - iteration: 1
2025-10-29 13:51:16,442 - INFO     -     - states_before: 4
2025-10-29 13:51:16,442 - INFO     -     - states_after: 4
2025-10-29 13:51:16,443 - INFO     -     - delta_states: 0
2025-10-29 13:51:16,443 - INFO     -     - f_value_stability: 1.0000
2025-10-29 13:51:16,443 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:16,443 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:16,443 - INFO     -     - nodes_expanded: 4
2025-10-29 13:51:16,443 - INFO     -     - search_depth: 0
2025-10-29 13:51:16,443 - INFO     -     - solution_cost: 0
2025-10-29 13:51:16,443 - INFO     -     - branching_factor: 3.7500
2025-10-29 13:51:16,443 - INFO     -     - solution_found: True
2025-10-29 13:51:16,443 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:16,443 - INFO     - 
  Computing reward:
2025-10-29 13:51:16,443 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:16,443 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:16,444 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:16,444 - INFO     -   [1] BRANCHING FACTOR: 3.750 → score 0.600 (tolerable)
2025-10-29 13:51:16,444 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:51:16,444 - INFO     -   [3] F-VALUE STABILITY: 0.260
2025-10-29 13:51:16,444 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:16,444 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:16,444 - INFO     - 
  [COMPOSITE]: 0.491
2025-10-29 13:51:16,444 - INFO     -     = 0.300*0.600 (bf)
2025-10-29 13:51:16,444 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:51:16,445 - INFO     -     + 0.350*0.260 (stability)
2025-10-29 13:51:16,445 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:16,445 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:16,445 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:16,445 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:16,445 - INFO     - 
  [FINAL REWARD]: 0.1819
2025-10-29 13:51:16,445 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:16,445 - INFO     -     ✓ Reward computed: 0.1819
2025-10-29 13:51:16,445 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:16,445 - INFO     -     - bf_score                       0.6000
2025-10-29 13:51:16,445 - INFO     -     - depth_score                    0.5000
2025-10-29 13:51:16,445 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:16,445 - INFO     -     - f_stability                    0.2598
2025-10-29 13:51:16,445 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:16,445 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:16,445 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:16,445 - INFO     -     - composite                      0.4909
2025-10-29 13:51:16,445 - INFO     -     - total                          0.1819
2025-10-29 13:51:16,446 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:16,446 - INFO     -   Num remaining nodes: 7
2025-10-29 13:51:16,446 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:51:16,446 - INFO     -   Done: False
2025-10-29 13:51:16,446 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:16,447 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:16,447 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:16,447 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:16,449 - INFO     -     - num_nodes: 7
2025-10-29 13:51:16,449 - INFO     -     - num_edges: 36
2025-10-29 13:51:16,449 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:16,449 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:51:16,449 - INFO     -   After: current_merge_step = 2
2025-10-29 13:51:16,449 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:16,449 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:16,449 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:16,450 - INFO     -   ✓ Step logged
2025-10-29 13:51:16,450 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:16,450 - INFO     -   Returning:
2025-10-29 13:51:16,450 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:16,450 - INFO     -     - reward: 0.1819
2025-10-29 13:51:16,450 - INFO     -     - done: False
2025-10-29 13:51:16,450 - INFO     -     - truncated: False
2025-10-29 13:51:16,451 - INFO     -     - info: 19 keys
2025-10-29 13:51:16,451 - INFO     - ==========================================================================================

2025-10-29 13:51:16,457 - INFO     - 
==========================================================================================
2025-10-29 13:51:16,457 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:16,458 - INFO     - ==========================================================================================
2025-10-29 13:51:16,458 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:16,458 - INFO     -   Input action: 31 (type: int)
2025-10-29 13:51:16,458 - INFO     -   Available edges in graph: 36
2025-10-29 13:51:16,458 - INFO     -   Action index calculation:
2025-10-29 13:51:16,458 - INFO     -     - action % max(num_valid_edges, 1) = 31 % 36 = 31
2025-10-29 13:51:16,458 - INFO     -     - clamped to [0, 35]: 31
2025-10-29 13:51:16,458 - INFO     -   ✓ Extracted merge pair from edge 31: (10, 3)
2025-10-29 13:51:16,458 - INFO     -   ✓ Validation passed
2025-10-29 13:51:16,458 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:16,458 - INFO     -     - Total states before merge: 33
2025-10-29 13:51:16,459 - INFO     -     - Num nodes: 7
2025-10-29 13:51:16,459 - INFO     -     - Num edges: 36
2025-10-29 13:51:16,459 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:16,459 - INFO     -       - Node 10: 4 states
2025-10-29 13:51:16,459 - INFO     -       - Node 3: 2 states
2025-10-29 13:51:16,459 - INFO     -       - Expected product: 8 states
2025-10-29 13:51:16,459 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:16,466 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:51:16,466 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:16,466 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:51:16,567 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:16,567 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:16,567 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:51:16,567 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:16,568 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:16,568 - INFO     -   Calling graph_tracker.merge_nodes([10, 3])...
2025-10-29 13:51:16,568 - INFO     - Attempting merge of nodes 10 and 3...
2025-10-29 13:51:16,568 - INFO     - Successfully merged nodes into new node 11 with 8 states.
2025-10-29 13:51:16,568 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:16,568 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:16,568 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:51:16,568 - INFO     - 
================================================================================
2025-10-29 13:51:16,568 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:51:16,568 - INFO     - ================================================================================
2025-10-29 13:51:16,568 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:16,568 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:51:16,568 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:51:16,569 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:16,569 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:16,569 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:51:16,569 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:16,569 - INFO     -   - Raw f_after length: 8
2025-10-29 13:51:16,569 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:16,569 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:51:16,569 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:16,569 - INFO     -   - after_valid: 8 / 8 (removed 0)
2025-10-29 13:51:16,569 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:16,569 - INFO     -   - ts1_id: 10
2025-10-29 13:51:16,569 - INFO     -   - ts2_id: 3
2025-10-29 13:51:16,569 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:16,569 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:16,570 - INFO     -   - ts1_size: 4, ts2_size: 2
2025-10-29 13:51:16,570 - INFO     -   - Product space size: 8
2025-10-29 13:51:16,570 - INFO     -   - Using product state mapping
2025-10-29 13:51:16,570 - INFO     -   - f_before_product length: 8
2025-10-29 13:51:16,570 - INFO     -   - avg_f_before: 0.8750 (8 valid states)
2025-10-29 13:51:16,570 - INFO     -   - avg_f_after:  1.1250 (8 valid states)
2025-10-29 13:51:16,570 - INFO     -   - delta: 0.2500
2025-10-29 13:51:16,570 - INFO     -   - f_stability: 1.0 - |0.2500| / 0.8750 = 0.7143
2025-10-29 13:51:16,570 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:16,570 - INFO     -   - Compared 6 values
2025-10-29 13:51:16,570 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:16,570 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:16,570 - INFO     -   - states_before: 8
2025-10-29 13:51:16,570 - INFO     -   - states_after: 8
2025-10-29 13:51:16,570 - INFO     -   - delta_states: 0
2025-10-29 13:51:16,570 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:16,571 - INFO     -   - ts1_transitions: 15
2025-10-29 13:51:16,571 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:16,571 - INFO     -   - merged_transitions: 60
2025-10-29 13:51:16,571 - INFO     -   - transition_density_change: 5.0000
2025-10-29 13:51:16,571 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:16,571 - INFO     -   - search_signals present: True
2025-10-29 13:51:16,571 - INFO     -   - nodes_expanded: 8
2025-10-29 13:51:16,571 - INFO     -   - search_depth: 0
2025-10-29 13:51:16,571 - INFO     -   - solution_cost: 0
2025-10-29 13:51:16,571 - INFO     -   - branching_factor: 7.5000
2025-10-29 13:51:16,571 - INFO     -   - solution_found: True
2025-10-29 13:51:16,571 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:16,571 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:16,571 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:51:16,571 - INFO     -   - TS10(4) + TS3(2) → 8 states
2025-10-29 13:51:16,572 - INFO     -   - f_stability=0.714
2025-10-29 13:51:16,572 - INFO     -   - A* nodes_expanded=8
2025-10-29 13:51:16,572 - INFO     -   - solution_found=True
2025-10-29 13:51:16,572 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:16,572 - INFO     - 
  Extracted signals:
2025-10-29 13:51:16,572 - INFO     -     - iteration: 2
2025-10-29 13:51:16,572 - INFO     -     - states_before: 8
2025-10-29 13:51:16,572 - INFO     -     - states_after: 8
2025-10-29 13:51:16,572 - INFO     -     - delta_states: 0
2025-10-29 13:51:16,572 - INFO     -     - f_value_stability: 0.7143
2025-10-29 13:51:16,572 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:16,572 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:16,572 - INFO     -     - nodes_expanded: 8
2025-10-29 13:51:16,573 - INFO     -     - search_depth: 0
2025-10-29 13:51:16,573 - INFO     -     - solution_cost: 0
2025-10-29 13:51:16,573 - INFO     -     - branching_factor: 7.5000
2025-10-29 13:51:16,573 - INFO     -     - solution_found: True
2025-10-29 13:51:16,573 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:16,573 - INFO     - 
  Computing reward:
2025-10-29 13:51:16,573 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:16,573 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:16,573 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:16,573 - INFO     -   [1] BRANCHING FACTOR: 7.500 → score 0.150 (high BF, minimal credit)
2025-10-29 13:51:16,573 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:51:16,573 - INFO     -   [3] F-VALUE STABILITY: 0.918
2025-10-29 13:51:16,574 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:51:16,574 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:16,574 - INFO     - 
  [COMPOSITE]: 0.586
2025-10-29 13:51:16,574 - INFO     -     = 0.300*0.150 (bf)
2025-10-29 13:51:16,574 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:51:16,574 - INFO     -     + 0.350*0.918 (stability)
2025-10-29 13:51:16,574 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:16,574 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:16,574 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:16,574 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:51:16,574 - INFO     - 
  [FINAL REWARD]: 0.6729
2025-10-29 13:51:16,574 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:16,574 - INFO     -     ✓ Reward computed: 0.6729
2025-10-29 13:51:16,574 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:16,574 - INFO     -     - bf_score                       0.1500
2025-10-29 13:51:16,574 - INFO     -     - depth_score                    0.5000
2025-10-29 13:51:16,575 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:16,575 - INFO     -     - f_stability                    0.9185
2025-10-29 13:51:16,575 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:51:16,575 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:16,575 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:16,575 - INFO     -     - composite                      0.5865
2025-10-29 13:51:16,575 - INFO     -     - total                          0.6729
2025-10-29 13:51:16,575 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:16,575 - INFO     -   Num remaining nodes: 6
2025-10-29 13:51:16,575 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:51:16,575 - INFO     -   Done: False
2025-10-29 13:51:16,575 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:16,575 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:16,577 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:16,577 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:16,577 - INFO     -     - num_nodes: 6
2025-10-29 13:51:16,577 - INFO     -     - num_edges: 24
2025-10-29 13:51:16,577 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:16,577 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:51:16,577 - INFO     -   After: current_merge_step = 3
2025-10-29 13:51:16,577 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:16,577 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:16,577 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:16,579 - INFO     -   ✓ Step logged
2025-10-29 13:51:16,579 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:16,579 - INFO     -   Returning:
2025-10-29 13:51:16,579 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:16,579 - INFO     -     - reward: 0.6729
2025-10-29 13:51:16,579 - INFO     -     - done: False
2025-10-29 13:51:16,579 - INFO     -     - truncated: False
2025-10-29 13:51:16,579 - INFO     -     - info: 19 keys
2025-10-29 13:51:16,580 - INFO     - ==========================================================================================

2025-10-29 13:51:16,584 - INFO     - 
==========================================================================================
2025-10-29 13:51:16,584 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:16,584 - INFO     - ==========================================================================================
2025-10-29 13:51:16,584 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:16,584 - INFO     -   Input action: 10 (type: int)
2025-10-29 13:51:16,584 - INFO     -   Available edges in graph: 24
2025-10-29 13:51:16,584 - INFO     -   Action index calculation:
2025-10-29 13:51:16,584 - INFO     -     - action % max(num_valid_edges, 1) = 10 % 24 = 10
2025-10-29 13:51:16,584 - INFO     -     - clamped to [0, 23]: 10
2025-10-29 13:51:16,584 - INFO     -   ✓ Extracted merge pair from edge 10: (6, 11)
2025-10-29 13:51:16,584 - INFO     -   ✓ Validation passed
2025-10-29 13:51:16,584 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:16,585 - INFO     -     - Total states before merge: 35
2025-10-29 13:51:16,585 - INFO     -     - Num nodes: 6
2025-10-29 13:51:16,585 - INFO     -     - Num edges: 24
2025-10-29 13:51:16,585 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:16,585 - INFO     -       - Node 6: 5 states
2025-10-29 13:51:16,585 - INFO     -       - Node 11: 8 states
2025-10-29 13:51:16,585 - INFO     -       - Expected product: 40 states
2025-10-29 13:51:16,585 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:16,591 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:51:16,591 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:16,591 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:51:16,692 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:16,692 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:16,692 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:51:16,693 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:16,693 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:16,693 - INFO     -   Calling graph_tracker.merge_nodes([6, 11])...
2025-10-29 13:51:16,693 - INFO     - Attempting merge of nodes 6 and 11...
2025-10-29 13:51:16,693 - INFO     - Successfully merged nodes into new node 12 with 40 states.
2025-10-29 13:51:16,693 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:16,693 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:16,693 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:51:16,693 - INFO     - 
================================================================================
2025-10-29 13:51:16,693 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:51:16,693 - INFO     - ================================================================================
2025-10-29 13:51:16,693 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:16,693 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:51:16,693 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:51:16,694 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:16,694 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:16,694 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:16,694 - INFO     -   - Raw ts2_f length: 8
2025-10-29 13:51:16,694 - INFO     -   - Raw f_after length: 40
2025-10-29 13:51:16,694 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:16,694 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:16,694 - INFO     -   - ts2_valid: 8 / 8 (removed -8)
2025-10-29 13:51:16,694 - INFO     -   - after_valid: 40 / 40 (removed 0)
2025-10-29 13:51:16,694 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:16,694 - INFO     -   - ts1_id: 6
2025-10-29 13:51:16,695 - INFO     -   - ts2_id: 11
2025-10-29 13:51:16,695 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:16,695 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:16,695 - INFO     -   - ts1_size: 5, ts2_size: 8
2025-10-29 13:51:16,695 - INFO     -   - Product space size: 40
2025-10-29 13:51:16,695 - INFO     -   - Using product state mapping
2025-10-29 13:51:16,695 - INFO     -   - f_before_product length: 40
2025-10-29 13:51:16,695 - INFO     -   - avg_f_before: 3.0250 (40 valid states)
2025-10-29 13:51:16,695 - INFO     -   - avg_f_after:  4.1250 (40 valid states)
2025-10-29 13:51:16,695 - INFO     -   - delta: 1.1000
2025-10-29 13:51:16,695 - INFO     -   - f_stability: 1.0 - |1.1000| / 3.0250 = 0.6364
2025-10-29 13:51:16,695 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:16,695 - INFO     -   - Compared 13 values
2025-10-29 13:51:16,695 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:16,695 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:16,695 - INFO     -   - states_before: 40
2025-10-29 13:51:16,695 - INFO     -   - states_after: 40
2025-10-29 13:51:16,695 - INFO     -   - delta_states: 0
2025-10-29 13:51:16,695 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:16,695 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:16,696 - INFO     -   - ts2_transitions: 60
2025-10-29 13:51:16,696 - INFO     -   - merged_transitions: 340
2025-10-29 13:51:16,696 - INFO     -   - transition_density_change: 6.6750
2025-10-29 13:51:16,696 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:16,696 - INFO     -   - search_signals present: True
2025-10-29 13:51:16,696 - INFO     -   - nodes_expanded: 40
2025-10-29 13:51:16,696 - INFO     -   - search_depth: 2
2025-10-29 13:51:16,696 - INFO     -   - solution_cost: 0
2025-10-29 13:51:16,696 - INFO     -   - branching_factor: 8.5000
2025-10-29 13:51:16,696 - INFO     -   - solution_found: True
2025-10-29 13:51:16,696 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:16,697 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:16,697 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:51:16,697 - INFO     -   - TS6(5) + TS11(8) → 40 states
2025-10-29 13:51:16,697 - INFO     -   - f_stability=0.636
2025-10-29 13:51:16,697 - INFO     -   - A* nodes_expanded=40
2025-10-29 13:51:16,697 - INFO     -   - solution_found=True
2025-10-29 13:51:16,697 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:16,697 - INFO     - 
  Extracted signals:
2025-10-29 13:51:16,697 - INFO     -     - iteration: 3
2025-10-29 13:51:16,697 - INFO     -     - states_before: 40
2025-10-29 13:51:16,698 - INFO     -     - states_after: 40
2025-10-29 13:51:16,698 - INFO     -     - delta_states: 0
2025-10-29 13:51:16,698 - INFO     -     - f_value_stability: 0.6364
2025-10-29 13:51:16,698 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:16,698 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:16,698 - INFO     -     - nodes_expanded: 40
2025-10-29 13:51:16,698 - INFO     -     - search_depth: 2
2025-10-29 13:51:16,698 - INFO     -     - solution_cost: 0
2025-10-29 13:51:16,698 - INFO     -     - branching_factor: 8.5000
2025-10-29 13:51:16,698 - INFO     -     - solution_found: True
2025-10-29 13:51:16,698 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:16,699 - WARNING  -     ⚠️  High branching factor: 8.5000
2025-10-29 13:51:16,699 - INFO     - 
  Computing reward:
2025-10-29 13:51:16,699 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:16,699 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:16,699 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:16,699 - INFO     -   [1] BRANCHING FACTOR: 8.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:51:16,699 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:16,700 - INFO     -   [3] F-VALUE STABILITY: 0.186
2025-10-29 13:51:16,700 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:16,700 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:16,700 - INFO     - 
  [COMPOSITE]: 0.387
2025-10-29 13:51:16,700 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:51:16,700 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:16,700 - INFO     -     + 0.350*0.186 (stability)
2025-10-29 13:51:16,700 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:16,700 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:16,700 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:16,701 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:16,701 - INFO     - 
  [FINAL REWARD]: -0.0256
2025-10-29 13:51:16,701 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:16,701 - INFO     -     ✓ Reward computed: -0.0256
2025-10-29 13:51:16,701 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:16,701 - INFO     -     - bf_score                       0.1000
2025-10-29 13:51:16,701 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:16,701 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:16,701 - INFO     -     - f_stability                    0.1861
2025-10-29 13:51:16,701 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:16,701 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:16,701 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:16,701 - INFO     -     - composite                      0.3872
2025-10-29 13:51:16,702 - INFO     -     - total                          -0.0256
2025-10-29 13:51:16,702 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:16,702 - INFO     -   Num remaining nodes: 5
2025-10-29 13:51:16,702 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:51:16,702 - INFO     -   Done: False
2025-10-29 13:51:16,702 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:16,703 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:16,703 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:16,703 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:16,703 - INFO     -     - num_nodes: 5
2025-10-29 13:51:16,703 - INFO     -     - num_edges: 18
2025-10-29 13:51:16,703 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:16,703 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:51:16,703 - INFO     -   After: current_merge_step = 4
2025-10-29 13:51:16,703 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:16,703 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:16,703 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:16,704 - INFO     -   ✓ Step logged
2025-10-29 13:51:16,704 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:16,704 - INFO     -   Returning:
2025-10-29 13:51:16,704 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:16,704 - INFO     -     - reward: -0.0256
2025-10-29 13:51:16,704 - INFO     -     - done: False
2025-10-29 13:51:16,704 - INFO     -     - truncated: False
2025-10-29 13:51:16,704 - INFO     -     - info: 19 keys
2025-10-29 13:51:16,705 - INFO     - ==========================================================================================

2025-10-29 13:51:16,710 - INFO     - 
==========================================================================================
2025-10-29 13:51:16,710 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:16,710 - INFO     - ==========================================================================================
2025-10-29 13:51:16,710 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:16,710 - INFO     -   Input action: 5 (type: int)
2025-10-29 13:51:16,710 - INFO     -   Available edges in graph: 18
2025-10-29 13:51:16,710 - INFO     -   Action index calculation:
2025-10-29 13:51:16,710 - INFO     -     - action % max(num_valid_edges, 1) = 5 % 18 = 5
2025-10-29 13:51:16,711 - INFO     -     - clamped to [0, 17]: 5
2025-10-29 13:51:16,711 - INFO     -   ✓ Extracted merge pair from edge 5: (5, 9)
2025-10-29 13:51:16,711 - INFO     -   ✓ Validation passed
2025-10-29 13:51:16,711 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:16,711 - INFO     -     - Total states before merge: 62
2025-10-29 13:51:16,711 - INFO     -     - Num nodes: 5
2025-10-29 13:51:16,711 - INFO     -     - Num edges: 18
2025-10-29 13:51:16,711 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:16,711 - INFO     -       - Node 5: 5 states
2025-10-29 13:51:16,711 - INFO     -       - Node 9: 10 states
2025-10-29 13:51:16,711 - INFO     -       - Expected product: 50 states
2025-10-29 13:51:16,711 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:16,717 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:51:16,718 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:16,718 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:51:16,819 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:16,819 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:16,819 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:51:16,820 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:16,820 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:16,820 - INFO     -   Calling graph_tracker.merge_nodes([5, 9])...
2025-10-29 13:51:16,820 - INFO     - Attempting merge of nodes 5 and 9...
2025-10-29 13:51:16,820 - INFO     - Successfully merged nodes into new node 13 with 50 states.
2025-10-29 13:51:16,820 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:16,820 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:16,820 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:51:16,820 - INFO     - 
================================================================================
2025-10-29 13:51:16,820 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:51:16,820 - INFO     - ================================================================================
2025-10-29 13:51:16,821 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:16,821 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:51:16,821 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:51:16,821 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:16,821 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:16,821 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:16,821 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:51:16,821 - INFO     -   - Raw f_after length: 50
2025-10-29 13:51:16,822 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:16,822 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:16,822 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:51:16,822 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:51:16,822 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:16,822 - INFO     -   - ts1_id: 5
2025-10-29 13:51:16,822 - INFO     -   - ts2_id: 9
2025-10-29 13:51:16,822 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:16,822 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:16,822 - INFO     -   - ts1_size: 5, ts2_size: 10
2025-10-29 13:51:16,822 - INFO     -   - Product space size: 50
2025-10-29 13:51:16,822 - INFO     -   - Using product state mapping
2025-10-29 13:51:16,822 - INFO     -   - f_before_product length: 50
2025-10-29 13:51:16,822 - INFO     -   - avg_f_before: 3.8800 (50 valid states)
2025-10-29 13:51:16,823 - INFO     -   - avg_f_after:  6.3800 (50 valid states)
2025-10-29 13:51:16,823 - INFO     -   - delta: 2.5000
2025-10-29 13:51:16,823 - INFO     -   - f_stability: 1.0 - |2.5000| / 3.8800 = 0.3557
2025-10-29 13:51:16,823 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:16,823 - INFO     -   - Compared 15 values
2025-10-29 13:51:16,823 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:51:16,823 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:16,823 - INFO     -   - states_before: 50
2025-10-29 13:51:16,823 - INFO     -   - states_after: 50
2025-10-29 13:51:16,823 - INFO     -   - delta_states: 0
2025-10-29 13:51:16,823 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:16,823 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:16,823 - INFO     -   - ts2_transitions: 40
2025-10-29 13:51:16,823 - INFO     -   - merged_transitions: 260
2025-10-29 13:51:16,823 - INFO     -   - transition_density_change: 4.1400
2025-10-29 13:51:16,823 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:16,824 - INFO     -   - search_signals present: True
2025-10-29 13:51:16,824 - INFO     -   - nodes_expanded: 50
2025-10-29 13:51:16,824 - INFO     -   - search_depth: 3
2025-10-29 13:51:16,824 - INFO     -   - solution_cost: 2
2025-10-29 13:51:16,824 - INFO     -   - branching_factor: 5.2000
2025-10-29 13:51:16,824 - INFO     -   - solution_found: True
2025-10-29 13:51:16,824 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:16,825 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:16,825 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:51:16,825 - INFO     -   - TS5(5) + TS9(10) → 50 states
2025-10-29 13:51:16,825 - INFO     -   - f_stability=0.356
2025-10-29 13:51:16,825 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:51:16,825 - INFO     -   - solution_found=True
2025-10-29 13:51:16,825 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:16,825 - INFO     - 
  Extracted signals:
2025-10-29 13:51:16,825 - INFO     -     - iteration: 4
2025-10-29 13:51:16,825 - INFO     -     - states_before: 50
2025-10-29 13:51:16,826 - INFO     -     - states_after: 50
2025-10-29 13:51:16,826 - INFO     -     - delta_states: 0
2025-10-29 13:51:16,826 - INFO     -     - f_value_stability: 0.3557
2025-10-29 13:51:16,826 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:51:16,826 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:16,826 - INFO     -     - nodes_expanded: 50
2025-10-29 13:51:16,826 - INFO     -     - search_depth: 3
2025-10-29 13:51:16,826 - INFO     -     - solution_cost: 2
2025-10-29 13:51:16,826 - INFO     -     - branching_factor: 5.2000
2025-10-29 13:51:16,826 - INFO     -     - solution_found: True
2025-10-29 13:51:16,826 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:16,826 - INFO     - 
  Computing reward:
2025-10-29 13:51:16,826 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:16,826 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:16,827 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:16,827 - INFO     -   [1] BRANCHING FACTOR: 5.200 → score 0.407 (tolerable)
2025-10-29 13:51:16,827 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:51:16,827 - INFO     -   [3] F-VALUE STABILITY: 0.532
2025-10-29 13:51:16,827 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:16,827 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:16,827 - INFO     - 
  [COMPOSITE]: 0.593
2025-10-29 13:51:16,827 - INFO     -     = 0.300*0.407 (bf)
2025-10-29 13:51:16,827 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:51:16,828 - INFO     -     + 0.350*0.532 (stability)
2025-10-29 13:51:16,828 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:16,828 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:16,828 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:16,828 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:16,828 - INFO     - 
  [FINAL REWARD]: 0.5862
2025-10-29 13:51:16,828 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:16,828 - INFO     -     ✓ Reward computed: 0.5862
2025-10-29 13:51:16,828 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:16,828 - INFO     -     - bf_score                       0.4067
2025-10-29 13:51:16,828 - INFO     -     - depth_score                    0.8237
2025-10-29 13:51:16,828 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:16,828 - INFO     -     - f_stability                    0.5325
2025-10-29 13:51:16,829 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:16,829 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:16,829 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:16,829 - INFO     -     - composite                      0.5931
2025-10-29 13:51:16,829 - INFO     -     - total                          0.5862
2025-10-29 13:51:16,829 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:16,829 - INFO     -   Num remaining nodes: 4
2025-10-29 13:51:16,829 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:51:16,829 - INFO     -   Done: False
2025-10-29 13:51:16,829 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:16,830 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:16,830 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:16,830 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:16,830 - INFO     -     - num_nodes: 4
2025-10-29 13:51:16,830 - INFO     -     - num_edges: 12
2025-10-29 13:51:16,830 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:16,830 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:51:16,830 - INFO     -   After: current_merge_step = 5
2025-10-29 13:51:16,830 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:16,831 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:16,831 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:16,831 - INFO     -   ✓ Step logged
2025-10-29 13:51:16,831 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:16,831 - INFO     -   Returning:
2025-10-29 13:51:16,831 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:16,831 - INFO     -     - reward: 0.5862
2025-10-29 13:51:16,832 - INFO     -     - done: False
2025-10-29 13:51:16,832 - INFO     -     - truncated: False
2025-10-29 13:51:16,832 - INFO     -     - info: 19 keys
2025-10-29 13:51:16,832 - INFO     - ==========================================================================================

2025-10-29 13:51:16,836 - INFO     - 
==========================================================================================
2025-10-29 13:51:16,836 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:16,837 - INFO     - ==========================================================================================
2025-10-29 13:51:16,837 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:16,837 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:51:16,837 - INFO     -   Available edges in graph: 12
2025-10-29 13:51:16,837 - INFO     -   Action index calculation:
2025-10-29 13:51:16,837 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 12 = 3
2025-10-29 13:51:16,837 - INFO     -     - clamped to [0, 11]: 3
2025-10-29 13:51:16,837 - INFO     -   ✓ Extracted merge pair from edge 3: (7, 1)
2025-10-29 13:51:16,837 - INFO     -   ✓ Validation passed
2025-10-29 13:51:16,837 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:16,837 - INFO     -     - Total states before merge: 97
2025-10-29 13:51:16,837 - INFO     -     - Num nodes: 4
2025-10-29 13:51:16,837 - INFO     -     - Num edges: 12
2025-10-29 13:51:16,837 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:16,838 - INFO     -       - Node 7: 5 states
2025-10-29 13:51:16,838 - INFO     -       - Node 1: 2 states
2025-10-29 13:51:16,838 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:16,838 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:16,844 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:51:16,844 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:16,844 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:51:16,945 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:16,945 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:16,945 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:51:16,945 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:16,946 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:16,946 - INFO     -   Calling graph_tracker.merge_nodes([7, 1])...
2025-10-29 13:51:16,946 - INFO     - Attempting merge of nodes 7 and 1...
2025-10-29 13:51:16,946 - INFO     - Successfully merged nodes into new node 14 with 10 states.
2025-10-29 13:51:16,946 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:16,946 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:16,946 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:51:16,946 - INFO     - 
================================================================================
2025-10-29 13:51:16,946 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:51:16,946 - INFO     - ================================================================================
2025-10-29 13:51:16,946 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:16,946 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:51:16,946 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:51:16,947 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:16,947 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:16,947 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:16,947 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:16,947 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:16,947 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:16,947 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:16,947 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:16,948 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:16,948 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:16,948 - INFO     -   - ts1_id: 7
2025-10-29 13:51:16,948 - INFO     -   - ts2_id: 1
2025-10-29 13:51:16,948 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:16,948 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:16,948 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:51:16,948 - INFO     -   - Product space size: 10
2025-10-29 13:51:16,948 - INFO     -   - Using product state mapping
2025-10-29 13:51:16,948 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:16,949 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:51:16,949 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:51:16,949 - INFO     -   - delta: 0.5000
2025-10-29 13:51:16,949 - INFO     -   - f_stability: 1.0 - |0.5000| / 2.8000 = 0.8214
2025-10-29 13:51:16,949 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:16,949 - INFO     -   - Compared 7 values
2025-10-29 13:51:16,949 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:16,949 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:16,949 - INFO     -   - states_before: 10
2025-10-29 13:51:16,949 - INFO     -   - states_after: 10
2025-10-29 13:51:16,949 - INFO     -   - delta_states: 0
2025-10-29 13:51:16,950 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:16,950 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:16,950 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:16,950 - INFO     -   - merged_transitions: 40
2025-10-29 13:51:16,950 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:51:16,950 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:16,950 - INFO     -   - search_signals present: True
2025-10-29 13:51:16,950 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:16,950 - INFO     -   - search_depth: 1
2025-10-29 13:51:16,950 - INFO     -   - solution_cost: 2
2025-10-29 13:51:16,950 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:51:16,951 - INFO     -   - solution_found: True
2025-10-29 13:51:16,951 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:16,951 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:16,951 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:51:16,951 - INFO     -   - TS7(5) + TS1(2) → 10 states
2025-10-29 13:51:16,951 - INFO     -   - f_stability=0.821
2025-10-29 13:51:16,951 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:16,951 - INFO     -   - solution_found=True
2025-10-29 13:51:16,951 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:16,951 - INFO     - 
  Extracted signals:
2025-10-29 13:51:16,951 - INFO     -     - iteration: 5
2025-10-29 13:51:16,951 - INFO     -     - states_before: 10
2025-10-29 13:51:16,951 - INFO     -     - states_after: 10
2025-10-29 13:51:16,952 - INFO     -     - delta_states: 0
2025-10-29 13:51:16,952 - INFO     -     - f_value_stability: 0.8214
2025-10-29 13:51:16,952 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:16,952 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:16,952 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:16,952 - INFO     -     - search_depth: 1
2025-10-29 13:51:16,952 - INFO     -     - solution_cost: 2
2025-10-29 13:51:16,952 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:51:16,952 - INFO     -     - solution_found: True
2025-10-29 13:51:16,952 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:16,952 - INFO     - 
  Computing reward:
2025-10-29 13:51:16,952 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:16,953 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:16,953 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:16,953 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:51:16,953 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:51:16,953 - INFO     -   [3] F-VALUE STABILITY: 0.593
2025-10-29 13:51:16,953 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:16,953 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:16,953 - INFO     - 
  [COMPOSITE]: 0.680
2025-10-29 13:51:16,953 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:51:16,954 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:51:16,954 - INFO     -     + 0.350*0.593 (stability)
2025-10-29 13:51:16,954 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:16,954 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:16,954 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:16,954 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:16,954 - INFO     - 
  [FINAL REWARD]: 0.7602
2025-10-29 13:51:16,954 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:16,954 - INFO     -     ✓ Reward computed: 0.7602
2025-10-29 13:51:16,954 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:16,954 - INFO     -     - bf_score                       0.5667
2025-10-29 13:51:16,954 - INFO     -     - depth_score                    0.9119
2025-10-29 13:51:16,954 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:16,954 - INFO     -     - f_stability                    0.5935
2025-10-29 13:51:16,955 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:16,955 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:16,955 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:16,955 - INFO     -     - composite                      0.6801
2025-10-29 13:51:16,955 - INFO     -     - total                          0.7602
2025-10-29 13:51:16,955 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:16,955 - INFO     -   Num remaining nodes: 3
2025-10-29 13:51:16,955 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:51:16,955 - INFO     -   Done: False
2025-10-29 13:51:16,955 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:16,956 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:16,956 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:16,956 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:16,956 - INFO     -     - num_nodes: 3
2025-10-29 13:51:16,956 - INFO     -     - num_edges: 6
2025-10-29 13:51:16,956 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:16,956 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:51:16,956 - INFO     -   After: current_merge_step = 6
2025-10-29 13:51:16,956 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:16,956 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:16,957 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:16,957 - INFO     -   ✓ Step logged
2025-10-29 13:51:16,957 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:16,957 - INFO     -   Returning:
2025-10-29 13:51:16,957 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:16,958 - INFO     -     - reward: 0.7602
2025-10-29 13:51:16,958 - INFO     -     - done: False
2025-10-29 13:51:16,958 - INFO     -     - truncated: False
2025-10-29 13:51:16,958 - INFO     -     - info: 19 keys
2025-10-29 13:51:16,958 - INFO     - ==========================================================================================

2025-10-29 13:51:16,962 - INFO     - 
==========================================================================================
2025-10-29 13:51:16,962 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:16,962 - INFO     - ==========================================================================================
2025-10-29 13:51:16,962 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:16,962 - INFO     -   Input action: 5 (type: int)
2025-10-29 13:51:16,962 - INFO     -   Available edges in graph: 6
2025-10-29 13:51:16,962 - INFO     -   Action index calculation:
2025-10-29 13:51:16,962 - INFO     -     - action % max(num_valid_edges, 1) = 5 % 6 = 5
2025-10-29 13:51:16,962 - INFO     -     - clamped to [0, 5]: 5
2025-10-29 13:51:16,962 - INFO     -   ✓ Extracted merge pair from edge 5: (14, 13)
2025-10-29 13:51:16,963 - INFO     -   ✓ Validation passed
2025-10-29 13:51:16,963 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:16,963 - INFO     -     - Total states before merge: 100
2025-10-29 13:51:16,963 - INFO     -     - Num nodes: 3
2025-10-29 13:51:16,963 - INFO     -     - Num edges: 6
2025-10-29 13:51:16,963 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:16,963 - INFO     -       - Node 14: 10 states
2025-10-29 13:51:16,963 - INFO     -       - Node 13: 50 states
2025-10-29 13:51:16,963 - INFO     -       - Expected product: 500 states
2025-10-29 13:51:16,963 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:16,969 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:51:16,969 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:16,969 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:51:17,071 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:17,071 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:17,071 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:51:17,074 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:17,074 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:17,074 - INFO     -   Calling graph_tracker.merge_nodes([14, 13])...
2025-10-29 13:51:17,075 - INFO     - Attempting merge of nodes 14 and 13...
2025-10-29 13:51:17,075 - INFO     - Successfully merged nodes into new node 15 with 500 states.
2025-10-29 13:51:17,075 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:17,075 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:17,075 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:51:17,075 - INFO     - 
================================================================================
2025-10-29 13:51:17,075 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:51:17,075 - INFO     - ================================================================================
2025-10-29 13:51:17,075 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:17,075 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:51:17,075 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:51:17,076 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:17,076 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:17,077 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:51:17,077 - INFO     -   - Raw ts2_f length: 50
2025-10-29 13:51:17,077 - INFO     -   - Raw f_after length: 500
2025-10-29 13:51:17,077 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:17,077 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:51:17,077 - INFO     -   - ts2_valid: 50 / 50 (removed -50)
2025-10-29 13:51:17,077 - INFO     -   - after_valid: 500 / 500 (removed 0)
2025-10-29 13:51:17,077 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:17,077 - INFO     -   - ts1_id: 14
2025-10-29 13:51:17,077 - INFO     -   - ts2_id: 13
2025-10-29 13:51:17,077 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:17,078 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:17,078 - INFO     -   - ts1_size: 10, ts2_size: 50
2025-10-29 13:51:17,078 - INFO     -   - Product space size: 500
2025-10-29 13:51:17,078 - INFO     -   - Using product state mapping
2025-10-29 13:51:17,079 - INFO     -   - f_before_product length: 500
2025-10-29 13:51:17,081 - INFO     -   - avg_f_before: 6.5060 (500 valid states)
2025-10-29 13:51:17,081 - INFO     -   - avg_f_after:  10.3080 (500 valid states)
2025-10-29 13:51:17,081 - INFO     -   - delta: 3.8020
2025-10-29 13:51:17,082 - INFO     -   - f_stability: 1.0 - |3.8020| / 6.5060 = 0.4156
2025-10-29 13:51:17,082 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:17,082 - INFO     -   - Compared 60 values
2025-10-29 13:51:17,082 - INFO     -   - Significant changes (> 5.0): 9
2025-10-29 13:51:17,082 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:17,082 - INFO     -   - states_before: 500
2025-10-29 13:51:17,082 - INFO     -   - states_after: 500
2025-10-29 13:51:17,082 - INFO     -   - delta_states: 0
2025-10-29 13:51:17,082 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:17,082 - INFO     -   - ts1_transitions: 40
2025-10-29 13:51:17,082 - INFO     -   - ts2_transitions: 260
2025-10-29 13:51:17,083 - INFO     -   - merged_transitions: 3200
2025-10-29 13:51:17,083 - INFO     -   - transition_density_change: 5.8000
2025-10-29 13:51:17,083 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:17,083 - INFO     -   - search_signals present: True
2025-10-29 13:51:17,083 - INFO     -   - nodes_expanded: 500
2025-10-29 13:51:17,083 - INFO     -   - search_depth: 5
2025-10-29 13:51:17,083 - INFO     -   - solution_cost: 4
2025-10-29 13:51:17,083 - INFO     -   - branching_factor: 6.4000
2025-10-29 13:51:17,083 - INFO     -   - solution_found: True
2025-10-29 13:51:17,083 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:17,084 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:17,084 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:51:17,084 - INFO     -   - TS14(10) + TS13(50) → 500 states
2025-10-29 13:51:17,084 - INFO     -   - f_stability=0.416
2025-10-29 13:51:17,084 - INFO     -   - A* nodes_expanded=500
2025-10-29 13:51:17,084 - INFO     -   - solution_found=True
2025-10-29 13:51:17,084 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:17,084 - INFO     - 
  Extracted signals:
2025-10-29 13:51:17,085 - INFO     -     - iteration: 6
2025-10-29 13:51:17,085 - INFO     -     - states_before: 500
2025-10-29 13:51:17,085 - INFO     -     - states_after: 500
2025-10-29 13:51:17,085 - INFO     -     - delta_states: 0
2025-10-29 13:51:17,085 - INFO     -     - f_value_stability: 0.4156
2025-10-29 13:51:17,085 - INFO     -     - num_significant_f_changes: 9
2025-10-29 13:51:17,085 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:17,085 - INFO     -     - nodes_expanded: 500
2025-10-29 13:51:17,085 - INFO     -     - search_depth: 5
2025-10-29 13:51:17,085 - INFO     -     - solution_cost: 4
2025-10-29 13:51:17,085 - INFO     -     - branching_factor: 6.4000
2025-10-29 13:51:17,085 - INFO     -     - solution_found: True
2025-10-29 13:51:17,085 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:17,086 - INFO     - 
  Computing reward:
2025-10-29 13:51:17,086 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:17,086 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:17,086 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:17,086 - INFO     -   [1] BRANCHING FACTOR: 6.400 → score 0.260 (high BF, minimal credit)
2025-10-29 13:51:17,086 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:51:17,087 - INFO     -   [3] F-VALUE STABILITY: 0.492
2025-10-29 13:51:17,087 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:51:17,087 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:17,087 - INFO     - 
  [COMPOSITE]: 0.525
2025-10-29 13:51:17,087 - INFO     -     = 0.300*0.260 (bf)
2025-10-29 13:51:17,087 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:51:17,087 - INFO     -     + 0.350*0.492 (stability)
2025-10-29 13:51:17,087 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:17,087 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:17,087 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:17,087 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:51:17,088 - INFO     - 
  [FINAL REWARD]: 0.3496
2025-10-29 13:51:17,088 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:17,088 - INFO     -     ✓ Reward computed: 0.3496
2025-10-29 13:51:17,088 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:17,088 - INFO     -     - bf_score                       0.2600
2025-10-29 13:51:17,088 - INFO     -     - depth_score                    0.7721
2025-10-29 13:51:17,088 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:17,088 - INFO     -     - f_stability                    0.4924
2025-10-29 13:51:17,088 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:51:17,088 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:17,088 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:17,088 - INFO     -     - composite                      0.5248
2025-10-29 13:51:17,088 - INFO     -     - total                          0.3496
2025-10-29 13:51:17,089 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:17,089 - INFO     -   Num remaining nodes: 2
2025-10-29 13:51:17,089 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:51:17,089 - INFO     -   Done: False
2025-10-29 13:51:17,089 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:17,089 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:17,089 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:17,089 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:17,089 - INFO     -     - num_nodes: 2
2025-10-29 13:51:17,090 - INFO     -     - num_edges: 2
2025-10-29 13:51:17,090 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:17,090 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:51:17,090 - INFO     -   After: current_merge_step = 7
2025-10-29 13:51:17,090 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:17,090 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:17,090 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:17,091 - INFO     -   ✓ Step logged
2025-10-29 13:51:17,091 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:17,091 - INFO     -   Returning:
2025-10-29 13:51:17,091 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:17,091 - INFO     -     - reward: 0.3496
2025-10-29 13:51:17,091 - INFO     -     - done: False
2025-10-29 13:51:17,091 - INFO     -     - truncated: False
2025-10-29 13:51:17,091 - INFO     -     - info: 19 keys
2025-10-29 13:51:17,091 - INFO     - ==========================================================================================

2025-10-29 13:51:17,095 - INFO     - 
==========================================================================================
2025-10-29 13:51:17,096 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:17,096 - INFO     - ==========================================================================================
2025-10-29 13:51:17,096 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:17,096 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:51:17,096 - INFO     -   Available edges in graph: 2
2025-10-29 13:51:17,096 - INFO     -   Action index calculation:
2025-10-29 13:51:17,096 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 2 = 1
2025-10-29 13:51:17,096 - INFO     -     - clamped to [0, 1]: 1
2025-10-29 13:51:17,096 - INFO     -   ✓ Extracted merge pair from edge 1: (15, 12)
2025-10-29 13:51:17,096 - INFO     -   ✓ Validation passed
2025-10-29 13:51:17,096 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:17,096 - INFO     -     - Total states before merge: 540
2025-10-29 13:51:17,097 - INFO     -     - Num nodes: 2
2025-10-29 13:51:17,097 - INFO     -     - Num edges: 2
2025-10-29 13:51:17,097 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:17,097 - INFO     -       - Node 15: 500 states
2025-10-29 13:51:17,097 - INFO     -       - Node 12: 40 states
2025-10-29 13:51:17,097 - INFO     -       - Expected product: 20000 states
2025-10-29 13:51:17,097 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:17,105 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:51:17,105 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:17,105 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:51:17,206 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:17,206 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:17,206 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:51:17,424 - INFO     -   ✓ TS file received after 0.22s
2025-10-29 13:51:17,425 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:17,425 - INFO     -   Calling graph_tracker.merge_nodes([15, 12])...
2025-10-29 13:51:17,425 - INFO     - Attempting merge of nodes 15 and 12...
2025-10-29 13:51:17,425 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:51:17,425 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:17,425 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:17,425 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:51:17,425 - INFO     - 
================================================================================
2025-10-29 13:51:17,425 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:51:17,425 - INFO     - ================================================================================
2025-10-29 13:51:17,425 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:17,425 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:51:17,425 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:51:17,429 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:17,429 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:17,429 - INFO     -   - Raw ts1_f length: 86
2025-10-29 13:51:17,429 - INFO     -   - Raw ts2_f length: 40
2025-10-29 13:51:17,429 - INFO     -   - Raw f_after length: 3440
2025-10-29 13:51:17,429 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:17,429 - INFO     -   - ts1_valid: 86 / 86 (removed 0)
2025-10-29 13:51:17,429 - INFO     -   - ts2_valid: 40 / 40 (removed -40)
2025-10-29 13:51:17,430 - INFO     -   - after_valid: 2004 / 3440 (removed 1436)
2025-10-29 13:51:17,431 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:17,431 - INFO     -   - ts1_id: 15
2025-10-29 13:51:17,431 - INFO     -   - ts2_id: 12
2025-10-29 13:51:17,431 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:17,431 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:17,431 - INFO     -   - ts1_size: 86, ts2_size: 40
2025-10-29 13:51:17,431 - INFO     -   - Product space size: 3440
2025-10-29 13:51:17,431 - INFO     -   - Using product state mapping
2025-10-29 13:51:17,436 - INFO     -   - f_before_product length: 3440
2025-10-29 13:51:17,443 - INFO     -   - avg_f_before: 5.1035 (3440 valid states)
2025-10-29 13:51:17,443 - INFO     -   - avg_f_after:  8.6537 (2004 valid states)
2025-10-29 13:51:17,444 - INFO     -   - delta: 3.5502
2025-10-29 13:51:17,444 - INFO     -   - f_stability: 1.0 - |3.5502| / 5.1035 = 0.3044
2025-10-29 13:51:17,444 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:17,444 - INFO     -   - Compared 126 values
2025-10-29 13:51:17,444 - INFO     -   - Significant changes (> 5.0): 14
2025-10-29 13:51:17,444 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:17,444 - INFO     -   - states_before: 3440
2025-10-29 13:51:17,444 - INFO     -   - states_after: 3440
2025-10-29 13:51:17,444 - INFO     -   - delta_states: 0
2025-10-29 13:51:17,444 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:17,444 - INFO     -   - ts1_transitions: 841
2025-10-29 13:51:17,444 - INFO     -   - ts2_transitions: 340
2025-10-29 13:51:17,444 - INFO     -   - merged_transitions: 15460
2025-10-29 13:51:17,444 - INFO     -   - transition_density_change: 4.1509
2025-10-29 13:51:17,444 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:17,445 - INFO     -   - search_signals present: True
2025-10-29 13:51:17,445 - INFO     -   - nodes_expanded: 2004
2025-10-29 13:51:17,445 - INFO     -   - search_depth: 5
2025-10-29 13:51:17,445 - INFO     -   - solution_cost: 4
2025-10-29 13:51:17,445 - INFO     -   - branching_factor: 7.7146
2025-10-29 13:51:17,445 - INFO     -   - solution_found: True
2025-10-29 13:51:17,445 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:17,446 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:17,446 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:51:17,446 - INFO     -   - TS15(86) + TS12(40) → 3440 states
2025-10-29 13:51:17,446 - INFO     -   - f_stability=0.304
2025-10-29 13:51:17,446 - INFO     -   - A* nodes_expanded=2004
2025-10-29 13:51:17,446 - INFO     -   - solution_found=True
2025-10-29 13:51:17,447 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:17,447 - INFO     - 
  Extracted signals:
2025-10-29 13:51:17,447 - INFO     -     - iteration: 7
2025-10-29 13:51:17,447 - INFO     -     - states_before: 3440
2025-10-29 13:51:17,447 - INFO     -     - states_after: 3440
2025-10-29 13:51:17,447 - INFO     -     - delta_states: 0
2025-10-29 13:51:17,447 - INFO     -     - f_value_stability: 0.3044
2025-10-29 13:51:17,447 - INFO     -     - num_significant_f_changes: 14
2025-10-29 13:51:17,447 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:17,447 - INFO     -     - nodes_expanded: 2004
2025-10-29 13:51:17,447 - INFO     -     - search_depth: 5
2025-10-29 13:51:17,447 - INFO     -     - solution_cost: 4
2025-10-29 13:51:17,447 - INFO     -     - branching_factor: 7.7146
2025-10-29 13:51:17,447 - INFO     -     - solution_found: True
2025-10-29 13:51:17,447 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:17,448 - INFO     - 
  Computing reward:
2025-10-29 13:51:17,448 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:17,448 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:17,448 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:17,448 - INFO     -   [1] BRANCHING FACTOR: 7.715 → score 0.129 (high BF, minimal credit)
2025-10-29 13:51:17,448 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:51:17,449 - INFO     -   [3] F-VALUE STABILITY: 0.146
2025-10-29 13:51:17,450 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:17,450 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:17,450 - INFO     - 
  [COMPOSITE]: 0.364
2025-10-29 13:51:17,450 - INFO     -     = 0.300*0.129 (bf)
2025-10-29 13:51:17,450 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:51:17,450 - INFO     -     + 0.350*0.146 (stability)
2025-10-29 13:51:17,450 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:17,450 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:17,450 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:17,450 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:17,451 - INFO     - 
  [FINAL REWARD]: -0.0721
2025-10-29 13:51:17,451 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:17,451 - INFO     -     ✓ Reward computed: -0.0721
2025-10-29 13:51:17,451 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:17,451 - INFO     -     - bf_score                       0.1285
2025-10-29 13:51:17,451 - INFO     -     - depth_score                    0.7721
2025-10-29 13:51:17,451 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:17,451 - INFO     -     - f_stability                    0.1456
2025-10-29 13:51:17,451 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:17,451 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:17,451 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:17,452 - INFO     -     - composite                      0.3639
2025-10-29 13:51:17,452 - INFO     -     - total                          -0.0721
2025-10-29 13:51:17,452 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:17,452 - INFO     -   Num remaining nodes: 1
2025-10-29 13:51:17,452 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:51:17,452 - INFO     -   Done: True
2025-10-29 13:51:17,452 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:51:17,453 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:17,453 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:17,453 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:17,453 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:17,453 - INFO     -     - num_nodes: 1
2025-10-29 13:51:17,453 - INFO     -     - num_edges: 0
2025-10-29 13:51:17,453 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:17,453 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:51:17,453 - INFO     -   After: current_merge_step = 8
2025-10-29 13:51:17,453 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:17,453 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:17,453 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:17,454 - INFO     -   ✓ Step logged
2025-10-29 13:51:17,454 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:17,454 - INFO     -   Returning:
2025-10-29 13:51:17,454 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:17,454 - INFO     -     - reward: -0.0721
2025-10-29 13:51:17,454 - INFO     -     - done: True
2025-10-29 13:51:17,454 - INFO     -     - truncated: False
2025-10-29 13:51:17,454 - INFO     -     - info: 19 keys
2025-10-29 13:51:17,455 - INFO     - ==========================================================================================

2025-10-29 13:51:17,540 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:51:17,547 - INFO     - [Handshake] Building FD command:
2025-10-29 13:51:17,547 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:51:17,547 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_00.pddl
2025-10-29 13:51:17,547 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:51:17,552 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:51:18,306 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:51:18,306 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:51:18,306 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:51:18,617 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:51:18,617 - INFO     - Initializing GraphTracker...
2025-10-29 13:51:18,617 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:51:18,618 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:51:18,618 - INFO     -    → Node 0 has 2 states
2025-10-29 13:51:18,618 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:51:18,618 - INFO     -    → Node 1 has 2 states
2025-10-29 13:51:18,618 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:51:18,618 - INFO     -    → Node 2 has 2 states
2025-10-29 13:51:18,618 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:51:18,618 - INFO     -    → Node 3 has 2 states
2025-10-29 13:51:18,618 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:51:18,619 - INFO     -    → Node 4 has 2 states
2025-10-29 13:51:18,619 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:51:18,619 - INFO     -    → Node 5 has 5 states
2025-10-29 13:51:18,619 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:51:18,619 - INFO     -    → Node 6 has 5 states
2025-10-29 13:51:18,619 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:51:18,619 - INFO     -    → Node 7 has 5 states
2025-10-29 13:51:18,619 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:51:18,619 - INFO     -    → Node 8 has 5 states
2025-10-29 13:51:18,619 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:51:18,619 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:51:18,620 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:51:18,620 - INFO     - Added edge (0, 1)
2025-10-29 13:51:18,620 - INFO     - Added edge (0, 2)
2025-10-29 13:51:18,620 - INFO     - Added edge (0, 3)
2025-10-29 13:51:18,620 - INFO     - Added edge (0, 4)
2025-10-29 13:51:18,620 - INFO     - Added edge (0, 5)
2025-10-29 13:51:18,620 - INFO     - Added edge (0, 6)
2025-10-29 13:51:18,620 - INFO     - Added edge (0, 7)
2025-10-29 13:51:18,621 - INFO     - Added edge (0, 8)
2025-10-29 13:51:18,621 - INFO     - Added edge (1, 0)
2025-10-29 13:51:18,621 - INFO     - Added edge (1, 2)
2025-10-29 13:51:18,621 - INFO     - Added edge (1, 3)
2025-10-29 13:51:18,621 - INFO     - Added edge (1, 4)
2025-10-29 13:51:18,621 - INFO     - Added edge (1, 5)
2025-10-29 13:51:18,621 - INFO     - Added edge (1, 6)
2025-10-29 13:51:18,621 - INFO     - Added edge (1, 7)
2025-10-29 13:51:18,621 - INFO     - Added edge (1, 8)
2025-10-29 13:51:18,621 - INFO     - Added edge (2, 0)
2025-10-29 13:51:18,621 - INFO     - Added edge (2, 1)
2025-10-29 13:51:18,621 - INFO     - Added edge (2, 3)
2025-10-29 13:51:18,621 - INFO     - Added edge (2, 4)
2025-10-29 13:51:18,621 - INFO     - Added edge (2, 5)
2025-10-29 13:51:18,621 - INFO     - Added edge (2, 6)
2025-10-29 13:51:18,621 - INFO     - Added edge (2, 7)
2025-10-29 13:51:18,621 - INFO     - Added edge (2, 8)
2025-10-29 13:51:18,621 - INFO     - Added edge (3, 0)
2025-10-29 13:51:18,621 - INFO     - Added edge (3, 1)
2025-10-29 13:51:18,621 - INFO     - Added edge (3, 2)
2025-10-29 13:51:18,621 - INFO     - Added edge (3, 4)
2025-10-29 13:51:18,621 - INFO     - Added edge (3, 5)
2025-10-29 13:51:18,621 - INFO     - Added edge (3, 6)
2025-10-29 13:51:18,622 - INFO     - Added edge (3, 7)
2025-10-29 13:51:18,622 - INFO     - Added edge (3, 8)
2025-10-29 13:51:18,622 - INFO     - Added edge (4, 0)
2025-10-29 13:51:18,622 - INFO     - Added edge (4, 1)
2025-10-29 13:51:18,622 - INFO     - Added edge (4, 2)
2025-10-29 13:51:18,622 - INFO     - Added edge (4, 3)
2025-10-29 13:51:18,622 - INFO     - Added edge (4, 5)
2025-10-29 13:51:18,622 - INFO     - Added edge (4, 6)
2025-10-29 13:51:18,622 - INFO     - Added edge (4, 7)
2025-10-29 13:51:18,622 - INFO     - Added edge (4, 8)
2025-10-29 13:51:18,622 - INFO     - Added edge (5, 0)
2025-10-29 13:51:18,622 - INFO     - Added edge (5, 1)
2025-10-29 13:51:18,622 - INFO     - Added edge (5, 2)
2025-10-29 13:51:18,622 - INFO     - Added edge (5, 3)
2025-10-29 13:51:18,622 - INFO     - Added edge (5, 4)
2025-10-29 13:51:18,622 - INFO     - Added edge (6, 0)
2025-10-29 13:51:18,622 - INFO     - Added edge (6, 1)
2025-10-29 13:51:18,622 - INFO     - Added edge (6, 2)
2025-10-29 13:51:18,622 - INFO     - Added edge (6, 3)
2025-10-29 13:51:18,622 - INFO     - Added edge (6, 4)
2025-10-29 13:51:18,623 - INFO     - Added edge (7, 0)
2025-10-29 13:51:18,623 - INFO     - Added edge (7, 1)
2025-10-29 13:51:18,623 - INFO     - Added edge (7, 2)
2025-10-29 13:51:18,623 - INFO     - Added edge (7, 3)
2025-10-29 13:51:18,623 - INFO     - Added edge (7, 4)
2025-10-29 13:51:18,623 - INFO     - Added edge (8, 0)
2025-10-29 13:51:18,623 - INFO     - Added edge (8, 1)
2025-10-29 13:51:18,623 - INFO     - Added edge (8, 2)
2025-10-29 13:51:18,623 - INFO     - Added edge (8, 3)
2025-10-29 13:51:18,623 - INFO     - Added edge (8, 4)
2025-10-29 13:51:18,623 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:51:23,150 - INFO     -     ✓ Training complete (total: 3 steps)
2025-10-29 13:51:23,152 - INFO     -   [2/5] problem_small_01.pddl
2025-10-29 13:51:23,152 - INFO     - Environment initialized with:
2025-10-29 13:51:23,152 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:51:23,152 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_01.pddl
2025-10-29 13:51:23,152 - INFO     -   FD base: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward
2025-10-29 13:51:23,152 - INFO     -   max_states: 4000
2025-10-29 13:51:23,154 - INFO     -   threshold_before_merge: 1
2025-10-29 13:51:23,154 - INFO     - ✓ Initialized reward function: astar_search
2025-10-29 13:51:23,154 - INFO     - ✓ RewardInfoExtractor initialized (output_dir: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output)
2025-10-29 13:51:23,154 - INFO     - ✓ Initialized reward info extractor
2025-10-29 13:51:23,157 - INFO     -     Training for 3 timesteps...
2025-10-29 13:51:23,163 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:51:23,167 - WARNING  - ⚠️ Could not delete C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\output.sas: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\eliez\\Desktop\\Studies\\Fall 2025\\0960208 - AI Autonomous\\_AI_Proj_Technion\\downward\\output.sas'
2025-10-29 13:51:23,168 - INFO     - [Handshake] Building FD command:
2025-10-29 13:51:23,168 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:51:23,168 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_01.pddl
2025-10-29 13:51:23,168 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:51:23,176 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:51:23,327 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:51:23,327 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:51:23,728 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:51:24,042 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:51:24,042 - INFO     - Initializing GraphTracker...
2025-10-29 13:51:24,042 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:51:24,043 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:51:24,043 - INFO     -    → Node 0 has 2 states
2025-10-29 13:51:24,043 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:51:24,043 - INFO     -    → Node 1 has 2 states
2025-10-29 13:51:24,043 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:51:24,043 - INFO     -    → Node 2 has 2 states
2025-10-29 13:51:24,043 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:51:24,043 - INFO     -    → Node 3 has 2 states
2025-10-29 13:51:24,043 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:51:24,043 - INFO     -    → Node 4 has 2 states
2025-10-29 13:51:24,043 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:51:24,043 - INFO     -    → Node 5 has 5 states
2025-10-29 13:51:24,044 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:51:24,044 - INFO     -    → Node 6 has 5 states
2025-10-29 13:51:24,044 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:51:24,044 - INFO     -    → Node 7 has 5 states
2025-10-29 13:51:24,044 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:51:24,044 - INFO     -    → Node 8 has 5 states
2025-10-29 13:51:24,044 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:51:24,044 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:51:24,045 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:51:24,045 - INFO     - Added edge (0, 1)
2025-10-29 13:51:24,045 - INFO     - Added edge (0, 2)
2025-10-29 13:51:24,045 - INFO     - Added edge (0, 3)
2025-10-29 13:51:24,045 - INFO     - Added edge (0, 4)
2025-10-29 13:51:24,045 - INFO     - Added edge (0, 5)
2025-10-29 13:51:24,045 - INFO     - Added edge (0, 6)
2025-10-29 13:51:24,046 - INFO     - Added edge (0, 7)
2025-10-29 13:51:24,046 - INFO     - Added edge (0, 8)
2025-10-29 13:51:24,046 - INFO     - Added edge (1, 0)
2025-10-29 13:51:24,046 - INFO     - Added edge (1, 2)
2025-10-29 13:51:24,046 - INFO     - Added edge (1, 3)
2025-10-29 13:51:24,046 - INFO     - Added edge (1, 4)
2025-10-29 13:51:24,046 - INFO     - Added edge (1, 5)
2025-10-29 13:51:24,046 - INFO     - Added edge (1, 6)
2025-10-29 13:51:24,046 - INFO     - Added edge (1, 7)
2025-10-29 13:51:24,046 - INFO     - Added edge (1, 8)
2025-10-29 13:51:24,046 - INFO     - Added edge (2, 0)
2025-10-29 13:51:24,046 - INFO     - Added edge (2, 1)
2025-10-29 13:51:24,046 - INFO     - Added edge (2, 3)
2025-10-29 13:51:24,046 - INFO     - Added edge (2, 4)
2025-10-29 13:51:24,046 - INFO     - Added edge (2, 5)
2025-10-29 13:51:24,046 - INFO     - Added edge (2, 6)
2025-10-29 13:51:24,047 - INFO     - Added edge (2, 7)
2025-10-29 13:51:24,047 - INFO     - Added edge (2, 8)
2025-10-29 13:51:24,047 - INFO     - Added edge (3, 0)
2025-10-29 13:51:24,047 - INFO     - Added edge (3, 1)
2025-10-29 13:51:24,047 - INFO     - Added edge (3, 2)
2025-10-29 13:51:24,047 - INFO     - Added edge (3, 4)
2025-10-29 13:51:24,047 - INFO     - Added edge (3, 5)
2025-10-29 13:51:24,047 - INFO     - Added edge (3, 6)
2025-10-29 13:51:24,047 - INFO     - Added edge (3, 7)
2025-10-29 13:51:24,047 - INFO     - Added edge (3, 8)
2025-10-29 13:51:24,047 - INFO     - Added edge (4, 0)
2025-10-29 13:51:24,047 - INFO     - Added edge (4, 1)
2025-10-29 13:51:24,047 - INFO     - Added edge (4, 2)
2025-10-29 13:51:24,047 - INFO     - Added edge (4, 3)
2025-10-29 13:51:24,047 - INFO     - Added edge (4, 5)
2025-10-29 13:51:24,047 - INFO     - Added edge (4, 6)
2025-10-29 13:51:24,047 - INFO     - Added edge (4, 7)
2025-10-29 13:51:24,048 - INFO     - Added edge (4, 8)
2025-10-29 13:51:24,048 - INFO     - Added edge (5, 0)
2025-10-29 13:51:24,048 - INFO     - Added edge (5, 1)
2025-10-29 13:51:24,048 - INFO     - Added edge (5, 2)
2025-10-29 13:51:24,048 - INFO     - Added edge (5, 3)
2025-10-29 13:51:24,048 - INFO     - Added edge (5, 4)
2025-10-29 13:51:24,048 - INFO     - Added edge (6, 0)
2025-10-29 13:51:24,048 - INFO     - Added edge (6, 1)
2025-10-29 13:51:24,048 - INFO     - Added edge (6, 2)
2025-10-29 13:51:24,048 - INFO     - Added edge (6, 3)
2025-10-29 13:51:24,048 - INFO     - Added edge (6, 4)
2025-10-29 13:51:24,048 - INFO     - Added edge (7, 0)
2025-10-29 13:51:24,048 - INFO     - Added edge (7, 1)
2025-10-29 13:51:24,048 - INFO     - Added edge (7, 2)
2025-10-29 13:51:24,048 - INFO     - Added edge (7, 3)
2025-10-29 13:51:24,048 - INFO     - Added edge (7, 4)
2025-10-29 13:51:24,048 - INFO     - Added edge (8, 0)
2025-10-29 13:51:24,048 - INFO     - Added edge (8, 1)
2025-10-29 13:51:24,048 - INFO     - Added edge (8, 2)
2025-10-29 13:51:24,049 - INFO     - Added edge (8, 3)
2025-10-29 13:51:24,049 - INFO     - Added edge (8, 4)
2025-10-29 13:51:24,049 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:51:24,060 - INFO     - 
==========================================================================================
2025-10-29 13:51:24,060 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:24,060 - INFO     - ==========================================================================================
2025-10-29 13:51:24,060 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:24,060 - INFO     -   Input action: 46 (type: int)
2025-10-29 13:51:24,060 - INFO     -   Available edges in graph: 60
2025-10-29 13:51:24,060 - INFO     -   Action index calculation:
2025-10-29 13:51:24,060 - INFO     -     - action % max(num_valid_edges, 1) = 46 % 60 = 46
2025-10-29 13:51:24,060 - INFO     -     - clamped to [0, 59]: 46
2025-10-29 13:51:24,060 - INFO     -   ✓ Extracted merge pair from edge 46: (6, 1)
2025-10-29 13:51:24,060 - INFO     -   ✓ Validation passed
2025-10-29 13:51:24,060 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:24,060 - INFO     -     - Total states before merge: 30
2025-10-29 13:51:24,060 - INFO     -     - Num nodes: 9
2025-10-29 13:51:24,060 - INFO     -     - Num edges: 60
2025-10-29 13:51:24,061 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:24,061 - INFO     -       - Node 6: 5 states
2025-10-29 13:51:24,061 - INFO     -       - Node 1: 2 states
2025-10-29 13:51:24,061 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:24,061 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:24,070 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:51:24,071 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:24,071 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:51:24,171 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:24,171 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:24,171 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:51:24,171 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:24,171 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:24,171 - INFO     -   Calling graph_tracker.merge_nodes([6, 1])...
2025-10-29 13:51:24,171 - INFO     - Attempting merge of nodes 6 and 1...
2025-10-29 13:51:24,171 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:51:24,173 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:24,173 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:24,173 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:51:24,173 - INFO     - 
================================================================================
2025-10-29 13:51:24,173 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:51:24,173 - INFO     - ================================================================================
2025-10-29 13:51:24,173 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:24,173 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:51:24,173 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:51:24,174 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:24,174 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:24,174 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:24,174 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:24,174 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:24,174 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:24,174 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:24,174 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:24,174 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:24,174 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:24,174 - INFO     -   - ts1_id: 6
2025-10-29 13:51:24,174 - INFO     -   - ts2_id: 1
2025-10-29 13:51:24,174 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:24,174 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:24,174 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:51:24,174 - INFO     -   - Product space size: 10
2025-10-29 13:51:24,174 - INFO     -   - Using product state mapping
2025-10-29 13:51:24,174 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:24,174 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:51:24,174 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:51:24,174 - INFO     -   - delta: 0.7000
2025-10-29 13:51:24,174 - INFO     -   - f_stability: 1.0 - |0.7000| / 2.9000 = 0.7586
2025-10-29 13:51:24,174 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:24,175 - INFO     -   - Compared 7 values
2025-10-29 13:51:24,175 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:51:24,175 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:24,175 - INFO     -   - states_before: 10
2025-10-29 13:51:24,175 - INFO     -   - states_after: 10
2025-10-29 13:51:24,175 - INFO     -   - delta_states: 0
2025-10-29 13:51:24,175 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:24,175 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:24,175 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:24,175 - INFO     -   - merged_transitions: 37
2025-10-29 13:51:24,175 - INFO     -   - transition_density_change: 1.9000
2025-10-29 13:51:24,175 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:24,175 - INFO     -   - search_signals present: True
2025-10-29 13:51:24,175 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:24,175 - INFO     -   - search_depth: 2
2025-10-29 13:51:24,175 - INFO     -   - solution_cost: 0
2025-10-29 13:51:24,175 - INFO     -   - branching_factor: 3.7000
2025-10-29 13:51:24,176 - INFO     -   - solution_found: True
2025-10-29 13:51:24,176 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:24,176 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:24,176 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:51:24,176 - INFO     -   - TS6(5) + TS1(2) → 10 states
2025-10-29 13:51:24,176 - INFO     -   - f_stability=0.759
2025-10-29 13:51:24,176 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:24,176 - INFO     -   - solution_found=True
2025-10-29 13:51:24,176 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:24,176 - INFO     - 
  Extracted signals:
2025-10-29 13:51:24,176 - INFO     -     - iteration: 0
2025-10-29 13:51:24,176 - INFO     -     - states_before: 10
2025-10-29 13:51:24,176 - INFO     -     - states_after: 10
2025-10-29 13:51:24,176 - INFO     -     - delta_states: 0
2025-10-29 13:51:24,177 - INFO     -     - f_value_stability: 0.7586
2025-10-29 13:51:24,177 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:51:24,177 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:24,177 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:24,177 - INFO     -     - search_depth: 2
2025-10-29 13:51:24,177 - INFO     -     - solution_cost: 0
2025-10-29 13:51:24,177 - INFO     -     - branching_factor: 3.7000
2025-10-29 13:51:24,177 - INFO     -     - solution_found: True
2025-10-29 13:51:24,177 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:24,177 - INFO     - 
  Computing reward:
2025-10-29 13:51:24,177 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:24,177 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:24,177 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:24,177 - INFO     -   [1] BRANCHING FACTOR: 3.700 → score 0.607 (tolerable)
2025-10-29 13:51:24,177 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:24,178 - INFO     -   [3] F-VALUE STABILITY: 0.251
2025-10-29 13:51:24,178 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:24,178 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:24,178 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:51:24,178 - INFO     -     = 0.300*0.607 (bf)
2025-10-29 13:51:24,178 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:24,178 - INFO     -     + 0.350*0.251 (stability)
2025-10-29 13:51:24,178 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:24,178 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:24,178 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:24,178 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:24,178 - INFO     - 
  [FINAL REWARD]: 0.3236
2025-10-29 13:51:24,178 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:24,178 - INFO     -     ✓ Reward computed: 0.3236
2025-10-29 13:51:24,179 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:24,179 - INFO     -     - bf_score                       0.6067
2025-10-29 13:51:24,179 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:24,179 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:24,179 - INFO     -     - f_stability                    0.2507
2025-10-29 13:51:24,179 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:24,179 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:24,179 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:24,179 - INFO     -     - composite                      0.5618
2025-10-29 13:51:24,179 - INFO     -     - total                          0.3236
2025-10-29 13:51:24,179 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:24,179 - INFO     -   Num remaining nodes: 8
2025-10-29 13:51:24,179 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:51:24,179 - INFO     -   Done: False
2025-10-29 13:51:24,180 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:24,181 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:24,181 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:24,181 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:24,181 - INFO     -     - num_nodes: 8
2025-10-29 13:51:24,182 - INFO     -     - num_edges: 50
2025-10-29 13:51:24,182 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:24,182 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:51:24,182 - INFO     -   After: current_merge_step = 1
2025-10-29 13:51:24,182 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:24,182 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:24,182 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:24,183 - INFO     -   ✓ Step logged
2025-10-29 13:51:24,183 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:24,183 - INFO     -   Returning:
2025-10-29 13:51:24,183 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:24,183 - INFO     -     - reward: 0.3236
2025-10-29 13:51:24,183 - INFO     -     - done: False
2025-10-29 13:51:24,183 - INFO     -     - truncated: False
2025-10-29 13:51:24,183 - INFO     -     - info: 19 keys
2025-10-29 13:51:24,183 - INFO     - ==========================================================================================

2025-10-29 13:51:24,188 - INFO     - 
==========================================================================================
2025-10-29 13:51:24,189 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:24,189 - INFO     - ==========================================================================================
2025-10-29 13:51:24,189 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:24,189 - INFO     -   Input action: 8 (type: int)
2025-10-29 13:51:24,189 - INFO     -   Available edges in graph: 50
2025-10-29 13:51:24,189 - INFO     -   Action index calculation:
2025-10-29 13:51:24,189 - INFO     -     - action % max(num_valid_edges, 1) = 8 % 50 = 8
2025-10-29 13:51:24,189 - INFO     -     - clamped to [0, 49]: 8
2025-10-29 13:51:24,189 - INFO     -   ✓ Extracted merge pair from edge 8: (2, 3)
2025-10-29 13:51:24,189 - INFO     -   ✓ Validation passed
2025-10-29 13:51:24,189 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:24,189 - INFO     -     - Total states before merge: 33
2025-10-29 13:51:24,189 - INFO     -     - Num nodes: 8
2025-10-29 13:51:24,189 - INFO     -     - Num edges: 50
2025-10-29 13:51:24,189 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:24,189 - INFO     -       - Node 2: 2 states
2025-10-29 13:51:24,190 - INFO     -       - Node 3: 2 states
2025-10-29 13:51:24,190 - INFO     -       - Expected product: 4 states
2025-10-29 13:51:24,190 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:24,197 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:51:24,197 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:24,197 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:51:24,298 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:24,298 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:24,298 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:51:24,299 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:24,299 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:24,299 - INFO     -   Calling graph_tracker.merge_nodes([2, 3])...
2025-10-29 13:51:24,299 - INFO     - Attempting merge of nodes 2 and 3...
2025-10-29 13:51:24,299 - INFO     - Successfully merged nodes into new node 10 with 4 states.
2025-10-29 13:51:24,299 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:24,299 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:24,299 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:51:24,299 - INFO     - 
================================================================================
2025-10-29 13:51:24,299 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:51:24,299 - INFO     - ================================================================================
2025-10-29 13:51:24,299 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:24,300 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:51:24,300 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:51:24,300 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:24,300 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:24,300 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:24,300 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:24,300 - INFO     -   - Raw f_after length: 4
2025-10-29 13:51:24,300 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:24,301 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:24,301 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:24,301 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:51:24,301 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:24,301 - INFO     -   - ts1_id: 2
2025-10-29 13:51:24,301 - INFO     -   - ts2_id: 3
2025-10-29 13:51:24,301 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:24,301 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:24,301 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:51:24,301 - INFO     -   - Product space size: 4
2025-10-29 13:51:24,301 - INFO     -   - Using product state mapping
2025-10-29 13:51:24,301 - INFO     -   - f_before_product length: 4
2025-10-29 13:51:24,301 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:51:24,301 - INFO     -   - avg_f_after:  1.0000 (4 valid states)
2025-10-29 13:51:24,301 - INFO     -   - delta: 0.2500
2025-10-29 13:51:24,302 - INFO     -   - f_stability: 1.0 - |0.2500| / 0.7500 = 0.6667
2025-10-29 13:51:24,302 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:24,302 - INFO     -   - Compared 4 values
2025-10-29 13:51:24,302 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:24,302 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:24,302 - INFO     -   - states_before: 4
2025-10-29 13:51:24,302 - INFO     -   - states_after: 4
2025-10-29 13:51:24,302 - INFO     -   - delta_states: 0
2025-10-29 13:51:24,302 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:24,302 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:24,302 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:24,302 - INFO     -   - merged_transitions: 20
2025-10-29 13:51:24,302 - INFO     -   - transition_density_change: 2.5000
2025-10-29 13:51:24,302 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:24,302 - INFO     -   - search_signals present: True
2025-10-29 13:51:24,302 - INFO     -   - nodes_expanded: 4
2025-10-29 13:51:24,302 - INFO     -   - search_depth: 0
2025-10-29 13:51:24,303 - INFO     -   - solution_cost: 0
2025-10-29 13:51:24,303 - INFO     -   - branching_factor: 5.0000
2025-10-29 13:51:24,303 - INFO     -   - solution_found: True
2025-10-29 13:51:24,303 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:24,303 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:24,303 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:51:24,303 - INFO     -   - TS2(2) + TS3(2) → 4 states
2025-10-29 13:51:24,303 - INFO     -   - f_stability=0.667
2025-10-29 13:51:24,303 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:51:24,303 - INFO     -   - solution_found=True
2025-10-29 13:51:24,303 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:24,303 - INFO     - 
  Extracted signals:
2025-10-29 13:51:24,303 - INFO     -     - iteration: 1
2025-10-29 13:51:24,303 - INFO     -     - states_before: 4
2025-10-29 13:51:24,303 - INFO     -     - states_after: 4
2025-10-29 13:51:24,303 - INFO     -     - delta_states: 0
2025-10-29 13:51:24,303 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:51:24,303 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:24,303 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:24,303 - INFO     -     - nodes_expanded: 4
2025-10-29 13:51:24,303 - INFO     -     - search_depth: 0
2025-10-29 13:51:24,303 - INFO     -     - solution_cost: 0
2025-10-29 13:51:24,303 - INFO     -     - branching_factor: 5.0000
2025-10-29 13:51:24,303 - INFO     -     - solution_found: True
2025-10-29 13:51:24,303 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:24,303 - INFO     - 
  Computing reward:
2025-10-29 13:51:24,304 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:24,304 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:24,304 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:24,304 - INFO     -   [1] BRANCHING FACTOR: 5.000 → score 0.433 (tolerable)
2025-10-29 13:51:24,304 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:51:24,305 - INFO     -   [3] F-VALUE STABILITY: 0.176
2025-10-29 13:51:24,305 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:24,305 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:24,305 - INFO     - 
  [COMPOSITE]: 0.412
2025-10-29 13:51:24,305 - INFO     -     = 0.300*0.433 (bf)
2025-10-29 13:51:24,305 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:51:24,305 - INFO     -     + 0.350*0.176 (stability)
2025-10-29 13:51:24,305 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:24,305 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:24,305 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:24,305 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:24,305 - INFO     - 
  [FINAL REWARD]: 0.0230
2025-10-29 13:51:24,305 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:24,305 - INFO     -     ✓ Reward computed: 0.0230
2025-10-29 13:51:24,305 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:24,306 - INFO     -     - bf_score                       0.4333
2025-10-29 13:51:24,306 - INFO     -     - depth_score                    0.5000
2025-10-29 13:51:24,306 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:24,306 - INFO     -     - f_stability                    0.1757
2025-10-29 13:51:24,306 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:24,306 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:24,306 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:24,306 - INFO     -     - composite                      0.4115
2025-10-29 13:51:24,306 - INFO     -     - total                          0.0230
2025-10-29 13:51:24,307 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:24,307 - INFO     -   Num remaining nodes: 7
2025-10-29 13:51:24,307 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:51:24,307 - INFO     -   Done: False
2025-10-29 13:51:24,307 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:24,308 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:24,308 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:24,309 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:24,309 - INFO     -     - num_nodes: 7
2025-10-29 13:51:24,309 - INFO     -     - num_edges: 36
2025-10-29 13:51:24,309 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:24,309 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:51:24,309 - INFO     -   After: current_merge_step = 2
2025-10-29 13:51:24,309 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:24,309 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:24,309 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:24,310 - INFO     -   ✓ Step logged
2025-10-29 13:51:24,310 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:24,310 - INFO     -   Returning:
2025-10-29 13:51:24,310 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:24,310 - INFO     -     - reward: 0.0230
2025-10-29 13:51:24,310 - INFO     -     - done: False
2025-10-29 13:51:24,310 - INFO     -     - truncated: False
2025-10-29 13:51:24,310 - INFO     -     - info: 19 keys
2025-10-29 13:51:24,310 - INFO     - ==========================================================================================

2025-10-29 13:51:24,315 - INFO     - 
==========================================================================================
2025-10-29 13:51:24,315 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:24,315 - INFO     - ==========================================================================================
2025-10-29 13:51:24,315 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:24,315 - INFO     -   Input action: 34 (type: int)
2025-10-29 13:51:24,315 - INFO     -   Available edges in graph: 36
2025-10-29 13:51:24,315 - INFO     -   Action index calculation:
2025-10-29 13:51:24,315 - INFO     -     - action % max(num_valid_edges, 1) = 34 % 36 = 34
2025-10-29 13:51:24,315 - INFO     -     - clamped to [0, 35]: 34
2025-10-29 13:51:24,315 - INFO     -   ✓ Extracted merge pair from edge 34: (10, 8)
2025-10-29 13:51:24,315 - INFO     -   ✓ Validation passed
2025-10-29 13:51:24,315 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:24,317 - INFO     -     - Total states before merge: 33
2025-10-29 13:51:24,317 - INFO     -     - Num nodes: 7
2025-10-29 13:51:24,317 - INFO     -     - Num edges: 36
2025-10-29 13:51:24,317 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:24,317 - INFO     -       - Node 10: 4 states
2025-10-29 13:51:24,317 - INFO     -       - Node 8: 5 states
2025-10-29 13:51:24,317 - INFO     -       - Expected product: 20 states
2025-10-29 13:51:24,317 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:24,324 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:51:24,324 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:24,324 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:51:24,425 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:24,426 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:24,426 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:51:24,426 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:24,426 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:24,426 - INFO     -   Calling graph_tracker.merge_nodes([10, 8])...
2025-10-29 13:51:24,426 - INFO     - Attempting merge of nodes 10 and 8...
2025-10-29 13:51:24,426 - INFO     - Successfully merged nodes into new node 11 with 20 states.
2025-10-29 13:51:24,426 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:24,427 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:24,427 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:51:24,427 - INFO     - 
================================================================================
2025-10-29 13:51:24,427 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:51:24,427 - INFO     - ================================================================================
2025-10-29 13:51:24,427 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:24,427 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:51:24,427 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:51:24,428 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:24,428 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:24,428 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:51:24,428 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:51:24,428 - INFO     -   - Raw f_after length: 20
2025-10-29 13:51:24,428 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:24,428 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:51:24,428 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:51:24,428 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:51:24,428 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:24,428 - INFO     -   - ts1_id: 10
2025-10-29 13:51:24,428 - INFO     -   - ts2_id: 8
2025-10-29 13:51:24,428 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:24,428 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:24,429 - INFO     -   - ts1_size: 4, ts2_size: 5
2025-10-29 13:51:24,429 - INFO     -   - Product space size: 20
2025-10-29 13:51:24,429 - INFO     -   - Using product state mapping
2025-10-29 13:51:24,429 - INFO     -   - f_before_product length: 20
2025-10-29 13:51:24,429 - INFO     -   - avg_f_before: 3.0000 (20 valid states)
2025-10-29 13:51:24,429 - INFO     -   - avg_f_after:  4.0000 (20 valid states)
2025-10-29 13:51:24,429 - INFO     -   - delta: 1.0000
2025-10-29 13:51:24,429 - INFO     -   - f_stability: 1.0 - |1.0000| / 3.0000 = 0.6667
2025-10-29 13:51:24,429 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:24,429 - INFO     -   - Compared 9 values
2025-10-29 13:51:24,430 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:51:24,430 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:24,430 - INFO     -   - states_before: 20
2025-10-29 13:51:24,430 - INFO     -   - states_after: 20
2025-10-29 13:51:24,430 - INFO     -   - delta_states: 0
2025-10-29 13:51:24,430 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:24,430 - INFO     -   - ts1_transitions: 20
2025-10-29 13:51:24,430 - INFO     -   - ts2_transitions: 13
2025-10-29 13:51:24,430 - INFO     -   - merged_transitions: 122
2025-10-29 13:51:24,430 - INFO     -   - transition_density_change: 4.4500
2025-10-29 13:51:24,430 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:24,430 - INFO     -   - search_signals present: True
2025-10-29 13:51:24,430 - INFO     -   - nodes_expanded: 20
2025-10-29 13:51:24,430 - INFO     -   - search_depth: 2
2025-10-29 13:51:24,431 - INFO     -   - solution_cost: 0
2025-10-29 13:51:24,431 - INFO     -   - branching_factor: 6.1000
2025-10-29 13:51:24,431 - INFO     -   - solution_found: True
2025-10-29 13:51:24,431 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:24,431 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:24,431 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:51:24,431 - INFO     -   - TS10(4) + TS8(5) → 20 states
2025-10-29 13:51:24,431 - INFO     -   - f_stability=0.667
2025-10-29 13:51:24,431 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:51:24,431 - INFO     -   - solution_found=True
2025-10-29 13:51:24,432 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:24,432 - INFO     - 
  Extracted signals:
2025-10-29 13:51:24,432 - INFO     -     - iteration: 2
2025-10-29 13:51:24,432 - INFO     -     - states_before: 20
2025-10-29 13:51:24,432 - INFO     -     - states_after: 20
2025-10-29 13:51:24,432 - INFO     -     - delta_states: 0
2025-10-29 13:51:24,432 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:51:24,432 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:51:24,432 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:24,432 - INFO     -     - nodes_expanded: 20
2025-10-29 13:51:24,432 - INFO     -     - search_depth: 2
2025-10-29 13:51:24,432 - INFO     -     - solution_cost: 0
2025-10-29 13:51:24,432 - INFO     -     - branching_factor: 6.1000
2025-10-29 13:51:24,432 - INFO     -     - solution_found: True
2025-10-29 13:51:24,433 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:24,433 - INFO     - 
  Computing reward:
2025-10-29 13:51:24,433 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:24,433 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:24,433 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:24,433 - INFO     -   [1] BRANCHING FACTOR: 6.100 → score 0.290 (high BF, minimal credit)
2025-10-29 13:51:24,433 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:24,433 - INFO     -   [3] F-VALUE STABILITY: 0.211
2025-10-29 13:51:24,434 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:24,434 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:24,434 - INFO     - 
  [COMPOSITE]: 0.453
2025-10-29 13:51:24,434 - INFO     -     = 0.300*0.290 (bf)
2025-10-29 13:51:24,434 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:24,434 - INFO     -     + 0.350*0.211 (stability)
2025-10-29 13:51:24,434 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:24,434 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:24,434 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:24,434 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:24,434 - INFO     - 
  [FINAL REWARD]: 0.1061
2025-10-29 13:51:24,434 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:24,434 - INFO     -     ✓ Reward computed: 0.1061
2025-10-29 13:51:24,435 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:24,435 - INFO     -     - bf_score                       0.2900
2025-10-29 13:51:24,435 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:24,435 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:24,435 - INFO     -     - f_stability                    0.2115
2025-10-29 13:51:24,435 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:24,435 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:24,435 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:24,435 - INFO     -     - composite                      0.4531
2025-10-29 13:51:24,435 - INFO     -     - total                          0.1061
2025-10-29 13:51:24,435 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:24,435 - INFO     -   Num remaining nodes: 6
2025-10-29 13:51:24,435 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:51:24,435 - INFO     -   Done: False
2025-10-29 13:51:24,435 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:24,438 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:24,438 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:24,438 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:24,438 - INFO     -     - num_nodes: 6
2025-10-29 13:51:24,438 - INFO     -     - num_edges: 28
2025-10-29 13:51:24,438 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:24,438 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:51:24,438 - INFO     -   After: current_merge_step = 3
2025-10-29 13:51:24,438 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:24,438 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:24,438 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:24,439 - INFO     -   ✓ Step logged
2025-10-29 13:51:24,440 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:24,440 - INFO     -   Returning:
2025-10-29 13:51:24,440 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:24,440 - INFO     -     - reward: 0.1061
2025-10-29 13:51:24,440 - INFO     -     - done: False
2025-10-29 13:51:24,440 - INFO     -     - truncated: False
2025-10-29 13:51:24,440 - INFO     -     - info: 19 keys
2025-10-29 13:51:24,440 - INFO     - ==========================================================================================

2025-10-29 13:51:24,447 - INFO     - 
==========================================================================================
2025-10-29 13:51:24,447 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:24,447 - INFO     - ==========================================================================================
2025-10-29 13:51:24,447 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:24,447 - INFO     -   Input action: 17 (type: int)
2025-10-29 13:51:24,447 - INFO     -   Available edges in graph: 28
2025-10-29 13:51:24,447 - INFO     -   Action index calculation:
2025-10-29 13:51:24,447 - INFO     -     - action % max(num_valid_edges, 1) = 17 % 28 = 17
2025-10-29 13:51:24,447 - INFO     -     - clamped to [0, 27]: 17
2025-10-29 13:51:24,447 - INFO     -   ✓ Extracted merge pair from edge 17: (7, 11)
2025-10-29 13:51:24,447 - INFO     -   ✓ Validation passed
2025-10-29 13:51:24,447 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:24,447 - INFO     -     - Total states before merge: 44
2025-10-29 13:51:24,447 - INFO     -     - Num nodes: 6
2025-10-29 13:51:24,447 - INFO     -     - Num edges: 28
2025-10-29 13:51:24,447 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:24,447 - INFO     -       - Node 7: 5 states
2025-10-29 13:51:24,448 - INFO     -       - Node 11: 20 states
2025-10-29 13:51:24,448 - INFO     -       - Expected product: 100 states
2025-10-29 13:51:24,448 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:24,453 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:51:24,453 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:24,453 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:51:24,554 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:24,554 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:24,554 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:51:24,556 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:24,557 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:24,557 - INFO     -   Calling graph_tracker.merge_nodes([7, 11])...
2025-10-29 13:51:24,557 - INFO     - Attempting merge of nodes 7 and 11...
2025-10-29 13:51:24,558 - INFO     - Successfully merged nodes into new node 12 with 100 states.
2025-10-29 13:51:24,558 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:24,558 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:24,558 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:51:24,558 - INFO     - 
================================================================================
2025-10-29 13:51:24,558 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:51:24,558 - INFO     - ================================================================================
2025-10-29 13:51:24,558 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:24,558 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:51:24,558 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:51:24,559 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:24,560 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:24,560 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:24,560 - INFO     -   - Raw ts2_f length: 20
2025-10-29 13:51:24,560 - INFO     -   - Raw f_after length: 100
2025-10-29 13:51:24,560 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:24,560 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:24,560 - INFO     -   - ts2_valid: 20 / 20 (removed -20)
2025-10-29 13:51:24,560 - INFO     -   - after_valid: 100 / 100 (removed 0)
2025-10-29 13:51:24,560 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:24,560 - INFO     -   - ts1_id: 7
2025-10-29 13:51:24,560 - INFO     -   - ts2_id: 11
2025-10-29 13:51:24,560 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:24,561 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:24,561 - INFO     -   - ts1_size: 5, ts2_size: 20
2025-10-29 13:51:24,561 - INFO     -   - Product space size: 100
2025-10-29 13:51:24,561 - INFO     -   - Using product state mapping
2025-10-29 13:51:24,561 - INFO     -   - f_before_product length: 100
2025-10-29 13:51:24,562 - INFO     -   - avg_f_before: 4.4600 (100 valid states)
2025-10-29 13:51:24,562 - INFO     -   - avg_f_after:  7.3200 (100 valid states)
2025-10-29 13:51:24,562 - INFO     -   - delta: 2.8600
2025-10-29 13:51:24,562 - INFO     -   - f_stability: 1.0 - |2.8600| / 4.4600 = 0.3587
2025-10-29 13:51:24,562 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:24,562 - INFO     -   - Compared 25 values
2025-10-29 13:51:24,562 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:51:24,562 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:24,562 - INFO     -   - states_before: 100
2025-10-29 13:51:24,562 - INFO     -   - states_after: 100
2025-10-29 13:51:24,562 - INFO     -   - delta_states: 0
2025-10-29 13:51:24,562 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:24,563 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:24,563 - INFO     -   - ts2_transitions: 122
2025-10-29 13:51:24,563 - INFO     -   - merged_transitions: 620
2025-10-29 13:51:24,563 - INFO     -   - transition_density_change: 4.8500
2025-10-29 13:51:24,563 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:24,563 - INFO     -   - search_signals present: True
2025-10-29 13:51:24,563 - INFO     -   - nodes_expanded: 100
2025-10-29 13:51:24,563 - INFO     -   - search_depth: 3
2025-10-29 13:51:24,563 - INFO     -   - solution_cost: 2
2025-10-29 13:51:24,563 - INFO     -   - branching_factor: 6.2000
2025-10-29 13:51:24,563 - INFO     -   - solution_found: True
2025-10-29 13:51:24,563 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:24,564 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:24,564 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:51:24,564 - INFO     -   - TS7(5) + TS11(20) → 100 states
2025-10-29 13:51:24,564 - INFO     -   - f_stability=0.359
2025-10-29 13:51:24,564 - INFO     -   - A* nodes_expanded=100
2025-10-29 13:51:24,564 - INFO     -   - solution_found=True
2025-10-29 13:51:24,564 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:24,564 - INFO     - 
  Extracted signals:
2025-10-29 13:51:24,564 - INFO     -     - iteration: 3
2025-10-29 13:51:24,564 - INFO     -     - states_before: 100
2025-10-29 13:51:24,564 - INFO     -     - states_after: 100
2025-10-29 13:51:24,565 - INFO     -     - delta_states: 0
2025-10-29 13:51:24,565 - INFO     -     - f_value_stability: 0.3587
2025-10-29 13:51:24,565 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:51:24,565 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:24,565 - INFO     -     - nodes_expanded: 100
2025-10-29 13:51:24,565 - INFO     -     - search_depth: 3
2025-10-29 13:51:24,565 - INFO     -     - solution_cost: 2
2025-10-29 13:51:24,565 - INFO     -     - branching_factor: 6.2000
2025-10-29 13:51:24,565 - INFO     -     - solution_found: True
2025-10-29 13:51:24,565 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:24,565 - INFO     - 
  Computing reward:
2025-10-29 13:51:24,565 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:24,566 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:24,566 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:24,566 - INFO     -   [1] BRANCHING FACTOR: 6.200 → score 0.280 (high BF, minimal credit)
2025-10-29 13:51:24,566 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:51:24,566 - INFO     -   [3] F-VALUE STABILITY: 0.241
2025-10-29 13:51:24,566 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:24,566 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:24,567 - INFO     - 
  [COMPOSITE]: 0.453
2025-10-29 13:51:24,567 - INFO     -     = 0.300*0.280 (bf)
2025-10-29 13:51:24,567 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:51:24,567 - INFO     -     + 0.350*0.241 (stability)
2025-10-29 13:51:24,567 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:24,567 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:24,567 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:24,567 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:24,567 - INFO     - 
  [FINAL REWARD]: 0.1063
2025-10-29 13:51:24,567 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:24,567 - INFO     -     ✓ Reward computed: 0.1063
2025-10-29 13:51:24,568 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:24,568 - INFO     -     - bf_score                       0.2800
2025-10-29 13:51:24,568 - INFO     -     - depth_score                    0.8237
2025-10-29 13:51:24,568 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:24,568 - INFO     -     - f_stability                    0.2411
2025-10-29 13:51:24,568 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:24,568 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:24,568 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:24,568 - INFO     -     - composite                      0.4531
2025-10-29 13:51:24,568 - INFO     -     - total                          0.1063
2025-10-29 13:51:24,568 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:24,568 - INFO     -   Num remaining nodes: 5
2025-10-29 13:51:24,569 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:51:24,569 - INFO     -   Done: False
2025-10-29 13:51:24,569 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:24,570 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:24,570 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:24,570 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:24,570 - INFO     -     - num_nodes: 5
2025-10-29 13:51:24,570 - INFO     -     - num_edges: 20
2025-10-29 13:51:24,571 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:24,571 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:51:24,571 - INFO     -   After: current_merge_step = 4
2025-10-29 13:51:24,571 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:24,571 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:24,571 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:24,572 - INFO     -   ✓ Step logged
2025-10-29 13:51:24,572 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:24,572 - INFO     -   Returning:
2025-10-29 13:51:24,572 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:24,572 - INFO     -     - reward: 0.1063
2025-10-29 13:51:24,572 - INFO     -     - done: False
2025-10-29 13:51:24,572 - INFO     -     - truncated: False
2025-10-29 13:51:24,573 - INFO     -     - info: 19 keys
2025-10-29 13:51:24,573 - INFO     - ==========================================================================================

2025-10-29 13:51:24,578 - INFO     - 
==========================================================================================
2025-10-29 13:51:24,578 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:24,578 - INFO     - ==========================================================================================
2025-10-29 13:51:24,578 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:24,578 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:51:24,578 - INFO     -   Available edges in graph: 20
2025-10-29 13:51:24,578 - INFO     -   Action index calculation:
2025-10-29 13:51:24,579 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 20 = 2
2025-10-29 13:51:24,579 - INFO     -     - clamped to [0, 19]: 2
2025-10-29 13:51:24,579 - INFO     -   ✓ Extracted merge pair from edge 2: (0, 9)
2025-10-29 13:51:24,579 - INFO     -   ✓ Validation passed
2025-10-29 13:51:24,579 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:24,579 - INFO     -     - Total states before merge: 119
2025-10-29 13:51:24,579 - INFO     -     - Num nodes: 5
2025-10-29 13:51:24,579 - INFO     -     - Num edges: 20
2025-10-29 13:51:24,579 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:24,579 - INFO     -       - Node 0: 2 states
2025-10-29 13:51:24,579 - INFO     -       - Node 9: 10 states
2025-10-29 13:51:24,579 - INFO     -       - Expected product: 20 states
2025-10-29 13:51:24,579 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:24,589 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:51:24,589 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:24,589 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:51:24,690 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:24,690 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:24,690 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:51:24,691 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:24,691 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:24,691 - INFO     -   Calling graph_tracker.merge_nodes([0, 9])...
2025-10-29 13:51:24,691 - INFO     - Attempting merge of nodes 0 and 9...
2025-10-29 13:51:24,692 - INFO     - Successfully merged nodes into new node 13 with 20 states.
2025-10-29 13:51:24,692 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:24,692 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:24,692 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:51:24,692 - INFO     - 
================================================================================
2025-10-29 13:51:24,692 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:51:24,692 - INFO     - ================================================================================
2025-10-29 13:51:24,692 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:24,693 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:51:24,693 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:51:24,693 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:24,693 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:24,693 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:24,693 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:51:24,693 - INFO     -   - Raw f_after length: 20
2025-10-29 13:51:24,694 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:24,694 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:24,694 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:51:24,694 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:51:24,694 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:24,694 - INFO     -   - ts1_id: 0
2025-10-29 13:51:24,694 - INFO     -   - ts2_id: 9
2025-10-29 13:51:24,694 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:24,694 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:24,694 - INFO     -   - ts1_size: 2, ts2_size: 10
2025-10-29 13:51:24,694 - INFO     -   - Product space size: 20
2025-10-29 13:51:24,694 - INFO     -   - Using product state mapping
2025-10-29 13:51:24,694 - INFO     -   - f_before_product length: 20
2025-10-29 13:51:24,695 - INFO     -   - avg_f_before: 3.6500 (20 valid states)
2025-10-29 13:51:24,695 - INFO     -   - avg_f_after:  4.0000 (20 valid states)
2025-10-29 13:51:24,695 - INFO     -   - delta: 0.3500
2025-10-29 13:51:24,695 - INFO     -   - f_stability: 1.0 - |0.3500| / 3.6500 = 0.9041
2025-10-29 13:51:24,695 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:24,695 - INFO     -   - Compared 12 values
2025-10-29 13:51:24,695 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:24,695 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:24,695 - INFO     -   - states_before: 20
2025-10-29 13:51:24,696 - INFO     -   - states_after: 20
2025-10-29 13:51:24,696 - INFO     -   - delta_states: 0
2025-10-29 13:51:24,696 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:24,696 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:24,696 - INFO     -   - ts2_transitions: 37
2025-10-29 13:51:24,696 - INFO     -   - merged_transitions: 122
2025-10-29 13:51:24,696 - INFO     -   - transition_density_change: 4.0000
2025-10-29 13:51:24,696 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:24,696 - INFO     -   - search_signals present: True
2025-10-29 13:51:24,696 - INFO     -   - nodes_expanded: 20
2025-10-29 13:51:24,697 - INFO     -   - search_depth: 2
2025-10-29 13:51:24,697 - INFO     -   - solution_cost: 0
2025-10-29 13:51:24,697 - INFO     -   - branching_factor: 6.1000
2025-10-29 13:51:24,697 - INFO     -   - solution_found: True
2025-10-29 13:51:24,697 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:24,697 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:24,697 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:51:24,697 - INFO     -   - TS0(2) + TS9(10) → 20 states
2025-10-29 13:51:24,698 - INFO     -   - f_stability=0.904
2025-10-29 13:51:24,698 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:51:24,698 - INFO     -   - solution_found=True
2025-10-29 13:51:24,698 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:24,698 - INFO     - 
  Extracted signals:
2025-10-29 13:51:24,698 - INFO     -     - iteration: 4
2025-10-29 13:51:24,698 - INFO     -     - states_before: 20
2025-10-29 13:51:24,698 - INFO     -     - states_after: 20
2025-10-29 13:51:24,698 - INFO     -     - delta_states: 0
2025-10-29 13:51:24,698 - INFO     -     - f_value_stability: 0.9041
2025-10-29 13:51:24,698 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:24,699 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:24,699 - INFO     -     - nodes_expanded: 20
2025-10-29 13:51:24,699 - INFO     -     - search_depth: 2
2025-10-29 13:51:24,699 - INFO     -     - solution_cost: 0
2025-10-29 13:51:24,699 - INFO     -     - branching_factor: 6.1000
2025-10-29 13:51:24,699 - INFO     -     - solution_found: True
2025-10-29 13:51:24,699 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:24,699 - INFO     - 
  Computing reward:
2025-10-29 13:51:24,699 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:24,699 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:24,699 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:24,699 - INFO     -   [1] BRANCHING FACTOR: 6.100 → score 0.290 (high BF, minimal credit)
2025-10-29 13:51:24,699 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:24,699 - INFO     -   [3] F-VALUE STABILITY: 0.879
2025-10-29 13:51:24,699 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:51:24,701 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:24,701 - INFO     - 
  [COMPOSITE]: 0.687
2025-10-29 13:51:24,701 - INFO     -     = 0.300*0.290 (bf)
2025-10-29 13:51:24,701 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:24,701 - INFO     -     + 0.350*0.879 (stability)
2025-10-29 13:51:24,701 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:24,701 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:24,701 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:24,701 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:51:24,701 - INFO     - 
  [FINAL REWARD]: 0.8734
2025-10-29 13:51:24,701 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:24,701 - INFO     -     ✓ Reward computed: 0.8734
2025-10-29 13:51:24,701 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:24,702 - INFO     -     - bf_score                       0.2900
2025-10-29 13:51:24,702 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:24,702 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:24,702 - INFO     -     - f_stability                    0.8789
2025-10-29 13:51:24,702 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:51:24,702 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:24,702 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:24,702 - INFO     -     - composite                      0.6867
2025-10-29 13:51:24,702 - INFO     -     - total                          0.8734
2025-10-29 13:51:24,702 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:24,702 - INFO     -   Num remaining nodes: 4
2025-10-29 13:51:24,702 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:51:24,702 - INFO     -   Done: False
2025-10-29 13:51:24,702 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:24,703 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:24,703 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:24,703 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:24,703 - INFO     -     - num_nodes: 4
2025-10-29 13:51:24,703 - INFO     -     - num_edges: 12
2025-10-29 13:51:24,703 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:24,704 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:51:24,704 - INFO     -   After: current_merge_step = 5
2025-10-29 13:51:24,704 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:24,704 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:24,704 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:24,704 - INFO     -   ✓ Step logged
2025-10-29 13:51:24,705 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:24,705 - INFO     -   Returning:
2025-10-29 13:51:24,705 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:24,705 - INFO     -     - reward: 0.8734
2025-10-29 13:51:24,705 - INFO     -     - done: False
2025-10-29 13:51:24,705 - INFO     -     - truncated: False
2025-10-29 13:51:24,705 - INFO     -     - info: 19 keys
2025-10-29 13:51:24,705 - INFO     - ==========================================================================================

2025-10-29 13:51:24,710 - INFO     - 
==========================================================================================
2025-10-29 13:51:24,711 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:24,711 - INFO     - ==========================================================================================
2025-10-29 13:51:24,711 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:24,711 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:51:24,711 - INFO     -   Available edges in graph: 12
2025-10-29 13:51:24,711 - INFO     -   Action index calculation:
2025-10-29 13:51:24,711 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 12 = 0
2025-10-29 13:51:24,711 - INFO     -     - clamped to [0, 11]: 0
2025-10-29 13:51:24,711 - INFO     -   ✓ Extracted merge pair from edge 0: (4, 5)
2025-10-29 13:51:24,711 - INFO     -   ✓ Validation passed
2025-10-29 13:51:24,711 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:24,711 - INFO     -     - Total states before merge: 127
2025-10-29 13:51:24,711 - INFO     -     - Num nodes: 4
2025-10-29 13:51:24,711 - INFO     -     - Num edges: 12
2025-10-29 13:51:24,712 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:24,712 - INFO     -       - Node 4: 2 states
2025-10-29 13:51:24,712 - INFO     -       - Node 5: 5 states
2025-10-29 13:51:24,712 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:24,712 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:24,720 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:51:24,720 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:24,720 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:51:24,821 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:24,821 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:24,821 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:51:24,821 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:24,822 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:24,822 - INFO     -   Calling graph_tracker.merge_nodes([4, 5])...
2025-10-29 13:51:24,822 - INFO     - Attempting merge of nodes 4 and 5...
2025-10-29 13:51:24,822 - INFO     - Successfully merged nodes into new node 14 with 10 states.
2025-10-29 13:51:24,822 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:24,822 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:24,822 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:51:24,822 - INFO     - 
================================================================================
2025-10-29 13:51:24,822 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:51:24,822 - INFO     - ================================================================================
2025-10-29 13:51:24,822 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:24,822 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:51:24,822 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:51:24,823 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:24,823 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:24,823 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:24,823 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:51:24,823 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:24,823 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:24,823 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:24,823 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:51:24,823 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:24,823 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:24,823 - INFO     -   - ts1_id: 4
2025-10-29 13:51:24,823 - INFO     -   - ts2_id: 5
2025-10-29 13:51:24,823 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:24,824 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:24,824 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:51:24,824 - INFO     -   - Product space size: 10
2025-10-29 13:51:24,824 - INFO     -   - Using product state mapping
2025-10-29 13:51:24,824 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:24,824 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:51:24,824 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:51:24,824 - INFO     -   - delta: 0.8000
2025-10-29 13:51:24,824 - INFO     -   - f_stability: 1.0 - |0.8000| / 2.8000 = 0.7143
2025-10-29 13:51:24,824 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:24,824 - INFO     -   - Compared 7 values
2025-10-29 13:51:24,824 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:24,824 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:24,825 - INFO     -   - states_before: 10
2025-10-29 13:51:24,825 - INFO     -   - states_after: 10
2025-10-29 13:51:24,825 - INFO     -   - delta_states: 0
2025-10-29 13:51:24,825 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:24,825 - INFO     -   - ts1_transitions: 3
2025-10-29 13:51:24,825 - INFO     -   - ts2_transitions: 13
2025-10-29 13:51:24,825 - INFO     -   - merged_transitions: 27
2025-10-29 13:51:24,825 - INFO     -   - transition_density_change: 1.1000
2025-10-29 13:51:24,825 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:24,825 - INFO     -   - search_signals present: True
2025-10-29 13:51:24,825 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:24,825 - INFO     -   - search_depth: 2
2025-10-29 13:51:24,825 - INFO     -   - solution_cost: 2
2025-10-29 13:51:24,825 - INFO     -   - branching_factor: 2.7000
2025-10-29 13:51:24,825 - INFO     -   - solution_found: True
2025-10-29 13:51:24,825 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:24,825 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:24,826 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:51:24,826 - INFO     -   - TS4(2) + TS5(5) → 10 states
2025-10-29 13:51:24,826 - INFO     -   - f_stability=0.714
2025-10-29 13:51:24,826 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:24,826 - INFO     -   - solution_found=True
2025-10-29 13:51:24,826 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:24,826 - INFO     - 
  Extracted signals:
2025-10-29 13:51:24,826 - INFO     -     - iteration: 5
2025-10-29 13:51:24,826 - INFO     -     - states_before: 10
2025-10-29 13:51:24,826 - INFO     -     - states_after: 10
2025-10-29 13:51:24,826 - INFO     -     - delta_states: 0
2025-10-29 13:51:24,826 - INFO     -     - f_value_stability: 0.7143
2025-10-29 13:51:24,826 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:24,826 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:24,827 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:24,827 - INFO     -     - search_depth: 2
2025-10-29 13:51:24,827 - INFO     -     - solution_cost: 2
2025-10-29 13:51:24,827 - INFO     -     - branching_factor: 2.7000
2025-10-29 13:51:24,827 - INFO     -     - solution_found: True
2025-10-29 13:51:24,827 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:24,827 - INFO     - 
  Computing reward:
2025-10-29 13:51:24,827 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:24,827 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:24,827 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:24,827 - INFO     -   [1] BRANCHING FACTOR: 2.700 → score 0.745 (good (in comfort zone))
2025-10-29 13:51:24,827 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:24,827 - INFO     -   [3] F-VALUE STABILITY: 0.459
2025-10-29 13:51:24,827 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:51:24,827 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:24,828 - INFO     - 
  [COMPOSITE]: 0.676
2025-10-29 13:51:24,828 - INFO     -     = 0.300*0.745 (bf)
2025-10-29 13:51:24,828 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:24,828 - INFO     -     + 0.350*0.459 (stability)
2025-10-29 13:51:24,828 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:24,828 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:24,828 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:24,828 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:51:24,828 - INFO     - 
  [FINAL REWARD]: 0.6523
2025-10-29 13:51:24,828 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:24,828 - INFO     -     ✓ Reward computed: 0.6523
2025-10-29 13:51:24,828 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:24,828 - INFO     -     - bf_score                       0.7450
2025-10-29 13:51:24,828 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:24,828 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:24,828 - INFO     -     - f_stability                    0.4588
2025-10-29 13:51:24,829 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:51:24,829 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:24,829 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:24,829 - INFO     -     - composite                      0.6762
2025-10-29 13:51:24,829 - INFO     -     - total                          0.6523
2025-10-29 13:51:24,829 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:24,829 - INFO     -   Num remaining nodes: 3
2025-10-29 13:51:24,829 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:51:24,829 - INFO     -   Done: False
2025-10-29 13:51:24,829 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:24,829 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:24,830 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:24,830 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:24,830 - INFO     -     - num_nodes: 3
2025-10-29 13:51:24,830 - INFO     -     - num_edges: 6
2025-10-29 13:51:24,830 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:24,830 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:51:24,830 - INFO     -   After: current_merge_step = 6
2025-10-29 13:51:24,830 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:24,830 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:24,830 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:24,831 - INFO     -   ✓ Step logged
2025-10-29 13:51:24,831 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:24,831 - INFO     -   Returning:
2025-10-29 13:51:24,831 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:24,831 - INFO     -     - reward: 0.6523
2025-10-29 13:51:24,831 - INFO     -     - done: False
2025-10-29 13:51:24,831 - INFO     -     - truncated: False
2025-10-29 13:51:24,831 - INFO     -     - info: 19 keys
2025-10-29 13:51:24,831 - INFO     - ==========================================================================================

2025-10-29 13:51:24,836 - INFO     - 
==========================================================================================
2025-10-29 13:51:24,836 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:24,836 - INFO     - ==========================================================================================
2025-10-29 13:51:24,836 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:24,836 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:51:24,836 - INFO     -   Available edges in graph: 6
2025-10-29 13:51:24,836 - INFO     -   Action index calculation:
2025-10-29 13:51:24,836 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 6 = 0
2025-10-29 13:51:24,836 - INFO     -     - clamped to [0, 5]: 0
2025-10-29 13:51:24,837 - INFO     -   ✓ Extracted merge pair from edge 0: (12, 13)
2025-10-29 13:51:24,837 - INFO     -   ✓ Validation passed
2025-10-29 13:51:24,837 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:24,837 - INFO     -     - Total states before merge: 130
2025-10-29 13:51:24,837 - INFO     -     - Num nodes: 3
2025-10-29 13:51:24,837 - INFO     -     - Num edges: 6
2025-10-29 13:51:24,837 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:24,837 - INFO     -       - Node 12: 100 states
2025-10-29 13:51:24,837 - INFO     -       - Node 13: 20 states
2025-10-29 13:51:24,837 - INFO     -       - Expected product: 2000 states
2025-10-29 13:51:24,837 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:24,845 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:51:24,845 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:24,845 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:51:24,946 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:24,946 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:24,946 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:51:24,979 - INFO     -   ✓ TS file received after 0.03s
2025-10-29 13:51:24,979 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:24,979 - INFO     -   Calling graph_tracker.merge_nodes([12, 13])...
2025-10-29 13:51:24,979 - INFO     - Attempting merge of nodes 12 and 13...
2025-10-29 13:51:24,979 - INFO     - Successfully merged nodes into new node 15 with 2000 states.
2025-10-29 13:51:24,979 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:24,980 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:24,980 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:51:24,980 - INFO     - 
================================================================================
2025-10-29 13:51:24,980 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:51:24,980 - INFO     - ================================================================================
2025-10-29 13:51:24,980 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:24,980 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:51:24,980 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:51:24,982 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:24,982 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:24,982 - INFO     -   - Raw ts1_f length: 100
2025-10-29 13:51:24,983 - INFO     -   - Raw ts2_f length: 20
2025-10-29 13:51:24,983 - INFO     -   - Raw f_after length: 2000
2025-10-29 13:51:24,983 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:24,983 - INFO     -   - ts1_valid: 100 / 100 (removed 0)
2025-10-29 13:51:24,983 - INFO     -   - ts2_valid: 20 / 20 (removed -20)
2025-10-29 13:51:24,984 - INFO     -   - after_valid: 2000 / 2000 (removed 0)
2025-10-29 13:51:24,984 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:24,984 - INFO     -   - ts1_id: 12
2025-10-29 13:51:24,984 - INFO     -   - ts2_id: 13
2025-10-29 13:51:24,984 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:24,984 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:24,985 - INFO     -   - ts1_size: 100, ts2_size: 20
2025-10-29 13:51:24,985 - INFO     -   - Product space size: 2000
2025-10-29 13:51:24,985 - INFO     -   - Using product state mapping
2025-10-29 13:51:24,988 - INFO     -   - f_before_product length: 2000
2025-10-29 13:51:24,995 - INFO     -   - avg_f_before: 7.5335 (2000 valid states)
2025-10-29 13:51:24,995 - INFO     -   - avg_f_after:  12.0120 (2000 valid states)
2025-10-29 13:51:24,995 - INFO     -   - delta: 4.4785
2025-10-29 13:51:24,996 - INFO     -   - f_stability: 1.0 - |4.4785| / 7.5335 = 0.4055
2025-10-29 13:51:24,996 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:24,996 - INFO     -   - Compared 120 values
2025-10-29 13:51:24,996 - INFO     -   - Significant changes (> 5.0): 61
2025-10-29 13:51:24,996 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:24,996 - INFO     -   - states_before: 2000
2025-10-29 13:51:24,996 - INFO     -   - states_after: 2000
2025-10-29 13:51:24,996 - INFO     -   - delta_states: 0
2025-10-29 13:51:24,996 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:24,996 - INFO     -   - ts1_transitions: 620
2025-10-29 13:51:24,996 - INFO     -   - ts2_transitions: 122
2025-10-29 13:51:24,997 - INFO     -   - merged_transitions: 14400
2025-10-29 13:51:24,997 - INFO     -   - transition_density_change: 6.8290
2025-10-29 13:51:24,997 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:24,997 - INFO     -   - search_signals present: True
2025-10-29 13:51:24,997 - INFO     -   - nodes_expanded: 2000
2025-10-29 13:51:24,997 - INFO     -   - search_depth: 5
2025-10-29 13:51:24,997 - INFO     -   - solution_cost: 2
2025-10-29 13:51:24,997 - INFO     -   - branching_factor: 7.2000
2025-10-29 13:51:24,997 - INFO     -   - solution_found: True
2025-10-29 13:51:24,997 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:24,999 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:24,999 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:51:24,999 - INFO     -   - TS12(100) + TS13(20) → 2000 states
2025-10-29 13:51:24,999 - INFO     -   - f_stability=0.406
2025-10-29 13:51:24,999 - INFO     -   - A* nodes_expanded=2000
2025-10-29 13:51:24,999 - INFO     -   - solution_found=True
2025-10-29 13:51:24,999 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:24,999 - INFO     - 
  Extracted signals:
2025-10-29 13:51:24,999 - INFO     -     - iteration: 6
2025-10-29 13:51:24,999 - INFO     -     - states_before: 2000
2025-10-29 13:51:24,999 - INFO     -     - states_after: 2000
2025-10-29 13:51:24,999 - INFO     -     - delta_states: 0
2025-10-29 13:51:25,000 - INFO     -     - f_value_stability: 0.4055
2025-10-29 13:51:25,000 - INFO     -     - num_significant_f_changes: 61
2025-10-29 13:51:25,000 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:25,000 - INFO     -     - nodes_expanded: 2000
2025-10-29 13:51:25,000 - INFO     -     - search_depth: 5
2025-10-29 13:51:25,000 - INFO     -     - solution_cost: 2
2025-10-29 13:51:25,000 - INFO     -     - branching_factor: 7.2000
2025-10-29 13:51:25,000 - INFO     -     - solution_found: True
2025-10-29 13:51:25,000 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:25,000 - INFO     - 
  Computing reward:
2025-10-29 13:51:25,000 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:25,001 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:25,001 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:25,001 - INFO     -   [1] BRANCHING FACTOR: 7.200 → score 0.180 (high BF, minimal credit)
2025-10-29 13:51:25,001 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:51:25,002 - INFO     -   [3] F-VALUE STABILITY: 0.416
2025-10-29 13:51:25,002 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:51:25,002 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:25,002 - INFO     - 
  [COMPOSITE]: 0.474
2025-10-29 13:51:25,002 - INFO     -     = 0.300*0.180 (bf)
2025-10-29 13:51:25,002 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:51:25,002 - INFO     -     + 0.350*0.416 (stability)
2025-10-29 13:51:25,002 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:25,002 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:25,002 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:25,002 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:51:25,003 - INFO     - 
  [FINAL REWARD]: 0.2480
2025-10-29 13:51:25,003 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:25,003 - INFO     -     ✓ Reward computed: 0.2480
2025-10-29 13:51:25,003 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:25,003 - INFO     -     - bf_score                       0.1800
2025-10-29 13:51:25,003 - INFO     -     - depth_score                    0.7721
2025-10-29 13:51:25,003 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:25,003 - INFO     -     - f_stability                    0.4159
2025-10-29 13:51:25,003 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:51:25,003 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:25,003 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:25,003 - INFO     -     - composite                      0.4740
2025-10-29 13:51:25,003 - INFO     -     - total                          0.2480
2025-10-29 13:51:25,003 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:25,004 - INFO     -   Num remaining nodes: 2
2025-10-29 13:51:25,004 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:51:25,004 - INFO     -   Done: False
2025-10-29 13:51:25,004 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:25,004 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:25,004 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:25,004 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:25,004 - INFO     -     - num_nodes: 2
2025-10-29 13:51:25,004 - INFO     -     - num_edges: 2
2025-10-29 13:51:25,005 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:25,005 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:51:25,005 - INFO     -   After: current_merge_step = 7
2025-10-29 13:51:25,005 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:25,005 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:25,005 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:25,005 - INFO     -   ✓ Step logged
2025-10-29 13:51:25,005 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:25,006 - INFO     -   Returning:
2025-10-29 13:51:25,006 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:25,006 - INFO     -     - reward: 0.2480
2025-10-29 13:51:25,006 - INFO     -     - done: False
2025-10-29 13:51:25,006 - INFO     -     - truncated: False
2025-10-29 13:51:25,006 - INFO     -     - info: 19 keys
2025-10-29 13:51:25,006 - INFO     - ==========================================================================================

2025-10-29 13:51:25,011 - INFO     - 
==========================================================================================
2025-10-29 13:51:25,011 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:25,011 - INFO     - ==========================================================================================
2025-10-29 13:51:25,011 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:25,011 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:51:25,011 - INFO     -   Available edges in graph: 2
2025-10-29 13:51:25,011 - INFO     -   Action index calculation:
2025-10-29 13:51:25,011 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:51:25,011 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:51:25,011 - INFO     -   ✓ Extracted merge pair from edge 0: (14, 15)
2025-10-29 13:51:25,011 - INFO     -   ✓ Validation passed
2025-10-29 13:51:25,011 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:25,011 - INFO     -     - Total states before merge: 2010
2025-10-29 13:51:25,011 - INFO     -     - Num nodes: 2
2025-10-29 13:51:25,011 - INFO     -     - Num edges: 2
2025-10-29 13:51:25,011 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:25,011 - INFO     -       - Node 14: 10 states
2025-10-29 13:51:25,011 - INFO     -       - Node 15: 2000 states
2025-10-29 13:51:25,011 - INFO     -       - Expected product: 20000 states
2025-10-29 13:51:25,011 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:25,021 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:51:25,021 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:25,021 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:51:25,122 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:25,122 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:25,122 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:51:25,139 - INFO     -   ✓ TS file received after 0.02s
2025-10-29 13:51:25,139 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:25,139 - INFO     -   Calling graph_tracker.merge_nodes([14, 15])...
2025-10-29 13:51:25,139 - INFO     - Attempting merge of nodes 14 and 15...
2025-10-29 13:51:25,139 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:51:25,139 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:25,140 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:25,140 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:51:25,140 - INFO     - 
================================================================================
2025-10-29 13:51:25,140 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:51:25,140 - INFO     - ================================================================================
2025-10-29 13:51:25,140 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:25,140 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:51:25,140 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:51:25,145 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:25,145 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:25,145 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:51:25,145 - INFO     -   - Raw ts2_f length: 325
2025-10-29 13:51:25,145 - INFO     -   - Raw f_after length: 3250
2025-10-29 13:51:25,145 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:25,145 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:51:25,145 - INFO     -   - ts2_valid: 325 / 325 (removed -325)
2025-10-29 13:51:25,146 - INFO     -   - after_valid: 1991 / 3250 (removed 1259)
2025-10-29 13:51:25,147 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:25,147 - INFO     -   - ts1_id: 14
2025-10-29 13:51:25,147 - INFO     -   - ts2_id: 15
2025-10-29 13:51:25,147 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:25,147 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:25,147 - INFO     -   - ts1_size: 10, ts2_size: 325
2025-10-29 13:51:25,147 - INFO     -   - Product space size: 3250
2025-10-29 13:51:25,147 - INFO     -   - Using product state mapping
2025-10-29 13:51:25,152 - INFO     -   - f_before_product length: 3250
2025-10-29 13:51:25,159 - INFO     -   - avg_f_before: 6.4625 (3250 valid states)
2025-10-29 13:51:25,160 - INFO     -   - avg_f_after:  11.9694 (1991 valid states)
2025-10-29 13:51:25,160 - INFO     -   - delta: 5.5069
2025-10-29 13:51:25,160 - INFO     -   - f_stability: 1.0 - |5.5069| / 6.4625 = 0.1479
2025-10-29 13:51:25,160 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:25,160 - INFO     -   - Compared 335 values
2025-10-29 13:51:25,160 - INFO     -   - Significant changes (> 5.0): 156
2025-10-29 13:51:25,160 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:25,160 - INFO     -   - states_before: 3250
2025-10-29 13:51:25,160 - INFO     -   - states_after: 3250
2025-10-29 13:51:25,160 - INFO     -   - delta_states: 0
2025-10-29 13:51:25,160 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:25,161 - INFO     -   - ts1_transitions: 27
2025-10-29 13:51:25,161 - INFO     -   - ts2_transitions: 3348
2025-10-29 13:51:25,161 - INFO     -   - merged_transitions: 14647
2025-10-29 13:51:25,161 - INFO     -   - transition_density_change: 3.4683
2025-10-29 13:51:25,161 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:25,161 - INFO     -   - search_signals present: True
2025-10-29 13:51:25,161 - INFO     -   - nodes_expanded: 1991
2025-10-29 13:51:25,161 - INFO     -   - search_depth: 5
2025-10-29 13:51:25,161 - INFO     -   - solution_cost: 4
2025-10-29 13:51:25,161 - INFO     -   - branching_factor: 7.3566
2025-10-29 13:51:25,161 - INFO     -   - solution_found: True
2025-10-29 13:51:25,161 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:25,163 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:25,163 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:51:25,163 - INFO     -   - TS14(10) + TS15(325) → 3250 states
2025-10-29 13:51:25,163 - INFO     -   - f_stability=0.148
2025-10-29 13:51:25,163 - INFO     -   - A* nodes_expanded=1991
2025-10-29 13:51:25,163 - INFO     -   - solution_found=True
2025-10-29 13:51:25,163 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:25,163 - INFO     - 
  Extracted signals:
2025-10-29 13:51:25,163 - INFO     -     - iteration: 7
2025-10-29 13:51:25,163 - INFO     -     - states_before: 3250
2025-10-29 13:51:25,163 - INFO     -     - states_after: 3250
2025-10-29 13:51:25,164 - INFO     -     - delta_states: 0
2025-10-29 13:51:25,164 - INFO     -     - f_value_stability: 0.1479
2025-10-29 13:51:25,164 - INFO     -     - num_significant_f_changes: 156
2025-10-29 13:51:25,164 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:25,164 - INFO     -     - nodes_expanded: 1991
2025-10-29 13:51:25,164 - INFO     -     - search_depth: 5
2025-10-29 13:51:25,164 - INFO     -     - solution_cost: 4
2025-10-29 13:51:25,164 - INFO     -     - branching_factor: 7.3566
2025-10-29 13:51:25,164 - INFO     -     - solution_found: True
2025-10-29 13:51:25,164 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:25,164 - WARNING  -     ⚠️  Poor F-stability: 0.1479
2025-10-29 13:51:25,165 - INFO     - 
  Computing reward:
2025-10-29 13:51:25,165 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:25,165 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:25,165 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:25,165 - INFO     -   [1] BRANCHING FACTOR: 7.357 → score 0.164 (high BF, minimal credit)
2025-10-29 13:51:25,165 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:51:25,166 - INFO     -   [3] F-VALUE STABILITY: 0.362
2025-10-29 13:51:25,166 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:51:25,167 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:25,167 - INFO     - 
  [COMPOSITE]: 0.451
2025-10-29 13:51:25,167 - INFO     -     = 0.300*0.164 (bf)
2025-10-29 13:51:25,167 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:51:25,167 - INFO     -     + 0.350*0.362 (stability)
2025-10-29 13:51:25,167 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:25,167 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:25,167 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:25,167 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:51:25,167 - WARNING  -   ⚠️  BAD MERGE DETECTED: F-stability extremely poor: 0.148
2025-10-29 13:51:25,167 - INFO     -     + Bad merge penalty: -0.150
2025-10-29 13:51:25,167 - INFO     - 
  [FINAL REWARD]: 0.0511
2025-10-29 13:51:25,169 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:25,169 - INFO     -     ✓ Reward computed: 0.0511
2025-10-29 13:51:25,169 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:25,169 - INFO     -     - bf_score                       0.1643
2025-10-29 13:51:25,169 - INFO     -     - depth_score                    0.7721
2025-10-29 13:51:25,169 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:25,169 - INFO     -     - f_stability                    0.3623
2025-10-29 13:51:25,169 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:51:25,169 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:25,169 - INFO     -     - bad_merge_penalty              -0.1500
2025-10-29 13:51:25,169 - INFO     -     - composite                      0.4505
2025-10-29 13:51:25,169 - INFO     -     - total                          0.0511
2025-10-29 13:51:25,169 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:25,169 - INFO     -   Num remaining nodes: 1
2025-10-29 13:51:25,169 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:51:25,169 - INFO     -   Done: True
2025-10-29 13:51:25,170 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:51:25,170 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:25,170 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:25,170 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:25,170 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:25,170 - INFO     -     - num_nodes: 1
2025-10-29 13:51:25,170 - INFO     -     - num_edges: 0
2025-10-29 13:51:25,170 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:25,170 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:51:25,170 - INFO     -   After: current_merge_step = 8
2025-10-29 13:51:25,170 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:25,170 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:25,170 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:25,171 - INFO     -   ✓ Step logged
2025-10-29 13:51:25,171 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:25,171 - INFO     -   Returning:
2025-10-29 13:51:25,171 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:25,171 - INFO     -     - reward: 0.0511
2025-10-29 13:51:25,171 - INFO     -     - done: True
2025-10-29 13:51:25,171 - INFO     -     - truncated: False
2025-10-29 13:51:25,171 - INFO     -     - info: 19 keys
2025-10-29 13:51:25,172 - INFO     - ==========================================================================================

2025-10-29 13:51:25,247 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:51:25,254 - INFO     - [Handshake] Building FD command:
2025-10-29 13:51:25,254 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:51:25,254 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_01.pddl
2025-10-29 13:51:25,254 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:51:25,257 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:51:26,009 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:51:26,009 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:51:26,009 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:51:26,324 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:51:26,325 - INFO     - Initializing GraphTracker...
2025-10-29 13:51:26,325 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:51:26,326 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:51:26,326 - INFO     -    → Node 0 has 2 states
2025-10-29 13:51:26,326 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:51:26,326 - INFO     -    → Node 1 has 2 states
2025-10-29 13:51:26,326 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:51:26,327 - INFO     -    → Node 2 has 2 states
2025-10-29 13:51:26,327 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:51:26,327 - INFO     -    → Node 3 has 2 states
2025-10-29 13:51:26,327 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:51:26,327 - INFO     -    → Node 4 has 2 states
2025-10-29 13:51:26,327 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:51:26,327 - INFO     -    → Node 5 has 5 states
2025-10-29 13:51:26,327 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:51:26,327 - INFO     -    → Node 6 has 5 states
2025-10-29 13:51:26,327 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:51:26,327 - INFO     -    → Node 7 has 5 states
2025-10-29 13:51:26,327 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:51:26,327 - INFO     -    → Node 8 has 5 states
2025-10-29 13:51:26,327 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:51:26,328 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:51:26,330 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:51:26,330 - INFO     - Added edge (0, 1)
2025-10-29 13:51:26,330 - INFO     - Added edge (0, 2)
2025-10-29 13:51:26,330 - INFO     - Added edge (0, 3)
2025-10-29 13:51:26,330 - INFO     - Added edge (0, 4)
2025-10-29 13:51:26,330 - INFO     - Added edge (0, 5)
2025-10-29 13:51:26,330 - INFO     - Added edge (0, 6)
2025-10-29 13:51:26,330 - INFO     - Added edge (0, 7)
2025-10-29 13:51:26,330 - INFO     - Added edge (0, 8)
2025-10-29 13:51:26,330 - INFO     - Added edge (1, 0)
2025-10-29 13:51:26,330 - INFO     - Added edge (1, 2)
2025-10-29 13:51:26,331 - INFO     - Added edge (1, 3)
2025-10-29 13:51:26,331 - INFO     - Added edge (1, 4)
2025-10-29 13:51:26,331 - INFO     - Added edge (1, 5)
2025-10-29 13:51:26,331 - INFO     - Added edge (1, 6)
2025-10-29 13:51:26,331 - INFO     - Added edge (1, 7)
2025-10-29 13:51:26,331 - INFO     - Added edge (1, 8)
2025-10-29 13:51:26,331 - INFO     - Added edge (2, 0)
2025-10-29 13:51:26,331 - INFO     - Added edge (2, 1)
2025-10-29 13:51:26,331 - INFO     - Added edge (2, 3)
2025-10-29 13:51:26,331 - INFO     - Added edge (2, 4)
2025-10-29 13:51:26,331 - INFO     - Added edge (2, 5)
2025-10-29 13:51:26,331 - INFO     - Added edge (2, 6)
2025-10-29 13:51:26,331 - INFO     - Added edge (2, 7)
2025-10-29 13:51:26,331 - INFO     - Added edge (2, 8)
2025-10-29 13:51:26,331 - INFO     - Added edge (3, 0)
2025-10-29 13:51:26,331 - INFO     - Added edge (3, 1)
2025-10-29 13:51:26,331 - INFO     - Added edge (3, 2)
2025-10-29 13:51:26,331 - INFO     - Added edge (3, 4)
2025-10-29 13:51:26,331 - INFO     - Added edge (3, 5)
2025-10-29 13:51:26,331 - INFO     - Added edge (3, 6)
2025-10-29 13:51:26,331 - INFO     - Added edge (3, 7)
2025-10-29 13:51:26,331 - INFO     - Added edge (3, 8)
2025-10-29 13:51:26,331 - INFO     - Added edge (4, 0)
2025-10-29 13:51:26,331 - INFO     - Added edge (4, 1)
2025-10-29 13:51:26,331 - INFO     - Added edge (4, 2)
2025-10-29 13:51:26,331 - INFO     - Added edge (4, 3)
2025-10-29 13:51:26,331 - INFO     - Added edge (4, 5)
2025-10-29 13:51:26,331 - INFO     - Added edge (4, 6)
2025-10-29 13:51:26,331 - INFO     - Added edge (4, 7)
2025-10-29 13:51:26,333 - INFO     - Added edge (4, 8)
2025-10-29 13:51:26,333 - INFO     - Added edge (5, 0)
2025-10-29 13:51:26,333 - INFO     - Added edge (5, 1)
2025-10-29 13:51:26,333 - INFO     - Added edge (5, 2)
2025-10-29 13:51:26,333 - INFO     - Added edge (5, 3)
2025-10-29 13:51:26,333 - INFO     - Added edge (5, 4)
2025-10-29 13:51:26,333 - INFO     - Added edge (6, 0)
2025-10-29 13:51:26,333 - INFO     - Added edge (6, 1)
2025-10-29 13:51:26,333 - INFO     - Added edge (6, 2)
2025-10-29 13:51:26,333 - INFO     - Added edge (6, 3)
2025-10-29 13:51:26,333 - INFO     - Added edge (6, 4)
2025-10-29 13:51:26,333 - INFO     - Added edge (7, 0)
2025-10-29 13:51:26,333 - INFO     - Added edge (7, 1)
2025-10-29 13:51:26,333 - INFO     - Added edge (7, 2)
2025-10-29 13:51:26,333 - INFO     - Added edge (7, 3)
2025-10-29 13:51:26,333 - INFO     - Added edge (7, 4)
2025-10-29 13:51:26,333 - INFO     - Added edge (8, 0)
2025-10-29 13:51:26,333 - INFO     - Added edge (8, 1)
2025-10-29 13:51:26,333 - INFO     - Added edge (8, 2)
2025-10-29 13:51:26,333 - INFO     - Added edge (8, 3)
2025-10-29 13:51:26,333 - INFO     - Added edge (8, 4)
2025-10-29 13:51:26,333 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:51:26,343 - INFO     - 
==========================================================================================
2025-10-29 13:51:26,344 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:26,344 - INFO     - ==========================================================================================
2025-10-29 13:51:26,344 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:26,345 - INFO     -   Input action: 51 (type: int)
2025-10-29 13:51:26,345 - INFO     -   Available edges in graph: 60
2025-10-29 13:51:26,345 - INFO     -   Action index calculation:
2025-10-29 13:51:26,345 - INFO     -     - action % max(num_valid_edges, 1) = 51 % 60 = 51
2025-10-29 13:51:26,345 - INFO     -     - clamped to [0, 59]: 51
2025-10-29 13:51:26,345 - INFO     -   ✓ Extracted merge pair from edge 51: (7, 1)
2025-10-29 13:51:26,345 - INFO     -   ✓ Validation passed
2025-10-29 13:51:26,345 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:26,345 - INFO     -     - Total states before merge: 30
2025-10-29 13:51:26,346 - INFO     -     - Num nodes: 9
2025-10-29 13:51:26,346 - INFO     -     - Num edges: 60
2025-10-29 13:51:26,346 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:26,346 - INFO     -       - Node 7: 5 states
2025-10-29 13:51:26,346 - INFO     -       - Node 1: 2 states
2025-10-29 13:51:26,346 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:26,346 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:26,356 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:51:26,356 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:26,357 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:51:26,457 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:26,457 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:26,457 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:51:26,457 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:26,457 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:26,457 - INFO     -   Calling graph_tracker.merge_nodes([7, 1])...
2025-10-29 13:51:26,457 - INFO     - Attempting merge of nodes 7 and 1...
2025-10-29 13:51:26,459 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:51:26,459 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:26,459 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:26,459 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:51:26,459 - INFO     - 
================================================================================
2025-10-29 13:51:26,459 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:51:26,459 - INFO     - ================================================================================
2025-10-29 13:51:26,459 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:26,459 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:51:26,459 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:51:26,459 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:26,460 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:26,460 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:26,460 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:26,460 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:26,460 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:26,460 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:26,460 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:26,460 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:26,460 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:26,460 - INFO     -   - ts1_id: 7
2025-10-29 13:51:26,460 - INFO     -   - ts2_id: 1
2025-10-29 13:51:26,460 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:26,460 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:26,460 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:51:26,460 - INFO     -   - Product space size: 10
2025-10-29 13:51:26,460 - INFO     -   - Using product state mapping
2025-10-29 13:51:26,460 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:26,461 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:51:26,461 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:51:26,461 - INFO     -   - delta: 0.5000
2025-10-29 13:51:26,461 - INFO     -   - f_stability: 1.0 - |0.5000| / 2.8000 = 0.8214
2025-10-29 13:51:26,461 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:26,461 - INFO     -   - Compared 7 values
2025-10-29 13:51:26,462 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:26,462 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:26,462 - INFO     -   - states_before: 10
2025-10-29 13:51:26,462 - INFO     -   - states_after: 10
2025-10-29 13:51:26,462 - INFO     -   - delta_states: 0
2025-10-29 13:51:26,462 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:26,462 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:26,462 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:26,462 - INFO     -   - merged_transitions: 40
2025-10-29 13:51:26,462 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:51:26,462 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:26,462 - INFO     -   - search_signals present: True
2025-10-29 13:51:26,462 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:26,462 - INFO     -   - search_depth: 1
2025-10-29 13:51:26,463 - INFO     -   - solution_cost: 2
2025-10-29 13:51:26,463 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:51:26,463 - INFO     -   - solution_found: True
2025-10-29 13:51:26,463 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:26,463 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:26,464 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:51:26,464 - INFO     -   - TS7(5) + TS1(2) → 10 states
2025-10-29 13:51:26,464 - INFO     -   - f_stability=0.821
2025-10-29 13:51:26,464 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:26,464 - INFO     -   - solution_found=True
2025-10-29 13:51:26,464 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:26,464 - INFO     - 
  Extracted signals:
2025-10-29 13:51:26,464 - INFO     -     - iteration: 0
2025-10-29 13:51:26,464 - INFO     -     - states_before: 10
2025-10-29 13:51:26,464 - INFO     -     - states_after: 10
2025-10-29 13:51:26,465 - INFO     -     - delta_states: 0
2025-10-29 13:51:26,465 - INFO     -     - f_value_stability: 0.8214
2025-10-29 13:51:26,465 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:26,465 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:26,465 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:26,465 - INFO     -     - search_depth: 1
2025-10-29 13:51:26,465 - INFO     -     - solution_cost: 2
2025-10-29 13:51:26,465 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:51:26,465 - INFO     -     - solution_found: True
2025-10-29 13:51:26,465 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:26,465 - INFO     - 
  Computing reward:
2025-10-29 13:51:26,465 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:26,465 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:26,465 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:26,465 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:51:26,466 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:51:26,466 - INFO     -   [3] F-VALUE STABILITY: 0.593
2025-10-29 13:51:26,466 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:26,466 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:26,466 - INFO     - 
  [COMPOSITE]: 0.680
2025-10-29 13:51:26,466 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:51:26,466 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:51:26,466 - INFO     -     + 0.350*0.593 (stability)
2025-10-29 13:51:26,467 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:26,467 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:26,467 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:26,467 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:26,467 - INFO     - 
  [FINAL REWARD]: 0.7602
2025-10-29 13:51:26,467 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:26,467 - INFO     -     ✓ Reward computed: 0.7602
2025-10-29 13:51:26,467 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:26,467 - INFO     -     - bf_score                       0.5667
2025-10-29 13:51:26,467 - INFO     -     - depth_score                    0.9119
2025-10-29 13:51:26,467 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:26,467 - INFO     -     - f_stability                    0.5935
2025-10-29 13:51:26,467 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:26,467 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:26,467 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:26,468 - INFO     -     - composite                      0.6801
2025-10-29 13:51:26,468 - INFO     -     - total                          0.7602
2025-10-29 13:51:26,468 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:26,468 - INFO     -   Num remaining nodes: 8
2025-10-29 13:51:26,468 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:51:26,468 - INFO     -   Done: False
2025-10-29 13:51:26,468 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:26,470 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:26,470 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:26,470 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:26,470 - INFO     -     - num_nodes: 8
2025-10-29 13:51:26,470 - INFO     -     - num_edges: 50
2025-10-29 13:51:26,470 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:26,470 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:51:26,470 - INFO     -   After: current_merge_step = 1
2025-10-29 13:51:26,471 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:26,471 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:26,471 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:26,472 - INFO     -   ✓ Step logged
2025-10-29 13:51:26,472 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:26,472 - INFO     -   Returning:
2025-10-29 13:51:26,472 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:26,472 - INFO     -     - reward: 0.7602
2025-10-29 13:51:26,472 - INFO     -     - done: False
2025-10-29 13:51:26,472 - INFO     -     - truncated: False
2025-10-29 13:51:26,472 - INFO     -     - info: 19 keys
2025-10-29 13:51:26,472 - INFO     - ==========================================================================================

2025-10-29 13:51:26,476 - INFO     - 
==========================================================================================
2025-10-29 13:51:26,476 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:26,476 - INFO     - ==========================================================================================
2025-10-29 13:51:26,476 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:26,476 - INFO     -   Input action: 26 (type: int)
2025-10-29 13:51:26,476 - INFO     -   Available edges in graph: 50
2025-10-29 13:51:26,476 - INFO     -   Action index calculation:
2025-10-29 13:51:26,476 - INFO     -     - action % max(num_valid_edges, 1) = 26 % 50 = 26
2025-10-29 13:51:26,478 - INFO     -     - clamped to [0, 49]: 26
2025-10-29 13:51:26,478 - INFO     -   ✓ Extracted merge pair from edge 26: (4, 8)
2025-10-29 13:51:26,478 - INFO     -   ✓ Validation passed
2025-10-29 13:51:26,478 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:26,478 - INFO     -     - Total states before merge: 33
2025-10-29 13:51:26,478 - INFO     -     - Num nodes: 8
2025-10-29 13:51:26,478 - INFO     -     - Num edges: 50
2025-10-29 13:51:26,478 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:26,478 - INFO     -       - Node 4: 2 states
2025-10-29 13:51:26,478 - INFO     -       - Node 8: 5 states
2025-10-29 13:51:26,478 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:26,478 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:26,483 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:51:26,484 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:26,484 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:51:26,584 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:26,584 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:26,584 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:51:26,586 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:26,586 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:26,586 - INFO     -   Calling graph_tracker.merge_nodes([4, 8])...
2025-10-29 13:51:26,586 - INFO     - Attempting merge of nodes 4 and 8...
2025-10-29 13:51:26,586 - INFO     - Successfully merged nodes into new node 10 with 10 states.
2025-10-29 13:51:26,586 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:26,586 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:26,586 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:51:26,586 - INFO     - 
================================================================================
2025-10-29 13:51:26,586 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:51:26,586 - INFO     - ================================================================================
2025-10-29 13:51:26,586 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:26,586 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:51:26,586 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:51:26,587 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:26,587 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:26,587 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:26,587 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:51:26,587 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:26,587 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:26,587 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:26,587 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:51:26,588 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:26,588 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:26,588 - INFO     -   - ts1_id: 4
2025-10-29 13:51:26,588 - INFO     -   - ts2_id: 8
2025-10-29 13:51:26,588 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:26,588 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:26,588 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:51:26,588 - INFO     -   - Product space size: 10
2025-10-29 13:51:26,588 - INFO     -   - Using product state mapping
2025-10-29 13:51:26,588 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:26,588 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:51:26,589 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:51:26,589 - INFO     -   - delta: 0.7000
2025-10-29 13:51:26,589 - INFO     -   - f_stability: 1.0 - |0.7000| / 2.9000 = 0.7586
2025-10-29 13:51:26,589 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:26,589 - INFO     -   - Compared 7 values
2025-10-29 13:51:26,589 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:51:26,589 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:26,589 - INFO     -   - states_before: 10
2025-10-29 13:51:26,589 - INFO     -   - states_after: 10
2025-10-29 13:51:26,589 - INFO     -   - delta_states: 0
2025-10-29 13:51:26,589 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:26,590 - INFO     -   - ts1_transitions: 3
2025-10-29 13:51:26,590 - INFO     -   - ts2_transitions: 13
2025-10-29 13:51:26,590 - INFO     -   - merged_transitions: 27
2025-10-29 13:51:26,590 - INFO     -   - transition_density_change: 1.1000
2025-10-29 13:51:26,590 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:26,590 - INFO     -   - search_signals present: True
2025-10-29 13:51:26,590 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:26,590 - INFO     -   - search_depth: 2
2025-10-29 13:51:26,590 - INFO     -   - solution_cost: 0
2025-10-29 13:51:26,590 - INFO     -   - branching_factor: 2.7000
2025-10-29 13:51:26,590 - INFO     -   - solution_found: True
2025-10-29 13:51:26,591 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:26,591 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:26,591 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:51:26,591 - INFO     -   - TS4(2) + TS8(5) → 10 states
2025-10-29 13:51:26,591 - INFO     -   - f_stability=0.759
2025-10-29 13:51:26,591 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:26,591 - INFO     -   - solution_found=True
2025-10-29 13:51:26,591 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:26,591 - INFO     - 
  Extracted signals:
2025-10-29 13:51:26,591 - INFO     -     - iteration: 1
2025-10-29 13:51:26,591 - INFO     -     - states_before: 10
2025-10-29 13:51:26,591 - INFO     -     - states_after: 10
2025-10-29 13:51:26,592 - INFO     -     - delta_states: 0
2025-10-29 13:51:26,592 - INFO     -     - f_value_stability: 0.7586
2025-10-29 13:51:26,592 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:51:26,592 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:26,592 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:26,592 - INFO     -     - search_depth: 2
2025-10-29 13:51:26,592 - INFO     -     - solution_cost: 0
2025-10-29 13:51:26,592 - INFO     -     - branching_factor: 2.7000
2025-10-29 13:51:26,592 - INFO     -     - solution_found: True
2025-10-29 13:51:26,592 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:26,592 - INFO     - 
  Computing reward:
2025-10-29 13:51:26,592 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:26,592 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:26,592 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:26,593 - INFO     -   [1] BRANCHING FACTOR: 2.700 → score 0.745 (good (in comfort zone))
2025-10-29 13:51:26,593 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:26,593 - INFO     -   [3] F-VALUE STABILITY: 0.251
2025-10-29 13:51:26,593 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:26,593 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:26,593 - INFO     - 
  [COMPOSITE]: 0.603
2025-10-29 13:51:26,593 - INFO     -     = 0.300*0.745 (bf)
2025-10-29 13:51:26,593 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:26,593 - INFO     -     + 0.350*0.251 (stability)
2025-10-29 13:51:26,594 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:26,594 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:26,594 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:26,594 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:26,594 - INFO     - 
  [FINAL REWARD]: 0.4066
2025-10-29 13:51:26,594 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:26,594 - INFO     -     ✓ Reward computed: 0.4066
2025-10-29 13:51:26,594 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:26,594 - INFO     -     - bf_score                       0.7450
2025-10-29 13:51:26,594 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:26,594 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:26,594 - INFO     -     - f_stability                    0.2507
2025-10-29 13:51:26,594 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:26,594 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:26,595 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:26,595 - INFO     -     - composite                      0.6033
2025-10-29 13:51:26,595 - INFO     -     - total                          0.4066
2025-10-29 13:51:26,595 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:26,595 - INFO     -   Num remaining nodes: 7
2025-10-29 13:51:26,595 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:51:26,595 - INFO     -   Done: False
2025-10-29 13:51:26,595 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:26,597 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:26,597 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:26,597 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:26,597 - INFO     -     - num_nodes: 7
2025-10-29 13:51:26,597 - INFO     -     - num_edges: 40
2025-10-29 13:51:26,597 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:26,597 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:51:26,597 - INFO     -   After: current_merge_step = 2
2025-10-29 13:51:26,597 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:26,597 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:26,598 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:26,598 - INFO     -   ✓ Step logged
2025-10-29 13:51:26,598 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:26,599 - INFO     -   Returning:
2025-10-29 13:51:26,599 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:26,599 - INFO     -     - reward: 0.4066
2025-10-29 13:51:26,599 - INFO     -     - done: False
2025-10-29 13:51:26,599 - INFO     -     - truncated: False
2025-10-29 13:51:26,599 - INFO     -     - info: 19 keys
2025-10-29 13:51:26,599 - INFO     - ==========================================================================================

2025-10-29 13:51:26,603 - INFO     - 
==========================================================================================
2025-10-29 13:51:26,604 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:26,604 - INFO     - ==========================================================================================
2025-10-29 13:51:26,604 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:26,604 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:51:26,604 - INFO     -   Available edges in graph: 40
2025-10-29 13:51:26,604 - INFO     -   Action index calculation:
2025-10-29 13:51:26,604 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 40 = 1
2025-10-29 13:51:26,604 - INFO     -     - clamped to [0, 39]: 1
2025-10-29 13:51:26,604 - INFO     -   ✓ Extracted merge pair from edge 1: (0, 3)
2025-10-29 13:51:26,604 - INFO     -   ✓ Validation passed
2025-10-29 13:51:26,604 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:26,604 - INFO     -     - Total states before merge: 36
2025-10-29 13:51:26,604 - INFO     -     - Num nodes: 7
2025-10-29 13:51:26,605 - INFO     -     - Num edges: 40
2025-10-29 13:51:26,605 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:26,605 - INFO     -       - Node 0: 2 states
2025-10-29 13:51:26,605 - INFO     -       - Node 3: 2 states
2025-10-29 13:51:26,605 - INFO     -       - Expected product: 4 states
2025-10-29 13:51:26,605 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:26,611 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:51:26,611 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:26,611 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:51:26,713 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:26,713 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:26,713 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:51:26,714 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:26,714 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:26,714 - INFO     -   Calling graph_tracker.merge_nodes([0, 3])...
2025-10-29 13:51:26,714 - INFO     - Attempting merge of nodes 0 and 3...
2025-10-29 13:51:26,714 - INFO     - Successfully merged nodes into new node 11 with 4 states.
2025-10-29 13:51:26,714 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:26,714 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:26,715 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:51:26,715 - INFO     - 
================================================================================
2025-10-29 13:51:26,715 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:51:26,715 - INFO     - ================================================================================
2025-10-29 13:51:26,715 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:26,715 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:51:26,715 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:51:26,716 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:26,716 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:26,716 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:26,716 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:26,716 - INFO     -   - Raw f_after length: 4
2025-10-29 13:51:26,716 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:26,716 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:26,716 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:26,716 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:51:26,716 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:26,716 - INFO     -   - ts1_id: 0
2025-10-29 13:51:26,716 - INFO     -   - ts2_id: 3
2025-10-29 13:51:26,716 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:26,717 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:26,717 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:51:26,717 - INFO     -   - Product space size: 4
2025-10-29 13:51:26,717 - INFO     -   - Using product state mapping
2025-10-29 13:51:26,717 - INFO     -   - f_before_product length: 4
2025-10-29 13:51:26,717 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:51:26,717 - INFO     -   - avg_f_after:  1.0000 (4 valid states)
2025-10-29 13:51:26,717 - INFO     -   - delta: 0.2500
2025-10-29 13:51:26,717 - INFO     -   - f_stability: 1.0 - |0.2500| / 0.7500 = 0.6667
2025-10-29 13:51:26,717 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:26,717 - INFO     -   - Compared 4 values
2025-10-29 13:51:26,717 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:26,718 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:26,718 - INFO     -   - states_before: 4
2025-10-29 13:51:26,718 - INFO     -   - states_after: 4
2025-10-29 13:51:26,718 - INFO     -   - delta_states: 0
2025-10-29 13:51:26,718 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:26,718 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:26,718 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:26,718 - INFO     -   - merged_transitions: 20
2025-10-29 13:51:26,718 - INFO     -   - transition_density_change: 2.5000
2025-10-29 13:51:26,718 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:26,718 - INFO     -   - search_signals present: True
2025-10-29 13:51:26,718 - INFO     -   - nodes_expanded: 4
2025-10-29 13:51:26,718 - INFO     -   - search_depth: 0
2025-10-29 13:51:26,718 - INFO     -   - solution_cost: 0
2025-10-29 13:51:26,718 - INFO     -   - branching_factor: 5.0000
2025-10-29 13:51:26,718 - INFO     -   - solution_found: True
2025-10-29 13:51:26,719 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:26,719 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:26,719 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:51:26,719 - INFO     -   - TS0(2) + TS3(2) → 4 states
2025-10-29 13:51:26,719 - INFO     -   - f_stability=0.667
2025-10-29 13:51:26,719 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:51:26,719 - INFO     -   - solution_found=True
2025-10-29 13:51:26,719 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:26,719 - INFO     - 
  Extracted signals:
2025-10-29 13:51:26,719 - INFO     -     - iteration: 2
2025-10-29 13:51:26,720 - INFO     -     - states_before: 4
2025-10-29 13:51:26,720 - INFO     -     - states_after: 4
2025-10-29 13:51:26,720 - INFO     -     - delta_states: 0
2025-10-29 13:51:26,720 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:51:26,720 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:26,720 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:26,720 - INFO     -     - nodes_expanded: 4
2025-10-29 13:51:26,720 - INFO     -     - search_depth: 0
2025-10-29 13:51:26,720 - INFO     -     - solution_cost: 0
2025-10-29 13:51:26,720 - INFO     -     - branching_factor: 5.0000
2025-10-29 13:51:26,720 - INFO     -     - solution_found: True
2025-10-29 13:51:26,720 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:26,720 - INFO     - 
  Computing reward:
2025-10-29 13:51:26,720 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:26,721 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:26,721 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:26,721 - INFO     -   [1] BRANCHING FACTOR: 5.000 → score 0.433 (tolerable)
2025-10-29 13:51:26,721 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:51:26,721 - INFO     -   [3] F-VALUE STABILITY: 0.176
2025-10-29 13:51:26,721 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:26,721 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:26,722 - INFO     - 
  [COMPOSITE]: 0.412
2025-10-29 13:51:26,722 - INFO     -     = 0.300*0.433 (bf)
2025-10-29 13:51:26,722 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:51:26,722 - INFO     -     + 0.350*0.176 (stability)
2025-10-29 13:51:26,722 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:26,722 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:26,722 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:26,722 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:26,722 - INFO     - 
  [FINAL REWARD]: 0.0230
2025-10-29 13:51:26,722 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:26,722 - INFO     -     ✓ Reward computed: 0.0230
2025-10-29 13:51:26,722 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:26,722 - INFO     -     - bf_score                       0.4333
2025-10-29 13:51:26,723 - INFO     -     - depth_score                    0.5000
2025-10-29 13:51:26,723 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:26,723 - INFO     -     - f_stability                    0.1757
2025-10-29 13:51:26,723 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:26,723 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:26,723 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:26,723 - INFO     -     - composite                      0.4115
2025-10-29 13:51:26,723 - INFO     -     - total                          0.0230
2025-10-29 13:51:26,723 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:26,723 - INFO     -   Num remaining nodes: 6
2025-10-29 13:51:26,723 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:51:26,723 - INFO     -   Done: False
2025-10-29 13:51:26,723 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:26,725 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:26,725 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:26,725 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:26,725 - INFO     -     - num_nodes: 6
2025-10-29 13:51:26,725 - INFO     -     - num_edges: 28
2025-10-29 13:51:26,725 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:26,725 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:51:26,725 - INFO     -   After: current_merge_step = 3
2025-10-29 13:51:26,725 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:26,725 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:26,725 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:26,726 - INFO     -   ✓ Step logged
2025-10-29 13:51:26,727 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:26,727 - INFO     -   Returning:
2025-10-29 13:51:26,727 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:26,727 - INFO     -     - reward: 0.0230
2025-10-29 13:51:26,727 - INFO     -     - done: False
2025-10-29 13:51:26,727 - INFO     -     - truncated: False
2025-10-29 13:51:26,727 - INFO     -     - info: 19 keys
2025-10-29 13:51:26,727 - INFO     - ==========================================================================================

2025-10-29 13:51:26,733 - INFO     - 
==========================================================================================
2025-10-29 13:51:26,733 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:26,733 - INFO     - ==========================================================================================
2025-10-29 13:51:26,734 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:26,734 - INFO     -   Input action: 8 (type: int)
2025-10-29 13:51:26,734 - INFO     -   Available edges in graph: 28
2025-10-29 13:51:26,734 - INFO     -   Action index calculation:
2025-10-29 13:51:26,734 - INFO     -     - action % max(num_valid_edges, 1) = 8 % 28 = 8
2025-10-29 13:51:26,734 - INFO     -     - clamped to [0, 27]: 8
2025-10-29 13:51:26,734 - INFO     -   ✓ Extracted merge pair from edge 8: (5, 11)
2025-10-29 13:51:26,734 - INFO     -   ✓ Validation passed
2025-10-29 13:51:26,734 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:26,734 - INFO     -     - Total states before merge: 36
2025-10-29 13:51:26,734 - INFO     -     - Num nodes: 6
2025-10-29 13:51:26,735 - INFO     -     - Num edges: 28
2025-10-29 13:51:26,735 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:26,735 - INFO     -       - Node 5: 5 states
2025-10-29 13:51:26,735 - INFO     -       - Node 11: 4 states
2025-10-29 13:51:26,735 - INFO     -       - Expected product: 20 states
2025-10-29 13:51:26,735 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:26,741 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:51:26,741 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:26,741 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:51:26,842 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:26,842 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:26,842 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:51:26,843 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:26,843 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:26,843 - INFO     -   Calling graph_tracker.merge_nodes([5, 11])...
2025-10-29 13:51:26,843 - INFO     - Attempting merge of nodes 5 and 11...
2025-10-29 13:51:26,843 - INFO     - Successfully merged nodes into new node 12 with 20 states.
2025-10-29 13:51:26,843 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:26,843 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:26,843 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:51:26,843 - INFO     - 
================================================================================
2025-10-29 13:51:26,843 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:51:26,843 - INFO     - ================================================================================
2025-10-29 13:51:26,843 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:26,843 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:51:26,844 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:51:26,844 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:26,844 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:26,844 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:26,844 - INFO     -   - Raw ts2_f length: 4
2025-10-29 13:51:26,844 - INFO     -   - Raw f_after length: 20
2025-10-29 13:51:26,844 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:26,844 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:26,844 - INFO     -   - ts2_valid: 4 / 4 (removed -4)
2025-10-29 13:51:26,845 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:51:26,845 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:26,845 - INFO     -   - ts1_id: 5
2025-10-29 13:51:26,845 - INFO     -   - ts2_id: 11
2025-10-29 13:51:26,845 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:26,845 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:26,845 - INFO     -   - ts1_size: 5, ts2_size: 4
2025-10-29 13:51:26,845 - INFO     -   - Product space size: 20
2025-10-29 13:51:26,845 - INFO     -   - Using product state mapping
2025-10-29 13:51:26,845 - INFO     -   - f_before_product length: 20
2025-10-29 13:51:26,846 - INFO     -   - avg_f_before: 2.8000 (20 valid states)
2025-10-29 13:51:26,846 - INFO     -   - avg_f_after:  4.0000 (20 valid states)
2025-10-29 13:51:26,846 - INFO     -   - delta: 1.2000
2025-10-29 13:51:26,846 - INFO     -   - f_stability: 1.0 - |1.2000| / 2.8000 = 0.5714
2025-10-29 13:51:26,846 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:26,846 - INFO     -   - Compared 9 values
2025-10-29 13:51:26,846 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:26,846 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:26,847 - INFO     -   - states_before: 20
2025-10-29 13:51:26,847 - INFO     -   - states_after: 20
2025-10-29 13:51:26,847 - INFO     -   - delta_states: 0
2025-10-29 13:51:26,847 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:26,847 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:26,847 - INFO     -   - ts2_transitions: 20
2025-10-29 13:51:26,847 - INFO     -   - merged_transitions: 122
2025-10-29 13:51:26,847 - INFO     -   - transition_density_change: 4.4500
2025-10-29 13:51:26,847 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:26,847 - INFO     -   - search_signals present: True
2025-10-29 13:51:26,847 - INFO     -   - nodes_expanded: 20
2025-10-29 13:51:26,847 - INFO     -   - search_depth: 2
2025-10-29 13:51:26,847 - INFO     -   - solution_cost: 2
2025-10-29 13:51:26,847 - INFO     -   - branching_factor: 6.1000
2025-10-29 13:51:26,847 - INFO     -   - solution_found: True
2025-10-29 13:51:26,847 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:26,849 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:26,849 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:51:26,849 - INFO     -   - TS5(5) + TS11(4) → 20 states
2025-10-29 13:51:26,849 - INFO     -   - f_stability=0.571
2025-10-29 13:51:26,849 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:51:26,849 - INFO     -   - solution_found=True
2025-10-29 13:51:26,849 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:26,849 - INFO     - 
  Extracted signals:
2025-10-29 13:51:26,849 - INFO     -     - iteration: 3
2025-10-29 13:51:26,849 - INFO     -     - states_before: 20
2025-10-29 13:51:26,849 - INFO     -     - states_after: 20
2025-10-29 13:51:26,849 - INFO     -     - delta_states: 0
2025-10-29 13:51:26,849 - INFO     -     - f_value_stability: 0.5714
2025-10-29 13:51:26,849 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:26,849 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:26,849 - INFO     -     - nodes_expanded: 20
2025-10-29 13:51:26,849 - INFO     -     - search_depth: 2
2025-10-29 13:51:26,850 - INFO     -     - solution_cost: 2
2025-10-29 13:51:26,850 - INFO     -     - branching_factor: 6.1000
2025-10-29 13:51:26,850 - INFO     -     - solution_found: True
2025-10-29 13:51:26,850 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:26,850 - INFO     - 
  Computing reward:
2025-10-29 13:51:26,850 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:26,850 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:26,850 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:26,850 - INFO     -   [1] BRANCHING FACTOR: 6.100 → score 0.290 (high BF, minimal credit)
2025-10-29 13:51:26,850 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:26,850 - INFO     -   [3] F-VALUE STABILITY: 0.251
2025-10-29 13:51:26,850 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:26,851 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:26,851 - INFO     - 
  [COMPOSITE]: 0.467
2025-10-29 13:51:26,851 - INFO     -     = 0.300*0.290 (bf)
2025-10-29 13:51:26,851 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:26,851 - INFO     -     + 0.350*0.251 (stability)
2025-10-29 13:51:26,851 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:26,851 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:26,851 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:26,851 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:26,851 - INFO     - 
  [FINAL REWARD]: 0.1341
2025-10-29 13:51:26,851 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:26,851 - INFO     -     ✓ Reward computed: 0.1341
2025-10-29 13:51:26,851 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:26,852 - INFO     -     - bf_score                       0.2900
2025-10-29 13:51:26,852 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:26,852 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:26,852 - INFO     -     - f_stability                    0.2514
2025-10-29 13:51:26,852 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:26,852 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:26,852 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:26,852 - INFO     -     - composite                      0.4671
2025-10-29 13:51:26,852 - INFO     -     - total                          0.1341
2025-10-29 13:51:26,852 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:26,852 - INFO     -   Num remaining nodes: 5
2025-10-29 13:51:26,852 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:51:26,852 - INFO     -   Done: False
2025-10-29 13:51:26,853 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:26,854 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:26,854 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:26,854 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:26,854 - INFO     -     - num_nodes: 5
2025-10-29 13:51:26,854 - INFO     -     - num_edges: 20
2025-10-29 13:51:26,854 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:26,854 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:51:26,854 - INFO     -   After: current_merge_step = 4
2025-10-29 13:51:26,854 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:26,855 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:26,855 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:26,855 - INFO     -   ✓ Step logged
2025-10-29 13:51:26,855 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:26,855 - INFO     -   Returning:
2025-10-29 13:51:26,855 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:26,855 - INFO     -     - reward: 0.1341
2025-10-29 13:51:26,856 - INFO     -     - done: False
2025-10-29 13:51:26,856 - INFO     -     - truncated: False
2025-10-29 13:51:26,856 - INFO     -     - info: 19 keys
2025-10-29 13:51:26,856 - INFO     - ==========================================================================================

2025-10-29 13:51:26,860 - INFO     - 
==========================================================================================
2025-10-29 13:51:26,860 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:26,860 - INFO     - ==========================================================================================
2025-10-29 13:51:26,860 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:26,860 - INFO     -   Input action: 5 (type: int)
2025-10-29 13:51:26,861 - INFO     -   Available edges in graph: 20
2025-10-29 13:51:26,861 - INFO     -   Action index calculation:
2025-10-29 13:51:26,861 - INFO     -     - action % max(num_valid_edges, 1) = 5 % 20 = 5
2025-10-29 13:51:26,861 - INFO     -     - clamped to [0, 19]: 5
2025-10-29 13:51:26,861 - INFO     -   ✓ Extracted merge pair from edge 5: (6, 9)
2025-10-29 13:51:26,861 - INFO     -   ✓ Validation passed
2025-10-29 13:51:26,861 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:26,861 - INFO     -     - Total states before merge: 47
2025-10-29 13:51:26,861 - INFO     -     - Num nodes: 5
2025-10-29 13:51:26,861 - INFO     -     - Num edges: 20
2025-10-29 13:51:26,861 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:26,861 - INFO     -       - Node 6: 5 states
2025-10-29 13:51:26,861 - INFO     -       - Node 9: 10 states
2025-10-29 13:51:26,861 - INFO     -       - Expected product: 50 states
2025-10-29 13:51:26,861 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:26,868 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:51:26,868 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:26,868 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:51:26,969 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:26,970 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:26,970 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:51:26,971 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:26,971 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:26,971 - INFO     -   Calling graph_tracker.merge_nodes([6, 9])...
2025-10-29 13:51:26,971 - INFO     - Attempting merge of nodes 6 and 9...
2025-10-29 13:51:26,971 - INFO     - Successfully merged nodes into new node 13 with 50 states.
2025-10-29 13:51:26,971 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:26,971 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:26,971 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:51:26,972 - INFO     - 
================================================================================
2025-10-29 13:51:26,972 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:51:26,972 - INFO     - ================================================================================
2025-10-29 13:51:26,972 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:26,972 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:51:26,972 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:51:26,972 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:26,973 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:26,973 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:51:26,973 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:51:26,973 - INFO     -   - Raw f_after length: 50
2025-10-29 13:51:26,973 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:26,973 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:51:26,973 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:51:26,973 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:51:26,973 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:26,973 - INFO     -   - ts1_id: 6
2025-10-29 13:51:26,973 - INFO     -   - ts2_id: 9
2025-10-29 13:51:26,974 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:26,974 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:26,974 - INFO     -   - ts1_size: 5, ts2_size: 10
2025-10-29 13:51:26,974 - INFO     -   - Product space size: 50
2025-10-29 13:51:26,974 - INFO     -   - Using product state mapping
2025-10-29 13:51:26,974 - INFO     -   - f_before_product length: 50
2025-10-29 13:51:26,974 - INFO     -   - avg_f_before: 3.8400 (50 valid states)
2025-10-29 13:51:26,974 - INFO     -   - avg_f_after:  6.3800 (50 valid states)
2025-10-29 13:51:26,974 - INFO     -   - delta: 2.5400
2025-10-29 13:51:26,975 - INFO     -   - f_stability: 1.0 - |2.5400| / 3.8400 = 0.3385
2025-10-29 13:51:26,975 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:26,975 - INFO     -   - Compared 15 values
2025-10-29 13:51:26,975 - INFO     -   - Significant changes (> 5.0): 4
2025-10-29 13:51:26,975 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:26,975 - INFO     -   - states_before: 50
2025-10-29 13:51:26,975 - INFO     -   - states_after: 50
2025-10-29 13:51:26,975 - INFO     -   - delta_states: 0
2025-10-29 13:51:26,975 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:26,975 - INFO     -   - ts1_transitions: 13
2025-10-29 13:51:26,976 - INFO     -   - ts2_transitions: 40
2025-10-29 13:51:26,976 - INFO     -   - merged_transitions: 260
2025-10-29 13:51:26,976 - INFO     -   - transition_density_change: 4.1400
2025-10-29 13:51:26,976 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:26,976 - INFO     -   - search_signals present: True
2025-10-29 13:51:26,976 - INFO     -   - nodes_expanded: 50
2025-10-29 13:51:26,976 - INFO     -   - search_depth: 3
2025-10-29 13:51:26,976 - INFO     -   - solution_cost: 2
2025-10-29 13:51:26,976 - INFO     -   - branching_factor: 5.2000
2025-10-29 13:51:26,976 - INFO     -   - solution_found: True
2025-10-29 13:51:26,977 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:26,977 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:26,977 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:51:26,977 - INFO     -   - TS6(5) + TS9(10) → 50 states
2025-10-29 13:51:26,977 - INFO     -   - f_stability=0.339
2025-10-29 13:51:26,977 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:51:26,978 - INFO     -   - solution_found=True
2025-10-29 13:51:26,978 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:26,978 - INFO     - 
  Extracted signals:
2025-10-29 13:51:26,978 - INFO     -     - iteration: 4
2025-10-29 13:51:26,978 - INFO     -     - states_before: 50
2025-10-29 13:51:26,978 - INFO     -     - states_after: 50
2025-10-29 13:51:26,978 - INFO     -     - delta_states: 0
2025-10-29 13:51:26,978 - INFO     -     - f_value_stability: 0.3385
2025-10-29 13:51:26,978 - INFO     -     - num_significant_f_changes: 4
2025-10-29 13:51:26,978 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:26,978 - INFO     -     - nodes_expanded: 50
2025-10-29 13:51:26,978 - INFO     -     - search_depth: 3
2025-10-29 13:51:26,978 - INFO     -     - solution_cost: 2
2025-10-29 13:51:26,978 - INFO     -     - branching_factor: 5.2000
2025-10-29 13:51:26,979 - INFO     -     - solution_found: True
2025-10-29 13:51:26,979 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:26,979 - INFO     - 
  Computing reward:
2025-10-29 13:51:26,979 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:26,979 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:26,979 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:26,979 - INFO     -   [1] BRANCHING FACTOR: 5.200 → score 0.407 (tolerable)
2025-10-29 13:51:26,979 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:51:26,980 - INFO     -   [3] F-VALUE STABILITY: 0.105
2025-10-29 13:51:26,980 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:26,980 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:26,980 - INFO     - 
  [COMPOSITE]: 0.443
2025-10-29 13:51:26,980 - INFO     -     = 0.300*0.407 (bf)
2025-10-29 13:51:26,981 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:51:26,981 - INFO     -     + 0.350*0.105 (stability)
2025-10-29 13:51:26,981 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:26,981 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:26,981 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:26,981 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:26,981 - INFO     - 
  [FINAL REWARD]: 0.0868
2025-10-29 13:51:26,981 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:26,981 - INFO     -     ✓ Reward computed: 0.0868
2025-10-29 13:51:26,981 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:26,981 - INFO     -     - bf_score                       0.4067
2025-10-29 13:51:26,981 - INFO     -     - depth_score                    0.8237
2025-10-29 13:51:26,982 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:26,982 - INFO     -     - f_stability                    0.1047
2025-10-29 13:51:26,982 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:26,982 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:26,982 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:26,982 - INFO     -     - composite                      0.4434
2025-10-29 13:51:26,982 - INFO     -     - total                          0.0868
2025-10-29 13:51:26,982 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:26,982 - INFO     -   Num remaining nodes: 4
2025-10-29 13:51:26,982 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:51:26,982 - INFO     -   Done: False
2025-10-29 13:51:26,982 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:26,983 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:26,983 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:26,983 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:26,983 - INFO     -     - num_nodes: 4
2025-10-29 13:51:26,983 - INFO     -     - num_edges: 12
2025-10-29 13:51:26,983 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:26,984 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:51:26,984 - INFO     -   After: current_merge_step = 5
2025-10-29 13:51:26,984 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:26,984 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:26,984 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:26,985 - INFO     -   ✓ Step logged
2025-10-29 13:51:26,985 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:26,985 - INFO     -   Returning:
2025-10-29 13:51:26,985 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:26,985 - INFO     -     - reward: 0.0868
2025-10-29 13:51:26,985 - INFO     -     - done: False
2025-10-29 13:51:26,985 - INFO     -     - truncated: False
2025-10-29 13:51:26,985 - INFO     -     - info: 19 keys
2025-10-29 13:51:26,985 - INFO     - ==========================================================================================

2025-10-29 13:51:26,989 - INFO     - 
==========================================================================================
2025-10-29 13:51:26,989 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:26,989 - INFO     - ==========================================================================================
2025-10-29 13:51:26,990 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:26,990 - INFO     -   Input action: 9 (type: int)
2025-10-29 13:51:26,990 - INFO     -   Available edges in graph: 12
2025-10-29 13:51:26,990 - INFO     -   Action index calculation:
2025-10-29 13:51:26,990 - INFO     -     - action % max(num_valid_edges, 1) = 9 % 12 = 9
2025-10-29 13:51:26,990 - INFO     -     - clamped to [0, 11]: 9
2025-10-29 13:51:26,990 - INFO     -   ✓ Extracted merge pair from edge 9: (13, 2)
2025-10-29 13:51:26,990 - INFO     -   ✓ Validation passed
2025-10-29 13:51:26,990 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:26,990 - INFO     -     - Total states before merge: 82
2025-10-29 13:51:26,990 - INFO     -     - Num nodes: 4
2025-10-29 13:51:26,991 - INFO     -     - Num edges: 12
2025-10-29 13:51:26,991 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:26,991 - INFO     -       - Node 13: 50 states
2025-10-29 13:51:26,991 - INFO     -       - Node 2: 2 states
2025-10-29 13:51:26,991 - INFO     -       - Expected product: 100 states
2025-10-29 13:51:26,991 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:26,997 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:51:26,998 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:26,998 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:51:27,099 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:27,099 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:27,099 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:51:27,101 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:27,101 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:27,101 - INFO     -   Calling graph_tracker.merge_nodes([13, 2])...
2025-10-29 13:51:27,101 - INFO     - Attempting merge of nodes 13 and 2...
2025-10-29 13:51:27,101 - INFO     - Successfully merged nodes into new node 14 with 100 states.
2025-10-29 13:51:27,101 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:27,101 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:27,101 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:51:27,101 - INFO     - 
================================================================================
2025-10-29 13:51:27,101 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:51:27,101 - INFO     - ================================================================================
2025-10-29 13:51:27,101 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:27,102 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:51:27,102 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:51:27,102 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:27,102 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:27,102 - INFO     -   - Raw ts1_f length: 50
2025-10-29 13:51:27,102 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:27,102 - INFO     -   - Raw f_after length: 100
2025-10-29 13:51:27,102 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:27,103 - INFO     -   - ts1_valid: 50 / 50 (removed 0)
2025-10-29 13:51:27,103 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:27,103 - INFO     -   - after_valid: 100 / 100 (removed 0)
2025-10-29 13:51:27,103 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:27,103 - INFO     -   - ts1_id: 13
2025-10-29 13:51:27,103 - INFO     -   - ts2_id: 2
2025-10-29 13:51:27,103 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:27,103 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:27,103 - INFO     -   - ts1_size: 50, ts2_size: 2
2025-10-29 13:51:27,103 - INFO     -   - Product space size: 100
2025-10-29 13:51:27,103 - INFO     -   - Using product state mapping
2025-10-29 13:51:27,104 - INFO     -   - f_before_product length: 100
2025-10-29 13:51:27,104 - INFO     -   - avg_f_before: 6.3800 (100 valid states)
2025-10-29 13:51:27,104 - INFO     -   - avg_f_after:  7.1900 (100 valid states)
2025-10-29 13:51:27,104 - INFO     -   - delta: 0.8100
2025-10-29 13:51:27,104 - INFO     -   - f_stability: 1.0 - |0.8100| / 6.3800 = 0.8730
2025-10-29 13:51:27,104 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:27,105 - INFO     -   - Compared 52 values
2025-10-29 13:51:27,105 - INFO     -   - Significant changes (> 5.0): 9
2025-10-29 13:51:27,105 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:27,105 - INFO     -   - states_before: 100
2025-10-29 13:51:27,105 - INFO     -   - states_after: 100
2025-10-29 13:51:27,105 - INFO     -   - delta_states: 0
2025-10-29 13:51:27,105 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:27,105 - INFO     -   - ts1_transitions: 260
2025-10-29 13:51:27,105 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:27,105 - INFO     -   - merged_transitions: 620
2025-10-29 13:51:27,105 - INFO     -   - transition_density_change: 3.5500
2025-10-29 13:51:27,105 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:27,106 - INFO     -   - search_signals present: True
2025-10-29 13:51:27,106 - INFO     -   - nodes_expanded: 100
2025-10-29 13:51:27,106 - INFO     -   - search_depth: 3
2025-10-29 13:51:27,106 - INFO     -   - solution_cost: 2
2025-10-29 13:51:27,106 - INFO     -   - branching_factor: 6.2000
2025-10-29 13:51:27,106 - INFO     -   - solution_found: True
2025-10-29 13:51:27,106 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:27,106 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:27,106 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:51:27,107 - INFO     -   - TS13(50) + TS2(2) → 100 states
2025-10-29 13:51:27,107 - INFO     -   - f_stability=0.873
2025-10-29 13:51:27,107 - INFO     -   - A* nodes_expanded=100
2025-10-29 13:51:27,107 - INFO     -   - solution_found=True
2025-10-29 13:51:27,107 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:27,107 - INFO     - 
  Extracted signals:
2025-10-29 13:51:27,107 - INFO     -     - iteration: 5
2025-10-29 13:51:27,107 - INFO     -     - states_before: 100
2025-10-29 13:51:27,107 - INFO     -     - states_after: 100
2025-10-29 13:51:27,107 - INFO     -     - delta_states: 0
2025-10-29 13:51:27,107 - INFO     -     - f_value_stability: 0.8730
2025-10-29 13:51:27,107 - INFO     -     - num_significant_f_changes: 9
2025-10-29 13:51:27,107 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:27,108 - INFO     -     - nodes_expanded: 100
2025-10-29 13:51:27,108 - INFO     -     - search_depth: 3
2025-10-29 13:51:27,108 - INFO     -     - solution_cost: 2
2025-10-29 13:51:27,108 - INFO     -     - branching_factor: 6.2000
2025-10-29 13:51:27,108 - INFO     -     - solution_found: True
2025-10-29 13:51:27,108 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:27,108 - INFO     - 
  Computing reward:
2025-10-29 13:51:27,108 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:27,108 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:27,108 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:27,108 - INFO     -   [1] BRANCHING FACTOR: 6.200 → score 0.280 (high BF, minimal credit)
2025-10-29 13:51:27,108 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:51:27,109 - INFO     -   [3] F-VALUE STABILITY: 0.822
2025-10-29 13:51:27,109 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:51:27,109 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:27,109 - INFO     - 
  [COMPOSITE]: 0.656
2025-10-29 13:51:27,109 - INFO     -     = 0.300*0.280 (bf)
2025-10-29 13:51:27,109 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:51:27,109 - INFO     -     + 0.350*0.822 (stability)
2025-10-29 13:51:27,109 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:27,109 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:27,110 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:27,110 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:51:27,110 - INFO     - 
  [FINAL REWARD]: 0.8126
2025-10-29 13:51:27,110 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:27,110 - INFO     -     ✓ Reward computed: 0.8126
2025-10-29 13:51:27,110 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:27,110 - INFO     -     - bf_score                       0.2800
2025-10-29 13:51:27,110 - INFO     -     - depth_score                    0.8237
2025-10-29 13:51:27,110 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:27,110 - INFO     -     - f_stability                    0.8216
2025-10-29 13:51:27,110 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:51:27,110 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:27,111 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:27,111 - INFO     -     - composite                      0.6563
2025-10-29 13:51:27,111 - INFO     -     - total                          0.8126
2025-10-29 13:51:27,111 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:27,111 - INFO     -   Num remaining nodes: 3
2025-10-29 13:51:27,111 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:51:27,111 - INFO     -   Done: False
2025-10-29 13:51:27,111 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:27,112 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:27,112 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:27,112 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:27,112 - INFO     -     - num_nodes: 3
2025-10-29 13:51:27,112 - INFO     -     - num_edges: 6
2025-10-29 13:51:27,112 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:27,113 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:51:27,113 - INFO     -   After: current_merge_step = 6
2025-10-29 13:51:27,113 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:27,113 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:27,113 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:27,115 - INFO     -   ✓ Step logged
2025-10-29 13:51:27,115 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:27,115 - INFO     -   Returning:
2025-10-29 13:51:27,115 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:27,115 - INFO     -     - reward: 0.8126
2025-10-29 13:51:27,115 - INFO     -     - done: False
2025-10-29 13:51:27,115 - INFO     -     - truncated: False
2025-10-29 13:51:27,115 - INFO     -     - info: 19 keys
2025-10-29 13:51:27,115 - INFO     - ==========================================================================================

2025-10-29 13:51:27,120 - INFO     - 
==========================================================================================
2025-10-29 13:51:27,120 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:27,120 - INFO     - ==========================================================================================
2025-10-29 13:51:27,120 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:27,120 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:51:27,120 - INFO     -   Available edges in graph: 6
2025-10-29 13:51:27,120 - INFO     -   Action index calculation:
2025-10-29 13:51:27,120 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 6 = 0
2025-10-29 13:51:27,120 - INFO     -     - clamped to [0, 5]: 0
2025-10-29 13:51:27,121 - INFO     -   ✓ Extracted merge pair from edge 0: (10, 12)
2025-10-29 13:51:27,121 - INFO     -   ✓ Validation passed
2025-10-29 13:51:27,121 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:27,121 - INFO     -     - Total states before merge: 130
2025-10-29 13:51:27,121 - INFO     -     - Num nodes: 3
2025-10-29 13:51:27,121 - INFO     -     - Num edges: 6
2025-10-29 13:51:27,121 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:27,121 - INFO     -       - Node 10: 10 states
2025-10-29 13:51:27,121 - INFO     -       - Node 12: 20 states
2025-10-29 13:51:27,121 - INFO     -       - Expected product: 200 states
2025-10-29 13:51:27,121 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:27,127 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:51:27,127 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:27,127 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:51:27,228 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:27,228 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:27,228 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:51:27,230 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:27,230 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:27,230 - INFO     -   Calling graph_tracker.merge_nodes([10, 12])...
2025-10-29 13:51:27,230 - INFO     - Attempting merge of nodes 10 and 12...
2025-10-29 13:51:27,230 - INFO     - Successfully merged nodes into new node 15 with 200 states.
2025-10-29 13:51:27,230 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:27,231 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:27,231 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:51:27,231 - INFO     - 
================================================================================
2025-10-29 13:51:27,231 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:51:27,231 - INFO     - ================================================================================
2025-10-29 13:51:27,231 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:27,231 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:51:27,231 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:51:27,232 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:27,232 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:27,232 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:51:27,232 - INFO     -   - Raw ts2_f length: 20
2025-10-29 13:51:27,232 - INFO     -   - Raw f_after length: 200
2025-10-29 13:51:27,232 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:27,232 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:51:27,232 - INFO     -   - ts2_valid: 20 / 20 (removed -20)
2025-10-29 13:51:27,232 - INFO     -   - after_valid: 200 / 200 (removed 0)
2025-10-29 13:51:27,232 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:27,234 - INFO     -   - ts1_id: 10
2025-10-29 13:51:27,234 - INFO     -   - ts2_id: 12
2025-10-29 13:51:27,234 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:27,234 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:27,234 - INFO     -   - ts1_size: 10, ts2_size: 20
2025-10-29 13:51:27,234 - INFO     -   - Product space size: 200
2025-10-29 13:51:27,234 - INFO     -   - Using product state mapping
2025-10-29 13:51:27,235 - INFO     -   - f_before_product length: 200
2025-10-29 13:51:27,236 - INFO     -   - avg_f_before: 4.8100 (200 valid states)
2025-10-29 13:51:27,236 - INFO     -   - avg_f_after:  8.6200 (200 valid states)
2025-10-29 13:51:27,236 - INFO     -   - delta: 3.8100
2025-10-29 13:51:27,236 - INFO     -   - f_stability: 1.0 - |3.8100| / 4.8100 = 0.2079
2025-10-29 13:51:27,236 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:27,236 - INFO     -   - Compared 30 values
2025-10-29 13:51:27,236 - INFO     -   - Significant changes (> 5.0): 12
2025-10-29 13:51:27,237 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:27,237 - INFO     -   - states_before: 200
2025-10-29 13:51:27,237 - INFO     -   - states_after: 200
2025-10-29 13:51:27,237 - INFO     -   - delta_states: 0
2025-10-29 13:51:27,237 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:27,237 - INFO     -   - ts1_transitions: 27
2025-10-29 13:51:27,237 - INFO     -   - ts2_transitions: 122
2025-10-29 13:51:27,237 - INFO     -   - merged_transitions: 1060
2025-10-29 13:51:27,237 - INFO     -   - transition_density_change: 4.5550
2025-10-29 13:51:27,237 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:27,237 - INFO     -   - search_signals present: True
2025-10-29 13:51:27,238 - INFO     -   - nodes_expanded: 200
2025-10-29 13:51:27,238 - INFO     -   - search_depth: 4
2025-10-29 13:51:27,238 - INFO     -   - solution_cost: 2
2025-10-29 13:51:27,238 - INFO     -   - branching_factor: 5.3000
2025-10-29 13:51:27,238 - INFO     -   - solution_found: True
2025-10-29 13:51:27,238 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:27,238 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:27,239 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:51:27,239 - INFO     -   - TS10(10) + TS12(20) → 200 states
2025-10-29 13:51:27,239 - INFO     -   - f_stability=0.208
2025-10-29 13:51:27,239 - INFO     -   - A* nodes_expanded=200
2025-10-29 13:51:27,239 - INFO     -   - solution_found=True
2025-10-29 13:51:27,239 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:27,239 - INFO     - 
  Extracted signals:
2025-10-29 13:51:27,239 - INFO     -     - iteration: 6
2025-10-29 13:51:27,239 - INFO     -     - states_before: 200
2025-10-29 13:51:27,239 - INFO     -     - states_after: 200
2025-10-29 13:51:27,239 - INFO     -     - delta_states: 0
2025-10-29 13:51:27,240 - INFO     -     - f_value_stability: 0.2079
2025-10-29 13:51:27,240 - INFO     -     - num_significant_f_changes: 12
2025-10-29 13:51:27,240 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:27,240 - INFO     -     - nodes_expanded: 200
2025-10-29 13:51:27,240 - INFO     -     - search_depth: 4
2025-10-29 13:51:27,240 - INFO     -     - solution_cost: 2
2025-10-29 13:51:27,240 - INFO     -     - branching_factor: 5.3000
2025-10-29 13:51:27,240 - INFO     -     - solution_found: True
2025-10-29 13:51:27,240 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:27,240 - WARNING  -     ⚠️  Poor F-stability: 0.2079
2025-10-29 13:51:27,241 - INFO     - 
  Computing reward:
2025-10-29 13:51:27,241 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:27,241 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:27,241 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:27,241 - INFO     -   [1] BRANCHING FACTOR: 5.300 → score 0.393 (tolerable)
2025-10-29 13:51:27,241 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:51:27,242 - INFO     -   [3] F-VALUE STABILITY: 0.074
2025-10-29 13:51:27,242 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:27,242 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:27,242 - INFO     - 
  [COMPOSITE]: 0.423
2025-10-29 13:51:27,242 - INFO     -     = 0.300*0.393 (bf)
2025-10-29 13:51:27,242 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:51:27,242 - INFO     -     + 0.350*0.074 (stability)
2025-10-29 13:51:27,242 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:27,243 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:27,243 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:27,243 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:27,243 - INFO     - 
  [FINAL REWARD]: 0.0461
2025-10-29 13:51:27,243 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:27,243 - INFO     -     ✓ Reward computed: 0.0461
2025-10-29 13:51:27,243 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:27,243 - INFO     -     - bf_score                       0.3933
2025-10-29 13:51:27,243 - INFO     -     - depth_score                    0.7953
2025-10-29 13:51:27,243 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:27,243 - INFO     -     - f_stability                    0.0742
2025-10-29 13:51:27,244 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:27,244 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:27,244 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:27,244 - INFO     -     - composite                      0.4230
2025-10-29 13:51:27,244 - INFO     -     - total                          0.0461
2025-10-29 13:51:27,244 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:27,244 - INFO     -   Num remaining nodes: 2
2025-10-29 13:51:27,244 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:51:27,245 - INFO     -   Done: False
2025-10-29 13:51:27,245 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:27,245 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:27,245 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:27,245 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:27,245 - INFO     -     - num_nodes: 2
2025-10-29 13:51:27,245 - INFO     -     - num_edges: 2
2025-10-29 13:51:27,246 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:27,246 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:51:27,246 - INFO     -   After: current_merge_step = 7
2025-10-29 13:51:27,246 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:27,246 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:27,246 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:27,246 - INFO     -   ✓ Step logged
2025-10-29 13:51:27,247 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:27,247 - INFO     -   Returning:
2025-10-29 13:51:27,247 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:27,247 - INFO     -     - reward: 0.0461
2025-10-29 13:51:27,247 - INFO     -     - done: False
2025-10-29 13:51:27,247 - INFO     -     - truncated: False
2025-10-29 13:51:27,247 - INFO     -     - info: 19 keys
2025-10-29 13:51:27,247 - INFO     - ==========================================================================================

2025-10-29 13:51:27,252 - INFO     - 
==========================================================================================
2025-10-29 13:51:27,252 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:27,252 - INFO     - ==========================================================================================
2025-10-29 13:51:27,252 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:27,252 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:51:27,252 - INFO     -   Available edges in graph: 2
2025-10-29 13:51:27,252 - INFO     -   Action index calculation:
2025-10-29 13:51:27,252 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 2 = 1
2025-10-29 13:51:27,252 - INFO     -     - clamped to [0, 1]: 1
2025-10-29 13:51:27,252 - INFO     -   ✓ Extracted merge pair from edge 1: (15, 14)
2025-10-29 13:51:27,252 - INFO     -   ✓ Validation passed
2025-10-29 13:51:27,252 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:27,253 - INFO     -     - Total states before merge: 300
2025-10-29 13:51:27,253 - INFO     -     - Num nodes: 2
2025-10-29 13:51:27,253 - INFO     -     - Num edges: 2
2025-10-29 13:51:27,253 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:27,253 - INFO     -       - Node 15: 200 states
2025-10-29 13:51:27,253 - INFO     -       - Node 14: 100 states
2025-10-29 13:51:27,253 - INFO     -       - Expected product: 20000 states
2025-10-29 13:51:27,253 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:27,259 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:51:27,259 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:27,259 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:51:57,263 - ERROR    - 
❌ STEP FAILED: FD did not acknowledge merge within 30.0s (waited 30.0s)
2025-10-29 13:51:57,282 - ERROR    - Traceback:
Traceback (most recent call last):
  File "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\merge_env.py", line 929, in _step_real
    raise TimeoutError(
TimeoutError: FD did not acknowledge merge within 30.0s (waited 30.0s)

2025-10-29 13:51:57,282 - INFO     - ==========================================================================================

2025-10-29 13:51:57,356 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:51:57,366 - INFO     - [Handshake] Building FD command:
2025-10-29 13:51:57,366 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:51:57,366 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_01.pddl
2025-10-29 13:51:57,366 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:51:57,369 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:51:58,124 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:51:58,124 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:51:58,124 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:51:58,440 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:51:58,440 - INFO     - Initializing GraphTracker...
2025-10-29 13:51:58,440 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:51:58,440 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:51:58,440 - INFO     -    → Node 0 has 2 states
2025-10-29 13:51:58,440 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:51:58,440 - INFO     -    → Node 1 has 2 states
2025-10-29 13:51:58,440 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:51:58,440 - INFO     -    → Node 2 has 2 states
2025-10-29 13:51:58,444 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:51:58,444 - INFO     -    → Node 3 has 2 states
2025-10-29 13:51:58,444 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:51:58,444 - INFO     -    → Node 4 has 2 states
2025-10-29 13:51:58,444 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:51:58,444 - INFO     -    → Node 5 has 5 states
2025-10-29 13:51:58,444 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:51:58,444 - INFO     -    → Node 6 has 5 states
2025-10-29 13:51:58,444 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:51:58,444 - INFO     -    → Node 7 has 5 states
2025-10-29 13:51:58,444 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:51:58,444 - INFO     -    → Node 8 has 5 states
2025-10-29 13:51:58,445 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:51:58,445 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:51:58,446 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:51:58,446 - INFO     - Added edge (0, 1)
2025-10-29 13:51:58,446 - INFO     - Added edge (0, 2)
2025-10-29 13:51:58,446 - INFO     - Added edge (0, 3)
2025-10-29 13:51:58,446 - INFO     - Added edge (0, 4)
2025-10-29 13:51:58,446 - INFO     - Added edge (0, 5)
2025-10-29 13:51:58,446 - INFO     - Added edge (0, 6)
2025-10-29 13:51:58,446 - INFO     - Added edge (0, 7)
2025-10-29 13:51:58,446 - INFO     - Added edge (0, 8)
2025-10-29 13:51:58,446 - INFO     - Added edge (1, 0)
2025-10-29 13:51:58,446 - INFO     - Added edge (1, 2)
2025-10-29 13:51:58,448 - INFO     - Added edge (1, 3)
2025-10-29 13:51:58,448 - INFO     - Added edge (1, 4)
2025-10-29 13:51:58,448 - INFO     - Added edge (1, 5)
2025-10-29 13:51:58,448 - INFO     - Added edge (1, 6)
2025-10-29 13:51:58,448 - INFO     - Added edge (1, 7)
2025-10-29 13:51:58,448 - INFO     - Added edge (1, 8)
2025-10-29 13:51:58,448 - INFO     - Added edge (2, 0)
2025-10-29 13:51:58,448 - INFO     - Added edge (2, 1)
2025-10-29 13:51:58,448 - INFO     - Added edge (2, 3)
2025-10-29 13:51:58,448 - INFO     - Added edge (2, 4)
2025-10-29 13:51:58,448 - INFO     - Added edge (2, 5)
2025-10-29 13:51:58,448 - INFO     - Added edge (2, 6)
2025-10-29 13:51:58,448 - INFO     - Added edge (2, 7)
2025-10-29 13:51:58,448 - INFO     - Added edge (2, 8)
2025-10-29 13:51:58,448 - INFO     - Added edge (3, 0)
2025-10-29 13:51:58,448 - INFO     - Added edge (3, 1)
2025-10-29 13:51:58,448 - INFO     - Added edge (3, 2)
2025-10-29 13:51:58,448 - INFO     - Added edge (3, 4)
2025-10-29 13:51:58,448 - INFO     - Added edge (3, 5)
2025-10-29 13:51:58,448 - INFO     - Added edge (3, 6)
2025-10-29 13:51:58,448 - INFO     - Added edge (3, 7)
2025-10-29 13:51:58,448 - INFO     - Added edge (3, 8)
2025-10-29 13:51:58,448 - INFO     - Added edge (4, 0)
2025-10-29 13:51:58,448 - INFO     - Added edge (4, 1)
2025-10-29 13:51:58,448 - INFO     - Added edge (4, 2)
2025-10-29 13:51:58,448 - INFO     - Added edge (4, 3)
2025-10-29 13:51:58,448 - INFO     - Added edge (4, 5)
2025-10-29 13:51:58,448 - INFO     - Added edge (4, 6)
2025-10-29 13:51:58,448 - INFO     - Added edge (4, 7)
2025-10-29 13:51:58,448 - INFO     - Added edge (4, 8)
2025-10-29 13:51:58,448 - INFO     - Added edge (5, 0)
2025-10-29 13:51:58,448 - INFO     - Added edge (5, 1)
2025-10-29 13:51:58,448 - INFO     - Added edge (5, 2)
2025-10-29 13:51:58,448 - INFO     - Added edge (5, 3)
2025-10-29 13:51:58,448 - INFO     - Added edge (5, 4)
2025-10-29 13:51:58,448 - INFO     - Added edge (6, 0)
2025-10-29 13:51:58,448 - INFO     - Added edge (6, 1)
2025-10-29 13:51:58,448 - INFO     - Added edge (6, 2)
2025-10-29 13:51:58,448 - INFO     - Added edge (6, 3)
2025-10-29 13:51:58,448 - INFO     - Added edge (6, 4)
2025-10-29 13:51:58,448 - INFO     - Added edge (7, 0)
2025-10-29 13:51:58,448 - INFO     - Added edge (7, 1)
2025-10-29 13:51:58,448 - INFO     - Added edge (7, 2)
2025-10-29 13:51:58,448 - INFO     - Added edge (7, 3)
2025-10-29 13:51:58,448 - INFO     - Added edge (7, 4)
2025-10-29 13:51:58,448 - INFO     - Added edge (8, 0)
2025-10-29 13:51:58,448 - INFO     - Added edge (8, 1)
2025-10-29 13:51:58,452 - INFO     - Added edge (8, 2)
2025-10-29 13:51:58,452 - INFO     - Added edge (8, 3)
2025-10-29 13:51:58,452 - INFO     - Added edge (8, 4)
2025-10-29 13:51:58,452 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:51:58,459 - INFO     - 
==========================================================================================
2025-10-29 13:51:58,459 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:58,459 - INFO     - ==========================================================================================
2025-10-29 13:51:58,460 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:58,460 - INFO     -   Input action: 29 (type: int)
2025-10-29 13:51:58,460 - INFO     -   Available edges in graph: 60
2025-10-29 13:51:58,460 - INFO     -   Action index calculation:
2025-10-29 13:51:58,460 - INFO     -     - action % max(num_valid_edges, 1) = 29 % 60 = 29
2025-10-29 13:51:58,460 - INFO     -     - clamped to [0, 59]: 29
2025-10-29 13:51:58,460 - INFO     -   ✓ Extracted merge pair from edge 29: (3, 6)
2025-10-29 13:51:58,460 - INFO     -   ✓ Validation passed
2025-10-29 13:51:58,460 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:58,460 - INFO     -     - Total states before merge: 30
2025-10-29 13:51:58,460 - INFO     -     - Num nodes: 9
2025-10-29 13:51:58,462 - INFO     -     - Num edges: 60
2025-10-29 13:51:58,462 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:58,462 - INFO     -       - Node 3: 2 states
2025-10-29 13:51:58,462 - INFO     -       - Node 6: 5 states
2025-10-29 13:51:58,462 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:58,462 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:58,490 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:51:58,490 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:58,490 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:51:58,592 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:58,592 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:58,592 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:51:58,592 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:58,594 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:58,594 - INFO     -   Calling graph_tracker.merge_nodes([3, 6])...
2025-10-29 13:51:58,594 - INFO     - Attempting merge of nodes 3 and 6...
2025-10-29 13:51:58,594 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:51:58,594 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:58,594 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:58,594 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:51:58,594 - INFO     - 
================================================================================
2025-10-29 13:51:58,594 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:51:58,594 - INFO     - ================================================================================
2025-10-29 13:51:58,594 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:58,594 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:51:58,594 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:51:58,594 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:58,594 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:58,594 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:58,594 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:51:58,594 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:58,594 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:58,594 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:58,594 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:51:58,594 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:58,594 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:58,594 - INFO     -   - ts1_id: 3
2025-10-29 13:51:58,594 - INFO     -   - ts2_id: 6
2025-10-29 13:51:58,597 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:58,597 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:58,597 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:51:58,597 - INFO     -   - Product space size: 10
2025-10-29 13:51:58,597 - INFO     -   - Using product state mapping
2025-10-29 13:51:58,597 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:58,597 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:51:58,597 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:51:58,597 - INFO     -   - delta: 0.4000
2025-10-29 13:51:58,597 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:51:58,597 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:58,597 - INFO     -   - Compared 7 values
2025-10-29 13:51:58,597 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:58,597 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:58,597 - INFO     -   - states_before: 10
2025-10-29 13:51:58,597 - INFO     -   - states_after: 10
2025-10-29 13:51:58,597 - INFO     -   - delta_states: 0
2025-10-29 13:51:58,597 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:58,597 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:58,597 - INFO     -   - ts2_transitions: 13
2025-10-29 13:51:58,599 - INFO     -   - merged_transitions: 40
2025-10-29 13:51:58,599 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:51:58,599 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:58,599 - INFO     -   - search_signals present: True
2025-10-29 13:51:58,599 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:58,599 - INFO     -   - search_depth: 1
2025-10-29 13:51:58,599 - INFO     -   - solution_cost: 0
2025-10-29 13:51:58,599 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:51:58,599 - INFO     -   - solution_found: True
2025-10-29 13:51:58,599 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:58,599 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:58,599 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:51:58,599 - INFO     -   - TS3(2) + TS6(5) → 10 states
2025-10-29 13:51:58,599 - INFO     -   - f_stability=0.862
2025-10-29 13:51:58,604 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:58,604 - INFO     -   - solution_found=True
2025-10-29 13:51:58,604 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:58,604 - INFO     - 
  Extracted signals:
2025-10-29 13:51:58,604 - INFO     -     - iteration: 0
2025-10-29 13:51:58,604 - INFO     -     - states_before: 10
2025-10-29 13:51:58,604 - INFO     -     - states_after: 10
2025-10-29 13:51:58,604 - INFO     -     - delta_states: 0
2025-10-29 13:51:58,604 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:51:58,604 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:58,604 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:58,604 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:58,604 - INFO     -     - search_depth: 1
2025-10-29 13:51:58,604 - INFO     -     - solution_cost: 0
2025-10-29 13:51:58,604 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:51:58,604 - INFO     -     - solution_found: True
2025-10-29 13:51:58,604 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:58,604 - INFO     - 
  Computing reward:
2025-10-29 13:51:58,604 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:58,604 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:58,604 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:58,604 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:51:58,604 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:51:58,604 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:51:58,604 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:58,604 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:58,604 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:51:58,604 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:51:58,604 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:51:58,604 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:51:58,604 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:58,604 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:58,604 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:58,604 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:58,604 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:51:58,604 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:58,604 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:51:58,604 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:58,604 - INFO     -     - bf_score                       0.5667
2025-10-29 13:51:58,604 - INFO     -     - depth_score                    0.9119
2025-10-29 13:51:58,607 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:58,607 - INFO     -     - f_stability                    0.2913
2025-10-29 13:51:58,607 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:58,607 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:58,607 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:58,607 - INFO     -     - composite                      0.5743
2025-10-29 13:51:58,607 - INFO     -     - total                          0.3487
2025-10-29 13:51:58,607 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:58,607 - INFO     -   Num remaining nodes: 8
2025-10-29 13:51:58,607 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:51:58,607 - INFO     -   Done: False
2025-10-29 13:51:58,607 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:58,609 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:58,609 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:58,609 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:58,609 - INFO     -     - num_nodes: 8
2025-10-29 13:51:58,609 - INFO     -     - num_edges: 50
2025-10-29 13:51:58,609 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:58,619 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:51:58,619 - INFO     -   After: current_merge_step = 1
2025-10-29 13:51:58,619 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:58,619 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:58,619 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:58,620 - INFO     -   ✓ Step logged
2025-10-29 13:51:58,620 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:58,620 - INFO     -   Returning:
2025-10-29 13:51:58,620 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:58,620 - INFO     -     - reward: 0.3487
2025-10-29 13:51:58,620 - INFO     -     - done: False
2025-10-29 13:51:58,620 - INFO     -     - truncated: False
2025-10-29 13:51:58,620 - INFO     -     - info: 19 keys
2025-10-29 13:51:58,620 - INFO     - ==========================================================================================

2025-10-29 13:51:58,625 - INFO     - 
==========================================================================================
2025-10-29 13:51:58,626 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:58,626 - INFO     - ==========================================================================================
2025-10-29 13:51:58,626 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:58,626 - INFO     -   Input action: 13 (type: int)
2025-10-29 13:51:58,626 - INFO     -   Available edges in graph: 50
2025-10-29 13:51:58,626 - INFO     -   Action index calculation:
2025-10-29 13:51:58,626 - INFO     -     - action % max(num_valid_edges, 1) = 13 % 50 = 13
2025-10-29 13:51:58,626 - INFO     -     - clamped to [0, 49]: 13
2025-10-29 13:51:58,626 - INFO     -   ✓ Extracted merge pair from edge 13: (1, 9)
2025-10-29 13:51:58,626 - INFO     -   ✓ Validation passed
2025-10-29 13:51:58,626 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:58,626 - INFO     -     - Total states before merge: 33
2025-10-29 13:51:58,626 - INFO     -     - Num nodes: 8
2025-10-29 13:51:58,626 - INFO     -     - Num edges: 50
2025-10-29 13:51:58,626 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:58,626 - INFO     -       - Node 1: 2 states
2025-10-29 13:51:58,627 - INFO     -       - Node 9: 10 states
2025-10-29 13:51:58,627 - INFO     -       - Expected product: 20 states
2025-10-29 13:51:58,627 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:58,637 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:51:58,637 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:58,637 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:51:58,737 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:58,741 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:58,741 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:51:58,749 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:51:58,749 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:58,749 - INFO     -   Calling graph_tracker.merge_nodes([1, 9])...
2025-10-29 13:51:58,749 - INFO     - Attempting merge of nodes 1 and 9...
2025-10-29 13:51:58,749 - INFO     - Successfully merged nodes into new node 10 with 20 states.
2025-10-29 13:51:58,749 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:58,749 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:58,749 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:51:58,749 - INFO     - 
================================================================================
2025-10-29 13:51:58,749 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:51:58,749 - INFO     - ================================================================================
2025-10-29 13:51:58,749 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:58,749 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:51:58,749 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:51:58,752 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:58,752 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:58,752 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:58,752 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:51:58,752 - INFO     -   - Raw f_after length: 20
2025-10-29 13:51:58,752 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:58,752 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:58,752 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:51:58,752 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:51:58,752 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:58,752 - INFO     -   - ts1_id: 1
2025-10-29 13:51:58,752 - INFO     -   - ts2_id: 9
2025-10-29 13:51:58,752 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:58,752 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:58,752 - INFO     -   - ts1_size: 2, ts2_size: 10
2025-10-29 13:51:58,752 - INFO     -   - Product space size: 20
2025-10-29 13:51:58,752 - INFO     -   - Using product state mapping
2025-10-29 13:51:58,752 - INFO     -   - f_before_product length: 20
2025-10-29 13:51:58,752 - INFO     -   - avg_f_before: 3.3500 (20 valid states)
2025-10-29 13:51:58,752 - INFO     -   - avg_f_after:  4.0000 (20 valid states)
2025-10-29 13:51:58,752 - INFO     -   - delta: 0.6500
2025-10-29 13:51:58,754 - INFO     -   - f_stability: 1.0 - |0.6500| / 3.3500 = 0.8060
2025-10-29 13:51:58,754 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:58,754 - INFO     -   - Compared 12 values
2025-10-29 13:51:58,754 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:58,754 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:58,754 - INFO     -   - states_before: 20
2025-10-29 13:51:58,754 - INFO     -   - states_after: 20
2025-10-29 13:51:58,754 - INFO     -   - delta_states: 0
2025-10-29 13:51:58,754 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:58,754 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:58,754 - INFO     -   - ts2_transitions: 40
2025-10-29 13:51:58,754 - INFO     -   - merged_transitions: 122
2025-10-29 13:51:58,754 - INFO     -   - transition_density_change: 3.8500
2025-10-29 13:51:58,754 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:58,754 - INFO     -   - search_signals present: True
2025-10-29 13:51:58,754 - INFO     -   - nodes_expanded: 20
2025-10-29 13:51:58,754 - INFO     -   - search_depth: 2
2025-10-29 13:51:58,754 - INFO     -   - solution_cost: 0
2025-10-29 13:51:58,754 - INFO     -   - branching_factor: 6.1000
2025-10-29 13:51:58,754 - INFO     -   - solution_found: True
2025-10-29 13:51:58,754 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:58,754 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:58,754 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:51:58,754 - INFO     -   - TS1(2) + TS9(10) → 20 states
2025-10-29 13:51:58,757 - INFO     -   - f_stability=0.806
2025-10-29 13:51:58,757 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:51:58,757 - INFO     -   - solution_found=True
2025-10-29 13:51:58,757 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:58,757 - INFO     - 
  Extracted signals:
2025-10-29 13:51:58,757 - INFO     -     - iteration: 1
2025-10-29 13:51:58,757 - INFO     -     - states_before: 20
2025-10-29 13:51:58,757 - INFO     -     - states_after: 20
2025-10-29 13:51:58,757 - INFO     -     - delta_states: 0
2025-10-29 13:51:58,757 - INFO     -     - f_value_stability: 0.8060
2025-10-29 13:51:58,757 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:58,757 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:58,758 - INFO     -     - nodes_expanded: 20
2025-10-29 13:51:58,758 - INFO     -     - search_depth: 2
2025-10-29 13:51:58,758 - INFO     -     - solution_cost: 0
2025-10-29 13:51:58,758 - INFO     -     - branching_factor: 6.1000
2025-10-29 13:51:58,758 - INFO     -     - solution_found: True
2025-10-29 13:51:58,758 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:58,758 - INFO     - 
  Computing reward:
2025-10-29 13:51:58,758 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:58,758 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:58,758 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:58,758 - INFO     -   [1] BRANCHING FACTOR: 6.100 → score 0.290 (high BF, minimal credit)
2025-10-29 13:51:58,758 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:58,758 - INFO     -   [3] F-VALUE STABILITY: 0.874
2025-10-29 13:51:58,758 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:51:58,758 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:58,758 - INFO     - 
  [COMPOSITE]: 0.685
2025-10-29 13:51:58,758 - INFO     -     = 0.300*0.290 (bf)
2025-10-29 13:51:58,758 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:58,758 - INFO     -     + 0.350*0.874 (stability)
2025-10-29 13:51:58,758 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:58,758 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:58,758 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:58,758 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:51:58,758 - INFO     - 
  [FINAL REWARD]: 0.8699
2025-10-29 13:51:58,758 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:58,758 - INFO     -     ✓ Reward computed: 0.8699
2025-10-29 13:51:58,762 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:58,762 - INFO     -     - bf_score                       0.2900
2025-10-29 13:51:58,762 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:58,762 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:58,762 - INFO     -     - f_stability                    0.8740
2025-10-29 13:51:58,762 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:51:58,762 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:58,762 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:58,762 - INFO     -     - composite                      0.6850
2025-10-29 13:51:58,762 - INFO     -     - total                          0.8699
2025-10-29 13:51:58,762 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:58,762 - INFO     -   Num remaining nodes: 7
2025-10-29 13:51:58,762 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:51:58,762 - INFO     -   Done: False
2025-10-29 13:51:58,762 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:58,764 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:58,764 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:58,764 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:58,764 - INFO     -     - num_nodes: 7
2025-10-29 13:51:58,764 - INFO     -     - num_edges: 36
2025-10-29 13:51:58,764 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:58,764 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:51:58,764 - INFO     -   After: current_merge_step = 2
2025-10-29 13:51:58,764 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:58,764 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:58,764 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:58,766 - INFO     -   ✓ Step logged
2025-10-29 13:51:58,766 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:58,766 - INFO     -   Returning:
2025-10-29 13:51:58,767 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:58,767 - INFO     -     - reward: 0.8699
2025-10-29 13:51:58,767 - INFO     -     - done: False
2025-10-29 13:51:58,767 - INFO     -     - truncated: False
2025-10-29 13:51:58,767 - INFO     -     - info: 19 keys
2025-10-29 13:51:58,767 - INFO     - ==========================================================================================

2025-10-29 13:51:58,774 - INFO     - 
==========================================================================================
2025-10-29 13:51:58,774 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:58,774 - INFO     - ==========================================================================================
2025-10-29 13:51:58,774 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:58,774 - INFO     -   Input action: 8 (type: int)
2025-10-29 13:51:58,774 - INFO     -   Available edges in graph: 36
2025-10-29 13:51:58,774 - INFO     -   Action index calculation:
2025-10-29 13:51:58,774 - INFO     -     - action % max(num_valid_edges, 1) = 8 % 36 = 8
2025-10-29 13:51:58,774 - INFO     -     - clamped to [0, 35]: 8
2025-10-29 13:51:58,774 - INFO     -   ✓ Extracted merge pair from edge 8: (2, 5)
2025-10-29 13:51:58,774 - INFO     -   ✓ Validation passed
2025-10-29 13:51:58,774 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:58,774 - INFO     -     - Total states before merge: 41
2025-10-29 13:51:58,774 - INFO     -     - Num nodes: 7
2025-10-29 13:51:58,774 - INFO     -     - Num edges: 36
2025-10-29 13:51:58,774 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:58,774 - INFO     -       - Node 2: 2 states
2025-10-29 13:51:58,774 - INFO     -       - Node 5: 5 states
2025-10-29 13:51:58,774 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:58,774 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:58,780 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:51:58,780 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:58,780 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:51:58,881 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:58,881 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:58,881 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:51:58,881 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:58,881 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:58,881 - INFO     -   Calling graph_tracker.merge_nodes([2, 5])...
2025-10-29 13:51:58,881 - INFO     - Attempting merge of nodes 2 and 5...
2025-10-29 13:51:58,881 - INFO     - Successfully merged nodes into new node 11 with 10 states.
2025-10-29 13:51:58,881 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:58,881 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:58,881 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:51:58,881 - INFO     - 
================================================================================
2025-10-29 13:51:58,881 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:51:58,883 - INFO     - ================================================================================
2025-10-29 13:51:58,883 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:58,883 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:51:58,883 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:51:58,883 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:58,883 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:58,883 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:58,883 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:51:58,883 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:58,883 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:58,883 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:58,883 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:51:58,883 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:58,883 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:58,883 - INFO     -   - ts1_id: 2
2025-10-29 13:51:58,883 - INFO     -   - ts2_id: 5
2025-10-29 13:51:58,883 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:58,883 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:58,883 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:51:58,883 - INFO     -   - Product space size: 10
2025-10-29 13:51:58,883 - INFO     -   - Using product state mapping
2025-10-29 13:51:58,885 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:58,885 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:51:58,885 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:51:58,885 - INFO     -   - delta: 0.5000
2025-10-29 13:51:58,885 - INFO     -   - f_stability: 1.0 - |0.5000| / 2.8000 = 0.8214
2025-10-29 13:51:58,885 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:58,885 - INFO     -   - Compared 7 values
2025-10-29 13:51:58,885 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:58,885 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:58,885 - INFO     -   - states_before: 10
2025-10-29 13:51:58,885 - INFO     -   - states_after: 10
2025-10-29 13:51:58,885 - INFO     -   - delta_states: 0
2025-10-29 13:51:58,885 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:58,885 - INFO     -   - ts1_transitions: 5
2025-10-29 13:51:58,885 - INFO     -   - ts2_transitions: 13
2025-10-29 13:51:58,885 - INFO     -   - merged_transitions: 40
2025-10-29 13:51:58,885 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:51:58,885 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:58,885 - INFO     -   - search_signals present: True
2025-10-29 13:51:58,885 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:58,885 - INFO     -   - search_depth: 1
2025-10-29 13:51:58,885 - INFO     -   - solution_cost: 2
2025-10-29 13:51:58,887 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:51:58,887 - INFO     -   - solution_found: True
2025-10-29 13:51:58,887 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:58,887 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:58,887 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:51:58,887 - INFO     -   - TS2(2) + TS5(5) → 10 states
2025-10-29 13:51:58,887 - INFO     -   - f_stability=0.821
2025-10-29 13:51:58,887 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:58,887 - INFO     -   - solution_found=True
2025-10-29 13:51:58,887 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:58,887 - INFO     - 
  Extracted signals:
2025-10-29 13:51:58,887 - INFO     -     - iteration: 2
2025-10-29 13:51:58,888 - INFO     -     - states_before: 10
2025-10-29 13:51:58,888 - INFO     -     - states_after: 10
2025-10-29 13:51:58,888 - INFO     -     - delta_states: 0
2025-10-29 13:51:58,888 - INFO     -     - f_value_stability: 0.8214
2025-10-29 13:51:58,888 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:58,888 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:58,888 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:58,888 - INFO     -     - search_depth: 1
2025-10-29 13:51:58,889 - INFO     -     - solution_cost: 2
2025-10-29 13:51:58,889 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:51:58,889 - INFO     -     - solution_found: True
2025-10-29 13:51:58,889 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:58,889 - INFO     - 
  Computing reward:
2025-10-29 13:51:58,889 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:58,889 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:58,889 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:58,889 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:51:58,889 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:51:58,889 - INFO     -   [3] F-VALUE STABILITY: 0.593
2025-10-29 13:51:58,889 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:51:58,889 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:58,889 - INFO     - 
  [COMPOSITE]: 0.680
2025-10-29 13:51:58,889 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:51:58,889 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:51:58,889 - INFO     -     + 0.350*0.593 (stability)
2025-10-29 13:51:58,889 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:58,889 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:58,894 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:58,894 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:51:58,894 - INFO     - 
  [FINAL REWARD]: 0.7602
2025-10-29 13:51:58,894 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:58,894 - INFO     -     ✓ Reward computed: 0.7602
2025-10-29 13:51:58,894 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:58,894 - INFO     -     - bf_score                       0.5667
2025-10-29 13:51:58,894 - INFO     -     - depth_score                    0.9119
2025-10-29 13:51:58,894 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:58,894 - INFO     -     - f_stability                    0.5935
2025-10-29 13:51:58,894 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:51:58,894 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:58,894 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:58,894 - INFO     -     - composite                      0.6801
2025-10-29 13:51:58,894 - INFO     -     - total                          0.7602
2025-10-29 13:51:58,894 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:58,894 - INFO     -   Num remaining nodes: 6
2025-10-29 13:51:58,894 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:51:58,894 - INFO     -   Done: False
2025-10-29 13:51:58,894 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:58,897 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:58,897 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:58,897 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:58,897 - INFO     -     - num_nodes: 6
2025-10-29 13:51:58,897 - INFO     -     - num_edges: 28
2025-10-29 13:51:58,897 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:58,897 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:51:58,897 - INFO     -   After: current_merge_step = 3
2025-10-29 13:51:58,897 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:58,897 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:58,897 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:58,901 - INFO     -   ✓ Step logged
2025-10-29 13:51:58,901 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:58,901 - INFO     -   Returning:
2025-10-29 13:51:58,901 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:58,901 - INFO     -     - reward: 0.7602
2025-10-29 13:51:58,901 - INFO     -     - done: False
2025-10-29 13:51:58,902 - INFO     -     - truncated: False
2025-10-29 13:51:58,902 - INFO     -     - info: 19 keys
2025-10-29 13:51:58,902 - INFO     - ==========================================================================================

2025-10-29 13:51:58,907 - INFO     - 
==========================================================================================
2025-10-29 13:51:58,907 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:58,907 - INFO     - ==========================================================================================
2025-10-29 13:51:58,907 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:58,907 - INFO     -   Input action: 6 (type: int)
2025-10-29 13:51:58,907 - INFO     -   Available edges in graph: 28
2025-10-29 13:51:58,907 - INFO     -   Action index calculation:
2025-10-29 13:51:58,907 - INFO     -     - action % max(num_valid_edges, 1) = 6 % 28 = 6
2025-10-29 13:51:58,907 - INFO     -     - clamped to [0, 27]: 6
2025-10-29 13:51:58,907 - INFO     -   ✓ Extracted merge pair from edge 6: (4, 7)
2025-10-29 13:51:58,907 - INFO     -   ✓ Validation passed
2025-10-29 13:51:58,907 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:58,907 - INFO     -     - Total states before merge: 44
2025-10-29 13:51:58,907 - INFO     -     - Num nodes: 6
2025-10-29 13:51:58,907 - INFO     -     - Num edges: 28
2025-10-29 13:51:58,907 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:58,907 - INFO     -       - Node 4: 2 states
2025-10-29 13:51:58,907 - INFO     -       - Node 7: 5 states
2025-10-29 13:51:58,907 - INFO     -       - Expected product: 10 states
2025-10-29 13:51:58,907 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:58,913 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:51:58,913 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:58,913 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:51:59,016 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:59,016 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:59,016 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:51:59,016 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:59,016 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:59,016 - INFO     -   Calling graph_tracker.merge_nodes([4, 7])...
2025-10-29 13:51:59,016 - INFO     - Attempting merge of nodes 4 and 7...
2025-10-29 13:51:59,016 - INFO     - Successfully merged nodes into new node 12 with 10 states.
2025-10-29 13:51:59,016 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:59,016 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:59,016 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:51:59,016 - INFO     - 
================================================================================
2025-10-29 13:51:59,016 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:51:59,016 - INFO     - ================================================================================
2025-10-29 13:51:59,016 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:59,016 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:51:59,016 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:51:59,018 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:59,018 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:59,018 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:51:59,018 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:51:59,018 - INFO     -   - Raw f_after length: 10
2025-10-29 13:51:59,018 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:59,018 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:51:59,018 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:51:59,018 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:51:59,018 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:59,018 - INFO     -   - ts1_id: 4
2025-10-29 13:51:59,018 - INFO     -   - ts2_id: 7
2025-10-29 13:51:59,018 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:59,018 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:59,018 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:51:59,018 - INFO     -   - Product space size: 10
2025-10-29 13:51:59,018 - INFO     -   - Using product state mapping
2025-10-29 13:51:59,018 - INFO     -   - f_before_product length: 10
2025-10-29 13:51:59,018 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:51:59,018 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:51:59,018 - INFO     -   - delta: 0.8000
2025-10-29 13:51:59,018 - INFO     -   - f_stability: 1.0 - |0.8000| / 2.8000 = 0.7143
2025-10-29 13:51:59,018 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:59,018 - INFO     -   - Compared 7 values
2025-10-29 13:51:59,021 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:59,021 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:59,021 - INFO     -   - states_before: 10
2025-10-29 13:51:59,021 - INFO     -   - states_after: 10
2025-10-29 13:51:59,021 - INFO     -   - delta_states: 0
2025-10-29 13:51:59,021 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:59,021 - INFO     -   - ts1_transitions: 3
2025-10-29 13:51:59,021 - INFO     -   - ts2_transitions: 13
2025-10-29 13:51:59,021 - INFO     -   - merged_transitions: 27
2025-10-29 13:51:59,021 - INFO     -   - transition_density_change: 1.1000
2025-10-29 13:51:59,021 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:59,025 - INFO     -   - search_signals present: True
2025-10-29 13:51:59,025 - INFO     -   - nodes_expanded: 10
2025-10-29 13:51:59,025 - INFO     -   - search_depth: 2
2025-10-29 13:51:59,025 - INFO     -   - solution_cost: 2
2025-10-29 13:51:59,025 - INFO     -   - branching_factor: 2.7000
2025-10-29 13:51:59,025 - INFO     -   - solution_found: True
2025-10-29 13:51:59,025 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:59,025 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:59,025 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:51:59,025 - INFO     -   - TS4(2) + TS7(5) → 10 states
2025-10-29 13:51:59,025 - INFO     -   - f_stability=0.714
2025-10-29 13:51:59,025 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:51:59,025 - INFO     -   - solution_found=True
2025-10-29 13:51:59,025 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:59,025 - INFO     - 
  Extracted signals:
2025-10-29 13:51:59,025 - INFO     -     - iteration: 3
2025-10-29 13:51:59,025 - INFO     -     - states_before: 10
2025-10-29 13:51:59,025 - INFO     -     - states_after: 10
2025-10-29 13:51:59,025 - INFO     -     - delta_states: 0
2025-10-29 13:51:59,027 - INFO     -     - f_value_stability: 0.7143
2025-10-29 13:51:59,027 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:59,027 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:59,027 - INFO     -     - nodes_expanded: 10
2025-10-29 13:51:59,027 - INFO     -     - search_depth: 2
2025-10-29 13:51:59,027 - INFO     -     - solution_cost: 2
2025-10-29 13:51:59,027 - INFO     -     - branching_factor: 2.7000
2025-10-29 13:51:59,027 - INFO     -     - solution_found: True
2025-10-29 13:51:59,027 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:59,027 - INFO     - 
  Computing reward:
2025-10-29 13:51:59,027 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:59,027 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:59,027 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:59,027 - INFO     -   [1] BRANCHING FACTOR: 2.700 → score 0.745 (good (in comfort zone))
2025-10-29 13:51:59,027 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:59,029 - INFO     -   [3] F-VALUE STABILITY: 0.459
2025-10-29 13:51:59,029 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:51:59,029 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:59,029 - INFO     - 
  [COMPOSITE]: 0.676
2025-10-29 13:51:59,029 - INFO     -     = 0.300*0.745 (bf)
2025-10-29 13:51:59,029 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:59,029 - INFO     -     + 0.350*0.459 (stability)
2025-10-29 13:51:59,029 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:59,029 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:59,029 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:59,029 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:51:59,029 - INFO     - 
  [FINAL REWARD]: 0.6523
2025-10-29 13:51:59,029 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:59,029 - INFO     -     ✓ Reward computed: 0.6523
2025-10-29 13:51:59,029 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:59,029 - INFO     -     - bf_score                       0.7450
2025-10-29 13:51:59,029 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:59,029 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:59,031 - INFO     -     - f_stability                    0.4588
2025-10-29 13:51:59,031 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:51:59,031 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:59,031 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:59,031 - INFO     -     - composite                      0.6762
2025-10-29 13:51:59,031 - INFO     -     - total                          0.6523
2025-10-29 13:51:59,038 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:59,038 - INFO     -   Num remaining nodes: 5
2025-10-29 13:51:59,038 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:51:59,038 - INFO     -   Done: False
2025-10-29 13:51:59,038 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:59,038 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:59,038 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:59,038 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:59,038 - INFO     -     - num_nodes: 5
2025-10-29 13:51:59,038 - INFO     -     - num_edges: 20
2025-10-29 13:51:59,038 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:59,038 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:51:59,040 - INFO     -   After: current_merge_step = 4
2025-10-29 13:51:59,040 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:59,040 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:59,040 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:59,040 - INFO     -   ✓ Step logged
2025-10-29 13:51:59,040 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:59,040 - INFO     -   Returning:
2025-10-29 13:51:59,040 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:59,040 - INFO     -     - reward: 0.6523
2025-10-29 13:51:59,040 - INFO     -     - done: False
2025-10-29 13:51:59,040 - INFO     -     - truncated: False
2025-10-29 13:51:59,040 - INFO     -     - info: 19 keys
2025-10-29 13:51:59,040 - INFO     - ==========================================================================================

2025-10-29 13:51:59,045 - INFO     - 
==========================================================================================
2025-10-29 13:51:59,045 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:59,045 - INFO     - ==========================================================================================
2025-10-29 13:51:59,045 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:59,045 - INFO     -   Input action: 16 (type: int)
2025-10-29 13:51:59,045 - INFO     -   Available edges in graph: 20
2025-10-29 13:51:59,045 - INFO     -   Action index calculation:
2025-10-29 13:51:59,045 - INFO     -     - action % max(num_valid_edges, 1) = 16 % 20 = 16
2025-10-29 13:51:59,045 - INFO     -     - clamped to [0, 19]: 16
2025-10-29 13:51:59,045 - INFO     -   ✓ Extracted merge pair from edge 16: (12, 0)
2025-10-29 13:51:59,045 - INFO     -   ✓ Validation passed
2025-10-29 13:51:59,045 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:59,045 - INFO     -     - Total states before merge: 47
2025-10-29 13:51:59,045 - INFO     -     - Num nodes: 5
2025-10-29 13:51:59,045 - INFO     -     - Num edges: 20
2025-10-29 13:51:59,045 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:59,045 - INFO     -       - Node 12: 10 states
2025-10-29 13:51:59,045 - INFO     -       - Node 0: 2 states
2025-10-29 13:51:59,045 - INFO     -       - Expected product: 20 states
2025-10-29 13:51:59,045 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:59,053 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:51:59,055 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:59,055 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:51:59,156 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:59,156 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:59,156 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:51:59,157 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:59,157 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:59,157 - INFO     -   Calling graph_tracker.merge_nodes([12, 0])...
2025-10-29 13:51:59,157 - INFO     - Attempting merge of nodes 12 and 0...
2025-10-29 13:51:59,157 - INFO     - Successfully merged nodes into new node 13 with 20 states.
2025-10-29 13:51:59,157 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:59,157 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:59,157 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:51:59,157 - INFO     - 
================================================================================
2025-10-29 13:51:59,157 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:51:59,158 - INFO     - ================================================================================
2025-10-29 13:51:59,158 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:59,158 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:51:59,158 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:51:59,158 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:59,158 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:59,158 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:51:59,158 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:51:59,158 - INFO     -   - Raw f_after length: 20
2025-10-29 13:51:59,158 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:59,158 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:51:59,158 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:51:59,158 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:51:59,158 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:59,158 - INFO     -   - ts1_id: 12
2025-10-29 13:51:59,158 - INFO     -   - ts2_id: 0
2025-10-29 13:51:59,158 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:59,158 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:59,159 - INFO     -   - ts1_size: 10, ts2_size: 2
2025-10-29 13:51:59,159 - INFO     -   - Product space size: 20
2025-10-29 13:51:59,159 - INFO     -   - Using product state mapping
2025-10-29 13:51:59,159 - INFO     -   - f_before_product length: 20
2025-10-29 13:51:59,160 - INFO     -   - avg_f_before: 3.6000 (20 valid states)
2025-10-29 13:51:59,160 - INFO     -   - avg_f_after:  3.8500 (20 valid states)
2025-10-29 13:51:59,160 - INFO     -   - delta: 0.2500
2025-10-29 13:51:59,160 - INFO     -   - f_stability: 1.0 - |0.2500| / 3.6000 = 0.9306
2025-10-29 13:51:59,160 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:59,160 - INFO     -   - Compared 12 values
2025-10-29 13:51:59,160 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:51:59,160 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:59,160 - INFO     -   - states_before: 20
2025-10-29 13:51:59,160 - INFO     -   - states_after: 20
2025-10-29 13:51:59,160 - INFO     -   - delta_states: 0
2025-10-29 13:51:59,160 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:59,160 - INFO     -   - ts1_transitions: 27
2025-10-29 13:51:59,160 - INFO     -   - ts2_transitions: 5
2025-10-29 13:51:59,160 - INFO     -   - merged_transitions: 97
2025-10-29 13:51:59,160 - INFO     -   - transition_density_change: 3.2500
2025-10-29 13:51:59,160 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:59,160 - INFO     -   - search_signals present: True
2025-10-29 13:51:59,160 - INFO     -   - nodes_expanded: 20
2025-10-29 13:51:59,160 - INFO     -   - search_depth: 2
2025-10-29 13:51:59,160 - INFO     -   - solution_cost: 2
2025-10-29 13:51:59,160 - INFO     -   - branching_factor: 4.8500
2025-10-29 13:51:59,170 - INFO     -   - solution_found: True
2025-10-29 13:51:59,170 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:59,170 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:59,170 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:51:59,170 - INFO     -   - TS12(10) + TS0(2) → 20 states
2025-10-29 13:51:59,170 - INFO     -   - f_stability=0.931
2025-10-29 13:51:59,170 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:51:59,170 - INFO     -   - solution_found=True
2025-10-29 13:51:59,171 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:59,171 - INFO     - 
  Extracted signals:
2025-10-29 13:51:59,171 - INFO     -     - iteration: 4
2025-10-29 13:51:59,171 - INFO     -     - states_before: 20
2025-10-29 13:51:59,171 - INFO     -     - states_after: 20
2025-10-29 13:51:59,171 - INFO     -     - delta_states: 0
2025-10-29 13:51:59,171 - INFO     -     - f_value_stability: 0.9306
2025-10-29 13:51:59,171 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:51:59,171 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:59,171 - INFO     -     - nodes_expanded: 20
2025-10-29 13:51:59,171 - INFO     -     - search_depth: 2
2025-10-29 13:51:59,171 - INFO     -     - solution_cost: 2
2025-10-29 13:51:59,171 - INFO     -     - branching_factor: 4.8500
2025-10-29 13:51:59,171 - INFO     -     - solution_found: True
2025-10-29 13:51:59,171 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:59,171 - INFO     - 
  Computing reward:
2025-10-29 13:51:59,171 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:59,171 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:59,171 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:59,171 - INFO     -   [1] BRANCHING FACTOR: 4.850 → score 0.453 (tolerable)
2025-10-29 13:51:59,171 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:51:59,171 - INFO     -   [3] F-VALUE STABILITY: 0.815
2025-10-29 13:51:59,171 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:51:59,171 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:59,171 - INFO     - 
  [COMPOSITE]: 0.713
2025-10-29 13:51:59,171 - INFO     -     = 0.300*0.453 (bf)
2025-10-29 13:51:59,171 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:51:59,171 - INFO     -     + 0.350*0.815 (stability)
2025-10-29 13:51:59,171 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:59,171 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:59,171 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:59,171 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:51:59,171 - INFO     - 
  [FINAL REWARD]: 0.9263
2025-10-29 13:51:59,171 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:59,171 - INFO     -     ✓ Reward computed: 0.9263
2025-10-29 13:51:59,171 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:59,171 - INFO     -     - bf_score                       0.4533
2025-10-29 13:51:59,171 - INFO     -     - depth_score                    0.8603
2025-10-29 13:51:59,171 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:59,171 - INFO     -     - f_stability                    0.8146
2025-10-29 13:51:59,171 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:51:59,171 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:59,171 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:59,171 - INFO     -     - composite                      0.7132
2025-10-29 13:51:59,171 - INFO     -     - total                          0.9263
2025-10-29 13:51:59,171 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:59,171 - INFO     -   Num remaining nodes: 4
2025-10-29 13:51:59,171 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:51:59,171 - INFO     -   Done: False
2025-10-29 13:51:59,171 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:59,186 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:59,186 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:59,186 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:59,186 - INFO     -     - num_nodes: 4
2025-10-29 13:51:59,186 - INFO     -     - num_edges: 12
2025-10-29 13:51:59,187 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:59,187 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:51:59,187 - INFO     -   After: current_merge_step = 5
2025-10-29 13:51:59,187 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:59,187 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:59,187 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:59,187 - INFO     -   ✓ Step logged
2025-10-29 13:51:59,187 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:59,188 - INFO     -   Returning:
2025-10-29 13:51:59,188 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:59,188 - INFO     -     - reward: 0.9263
2025-10-29 13:51:59,188 - INFO     -     - done: False
2025-10-29 13:51:59,188 - INFO     -     - truncated: False
2025-10-29 13:51:59,189 - INFO     -     - info: 19 keys
2025-10-29 13:51:59,189 - INFO     - ==========================================================================================

2025-10-29 13:51:59,190 - INFO     - 
==========================================================================================
2025-10-29 13:51:59,190 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:59,190 - INFO     - ==========================================================================================
2025-10-29 13:51:59,194 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:59,194 - INFO     -   Input action: 6 (type: int)
2025-10-29 13:51:59,194 - INFO     -   Available edges in graph: 12
2025-10-29 13:51:59,194 - INFO     -   Action index calculation:
2025-10-29 13:51:59,194 - INFO     -     - action % max(num_valid_edges, 1) = 6 % 12 = 6
2025-10-29 13:51:59,194 - INFO     -     - clamped to [0, 11]: 6
2025-10-29 13:51:59,194 - INFO     -   ✓ Extracted merge pair from edge 6: (11, 8)
2025-10-29 13:51:59,194 - INFO     -   ✓ Validation passed
2025-10-29 13:51:59,194 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:59,194 - INFO     -     - Total states before merge: 55
2025-10-29 13:51:59,194 - INFO     -     - Num nodes: 4
2025-10-29 13:51:59,194 - INFO     -     - Num edges: 12
2025-10-29 13:51:59,194 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:59,194 - INFO     -       - Node 11: 10 states
2025-10-29 13:51:59,194 - INFO     -       - Node 8: 5 states
2025-10-29 13:51:59,194 - INFO     -       - Expected product: 50 states
2025-10-29 13:51:59,194 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:59,202 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:51:59,202 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:59,202 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:51:59,302 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:59,302 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:59,302 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:51:59,303 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:59,303 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:59,303 - INFO     -   Calling graph_tracker.merge_nodes([11, 8])...
2025-10-29 13:51:59,303 - INFO     - Attempting merge of nodes 11 and 8...
2025-10-29 13:51:59,303 - INFO     - Successfully merged nodes into new node 14 with 50 states.
2025-10-29 13:51:59,303 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:59,303 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:59,303 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:51:59,303 - INFO     - 
================================================================================
2025-10-29 13:51:59,303 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:51:59,303 - INFO     - ================================================================================
2025-10-29 13:51:59,303 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:59,303 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:51:59,303 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:51:59,306 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:59,306 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:59,306 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:51:59,306 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:51:59,306 - INFO     -   - Raw f_after length: 50
2025-10-29 13:51:59,306 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:59,306 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:51:59,306 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:51:59,306 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:51:59,306 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:59,306 - INFO     -   - ts1_id: 11
2025-10-29 13:51:59,306 - INFO     -   - ts2_id: 8
2025-10-29 13:51:59,306 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:59,306 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:59,306 - INFO     -   - ts1_size: 10, ts2_size: 5
2025-10-29 13:51:59,306 - INFO     -   - Product space size: 50
2025-10-29 13:51:59,306 - INFO     -   - Using product state mapping
2025-10-29 13:51:59,306 - INFO     -   - f_before_product length: 50
2025-10-29 13:51:59,306 - INFO     -   - avg_f_before: 3.8400 (50 valid states)
2025-10-29 13:51:59,306 - INFO     -   - avg_f_after:  6.1400 (50 valid states)
2025-10-29 13:51:59,306 - INFO     -   - delta: 2.3000
2025-10-29 13:51:59,306 - INFO     -   - f_stability: 1.0 - |2.3000| / 3.8400 = 0.4010
2025-10-29 13:51:59,306 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:59,306 - INFO     -   - Compared 15 values
2025-10-29 13:51:59,306 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:51:59,306 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:59,306 - INFO     -   - states_before: 50
2025-10-29 13:51:59,306 - INFO     -   - states_after: 50
2025-10-29 13:51:59,306 - INFO     -   - delta_states: 0
2025-10-29 13:51:59,306 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:59,306 - INFO     -   - ts1_transitions: 40
2025-10-29 13:51:59,306 - INFO     -   - ts2_transitions: 13
2025-10-29 13:51:59,306 - INFO     -   - merged_transitions: 275
2025-10-29 13:51:59,306 - INFO     -   - transition_density_change: 4.4400
2025-10-29 13:51:59,306 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:59,306 - INFO     -   - search_signals present: True
2025-10-29 13:51:59,306 - INFO     -   - nodes_expanded: 50
2025-10-29 13:51:59,306 - INFO     -   - search_depth: 3
2025-10-29 13:51:59,306 - INFO     -   - solution_cost: 2
2025-10-29 13:51:59,309 - INFO     -   - branching_factor: 5.5000
2025-10-29 13:51:59,319 - INFO     -   - solution_found: True
2025-10-29 13:51:59,319 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:59,319 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:59,319 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:51:59,319 - INFO     -   - TS11(10) + TS8(5) → 50 states
2025-10-29 13:51:59,319 - INFO     -   - f_stability=0.401
2025-10-29 13:51:59,319 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:51:59,319 - INFO     -   - solution_found=True
2025-10-29 13:51:59,319 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:59,319 - INFO     - 
  Extracted signals:
2025-10-29 13:51:59,321 - INFO     -     - iteration: 5
2025-10-29 13:51:59,321 - INFO     -     - states_before: 50
2025-10-29 13:51:59,321 - INFO     -     - states_after: 50
2025-10-29 13:51:59,321 - INFO     -     - delta_states: 0
2025-10-29 13:51:59,321 - INFO     -     - f_value_stability: 0.4010
2025-10-29 13:51:59,321 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:51:59,321 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:59,321 - INFO     -     - nodes_expanded: 50
2025-10-29 13:51:59,321 - INFO     -     - search_depth: 3
2025-10-29 13:51:59,321 - INFO     -     - solution_cost: 2
2025-10-29 13:51:59,321 - INFO     -     - branching_factor: 5.5000
2025-10-29 13:51:59,321 - INFO     -     - solution_found: True
2025-10-29 13:51:59,321 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:59,321 - INFO     - 
  Computing reward:
2025-10-29 13:51:59,321 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:59,321 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:59,321 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:59,321 - INFO     -   [1] BRANCHING FACTOR: 5.500 → score 0.367 (tolerable)
2025-10-29 13:51:59,321 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:51:59,321 - INFO     -   [3] F-VALUE STABILITY: 0.142
2025-10-29 13:51:59,321 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:59,321 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:59,321 - INFO     - 
  [COMPOSITE]: 0.444
2025-10-29 13:51:59,321 - INFO     -     = 0.300*0.367 (bf)
2025-10-29 13:51:59,321 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:51:59,321 - INFO     -     + 0.350*0.142 (stability)
2025-10-29 13:51:59,321 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:59,321 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:59,321 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:59,321 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:59,321 - INFO     - 
  [FINAL REWARD]: 0.0888
2025-10-29 13:51:59,321 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:59,321 - INFO     -     ✓ Reward computed: 0.0888
2025-10-29 13:51:59,321 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:59,321 - INFO     -     - bf_score                       0.3667
2025-10-29 13:51:59,321 - INFO     -     - depth_score                    0.8237
2025-10-29 13:51:59,321 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:59,321 - INFO     -     - f_stability                    0.1419
2025-10-29 13:51:59,321 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:59,321 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:59,321 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:59,324 - INFO     -     - composite                      0.4444
2025-10-29 13:51:59,324 - INFO     -     - total                          0.0888
2025-10-29 13:51:59,324 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:59,324 - INFO     -   Num remaining nodes: 3
2025-10-29 13:51:59,324 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:51:59,324 - INFO     -   Done: False
2025-10-29 13:51:59,324 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:59,327 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:59,327 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:59,327 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:59,327 - INFO     -     - num_nodes: 3
2025-10-29 13:51:59,327 - INFO     -     - num_edges: 6
2025-10-29 13:51:59,327 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:59,327 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:51:59,327 - INFO     -   After: current_merge_step = 6
2025-10-29 13:51:59,327 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:59,327 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:59,327 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:59,327 - INFO     -   ✓ Step logged
2025-10-29 13:51:59,327 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:59,327 - INFO     -   Returning:
2025-10-29 13:51:59,327 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:59,327 - INFO     -     - reward: 0.0888
2025-10-29 13:51:59,327 - INFO     -     - done: False
2025-10-29 13:51:59,327 - INFO     -     - truncated: False
2025-10-29 13:51:59,327 - INFO     -     - info: 19 keys
2025-10-29 13:51:59,327 - INFO     - ==========================================================================================

2025-10-29 13:51:59,334 - INFO     - 
==========================================================================================
2025-10-29 13:51:59,334 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:59,334 - INFO     - ==========================================================================================
2025-10-29 13:51:59,334 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:59,334 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:51:59,334 - INFO     -   Available edges in graph: 6
2025-10-29 13:51:59,334 - INFO     -   Action index calculation:
2025-10-29 13:51:59,334 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 6 = 1
2025-10-29 13:51:59,334 - INFO     -     - clamped to [0, 5]: 1
2025-10-29 13:51:59,334 - INFO     -   ✓ Extracted merge pair from edge 1: (10, 14)
2025-10-29 13:51:59,334 - INFO     -   ✓ Validation passed
2025-10-29 13:51:59,334 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:59,334 - INFO     -     - Total states before merge: 90
2025-10-29 13:51:59,334 - INFO     -     - Num nodes: 3
2025-10-29 13:51:59,334 - INFO     -     - Num edges: 6
2025-10-29 13:51:59,334 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:59,334 - INFO     -       - Node 10: 20 states
2025-10-29 13:51:59,334 - INFO     -       - Node 14: 50 states
2025-10-29 13:51:59,334 - INFO     -       - Expected product: 1000 states
2025-10-29 13:51:59,334 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:59,338 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:51:59,338 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:59,338 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:51:59,444 - INFO     -   ✓ ACK received after 0.11s
2025-10-29 13:51:59,444 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:59,444 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:51:59,444 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:51:59,444 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:59,444 - INFO     -   Calling graph_tracker.merge_nodes([10, 14])...
2025-10-29 13:51:59,444 - INFO     - Attempting merge of nodes 10 and 14...
2025-10-29 13:51:59,444 - INFO     - Successfully merged nodes into new node 15 with 1000 states.
2025-10-29 13:51:59,444 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:59,444 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:59,444 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:51:59,444 - INFO     - 
================================================================================
2025-10-29 13:51:59,444 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:51:59,444 - INFO     - ================================================================================
2025-10-29 13:51:59,444 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:59,444 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:51:59,444 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:51:59,453 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:59,453 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:59,453 - INFO     -   - Raw ts1_f length: 20
2025-10-29 13:51:59,453 - INFO     -   - Raw ts2_f length: 50
2025-10-29 13:51:59,453 - INFO     -   - Raw f_after length: 1000
2025-10-29 13:51:59,453 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:59,453 - INFO     -   - ts1_valid: 20 / 20 (removed 0)
2025-10-29 13:51:59,453 - INFO     -   - ts2_valid: 50 / 50 (removed -50)
2025-10-29 13:51:59,454 - INFO     -   - after_valid: 1000 / 1000 (removed 0)
2025-10-29 13:51:59,454 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:59,454 - INFO     -   - ts1_id: 10
2025-10-29 13:51:59,454 - INFO     -   - ts2_id: 14
2025-10-29 13:51:59,454 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:59,454 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:59,454 - INFO     -   - ts1_size: 20, ts2_size: 50
2025-10-29 13:51:59,454 - INFO     -   - Product space size: 1000
2025-10-29 13:51:59,454 - INFO     -   - Using product state mapping
2025-10-29 13:51:59,456 - INFO     -   - f_before_product length: 1000
2025-10-29 13:51:59,460 - INFO     -   - avg_f_before: 6.5060 (1000 valid states)
2025-10-29 13:51:59,460 - INFO     -   - avg_f_after:  11.0550 (1000 valid states)
2025-10-29 13:51:59,460 - INFO     -   - delta: 4.5490
2025-10-29 13:51:59,460 - INFO     -   - f_stability: 1.0 - |4.5490| / 6.5060 = 0.3008
2025-10-29 13:51:59,460 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:59,460 - INFO     -   - Compared 70 values
2025-10-29 13:51:59,461 - INFO     -   - Significant changes (> 5.0): 39
2025-10-29 13:51:59,461 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:59,461 - INFO     -   - states_before: 1000
2025-10-29 13:51:59,461 - INFO     -   - states_after: 1000
2025-10-29 13:51:59,461 - INFO     -   - delta_states: 0
2025-10-29 13:51:59,461 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:59,461 - INFO     -   - ts1_transitions: 122
2025-10-29 13:51:59,461 - INFO     -   - ts2_transitions: 275
2025-10-29 13:51:59,461 - INFO     -   - merged_transitions: 6800
2025-10-29 13:51:59,461 - INFO     -   - transition_density_change: 6.4030
2025-10-29 13:51:59,461 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:59,461 - INFO     -   - search_signals present: True
2025-10-29 13:51:59,461 - INFO     -   - nodes_expanded: 1000
2025-10-29 13:51:59,461 - INFO     -   - search_depth: 5
2025-10-29 13:51:59,461 - INFO     -   - solution_cost: 2
2025-10-29 13:51:59,461 - INFO     -   - branching_factor: 6.8000
2025-10-29 13:51:59,461 - INFO     -   - solution_found: True
2025-10-29 13:51:59,461 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:59,461 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:59,461 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:51:59,461 - INFO     -   - TS10(20) + TS14(50) → 1000 states
2025-10-29 13:51:59,461 - INFO     -   - f_stability=0.301
2025-10-29 13:51:59,461 - INFO     -   - A* nodes_expanded=1000
2025-10-29 13:51:59,461 - INFO     -   - solution_found=True
2025-10-29 13:51:59,461 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:59,461 - INFO     - 
  Extracted signals:
2025-10-29 13:51:59,461 - INFO     -     - iteration: 6
2025-10-29 13:51:59,461 - INFO     -     - states_before: 1000
2025-10-29 13:51:59,461 - INFO     -     - states_after: 1000
2025-10-29 13:51:59,461 - INFO     -     - delta_states: 0
2025-10-29 13:51:59,461 - INFO     -     - f_value_stability: 0.3008
2025-10-29 13:51:59,461 - INFO     -     - num_significant_f_changes: 39
2025-10-29 13:51:59,461 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:59,461 - INFO     -     - nodes_expanded: 1000
2025-10-29 13:51:59,461 - INFO     -     - search_depth: 5
2025-10-29 13:51:59,461 - INFO     -     - solution_cost: 2
2025-10-29 13:51:59,461 - INFO     -     - branching_factor: 6.8000
2025-10-29 13:51:59,461 - INFO     -     - solution_found: True
2025-10-29 13:51:59,461 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:59,461 - INFO     - 
  Computing reward:
2025-10-29 13:51:59,464 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:59,464 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:59,464 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:59,464 - INFO     -   [1] BRANCHING FACTOR: 6.800 → score 0.220 (high BF, minimal credit)
2025-10-29 13:51:59,470 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:51:59,470 - INFO     -   [3] F-VALUE STABILITY: 0.298
2025-10-29 13:51:59,470 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:51:59,470 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:59,470 - INFO     - 
  [COMPOSITE]: 0.445
2025-10-29 13:51:59,470 - INFO     -     = 0.300*0.220 (bf)
2025-10-29 13:51:59,470 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:51:59,470 - INFO     -     + 0.350*0.298 (stability)
2025-10-29 13:51:59,470 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:59,470 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:59,470 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:59,470 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:51:59,470 - INFO     - 
  [FINAL REWARD]: 0.0897
2025-10-29 13:51:59,470 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:59,472 - INFO     -     ✓ Reward computed: 0.0897
2025-10-29 13:51:59,472 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:59,472 - INFO     -     - bf_score                       0.2200
2025-10-29 13:51:59,472 - INFO     -     - depth_score                    0.7721
2025-10-29 13:51:59,472 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:59,472 - INFO     -     - f_stability                    0.2983
2025-10-29 13:51:59,472 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:51:59,472 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:59,472 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:59,472 - INFO     -     - composite                      0.4448
2025-10-29 13:51:59,472 - INFO     -     - total                          0.0897
2025-10-29 13:51:59,472 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:59,473 - INFO     -   Num remaining nodes: 2
2025-10-29 13:51:59,473 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:51:59,473 - INFO     -   Done: False
2025-10-29 13:51:59,473 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:59,473 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:59,473 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:59,473 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:59,473 - INFO     -     - num_nodes: 2
2025-10-29 13:51:59,473 - INFO     -     - num_edges: 2
2025-10-29 13:51:59,473 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:59,473 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:51:59,473 - INFO     -   After: current_merge_step = 7
2025-10-29 13:51:59,473 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:59,473 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:59,473 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:59,473 - INFO     -   ✓ Step logged
2025-10-29 13:51:59,473 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:59,473 - INFO     -   Returning:
2025-10-29 13:51:59,473 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:59,473 - INFO     -     - reward: 0.0897
2025-10-29 13:51:59,473 - INFO     -     - done: False
2025-10-29 13:51:59,473 - INFO     -     - truncated: False
2025-10-29 13:51:59,473 - INFO     -     - info: 19 keys
2025-10-29 13:51:59,473 - INFO     - ==========================================================================================

2025-10-29 13:51:59,478 - INFO     - 
==========================================================================================
2025-10-29 13:51:59,478 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:51:59,478 - INFO     - ==========================================================================================
2025-10-29 13:51:59,480 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:51:59,480 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:51:59,486 - INFO     -   Available edges in graph: 2
2025-10-29 13:51:59,486 - INFO     -   Action index calculation:
2025-10-29 13:51:59,486 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:51:59,486 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:51:59,486 - INFO     -   ✓ Extracted merge pair from edge 0: (13, 15)
2025-10-29 13:51:59,486 - INFO     -   ✓ Validation passed
2025-10-29 13:51:59,486 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:51:59,486 - INFO     -     - Total states before merge: 1020
2025-10-29 13:51:59,486 - INFO     -     - Num nodes: 2
2025-10-29 13:51:59,486 - INFO     -     - Num edges: 2
2025-10-29 13:51:59,487 - INFO     - 
    Nodes being merged:
2025-10-29 13:51:59,487 - INFO     -       - Node 13: 20 states
2025-10-29 13:51:59,487 - INFO     -       - Node 15: 1000 states
2025-10-29 13:51:59,487 - INFO     -       - Expected product: 20000 states
2025-10-29 13:51:59,487 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:51:59,494 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:51:59,494 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:51:59,494 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:51:59,595 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:51:59,595 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:51:59,595 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:51:59,607 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:51:59,607 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:51:59,609 - INFO     -   Calling graph_tracker.merge_nodes([13, 15])...
2025-10-29 13:51:59,609 - INFO     - Attempting merge of nodes 13 and 15...
2025-10-29 13:51:59,609 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:51:59,609 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:51:59,609 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:51:59,609 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:51:59,609 - INFO     - 
================================================================================
2025-10-29 13:51:59,609 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:51:59,609 - INFO     - ================================================================================
2025-10-29 13:51:59,609 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:51:59,609 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:51:59,610 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:51:59,613 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:51:59,613 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:51:59,613 - INFO     -   - Raw ts1_f length: 20
2025-10-29 13:51:59,613 - INFO     -   - Raw ts2_f length: 139
2025-10-29 13:51:59,613 - INFO     -   - Raw f_after length: 2780
2025-10-29 13:51:59,613 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:51:59,613 - INFO     -   - ts1_valid: 20 / 20 (removed 0)
2025-10-29 13:51:59,613 - INFO     -   - ts2_valid: 139 / 139 (removed -139)
2025-10-29 13:51:59,615 - INFO     -   - after_valid: 1701 / 2780 (removed 1079)
2025-10-29 13:51:59,615 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:51:59,615 - INFO     -   - ts1_id: 13
2025-10-29 13:51:59,615 - INFO     -   - ts2_id: 15
2025-10-29 13:51:59,615 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:51:59,615 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:51:59,615 - INFO     -   - ts1_size: 20, ts2_size: 139
2025-10-29 13:51:59,615 - INFO     -   - Product space size: 2780
2025-10-29 13:51:59,615 - INFO     -   - Using product state mapping
2025-10-29 13:51:59,619 - INFO     -   - f_before_product length: 2780
2025-10-29 13:51:59,625 - INFO     -   - avg_f_before: 5.8558 (2780 valid states)
2025-10-29 13:51:59,625 - INFO     -   - avg_f_after:  10.1546 (1701 valid states)
2025-10-29 13:51:59,625 - INFO     -   - delta: 4.2989
2025-10-29 13:51:59,625 - INFO     -   - f_stability: 1.0 - |4.2989| / 5.8558 = 0.2659
2025-10-29 13:51:59,625 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:51:59,625 - INFO     -   - Compared 159 values
2025-10-29 13:51:59,625 - INFO     -   - Significant changes (> 5.0): 35
2025-10-29 13:51:59,625 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:51:59,625 - INFO     -   - states_before: 2780
2025-10-29 13:51:59,625 - INFO     -   - states_after: 2780
2025-10-29 13:51:59,625 - INFO     -   - delta_states: 0
2025-10-29 13:51:59,625 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:51:59,625 - INFO     -   - ts1_transitions: 97
2025-10-29 13:51:59,625 - INFO     -   - ts2_transitions: 1362
2025-10-29 13:51:59,625 - INFO     -   - merged_transitions: 12023
2025-10-29 13:51:59,627 - INFO     -   - transition_density_change: 3.8000
2025-10-29 13:51:59,627 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:51:59,627 - INFO     -   - search_signals present: True
2025-10-29 13:51:59,627 - INFO     -   - nodes_expanded: 1701
2025-10-29 13:51:59,627 - INFO     -   - search_depth: 5
2025-10-29 13:51:59,627 - INFO     -   - solution_cost: 4
2025-10-29 13:51:59,627 - INFO     -   - branching_factor: 7.0682
2025-10-29 13:51:59,627 - INFO     -   - solution_found: True
2025-10-29 13:51:59,627 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:51:59,627 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:51:59,627 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:51:59,629 - INFO     -   - TS13(20) + TS15(139) → 2780 states
2025-10-29 13:51:59,629 - INFO     -   - f_stability=0.266
2025-10-29 13:51:59,629 - INFO     -   - A* nodes_expanded=1701
2025-10-29 13:51:59,629 - INFO     -   - solution_found=True
2025-10-29 13:51:59,629 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:51:59,629 - INFO     - 
  Extracted signals:
2025-10-29 13:51:59,629 - INFO     -     - iteration: 7
2025-10-29 13:51:59,629 - INFO     -     - states_before: 2780
2025-10-29 13:51:59,629 - INFO     -     - states_after: 2780
2025-10-29 13:51:59,629 - INFO     -     - delta_states: 0
2025-10-29 13:51:59,629 - INFO     -     - f_value_stability: 0.2659
2025-10-29 13:51:59,629 - INFO     -     - num_significant_f_changes: 35
2025-10-29 13:51:59,629 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:51:59,629 - INFO     -     - nodes_expanded: 1701
2025-10-29 13:51:59,629 - INFO     -     - search_depth: 5
2025-10-29 13:51:59,629 - INFO     -     - solution_cost: 4
2025-10-29 13:51:59,629 - INFO     -     - branching_factor: 7.0682
2025-10-29 13:51:59,629 - INFO     -     - solution_found: True
2025-10-29 13:51:59,629 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:51:59,629 - WARNING  -     ⚠️  Poor F-stability: 0.2659
2025-10-29 13:51:59,631 - INFO     - 
  Computing reward:
2025-10-29 13:51:59,631 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:51:59,631 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:51:59,631 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:51:59,631 - INFO     -   [1] BRANCHING FACTOR: 7.068 → score 0.193 (high BF, minimal credit)
2025-10-29 13:51:59,631 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:51:59,633 - INFO     -   [3] F-VALUE STABILITY: 0.498
2025-10-29 13:51:59,634 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:51:59,634 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:51:59,634 - INFO     - 
  [COMPOSITE]: 0.507
2025-10-29 13:51:59,634 - INFO     -     = 0.300*0.193 (bf)
2025-10-29 13:51:59,634 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:51:59,636 - INFO     -     + 0.350*0.498 (stability)
2025-10-29 13:51:59,636 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:51:59,636 - INFO     - 
  [BONUSES]:
2025-10-29 13:51:59,636 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:51:59,636 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:51:59,636 - INFO     - 
  [FINAL REWARD]: 0.3136
2025-10-29 13:51:59,636 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:51:59,636 - INFO     -     ✓ Reward computed: 0.3136
2025-10-29 13:51:59,636 - INFO     - 
  Reward component breakdown:
2025-10-29 13:51:59,636 - INFO     -     - bf_score                       0.1932
2025-10-29 13:51:59,638 - INFO     -     - depth_score                    0.7721
2025-10-29 13:51:59,638 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:51:59,638 - INFO     -     - f_stability                    0.4983
2025-10-29 13:51:59,638 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:51:59,638 - INFO     -     - state_score                    0.8000
2025-10-29 13:51:59,638 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:51:59,638 - INFO     -     - composite                      0.5068
2025-10-29 13:51:59,638 - INFO     -     - total                          0.3136
2025-10-29 13:51:59,638 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:51:59,638 - INFO     -   Num remaining nodes: 1
2025-10-29 13:51:59,638 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:51:59,638 - INFO     -   Done: True
2025-10-29 13:51:59,638 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:51:59,638 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:51:59,638 - INFO     -   ✓ Observation built successfully
2025-10-29 13:51:59,638 - INFO     -     - x shape: (100, 19)
2025-10-29 13:51:59,638 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:51:59,638 - INFO     -     - num_nodes: 1
2025-10-29 13:51:59,640 - INFO     -     - num_edges: 0
2025-10-29 13:51:59,640 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:51:59,640 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:51:59,640 - INFO     -   After: current_merge_step = 8
2025-10-29 13:51:59,640 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:51:59,640 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:51:59,640 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:51:59,640 - INFO     -   ✓ Step logged
2025-10-29 13:51:59,640 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:51:59,640 - INFO     -   Returning:
2025-10-29 13:51:59,640 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:51:59,640 - INFO     -     - reward: 0.3136
2025-10-29 13:51:59,640 - INFO     -     - done: True
2025-10-29 13:51:59,640 - INFO     -     - truncated: False
2025-10-29 13:51:59,640 - INFO     -     - info: 19 keys
2025-10-29 13:51:59,640 - INFO     - ==========================================================================================

2025-10-29 13:51:59,706 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:51:59,718 - INFO     - [Handshake] Building FD command:
2025-10-29 13:51:59,718 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:51:59,718 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_01.pddl
2025-10-29 13:51:59,718 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:51:59,722 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:52:00,476 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:52:00,476 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:52:00,476 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:52:00,786 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:52:00,786 - INFO     - Initializing GraphTracker...
2025-10-29 13:52:00,786 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:52:00,786 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:52:00,786 - INFO     -    → Node 0 has 2 states
2025-10-29 13:52:00,786 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:52:00,786 - INFO     -    → Node 1 has 2 states
2025-10-29 13:52:00,786 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:52:00,786 - INFO     -    → Node 2 has 2 states
2025-10-29 13:52:00,786 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:52:00,786 - INFO     -    → Node 3 has 2 states
2025-10-29 13:52:00,786 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:52:00,786 - INFO     -    → Node 4 has 2 states
2025-10-29 13:52:00,786 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:52:00,786 - INFO     -    → Node 5 has 5 states
2025-10-29 13:52:00,786 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:52:00,786 - INFO     -    → Node 6 has 5 states
2025-10-29 13:52:00,786 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:52:00,786 - INFO     -    → Node 7 has 5 states
2025-10-29 13:52:00,786 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:52:00,786 - INFO     -    → Node 8 has 5 states
2025-10-29 13:52:00,786 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:52:00,786 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:52:00,786 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:52:00,786 - INFO     - Added edge (0, 1)
2025-10-29 13:52:00,786 - INFO     - Added edge (0, 2)
2025-10-29 13:52:00,786 - INFO     - Added edge (0, 3)
2025-10-29 13:52:00,786 - INFO     - Added edge (0, 4)
2025-10-29 13:52:00,786 - INFO     - Added edge (0, 5)
2025-10-29 13:52:00,786 - INFO     - Added edge (0, 6)
2025-10-29 13:52:00,786 - INFO     - Added edge (0, 7)
2025-10-29 13:52:00,786 - INFO     - Added edge (0, 8)
2025-10-29 13:52:00,786 - INFO     - Added edge (1, 0)
2025-10-29 13:52:00,786 - INFO     - Added edge (1, 2)
2025-10-29 13:52:00,786 - INFO     - Added edge (1, 3)
2025-10-29 13:52:00,786 - INFO     - Added edge (1, 4)
2025-10-29 13:52:00,786 - INFO     - Added edge (1, 5)
2025-10-29 13:52:00,793 - INFO     - Added edge (1, 6)
2025-10-29 13:52:00,793 - INFO     - Added edge (1, 7)
2025-10-29 13:52:00,793 - INFO     - Added edge (1, 8)
2025-10-29 13:52:00,793 - INFO     - Added edge (2, 0)
2025-10-29 13:52:00,793 - INFO     - Added edge (2, 1)
2025-10-29 13:52:00,793 - INFO     - Added edge (2, 3)
2025-10-29 13:52:00,793 - INFO     - Added edge (2, 4)
2025-10-29 13:52:00,793 - INFO     - Added edge (2, 5)
2025-10-29 13:52:00,793 - INFO     - Added edge (2, 6)
2025-10-29 13:52:00,793 - INFO     - Added edge (2, 7)
2025-10-29 13:52:00,793 - INFO     - Added edge (2, 8)
2025-10-29 13:52:00,793 - INFO     - Added edge (3, 0)
2025-10-29 13:52:00,793 - INFO     - Added edge (3, 1)
2025-10-29 13:52:00,793 - INFO     - Added edge (3, 2)
2025-10-29 13:52:00,793 - INFO     - Added edge (3, 4)
2025-10-29 13:52:00,793 - INFO     - Added edge (3, 5)
2025-10-29 13:52:00,793 - INFO     - Added edge (3, 6)
2025-10-29 13:52:00,793 - INFO     - Added edge (3, 7)
2025-10-29 13:52:00,793 - INFO     - Added edge (3, 8)
2025-10-29 13:52:00,793 - INFO     - Added edge (4, 0)
2025-10-29 13:52:00,793 - INFO     - Added edge (4, 1)
2025-10-29 13:52:00,793 - INFO     - Added edge (4, 2)
2025-10-29 13:52:00,793 - INFO     - Added edge (4, 3)
2025-10-29 13:52:00,793 - INFO     - Added edge (4, 5)
2025-10-29 13:52:00,793 - INFO     - Added edge (4, 6)
2025-10-29 13:52:00,797 - INFO     - Added edge (4, 7)
2025-10-29 13:52:00,797 - INFO     - Added edge (4, 8)
2025-10-29 13:52:00,797 - INFO     - Added edge (5, 0)
2025-10-29 13:52:00,797 - INFO     - Added edge (5, 1)
2025-10-29 13:52:00,797 - INFO     - Added edge (5, 2)
2025-10-29 13:52:00,797 - INFO     - Added edge (5, 3)
2025-10-29 13:52:00,797 - INFO     - Added edge (5, 4)
2025-10-29 13:52:00,797 - INFO     - Added edge (6, 0)
2025-10-29 13:52:00,797 - INFO     - Added edge (6, 1)
2025-10-29 13:52:00,797 - INFO     - Added edge (6, 2)
2025-10-29 13:52:00,797 - INFO     - Added edge (6, 3)
2025-10-29 13:52:00,797 - INFO     - Added edge (6, 4)
2025-10-29 13:52:00,797 - INFO     - Added edge (7, 0)
2025-10-29 13:52:00,797 - INFO     - Added edge (7, 1)
2025-10-29 13:52:00,797 - INFO     - Added edge (7, 2)
2025-10-29 13:52:00,798 - INFO     - Added edge (7, 3)
2025-10-29 13:52:00,798 - INFO     - Added edge (7, 4)
2025-10-29 13:52:00,798 - INFO     - Added edge (8, 0)
2025-10-29 13:52:00,798 - INFO     - Added edge (8, 1)
2025-10-29 13:52:00,798 - INFO     - Added edge (8, 2)
2025-10-29 13:52:00,798 - INFO     - Added edge (8, 3)
2025-10-29 13:52:00,798 - INFO     - Added edge (8, 4)
2025-10-29 13:52:00,798 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:52:00,802 - INFO     - 
==========================================================================================
2025-10-29 13:52:00,802 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:00,802 - INFO     - ==========================================================================================
2025-10-29 13:52:00,802 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:00,802 - INFO     -   Input action: 9 (type: int)
2025-10-29 13:52:00,802 - INFO     -   Available edges in graph: 60
2025-10-29 13:52:00,802 - INFO     -   Action index calculation:
2025-10-29 13:52:00,802 - INFO     -     - action % max(num_valid_edges, 1) = 9 % 60 = 9
2025-10-29 13:52:00,802 - INFO     -     - clamped to [0, 59]: 9
2025-10-29 13:52:00,802 - INFO     -   ✓ Extracted merge pair from edge 9: (1, 2)
2025-10-29 13:52:00,802 - INFO     -   ✓ Validation passed
2025-10-29 13:52:00,802 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:00,802 - INFO     -     - Total states before merge: 30
2025-10-29 13:52:00,802 - INFO     -     - Num nodes: 9
2025-10-29 13:52:00,802 - INFO     -     - Num edges: 60
2025-10-29 13:52:00,802 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:00,802 - INFO     -       - Node 1: 2 states
2025-10-29 13:52:00,802 - INFO     -       - Node 2: 2 states
2025-10-29 13:52:00,802 - INFO     -       - Expected product: 4 states
2025-10-29 13:52:00,802 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:00,834 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:52:00,834 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:00,834 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:52:00,935 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:00,935 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:00,935 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:52:00,935 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:00,935 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:00,935 - INFO     -   Calling graph_tracker.merge_nodes([1, 2])...
2025-10-29 13:52:00,935 - INFO     - Attempting merge of nodes 1 and 2...
2025-10-29 13:52:00,935 - INFO     - Successfully merged nodes into new node 9 with 4 states.
2025-10-29 13:52:00,935 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:00,935 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:00,935 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:52:00,935 - INFO     - 
================================================================================
2025-10-29 13:52:00,935 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:52:00,935 - INFO     - ================================================================================
2025-10-29 13:52:00,935 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:00,935 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:52:00,935 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:52:00,935 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:00,935 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:00,935 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:00,935 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:00,935 - INFO     -   - Raw f_after length: 4
2025-10-29 13:52:00,935 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:00,935 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:00,935 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:00,935 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:52:00,935 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:00,935 - INFO     -   - ts1_id: 1
2025-10-29 13:52:00,935 - INFO     -   - ts2_id: 2
2025-10-29 13:52:00,935 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:00,935 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:00,935 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:52:00,935 - INFO     -   - Product space size: 4
2025-10-29 13:52:00,935 - INFO     -   - Using product state mapping
2025-10-29 13:52:00,935 - INFO     -   - f_before_product length: 4
2025-10-29 13:52:00,935 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:52:00,935 - INFO     -   - avg_f_after:  1.0000 (4 valid states)
2025-10-29 13:52:00,935 - INFO     -   - delta: 0.2500
2025-10-29 13:52:00,935 - INFO     -   - f_stability: 1.0 - |0.2500| / 0.7500 = 0.6667
2025-10-29 13:52:00,935 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:00,935 - INFO     -   - Compared 4 values
2025-10-29 13:52:00,935 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:00,935 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:00,935 - INFO     -   - states_before: 4
2025-10-29 13:52:00,935 - INFO     -   - states_after: 4
2025-10-29 13:52:00,935 - INFO     -   - delta_states: 0
2025-10-29 13:52:00,935 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:00,935 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:00,935 - INFO     -   - ts2_transitions: 5
2025-10-29 13:52:00,935 - INFO     -   - merged_transitions: 20
2025-10-29 13:52:00,935 - INFO     -   - transition_density_change: 2.5000
2025-10-29 13:52:00,935 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:00,943 - INFO     -   - search_signals present: True
2025-10-29 13:52:00,943 - INFO     -   - nodes_expanded: 4
2025-10-29 13:52:00,943 - INFO     -   - search_depth: 0
2025-10-29 13:52:00,943 - INFO     -   - solution_cost: 0
2025-10-29 13:52:00,943 - INFO     -   - branching_factor: 5.0000
2025-10-29 13:52:00,943 - INFO     -   - solution_found: True
2025-10-29 13:52:00,943 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:00,943 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:00,943 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:52:00,943 - INFO     -   - TS1(2) + TS2(2) → 4 states
2025-10-29 13:52:00,943 - INFO     -   - f_stability=0.667
2025-10-29 13:52:00,943 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:52:00,943 - INFO     -   - solution_found=True
2025-10-29 13:52:00,943 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:00,945 - INFO     - 
  Extracted signals:
2025-10-29 13:52:00,945 - INFO     -     - iteration: 0
2025-10-29 13:52:00,945 - INFO     -     - states_before: 4
2025-10-29 13:52:00,945 - INFO     -     - states_after: 4
2025-10-29 13:52:00,945 - INFO     -     - delta_states: 0
2025-10-29 13:52:00,945 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:52:00,945 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:00,945 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:00,945 - INFO     -     - nodes_expanded: 4
2025-10-29 13:52:00,945 - INFO     -     - search_depth: 0
2025-10-29 13:52:00,945 - INFO     -     - solution_cost: 0
2025-10-29 13:52:00,945 - INFO     -     - branching_factor: 5.0000
2025-10-29 13:52:00,945 - INFO     -     - solution_found: True
2025-10-29 13:52:00,945 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:00,945 - INFO     - 
  Computing reward:
2025-10-29 13:52:00,945 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:00,945 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:00,945 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:00,945 - INFO     -   [1] BRANCHING FACTOR: 5.000 → score 0.433 (tolerable)
2025-10-29 13:52:00,945 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:52:00,947 - INFO     -   [3] F-VALUE STABILITY: 0.176
2025-10-29 13:52:00,947 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:00,947 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:00,947 - INFO     - 
  [COMPOSITE]: 0.412
2025-10-29 13:52:00,948 - INFO     -     = 0.300*0.433 (bf)
2025-10-29 13:52:00,948 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:52:00,948 - INFO     -     + 0.350*0.176 (stability)
2025-10-29 13:52:00,948 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:00,948 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:00,948 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:00,948 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:00,948 - INFO     - 
  [FINAL REWARD]: 0.0230
2025-10-29 13:52:00,948 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:00,948 - INFO     -     ✓ Reward computed: 0.0230
2025-10-29 13:52:00,948 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:00,948 - INFO     -     - bf_score                       0.4333
2025-10-29 13:52:00,948 - INFO     -     - depth_score                    0.5000
2025-10-29 13:52:00,948 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:00,948 - INFO     -     - f_stability                    0.1757
2025-10-29 13:52:00,948 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:00,948 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:00,948 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:00,948 - INFO     -     - composite                      0.4115
2025-10-29 13:52:00,948 - INFO     -     - total                          0.0230
2025-10-29 13:52:00,960 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:00,960 - INFO     -   Num remaining nodes: 8
2025-10-29 13:52:00,960 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:52:00,960 - INFO     -   Done: False
2025-10-29 13:52:00,960 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:00,962 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:00,962 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:00,962 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:00,962 - INFO     -     - num_nodes: 8
2025-10-29 13:52:00,962 - INFO     -     - num_edges: 44
2025-10-29 13:52:00,962 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:00,962 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:52:00,962 - INFO     -   After: current_merge_step = 1
2025-10-29 13:52:00,962 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:00,962 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:00,962 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:00,962 - INFO     -   ✓ Step logged
2025-10-29 13:52:00,965 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:00,965 - INFO     -   Returning:
2025-10-29 13:52:00,965 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:00,965 - INFO     -     - reward: 0.0230
2025-10-29 13:52:00,965 - INFO     -     - done: False
2025-10-29 13:52:00,965 - INFO     -     - truncated: False
2025-10-29 13:52:00,965 - INFO     -     - info: 19 keys
2025-10-29 13:52:00,965 - INFO     - ==========================================================================================

2025-10-29 13:52:00,968 - INFO     - 
==========================================================================================
2025-10-29 13:52:00,968 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:00,968 - INFO     - ==========================================================================================
2025-10-29 13:52:00,968 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:00,968 - INFO     -   Input action: 37 (type: int)
2025-10-29 13:52:00,968 - INFO     -   Available edges in graph: 44
2025-10-29 13:52:00,968 - INFO     -   Action index calculation:
2025-10-29 13:52:00,968 - INFO     -     - action % max(num_valid_edges, 1) = 37 % 44 = 37
2025-10-29 13:52:00,968 - INFO     -     - clamped to [0, 43]: 37
2025-10-29 13:52:00,968 - INFO     -   ✓ Extracted merge pair from edge 37: (9, 0)
2025-10-29 13:52:00,968 - INFO     -   ✓ Validation passed
2025-10-29 13:52:00,968 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:00,968 - INFO     -     - Total states before merge: 30
2025-10-29 13:52:00,968 - INFO     -     - Num nodes: 8
2025-10-29 13:52:00,968 - INFO     -     - Num edges: 44
2025-10-29 13:52:00,968 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:00,968 - INFO     -       - Node 9: 4 states
2025-10-29 13:52:00,968 - INFO     -       - Node 0: 2 states
2025-10-29 13:52:00,968 - INFO     -       - Expected product: 8 states
2025-10-29 13:52:00,968 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:00,978 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:52:00,978 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:00,978 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:52:01,080 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:01,080 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:01,080 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:52:01,080 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:01,080 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:01,080 - INFO     -   Calling graph_tracker.merge_nodes([9, 0])...
2025-10-29 13:52:01,080 - INFO     - Attempting merge of nodes 9 and 0...
2025-10-29 13:52:01,080 - INFO     - Successfully merged nodes into new node 10 with 8 states.
2025-10-29 13:52:01,080 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:01,080 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:01,080 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:52:01,080 - INFO     - 
================================================================================
2025-10-29 13:52:01,080 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:52:01,080 - INFO     - ================================================================================
2025-10-29 13:52:01,080 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:01,082 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:52:01,082 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:52:01,082 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:01,082 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:01,082 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:52:01,082 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:01,082 - INFO     -   - Raw f_after length: 8
2025-10-29 13:52:01,082 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:01,082 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:52:01,082 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:01,082 - INFO     -   - after_valid: 8 / 8 (removed 0)
2025-10-29 13:52:01,082 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:01,082 - INFO     -   - ts1_id: 9
2025-10-29 13:52:01,082 - INFO     -   - ts2_id: 0
2025-10-29 13:52:01,082 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:01,082 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:01,082 - INFO     -   - ts1_size: 4, ts2_size: 2
2025-10-29 13:52:01,082 - INFO     -   - Product space size: 8
2025-10-29 13:52:01,082 - INFO     -   - Using product state mapping
2025-10-29 13:52:01,082 - INFO     -   - f_before_product length: 8
2025-10-29 13:52:01,082 - INFO     -   - avg_f_before: 1.1250 (8 valid states)
2025-10-29 13:52:01,082 - INFO     -   - avg_f_after:  1.5000 (8 valid states)
2025-10-29 13:52:01,082 - INFO     -   - delta: 0.3750
2025-10-29 13:52:01,084 - INFO     -   - f_stability: 1.0 - |0.3750| / 1.1250 = 0.6667
2025-10-29 13:52:01,084 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:01,084 - INFO     -   - Compared 6 values
2025-10-29 13:52:01,084 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:01,084 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:01,084 - INFO     -   - states_before: 8
2025-10-29 13:52:01,084 - INFO     -   - states_after: 8
2025-10-29 13:52:01,084 - INFO     -   - delta_states: 0
2025-10-29 13:52:01,085 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:01,085 - INFO     -   - ts1_transitions: 20
2025-10-29 13:52:01,085 - INFO     -   - ts2_transitions: 5
2025-10-29 13:52:01,085 - INFO     -   - merged_transitions: 68
2025-10-29 13:52:01,085 - INFO     -   - transition_density_change: 5.3750
2025-10-29 13:52:01,085 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:01,089 - INFO     -   - search_signals present: True
2025-10-29 13:52:01,089 - INFO     -   - nodes_expanded: 8
2025-10-29 13:52:01,089 - INFO     -   - search_depth: 0
2025-10-29 13:52:01,089 - INFO     -   - solution_cost: 0
2025-10-29 13:52:01,089 - INFO     -   - branching_factor: 8.5000
2025-10-29 13:52:01,089 - INFO     -   - solution_found: True
2025-10-29 13:52:01,089 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:01,089 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:01,089 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:52:01,089 - INFO     -   - TS9(4) + TS0(2) → 8 states
2025-10-29 13:52:01,089 - INFO     -   - f_stability=0.667
2025-10-29 13:52:01,089 - INFO     -   - A* nodes_expanded=8
2025-10-29 13:52:01,089 - INFO     -   - solution_found=True
2025-10-29 13:52:01,089 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:01,089 - INFO     - 
  Extracted signals:
2025-10-29 13:52:01,089 - INFO     -     - iteration: 1
2025-10-29 13:52:01,089 - INFO     -     - states_before: 8
2025-10-29 13:52:01,089 - INFO     -     - states_after: 8
2025-10-29 13:52:01,089 - INFO     -     - delta_states: 0
2025-10-29 13:52:01,089 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:52:01,089 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:01,089 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:01,089 - INFO     -     - nodes_expanded: 8
2025-10-29 13:52:01,089 - INFO     -     - search_depth: 0
2025-10-29 13:52:01,089 - INFO     -     - solution_cost: 0
2025-10-29 13:52:01,091 - INFO     -     - branching_factor: 8.5000
2025-10-29 13:52:01,091 - INFO     -     - solution_found: True
2025-10-29 13:52:01,091 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:01,091 - WARNING  -     ⚠️  High branching factor: 8.5000
2025-10-29 13:52:01,091 - INFO     - 
  Computing reward:
2025-10-29 13:52:01,091 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:01,091 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:01,091 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:01,091 - INFO     -   [1] BRANCHING FACTOR: 8.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:52:01,091 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:52:01,091 - INFO     -   [3] F-VALUE STABILITY: 0.572
2025-10-29 13:52:01,091 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:52:01,091 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:01,091 - INFO     - 
  [COMPOSITE]: 0.450
2025-10-29 13:52:01,091 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:52:01,091 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:52:01,091 - INFO     -     + 0.350*0.572 (stability)
2025-10-29 13:52:01,091 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:01,091 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:01,091 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:01,091 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:52:01,091 - INFO     - 
  [FINAL REWARD]: 0.3003
2025-10-29 13:52:01,091 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:01,091 - INFO     -     ✓ Reward computed: 0.3003
2025-10-29 13:52:01,091 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:01,091 - INFO     -     - bf_score                       0.1000
2025-10-29 13:52:01,091 - INFO     -     - depth_score                    0.5000
2025-10-29 13:52:01,091 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:01,091 - INFO     -     - f_stability                    0.5719
2025-10-29 13:52:01,091 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:52:01,091 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:01,091 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:01,091 - INFO     -     - composite                      0.4502
2025-10-29 13:52:01,105 - INFO     -     - total                          0.3003
2025-10-29 13:52:01,105 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:01,105 - INFO     -   Num remaining nodes: 7
2025-10-29 13:52:01,105 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:52:01,105 - INFO     -   Done: False
2025-10-29 13:52:01,105 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:01,105 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:01,105 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:01,105 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:01,105 - INFO     -     - num_nodes: 7
2025-10-29 13:52:01,105 - INFO     -     - num_edges: 30
2025-10-29 13:52:01,105 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:01,105 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:52:01,105 - INFO     -   After: current_merge_step = 2
2025-10-29 13:52:01,105 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:01,105 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:01,105 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:01,105 - INFO     -   ✓ Step logged
2025-10-29 13:52:01,105 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:01,105 - INFO     -   Returning:
2025-10-29 13:52:01,105 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:01,105 - INFO     -     - reward: 0.3003
2025-10-29 13:52:01,105 - INFO     -     - done: False
2025-10-29 13:52:01,105 - INFO     -     - truncated: False
2025-10-29 13:52:01,105 - INFO     -     - info: 19 keys
2025-10-29 13:52:01,108 - INFO     - ==========================================================================================

2025-10-29 13:52:01,113 - INFO     - 
==========================================================================================
2025-10-29 13:52:01,113 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:01,113 - INFO     - ==========================================================================================
2025-10-29 13:52:01,113 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:01,113 - INFO     -   Input action: 26 (type: int)
2025-10-29 13:52:01,113 - INFO     -   Available edges in graph: 30
2025-10-29 13:52:01,113 - INFO     -   Action index calculation:
2025-10-29 13:52:01,113 - INFO     -     - action % max(num_valid_edges, 1) = 26 % 30 = 26
2025-10-29 13:52:01,113 - INFO     -     - clamped to [0, 29]: 26
2025-10-29 13:52:01,113 - INFO     -   ✓ Extracted merge pair from edge 26: (10, 5)
2025-10-29 13:52:01,113 - INFO     -   ✓ Validation passed
2025-10-29 13:52:01,113 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:01,113 - INFO     -     - Total states before merge: 32
2025-10-29 13:52:01,113 - INFO     -     - Num nodes: 7
2025-10-29 13:52:01,113 - INFO     -     - Num edges: 30
2025-10-29 13:52:01,113 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:01,113 - INFO     -       - Node 10: 8 states
2025-10-29 13:52:01,113 - INFO     -       - Node 5: 5 states
2025-10-29 13:52:01,113 - INFO     -       - Expected product: 40 states
2025-10-29 13:52:01,113 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:01,120 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:52:01,120 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:01,121 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:52:01,221 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:01,221 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:01,221 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:52:01,221 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:01,221 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:01,221 - INFO     -   Calling graph_tracker.merge_nodes([10, 5])...
2025-10-29 13:52:01,221 - INFO     - Attempting merge of nodes 10 and 5...
2025-10-29 13:52:01,221 - INFO     - Successfully merged nodes into new node 11 with 40 states.
2025-10-29 13:52:01,221 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:01,221 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:01,221 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:52:01,221 - INFO     - 
================================================================================
2025-10-29 13:52:01,221 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:52:01,221 - INFO     - ================================================================================
2025-10-29 13:52:01,221 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:01,221 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:52:01,221 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:52:01,221 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:01,221 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:01,221 - INFO     -   - Raw ts1_f length: 8
2025-10-29 13:52:01,221 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:01,221 - INFO     -   - Raw f_after length: 40
2025-10-29 13:52:01,221 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:01,225 - INFO     -   - ts1_valid: 8 / 8 (removed 0)
2025-10-29 13:52:01,225 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:01,225 - INFO     -   - after_valid: 40 / 40 (removed 0)
2025-10-29 13:52:01,225 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:01,225 - INFO     -   - ts1_id: 10
2025-10-29 13:52:01,225 - INFO     -   - ts2_id: 5
2025-10-29 13:52:01,225 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:01,225 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:01,225 - INFO     -   - ts1_size: 8, ts2_size: 5
2025-10-29 13:52:01,225 - INFO     -   - Product space size: 40
2025-10-29 13:52:01,225 - INFO     -   - Using product state mapping
2025-10-29 13:52:01,225 - INFO     -   - f_before_product length: 40
2025-10-29 13:52:01,225 - INFO     -   - avg_f_before: 2.8750 (40 valid states)
2025-10-29 13:52:01,225 - INFO     -   - avg_f_after:  4.7750 (40 valid states)
2025-10-29 13:52:01,225 - INFO     -   - delta: 1.9000
2025-10-29 13:52:01,225 - INFO     -   - f_stability: 1.0 - |1.9000| / 2.8750 = 0.3391
2025-10-29 13:52:01,225 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:01,225 - INFO     -   - Compared 13 values
2025-10-29 13:52:01,225 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:01,225 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:01,225 - INFO     -   - states_before: 40
2025-10-29 13:52:01,225 - INFO     -   - states_after: 40
2025-10-29 13:52:01,225 - INFO     -   - delta_states: 0
2025-10-29 13:52:01,225 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:01,227 - INFO     -   - ts1_transitions: 68
2025-10-29 13:52:01,227 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:01,227 - INFO     -   - merged_transitions: 380
2025-10-29 13:52:01,227 - INFO     -   - transition_density_change: 7.4750
2025-10-29 13:52:01,227 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:01,235 - INFO     -   - search_signals present: True
2025-10-29 13:52:01,235 - INFO     -   - nodes_expanded: 40
2025-10-29 13:52:01,235 - INFO     -   - search_depth: 2
2025-10-29 13:52:01,235 - INFO     -   - solution_cost: 2
2025-10-29 13:52:01,235 - INFO     -   - branching_factor: 9.5000
2025-10-29 13:52:01,235 - INFO     -   - solution_found: True
2025-10-29 13:52:01,235 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:01,235 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:01,235 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:52:01,235 - INFO     -   - TS10(8) + TS5(5) → 40 states
2025-10-29 13:52:01,235 - INFO     -   - f_stability=0.339
2025-10-29 13:52:01,235 - INFO     -   - A* nodes_expanded=40
2025-10-29 13:52:01,235 - INFO     -   - solution_found=True
2025-10-29 13:52:01,235 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:01,237 - INFO     - 
  Extracted signals:
2025-10-29 13:52:01,237 - INFO     -     - iteration: 2
2025-10-29 13:52:01,237 - INFO     -     - states_before: 40
2025-10-29 13:52:01,237 - INFO     -     - states_after: 40
2025-10-29 13:52:01,237 - INFO     -     - delta_states: 0
2025-10-29 13:52:01,237 - INFO     -     - f_value_stability: 0.3391
2025-10-29 13:52:01,237 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:01,237 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:01,237 - INFO     -     - nodes_expanded: 40
2025-10-29 13:52:01,237 - INFO     -     - search_depth: 2
2025-10-29 13:52:01,237 - INFO     -     - solution_cost: 2
2025-10-29 13:52:01,237 - INFO     -     - branching_factor: 9.5000
2025-10-29 13:52:01,237 - INFO     -     - solution_found: True
2025-10-29 13:52:01,237 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:01,237 - WARNING  -     ⚠️  High branching factor: 9.5000
2025-10-29 13:52:01,237 - INFO     - 
  Computing reward:
2025-10-29 13:52:01,237 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:01,237 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:01,237 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:01,237 - INFO     -   [1] BRANCHING FACTOR: 9.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:52:01,237 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:52:01,237 - INFO     -   [3] F-VALUE STABILITY: 0.111
2025-10-29 13:52:01,237 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:01,237 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:01,237 - INFO     - 
  [COMPOSITE]: 0.361
2025-10-29 13:52:01,237 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:52:01,237 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:52:01,237 - INFO     -     + 0.350*0.111 (stability)
2025-10-29 13:52:01,237 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:01,237 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:01,237 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:01,237 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:01,237 - INFO     - 
  [FINAL REWARD]: -0.0784
2025-10-29 13:52:01,237 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:01,237 - INFO     -     ✓ Reward computed: -0.0784
2025-10-29 13:52:01,237 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:01,237 - INFO     -     - bf_score                       0.1000
2025-10-29 13:52:01,237 - INFO     -     - depth_score                    0.8603
2025-10-29 13:52:01,237 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:01,237 - INFO     -     - f_stability                    0.1107
2025-10-29 13:52:01,237 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:01,237 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:01,237 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:01,237 - INFO     -     - composite                      0.3608
2025-10-29 13:52:01,243 - INFO     -     - total                          -0.0784
2025-10-29 13:52:01,243 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:01,243 - INFO     -   Num remaining nodes: 6
2025-10-29 13:52:01,243 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:52:01,243 - INFO     -   Done: False
2025-10-29 13:52:01,243 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:01,243 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:01,243 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:01,243 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:01,243 - INFO     -     - num_nodes: 6
2025-10-29 13:52:01,243 - INFO     -     - num_edges: 24
2025-10-29 13:52:01,243 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:01,243 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:52:01,243 - INFO     -   After: current_merge_step = 3
2025-10-29 13:52:01,243 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:01,243 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:01,243 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:01,243 - INFO     -   ✓ Step logged
2025-10-29 13:52:01,243 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:01,243 - INFO     -   Returning:
2025-10-29 13:52:01,243 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:01,243 - INFO     -     - reward: -0.0784
2025-10-29 13:52:01,243 - INFO     -     - done: False
2025-10-29 13:52:01,243 - INFO     -     - truncated: False
2025-10-29 13:52:01,243 - INFO     -     - info: 19 keys
2025-10-29 13:52:01,243 - INFO     - ==========================================================================================

2025-10-29 13:52:01,252 - INFO     - 
==========================================================================================
2025-10-29 13:52:01,252 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:01,252 - INFO     - ==========================================================================================
2025-10-29 13:52:01,253 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:01,253 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:52:01,253 - INFO     -   Available edges in graph: 24
2025-10-29 13:52:01,253 - INFO     -   Action index calculation:
2025-10-29 13:52:01,253 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 24 = 0
2025-10-29 13:52:01,253 - INFO     -     - clamped to [0, 23]: 0
2025-10-29 13:52:01,253 - INFO     -   ✓ Extracted merge pair from edge 0: (3, 4)
2025-10-29 13:52:01,253 - INFO     -   ✓ Validation passed
2025-10-29 13:52:01,253 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:01,254 - INFO     -     - Total states before merge: 59
2025-10-29 13:52:01,254 - INFO     -     - Num nodes: 6
2025-10-29 13:52:01,254 - INFO     -     - Num edges: 24
2025-10-29 13:52:01,254 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:01,254 - INFO     -       - Node 3: 2 states
2025-10-29 13:52:01,254 - INFO     -       - Node 4: 2 states
2025-10-29 13:52:01,254 - INFO     -       - Expected product: 4 states
2025-10-29 13:52:01,254 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:01,254 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:52:01,254 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:01,254 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:52:01,360 - INFO     -   ✓ ACK received after 0.11s
2025-10-29 13:52:01,360 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:01,360 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:52:01,361 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:01,361 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:01,361 - INFO     -   Calling graph_tracker.merge_nodes([3, 4])...
2025-10-29 13:52:01,361 - INFO     - Attempting merge of nodes 3 and 4...
2025-10-29 13:52:01,361 - INFO     - Successfully merged nodes into new node 12 with 4 states.
2025-10-29 13:52:01,361 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:01,361 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:01,361 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:52:01,361 - INFO     - 
================================================================================
2025-10-29 13:52:01,361 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:52:01,361 - INFO     - ================================================================================
2025-10-29 13:52:01,362 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:01,362 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:52:01,362 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:52:01,362 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:01,362 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:01,362 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:01,362 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:01,362 - INFO     -   - Raw f_after length: 4
2025-10-29 13:52:01,362 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:01,362 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:01,362 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:01,362 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:52:01,362 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:01,362 - INFO     -   - ts1_id: 3
2025-10-29 13:52:01,362 - INFO     -   - ts2_id: 4
2025-10-29 13:52:01,362 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:01,362 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:01,362 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:52:01,362 - INFO     -   - Product space size: 4
2025-10-29 13:52:01,362 - INFO     -   - Using product state mapping
2025-10-29 13:52:01,362 - INFO     -   - f_before_product length: 4
2025-10-29 13:52:01,362 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:52:01,362 - INFO     -   - avg_f_after:  0.7500 (4 valid states)
2025-10-29 13:52:01,362 - INFO     -   - delta: 0.0000
2025-10-29 13:52:01,362 - INFO     -   - f_stability: 1.0 - |0.0000| / 0.7500 = 1.0000
2025-10-29 13:52:01,362 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:01,362 - INFO     -   - Compared 4 values
2025-10-29 13:52:01,362 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:01,362 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:01,362 - INFO     -   - states_before: 4
2025-10-29 13:52:01,362 - INFO     -   - states_after: 4
2025-10-29 13:52:01,364 - INFO     -   - delta_states: 0
2025-10-29 13:52:01,364 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:01,364 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:01,364 - INFO     -   - ts2_transitions: 3
2025-10-29 13:52:01,364 - INFO     -   - merged_transitions: 15
2025-10-29 13:52:01,364 - INFO     -   - transition_density_change: 1.7500
2025-10-29 13:52:01,364 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:01,364 - INFO     -   - search_signals present: True
2025-10-29 13:52:01,364 - INFO     -   - nodes_expanded: 4
2025-10-29 13:52:01,364 - INFO     -   - search_depth: 0
2025-10-29 13:52:01,364 - INFO     -   - solution_cost: 0
2025-10-29 13:52:01,364 - INFO     -   - branching_factor: 3.7500
2025-10-29 13:52:01,364 - INFO     -   - solution_found: True
2025-10-29 13:52:01,364 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:01,364 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:01,364 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:52:01,364 - INFO     -   - TS3(2) + TS4(2) → 4 states
2025-10-29 13:52:01,364 - INFO     -   - f_stability=1.000
2025-10-29 13:52:01,364 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:52:01,364 - INFO     -   - solution_found=True
2025-10-29 13:52:01,366 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:01,366 - INFO     - 
  Extracted signals:
2025-10-29 13:52:01,366 - INFO     -     - iteration: 3
2025-10-29 13:52:01,366 - INFO     -     - states_before: 4
2025-10-29 13:52:01,366 - INFO     -     - states_after: 4
2025-10-29 13:52:01,366 - INFO     -     - delta_states: 0
2025-10-29 13:52:01,366 - INFO     -     - f_value_stability: 1.0000
2025-10-29 13:52:01,366 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:01,366 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:01,366 - INFO     -     - nodes_expanded: 4
2025-10-29 13:52:01,366 - INFO     -     - search_depth: 0
2025-10-29 13:52:01,366 - INFO     -     - solution_cost: 0
2025-10-29 13:52:01,366 - INFO     -     - branching_factor: 3.7500
2025-10-29 13:52:01,366 - INFO     -     - solution_found: True
2025-10-29 13:52:01,366 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:01,366 - INFO     - 
  Computing reward:
2025-10-29 13:52:01,366 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:01,366 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:01,366 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:01,366 - INFO     -   [1] BRANCHING FACTOR: 3.750 → score 0.600 (tolerable)
2025-10-29 13:52:01,366 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:52:01,366 - INFO     -   [3] F-VALUE STABILITY: 0.260
2025-10-29 13:52:01,366 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:01,366 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:01,366 - INFO     - 
  [COMPOSITE]: 0.491
2025-10-29 13:52:01,366 - INFO     -     = 0.300*0.600 (bf)
2025-10-29 13:52:01,366 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:52:01,366 - INFO     -     + 0.350*0.260 (stability)
2025-10-29 13:52:01,366 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:01,366 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:01,366 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:01,366 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:01,366 - INFO     - 
  [FINAL REWARD]: 0.1819
2025-10-29 13:52:01,366 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:01,366 - INFO     -     ✓ Reward computed: 0.1819
2025-10-29 13:52:01,366 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:01,366 - INFO     -     - bf_score                       0.6000
2025-10-29 13:52:01,366 - INFO     -     - depth_score                    0.5000
2025-10-29 13:52:01,366 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:01,366 - INFO     -     - f_stability                    0.2598
2025-10-29 13:52:01,366 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:01,380 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:01,380 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:01,380 - INFO     -     - composite                      0.4909
2025-10-29 13:52:01,380 - INFO     -     - total                          0.1819
2025-10-29 13:52:01,380 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:01,380 - INFO     -   Num remaining nodes: 5
2025-10-29 13:52:01,380 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:52:01,380 - INFO     -   Done: False
2025-10-29 13:52:01,380 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:01,380 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:01,380 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:01,380 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:01,380 - INFO     -     - num_nodes: 5
2025-10-29 13:52:01,380 - INFO     -     - num_edges: 14
2025-10-29 13:52:01,380 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:01,380 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:52:01,380 - INFO     -   After: current_merge_step = 4
2025-10-29 13:52:01,380 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:01,380 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:01,380 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:01,380 - INFO     -   ✓ Step logged
2025-10-29 13:52:01,380 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:01,380 - INFO     -   Returning:
2025-10-29 13:52:01,380 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:01,380 - INFO     -     - reward: 0.1819
2025-10-29 13:52:01,380 - INFO     -     - done: False
2025-10-29 13:52:01,380 - INFO     -     - truncated: False
2025-10-29 13:52:01,380 - INFO     -     - info: 19 keys
2025-10-29 13:52:01,380 - INFO     - ==========================================================================================

2025-10-29 13:52:01,389 - INFO     - 
==========================================================================================
2025-10-29 13:52:01,389 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:01,389 - INFO     - ==========================================================================================
2025-10-29 13:52:01,389 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:01,389 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:52:01,389 - INFO     -   Available edges in graph: 14
2025-10-29 13:52:01,389 - INFO     -   Action index calculation:
2025-10-29 13:52:01,389 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 14 = 1
2025-10-29 13:52:01,389 - INFO     -     - clamped to [0, 13]: 1
2025-10-29 13:52:01,389 - INFO     -   ✓ Extracted merge pair from edge 1: (6, 12)
2025-10-29 13:52:01,389 - INFO     -   ✓ Validation passed
2025-10-29 13:52:01,389 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:01,389 - INFO     -     - Total states before merge: 59
2025-10-29 13:52:01,389 - INFO     -     - Num nodes: 5
2025-10-29 13:52:01,389 - INFO     -     - Num edges: 14
2025-10-29 13:52:01,389 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:01,389 - INFO     -       - Node 6: 5 states
2025-10-29 13:52:01,389 - INFO     -       - Node 12: 4 states
2025-10-29 13:52:01,389 - INFO     -       - Expected product: 20 states
2025-10-29 13:52:01,389 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:01,396 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:52:01,396 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:01,396 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:52:01,497 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:01,497 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:01,497 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:52:01,497 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:01,497 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:01,497 - INFO     -   Calling graph_tracker.merge_nodes([6, 12])...
2025-10-29 13:52:01,497 - INFO     - Attempting merge of nodes 6 and 12...
2025-10-29 13:52:01,497 - INFO     - Successfully merged nodes into new node 13 with 20 states.
2025-10-29 13:52:01,497 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:01,497 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:01,497 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:52:01,497 - INFO     - 
================================================================================
2025-10-29 13:52:01,497 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:52:01,497 - INFO     - ================================================================================
2025-10-29 13:52:01,497 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:01,497 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:52:01,497 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:52:01,497 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:01,497 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:01,497 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:01,497 - INFO     -   - Raw ts2_f length: 4
2025-10-29 13:52:01,497 - INFO     -   - Raw f_after length: 20
2025-10-29 13:52:01,497 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:01,497 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:01,497 - INFO     -   - ts2_valid: 4 / 4 (removed -4)
2025-10-29 13:52:01,497 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:52:01,497 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:01,497 - INFO     -   - ts1_id: 6
2025-10-29 13:52:01,497 - INFO     -   - ts2_id: 12
2025-10-29 13:52:01,497 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:01,497 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:01,497 - INFO     -   - ts1_size: 5, ts2_size: 4
2025-10-29 13:52:01,497 - INFO     -   - Product space size: 20
2025-10-29 13:52:01,497 - INFO     -   - Using product state mapping
2025-10-29 13:52:01,501 - INFO     -   - f_before_product length: 20
2025-10-29 13:52:01,501 - INFO     -   - avg_f_before: 2.9500 (20 valid states)
2025-10-29 13:52:01,501 - INFO     -   - avg_f_after:  3.8500 (20 valid states)
2025-10-29 13:52:01,501 - INFO     -   - delta: 0.9000
2025-10-29 13:52:01,501 - INFO     -   - f_stability: 1.0 - |0.9000| / 2.9500 = 0.6949
2025-10-29 13:52:01,501 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:01,501 - INFO     -   - Compared 9 values
2025-10-29 13:52:01,501 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:52:01,501 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:01,501 - INFO     -   - states_before: 20
2025-10-29 13:52:01,501 - INFO     -   - states_after: 20
2025-10-29 13:52:01,501 - INFO     -   - delta_states: 0
2025-10-29 13:52:01,501 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:01,501 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:01,501 - INFO     -   - ts2_transitions: 15
2025-10-29 13:52:01,501 - INFO     -   - merged_transitions: 97
2025-10-29 13:52:01,501 - INFO     -   - transition_density_change: 3.4500
2025-10-29 13:52:01,501 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:01,501 - INFO     -   - search_signals present: True
2025-10-29 13:52:01,501 - INFO     -   - nodes_expanded: 20
2025-10-29 13:52:01,501 - INFO     -   - search_depth: 2
2025-10-29 13:52:01,501 - INFO     -   - solution_cost: 0
2025-10-29 13:52:01,501 - INFO     -   - branching_factor: 4.8500
2025-10-29 13:52:01,501 - INFO     -   - solution_found: True
2025-10-29 13:52:01,501 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:01,501 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:01,501 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:52:01,501 - INFO     -   - TS6(5) + TS12(4) → 20 states
2025-10-29 13:52:01,501 - INFO     -   - f_stability=0.695
2025-10-29 13:52:01,501 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:52:01,501 - INFO     -   - solution_found=True
2025-10-29 13:52:01,501 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:01,501 - INFO     - 
  Extracted signals:
2025-10-29 13:52:01,501 - INFO     -     - iteration: 4
2025-10-29 13:52:01,501 - INFO     -     - states_before: 20
2025-10-29 13:52:01,501 - INFO     -     - states_after: 20
2025-10-29 13:52:01,501 - INFO     -     - delta_states: 0
2025-10-29 13:52:01,501 - INFO     -     - f_value_stability: 0.6949
2025-10-29 13:52:01,501 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:52:01,501 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:01,504 - INFO     -     - nodes_expanded: 20
2025-10-29 13:52:01,504 - INFO     -     - search_depth: 2
2025-10-29 13:52:01,504 - INFO     -     - solution_cost: 0
2025-10-29 13:52:01,504 - INFO     -     - branching_factor: 4.8500
2025-10-29 13:52:01,504 - INFO     -     - solution_found: True
2025-10-29 13:52:01,504 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:01,504 - INFO     - 
  Computing reward:
2025-10-29 13:52:01,504 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:01,504 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:01,504 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:01,504 - INFO     -   [1] BRANCHING FACTOR: 4.850 → score 0.453 (tolerable)
2025-10-29 13:52:01,506 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:52:01,506 - INFO     -   [3] F-VALUE STABILITY: 0.232
2025-10-29 13:52:01,506 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:01,506 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:01,506 - INFO     - 
  [COMPOSITE]: 0.509
2025-10-29 13:52:01,506 - INFO     -     = 0.300*0.453 (bf)
2025-10-29 13:52:01,506 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:52:01,506 - INFO     -     + 0.350*0.232 (stability)
2025-10-29 13:52:01,506 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:01,509 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:01,509 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:01,509 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:01,509 - INFO     - 
  [FINAL REWARD]: 0.2185
2025-10-29 13:52:01,510 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:01,510 - INFO     -     ✓ Reward computed: 0.2185
2025-10-29 13:52:01,510 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:01,510 - INFO     -     - bf_score                       0.4533
2025-10-29 13:52:01,510 - INFO     -     - depth_score                    0.8603
2025-10-29 13:52:01,510 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:01,510 - INFO     -     - f_stability                    0.2320
2025-10-29 13:52:01,510 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:01,510 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:01,510 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:01,510 - INFO     -     - composite                      0.5092
2025-10-29 13:52:01,510 - INFO     -     - total                          0.2185
2025-10-29 13:52:01,510 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:01,510 - INFO     -   Num remaining nodes: 4
2025-10-29 13:52:01,510 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:52:01,510 - INFO     -   Done: False
2025-10-29 13:52:01,510 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:01,512 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:01,512 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:01,512 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:01,512 - INFO     -     - num_nodes: 4
2025-10-29 13:52:01,512 - INFO     -     - num_edges: 10
2025-10-29 13:52:01,512 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:01,512 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:52:01,512 - INFO     -   After: current_merge_step = 5
2025-10-29 13:52:01,512 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:01,512 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:01,514 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:01,514 - INFO     -   ✓ Step logged
2025-10-29 13:52:01,514 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:01,514 - INFO     -   Returning:
2025-10-29 13:52:01,514 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:01,514 - INFO     -     - reward: 0.2185
2025-10-29 13:52:01,514 - INFO     -     - done: False
2025-10-29 13:52:01,514 - INFO     -     - truncated: False
2025-10-29 13:52:01,514 - INFO     -     - info: 19 keys
2025-10-29 13:52:01,514 - INFO     - ==========================================================================================

2025-10-29 13:52:01,519 - INFO     - 
==========================================================================================
2025-10-29 13:52:01,519 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:01,519 - INFO     - ==========================================================================================
2025-10-29 13:52:01,519 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:01,519 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:52:01,519 - INFO     -   Available edges in graph: 10
2025-10-29 13:52:01,519 - INFO     -   Action index calculation:
2025-10-29 13:52:01,519 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 10 = 3
2025-10-29 13:52:01,519 - INFO     -     - clamped to [0, 9]: 3
2025-10-29 13:52:01,519 - INFO     -   ✓ Extracted merge pair from edge 3: (8, 13)
2025-10-29 13:52:01,519 - INFO     -   ✓ Validation passed
2025-10-29 13:52:01,519 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:01,519 - INFO     -     - Total states before merge: 70
2025-10-29 13:52:01,519 - INFO     -     - Num nodes: 4
2025-10-29 13:52:01,519 - INFO     -     - Num edges: 10
2025-10-29 13:52:01,519 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:01,519 - INFO     -       - Node 8: 5 states
2025-10-29 13:52:01,519 - INFO     -       - Node 13: 20 states
2025-10-29 13:52:01,519 - INFO     -       - Expected product: 100 states
2025-10-29 13:52:01,519 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:01,530 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:52:01,530 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:01,530 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:52:01,631 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:01,631 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:01,631 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:52:01,631 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:01,631 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:01,631 - INFO     -   Calling graph_tracker.merge_nodes([8, 13])...
2025-10-29 13:52:01,631 - INFO     - Attempting merge of nodes 8 and 13...
2025-10-29 13:52:01,631 - INFO     - Successfully merged nodes into new node 14 with 100 states.
2025-10-29 13:52:01,631 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:01,631 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:01,631 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:52:01,631 - INFO     - 
================================================================================
2025-10-29 13:52:01,631 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:52:01,631 - INFO     - ================================================================================
2025-10-29 13:52:01,631 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:01,631 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:52:01,631 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:52:01,631 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:01,631 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:01,631 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:01,631 - INFO     -   - Raw ts2_f length: 20
2025-10-29 13:52:01,631 - INFO     -   - Raw f_after length: 100
2025-10-29 13:52:01,631 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:01,631 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:01,631 - INFO     -   - ts2_valid: 20 / 20 (removed -20)
2025-10-29 13:52:01,631 - INFO     -   - after_valid: 100 / 100 (removed 0)
2025-10-29 13:52:01,631 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:01,631 - INFO     -   - ts1_id: 8
2025-10-29 13:52:01,631 - INFO     -   - ts2_id: 13
2025-10-29 13:52:01,631 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:01,631 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:01,631 - INFO     -   - ts1_size: 5, ts2_size: 20
2025-10-29 13:52:01,631 - INFO     -   - Product space size: 100
2025-10-29 13:52:01,631 - INFO     -   - Using product state mapping
2025-10-29 13:52:01,631 - INFO     -   - f_before_product length: 100
2025-10-29 13:52:01,631 - INFO     -   - avg_f_before: 4.4400 (100 valid states)
2025-10-29 13:52:01,631 - INFO     -   - avg_f_after:  7.5300 (100 valid states)
2025-10-29 13:52:01,631 - INFO     -   - delta: 3.0900
2025-10-29 13:52:01,631 - INFO     -   - f_stability: 1.0 - |3.0900| / 4.4400 = 0.3041
2025-10-29 13:52:01,631 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:01,631 - INFO     -   - Compared 25 values
2025-10-29 13:52:01,631 - INFO     -   - Significant changes (> 5.0): 8
2025-10-29 13:52:01,631 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:01,637 - INFO     -   - states_before: 100
2025-10-29 13:52:01,637 - INFO     -   - states_after: 100
2025-10-29 13:52:01,637 - INFO     -   - delta_states: 0
2025-10-29 13:52:01,637 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:01,637 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:01,637 - INFO     -   - ts2_transitions: 97
2025-10-29 13:52:01,637 - INFO     -   - merged_transitions: 460
2025-10-29 13:52:01,637 - INFO     -   - transition_density_change: 3.5000
2025-10-29 13:52:01,637 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:01,640 - INFO     -   - search_signals present: True
2025-10-29 13:52:01,640 - INFO     -   - nodes_expanded: 100
2025-10-29 13:52:01,640 - INFO     -   - search_depth: 4
2025-10-29 13:52:01,640 - INFO     -   - solution_cost: 0
2025-10-29 13:52:01,640 - INFO     -   - branching_factor: 4.6000
2025-10-29 13:52:01,640 - INFO     -   - solution_found: True
2025-10-29 13:52:01,640 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:01,640 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:01,640 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:52:01,640 - INFO     -   - TS8(5) + TS13(20) → 100 states
2025-10-29 13:52:01,640 - INFO     -   - f_stability=0.304
2025-10-29 13:52:01,640 - INFO     -   - A* nodes_expanded=100
2025-10-29 13:52:01,640 - INFO     -   - solution_found=True
2025-10-29 13:52:01,640 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:01,640 - INFO     - 
  Extracted signals:
2025-10-29 13:52:01,640 - INFO     -     - iteration: 5
2025-10-29 13:52:01,640 - INFO     -     - states_before: 100
2025-10-29 13:52:01,640 - INFO     -     - states_after: 100
2025-10-29 13:52:01,640 - INFO     -     - delta_states: 0
2025-10-29 13:52:01,640 - INFO     -     - f_value_stability: 0.3041
2025-10-29 13:52:01,640 - INFO     -     - num_significant_f_changes: 8
2025-10-29 13:52:01,640 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:01,640 - INFO     -     - nodes_expanded: 100
2025-10-29 13:52:01,640 - INFO     -     - search_depth: 4
2025-10-29 13:52:01,640 - INFO     -     - solution_cost: 0
2025-10-29 13:52:01,640 - INFO     -     - branching_factor: 4.6000
2025-10-29 13:52:01,640 - INFO     -     - solution_found: True
2025-10-29 13:52:01,640 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:01,640 - INFO     - 
  Computing reward:
2025-10-29 13:52:01,640 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:01,640 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:01,640 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:01,640 - INFO     -   [1] BRANCHING FACTOR: 4.600 → score 0.487 (tolerable)
2025-10-29 13:52:01,640 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:52:01,640 - INFO     -   [3] F-VALUE STABILITY: 0.149
2025-10-29 13:52:01,640 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:01,640 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:01,640 - INFO     - 
  [COMPOSITE]: 0.477
2025-10-29 13:52:01,640 - INFO     -     = 0.300*0.487 (bf)
2025-10-29 13:52:01,640 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:52:01,640 - INFO     -     + 0.350*0.149 (stability)
2025-10-29 13:52:01,640 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:01,640 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:01,640 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:01,640 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:01,640 - INFO     - 
  [FINAL REWARD]: 0.1542
2025-10-29 13:52:01,640 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:01,640 - INFO     -     ✓ Reward computed: 0.1542
2025-10-29 13:52:01,640 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:01,640 - INFO     -     - bf_score                       0.4867
2025-10-29 13:52:01,640 - INFO     -     - depth_score                    0.7953
2025-10-29 13:52:01,640 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:01,640 - INFO     -     - f_stability                    0.1487
2025-10-29 13:52:01,640 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:01,640 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:01,640 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:01,640 - INFO     -     - composite                      0.4771
2025-10-29 13:52:01,640 - INFO     -     - total                          0.1542
2025-10-29 13:52:01,648 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:01,648 - INFO     -   Num remaining nodes: 3
2025-10-29 13:52:01,648 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:52:01,649 - INFO     -   Done: False
2025-10-29 13:52:01,649 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:01,649 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:01,649 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:01,649 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:01,649 - INFO     -     - num_nodes: 3
2025-10-29 13:52:01,649 - INFO     -     - num_edges: 6
2025-10-29 13:52:01,649 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:01,650 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:52:01,650 - INFO     -   After: current_merge_step = 6
2025-10-29 13:52:01,650 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:01,650 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:01,650 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:01,650 - INFO     -   ✓ Step logged
2025-10-29 13:52:01,650 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:01,650 - INFO     -   Returning:
2025-10-29 13:52:01,650 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:01,650 - INFO     -     - reward: 0.1542
2025-10-29 13:52:01,650 - INFO     -     - done: False
2025-10-29 13:52:01,650 - INFO     -     - truncated: False
2025-10-29 13:52:01,650 - INFO     -     - info: 19 keys
2025-10-29 13:52:01,650 - INFO     - ==========================================================================================

2025-10-29 13:52:01,656 - INFO     - 
==========================================================================================
2025-10-29 13:52:01,656 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:01,656 - INFO     - ==========================================================================================
2025-10-29 13:52:01,656 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:01,656 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:52:01,656 - INFO     -   Available edges in graph: 6
2025-10-29 13:52:01,656 - INFO     -   Action index calculation:
2025-10-29 13:52:01,656 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 6 = 3
2025-10-29 13:52:01,656 - INFO     -     - clamped to [0, 5]: 3
2025-10-29 13:52:01,658 - INFO     -   ✓ Extracted merge pair from edge 3: (11, 14)
2025-10-29 13:52:01,658 - INFO     -   ✓ Validation passed
2025-10-29 13:52:01,658 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:01,658 - INFO     -     - Total states before merge: 145
2025-10-29 13:52:01,658 - INFO     -     - Num nodes: 3
2025-10-29 13:52:01,658 - INFO     -     - Num edges: 6
2025-10-29 13:52:01,658 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:01,658 - INFO     -       - Node 11: 40 states
2025-10-29 13:52:01,658 - INFO     -       - Node 14: 100 states
2025-10-29 13:52:01,658 - INFO     -       - Expected product: 4000 states
2025-10-29 13:52:01,658 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:01,664 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:52:01,664 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:01,664 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:52:01,766 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:01,766 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:01,766 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:52:01,986 - INFO     -   ✓ TS file received after 0.22s
2025-10-29 13:52:01,986 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:01,987 - INFO     -   Calling graph_tracker.merge_nodes([11, 14])...
2025-10-29 13:52:01,987 - INFO     - Attempting merge of nodes 11 and 14...
2025-10-29 13:52:01,987 - INFO     - Successfully merged nodes into new node 15 with 4000 states.
2025-10-29 13:52:01,987 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:01,987 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:01,987 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:52:01,987 - INFO     - 
================================================================================
2025-10-29 13:52:01,987 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:52:01,987 - INFO     - ================================================================================
2025-10-29 13:52:01,987 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:01,987 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:52:01,987 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:52:01,991 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:01,991 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:01,991 - INFO     -   - Raw ts1_f length: 40
2025-10-29 13:52:01,991 - INFO     -   - Raw ts2_f length: 100
2025-10-29 13:52:01,991 - INFO     -   - Raw f_after length: 4000
2025-10-29 13:52:01,991 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:01,991 - INFO     -   - ts1_valid: 40 / 40 (removed 0)
2025-10-29 13:52:01,991 - INFO     -   - ts2_valid: 100 / 100 (removed -100)
2025-10-29 13:52:01,993 - INFO     -   - after_valid: 2984 / 4000 (removed 1016)
2025-10-29 13:52:01,993 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:01,993 - INFO     -   - ts1_id: 11
2025-10-29 13:52:01,993 - INFO     -   - ts2_id: 14
2025-10-29 13:52:01,993 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:01,993 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:01,993 - INFO     -   - ts1_size: 40, ts2_size: 100
2025-10-29 13:52:01,993 - INFO     -   - Product space size: 4000
2025-10-29 13:52:01,993 - INFO     -   - Using product state mapping
2025-10-29 13:52:02,001 - INFO     -   - f_before_product length: 4000
2025-10-29 13:52:02,009 - INFO     -   - avg_f_before: 7.9767 (4000 valid states)
2025-10-29 13:52:02,009 - INFO     -   - avg_f_after:  13.0416 (2984 valid states)
2025-10-29 13:52:02,009 - INFO     -   - delta: 5.0648
2025-10-29 13:52:02,009 - INFO     -   - f_stability: 1.0 - |5.0648| / 7.9767 = 0.3651
2025-10-29 13:52:02,010 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:02,010 - INFO     -   - Compared 140 values
2025-10-29 13:52:02,010 - INFO     -   - Significant changes (> 5.0): 83
2025-10-29 13:52:02,010 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:02,010 - INFO     -   - states_before: 4000
2025-10-29 13:52:02,010 - INFO     -   - states_after: 4000
2025-10-29 13:52:02,010 - INFO     -   - delta_states: 0
2025-10-29 13:52:02,010 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:02,010 - INFO     -   - ts1_transitions: 380
2025-10-29 13:52:02,010 - INFO     -   - ts2_transitions: 460
2025-10-29 13:52:02,010 - INFO     -   - merged_transitions: 22400
2025-10-29 13:52:02,010 - INFO     -   - transition_density_change: 5.3900
2025-10-29 13:52:02,010 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:02,010 - INFO     -   - search_signals present: True
2025-10-29 13:52:02,010 - INFO     -   - nodes_expanded: 2984
2025-10-29 13:52:02,010 - INFO     -   - search_depth: 6
2025-10-29 13:52:02,010 - INFO     -   - solution_cost: 2
2025-10-29 13:52:02,011 - INFO     -   - branching_factor: 7.5067
2025-10-29 13:52:02,011 - INFO     -   - solution_found: True
2025-10-29 13:52:02,011 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:02,013 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:02,013 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:52:02,013 - INFO     -   - TS11(40) + TS14(100) → 4000 states
2025-10-29 13:52:02,014 - INFO     -   - f_stability=0.365
2025-10-29 13:52:02,014 - INFO     -   - A* nodes_expanded=2984
2025-10-29 13:52:02,014 - INFO     -   - solution_found=True
2025-10-29 13:52:02,014 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:02,014 - INFO     - 
  Extracted signals:
2025-10-29 13:52:02,014 - INFO     -     - iteration: 6
2025-10-29 13:52:02,015 - INFO     -     - states_before: 4000
2025-10-29 13:52:02,015 - INFO     -     - states_after: 4000
2025-10-29 13:52:02,015 - INFO     -     - delta_states: 0
2025-10-29 13:52:02,015 - INFO     -     - f_value_stability: 0.3651
2025-10-29 13:52:02,015 - INFO     -     - num_significant_f_changes: 83
2025-10-29 13:52:02,015 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:02,015 - INFO     -     - nodes_expanded: 2984
2025-10-29 13:52:02,015 - INFO     -     - search_depth: 6
2025-10-29 13:52:02,015 - INFO     -     - solution_cost: 2
2025-10-29 13:52:02,015 - INFO     -     - branching_factor: 7.5067
2025-10-29 13:52:02,016 - INFO     -     - solution_found: True
2025-10-29 13:52:02,016 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:02,016 - INFO     - 
  Computing reward:
2025-10-29 13:52:02,017 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:02,017 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:02,017 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:02,017 - INFO     -   [1] BRANCHING FACTOR: 7.507 → score 0.149 (high BF, minimal credit)
2025-10-29 13:52:02,017 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:52:02,018 - INFO     -   [3] F-VALUE STABILITY: 0.348
2025-10-29 13:52:02,018 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:52:02,018 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:02,019 - INFO     - 
  [COMPOSITE]: 0.437
2025-10-29 13:52:02,019 - INFO     -     = 0.300*0.149 (bf)
2025-10-29 13:52:02,019 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:52:02,019 - INFO     -     + 0.350*0.348 (stability)
2025-10-29 13:52:02,019 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:02,019 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:02,019 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:02,019 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:52:02,019 - INFO     - 
  [FINAL REWARD]: 0.1745
2025-10-29 13:52:02,019 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:02,019 - INFO     -     ✓ Reward computed: 0.1745
2025-10-29 13:52:02,019 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:02,019 - INFO     -     - bf_score                       0.1493
2025-10-29 13:52:02,019 - INFO     -     - depth_score                    0.7525
2025-10-29 13:52:02,019 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:02,021 - INFO     -     - f_stability                    0.3484
2025-10-29 13:52:02,021 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:52:02,021 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:02,021 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:02,021 - INFO     -     - composite                      0.4373
2025-10-29 13:52:02,021 - INFO     -     - total                          0.1745
2025-10-29 13:52:02,021 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:02,021 - INFO     -   Num remaining nodes: 2
2025-10-29 13:52:02,021 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:52:02,021 - INFO     -   Done: False
2025-10-29 13:52:02,021 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:02,021 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:02,022 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:02,022 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:02,022 - INFO     -     - num_nodes: 2
2025-10-29 13:52:02,022 - INFO     -     - num_edges: 2
2025-10-29 13:52:02,022 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:02,022 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:52:02,022 - INFO     -   After: current_merge_step = 7
2025-10-29 13:52:02,022 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:02,022 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:02,022 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:02,023 - INFO     -   ✓ Step logged
2025-10-29 13:52:02,023 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:02,023 - INFO     -   Returning:
2025-10-29 13:52:02,023 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:02,023 - INFO     -     - reward: 0.1745
2025-10-29 13:52:02,023 - INFO     -     - done: False
2025-10-29 13:52:02,023 - INFO     -     - truncated: False
2025-10-29 13:52:02,023 - INFO     -     - info: 19 keys
2025-10-29 13:52:02,023 - INFO     - ==========================================================================================

2025-10-29 13:52:02,030 - INFO     - 
==========================================================================================
2025-10-29 13:52:02,030 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:02,030 - INFO     - ==========================================================================================
2025-10-29 13:52:02,030 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:02,030 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:52:02,030 - INFO     -   Available edges in graph: 2
2025-10-29 13:52:02,030 - INFO     -   Action index calculation:
2025-10-29 13:52:02,030 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 2 = 1
2025-10-29 13:52:02,031 - INFO     -     - clamped to [0, 1]: 1
2025-10-29 13:52:02,031 - INFO     -   ✓ Extracted merge pair from edge 1: (15, 7)
2025-10-29 13:52:02,031 - INFO     -   ✓ Validation passed
2025-10-29 13:52:02,031 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:02,031 - INFO     -     - Total states before merge: 4005
2025-10-29 13:52:02,031 - INFO     -     - Num nodes: 2
2025-10-29 13:52:02,031 - INFO     -     - Num edges: 2
2025-10-29 13:52:02,031 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:02,031 - INFO     -       - Node 15: 4000 states
2025-10-29 13:52:02,031 - INFO     -       - Node 7: 5 states
2025-10-29 13:52:02,031 - INFO     -       - Expected product: 20000 states
2025-10-29 13:52:02,031 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:02,037 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:52:02,038 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:02,038 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:52:02,138 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:02,138 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:02,138 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:52:02,395 - INFO     -   ✓ TS file received after 0.26s
2025-10-29 13:52:02,396 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:02,396 - INFO     -   Calling graph_tracker.merge_nodes([15, 7])...
2025-10-29 13:52:02,396 - INFO     - Attempting merge of nodes 15 and 7...
2025-10-29 13:52:02,396 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:52:02,397 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:02,397 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:02,397 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:52:02,397 - INFO     - 
================================================================================
2025-10-29 13:52:02,397 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:52:02,406 - INFO     - ================================================================================
2025-10-29 13:52:02,406 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:02,406 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:52:02,406 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:52:02,415 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:02,417 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:02,417 - INFO     -   - Raw ts1_f length: 791
2025-10-29 13:52:02,417 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:02,417 - INFO     -   - Raw f_after length: 3955
2025-10-29 13:52:02,417 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:02,418 - INFO     -   - ts1_valid: 791 / 791 (removed 0)
2025-10-29 13:52:02,418 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:02,421 - INFO     -   - after_valid: 3030 / 3955 (removed 925)
2025-10-29 13:52:02,421 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:02,421 - INFO     -   - ts1_id: 15
2025-10-29 13:52:02,421 - INFO     -   - ts2_id: 7
2025-10-29 13:52:02,421 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:02,421 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:02,421 - INFO     -   - ts1_size: 791, ts2_size: 5
2025-10-29 13:52:02,422 - INFO     -   - Product space size: 3955
2025-10-29 13:52:02,422 - INFO     -   - Using product state mapping
2025-10-29 13:52:02,432 - INFO     -   - f_before_product length: 3955
2025-10-29 13:52:02,449 - INFO     -   - avg_f_before: 9.3740 (3955 valid states)
2025-10-29 13:52:02,449 - INFO     -   - avg_f_after:  14.0122 (3030 valid states)
2025-10-29 13:52:02,449 - INFO     -   - delta: 4.6383
2025-10-29 13:52:02,449 - INFO     -   - f_stability: 1.0 - |4.6383| / 9.3740 = 0.5052
2025-10-29 13:52:02,449 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:02,450 - INFO     -   - Compared 796 values
2025-10-29 13:52:02,450 - INFO     -   - Significant changes (> 5.0): 92
2025-10-29 13:52:02,450 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:02,450 - INFO     -   - states_before: 3955
2025-10-29 13:52:02,450 - INFO     -   - states_after: 3955
2025-10-29 13:52:02,451 - INFO     -   - delta_states: 0
2025-10-29 13:52:02,451 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:02,451 - INFO     -   - ts1_transitions: 7520
2025-10-29 13:52:02,451 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:02,451 - INFO     -   - merged_transitions: 21984
2025-10-29 13:52:02,451 - INFO     -   - transition_density_change: 3.6539
2025-10-29 13:52:02,451 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:02,451 - INFO     -   - search_signals present: True
2025-10-29 13:52:02,451 - INFO     -   - nodes_expanded: 3030
2025-10-29 13:52:02,451 - INFO     -   - search_depth: 7
2025-10-29 13:52:02,451 - INFO     -   - solution_cost: 4
2025-10-29 13:52:02,453 - INFO     -   - branching_factor: 7.2554
2025-10-29 13:52:02,453 - INFO     -   - solution_found: True
2025-10-29 13:52:02,453 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:02,457 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:02,457 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:52:02,457 - INFO     -   - TS15(791) + TS7(5) → 3955 states
2025-10-29 13:52:02,457 - INFO     -   - f_stability=0.505
2025-10-29 13:52:02,457 - INFO     -   - A* nodes_expanded=3030
2025-10-29 13:52:02,457 - INFO     -   - solution_found=True
2025-10-29 13:52:02,458 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:02,458 - INFO     - 
  Extracted signals:
2025-10-29 13:52:02,459 - INFO     -     - iteration: 7
2025-10-29 13:52:02,459 - INFO     -     - states_before: 3955
2025-10-29 13:52:02,459 - INFO     -     - states_after: 3955
2025-10-29 13:52:02,459 - INFO     -     - delta_states: 0
2025-10-29 13:52:02,459 - INFO     -     - f_value_stability: 0.5052
2025-10-29 13:52:02,459 - INFO     -     - num_significant_f_changes: 92
2025-10-29 13:52:02,459 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:02,459 - INFO     -     - nodes_expanded: 3030
2025-10-29 13:52:02,460 - INFO     -     - search_depth: 7
2025-10-29 13:52:02,460 - INFO     -     - solution_cost: 4
2025-10-29 13:52:02,460 - INFO     -     - branching_factor: 7.2554
2025-10-29 13:52:02,460 - INFO     -     - solution_found: True
2025-10-29 13:52:02,460 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:02,462 - INFO     - 
  Computing reward:
2025-10-29 13:52:02,463 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:02,463 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:02,463 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:02,463 - INFO     -   [1] BRANCHING FACTOR: 7.255 → score 0.174 (high BF, minimal credit)
2025-10-29 13:52:02,463 - INFO     -   [2] SOLUTION QUALITY: depth=7 → score 0.736 + bonus 0.300
2025-10-29 13:52:02,467 - INFO     -   [3] F-VALUE STABILITY: 0.628
2025-10-29 13:52:02,468 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:52:02,468 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:02,468 - INFO     - 
  [COMPOSITE]: 0.539
2025-10-29 13:52:02,468 - INFO     -     = 0.300*0.174 (bf)
2025-10-29 13:52:02,468 - INFO     -     + 0.200*0.736 (depth)
2025-10-29 13:52:02,468 - INFO     -     + 0.350*0.628 (stability)
2025-10-29 13:52:02,468 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:02,468 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:02,469 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:02,469 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:52:02,470 - INFO     - 
  [FINAL REWARD]: 0.4782
2025-10-29 13:52:02,471 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:02,471 - INFO     -     ✓ Reward computed: 0.4782
2025-10-29 13:52:02,471 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:02,471 - INFO     -     - bf_score                       0.1745
2025-10-29 13:52:02,471 - INFO     -     - depth_score                    0.7356
2025-10-29 13:52:02,471 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:02,471 - INFO     -     - f_stability                    0.6275
2025-10-29 13:52:02,471 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:52:02,472 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:02,472 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:02,472 - INFO     -     - composite                      0.5391
2025-10-29 13:52:02,472 - INFO     -     - total                          0.4782
2025-10-29 13:52:02,472 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:02,472 - INFO     -   Num remaining nodes: 1
2025-10-29 13:52:02,472 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:52:02,472 - INFO     -   Done: True
2025-10-29 13:52:02,473 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:52:02,473 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:02,473 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:02,473 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:02,474 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:02,474 - INFO     -     - num_nodes: 1
2025-10-29 13:52:02,474 - INFO     -     - num_edges: 0
2025-10-29 13:52:02,474 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:02,474 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:52:02,474 - INFO     -   After: current_merge_step = 8
2025-10-29 13:52:02,474 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:02,474 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:02,475 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:02,475 - INFO     -   ✓ Step logged
2025-10-29 13:52:02,475 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:02,475 - INFO     -   Returning:
2025-10-29 13:52:02,475 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:02,475 - INFO     -     - reward: 0.4782
2025-10-29 13:52:02,475 - INFO     -     - done: True
2025-10-29 13:52:02,476 - INFO     -     - truncated: False
2025-10-29 13:52:02,476 - INFO     -     - info: 19 keys
2025-10-29 13:52:02,476 - INFO     - ==========================================================================================

2025-10-29 13:52:02,552 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:52:02,559 - INFO     - [Handshake] Building FD command:
2025-10-29 13:52:02,560 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:52:02,560 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_01.pddl
2025-10-29 13:52:02,560 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:52:02,564 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:52:03,317 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:52:03,317 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:52:03,318 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:52:03,637 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:52:03,638 - INFO     - Initializing GraphTracker...
2025-10-29 13:52:03,638 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:52:03,639 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:52:03,639 - INFO     -    → Node 0 has 2 states
2025-10-29 13:52:03,639 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:52:03,639 - INFO     -    → Node 1 has 2 states
2025-10-29 13:52:03,639 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:52:03,639 - INFO     -    → Node 2 has 2 states
2025-10-29 13:52:03,639 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:52:03,639 - INFO     -    → Node 3 has 2 states
2025-10-29 13:52:03,639 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:52:03,639 - INFO     -    → Node 4 has 2 states
2025-10-29 13:52:03,639 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:52:03,639 - INFO     -    → Node 5 has 5 states
2025-10-29 13:52:03,639 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:52:03,639 - INFO     -    → Node 6 has 5 states
2025-10-29 13:52:03,639 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:52:03,641 - INFO     -    → Node 7 has 5 states
2025-10-29 13:52:03,641 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:52:03,641 - INFO     -    → Node 8 has 5 states
2025-10-29 13:52:03,641 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:52:03,641 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:52:03,642 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:52:03,643 - INFO     - Added edge (0, 1)
2025-10-29 13:52:03,643 - INFO     - Added edge (0, 2)
2025-10-29 13:52:03,643 - INFO     - Added edge (0, 3)
2025-10-29 13:52:03,643 - INFO     - Added edge (0, 4)
2025-10-29 13:52:03,643 - INFO     - Added edge (0, 5)
2025-10-29 13:52:03,643 - INFO     - Added edge (0, 6)
2025-10-29 13:52:03,643 - INFO     - Added edge (0, 7)
2025-10-29 13:52:03,643 - INFO     - Added edge (0, 8)
2025-10-29 13:52:03,643 - INFO     - Added edge (1, 0)
2025-10-29 13:52:03,643 - INFO     - Added edge (1, 2)
2025-10-29 13:52:03,643 - INFO     - Added edge (1, 3)
2025-10-29 13:52:03,643 - INFO     - Added edge (1, 4)
2025-10-29 13:52:03,644 - INFO     - Added edge (1, 5)
2025-10-29 13:52:03,644 - INFO     - Added edge (1, 6)
2025-10-29 13:52:03,644 - INFO     - Added edge (1, 7)
2025-10-29 13:52:03,644 - INFO     - Added edge (1, 8)
2025-10-29 13:52:03,644 - INFO     - Added edge (2, 0)
2025-10-29 13:52:03,644 - INFO     - Added edge (2, 1)
2025-10-29 13:52:03,644 - INFO     - Added edge (2, 3)
2025-10-29 13:52:03,644 - INFO     - Added edge (2, 4)
2025-10-29 13:52:03,644 - INFO     - Added edge (2, 5)
2025-10-29 13:52:03,644 - INFO     - Added edge (2, 6)
2025-10-29 13:52:03,644 - INFO     - Added edge (2, 7)
2025-10-29 13:52:03,644 - INFO     - Added edge (2, 8)
2025-10-29 13:52:03,644 - INFO     - Added edge (3, 0)
2025-10-29 13:52:03,644 - INFO     - Added edge (3, 1)
2025-10-29 13:52:03,644 - INFO     - Added edge (3, 2)
2025-10-29 13:52:03,644 - INFO     - Added edge (3, 4)
2025-10-29 13:52:03,645 - INFO     - Added edge (3, 5)
2025-10-29 13:52:03,645 - INFO     - Added edge (3, 6)
2025-10-29 13:52:03,645 - INFO     - Added edge (3, 7)
2025-10-29 13:52:03,645 - INFO     - Added edge (3, 8)
2025-10-29 13:52:03,645 - INFO     - Added edge (4, 0)
2025-10-29 13:52:03,645 - INFO     - Added edge (4, 1)
2025-10-29 13:52:03,645 - INFO     - Added edge (4, 2)
2025-10-29 13:52:03,645 - INFO     - Added edge (4, 3)
2025-10-29 13:52:03,645 - INFO     - Added edge (4, 5)
2025-10-29 13:52:03,645 - INFO     - Added edge (4, 6)
2025-10-29 13:52:03,645 - INFO     - Added edge (4, 7)
2025-10-29 13:52:03,645 - INFO     - Added edge (4, 8)
2025-10-29 13:52:03,645 - INFO     - Added edge (5, 0)
2025-10-29 13:52:03,645 - INFO     - Added edge (5, 1)
2025-10-29 13:52:03,645 - INFO     - Added edge (5, 2)
2025-10-29 13:52:03,645 - INFO     - Added edge (5, 3)
2025-10-29 13:52:03,646 - INFO     - Added edge (5, 4)
2025-10-29 13:52:03,646 - INFO     - Added edge (6, 0)
2025-10-29 13:52:03,646 - INFO     - Added edge (6, 1)
2025-10-29 13:52:03,646 - INFO     - Added edge (6, 2)
2025-10-29 13:52:03,646 - INFO     - Added edge (6, 3)
2025-10-29 13:52:03,646 - INFO     - Added edge (6, 4)
2025-10-29 13:52:03,646 - INFO     - Added edge (7, 0)
2025-10-29 13:52:03,646 - INFO     - Added edge (7, 1)
2025-10-29 13:52:03,646 - INFO     - Added edge (7, 2)
2025-10-29 13:52:03,646 - INFO     - Added edge (7, 3)
2025-10-29 13:52:03,646 - INFO     - Added edge (7, 4)
2025-10-29 13:52:03,646 - INFO     - Added edge (8, 0)
2025-10-29 13:52:03,647 - INFO     - Added edge (8, 1)
2025-10-29 13:52:03,647 - INFO     - Added edge (8, 2)
2025-10-29 13:52:03,647 - INFO     - Added edge (8, 3)
2025-10-29 13:52:03,647 - INFO     - Added edge (8, 4)
2025-10-29 13:52:03,647 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:52:03,702 - INFO     - 
==========================================================================================
2025-10-29 13:52:03,702 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:03,702 - INFO     - ==========================================================================================
2025-10-29 13:52:03,702 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:03,702 - INFO     -   Input action: 29 (type: int)
2025-10-29 13:52:03,702 - INFO     -   Available edges in graph: 60
2025-10-29 13:52:03,702 - INFO     -   Action index calculation:
2025-10-29 13:52:03,702 - INFO     -     - action % max(num_valid_edges, 1) = 29 % 60 = 29
2025-10-29 13:52:03,702 - INFO     -     - clamped to [0, 59]: 29
2025-10-29 13:52:03,702 - INFO     -   ✓ Extracted merge pair from edge 29: (3, 6)
2025-10-29 13:52:03,703 - INFO     -   ✓ Validation passed
2025-10-29 13:52:03,703 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:03,703 - INFO     -     - Total states before merge: 30
2025-10-29 13:52:03,703 - INFO     -     - Num nodes: 9
2025-10-29 13:52:03,703 - INFO     -     - Num edges: 60
2025-10-29 13:52:03,703 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:03,703 - INFO     -       - Node 3: 2 states
2025-10-29 13:52:03,704 - INFO     -       - Node 6: 5 states
2025-10-29 13:52:03,704 - INFO     -       - Expected product: 10 states
2025-10-29 13:52:03,704 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:03,734 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:52:03,734 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:03,734 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:52:03,902 - INFO     -   ✓ ACK received after 0.17s
2025-10-29 13:52:03,902 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:03,902 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:52:03,903 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:03,903 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:03,903 - INFO     -   Calling graph_tracker.merge_nodes([3, 6])...
2025-10-29 13:52:03,903 - INFO     - Attempting merge of nodes 3 and 6...
2025-10-29 13:52:03,905 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:52:03,905 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:03,905 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:03,906 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:52:03,907 - INFO     - 
================================================================================
2025-10-29 13:52:03,907 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:52:03,912 - INFO     - ================================================================================
2025-10-29 13:52:03,912 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:03,912 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:52:03,913 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:52:03,913 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:03,913 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:03,914 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:03,914 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:03,914 - INFO     -   - Raw f_after length: 10
2025-10-29 13:52:03,914 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:03,914 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:03,914 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:03,914 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:52:03,914 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:03,915 - INFO     -   - ts1_id: 3
2025-10-29 13:52:03,915 - INFO     -   - ts2_id: 6
2025-10-29 13:52:03,915 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:03,915 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:03,915 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:52:03,915 - INFO     -   - Product space size: 10
2025-10-29 13:52:03,915 - INFO     -   - Using product state mapping
2025-10-29 13:52:03,915 - INFO     -   - f_before_product length: 10
2025-10-29 13:52:03,916 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:52:03,916 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:52:03,916 - INFO     -   - delta: 0.4000
2025-10-29 13:52:03,916 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:52:03,916 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:03,916 - INFO     -   - Compared 7 values
2025-10-29 13:52:03,917 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:03,917 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:03,917 - INFO     -   - states_before: 10
2025-10-29 13:52:03,917 - INFO     -   - states_after: 10
2025-10-29 13:52:03,918 - INFO     -   - delta_states: 0
2025-10-29 13:52:03,918 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:03,925 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:03,926 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:03,926 - INFO     -   - merged_transitions: 40
2025-10-29 13:52:03,926 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:52:03,926 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:03,926 - INFO     -   - search_signals present: True
2025-10-29 13:52:03,926 - INFO     -   - nodes_expanded: 10
2025-10-29 13:52:03,926 - INFO     -   - search_depth: 1
2025-10-29 13:52:03,926 - INFO     -   - solution_cost: 0
2025-10-29 13:52:03,927 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:52:03,927 - INFO     -   - solution_found: True
2025-10-29 13:52:03,927 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:03,927 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:03,927 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:52:03,927 - INFO     -   - TS3(2) + TS6(5) → 10 states
2025-10-29 13:52:03,927 - INFO     -   - f_stability=0.862
2025-10-29 13:52:03,927 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:52:03,927 - INFO     -   - solution_found=True
2025-10-29 13:52:03,929 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:03,929 - INFO     - 
  Extracted signals:
2025-10-29 13:52:03,930 - INFO     -     - iteration: 0
2025-10-29 13:52:03,930 - INFO     -     - states_before: 10
2025-10-29 13:52:03,930 - INFO     -     - states_after: 10
2025-10-29 13:52:03,930 - INFO     -     - delta_states: 0
2025-10-29 13:52:03,930 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:52:03,930 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:03,930 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:03,931 - INFO     -     - nodes_expanded: 10
2025-10-29 13:52:03,931 - INFO     -     - search_depth: 1
2025-10-29 13:52:03,931 - INFO     -     - solution_cost: 0
2025-10-29 13:52:03,935 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:52:03,935 - INFO     -     - solution_found: True
2025-10-29 13:52:03,935 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:03,936 - INFO     - 
  Computing reward:
2025-10-29 13:52:03,936 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:03,936 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:03,936 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:03,939 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:52:03,939 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:52:03,941 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:52:03,941 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:03,941 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:03,942 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:52:03,942 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:52:03,942 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:52:03,942 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:52:03,942 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:03,942 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:03,942 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:03,942 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:03,942 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:52:03,943 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:03,943 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:52:03,943 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:03,944 - INFO     -     - bf_score                       0.5667
2025-10-29 13:52:03,944 - INFO     -     - depth_score                    0.9119
2025-10-29 13:52:03,944 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:03,944 - INFO     -     - f_stability                    0.2913
2025-10-29 13:52:03,944 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:03,944 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:03,944 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:03,944 - INFO     -     - composite                      0.5743
2025-10-29 13:52:03,945 - INFO     -     - total                          0.3487
2025-10-29 13:52:03,945 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:03,945 - INFO     -   Num remaining nodes: 8
2025-10-29 13:52:03,945 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:52:03,945 - INFO     -   Done: False
2025-10-29 13:52:03,945 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:03,969 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:03,970 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:03,970 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:03,970 - INFO     -     - num_nodes: 8
2025-10-29 13:52:03,970 - INFO     -     - num_edges: 50
2025-10-29 13:52:03,970 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:03,970 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:52:03,970 - INFO     -   After: current_merge_step = 1
2025-10-29 13:52:03,970 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:03,971 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:03,971 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:03,972 - INFO     -   ✓ Step logged
2025-10-29 13:52:03,972 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:03,972 - INFO     -   Returning:
2025-10-29 13:52:03,972 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:03,973 - INFO     -     - reward: 0.3487
2025-10-29 13:52:03,973 - INFO     -     - done: False
2025-10-29 13:52:03,973 - INFO     -     - truncated: False
2025-10-29 13:52:03,973 - INFO     -     - info: 19 keys
2025-10-29 13:52:03,973 - INFO     - ==========================================================================================

2025-10-29 13:52:03,985 - INFO     - 
==========================================================================================
2025-10-29 13:52:03,985 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:03,985 - INFO     - ==========================================================================================
2025-10-29 13:52:03,985 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:03,985 - INFO     -   Input action: 13 (type: int)
2025-10-29 13:52:03,985 - INFO     -   Available edges in graph: 50
2025-10-29 13:52:03,985 - INFO     -   Action index calculation:
2025-10-29 13:52:03,985 - INFO     -     - action % max(num_valid_edges, 1) = 13 % 50 = 13
2025-10-29 13:52:03,985 - INFO     -     - clamped to [0, 49]: 13
2025-10-29 13:52:03,985 - INFO     -   ✓ Extracted merge pair from edge 13: (1, 9)
2025-10-29 13:52:03,986 - INFO     -   ✓ Validation passed
2025-10-29 13:52:03,986 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:03,986 - INFO     -     - Total states before merge: 33
2025-10-29 13:52:03,986 - INFO     -     - Num nodes: 8
2025-10-29 13:52:03,986 - INFO     -     - Num edges: 50
2025-10-29 13:52:03,986 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:03,986 - INFO     -       - Node 1: 2 states
2025-10-29 13:52:03,986 - INFO     -       - Node 9: 10 states
2025-10-29 13:52:03,986 - INFO     -       - Expected product: 20 states
2025-10-29 13:52:03,986 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:04,004 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:52:04,004 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:04,005 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:52:04,106 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:04,106 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:04,106 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:52:04,106 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:04,106 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:04,106 - INFO     -   Calling graph_tracker.merge_nodes([1, 9])...
2025-10-29 13:52:04,107 - INFO     - Attempting merge of nodes 1 and 9...
2025-10-29 13:52:04,107 - INFO     - Successfully merged nodes into new node 10 with 20 states.
2025-10-29 13:52:04,107 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:04,107 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:04,107 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:52:04,107 - INFO     - 
================================================================================
2025-10-29 13:52:04,107 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:52:04,107 - INFO     - ================================================================================
2025-10-29 13:52:04,107 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:04,107 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:52:04,107 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:52:04,109 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:04,109 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:04,109 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:04,109 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:52:04,109 - INFO     -   - Raw f_after length: 20
2025-10-29 13:52:04,109 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:04,109 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:04,109 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:52:04,110 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:52:04,110 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:04,110 - INFO     -   - ts1_id: 1
2025-10-29 13:52:04,110 - INFO     -   - ts2_id: 9
2025-10-29 13:52:04,110 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:04,110 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:04,110 - INFO     -   - ts1_size: 2, ts2_size: 10
2025-10-29 13:52:04,110 - INFO     -   - Product space size: 20
2025-10-29 13:52:04,110 - INFO     -   - Using product state mapping
2025-10-29 13:52:04,110 - INFO     -   - f_before_product length: 20
2025-10-29 13:52:04,110 - INFO     -   - avg_f_before: 3.3500 (20 valid states)
2025-10-29 13:52:04,110 - INFO     -   - avg_f_after:  4.0000 (20 valid states)
2025-10-29 13:52:04,110 - INFO     -   - delta: 0.6500
2025-10-29 13:52:04,110 - INFO     -   - f_stability: 1.0 - |0.6500| / 3.3500 = 0.8060
2025-10-29 13:52:04,110 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:04,111 - INFO     -   - Compared 12 values
2025-10-29 13:52:04,111 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:04,111 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:04,111 - INFO     -   - states_before: 20
2025-10-29 13:52:04,111 - INFO     -   - states_after: 20
2025-10-29 13:52:04,111 - INFO     -   - delta_states: 0
2025-10-29 13:52:04,111 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:04,111 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:04,111 - INFO     -   - ts2_transitions: 40
2025-10-29 13:52:04,111 - INFO     -   - merged_transitions: 122
2025-10-29 13:52:04,111 - INFO     -   - transition_density_change: 3.8500
2025-10-29 13:52:04,112 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:04,112 - INFO     -   - search_signals present: True
2025-10-29 13:52:04,112 - INFO     -   - nodes_expanded: 20
2025-10-29 13:52:04,112 - INFO     -   - search_depth: 2
2025-10-29 13:52:04,112 - INFO     -   - solution_cost: 0
2025-10-29 13:52:04,112 - INFO     -   - branching_factor: 6.1000
2025-10-29 13:52:04,112 - INFO     -   - solution_found: True
2025-10-29 13:52:04,112 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:04,112 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:04,112 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:52:04,113 - INFO     -   - TS1(2) + TS9(10) → 20 states
2025-10-29 13:52:04,113 - INFO     -   - f_stability=0.806
2025-10-29 13:52:04,113 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:52:04,113 - INFO     -   - solution_found=True
2025-10-29 13:52:04,113 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:04,113 - INFO     - 
  Extracted signals:
2025-10-29 13:52:04,113 - INFO     -     - iteration: 1
2025-10-29 13:52:04,113 - INFO     -     - states_before: 20
2025-10-29 13:52:04,113 - INFO     -     - states_after: 20
2025-10-29 13:52:04,113 - INFO     -     - delta_states: 0
2025-10-29 13:52:04,114 - INFO     -     - f_value_stability: 0.8060
2025-10-29 13:52:04,114 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:04,114 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:04,114 - INFO     -     - nodes_expanded: 20
2025-10-29 13:52:04,114 - INFO     -     - search_depth: 2
2025-10-29 13:52:04,114 - INFO     -     - solution_cost: 0
2025-10-29 13:52:04,114 - INFO     -     - branching_factor: 6.1000
2025-10-29 13:52:04,114 - INFO     -     - solution_found: True
2025-10-29 13:52:04,114 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:04,114 - INFO     - 
  Computing reward:
2025-10-29 13:52:04,114 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:04,114 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:04,115 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:04,115 - INFO     -   [1] BRANCHING FACTOR: 6.100 → score 0.290 (high BF, minimal credit)
2025-10-29 13:52:04,115 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:52:04,115 - INFO     -   [3] F-VALUE STABILITY: 0.874
2025-10-29 13:52:04,115 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:52:04,115 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:04,116 - INFO     - 
  [COMPOSITE]: 0.685
2025-10-29 13:52:04,116 - INFO     -     = 0.300*0.290 (bf)
2025-10-29 13:52:04,116 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:52:04,116 - INFO     -     + 0.350*0.874 (stability)
2025-10-29 13:52:04,116 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:04,116 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:04,116 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:04,116 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:52:04,116 - INFO     - 
  [FINAL REWARD]: 0.8699
2025-10-29 13:52:04,116 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:04,116 - INFO     -     ✓ Reward computed: 0.8699
2025-10-29 13:52:04,117 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:04,117 - INFO     -     - bf_score                       0.2900
2025-10-29 13:52:04,117 - INFO     -     - depth_score                    0.8603
2025-10-29 13:52:04,117 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:04,117 - INFO     -     - f_stability                    0.8740
2025-10-29 13:52:04,117 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:52:04,117 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:04,117 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:04,117 - INFO     -     - composite                      0.6850
2025-10-29 13:52:04,117 - INFO     -     - total                          0.8699
2025-10-29 13:52:04,117 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:04,117 - INFO     -   Num remaining nodes: 7
2025-10-29 13:52:04,118 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:52:04,118 - INFO     -   Done: False
2025-10-29 13:52:04,118 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:04,120 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:04,120 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:04,123 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:04,123 - INFO     -     - num_nodes: 7
2025-10-29 13:52:04,123 - INFO     -     - num_edges: 36
2025-10-29 13:52:04,123 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:04,123 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:52:04,123 - INFO     -   After: current_merge_step = 2
2025-10-29 13:52:04,124 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:04,124 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:04,124 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:04,125 - INFO     -   ✓ Step logged
2025-10-29 13:52:04,125 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:04,125 - INFO     -   Returning:
2025-10-29 13:52:04,125 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:04,125 - INFO     -     - reward: 0.8699
2025-10-29 13:52:04,125 - INFO     -     - done: False
2025-10-29 13:52:04,125 - INFO     -     - truncated: False
2025-10-29 13:52:04,125 - INFO     -     - info: 19 keys
2025-10-29 13:52:04,125 - INFO     - ==========================================================================================

2025-10-29 13:52:04,130 - INFO     - 
==========================================================================================
2025-10-29 13:52:04,130 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:04,130 - INFO     - ==========================================================================================
2025-10-29 13:52:04,131 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:04,131 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:52:04,131 - INFO     -   Available edges in graph: 36
2025-10-29 13:52:04,131 - INFO     -   Action index calculation:
2025-10-29 13:52:04,131 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 36 = 1
2025-10-29 13:52:04,131 - INFO     -     - clamped to [0, 35]: 1
2025-10-29 13:52:04,131 - INFO     -   ✓ Extracted merge pair from edge 1: (0, 4)
2025-10-29 13:52:04,131 - INFO     -   ✓ Validation passed
2025-10-29 13:52:04,131 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:04,131 - INFO     -     - Total states before merge: 41
2025-10-29 13:52:04,131 - INFO     -     - Num nodes: 7
2025-10-29 13:52:04,131 - INFO     -     - Num edges: 36
2025-10-29 13:52:04,131 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:04,131 - INFO     -       - Node 0: 2 states
2025-10-29 13:52:04,131 - INFO     -       - Node 4: 2 states
2025-10-29 13:52:04,132 - INFO     -       - Expected product: 4 states
2025-10-29 13:52:04,132 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:04,139 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:52:04,139 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:04,139 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:52:04,241 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:04,241 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:04,242 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:52:04,242 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:04,242 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:04,242 - INFO     -   Calling graph_tracker.merge_nodes([0, 4])...
2025-10-29 13:52:04,242 - INFO     - Attempting merge of nodes 0 and 4...
2025-10-29 13:52:04,242 - INFO     - Successfully merged nodes into new node 11 with 4 states.
2025-10-29 13:52:04,243 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:04,243 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:04,243 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:52:04,243 - INFO     - 
================================================================================
2025-10-29 13:52:04,243 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:52:04,243 - INFO     - ================================================================================
2025-10-29 13:52:04,243 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:04,243 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:52:04,243 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:52:04,244 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:04,244 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:04,244 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:04,244 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:04,244 - INFO     -   - Raw f_after length: 4
2025-10-29 13:52:04,244 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:04,245 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:04,245 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:04,245 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:52:04,245 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:04,245 - INFO     -   - ts1_id: 0
2025-10-29 13:52:04,245 - INFO     -   - ts2_id: 4
2025-10-29 13:52:04,245 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:04,245 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:04,245 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:52:04,245 - INFO     -   - Product space size: 4
2025-10-29 13:52:04,245 - INFO     -   - Using product state mapping
2025-10-29 13:52:04,246 - INFO     -   - f_before_product length: 4
2025-10-29 13:52:04,246 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:52:04,246 - INFO     -   - avg_f_after:  0.7500 (4 valid states)
2025-10-29 13:52:04,246 - INFO     -   - delta: 0.0000
2025-10-29 13:52:04,246 - INFO     -   - f_stability: 1.0 - |0.0000| / 0.7500 = 1.0000
2025-10-29 13:52:04,246 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:04,246 - INFO     -   - Compared 4 values
2025-10-29 13:52:04,247 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:04,249 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:04,249 - INFO     -   - states_before: 4
2025-10-29 13:52:04,249 - INFO     -   - states_after: 4
2025-10-29 13:52:04,249 - INFO     -   - delta_states: 0
2025-10-29 13:52:04,249 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:04,249 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:04,249 - INFO     -   - ts2_transitions: 3
2025-10-29 13:52:04,251 - INFO     -   - merged_transitions: 15
2025-10-29 13:52:04,251 - INFO     -   - transition_density_change: 1.7500
2025-10-29 13:52:04,251 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:04,251 - INFO     -   - search_signals present: True
2025-10-29 13:52:04,251 - INFO     -   - nodes_expanded: 4
2025-10-29 13:52:04,252 - INFO     -   - search_depth: 0
2025-10-29 13:52:04,252 - INFO     -   - solution_cost: 0
2025-10-29 13:52:04,253 - INFO     -   - branching_factor: 3.7500
2025-10-29 13:52:04,253 - INFO     -   - solution_found: True
2025-10-29 13:52:04,253 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:04,254 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:04,254 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:52:04,254 - INFO     -   - TS0(2) + TS4(2) → 4 states
2025-10-29 13:52:04,254 - INFO     -   - f_stability=1.000
2025-10-29 13:52:04,254 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:52:04,254 - INFO     -   - solution_found=True
2025-10-29 13:52:04,254 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:04,254 - INFO     - 
  Extracted signals:
2025-10-29 13:52:04,255 - INFO     -     - iteration: 2
2025-10-29 13:52:04,255 - INFO     -     - states_before: 4
2025-10-29 13:52:04,255 - INFO     -     - states_after: 4
2025-10-29 13:52:04,255 - INFO     -     - delta_states: 0
2025-10-29 13:52:04,255 - INFO     -     - f_value_stability: 1.0000
2025-10-29 13:52:04,255 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:04,255 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:04,255 - INFO     -     - nodes_expanded: 4
2025-10-29 13:52:04,255 - INFO     -     - search_depth: 0
2025-10-29 13:52:04,255 - INFO     -     - solution_cost: 0
2025-10-29 13:52:04,255 - INFO     -     - branching_factor: 3.7500
2025-10-29 13:52:04,256 - INFO     -     - solution_found: True
2025-10-29 13:52:04,256 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:04,256 - INFO     - 
  Computing reward:
2025-10-29 13:52:04,256 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:04,256 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:04,256 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:04,256 - INFO     -   [1] BRANCHING FACTOR: 3.750 → score 0.600 (tolerable)
2025-10-29 13:52:04,256 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:52:04,257 - INFO     -   [3] F-VALUE STABILITY: 0.260
2025-10-29 13:52:04,257 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:04,257 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:04,257 - INFO     - 
  [COMPOSITE]: 0.491
2025-10-29 13:52:04,257 - INFO     -     = 0.300*0.600 (bf)
2025-10-29 13:52:04,257 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:52:04,258 - INFO     -     + 0.350*0.260 (stability)
2025-10-29 13:52:04,258 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:04,258 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:04,258 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:04,258 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:04,258 - INFO     - 
  [FINAL REWARD]: 0.1819
2025-10-29 13:52:04,258 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:04,258 - INFO     -     ✓ Reward computed: 0.1819
2025-10-29 13:52:04,258 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:04,258 - INFO     -     - bf_score                       0.6000
2025-10-29 13:52:04,258 - INFO     -     - depth_score                    0.5000
2025-10-29 13:52:04,259 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:04,259 - INFO     -     - f_stability                    0.2598
2025-10-29 13:52:04,259 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:04,259 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:04,263 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:04,263 - INFO     -     - composite                      0.4909
2025-10-29 13:52:04,263 - INFO     -     - total                          0.1819
2025-10-29 13:52:04,263 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:04,263 - INFO     -   Num remaining nodes: 6
2025-10-29 13:52:04,263 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:52:04,263 - INFO     -   Done: False
2025-10-29 13:52:04,263 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:04,266 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:04,266 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:04,266 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:04,266 - INFO     -     - num_nodes: 6
2025-10-29 13:52:04,267 - INFO     -     - num_edges: 24
2025-10-29 13:52:04,267 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:04,267 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:52:04,267 - INFO     -   After: current_merge_step = 3
2025-10-29 13:52:04,267 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:04,267 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:04,267 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:04,270 - INFO     -   ✓ Step logged
2025-10-29 13:52:04,270 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:04,270 - INFO     -   Returning:
2025-10-29 13:52:04,270 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:04,271 - INFO     -     - reward: 0.1819
2025-10-29 13:52:04,271 - INFO     -     - done: False
2025-10-29 13:52:04,271 - INFO     -     - truncated: False
2025-10-29 13:52:04,271 - INFO     -     - info: 19 keys
2025-10-29 13:52:04,271 - INFO     - ==========================================================================================

2025-10-29 13:52:04,275 - INFO     - 
==========================================================================================
2025-10-29 13:52:04,277 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:04,277 - INFO     - ==========================================================================================
2025-10-29 13:52:04,277 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:04,277 - INFO     -   Input action: 21 (type: int)
2025-10-29 13:52:04,277 - INFO     -   Available edges in graph: 24
2025-10-29 13:52:04,277 - INFO     -   Action index calculation:
2025-10-29 13:52:04,277 - INFO     -     - action % max(num_valid_edges, 1) = 21 % 24 = 21
2025-10-29 13:52:04,277 - INFO     -     - clamped to [0, 23]: 21
2025-10-29 13:52:04,278 - INFO     -   ✓ Extracted merge pair from edge 21: (11, 7)
2025-10-29 13:52:04,278 - INFO     -   ✓ Validation passed
2025-10-29 13:52:04,278 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:04,278 - INFO     -     - Total states before merge: 41
2025-10-29 13:52:04,278 - INFO     -     - Num nodes: 6
2025-10-29 13:52:04,278 - INFO     -     - Num edges: 24
2025-10-29 13:52:04,278 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:04,278 - INFO     -       - Node 11: 4 states
2025-10-29 13:52:04,278 - INFO     -       - Node 7: 5 states
2025-10-29 13:52:04,278 - INFO     -       - Expected product: 20 states
2025-10-29 13:52:04,278 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:04,327 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:52:04,328 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:04,328 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:52:04,441 - INFO     -   ✓ ACK received after 0.11s
2025-10-29 13:52:04,441 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:04,441 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:52:04,448 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:52:04,448 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:04,448 - INFO     -   Calling graph_tracker.merge_nodes([11, 7])...
2025-10-29 13:52:04,448 - INFO     - Attempting merge of nodes 11 and 7...
2025-10-29 13:52:04,449 - INFO     - Successfully merged nodes into new node 12 with 20 states.
2025-10-29 13:52:04,449 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:04,449 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:04,449 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:52:04,449 - INFO     - 
================================================================================
2025-10-29 13:52:04,449 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:52:04,449 - INFO     - ================================================================================
2025-10-29 13:52:04,449 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:04,449 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:52:04,449 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:52:04,450 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:04,450 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:04,450 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:52:04,450 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:04,450 - INFO     -   - Raw f_after length: 20
2025-10-29 13:52:04,450 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:04,450 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:52:04,450 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:04,450 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:52:04,450 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:04,450 - INFO     -   - ts1_id: 11
2025-10-29 13:52:04,450 - INFO     -   - ts2_id: 7
2025-10-29 13:52:04,450 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:04,451 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:04,451 - INFO     -   - ts1_size: 4, ts2_size: 5
2025-10-29 13:52:04,451 - INFO     -   - Product space size: 20
2025-10-29 13:52:04,451 - INFO     -   - Using product state mapping
2025-10-29 13:52:04,451 - INFO     -   - f_before_product length: 20
2025-10-29 13:52:04,451 - INFO     -   - avg_f_before: 2.8000 (20 valid states)
2025-10-29 13:52:04,451 - INFO     -   - avg_f_after:  3.8500 (20 valid states)
2025-10-29 13:52:04,451 - INFO     -   - delta: 1.0500
2025-10-29 13:52:04,451 - INFO     -   - f_stability: 1.0 - |1.0500| / 2.8000 = 0.6250
2025-10-29 13:52:04,451 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:04,452 - INFO     -   - Compared 9 values
2025-10-29 13:52:04,452 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:04,452 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:04,452 - INFO     -   - states_before: 20
2025-10-29 13:52:04,452 - INFO     -   - states_after: 20
2025-10-29 13:52:04,452 - INFO     -   - delta_states: 0
2025-10-29 13:52:04,452 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:04,452 - INFO     -   - ts1_transitions: 15
2025-10-29 13:52:04,452 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:04,452 - INFO     -   - merged_transitions: 97
2025-10-29 13:52:04,452 - INFO     -   - transition_density_change: 3.4500
2025-10-29 13:52:04,452 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:04,452 - INFO     -   - search_signals present: True
2025-10-29 13:52:04,452 - INFO     -   - nodes_expanded: 20
2025-10-29 13:52:04,452 - INFO     -   - search_depth: 2
2025-10-29 13:52:04,453 - INFO     -   - solution_cost: 2
2025-10-29 13:52:04,453 - INFO     -   - branching_factor: 4.8500
2025-10-29 13:52:04,453 - INFO     -   - solution_found: True
2025-10-29 13:52:04,453 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:04,453 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:04,453 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:52:04,453 - INFO     -   - TS11(4) + TS7(5) → 20 states
2025-10-29 13:52:04,453 - INFO     -   - f_stability=0.625
2025-10-29 13:52:04,453 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:52:04,453 - INFO     -   - solution_found=True
2025-10-29 13:52:04,453 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:04,453 - INFO     - 
  Extracted signals:
2025-10-29 13:52:04,453 - INFO     -     - iteration: 3
2025-10-29 13:52:04,454 - INFO     -     - states_before: 20
2025-10-29 13:52:04,454 - INFO     -     - states_after: 20
2025-10-29 13:52:04,454 - INFO     -     - delta_states: 0
2025-10-29 13:52:04,454 - INFO     -     - f_value_stability: 0.6250
2025-10-29 13:52:04,454 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:04,454 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:04,454 - INFO     -     - nodes_expanded: 20
2025-10-29 13:52:04,454 - INFO     -     - search_depth: 2
2025-10-29 13:52:04,454 - INFO     -     - solution_cost: 2
2025-10-29 13:52:04,454 - INFO     -     - branching_factor: 4.8500
2025-10-29 13:52:04,454 - INFO     -     - solution_found: True
2025-10-29 13:52:04,454 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:04,454 - INFO     - 
  Computing reward:
2025-10-29 13:52:04,454 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:04,454 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:04,454 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:04,455 - INFO     -   [1] BRANCHING FACTOR: 4.850 → score 0.453 (tolerable)
2025-10-29 13:52:04,455 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:52:04,455 - INFO     -   [3] F-VALUE STABILITY: 0.460
2025-10-29 13:52:04,455 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:52:04,455 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:04,455 - INFO     - 
  [COMPOSITE]: 0.589
2025-10-29 13:52:04,455 - INFO     -     = 0.300*0.453 (bf)
2025-10-29 13:52:04,455 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:52:04,455 - INFO     -     + 0.350*0.460 (stability)
2025-10-29 13:52:04,455 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:04,455 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:04,455 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:04,455 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:52:04,455 - INFO     - 
  [FINAL REWARD]: 0.4779
2025-10-29 13:52:04,455 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:04,455 - INFO     -     ✓ Reward computed: 0.4779
2025-10-29 13:52:04,455 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:04,455 - INFO     -     - bf_score                       0.4533
2025-10-29 13:52:04,455 - INFO     -     - depth_score                    0.8603
2025-10-29 13:52:04,456 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:04,456 - INFO     -     - f_stability                    0.4597
2025-10-29 13:52:04,456 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:52:04,456 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:04,456 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:04,456 - INFO     -     - composite                      0.5889
2025-10-29 13:52:04,456 - INFO     -     - total                          0.4779
2025-10-29 13:52:04,456 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:04,456 - INFO     -   Num remaining nodes: 5
2025-10-29 13:52:04,456 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:52:04,456 - INFO     -   Done: False
2025-10-29 13:52:04,456 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:04,459 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:04,459 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:04,459 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:04,459 - INFO     -     - num_nodes: 5
2025-10-29 13:52:04,459 - INFO     -     - num_edges: 18
2025-10-29 13:52:04,460 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:04,460 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:52:04,460 - INFO     -   After: current_merge_step = 4
2025-10-29 13:52:04,460 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:04,460 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:04,460 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:04,461 - INFO     -   ✓ Step logged
2025-10-29 13:52:04,461 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:04,461 - INFO     -   Returning:
2025-10-29 13:52:04,461 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:04,462 - INFO     -     - reward: 0.4779
2025-10-29 13:52:04,462 - INFO     -     - done: False
2025-10-29 13:52:04,462 - INFO     -     - truncated: False
2025-10-29 13:52:04,462 - INFO     -     - info: 19 keys
2025-10-29 13:52:04,462 - INFO     - ==========================================================================================

2025-10-29 13:52:04,472 - INFO     - 
==========================================================================================
2025-10-29 13:52:04,473 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:04,473 - INFO     - ==========================================================================================
2025-10-29 13:52:04,473 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:04,473 - INFO     -   Input action: 6 (type: int)
2025-10-29 13:52:04,473 - INFO     -   Available edges in graph: 18
2025-10-29 13:52:04,473 - INFO     -   Action index calculation:
2025-10-29 13:52:04,473 - INFO     -     - action % max(num_valid_edges, 1) = 6 % 18 = 6
2025-10-29 13:52:04,474 - INFO     -     - clamped to [0, 17]: 6
2025-10-29 13:52:04,474 - INFO     -   ✓ Extracted merge pair from edge 6: (5, 12)
2025-10-29 13:52:04,474 - INFO     -   ✓ Validation passed
2025-10-29 13:52:04,474 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:04,475 - INFO     -     - Total states before merge: 52
2025-10-29 13:52:04,475 - INFO     -     - Num nodes: 5
2025-10-29 13:52:04,476 - INFO     -     - Num edges: 18
2025-10-29 13:52:04,476 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:04,476 - INFO     -       - Node 5: 5 states
2025-10-29 13:52:04,476 - INFO     -       - Node 12: 20 states
2025-10-29 13:52:04,476 - INFO     -       - Expected product: 100 states
2025-10-29 13:52:04,476 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:04,488 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:52:04,488 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:04,489 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:52:04,590 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:04,590 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:04,591 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:52:04,594 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:04,594 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:04,594 - INFO     -   Calling graph_tracker.merge_nodes([5, 12])...
2025-10-29 13:52:04,595 - INFO     - Attempting merge of nodes 5 and 12...
2025-10-29 13:52:04,595 - INFO     - Successfully merged nodes into new node 13 with 100 states.
2025-10-29 13:52:04,596 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:04,596 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:04,596 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:52:04,596 - INFO     - 
================================================================================
2025-10-29 13:52:04,596 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:52:04,596 - INFO     - ================================================================================
2025-10-29 13:52:04,596 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:04,597 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:52:04,597 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:52:04,598 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:04,598 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:04,598 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:04,598 - INFO     -   - Raw ts2_f length: 20
2025-10-29 13:52:04,598 - INFO     -   - Raw f_after length: 100
2025-10-29 13:52:04,599 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:04,599 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:04,599 - INFO     -   - ts2_valid: 20 / 20 (removed -20)
2025-10-29 13:52:04,599 - INFO     -   - after_valid: 100 / 100 (removed 0)
2025-10-29 13:52:04,599 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:04,599 - INFO     -   - ts1_id: 5
2025-10-29 13:52:04,599 - INFO     -   - ts2_id: 12
2025-10-29 13:52:04,599 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:04,599 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:04,599 - INFO     -   - ts1_size: 5, ts2_size: 20
2025-10-29 13:52:04,600 - INFO     -   - Product space size: 100
2025-10-29 13:52:04,600 - INFO     -   - Using product state mapping
2025-10-29 13:52:04,600 - INFO     -   - f_before_product length: 100
2025-10-29 13:52:04,601 - INFO     -   - avg_f_before: 4.1100 (100 valid states)
2025-10-29 13:52:04,601 - INFO     -   - avg_f_after:  7.5300 (100 valid states)
2025-10-29 13:52:04,601 - INFO     -   - delta: 3.4200
2025-10-29 13:52:04,601 - INFO     -   - f_stability: 1.0 - |3.4200| / 4.1100 = 0.1679
2025-10-29 13:52:04,601 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:04,601 - INFO     -   - Compared 25 values
2025-10-29 13:52:04,601 - INFO     -   - Significant changes (> 5.0): 2
2025-10-29 13:52:04,602 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:04,602 - INFO     -   - states_before: 100
2025-10-29 13:52:04,602 - INFO     -   - states_after: 100
2025-10-29 13:52:04,602 - INFO     -   - delta_states: 0
2025-10-29 13:52:04,602 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:04,602 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:04,602 - INFO     -   - ts2_transitions: 97
2025-10-29 13:52:04,602 - INFO     -   - merged_transitions: 460
2025-10-29 13:52:04,602 - INFO     -   - transition_density_change: 3.5000
2025-10-29 13:52:04,603 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:04,603 - INFO     -   - search_signals present: True
2025-10-29 13:52:04,603 - INFO     -   - nodes_expanded: 100
2025-10-29 13:52:04,603 - INFO     -   - search_depth: 4
2025-10-29 13:52:04,603 - INFO     -   - solution_cost: 4
2025-10-29 13:52:04,603 - INFO     -   - branching_factor: 4.6000
2025-10-29 13:52:04,603 - INFO     -   - solution_found: True
2025-10-29 13:52:04,603 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:04,604 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:04,605 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:52:04,605 - INFO     -   - TS5(5) + TS12(20) → 100 states
2025-10-29 13:52:04,605 - INFO     -   - f_stability=0.168
2025-10-29 13:52:04,605 - INFO     -   - A* nodes_expanded=100
2025-10-29 13:52:04,605 - INFO     -   - solution_found=True
2025-10-29 13:52:04,605 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:04,606 - INFO     - 
  Extracted signals:
2025-10-29 13:52:04,606 - INFO     -     - iteration: 4
2025-10-29 13:52:04,606 - INFO     -     - states_before: 100
2025-10-29 13:52:04,606 - INFO     -     - states_after: 100
2025-10-29 13:52:04,606 - INFO     -     - delta_states: 0
2025-10-29 13:52:04,606 - INFO     -     - f_value_stability: 0.1679
2025-10-29 13:52:04,606 - INFO     -     - num_significant_f_changes: 2
2025-10-29 13:52:04,606 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:04,606 - INFO     -     - nodes_expanded: 100
2025-10-29 13:52:04,607 - INFO     -     - search_depth: 4
2025-10-29 13:52:04,607 - INFO     -     - solution_cost: 4
2025-10-29 13:52:04,607 - INFO     -     - branching_factor: 4.6000
2025-10-29 13:52:04,607 - INFO     -     - solution_found: True
2025-10-29 13:52:04,607 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:04,607 - WARNING  -     ⚠️  Poor F-stability: 0.1679
2025-10-29 13:52:04,607 - INFO     - 
  Computing reward:
2025-10-29 13:52:04,607 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:04,607 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:04,608 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:04,608 - INFO     -   [1] BRANCHING FACTOR: 4.600 → score 0.487 (tolerable)
2025-10-29 13:52:04,608 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:52:04,608 - INFO     -   [3] F-VALUE STABILITY: 0.128
2025-10-29 13:52:04,609 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:04,609 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:04,609 - INFO     - 
  [COMPOSITE]: 0.470
2025-10-29 13:52:04,609 - INFO     -     = 0.300*0.487 (bf)
2025-10-29 13:52:04,609 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:52:04,609 - INFO     -     + 0.350*0.128 (stability)
2025-10-29 13:52:04,609 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:04,609 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:04,609 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:04,609 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:04,610 - INFO     - 
  [FINAL REWARD]: 0.1398
2025-10-29 13:52:04,610 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:04,610 - INFO     -     ✓ Reward computed: 0.1398
2025-10-29 13:52:04,610 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:04,610 - INFO     -     - bf_score                       0.4867
2025-10-29 13:52:04,610 - INFO     -     - depth_score                    0.7953
2025-10-29 13:52:04,610 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:04,610 - INFO     -     - f_stability                    0.1281
2025-10-29 13:52:04,610 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:04,610 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:04,611 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:04,611 - INFO     -     - composite                      0.4699
2025-10-29 13:52:04,611 - INFO     -     - total                          0.1398
2025-10-29 13:52:04,611 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:04,611 - INFO     -   Num remaining nodes: 4
2025-10-29 13:52:04,611 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:52:04,611 - INFO     -   Done: False
2025-10-29 13:52:04,611 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:04,613 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:04,613 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:04,613 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:04,613 - INFO     -     - num_nodes: 4
2025-10-29 13:52:04,613 - INFO     -     - num_edges: 12
2025-10-29 13:52:04,613 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:04,613 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:52:04,614 - INFO     -   After: current_merge_step = 5
2025-10-29 13:52:04,614 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:04,614 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:04,614 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:04,615 - INFO     -   ✓ Step logged
2025-10-29 13:52:04,615 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:04,615 - INFO     -   Returning:
2025-10-29 13:52:04,615 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:04,615 - INFO     -     - reward: 0.1398
2025-10-29 13:52:04,616 - INFO     -     - done: False
2025-10-29 13:52:04,616 - INFO     -     - truncated: False
2025-10-29 13:52:04,616 - INFO     -     - info: 19 keys
2025-10-29 13:52:04,616 - INFO     - ==========================================================================================

2025-10-29 13:52:04,626 - INFO     - 
==========================================================================================
2025-10-29 13:52:04,626 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:04,626 - INFO     - ==========================================================================================
2025-10-29 13:52:04,626 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:04,626 - INFO     -   Input action: 4 (type: int)
2025-10-29 13:52:04,626 - INFO     -   Available edges in graph: 12
2025-10-29 13:52:04,626 - INFO     -   Action index calculation:
2025-10-29 13:52:04,626 - INFO     -     - action % max(num_valid_edges, 1) = 4 % 12 = 4
2025-10-29 13:52:04,627 - INFO     -     - clamped to [0, 11]: 4
2025-10-29 13:52:04,627 - INFO     -   ✓ Extracted merge pair from edge 4: (8, 10)
2025-10-29 13:52:04,627 - INFO     -   ✓ Validation passed
2025-10-29 13:52:04,627 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:04,627 - INFO     -     - Total states before merge: 127
2025-10-29 13:52:04,627 - INFO     -     - Num nodes: 4
2025-10-29 13:52:04,627 - INFO     -     - Num edges: 12
2025-10-29 13:52:04,627 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:04,627 - INFO     -       - Node 8: 5 states
2025-10-29 13:52:04,627 - INFO     -       - Node 10: 20 states
2025-10-29 13:52:04,627 - INFO     -       - Expected product: 100 states
2025-10-29 13:52:04,628 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:04,638 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:52:04,638 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:04,638 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:52:04,739 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:04,739 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:04,739 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:52:04,740 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:04,740 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:04,740 - INFO     -   Calling graph_tracker.merge_nodes([8, 10])...
2025-10-29 13:52:04,740 - INFO     - Attempting merge of nodes 8 and 10...
2025-10-29 13:52:04,740 - INFO     - Successfully merged nodes into new node 14 with 100 states.
2025-10-29 13:52:04,740 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:04,740 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:04,740 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:52:04,741 - INFO     - 
================================================================================
2025-10-29 13:52:04,741 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:52:04,741 - INFO     - ================================================================================
2025-10-29 13:52:04,741 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:04,741 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:52:04,741 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:52:04,742 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:04,742 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:04,742 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:04,742 - INFO     -   - Raw ts2_f length: 20
2025-10-29 13:52:04,742 - INFO     -   - Raw f_after length: 100
2025-10-29 13:52:04,742 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:04,742 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:04,742 - INFO     -   - ts2_valid: 20 / 20 (removed -20)
2025-10-29 13:52:04,743 - INFO     -   - after_valid: 100 / 100 (removed 0)
2025-10-29 13:52:04,743 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:04,743 - INFO     -   - ts1_id: 8
2025-10-29 13:52:04,743 - INFO     -   - ts2_id: 10
2025-10-29 13:52:04,743 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:04,743 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:04,743 - INFO     -   - ts1_size: 5, ts2_size: 20
2025-10-29 13:52:04,743 - INFO     -   - Product space size: 100
2025-10-29 13:52:04,743 - INFO     -   - Using product state mapping
2025-10-29 13:52:04,744 - INFO     -   - f_before_product length: 100
2025-10-29 13:52:04,744 - INFO     -   - avg_f_before: 4.5500 (100 valid states)
2025-10-29 13:52:04,744 - INFO     -   - avg_f_after:  7.1900 (100 valid states)
2025-10-29 13:52:04,744 - INFO     -   - delta: 2.6400
2025-10-29 13:52:04,744 - INFO     -   - f_stability: 1.0 - |2.6400| / 4.5500 = 0.4198
2025-10-29 13:52:04,744 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:04,746 - INFO     -   - Compared 25 values
2025-10-29 13:52:04,746 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:52:04,746 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:04,746 - INFO     -   - states_before: 100
2025-10-29 13:52:04,746 - INFO     -   - states_after: 100
2025-10-29 13:52:04,746 - INFO     -   - delta_states: 0
2025-10-29 13:52:04,746 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:04,746 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:04,746 - INFO     -   - ts2_transitions: 122
2025-10-29 13:52:04,746 - INFO     -   - merged_transitions: 620
2025-10-29 13:52:04,746 - INFO     -   - transition_density_change: 4.8500
2025-10-29 13:52:04,746 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:04,747 - INFO     -   - search_signals present: True
2025-10-29 13:52:04,747 - INFO     -   - nodes_expanded: 100
2025-10-29 13:52:04,747 - INFO     -   - search_depth: 3
2025-10-29 13:52:04,747 - INFO     -   - solution_cost: 0
2025-10-29 13:52:04,747 - INFO     -   - branching_factor: 6.2000
2025-10-29 13:52:04,747 - INFO     -   - solution_found: True
2025-10-29 13:52:04,747 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:04,747 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:04,748 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:52:04,748 - INFO     -   - TS8(5) + TS10(20) → 100 states
2025-10-29 13:52:04,748 - INFO     -   - f_stability=0.420
2025-10-29 13:52:04,748 - INFO     -   - A* nodes_expanded=100
2025-10-29 13:52:04,748 - INFO     -   - solution_found=True
2025-10-29 13:52:04,748 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:04,748 - INFO     - 
  Extracted signals:
2025-10-29 13:52:04,748 - INFO     -     - iteration: 5
2025-10-29 13:52:04,748 - INFO     -     - states_before: 100
2025-10-29 13:52:04,748 - INFO     -     - states_after: 100
2025-10-29 13:52:04,748 - INFO     -     - delta_states: 0
2025-10-29 13:52:04,748 - INFO     -     - f_value_stability: 0.4198
2025-10-29 13:52:04,749 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:52:04,749 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:04,749 - INFO     -     - nodes_expanded: 100
2025-10-29 13:52:04,749 - INFO     -     - search_depth: 3
2025-10-29 13:52:04,749 - INFO     -     - solution_cost: 0
2025-10-29 13:52:04,749 - INFO     -     - branching_factor: 6.2000
2025-10-29 13:52:04,749 - INFO     -     - solution_found: True
2025-10-29 13:52:04,749 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:04,749 - INFO     - 
  Computing reward:
2025-10-29 13:52:04,749 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:04,749 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:04,749 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:04,750 - INFO     -   [1] BRANCHING FACTOR: 6.200 → score 0.280 (high BF, minimal credit)
2025-10-29 13:52:04,750 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:52:04,750 - INFO     -   [3] F-VALUE STABILITY: 0.276
2025-10-29 13:52:04,750 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:04,750 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:04,750 - INFO     - 
  [COMPOSITE]: 0.465
2025-10-29 13:52:04,750 - INFO     -     = 0.300*0.280 (bf)
2025-10-29 13:52:04,751 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:52:04,751 - INFO     -     + 0.350*0.276 (stability)
2025-10-29 13:52:04,751 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:04,751 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:04,751 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:04,751 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:04,751 - INFO     - 
  [FINAL REWARD]: 0.1306
2025-10-29 13:52:04,751 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:04,751 - INFO     -     ✓ Reward computed: 0.1306
2025-10-29 13:52:04,751 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:04,751 - INFO     -     - bf_score                       0.2800
2025-10-29 13:52:04,752 - INFO     -     - depth_score                    0.8237
2025-10-29 13:52:04,752 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:04,752 - INFO     -     - f_stability                    0.2758
2025-10-29 13:52:04,752 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:04,752 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:04,752 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:04,752 - INFO     -     - composite                      0.4653
2025-10-29 13:52:04,752 - INFO     -     - total                          0.1306
2025-10-29 13:52:04,752 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:04,752 - INFO     -   Num remaining nodes: 3
2025-10-29 13:52:04,752 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:52:04,753 - INFO     -   Done: False
2025-10-29 13:52:04,753 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:04,753 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:04,753 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:04,753 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:04,754 - INFO     -     - num_nodes: 3
2025-10-29 13:52:04,754 - INFO     -     - num_edges: 6
2025-10-29 13:52:04,754 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:04,754 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:52:04,754 - INFO     -   After: current_merge_step = 6
2025-10-29 13:52:04,754 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:04,754 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:04,754 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:04,755 - INFO     -   ✓ Step logged
2025-10-29 13:52:04,755 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:04,755 - INFO     -   Returning:
2025-10-29 13:52:04,755 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:04,755 - INFO     -     - reward: 0.1306
2025-10-29 13:52:04,755 - INFO     -     - done: False
2025-10-29 13:52:04,755 - INFO     -     - truncated: False
2025-10-29 13:52:04,755 - INFO     -     - info: 19 keys
2025-10-29 13:52:04,755 - INFO     - ==========================================================================================

2025-10-29 13:52:04,760 - INFO     - 
==========================================================================================
2025-10-29 13:52:04,761 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:04,761 - INFO     - ==========================================================================================
2025-10-29 13:52:04,761 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:04,761 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:52:04,761 - INFO     -   Available edges in graph: 6
2025-10-29 13:52:04,761 - INFO     -   Action index calculation:
2025-10-29 13:52:04,761 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 6 = 0
2025-10-29 13:52:04,761 - INFO     -     - clamped to [0, 5]: 0
2025-10-29 13:52:04,761 - INFO     -   ✓ Extracted merge pair from edge 0: (2, 13)
2025-10-29 13:52:04,761 - INFO     -   ✓ Validation passed
2025-10-29 13:52:04,761 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:04,761 - INFO     -     - Total states before merge: 202
2025-10-29 13:52:04,762 - INFO     -     - Num nodes: 3
2025-10-29 13:52:04,762 - INFO     -     - Num edges: 6
2025-10-29 13:52:04,762 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:04,762 - INFO     -       - Node 2: 2 states
2025-10-29 13:52:04,762 - INFO     -       - Node 13: 100 states
2025-10-29 13:52:04,762 - INFO     -       - Expected product: 200 states
2025-10-29 13:52:04,762 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:04,766 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:52:04,766 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:04,766 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:52:04,868 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:04,868 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:04,868 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:52:04,869 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:04,870 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:04,870 - INFO     -   Calling graph_tracker.merge_nodes([2, 13])...
2025-10-29 13:52:04,870 - INFO     - Attempting merge of nodes 2 and 13...
2025-10-29 13:52:04,870 - INFO     - Successfully merged nodes into new node 15 with 200 states.
2025-10-29 13:52:04,870 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:04,870 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:04,870 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:52:04,870 - INFO     - 
================================================================================
2025-10-29 13:52:04,870 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:52:04,870 - INFO     - ================================================================================
2025-10-29 13:52:04,870 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:04,870 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:52:04,871 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:52:04,871 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:04,871 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:04,871 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:04,871 - INFO     -   - Raw ts2_f length: 100
2025-10-29 13:52:04,872 - INFO     -   - Raw f_after length: 200
2025-10-29 13:52:04,872 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:04,872 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:04,872 - INFO     -   - ts2_valid: 100 / 100 (removed -100)
2025-10-29 13:52:04,872 - INFO     -   - after_valid: 200 / 200 (removed 0)
2025-10-29 13:52:04,872 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:04,872 - INFO     -   - ts1_id: 2
2025-10-29 13:52:04,872 - INFO     -   - ts2_id: 13
2025-10-29 13:52:04,872 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:04,872 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:04,872 - INFO     -   - ts1_size: 2, ts2_size: 100
2025-10-29 13:52:04,872 - INFO     -   - Product space size: 200
2025-10-29 13:52:04,873 - INFO     -   - Using product state mapping
2025-10-29 13:52:04,873 - INFO     -   - f_before_product length: 200
2025-10-29 13:52:04,874 - INFO     -   - avg_f_before: 7.5300 (200 valid states)
2025-10-29 13:52:04,874 - INFO     -   - avg_f_after:  8.6200 (200 valid states)
2025-10-29 13:52:04,874 - INFO     -   - delta: 1.0900
2025-10-29 13:52:04,874 - INFO     -   - f_stability: 1.0 - |1.0900| / 7.5300 = 0.8552
2025-10-29 13:52:04,874 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:04,874 - INFO     -   - Compared 102 values
2025-10-29 13:52:04,874 - INFO     -   - Significant changes (> 5.0): 3
2025-10-29 13:52:04,875 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:04,875 - INFO     -   - states_before: 200
2025-10-29 13:52:04,875 - INFO     -   - states_after: 200
2025-10-29 13:52:04,875 - INFO     -   - delta_states: 0
2025-10-29 13:52:04,875 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:04,875 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:04,875 - INFO     -   - ts2_transitions: 460
2025-10-29 13:52:04,875 - INFO     -   - merged_transitions: 1060
2025-10-29 13:52:04,875 - INFO     -   - transition_density_change: 2.9750
2025-10-29 13:52:04,875 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:04,875 - INFO     -   - search_signals present: True
2025-10-29 13:52:04,875 - INFO     -   - nodes_expanded: 200
2025-10-29 13:52:04,875 - INFO     -   - search_depth: 4
2025-10-29 13:52:04,876 - INFO     -   - solution_cost: 4
2025-10-29 13:52:04,876 - INFO     -   - branching_factor: 5.3000
2025-10-29 13:52:04,876 - INFO     -   - solution_found: True
2025-10-29 13:52:04,876 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:04,876 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:04,876 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:52:04,877 - INFO     -   - TS2(2) + TS13(100) → 200 states
2025-10-29 13:52:04,877 - INFO     -   - f_stability=0.855
2025-10-29 13:52:04,877 - INFO     -   - A* nodes_expanded=200
2025-10-29 13:52:04,877 - INFO     -   - solution_found=True
2025-10-29 13:52:04,877 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:04,877 - INFO     - 
  Extracted signals:
2025-10-29 13:52:04,877 - INFO     -     - iteration: 6
2025-10-29 13:52:04,877 - INFO     -     - states_before: 200
2025-10-29 13:52:04,877 - INFO     -     - states_after: 200
2025-10-29 13:52:04,878 - INFO     -     - delta_states: 0
2025-10-29 13:52:04,878 - INFO     -     - f_value_stability: 0.8552
2025-10-29 13:52:04,878 - INFO     -     - num_significant_f_changes: 3
2025-10-29 13:52:04,878 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:04,878 - INFO     -     - nodes_expanded: 200
2025-10-29 13:52:04,878 - INFO     -     - search_depth: 4
2025-10-29 13:52:04,878 - INFO     -     - solution_cost: 4
2025-10-29 13:52:04,878 - INFO     -     - branching_factor: 5.3000
2025-10-29 13:52:04,878 - INFO     -     - solution_found: True
2025-10-29 13:52:04,878 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:04,878 - INFO     - 
  Computing reward:
2025-10-29 13:52:04,878 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:04,878 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:04,878 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:04,878 - INFO     -   [1] BRANCHING FACTOR: 5.300 → score 0.393 (tolerable)
2025-10-29 13:52:04,879 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:52:04,879 - INFO     -   [3] F-VALUE STABILITY: 0.977
2025-10-29 13:52:04,879 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:52:04,879 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:04,879 - INFO     - 
  [COMPOSITE]: 0.739
2025-10-29 13:52:04,880 - INFO     -     = 0.300*0.393 (bf)
2025-10-29 13:52:04,880 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:52:04,880 - INFO     -     + 0.350*0.977 (stability)
2025-10-29 13:52:04,880 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:04,880 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:04,880 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:04,880 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:52:04,880 - INFO     - 
  [FINAL REWARD]: 0.9778
2025-10-29 13:52:04,880 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:04,880 - INFO     -     ✓ Reward computed: 0.9778
2025-10-29 13:52:04,880 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:04,880 - INFO     -     - bf_score                       0.3933
2025-10-29 13:52:04,881 - INFO     -     - depth_score                    0.7953
2025-10-29 13:52:04,881 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:04,881 - INFO     -     - f_stability                    0.9767
2025-10-29 13:52:04,881 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:52:04,881 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:04,881 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:04,881 - INFO     -     - composite                      0.7389
2025-10-29 13:52:04,881 - INFO     -     - total                          0.9778
2025-10-29 13:52:04,881 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:04,881 - INFO     -   Num remaining nodes: 2
2025-10-29 13:52:04,881 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:52:04,882 - INFO     -   Done: False
2025-10-29 13:52:04,882 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:04,882 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:04,882 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:04,882 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:04,882 - INFO     -     - num_nodes: 2
2025-10-29 13:52:04,883 - INFO     -     - num_edges: 2
2025-10-29 13:52:04,883 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:04,883 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:52:04,883 - INFO     -   After: current_merge_step = 7
2025-10-29 13:52:04,883 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:04,883 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:04,883 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:04,884 - INFO     -   ✓ Step logged
2025-10-29 13:52:04,884 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:04,884 - INFO     -   Returning:
2025-10-29 13:52:04,884 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:04,884 - INFO     -     - reward: 0.9778
2025-10-29 13:52:04,884 - INFO     -     - done: False
2025-10-29 13:52:04,884 - INFO     -     - truncated: False
2025-10-29 13:52:04,884 - INFO     -     - info: 19 keys
2025-10-29 13:52:04,884 - INFO     - ==========================================================================================

2025-10-29 13:52:04,888 - INFO     - 
==========================================================================================
2025-10-29 13:52:04,890 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:04,890 - INFO     - ==========================================================================================
2025-10-29 13:52:04,890 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:04,890 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:52:04,890 - INFO     -   Available edges in graph: 2
2025-10-29 13:52:04,890 - INFO     -   Action index calculation:
2025-10-29 13:52:04,890 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 2 = 1
2025-10-29 13:52:04,890 - INFO     -     - clamped to [0, 1]: 1
2025-10-29 13:52:04,890 - INFO     -   ✓ Extracted merge pair from edge 1: (15, 14)
2025-10-29 13:52:04,890 - INFO     -   ✓ Validation passed
2025-10-29 13:52:04,890 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:04,890 - INFO     -     - Total states before merge: 300
2025-10-29 13:52:04,890 - INFO     -     - Num nodes: 2
2025-10-29 13:52:04,890 - INFO     -     - Num edges: 2
2025-10-29 13:52:04,890 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:04,891 - INFO     -       - Node 15: 200 states
2025-10-29 13:52:04,891 - INFO     -       - Node 14: 100 states
2025-10-29 13:52:04,891 - INFO     -       - Expected product: 20000 states
2025-10-29 13:52:04,891 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:04,899 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:52:04,900 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:04,900 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:52:05,000 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:05,000 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:05,000 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:52:05,033 - INFO     -   ✓ TS file received after 0.03s
2025-10-29 13:52:05,033 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:05,033 - INFO     -   Calling graph_tracker.merge_nodes([15, 14])...
2025-10-29 13:52:05,033 - INFO     - Attempting merge of nodes 15 and 14...
2025-10-29 13:52:05,033 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:52:05,034 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:05,034 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:05,034 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:52:05,034 - INFO     - 
================================================================================
2025-10-29 13:52:05,034 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:52:05,034 - INFO     - ================================================================================
2025-10-29 13:52:05,034 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:05,034 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:52:05,034 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:52:05,039 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:05,039 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:05,039 - INFO     -   - Raw ts1_f length: 62
2025-10-29 13:52:05,039 - INFO     -   - Raw ts2_f length: 58
2025-10-29 13:52:05,039 - INFO     -   - Raw f_after length: 3596
2025-10-29 13:52:05,039 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:05,040 - INFO     -   - ts1_valid: 62 / 62 (removed 0)
2025-10-29 13:52:05,040 - INFO     -   - ts2_valid: 58 / 58 (removed -58)
2025-10-29 13:52:05,041 - INFO     -   - after_valid: 2095 / 3596 (removed 1501)
2025-10-29 13:52:05,041 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:05,041 - INFO     -   - ts1_id: 15
2025-10-29 13:52:05,041 - INFO     -   - ts2_id: 14
2025-10-29 13:52:05,042 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:05,042 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:05,042 - INFO     -   - ts1_size: 62, ts2_size: 58
2025-10-29 13:52:05,042 - INFO     -   - Product space size: 3596
2025-10-29 13:52:05,042 - INFO     -   - Using product state mapping
2025-10-29 13:52:05,050 - INFO     -   - f_before_product length: 3596
2025-10-29 13:52:05,062 - INFO     -   - avg_f_before: 6.7269 (3596 valid states)
2025-10-29 13:52:05,062 - INFO     -   - avg_f_after:  12.7031 (2095 valid states)
2025-10-29 13:52:05,062 - INFO     -   - delta: 5.9762
2025-10-29 13:52:05,062 - INFO     -   - f_stability: 1.0 - |5.9762| / 6.7269 = 0.1116
2025-10-29 13:52:05,062 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:05,063 - INFO     -   - Compared 120 values
2025-10-29 13:52:05,063 - INFO     -   - Significant changes (> 5.0): 73
2025-10-29 13:52:05,063 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:05,063 - INFO     -   - states_before: 3596
2025-10-29 13:52:05,063 - INFO     -   - states_after: 3596
2025-10-29 13:52:05,063 - INFO     -   - delta_states: 0
2025-10-29 13:52:05,063 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:05,063 - INFO     -   - ts1_transitions: 476
2025-10-29 13:52:05,063 - INFO     -   - ts2_transitions: 468
2025-10-29 13:52:05,063 - INFO     -   - merged_transitions: 19172
2025-10-29 13:52:05,063 - INFO     -   - transition_density_change: 5.0690
2025-10-29 13:52:05,063 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:05,063 - INFO     -   - search_signals present: True
2025-10-29 13:52:05,063 - INFO     -   - nodes_expanded: 2095
2025-10-29 13:52:05,064 - INFO     -   - search_depth: 5
2025-10-29 13:52:05,064 - INFO     -   - solution_cost: 4
2025-10-29 13:52:05,064 - INFO     -   - branching_factor: 9.1513
2025-10-29 13:52:05,064 - INFO     -   - solution_found: True
2025-10-29 13:52:05,064 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:05,066 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:05,066 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:52:05,067 - INFO     -   - TS15(62) + TS14(58) → 3596 states
2025-10-29 13:52:05,067 - INFO     -   - f_stability=0.112
2025-10-29 13:52:05,067 - INFO     -   - A* nodes_expanded=2095
2025-10-29 13:52:05,067 - INFO     -   - solution_found=True
2025-10-29 13:52:05,067 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:05,067 - INFO     - 
  Extracted signals:
2025-10-29 13:52:05,067 - INFO     -     - iteration: 7
2025-10-29 13:52:05,067 - INFO     -     - states_before: 3596
2025-10-29 13:52:05,067 - INFO     -     - states_after: 3596
2025-10-29 13:52:05,067 - INFO     -     - delta_states: 0
2025-10-29 13:52:05,067 - INFO     -     - f_value_stability: 0.1116
2025-10-29 13:52:05,067 - INFO     -     - num_significant_f_changes: 73
2025-10-29 13:52:05,067 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:05,069 - INFO     -     - nodes_expanded: 2095
2025-10-29 13:52:05,069 - INFO     -     - search_depth: 5
2025-10-29 13:52:05,069 - INFO     -     - solution_cost: 4
2025-10-29 13:52:05,069 - INFO     -     - branching_factor: 9.1513
2025-10-29 13:52:05,069 - INFO     -     - solution_found: True
2025-10-29 13:52:05,069 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:05,069 - WARNING  -     ⚠️  Poor F-stability: 0.1116
2025-10-29 13:52:05,070 - WARNING  -     ⚠️  High branching factor: 9.1513
2025-10-29 13:52:05,070 - INFO     - 
  Computing reward:
2025-10-29 13:52:05,070 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:05,071 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:05,071 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:05,071 - INFO     -   [1] BRANCHING FACTOR: 9.151 → score 0.100 (high BF, minimal credit)
2025-10-29 13:52:05,071 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:52:05,074 - INFO     -   [3] F-VALUE STABILITY: 0.135
2025-10-29 13:52:05,074 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:05,074 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:05,074 - INFO     - 
  [COMPOSITE]: 0.352
2025-10-29 13:52:05,074 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:52:05,075 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:52:05,075 - INFO     -     + 0.350*0.135 (stability)
2025-10-29 13:52:05,075 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:05,075 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:05,075 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:05,075 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:05,075 - WARNING  -   ⚠️  BAD MERGE DETECTED: F-stability extremely poor: 0.112
2025-10-29 13:52:05,076 - INFO     -     + Bad merge penalty: -0.150
2025-10-29 13:52:05,076 - INFO     - 
  [FINAL REWARD]: -0.2465
2025-10-29 13:52:05,076 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:05,076 - INFO     -     ✓ Reward computed: -0.2465
2025-10-29 13:52:05,076 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:05,077 - INFO     -     - bf_score                       0.1000
2025-10-29 13:52:05,077 - INFO     -     - depth_score                    0.7721
2025-10-29 13:52:05,077 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:05,077 - INFO     -     - f_stability                    0.1352
2025-10-29 13:52:05,077 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:05,078 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:05,078 - INFO     -     - bad_merge_penalty              -0.1500
2025-10-29 13:52:05,078 - INFO     -     - composite                      0.3518
2025-10-29 13:52:05,078 - INFO     -     - total                          -0.2465
2025-10-29 13:52:05,078 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:05,078 - INFO     -   Num remaining nodes: 1
2025-10-29 13:52:05,078 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:52:05,078 - INFO     -   Done: True
2025-10-29 13:52:05,078 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:52:05,078 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:05,079 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:05,079 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:05,079 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:05,079 - INFO     -     - num_nodes: 1
2025-10-29 13:52:05,079 - INFO     -     - num_edges: 0
2025-10-29 13:52:05,079 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:05,079 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:52:05,079 - INFO     -   After: current_merge_step = 8
2025-10-29 13:52:05,079 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:05,079 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:05,079 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:05,081 - INFO     -   ✓ Step logged
2025-10-29 13:52:05,081 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:05,081 - INFO     -   Returning:
2025-10-29 13:52:05,081 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:05,081 - INFO     -     - reward: -0.2465
2025-10-29 13:52:05,081 - INFO     -     - done: True
2025-10-29 13:52:05,081 - INFO     -     - truncated: False
2025-10-29 13:52:05,082 - INFO     -     - info: 19 keys
2025-10-29 13:52:05,082 - INFO     - ==========================================================================================

2025-10-29 13:52:05,144 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:52:05,151 - INFO     - [Handshake] Building FD command:
2025-10-29 13:52:05,151 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:52:05,151 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_01.pddl
2025-10-29 13:52:05,151 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:52:05,154 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:52:05,907 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:52:05,907 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:52:05,907 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:52:06,222 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:52:06,222 - INFO     - Initializing GraphTracker...
2025-10-29 13:52:06,222 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:52:06,222 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:52:06,222 - INFO     -    → Node 0 has 2 states
2025-10-29 13:52:06,222 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:52:06,223 - INFO     -    → Node 1 has 2 states
2025-10-29 13:52:06,223 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:52:06,223 - INFO     -    → Node 2 has 2 states
2025-10-29 13:52:06,223 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:52:06,223 - INFO     -    → Node 3 has 2 states
2025-10-29 13:52:06,223 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:52:06,223 - INFO     -    → Node 4 has 2 states
2025-10-29 13:52:06,223 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:52:06,223 - INFO     -    → Node 5 has 5 states
2025-10-29 13:52:06,223 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:52:06,223 - INFO     -    → Node 6 has 5 states
2025-10-29 13:52:06,223 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:52:06,223 - INFO     -    → Node 7 has 5 states
2025-10-29 13:52:06,223 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:52:06,223 - INFO     -    → Node 8 has 5 states
2025-10-29 13:52:06,223 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:52:06,223 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:52:06,224 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:52:06,224 - INFO     - Added edge (0, 1)
2025-10-29 13:52:06,224 - INFO     - Added edge (0, 2)
2025-10-29 13:52:06,224 - INFO     - Added edge (0, 3)
2025-10-29 13:52:06,225 - INFO     - Added edge (0, 4)
2025-10-29 13:52:06,225 - INFO     - Added edge (0, 5)
2025-10-29 13:52:06,225 - INFO     - Added edge (0, 6)
2025-10-29 13:52:06,225 - INFO     - Added edge (0, 7)
2025-10-29 13:52:06,225 - INFO     - Added edge (0, 8)
2025-10-29 13:52:06,225 - INFO     - Added edge (1, 0)
2025-10-29 13:52:06,225 - INFO     - Added edge (1, 2)
2025-10-29 13:52:06,225 - INFO     - Added edge (1, 3)
2025-10-29 13:52:06,225 - INFO     - Added edge (1, 4)
2025-10-29 13:52:06,225 - INFO     - Added edge (1, 5)
2025-10-29 13:52:06,225 - INFO     - Added edge (1, 6)
2025-10-29 13:52:06,225 - INFO     - Added edge (1, 7)
2025-10-29 13:52:06,225 - INFO     - Added edge (1, 8)
2025-10-29 13:52:06,225 - INFO     - Added edge (2, 0)
2025-10-29 13:52:06,225 - INFO     - Added edge (2, 1)
2025-10-29 13:52:06,225 - INFO     - Added edge (2, 3)
2025-10-29 13:52:06,225 - INFO     - Added edge (2, 4)
2025-10-29 13:52:06,225 - INFO     - Added edge (2, 5)
2025-10-29 13:52:06,225 - INFO     - Added edge (2, 6)
2025-10-29 13:52:06,225 - INFO     - Added edge (2, 7)
2025-10-29 13:52:06,226 - INFO     - Added edge (2, 8)
2025-10-29 13:52:06,226 - INFO     - Added edge (3, 0)
2025-10-29 13:52:06,226 - INFO     - Added edge (3, 1)
2025-10-29 13:52:06,226 - INFO     - Added edge (3, 2)
2025-10-29 13:52:06,226 - INFO     - Added edge (3, 4)
2025-10-29 13:52:06,226 - INFO     - Added edge (3, 5)
2025-10-29 13:52:06,226 - INFO     - Added edge (3, 6)
2025-10-29 13:52:06,226 - INFO     - Added edge (3, 7)
2025-10-29 13:52:06,226 - INFO     - Added edge (3, 8)
2025-10-29 13:52:06,226 - INFO     - Added edge (4, 0)
2025-10-29 13:52:06,226 - INFO     - Added edge (4, 1)
2025-10-29 13:52:06,226 - INFO     - Added edge (4, 2)
2025-10-29 13:52:06,226 - INFO     - Added edge (4, 3)
2025-10-29 13:52:06,228 - INFO     - Added edge (4, 5)
2025-10-29 13:52:06,228 - INFO     - Added edge (4, 6)
2025-10-29 13:52:06,228 - INFO     - Added edge (4, 7)
2025-10-29 13:52:06,228 - INFO     - Added edge (4, 8)
2025-10-29 13:52:06,228 - INFO     - Added edge (5, 0)
2025-10-29 13:52:06,228 - INFO     - Added edge (5, 1)
2025-10-29 13:52:06,228 - INFO     - Added edge (5, 2)
2025-10-29 13:52:06,228 - INFO     - Added edge (5, 3)
2025-10-29 13:52:06,228 - INFO     - Added edge (5, 4)
2025-10-29 13:52:06,228 - INFO     - Added edge (6, 0)
2025-10-29 13:52:06,228 - INFO     - Added edge (6, 1)
2025-10-29 13:52:06,228 - INFO     - Added edge (6, 2)
2025-10-29 13:52:06,229 - INFO     - Added edge (6, 3)
2025-10-29 13:52:06,229 - INFO     - Added edge (6, 4)
2025-10-29 13:52:06,229 - INFO     - Added edge (7, 0)
2025-10-29 13:52:06,229 - INFO     - Added edge (7, 1)
2025-10-29 13:52:06,229 - INFO     - Added edge (7, 2)
2025-10-29 13:52:06,229 - INFO     - Added edge (7, 3)
2025-10-29 13:52:06,229 - INFO     - Added edge (7, 4)
2025-10-29 13:52:06,229 - INFO     - Added edge (8, 0)
2025-10-29 13:52:06,229 - INFO     - Added edge (8, 1)
2025-10-29 13:52:06,229 - INFO     - Added edge (8, 2)
2025-10-29 13:52:06,229 - INFO     - Added edge (8, 3)
2025-10-29 13:52:06,229 - INFO     - Added edge (8, 4)
2025-10-29 13:52:06,229 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:52:06,237 - INFO     - 
==========================================================================================
2025-10-29 13:52:06,237 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:06,238 - INFO     - ==========================================================================================
2025-10-29 13:52:06,238 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:06,238 - INFO     -   Input action: 23 (type: int)
2025-10-29 13:52:06,238 - INFO     -   Available edges in graph: 60
2025-10-29 13:52:06,238 - INFO     -   Action index calculation:
2025-10-29 13:52:06,238 - INFO     -     - action % max(num_valid_edges, 1) = 23 % 60 = 23
2025-10-29 13:52:06,238 - INFO     -     - clamped to [0, 59]: 23
2025-10-29 13:52:06,238 - INFO     -   ✓ Extracted merge pair from edge 23: (2, 8)
2025-10-29 13:52:06,238 - INFO     -   ✓ Validation passed
2025-10-29 13:52:06,238 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:06,238 - INFO     -     - Total states before merge: 30
2025-10-29 13:52:06,238 - INFO     -     - Num nodes: 9
2025-10-29 13:52:06,238 - INFO     -     - Num edges: 60
2025-10-29 13:52:06,239 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:06,239 - INFO     -       - Node 2: 2 states
2025-10-29 13:52:06,239 - INFO     -       - Node 8: 5 states
2025-10-29 13:52:06,239 - INFO     -       - Expected product: 10 states
2025-10-29 13:52:06,239 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:06,245 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:52:06,245 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:06,245 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:52:06,346 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:06,346 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:06,346 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:52:06,346 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:06,346 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:06,346 - INFO     -   Calling graph_tracker.merge_nodes([2, 8])...
2025-10-29 13:52:06,346 - INFO     - Attempting merge of nodes 2 and 8...
2025-10-29 13:52:06,346 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:52:06,346 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:06,347 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:06,347 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:52:06,347 - INFO     - 
================================================================================
2025-10-29 13:52:06,347 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:52:06,347 - INFO     - ================================================================================
2025-10-29 13:52:06,347 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:06,347 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:52:06,347 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:52:06,347 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:06,347 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:06,348 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:06,348 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:06,348 - INFO     -   - Raw f_after length: 10
2025-10-29 13:52:06,348 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:06,348 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:06,348 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:06,348 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:52:06,348 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:06,348 - INFO     -   - ts1_id: 2
2025-10-29 13:52:06,348 - INFO     -   - ts2_id: 8
2025-10-29 13:52:06,348 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:06,348 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:06,348 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:52:06,348 - INFO     -   - Product space size: 10
2025-10-29 13:52:06,348 - INFO     -   - Using product state mapping
2025-10-29 13:52:06,348 - INFO     -   - f_before_product length: 10
2025-10-29 13:52:06,348 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:52:06,349 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:52:06,349 - INFO     -   - delta: 0.4000
2025-10-29 13:52:06,349 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:52:06,349 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:06,349 - INFO     -   - Compared 7 values
2025-10-29 13:52:06,349 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:06,349 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:06,349 - INFO     -   - states_before: 10
2025-10-29 13:52:06,349 - INFO     -   - states_after: 10
2025-10-29 13:52:06,349 - INFO     -   - delta_states: 0
2025-10-29 13:52:06,349 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:06,349 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:06,349 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:06,349 - INFO     -   - merged_transitions: 40
2025-10-29 13:52:06,349 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:52:06,350 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:06,350 - INFO     -   - search_signals present: True
2025-10-29 13:52:06,350 - INFO     -   - nodes_expanded: 10
2025-10-29 13:52:06,350 - INFO     -   - search_depth: 1
2025-10-29 13:52:06,350 - INFO     -   - solution_cost: 0
2025-10-29 13:52:06,350 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:52:06,350 - INFO     -   - solution_found: True
2025-10-29 13:52:06,350 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:06,350 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:06,350 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:52:06,350 - INFO     -   - TS2(2) + TS8(5) → 10 states
2025-10-29 13:52:06,350 - INFO     -   - f_stability=0.862
2025-10-29 13:52:06,350 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:52:06,350 - INFO     -   - solution_found=True
2025-10-29 13:52:06,350 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:06,351 - INFO     - 
  Extracted signals:
2025-10-29 13:52:06,351 - INFO     -     - iteration: 0
2025-10-29 13:52:06,351 - INFO     -     - states_before: 10
2025-10-29 13:52:06,351 - INFO     -     - states_after: 10
2025-10-29 13:52:06,351 - INFO     -     - delta_states: 0
2025-10-29 13:52:06,351 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:52:06,351 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:06,351 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:06,351 - INFO     -     - nodes_expanded: 10
2025-10-29 13:52:06,351 - INFO     -     - search_depth: 1
2025-10-29 13:52:06,351 - INFO     -     - solution_cost: 0
2025-10-29 13:52:06,351 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:52:06,351 - INFO     -     - solution_found: True
2025-10-29 13:52:06,352 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:06,352 - INFO     - 
  Computing reward:
2025-10-29 13:52:06,352 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:06,352 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:06,352 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:06,352 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:52:06,352 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:52:06,352 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:52:06,352 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:06,352 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:06,354 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:52:06,354 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:52:06,354 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:52:06,354 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:52:06,354 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:06,354 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:06,354 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:06,354 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:06,354 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:52:06,354 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:06,354 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:52:06,354 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:06,354 - INFO     -     - bf_score                       0.5667
2025-10-29 13:52:06,354 - INFO     -     - depth_score                    0.9119
2025-10-29 13:52:06,354 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:06,355 - INFO     -     - f_stability                    0.2913
2025-10-29 13:52:06,355 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:06,355 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:06,355 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:06,355 - INFO     -     - composite                      0.5743
2025-10-29 13:52:06,355 - INFO     -     - total                          0.3487
2025-10-29 13:52:06,355 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:06,355 - INFO     -   Num remaining nodes: 8
2025-10-29 13:52:06,355 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:52:06,355 - INFO     -   Done: False
2025-10-29 13:52:06,355 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:06,357 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:06,357 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:06,357 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:06,357 - INFO     -     - num_nodes: 8
2025-10-29 13:52:06,357 - INFO     -     - num_edges: 50
2025-10-29 13:52:06,357 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:06,357 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:52:06,357 - INFO     -   After: current_merge_step = 1
2025-10-29 13:52:06,357 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:06,357 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:06,357 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:06,358 - INFO     -   ✓ Step logged
2025-10-29 13:52:06,358 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:06,359 - INFO     -   Returning:
2025-10-29 13:52:06,359 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:06,359 - INFO     -     - reward: 0.3487
2025-10-29 13:52:06,359 - INFO     -     - done: False
2025-10-29 13:52:06,359 - INFO     -     - truncated: False
2025-10-29 13:52:06,359 - INFO     -     - info: 19 keys
2025-10-29 13:52:06,359 - INFO     - ==========================================================================================

2025-10-29 13:52:06,365 - INFO     - 
==========================================================================================
2025-10-29 13:52:06,365 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:06,365 - INFO     - ==========================================================================================
2025-10-29 13:52:06,365 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:06,365 - INFO     -   Input action: 8 (type: int)
2025-10-29 13:52:06,366 - INFO     -   Available edges in graph: 50
2025-10-29 13:52:06,366 - INFO     -   Action index calculation:
2025-10-29 13:52:06,366 - INFO     -     - action % max(num_valid_edges, 1) = 8 % 50 = 8
2025-10-29 13:52:06,366 - INFO     -     - clamped to [0, 49]: 8
2025-10-29 13:52:06,366 - INFO     -   ✓ Extracted merge pair from edge 8: (1, 3)
2025-10-29 13:52:06,366 - INFO     -   ✓ Validation passed
2025-10-29 13:52:06,366 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:06,366 - INFO     -     - Total states before merge: 33
2025-10-29 13:52:06,366 - INFO     -     - Num nodes: 8
2025-10-29 13:52:06,366 - INFO     -     - Num edges: 50
2025-10-29 13:52:06,366 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:06,366 - INFO     -       - Node 1: 2 states
2025-10-29 13:52:06,366 - INFO     -       - Node 3: 2 states
2025-10-29 13:52:06,366 - INFO     -       - Expected product: 4 states
2025-10-29 13:52:06,366 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:06,373 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:52:06,373 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:06,373 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:52:06,475 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:06,475 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:06,475 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:52:06,475 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:06,475 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:06,475 - INFO     -   Calling graph_tracker.merge_nodes([1, 3])...
2025-10-29 13:52:06,475 - INFO     - Attempting merge of nodes 1 and 3...
2025-10-29 13:52:06,475 - INFO     - Successfully merged nodes into new node 10 with 4 states.
2025-10-29 13:52:06,475 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:06,475 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:06,475 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:52:06,476 - INFO     - 
================================================================================
2025-10-29 13:52:06,476 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:52:06,476 - INFO     - ================================================================================
2025-10-29 13:52:06,476 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:06,476 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:52:06,476 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:52:06,477 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:06,477 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:06,477 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:06,477 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:06,477 - INFO     -   - Raw f_after length: 4
2025-10-29 13:52:06,477 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:06,477 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:06,477 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:06,477 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:52:06,478 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:06,478 - INFO     -   - ts1_id: 1
2025-10-29 13:52:06,478 - INFO     -   - ts2_id: 3
2025-10-29 13:52:06,478 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:06,478 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:06,478 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:52:06,478 - INFO     -   - Product space size: 4
2025-10-29 13:52:06,478 - INFO     -   - Using product state mapping
2025-10-29 13:52:06,478 - INFO     -   - f_before_product length: 4
2025-10-29 13:52:06,478 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:52:06,478 - INFO     -   - avg_f_after:  1.0000 (4 valid states)
2025-10-29 13:52:06,479 - INFO     -   - delta: 0.2500
2025-10-29 13:52:06,479 - INFO     -   - f_stability: 1.0 - |0.2500| / 0.7500 = 0.6667
2025-10-29 13:52:06,479 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:06,479 - INFO     -   - Compared 4 values
2025-10-29 13:52:06,479 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:06,479 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:06,479 - INFO     -   - states_before: 4
2025-10-29 13:52:06,479 - INFO     -   - states_after: 4
2025-10-29 13:52:06,479 - INFO     -   - delta_states: 0
2025-10-29 13:52:06,479 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:06,479 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:06,479 - INFO     -   - ts2_transitions: 5
2025-10-29 13:52:06,480 - INFO     -   - merged_transitions: 20
2025-10-29 13:52:06,480 - INFO     -   - transition_density_change: 2.5000
2025-10-29 13:52:06,480 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:06,480 - INFO     -   - search_signals present: True
2025-10-29 13:52:06,480 - INFO     -   - nodes_expanded: 4
2025-10-29 13:52:06,480 - INFO     -   - search_depth: 0
2025-10-29 13:52:06,480 - INFO     -   - solution_cost: 0
2025-10-29 13:52:06,480 - INFO     -   - branching_factor: 5.0000
2025-10-29 13:52:06,480 - INFO     -   - solution_found: True
2025-10-29 13:52:06,480 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:06,480 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:06,481 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:52:06,481 - INFO     -   - TS1(2) + TS3(2) → 4 states
2025-10-29 13:52:06,481 - INFO     -   - f_stability=0.667
2025-10-29 13:52:06,481 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:52:06,481 - INFO     -   - solution_found=True
2025-10-29 13:52:06,481 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:06,481 - INFO     - 
  Extracted signals:
2025-10-29 13:52:06,481 - INFO     -     - iteration: 1
2025-10-29 13:52:06,481 - INFO     -     - states_before: 4
2025-10-29 13:52:06,481 - INFO     -     - states_after: 4
2025-10-29 13:52:06,481 - INFO     -     - delta_states: 0
2025-10-29 13:52:06,481 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:52:06,482 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:06,482 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:06,482 - INFO     -     - nodes_expanded: 4
2025-10-29 13:52:06,482 - INFO     -     - search_depth: 0
2025-10-29 13:52:06,482 - INFO     -     - solution_cost: 0
2025-10-29 13:52:06,482 - INFO     -     - branching_factor: 5.0000
2025-10-29 13:52:06,482 - INFO     -     - solution_found: True
2025-10-29 13:52:06,482 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:06,482 - INFO     - 
  Computing reward:
2025-10-29 13:52:06,482 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:06,482 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:06,482 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:06,483 - INFO     -   [1] BRANCHING FACTOR: 5.000 → score 0.433 (tolerable)
2025-10-29 13:52:06,483 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:52:06,483 - INFO     -   [3] F-VALUE STABILITY: 0.176
2025-10-29 13:52:06,483 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:06,483 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:06,483 - INFO     - 
  [COMPOSITE]: 0.412
2025-10-29 13:52:06,483 - INFO     -     = 0.300*0.433 (bf)
2025-10-29 13:52:06,483 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:52:06,483 - INFO     -     + 0.350*0.176 (stability)
2025-10-29 13:52:06,483 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:06,483 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:06,483 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:06,483 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:06,484 - INFO     - 
  [FINAL REWARD]: 0.0230
2025-10-29 13:52:06,484 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:06,484 - INFO     -     ✓ Reward computed: 0.0230
2025-10-29 13:52:06,484 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:06,484 - INFO     -     - bf_score                       0.4333
2025-10-29 13:52:06,484 - INFO     -     - depth_score                    0.5000
2025-10-29 13:52:06,485 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:06,485 - INFO     -     - f_stability                    0.1757
2025-10-29 13:52:06,485 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:06,485 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:06,485 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:06,485 - INFO     -     - composite                      0.4115
2025-10-29 13:52:06,485 - INFO     -     - total                          0.0230
2025-10-29 13:52:06,485 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:06,485 - INFO     -   Num remaining nodes: 7
2025-10-29 13:52:06,485 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:52:06,485 - INFO     -   Done: False
2025-10-29 13:52:06,485 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:06,487 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:06,487 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:06,487 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:06,487 - INFO     -     - num_nodes: 7
2025-10-29 13:52:06,487 - INFO     -     - num_edges: 36
2025-10-29 13:52:06,487 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:06,487 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:52:06,487 - INFO     -   After: current_merge_step = 2
2025-10-29 13:52:06,487 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:06,487 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:06,487 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:06,488 - INFO     -   ✓ Step logged
2025-10-29 13:52:06,488 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:06,488 - INFO     -   Returning:
2025-10-29 13:52:06,488 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:06,488 - INFO     -     - reward: 0.0230
2025-10-29 13:52:06,488 - INFO     -     - done: False
2025-10-29 13:52:06,489 - INFO     -     - truncated: False
2025-10-29 13:52:06,489 - INFO     -     - info: 19 keys
2025-10-29 13:52:06,489 - INFO     - ==========================================================================================

2025-10-29 13:52:06,493 - INFO     - 
==========================================================================================
2025-10-29 13:52:06,494 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:06,494 - INFO     - ==========================================================================================
2025-10-29 13:52:06,494 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:06,494 - INFO     -   Input action: 22 (type: int)
2025-10-29 13:52:06,494 - INFO     -   Available edges in graph: 36
2025-10-29 13:52:06,494 - INFO     -   Action index calculation:
2025-10-29 13:52:06,494 - INFO     -     - action % max(num_valid_edges, 1) = 22 % 36 = 22
2025-10-29 13:52:06,494 - INFO     -     - clamped to [0, 35]: 22
2025-10-29 13:52:06,494 - INFO     -   ✓ Extracted merge pair from edge 22: (7, 9)
2025-10-29 13:52:06,494 - INFO     -   ✓ Validation passed
2025-10-29 13:52:06,495 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:06,495 - INFO     -     - Total states before merge: 33
2025-10-29 13:52:06,495 - INFO     -     - Num nodes: 7
2025-10-29 13:52:06,495 - INFO     -     - Num edges: 36
2025-10-29 13:52:06,495 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:06,495 - INFO     -       - Node 7: 5 states
2025-10-29 13:52:06,495 - INFO     -       - Node 9: 10 states
2025-10-29 13:52:06,495 - INFO     -       - Expected product: 50 states
2025-10-29 13:52:06,495 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:06,501 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:52:06,501 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:06,501 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:52:06,602 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:06,602 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:06,602 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:52:06,603 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:06,603 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:06,603 - INFO     -   Calling graph_tracker.merge_nodes([7, 9])...
2025-10-29 13:52:06,603 - INFO     - Attempting merge of nodes 7 and 9...
2025-10-29 13:52:06,603 - INFO     - Successfully merged nodes into new node 11 with 50 states.
2025-10-29 13:52:06,603 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:06,604 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:06,604 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:52:06,604 - INFO     - 
================================================================================
2025-10-29 13:52:06,604 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:52:06,604 - INFO     - ================================================================================
2025-10-29 13:52:06,604 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:06,605 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:52:06,605 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:52:06,606 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:06,606 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:06,606 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:06,606 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:52:06,606 - INFO     -   - Raw f_after length: 50
2025-10-29 13:52:06,606 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:06,606 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:06,606 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:52:06,606 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:52:06,606 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:06,606 - INFO     -   - ts1_id: 7
2025-10-29 13:52:06,606 - INFO     -   - ts2_id: 9
2025-10-29 13:52:06,607 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:06,607 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:06,607 - INFO     -   - ts1_size: 5, ts2_size: 10
2025-10-29 13:52:06,607 - INFO     -   - Product space size: 50
2025-10-29 13:52:06,607 - INFO     -   - Using product state mapping
2025-10-29 13:52:06,607 - INFO     -   - f_before_product length: 50
2025-10-29 13:52:06,607 - INFO     -   - avg_f_before: 3.8800 (50 valid states)
2025-10-29 13:52:06,607 - INFO     -   - avg_f_after:  6.3800 (50 valid states)
2025-10-29 13:52:06,607 - INFO     -   - delta: 2.5000
2025-10-29 13:52:06,608 - INFO     -   - f_stability: 1.0 - |2.5000| / 3.8800 = 0.3557
2025-10-29 13:52:06,608 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:06,608 - INFO     -   - Compared 15 values
2025-10-29 13:52:06,608 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:52:06,608 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:06,608 - INFO     -   - states_before: 50
2025-10-29 13:52:06,608 - INFO     -   - states_after: 50
2025-10-29 13:52:06,608 - INFO     -   - delta_states: 0
2025-10-29 13:52:06,608 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:06,608 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:06,608 - INFO     -   - ts2_transitions: 40
2025-10-29 13:52:06,608 - INFO     -   - merged_transitions: 260
2025-10-29 13:52:06,609 - INFO     -   - transition_density_change: 4.1400
2025-10-29 13:52:06,609 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:06,609 - INFO     -   - search_signals present: True
2025-10-29 13:52:06,609 - INFO     -   - nodes_expanded: 50
2025-10-29 13:52:06,609 - INFO     -   - search_depth: 3
2025-10-29 13:52:06,609 - INFO     -   - solution_cost: 2
2025-10-29 13:52:06,609 - INFO     -   - branching_factor: 5.2000
2025-10-29 13:52:06,609 - INFO     -   - solution_found: True
2025-10-29 13:52:06,609 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:06,610 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:06,610 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:52:06,610 - INFO     -   - TS7(5) + TS9(10) → 50 states
2025-10-29 13:52:06,610 - INFO     -   - f_stability=0.356
2025-10-29 13:52:06,610 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:52:06,610 - INFO     -   - solution_found=True
2025-10-29 13:52:06,610 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:06,610 - INFO     - 
  Extracted signals:
2025-10-29 13:52:06,611 - INFO     -     - iteration: 2
2025-10-29 13:52:06,611 - INFO     -     - states_before: 50
2025-10-29 13:52:06,611 - INFO     -     - states_after: 50
2025-10-29 13:52:06,611 - INFO     -     - delta_states: 0
2025-10-29 13:52:06,611 - INFO     -     - f_value_stability: 0.3557
2025-10-29 13:52:06,611 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:52:06,611 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:06,611 - INFO     -     - nodes_expanded: 50
2025-10-29 13:52:06,611 - INFO     -     - search_depth: 3
2025-10-29 13:52:06,611 - INFO     -     - solution_cost: 2
2025-10-29 13:52:06,612 - INFO     -     - branching_factor: 5.2000
2025-10-29 13:52:06,612 - INFO     -     - solution_found: True
2025-10-29 13:52:06,612 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:06,612 - INFO     - 
  Computing reward:
2025-10-29 13:52:06,612 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:06,612 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:06,612 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:06,612 - INFO     -   [1] BRANCHING FACTOR: 5.200 → score 0.407 (tolerable)
2025-10-29 13:52:06,612 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:52:06,612 - INFO     -   [3] F-VALUE STABILITY: 0.532
2025-10-29 13:52:06,613 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:52:06,613 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:06,613 - INFO     - 
  [COMPOSITE]: 0.593
2025-10-29 13:52:06,613 - INFO     -     = 0.300*0.407 (bf)
2025-10-29 13:52:06,613 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:52:06,613 - INFO     -     + 0.350*0.532 (stability)
2025-10-29 13:52:06,613 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:06,613 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:06,613 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:06,613 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:52:06,613 - INFO     - 
  [FINAL REWARD]: 0.5862
2025-10-29 13:52:06,613 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:06,613 - INFO     -     ✓ Reward computed: 0.5862
2025-10-29 13:52:06,613 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:06,613 - INFO     -     - bf_score                       0.4067
2025-10-29 13:52:06,613 - INFO     -     - depth_score                    0.8237
2025-10-29 13:52:06,614 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:06,614 - INFO     -     - f_stability                    0.5325
2025-10-29 13:52:06,614 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:52:06,614 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:06,614 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:06,614 - INFO     -     - composite                      0.5931
2025-10-29 13:52:06,614 - INFO     -     - total                          0.5862
2025-10-29 13:52:06,614 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:06,614 - INFO     -   Num remaining nodes: 6
2025-10-29 13:52:06,614 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:52:06,614 - INFO     -   Done: False
2025-10-29 13:52:06,614 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:06,615 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:06,615 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:06,615 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:06,615 - INFO     -     - num_nodes: 6
2025-10-29 13:52:06,615 - INFO     -     - num_edges: 28
2025-10-29 13:52:06,615 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:06,615 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:52:06,615 - INFO     -   After: current_merge_step = 3
2025-10-29 13:52:06,615 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:06,615 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:06,615 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:06,617 - INFO     -   ✓ Step logged
2025-10-29 13:52:06,617 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:06,617 - INFO     -   Returning:
2025-10-29 13:52:06,617 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:06,617 - INFO     -     - reward: 0.5862
2025-10-29 13:52:06,617 - INFO     -     - done: False
2025-10-29 13:52:06,617 - INFO     -     - truncated: False
2025-10-29 13:52:06,617 - INFO     -     - info: 19 keys
2025-10-29 13:52:06,617 - INFO     - ==========================================================================================

2025-10-29 13:52:06,622 - INFO     - 
==========================================================================================
2025-10-29 13:52:06,622 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:06,622 - INFO     - ==========================================================================================
2025-10-29 13:52:06,622 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:06,623 - INFO     -   Input action: 27 (type: int)
2025-10-29 13:52:06,623 - INFO     -   Available edges in graph: 28
2025-10-29 13:52:06,623 - INFO     -   Action index calculation:
2025-10-29 13:52:06,623 - INFO     -     - action % max(num_valid_edges, 1) = 27 % 28 = 27
2025-10-29 13:52:06,623 - INFO     -     - clamped to [0, 27]: 27
2025-10-29 13:52:06,623 - INFO     -   ✓ Extracted merge pair from edge 27: (11, 6)
2025-10-29 13:52:06,623 - INFO     -   ✓ Validation passed
2025-10-29 13:52:06,623 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:06,623 - INFO     -     - Total states before merge: 68
2025-10-29 13:52:06,623 - INFO     -     - Num nodes: 6
2025-10-29 13:52:06,623 - INFO     -     - Num edges: 28
2025-10-29 13:52:06,623 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:06,623 - INFO     -       - Node 11: 50 states
2025-10-29 13:52:06,624 - INFO     -       - Node 6: 5 states
2025-10-29 13:52:06,624 - INFO     -       - Expected product: 250 states
2025-10-29 13:52:06,624 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:06,630 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:52:06,630 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:06,630 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:52:06,731 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:06,731 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:06,731 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:52:06,736 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:06,737 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:06,737 - INFO     -   Calling graph_tracker.merge_nodes([11, 6])...
2025-10-29 13:52:06,737 - INFO     - Attempting merge of nodes 11 and 6...
2025-10-29 13:52:06,737 - INFO     - Successfully merged nodes into new node 12 with 250 states.
2025-10-29 13:52:06,737 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:06,737 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:06,737 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:52:06,737 - INFO     - 
================================================================================
2025-10-29 13:52:06,737 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:52:06,737 - INFO     - ================================================================================
2025-10-29 13:52:06,737 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:06,738 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:52:06,738 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:52:06,738 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:06,738 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:06,738 - INFO     -   - Raw ts1_f length: 50
2025-10-29 13:52:06,738 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:06,738 - INFO     -   - Raw f_after length: 250
2025-10-29 13:52:06,738 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:06,738 - INFO     -   - ts1_valid: 50 / 50 (removed 0)
2025-10-29 13:52:06,738 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:06,739 - INFO     -   - after_valid: 250 / 250 (removed 0)
2025-10-29 13:52:06,739 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:06,739 - INFO     -   - ts1_id: 11
2025-10-29 13:52:06,739 - INFO     -   - ts2_id: 6
2025-10-29 13:52:06,739 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:06,739 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:06,739 - INFO     -   - ts1_size: 50, ts2_size: 5
2025-10-29 13:52:06,739 - INFO     -   - Product space size: 250
2025-10-29 13:52:06,739 - INFO     -   - Using product state mapping
2025-10-29 13:52:06,740 - INFO     -   - f_before_product length: 250
2025-10-29 13:52:06,741 - INFO     -   - avg_f_before: 6.4760 (250 valid states)
2025-10-29 13:52:06,741 - INFO     -   - avg_f_after:  9.2040 (250 valid states)
2025-10-29 13:52:06,741 - INFO     -   - delta: 2.7280
2025-10-29 13:52:06,741 - INFO     -   - f_stability: 1.0 - |2.7280| / 6.4760 = 0.5788
2025-10-29 13:52:06,741 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:06,741 - INFO     -   - Compared 55 values
2025-10-29 13:52:06,741 - INFO     -   - Significant changes (> 5.0): 7
2025-10-29 13:52:06,741 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:06,741 - INFO     -   - states_before: 250
2025-10-29 13:52:06,741 - INFO     -   - states_after: 250
2025-10-29 13:52:06,741 - INFO     -   - delta_states: 0
2025-10-29 13:52:06,742 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:06,742 - INFO     -   - ts1_transitions: 260
2025-10-29 13:52:06,742 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:06,742 - INFO     -   - merged_transitions: 1675
2025-10-29 13:52:06,742 - INFO     -   - transition_density_change: 5.6080
2025-10-29 13:52:06,742 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:06,742 - INFO     -   - search_signals present: True
2025-10-29 13:52:06,742 - INFO     -   - nodes_expanded: 250
2025-10-29 13:52:06,742 - INFO     -   - search_depth: 4
2025-10-29 13:52:06,742 - INFO     -   - solution_cost: 2
2025-10-29 13:52:06,742 - INFO     -   - branching_factor: 6.7000
2025-10-29 13:52:06,742 - INFO     -   - solution_found: True
2025-10-29 13:52:06,743 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:06,743 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:06,743 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:52:06,743 - INFO     -   - TS11(50) + TS6(5) → 250 states
2025-10-29 13:52:06,743 - INFO     -   - f_stability=0.579
2025-10-29 13:52:06,744 - INFO     -   - A* nodes_expanded=250
2025-10-29 13:52:06,744 - INFO     -   - solution_found=True
2025-10-29 13:52:06,744 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:06,744 - INFO     - 
  Extracted signals:
2025-10-29 13:52:06,744 - INFO     -     - iteration: 3
2025-10-29 13:52:06,744 - INFO     -     - states_before: 250
2025-10-29 13:52:06,744 - INFO     -     - states_after: 250
2025-10-29 13:52:06,744 - INFO     -     - delta_states: 0
2025-10-29 13:52:06,744 - INFO     -     - f_value_stability: 0.5788
2025-10-29 13:52:06,744 - INFO     -     - num_significant_f_changes: 7
2025-10-29 13:52:06,744 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:06,745 - INFO     -     - nodes_expanded: 250
2025-10-29 13:52:06,745 - INFO     -     - search_depth: 4
2025-10-29 13:52:06,745 - INFO     -     - solution_cost: 2
2025-10-29 13:52:06,745 - INFO     -     - branching_factor: 6.7000
2025-10-29 13:52:06,745 - INFO     -     - solution_found: True
2025-10-29 13:52:06,745 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:06,745 - INFO     - 
  Computing reward:
2025-10-29 13:52:06,745 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:06,746 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:06,746 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:06,746 - INFO     -   [1] BRANCHING FACTOR: 6.700 → score 0.230 (high BF, minimal credit)
2025-10-29 13:52:06,746 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:52:06,747 - INFO     -   [3] F-VALUE STABILITY: 0.488
2025-10-29 13:52:06,747 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:52:06,747 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:06,747 - INFO     - 
  [COMPOSITE]: 0.519
2025-10-29 13:52:06,747 - INFO     -     = 0.300*0.230 (bf)
2025-10-29 13:52:06,747 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:52:06,747 - INFO     -     + 0.350*0.488 (stability)
2025-10-29 13:52:06,747 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:06,747 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:06,748 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:06,748 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:52:06,748 - INFO     - 
  [FINAL REWARD]: 0.3378
2025-10-29 13:52:06,748 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:06,749 - INFO     -     ✓ Reward computed: 0.3378
2025-10-29 13:52:06,749 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:06,749 - INFO     -     - bf_score                       0.2300
2025-10-29 13:52:06,749 - INFO     -     - depth_score                    0.7953
2025-10-29 13:52:06,749 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:06,749 - INFO     -     - f_stability                    0.4881
2025-10-29 13:52:06,750 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:52:06,750 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:06,750 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:06,750 - INFO     -     - composite                      0.5189
2025-10-29 13:52:06,750 - INFO     -     - total                          0.3378
2025-10-29 13:52:06,750 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:06,750 - INFO     -   Num remaining nodes: 5
2025-10-29 13:52:06,750 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:52:06,750 - INFO     -   Done: False
2025-10-29 13:52:06,750 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:06,751 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:06,752 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:06,752 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:06,752 - INFO     -     - num_nodes: 5
2025-10-29 13:52:06,752 - INFO     -     - num_edges: 20
2025-10-29 13:52:06,752 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:06,752 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:52:06,752 - INFO     -   After: current_merge_step = 4
2025-10-29 13:52:06,752 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:06,752 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:06,752 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:06,753 - INFO     -   ✓ Step logged
2025-10-29 13:52:06,753 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:06,753 - INFO     -   Returning:
2025-10-29 13:52:06,753 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:06,753 - INFO     -     - reward: 0.3378
2025-10-29 13:52:06,753 - INFO     -     - done: False
2025-10-29 13:52:06,754 - INFO     -     - truncated: False
2025-10-29 13:52:06,754 - INFO     -     - info: 19 keys
2025-10-29 13:52:06,754 - INFO     - ==========================================================================================

2025-10-29 13:52:06,758 - INFO     - 
==========================================================================================
2025-10-29 13:52:06,758 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:06,758 - INFO     - ==========================================================================================
2025-10-29 13:52:06,758 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:06,759 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:52:06,759 - INFO     -   Available edges in graph: 20
2025-10-29 13:52:06,759 - INFO     -   Action index calculation:
2025-10-29 13:52:06,759 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 20 = 2
2025-10-29 13:52:06,759 - INFO     -     - clamped to [0, 19]: 2
2025-10-29 13:52:06,759 - INFO     -   ✓ Extracted merge pair from edge 2: (0, 10)
2025-10-29 13:52:06,759 - INFO     -   ✓ Validation passed
2025-10-29 13:52:06,759 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:06,759 - INFO     -     - Total states before merge: 263
2025-10-29 13:52:06,759 - INFO     -     - Num nodes: 5
2025-10-29 13:52:06,759 - INFO     -     - Num edges: 20
2025-10-29 13:52:06,759 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:06,759 - INFO     -       - Node 0: 2 states
2025-10-29 13:52:06,759 - INFO     -       - Node 10: 4 states
2025-10-29 13:52:06,759 - INFO     -       - Expected product: 8 states
2025-10-29 13:52:06,759 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:06,772 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:52:06,772 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:06,772 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:52:06,873 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:06,873 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:06,873 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:52:06,873 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:06,873 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:06,873 - INFO     -   Calling graph_tracker.merge_nodes([0, 10])...
2025-10-29 13:52:06,874 - INFO     - Attempting merge of nodes 0 and 10...
2025-10-29 13:52:06,874 - INFO     - Successfully merged nodes into new node 13 with 8 states.
2025-10-29 13:52:06,874 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:06,874 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:06,874 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:52:06,874 - INFO     - 
================================================================================
2025-10-29 13:52:06,874 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:52:06,874 - INFO     - ================================================================================
2025-10-29 13:52:06,874 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:06,874 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:52:06,874 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:52:06,875 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:06,875 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:06,875 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:06,875 - INFO     -   - Raw ts2_f length: 4
2025-10-29 13:52:06,875 - INFO     -   - Raw f_after length: 8
2025-10-29 13:52:06,875 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:06,875 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:06,875 - INFO     -   - ts2_valid: 4 / 4 (removed -4)
2025-10-29 13:52:06,876 - INFO     -   - after_valid: 8 / 8 (removed 0)
2025-10-29 13:52:06,876 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:06,876 - INFO     -   - ts1_id: 0
2025-10-29 13:52:06,876 - INFO     -   - ts2_id: 10
2025-10-29 13:52:06,876 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:06,876 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:06,876 - INFO     -   - ts1_size: 2, ts2_size: 4
2025-10-29 13:52:06,876 - INFO     -   - Product space size: 8
2025-10-29 13:52:06,876 - INFO     -   - Using product state mapping
2025-10-29 13:52:06,876 - INFO     -   - f_before_product length: 8
2025-10-29 13:52:06,876 - INFO     -   - avg_f_before: 1.1250 (8 valid states)
2025-10-29 13:52:06,877 - INFO     -   - avg_f_after:  1.5000 (8 valid states)
2025-10-29 13:52:06,877 - INFO     -   - delta: 0.3750
2025-10-29 13:52:06,877 - INFO     -   - f_stability: 1.0 - |0.3750| / 1.1250 = 0.6667
2025-10-29 13:52:06,877 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:06,877 - INFO     -   - Compared 6 values
2025-10-29 13:52:06,877 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:06,877 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:06,877 - INFO     -   - states_before: 8
2025-10-29 13:52:06,877 - INFO     -   - states_after: 8
2025-10-29 13:52:06,877 - INFO     -   - delta_states: 0
2025-10-29 13:52:06,877 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:06,878 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:06,878 - INFO     -   - ts2_transitions: 20
2025-10-29 13:52:06,878 - INFO     -   - merged_transitions: 68
2025-10-29 13:52:06,878 - INFO     -   - transition_density_change: 5.3750
2025-10-29 13:52:06,878 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:06,878 - INFO     -   - search_signals present: True
2025-10-29 13:52:06,878 - INFO     -   - nodes_expanded: 8
2025-10-29 13:52:06,878 - INFO     -   - search_depth: 0
2025-10-29 13:52:06,878 - INFO     -   - solution_cost: 0
2025-10-29 13:52:06,878 - INFO     -   - branching_factor: 8.5000
2025-10-29 13:52:06,879 - INFO     -   - solution_found: True
2025-10-29 13:52:06,879 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:06,879 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:06,879 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:52:06,879 - INFO     -   - TS0(2) + TS10(4) → 8 states
2025-10-29 13:52:06,879 - INFO     -   - f_stability=0.667
2025-10-29 13:52:06,879 - INFO     -   - A* nodes_expanded=8
2025-10-29 13:52:06,879 - INFO     -   - solution_found=True
2025-10-29 13:52:06,879 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:06,879 - INFO     - 
  Extracted signals:
2025-10-29 13:52:06,879 - INFO     -     - iteration: 4
2025-10-29 13:52:06,879 - INFO     -     - states_before: 8
2025-10-29 13:52:06,879 - INFO     -     - states_after: 8
2025-10-29 13:52:06,879 - INFO     -     - delta_states: 0
2025-10-29 13:52:06,879 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:52:06,881 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:06,881 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:06,881 - INFO     -     - nodes_expanded: 8
2025-10-29 13:52:06,881 - INFO     -     - search_depth: 0
2025-10-29 13:52:06,881 - INFO     -     - solution_cost: 0
2025-10-29 13:52:06,881 - INFO     -     - branching_factor: 8.5000
2025-10-29 13:52:06,881 - INFO     -     - solution_found: True
2025-10-29 13:52:06,881 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:06,881 - WARNING  -     ⚠️  High branching factor: 8.5000
2025-10-29 13:52:06,881 - INFO     - 
  Computing reward:
2025-10-29 13:52:06,881 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:06,882 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:06,882 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:06,882 - INFO     -   [1] BRANCHING FACTOR: 8.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:52:06,882 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:52:06,882 - INFO     -   [3] F-VALUE STABILITY: 0.572
2025-10-29 13:52:06,882 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:52:06,882 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:06,882 - INFO     - 
  [COMPOSITE]: 0.450
2025-10-29 13:52:06,882 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:52:06,882 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:52:06,882 - INFO     -     + 0.350*0.572 (stability)
2025-10-29 13:52:06,883 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:06,883 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:06,883 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:06,883 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:52:06,883 - INFO     - 
  [FINAL REWARD]: 0.3003
2025-10-29 13:52:06,883 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:06,883 - INFO     -     ✓ Reward computed: 0.3003
2025-10-29 13:52:06,883 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:06,883 - INFO     -     - bf_score                       0.1000
2025-10-29 13:52:06,883 - INFO     -     - depth_score                    0.5000
2025-10-29 13:52:06,884 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:06,884 - INFO     -     - f_stability                    0.5719
2025-10-29 13:52:06,884 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:52:06,884 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:06,884 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:06,884 - INFO     -     - composite                      0.4502
2025-10-29 13:52:06,884 - INFO     -     - total                          0.3003
2025-10-29 13:52:06,884 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:06,884 - INFO     -   Num remaining nodes: 4
2025-10-29 13:52:06,884 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:52:06,884 - INFO     -   Done: False
2025-10-29 13:52:06,884 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:06,885 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:06,885 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:06,885 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:06,885 - INFO     -     - num_nodes: 4
2025-10-29 13:52:06,885 - INFO     -     - num_edges: 12
2025-10-29 13:52:06,886 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:06,886 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:52:06,886 - INFO     -   After: current_merge_step = 5
2025-10-29 13:52:06,886 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:06,886 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:06,886 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:06,886 - INFO     -   ✓ Step logged
2025-10-29 13:52:06,887 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:06,887 - INFO     -   Returning:
2025-10-29 13:52:06,887 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:06,887 - INFO     -     - reward: 0.3003
2025-10-29 13:52:06,887 - INFO     -     - done: False
2025-10-29 13:52:06,887 - INFO     -     - truncated: False
2025-10-29 13:52:06,887 - INFO     -     - info: 19 keys
2025-10-29 13:52:06,887 - INFO     - ==========================================================================================

2025-10-29 13:52:06,891 - INFO     - 
==========================================================================================
2025-10-29 13:52:06,892 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:06,892 - INFO     - ==========================================================================================
2025-10-29 13:52:06,892 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:06,892 - INFO     -   Input action: 4 (type: int)
2025-10-29 13:52:06,892 - INFO     -   Available edges in graph: 12
2025-10-29 13:52:06,892 - INFO     -   Action index calculation:
2025-10-29 13:52:06,892 - INFO     -     - action % max(num_valid_edges, 1) = 4 % 12 = 4
2025-10-29 13:52:06,892 - INFO     -     - clamped to [0, 11]: 4
2025-10-29 13:52:06,892 - INFO     -   ✓ Extracted merge pair from edge 4: (5, 12)
2025-10-29 13:52:06,892 - INFO     -   ✓ Validation passed
2025-10-29 13:52:06,892 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:06,892 - INFO     -     - Total states before merge: 265
2025-10-29 13:52:06,892 - INFO     -     - Num nodes: 4
2025-10-29 13:52:06,892 - INFO     -     - Num edges: 12
2025-10-29 13:52:06,892 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:06,892 - INFO     -       - Node 5: 5 states
2025-10-29 13:52:06,892 - INFO     -       - Node 12: 250 states
2025-10-29 13:52:06,892 - INFO     -       - Expected product: 1250 states
2025-10-29 13:52:06,894 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:06,901 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:52:06,901 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:06,902 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:52:07,002 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:07,002 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:07,002 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:52:07,008 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:52:07,008 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:07,008 - INFO     -   Calling graph_tracker.merge_nodes([5, 12])...
2025-10-29 13:52:07,008 - INFO     - Attempting merge of nodes 5 and 12...
2025-10-29 13:52:07,008 - INFO     - Successfully merged nodes into new node 14 with 1250 states.
2025-10-29 13:52:07,008 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:07,008 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:07,009 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:52:07,009 - INFO     - 
================================================================================
2025-10-29 13:52:07,009 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:52:07,009 - INFO     - ================================================================================
2025-10-29 13:52:07,009 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:07,009 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:52:07,009 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:52:07,011 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:07,011 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:07,011 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:07,011 - INFO     -   - Raw ts2_f length: 250
2025-10-29 13:52:07,011 - INFO     -   - Raw f_after length: 1250
2025-10-29 13:52:07,012 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:07,012 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:07,012 - INFO     -   - ts2_valid: 250 / 250 (removed -250)
2025-10-29 13:52:07,013 - INFO     -   - after_valid: 512 / 1250 (removed 738)
2025-10-29 13:52:07,013 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:07,014 - INFO     -   - ts1_id: 5
2025-10-29 13:52:07,014 - INFO     -   - ts2_id: 12
2025-10-29 13:52:07,014 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:07,014 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:07,014 - INFO     -   - ts1_size: 5, ts2_size: 250
2025-10-29 13:52:07,014 - INFO     -   - Product space size: 1250
2025-10-29 13:52:07,014 - INFO     -   - Using product state mapping
2025-10-29 13:52:07,016 - INFO     -   - f_before_product length: 1250
2025-10-29 13:52:07,020 - INFO     -   - avg_f_before: 9.2168 (1250 valid states)
2025-10-29 13:52:07,020 - INFO     -   - avg_f_after:  10.9375 (512 valid states)
2025-10-29 13:52:07,020 - INFO     -   - delta: 1.7207
2025-10-29 13:52:07,020 - INFO     -   - f_stability: 1.0 - |1.7207| / 9.2168 = 0.8133
2025-10-29 13:52:07,020 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:07,020 - INFO     -   - Compared 255 values
2025-10-29 13:52:07,020 - INFO     -   - Significant changes (> 5.0): 49
2025-10-29 13:52:07,020 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:07,020 - INFO     -   - states_before: 1250
2025-10-29 13:52:07,020 - INFO     -   - states_after: 1250
2025-10-29 13:52:07,020 - INFO     -   - delta_states: 0
2025-10-29 13:52:07,021 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:07,021 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:07,021 - INFO     -   - ts2_transitions: 1675
2025-10-29 13:52:07,021 - INFO     -   - merged_transitions: 7125
2025-10-29 13:52:07,021 - INFO     -   - transition_density_change: 4.3496
2025-10-29 13:52:07,021 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:07,021 - INFO     -   - search_signals present: True
2025-10-29 13:52:07,021 - INFO     -   - nodes_expanded: 512
2025-10-29 13:52:07,021 - INFO     -   - search_depth: 5
2025-10-29 13:52:07,021 - INFO     -   - solution_cost: 4
2025-10-29 13:52:07,021 - INFO     -   - branching_factor: 13.9160
2025-10-29 13:52:07,021 - INFO     -   - solution_found: True
2025-10-29 13:52:07,021 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:07,022 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:07,022 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:52:07,022 - INFO     -   - TS5(5) + TS12(250) → 1250 states
2025-10-29 13:52:07,022 - INFO     -   - f_stability=0.813
2025-10-29 13:52:07,022 - INFO     -   - A* nodes_expanded=512
2025-10-29 13:52:07,022 - INFO     -   - solution_found=True
2025-10-29 13:52:07,023 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:07,023 - INFO     - 
  Extracted signals:
2025-10-29 13:52:07,023 - INFO     -     - iteration: 5
2025-10-29 13:52:07,023 - INFO     -     - states_before: 1250
2025-10-29 13:52:07,023 - INFO     -     - states_after: 1250
2025-10-29 13:52:07,023 - INFO     -     - delta_states: 0
2025-10-29 13:52:07,023 - INFO     -     - f_value_stability: 0.8133
2025-10-29 13:52:07,023 - INFO     -     - num_significant_f_changes: 49
2025-10-29 13:52:07,023 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:07,023 - INFO     -     - nodes_expanded: 512
2025-10-29 13:52:07,023 - INFO     -     - search_depth: 5
2025-10-29 13:52:07,023 - INFO     -     - solution_cost: 4
2025-10-29 13:52:07,023 - INFO     -     - branching_factor: 13.9160
2025-10-29 13:52:07,023 - INFO     -     - solution_found: True
2025-10-29 13:52:07,023 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:07,025 - WARNING  -     ⚠️  High branching factor: 13.9160
2025-10-29 13:52:07,025 - INFO     - 
  Computing reward:
2025-10-29 13:52:07,025 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:07,025 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:07,025 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:07,025 - INFO     -   [1] BRANCHING FACTOR: 13.916 → score 0.100 (high BF, minimal credit)
2025-10-29 13:52:07,025 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:52:07,026 - INFO     -   [3] F-VALUE STABILITY: 0.850
2025-10-29 13:52:07,026 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:52:07,026 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:07,026 - INFO     - 
  [COMPOSITE]: 0.602
2025-10-29 13:52:07,026 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:52:07,026 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:52:07,026 - INFO     -     + 0.350*0.850 (stability)
2025-10-29 13:52:07,027 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:07,027 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:07,027 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:07,027 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:52:07,027 - INFO     - 
  [FINAL REWARD]: 0.7038
2025-10-29 13:52:07,027 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:07,027 - INFO     -     ✓ Reward computed: 0.7038
2025-10-29 13:52:07,027 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:07,027 - INFO     -     - bf_score                       0.1000
2025-10-29 13:52:07,028 - INFO     -     - depth_score                    0.7721
2025-10-29 13:52:07,028 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:07,028 - INFO     -     - f_stability                    0.8499
2025-10-29 13:52:07,028 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:52:07,028 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:07,028 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:07,028 - INFO     -     - composite                      0.6019
2025-10-29 13:52:07,028 - INFO     -     - total                          0.7038
2025-10-29 13:52:07,028 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:07,028 - INFO     -   Num remaining nodes: 3
2025-10-29 13:52:07,028 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:52:07,028 - INFO     -   Done: False
2025-10-29 13:52:07,028 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:07,029 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:07,029 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:07,029 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:07,029 - INFO     -     - num_nodes: 3
2025-10-29 13:52:07,029 - INFO     -     - num_edges: 6
2025-10-29 13:52:07,029 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:07,029 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:52:07,029 - INFO     -   After: current_merge_step = 6
2025-10-29 13:52:07,029 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:07,029 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:07,030 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:07,030 - INFO     -   ✓ Step logged
2025-10-29 13:52:07,030 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:07,030 - INFO     -   Returning:
2025-10-29 13:52:07,030 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:07,030 - INFO     -     - reward: 0.7038
2025-10-29 13:52:07,030 - INFO     -     - done: False
2025-10-29 13:52:07,031 - INFO     -     - truncated: False
2025-10-29 13:52:07,031 - INFO     -     - info: 19 keys
2025-10-29 13:52:07,031 - INFO     - ==========================================================================================

2025-10-29 13:52:07,035 - INFO     - 
==========================================================================================
2025-10-29 13:52:07,035 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:07,035 - INFO     - ==========================================================================================
2025-10-29 13:52:07,035 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:07,035 - INFO     -   Input action: 4 (type: int)
2025-10-29 13:52:07,035 - INFO     -   Available edges in graph: 6
2025-10-29 13:52:07,035 - INFO     -   Action index calculation:
2025-10-29 13:52:07,035 - INFO     -     - action % max(num_valid_edges, 1) = 4 % 6 = 4
2025-10-29 13:52:07,035 - INFO     -     - clamped to [0, 5]: 4
2025-10-29 13:52:07,035 - INFO     -   ✓ Extracted merge pair from edge 4: (14, 4)
2025-10-29 13:52:07,035 - INFO     -   ✓ Validation passed
2025-10-29 13:52:07,035 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:07,035 - INFO     -     - Total states before merge: 1260
2025-10-29 13:52:07,035 - INFO     -     - Num nodes: 3
2025-10-29 13:52:07,036 - INFO     -     - Num edges: 6
2025-10-29 13:52:07,036 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:07,036 - INFO     -       - Node 14: 1250 states
2025-10-29 13:52:07,036 - INFO     -       - Node 4: 2 states
2025-10-29 13:52:07,036 - INFO     -       - Expected product: 2500 states
2025-10-29 13:52:07,036 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:07,043 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:52:07,043 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:07,044 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:52:07,145 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:07,145 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:07,145 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:52:07,154 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:52:07,154 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:07,154 - INFO     -   Calling graph_tracker.merge_nodes([14, 4])...
2025-10-29 13:52:07,155 - INFO     - Attempting merge of nodes 14 and 4...
2025-10-29 13:52:07,155 - INFO     - Successfully merged nodes into new node 15 with 2500 states.
2025-10-29 13:52:07,155 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:07,155 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:07,155 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:52:07,155 - INFO     - 
================================================================================
2025-10-29 13:52:07,155 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:52:07,155 - INFO     - ================================================================================
2025-10-29 13:52:07,155 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:07,155 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:52:07,155 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:52:07,157 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:07,157 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:07,157 - INFO     -   - Raw ts1_f length: 512
2025-10-29 13:52:07,157 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:07,157 - INFO     -   - Raw f_after length: 1024
2025-10-29 13:52:07,157 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:07,158 - INFO     -   - ts1_valid: 512 / 512 (removed 0)
2025-10-29 13:52:07,158 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:07,158 - INFO     -   - after_valid: 423 / 1024 (removed 601)
2025-10-29 13:52:07,158 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:07,158 - INFO     -   - ts1_id: 14
2025-10-29 13:52:07,158 - INFO     -   - ts2_id: 4
2025-10-29 13:52:07,158 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:07,158 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:07,158 - INFO     -   - ts1_size: 512, ts2_size: 2
2025-10-29 13:52:07,158 - INFO     -   - Product space size: 1024
2025-10-29 13:52:07,158 - INFO     -   - Using product state mapping
2025-10-29 13:52:07,161 - INFO     -   - f_before_product length: 1024
2025-10-29 13:52:07,164 - INFO     -   - avg_f_before: 10.9375 (1024 valid states)
2025-10-29 13:52:07,164 - INFO     -   - avg_f_after:  11.2199 (423 valid states)
2025-10-29 13:52:07,165 - INFO     -   - delta: 0.2824
2025-10-29 13:52:07,165 - INFO     -   - f_stability: 1.0 - |0.2824| / 10.9375 = 0.9742
2025-10-29 13:52:07,165 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:07,165 - INFO     -   - Compared 423 values
2025-10-29 13:52:07,165 - INFO     -   - Significant changes (> 5.0): 80
2025-10-29 13:52:07,165 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:07,165 - INFO     -   - states_before: 1024
2025-10-29 13:52:07,165 - INFO     -   - states_after: 1024
2025-10-29 13:52:07,165 - INFO     -   - delta_states: 0
2025-10-29 13:52:07,165 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:07,165 - INFO     -   - ts1_transitions: 2912
2025-10-29 13:52:07,165 - INFO     -   - ts2_transitions: 3
2025-10-29 13:52:07,165 - INFO     -   - merged_transitions: 4368
2025-10-29 13:52:07,165 - INFO     -   - transition_density_change: 1.4189
2025-10-29 13:52:07,165 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:07,166 - INFO     -   - search_signals present: True
2025-10-29 13:52:07,166 - INFO     -   - nodes_expanded: 423
2025-10-29 13:52:07,166 - INFO     -   - search_depth: 6
2025-10-29 13:52:07,166 - INFO     -   - solution_cost: 4
2025-10-29 13:52:07,166 - INFO     -   - branching_factor: 10.3262
2025-10-29 13:52:07,166 - INFO     -   - solution_found: True
2025-10-29 13:52:07,166 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:07,167 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:07,167 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:52:07,167 - INFO     -   - TS14(512) + TS4(2) → 1024 states
2025-10-29 13:52:07,167 - INFO     -   - f_stability=0.974
2025-10-29 13:52:07,167 - INFO     -   - A* nodes_expanded=423
2025-10-29 13:52:07,167 - INFO     -   - solution_found=True
2025-10-29 13:52:07,167 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:07,167 - INFO     - 
  Extracted signals:
2025-10-29 13:52:07,167 - INFO     -     - iteration: 6
2025-10-29 13:52:07,167 - INFO     -     - states_before: 1024
2025-10-29 13:52:07,167 - INFO     -     - states_after: 1024
2025-10-29 13:52:07,167 - INFO     -     - delta_states: 0
2025-10-29 13:52:07,167 - INFO     -     - f_value_stability: 0.9742
2025-10-29 13:52:07,167 - INFO     -     - num_significant_f_changes: 80
2025-10-29 13:52:07,168 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:07,168 - INFO     -     - nodes_expanded: 423
2025-10-29 13:52:07,168 - INFO     -     - search_depth: 6
2025-10-29 13:52:07,168 - INFO     -     - solution_cost: 4
2025-10-29 13:52:07,168 - INFO     -     - branching_factor: 10.3262
2025-10-29 13:52:07,168 - INFO     -     - solution_found: True
2025-10-29 13:52:07,168 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:07,168 - WARNING  -     ⚠️  High branching factor: 10.3262
2025-10-29 13:52:07,168 - INFO     - 
  Computing reward:
2025-10-29 13:52:07,168 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:07,168 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:07,168 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:07,168 - INFO     -   [1] BRANCHING FACTOR: 10.326 → score 0.100 (high BF, minimal credit)
2025-10-29 13:52:07,169 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:52:07,169 - INFO     -   [3] F-VALUE STABILITY: 0.996
2025-10-29 13:52:07,169 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:52:07,169 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:07,169 - INFO     - 
  [COMPOSITE]: 0.649
2025-10-29 13:52:07,169 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:52:07,169 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:52:07,169 - INFO     -     + 0.350*0.996 (stability)
2025-10-29 13:52:07,169 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:07,169 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:07,169 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:07,169 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:52:07,170 - INFO     - 
  [FINAL REWARD]: 0.7983
2025-10-29 13:52:07,170 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:07,170 - INFO     -     ✓ Reward computed: 0.7983
2025-10-29 13:52:07,170 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:07,170 - INFO     -     - bf_score                       0.1000
2025-10-29 13:52:07,170 - INFO     -     - depth_score                    0.7525
2025-10-29 13:52:07,170 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:07,170 - INFO     -     - f_stability                    0.9962
2025-10-29 13:52:07,170 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:52:07,170 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:07,170 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:07,170 - INFO     -     - composite                      0.6492
2025-10-29 13:52:07,170 - INFO     -     - total                          0.7983
2025-10-29 13:52:07,170 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:07,170 - INFO     -   Num remaining nodes: 2
2025-10-29 13:52:07,171 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:52:07,171 - INFO     -   Done: False
2025-10-29 13:52:07,171 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:07,171 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:07,171 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:07,171 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:07,171 - INFO     -     - num_nodes: 2
2025-10-29 13:52:07,171 - INFO     -     - num_edges: 2
2025-10-29 13:52:07,171 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:07,171 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:52:07,171 - INFO     -   After: current_merge_step = 7
2025-10-29 13:52:07,171 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:07,171 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:07,172 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:07,172 - INFO     -   ✓ Step logged
2025-10-29 13:52:07,172 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:07,172 - INFO     -   Returning:
2025-10-29 13:52:07,172 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:07,172 - INFO     -     - reward: 0.7983
2025-10-29 13:52:07,172 - INFO     -     - done: False
2025-10-29 13:52:07,173 - INFO     -     - truncated: False
2025-10-29 13:52:07,173 - INFO     -     - info: 19 keys
2025-10-29 13:52:07,173 - INFO     - ==========================================================================================

2025-10-29 13:52:07,177 - INFO     - 
==========================================================================================
2025-10-29 13:52:07,177 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:07,177 - INFO     - ==========================================================================================
2025-10-29 13:52:07,177 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:07,177 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:52:07,177 - INFO     -   Available edges in graph: 2
2025-10-29 13:52:07,178 - INFO     -   Action index calculation:
2025-10-29 13:52:07,178 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:52:07,178 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:52:07,178 - INFO     -   ✓ Extracted merge pair from edge 0: (13, 15)
2025-10-29 13:52:07,178 - INFO     -   ✓ Validation passed
2025-10-29 13:52:07,178 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:07,178 - INFO     -     - Total states before merge: 2508
2025-10-29 13:52:07,178 - INFO     -     - Num nodes: 2
2025-10-29 13:52:07,178 - INFO     -     - Num edges: 2
2025-10-29 13:52:07,178 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:07,178 - INFO     -       - Node 13: 8 states
2025-10-29 13:52:07,178 - INFO     -       - Node 15: 2500 states
2025-10-29 13:52:07,178 - INFO     -       - Expected product: 20000 states
2025-10-29 13:52:07,178 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:07,184 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:52:07,184 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:07,185 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:52:07,285 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:07,285 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:07,285 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:52:07,293 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:52:07,293 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:07,293 - INFO     -   Calling graph_tracker.merge_nodes([13, 15])...
2025-10-29 13:52:07,293 - INFO     - Attempting merge of nodes 13 and 15...
2025-10-29 13:52:07,293 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:52:07,293 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:07,294 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:07,294 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:52:07,294 - INFO     - 
================================================================================
2025-10-29 13:52:07,294 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:52:07,294 - INFO     - ================================================================================
2025-10-29 13:52:07,294 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:07,294 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:52:07,294 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:52:07,298 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:07,298 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:07,298 - INFO     -   - Raw ts1_f length: 8
2025-10-29 13:52:07,298 - INFO     -   - Raw ts2_f length: 423
2025-10-29 13:52:07,298 - INFO     -   - Raw f_after length: 3384
2025-10-29 13:52:07,298 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:07,299 - INFO     -   - ts1_valid: 8 / 8 (removed 0)
2025-10-29 13:52:07,299 - INFO     -   - ts2_valid: 423 / 423 (removed -423)
2025-10-29 13:52:07,299 - INFO     -   - after_valid: 125 / 3384 (removed 3259)
2025-10-29 13:52:07,300 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:07,300 - INFO     -   - ts1_id: 13
2025-10-29 13:52:07,300 - INFO     -   - ts2_id: 15
2025-10-29 13:52:07,300 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:07,300 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:07,300 - INFO     -   - ts1_size: 8, ts2_size: 423
2025-10-29 13:52:07,300 - INFO     -   - Product space size: 3384
2025-10-29 13:52:07,301 - INFO     -   - Using product state mapping
2025-10-29 13:52:07,307 - INFO     -   - f_before_product length: 3384
2025-10-29 13:52:07,317 - INFO     -   - avg_f_before: 11.2199 (3384 valid states)
2025-10-29 13:52:07,317 - INFO     -   - avg_f_after:  10.4480 (125 valid states)
2025-10-29 13:52:07,317 - INFO     -   - delta: -0.7719
2025-10-29 13:52:07,317 - INFO     -   - f_stability: 1.0 - |-0.7719| / 11.2199 = 0.9312
2025-10-29 13:52:07,318 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:07,318 - INFO     -   - Compared 125 values
2025-10-29 13:52:07,318 - INFO     -   - Significant changes (> 5.0): 29
2025-10-29 13:52:07,318 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:07,318 - INFO     -   - states_before: 3384
2025-10-29 13:52:07,318 - INFO     -   - states_after: 3384
2025-10-29 13:52:07,318 - INFO     -   - delta_states: 0
2025-10-29 13:52:07,318 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:07,318 - INFO     -   - ts1_transitions: 68
2025-10-29 13:52:07,318 - INFO     -   - ts2_transitions: 1512
2025-10-29 13:52:07,318 - INFO     -   - merged_transitions: 7740
2025-10-29 13:52:07,318 - INFO     -   - transition_density_change: 1.8203
2025-10-29 13:52:07,318 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:07,318 - INFO     -   - search_signals present: True
2025-10-29 13:52:07,319 - INFO     -   - nodes_expanded: 125
2025-10-29 13:52:07,319 - INFO     -   - search_depth: 6
2025-10-29 13:52:07,319 - INFO     -   - solution_cost: 4
2025-10-29 13:52:07,319 - INFO     -   - branching_factor: 61.9200
2025-10-29 13:52:07,319 - INFO     -   - solution_found: True
2025-10-29 13:52:07,319 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:07,319 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:07,319 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:52:07,320 - INFO     -   - TS13(8) + TS15(423) → 3384 states
2025-10-29 13:52:07,320 - INFO     -   - f_stability=0.931
2025-10-29 13:52:07,320 - INFO     -   - A* nodes_expanded=125
2025-10-29 13:52:07,320 - INFO     -   - solution_found=True
2025-10-29 13:52:07,320 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:07,320 - INFO     - 
  Extracted signals:
2025-10-29 13:52:07,320 - INFO     -     - iteration: 7
2025-10-29 13:52:07,320 - INFO     -     - states_before: 3384
2025-10-29 13:52:07,320 - INFO     -     - states_after: 3384
2025-10-29 13:52:07,320 - INFO     -     - delta_states: 0
2025-10-29 13:52:07,320 - INFO     -     - f_value_stability: 0.9312
2025-10-29 13:52:07,320 - INFO     -     - num_significant_f_changes: 29
2025-10-29 13:52:07,320 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:07,320 - INFO     -     - nodes_expanded: 125
2025-10-29 13:52:07,321 - INFO     -     - search_depth: 6
2025-10-29 13:52:07,321 - INFO     -     - solution_cost: 4
2025-10-29 13:52:07,321 - INFO     -     - branching_factor: 61.9200
2025-10-29 13:52:07,321 - INFO     -     - solution_found: True
2025-10-29 13:52:07,321 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:07,322 - WARNING  -     ⚠️  High unreachability: 96.3%
2025-10-29 13:52:07,322 - WARNING  -     ⚠️  High branching factor: 61.9200
2025-10-29 13:52:07,322 - INFO     - 
  Computing reward:
2025-10-29 13:52:07,322 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:07,323 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:07,323 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:07,323 - INFO     -   [1] BRANCHING FACTOR: 61.920 → score 0.100 (high BF, minimal credit)
2025-10-29 13:52:07,323 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:52:07,323 - INFO     -   [3] F-VALUE STABILITY: 0.861
2025-10-29 13:52:07,324 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:52:07,324 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:07,324 - INFO     - 
  [COMPOSITE]: 0.602
2025-10-29 13:52:07,324 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:52:07,324 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:52:07,325 - INFO     -     + 0.350*0.861 (stability)
2025-10-29 13:52:07,325 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:07,325 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:07,325 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:07,325 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:52:07,325 - WARNING  -   ⚠️  BAD MERGE DETECTED: High unreachability: 96.3%
2025-10-29 13:52:07,326 - INFO     -     + Bad merge penalty: -0.100
2025-10-29 13:52:07,326 - INFO     - 
  [FINAL REWARD]: 0.6038
2025-10-29 13:52:07,326 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:07,326 - INFO     -     ✓ Reward computed: 0.6038
2025-10-29 13:52:07,326 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:07,326 - INFO     -     - bf_score                       0.1000
2025-10-29 13:52:07,326 - INFO     -     - depth_score                    0.7525
2025-10-29 13:52:07,326 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:07,326 - INFO     -     - f_stability                    0.8611
2025-10-29 13:52:07,326 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:52:07,327 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:07,327 - INFO     -     - bad_merge_penalty              -0.1000
2025-10-29 13:52:07,327 - INFO     -     - composite                      0.6019
2025-10-29 13:52:07,327 - INFO     -     - total                          0.6038
2025-10-29 13:52:07,327 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:07,327 - INFO     -   Num remaining nodes: 1
2025-10-29 13:52:07,327 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:52:07,327 - INFO     -   Done: True
2025-10-29 13:52:07,327 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:52:07,327 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:07,328 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:07,328 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:07,328 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:07,328 - INFO     -     - num_nodes: 1
2025-10-29 13:52:07,328 - INFO     -     - num_edges: 0
2025-10-29 13:52:07,328 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:07,328 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:52:07,328 - INFO     -   After: current_merge_step = 8
2025-10-29 13:52:07,328 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:07,328 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:07,328 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:07,329 - INFO     -   ✓ Step logged
2025-10-29 13:52:07,329 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:07,329 - INFO     -   Returning:
2025-10-29 13:52:07,329 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:07,329 - INFO     -     - reward: 0.6038
2025-10-29 13:52:07,330 - INFO     -     - done: True
2025-10-29 13:52:07,330 - INFO     -     - truncated: False
2025-10-29 13:52:07,330 - INFO     -     - info: 19 keys
2025-10-29 13:52:07,330 - INFO     - ==========================================================================================

2025-10-29 13:52:07,407 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:52:07,414 - INFO     - [Handshake] Building FD command:
2025-10-29 13:52:07,414 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:52:07,414 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_01.pddl
2025-10-29 13:52:07,414 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:52:07,417 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:52:08,019 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:52:08,019 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:52:08,019 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:52:08,334 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:52:08,334 - INFO     - Initializing GraphTracker...
2025-10-29 13:52:08,334 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:52:08,335 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:52:08,335 - INFO     -    → Node 0 has 2 states
2025-10-29 13:52:08,335 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:52:08,335 - INFO     -    → Node 1 has 2 states
2025-10-29 13:52:08,335 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:52:08,335 - INFO     -    → Node 2 has 2 states
2025-10-29 13:52:08,335 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:52:08,335 - INFO     -    → Node 3 has 2 states
2025-10-29 13:52:08,336 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:52:08,336 - INFO     -    → Node 4 has 2 states
2025-10-29 13:52:08,336 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:52:08,336 - INFO     -    → Node 5 has 5 states
2025-10-29 13:52:08,336 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:52:08,336 - INFO     -    → Node 6 has 5 states
2025-10-29 13:52:08,336 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:52:08,336 - INFO     -    → Node 7 has 5 states
2025-10-29 13:52:08,336 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:52:08,336 - INFO     -    → Node 8 has 5 states
2025-10-29 13:52:08,336 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:52:08,336 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:52:08,337 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:52:08,337 - INFO     - Added edge (0, 1)
2025-10-29 13:52:08,337 - INFO     - Added edge (0, 2)
2025-10-29 13:52:08,338 - INFO     - Added edge (0, 3)
2025-10-29 13:52:08,338 - INFO     - Added edge (0, 4)
2025-10-29 13:52:08,338 - INFO     - Added edge (0, 5)
2025-10-29 13:52:08,338 - INFO     - Added edge (0, 6)
2025-10-29 13:52:08,338 - INFO     - Added edge (0, 7)
2025-10-29 13:52:08,338 - INFO     - Added edge (0, 8)
2025-10-29 13:52:08,338 - INFO     - Added edge (1, 0)
2025-10-29 13:52:08,338 - INFO     - Added edge (1, 2)
2025-10-29 13:52:08,338 - INFO     - Added edge (1, 3)
2025-10-29 13:52:08,338 - INFO     - Added edge (1, 4)
2025-10-29 13:52:08,338 - INFO     - Added edge (1, 5)
2025-10-29 13:52:08,338 - INFO     - Added edge (1, 6)
2025-10-29 13:52:08,338 - INFO     - Added edge (1, 7)
2025-10-29 13:52:08,338 - INFO     - Added edge (1, 8)
2025-10-29 13:52:08,338 - INFO     - Added edge (2, 0)
2025-10-29 13:52:08,338 - INFO     - Added edge (2, 1)
2025-10-29 13:52:08,338 - INFO     - Added edge (2, 3)
2025-10-29 13:52:08,338 - INFO     - Added edge (2, 4)
2025-10-29 13:52:08,338 - INFO     - Added edge (2, 5)
2025-10-29 13:52:08,338 - INFO     - Added edge (2, 6)
2025-10-29 13:52:08,338 - INFO     - Added edge (2, 7)
2025-10-29 13:52:08,338 - INFO     - Added edge (2, 8)
2025-10-29 13:52:08,339 - INFO     - Added edge (3, 0)
2025-10-29 13:52:08,339 - INFO     - Added edge (3, 1)
2025-10-29 13:52:08,339 - INFO     - Added edge (3, 2)
2025-10-29 13:52:08,339 - INFO     - Added edge (3, 4)
2025-10-29 13:52:08,339 - INFO     - Added edge (3, 5)
2025-10-29 13:52:08,339 - INFO     - Added edge (3, 6)
2025-10-29 13:52:08,339 - INFO     - Added edge (3, 7)
2025-10-29 13:52:08,339 - INFO     - Added edge (3, 8)
2025-10-29 13:52:08,339 - INFO     - Added edge (4, 0)
2025-10-29 13:52:08,339 - INFO     - Added edge (4, 1)
2025-10-29 13:52:08,339 - INFO     - Added edge (4, 2)
2025-10-29 13:52:08,339 - INFO     - Added edge (4, 3)
2025-10-29 13:52:08,339 - INFO     - Added edge (4, 5)
2025-10-29 13:52:08,339 - INFO     - Added edge (4, 6)
2025-10-29 13:52:08,339 - INFO     - Added edge (4, 7)
2025-10-29 13:52:08,339 - INFO     - Added edge (4, 8)
2025-10-29 13:52:08,339 - INFO     - Added edge (5, 0)
2025-10-29 13:52:08,339 - INFO     - Added edge (5, 1)
2025-10-29 13:52:08,339 - INFO     - Added edge (5, 2)
2025-10-29 13:52:08,339 - INFO     - Added edge (5, 3)
2025-10-29 13:52:08,339 - INFO     - Added edge (5, 4)
2025-10-29 13:52:08,340 - INFO     - Added edge (6, 0)
2025-10-29 13:52:08,340 - INFO     - Added edge (6, 1)
2025-10-29 13:52:08,340 - INFO     - Added edge (6, 2)
2025-10-29 13:52:08,340 - INFO     - Added edge (6, 3)
2025-10-29 13:52:08,340 - INFO     - Added edge (6, 4)
2025-10-29 13:52:08,340 - INFO     - Added edge (7, 0)
2025-10-29 13:52:08,340 - INFO     - Added edge (7, 1)
2025-10-29 13:52:08,340 - INFO     - Added edge (7, 2)
2025-10-29 13:52:08,340 - INFO     - Added edge (7, 3)
2025-10-29 13:52:08,340 - INFO     - Added edge (7, 4)
2025-10-29 13:52:08,340 - INFO     - Added edge (8, 0)
2025-10-29 13:52:08,340 - INFO     - Added edge (8, 1)
2025-10-29 13:52:08,340 - INFO     - Added edge (8, 2)
2025-10-29 13:52:08,340 - INFO     - Added edge (8, 3)
2025-10-29 13:52:08,340 - INFO     - Added edge (8, 4)
2025-10-29 13:52:08,340 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:52:08,346 - INFO     - 
==========================================================================================
2025-10-29 13:52:08,346 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:08,347 - INFO     - ==========================================================================================
2025-10-29 13:52:08,347 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:08,347 - INFO     -   Input action: 27 (type: int)
2025-10-29 13:52:08,347 - INFO     -   Available edges in graph: 60
2025-10-29 13:52:08,347 - INFO     -   Action index calculation:
2025-10-29 13:52:08,347 - INFO     -     - action % max(num_valid_edges, 1) = 27 % 60 = 27
2025-10-29 13:52:08,347 - INFO     -     - clamped to [0, 59]: 27
2025-10-29 13:52:08,347 - INFO     -   ✓ Extracted merge pair from edge 27: (3, 4)
2025-10-29 13:52:08,347 - INFO     -   ✓ Validation passed
2025-10-29 13:52:08,347 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:08,347 - INFO     -     - Total states before merge: 30
2025-10-29 13:52:08,347 - INFO     -     - Num nodes: 9
2025-10-29 13:52:08,347 - INFO     -     - Num edges: 60
2025-10-29 13:52:08,348 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:08,348 - INFO     -       - Node 3: 2 states
2025-10-29 13:52:08,348 - INFO     -       - Node 4: 2 states
2025-10-29 13:52:08,348 - INFO     -       - Expected product: 4 states
2025-10-29 13:52:08,348 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:08,358 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:52:08,358 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:08,359 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:52:08,459 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:08,459 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:08,459 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:52:08,459 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:08,459 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:08,459 - INFO     -   Calling graph_tracker.merge_nodes([3, 4])...
2025-10-29 13:52:08,460 - INFO     - Attempting merge of nodes 3 and 4...
2025-10-29 13:52:08,460 - INFO     - Successfully merged nodes into new node 9 with 4 states.
2025-10-29 13:52:08,460 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:08,460 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:08,461 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:52:08,461 - INFO     - 
================================================================================
2025-10-29 13:52:08,461 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:52:08,461 - INFO     - ================================================================================
2025-10-29 13:52:08,461 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:08,461 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:52:08,461 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:52:08,463 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:08,463 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:08,463 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:08,463 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:08,463 - INFO     -   - Raw f_after length: 4
2025-10-29 13:52:08,463 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:08,463 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:08,463 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:08,463 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:52:08,463 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:08,464 - INFO     -   - ts1_id: 3
2025-10-29 13:52:08,464 - INFO     -   - ts2_id: 4
2025-10-29 13:52:08,464 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:08,464 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:08,464 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:52:08,464 - INFO     -   - Product space size: 4
2025-10-29 13:52:08,464 - INFO     -   - Using product state mapping
2025-10-29 13:52:08,464 - INFO     -   - f_before_product length: 4
2025-10-29 13:52:08,464 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:52:08,465 - INFO     -   - avg_f_after:  0.7500 (4 valid states)
2025-10-29 13:52:08,465 - INFO     -   - delta: 0.0000
2025-10-29 13:52:08,465 - INFO     -   - f_stability: 1.0 - |0.0000| / 0.7500 = 1.0000
2025-10-29 13:52:08,465 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:08,465 - INFO     -   - Compared 4 values
2025-10-29 13:52:08,465 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:08,465 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:08,465 - INFO     -   - states_before: 4
2025-10-29 13:52:08,465 - INFO     -   - states_after: 4
2025-10-29 13:52:08,465 - INFO     -   - delta_states: 0
2025-10-29 13:52:08,465 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:08,465 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:08,466 - INFO     -   - ts2_transitions: 3
2025-10-29 13:52:08,466 - INFO     -   - merged_transitions: 15
2025-10-29 13:52:08,466 - INFO     -   - transition_density_change: 1.7500
2025-10-29 13:52:08,466 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:08,466 - INFO     -   - search_signals present: True
2025-10-29 13:52:08,466 - INFO     -   - nodes_expanded: 4
2025-10-29 13:52:08,466 - INFO     -   - search_depth: 0
2025-10-29 13:52:08,466 - INFO     -   - solution_cost: 0
2025-10-29 13:52:08,466 - INFO     -   - branching_factor: 3.7500
2025-10-29 13:52:08,466 - INFO     -   - solution_found: True
2025-10-29 13:52:08,466 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:08,467 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:08,467 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:52:08,467 - INFO     -   - TS3(2) + TS4(2) → 4 states
2025-10-29 13:52:08,467 - INFO     -   - f_stability=1.000
2025-10-29 13:52:08,467 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:52:08,467 - INFO     -   - solution_found=True
2025-10-29 13:52:08,467 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:08,467 - INFO     - 
  Extracted signals:
2025-10-29 13:52:08,467 - INFO     -     - iteration: 0
2025-10-29 13:52:08,467 - INFO     -     - states_before: 4
2025-10-29 13:52:08,467 - INFO     -     - states_after: 4
2025-10-29 13:52:08,468 - INFO     -     - delta_states: 0
2025-10-29 13:52:08,468 - INFO     -     - f_value_stability: 1.0000
2025-10-29 13:52:08,468 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:08,468 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:08,468 - INFO     -     - nodes_expanded: 4
2025-10-29 13:52:08,468 - INFO     -     - search_depth: 0
2025-10-29 13:52:08,468 - INFO     -     - solution_cost: 0
2025-10-29 13:52:08,468 - INFO     -     - branching_factor: 3.7500
2025-10-29 13:52:08,468 - INFO     -     - solution_found: True
2025-10-29 13:52:08,468 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:08,468 - INFO     - 
  Computing reward:
2025-10-29 13:52:08,468 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:08,469 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:08,469 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:08,469 - INFO     -   [1] BRANCHING FACTOR: 3.750 → score 0.600 (tolerable)
2025-10-29 13:52:08,469 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:52:08,469 - INFO     -   [3] F-VALUE STABILITY: 0.260
2025-10-29 13:52:08,469 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:08,469 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:08,469 - INFO     - 
  [COMPOSITE]: 0.491
2025-10-29 13:52:08,469 - INFO     -     = 0.300*0.600 (bf)
2025-10-29 13:52:08,470 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:52:08,470 - INFO     -     + 0.350*0.260 (stability)
2025-10-29 13:52:08,470 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:08,470 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:08,470 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:08,470 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:08,470 - INFO     - 
  [FINAL REWARD]: 0.1819
2025-10-29 13:52:08,470 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:08,470 - INFO     -     ✓ Reward computed: 0.1819
2025-10-29 13:52:08,470 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:08,470 - INFO     -     - bf_score                       0.6000
2025-10-29 13:52:08,470 - INFO     -     - depth_score                    0.5000
2025-10-29 13:52:08,470 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:08,470 - INFO     -     - f_stability                    0.2598
2025-10-29 13:52:08,471 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:08,471 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:08,471 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:08,471 - INFO     -     - composite                      0.4909
2025-10-29 13:52:08,471 - INFO     -     - total                          0.1819
2025-10-29 13:52:08,471 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:08,471 - INFO     -   Num remaining nodes: 8
2025-10-29 13:52:08,471 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:52:08,471 - INFO     -   Done: False
2025-10-29 13:52:08,471 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:08,473 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:08,473 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:08,473 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:08,473 - INFO     -     - num_nodes: 8
2025-10-29 13:52:08,473 - INFO     -     - num_edges: 44
2025-10-29 13:52:08,473 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:08,473 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:52:08,473 - INFO     -   After: current_merge_step = 1
2025-10-29 13:52:08,474 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:08,474 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:08,474 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:08,475 - INFO     -   ✓ Step logged
2025-10-29 13:52:08,475 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:08,475 - INFO     -   Returning:
2025-10-29 13:52:08,475 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:08,475 - INFO     -     - reward: 0.1819
2025-10-29 13:52:08,475 - INFO     -     - done: False
2025-10-29 13:52:08,475 - INFO     -     - truncated: False
2025-10-29 13:52:08,475 - INFO     -     - info: 19 keys
2025-10-29 13:52:08,475 - INFO     - ==========================================================================================

2025-10-29 13:52:08,481 - INFO     - 
==========================================================================================
2025-10-29 13:52:08,481 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:08,481 - INFO     - ==========================================================================================
2025-10-29 13:52:08,481 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:08,481 - INFO     -   Input action: 40 (type: int)
2025-10-29 13:52:08,482 - INFO     -   Available edges in graph: 44
2025-10-29 13:52:08,482 - INFO     -   Action index calculation:
2025-10-29 13:52:08,482 - INFO     -     - action % max(num_valid_edges, 1) = 40 % 44 = 40
2025-10-29 13:52:08,482 - INFO     -     - clamped to [0, 43]: 40
2025-10-29 13:52:08,482 - INFO     -   ✓ Extracted merge pair from edge 40: (9, 5)
2025-10-29 13:52:08,482 - INFO     -   ✓ Validation passed
2025-10-29 13:52:08,482 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:08,482 - INFO     -     - Total states before merge: 30
2025-10-29 13:52:08,482 - INFO     -     - Num nodes: 8
2025-10-29 13:52:08,482 - INFO     -     - Num edges: 44
2025-10-29 13:52:08,482 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:08,482 - INFO     -       - Node 9: 4 states
2025-10-29 13:52:08,482 - INFO     -       - Node 5: 5 states
2025-10-29 13:52:08,483 - INFO     -       - Expected product: 20 states
2025-10-29 13:52:08,483 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:08,489 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:52:08,489 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:08,489 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:52:08,590 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:08,590 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:08,590 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:52:08,591 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:08,591 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:08,591 - INFO     -   Calling graph_tracker.merge_nodes([9, 5])...
2025-10-29 13:52:08,591 - INFO     - Attempting merge of nodes 9 and 5...
2025-10-29 13:52:08,591 - INFO     - Successfully merged nodes into new node 10 with 20 states.
2025-10-29 13:52:08,591 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:08,591 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:08,591 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:52:08,591 - INFO     - 
================================================================================
2025-10-29 13:52:08,591 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:52:08,591 - INFO     - ================================================================================
2025-10-29 13:52:08,591 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:08,591 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:52:08,591 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:52:08,592 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:08,592 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:08,592 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:52:08,592 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:08,592 - INFO     -   - Raw f_after length: 20
2025-10-29 13:52:08,592 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:08,592 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:52:08,592 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:08,592 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:52:08,592 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:08,592 - INFO     -   - ts1_id: 9
2025-10-29 13:52:08,593 - INFO     -   - ts2_id: 5
2025-10-29 13:52:08,593 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:08,593 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:08,593 - INFO     -   - ts1_size: 4, ts2_size: 5
2025-10-29 13:52:08,593 - INFO     -   - Product space size: 20
2025-10-29 13:52:08,593 - INFO     -   - Using product state mapping
2025-10-29 13:52:08,593 - INFO     -   - f_before_product length: 20
2025-10-29 13:52:08,593 - INFO     -   - avg_f_before: 2.8000 (20 valid states)
2025-10-29 13:52:08,594 - INFO     -   - avg_f_after:  3.8500 (20 valid states)
2025-10-29 13:52:08,594 - INFO     -   - delta: 1.0500
2025-10-29 13:52:08,594 - INFO     -   - f_stability: 1.0 - |1.0500| / 2.8000 = 0.6250
2025-10-29 13:52:08,594 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:08,594 - INFO     -   - Compared 9 values
2025-10-29 13:52:08,594 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:08,594 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:08,594 - INFO     -   - states_before: 20
2025-10-29 13:52:08,594 - INFO     -   - states_after: 20
2025-10-29 13:52:08,594 - INFO     -   - delta_states: 0
2025-10-29 13:52:08,594 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:08,594 - INFO     -   - ts1_transitions: 15
2025-10-29 13:52:08,595 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:08,595 - INFO     -   - merged_transitions: 97
2025-10-29 13:52:08,595 - INFO     -   - transition_density_change: 3.4500
2025-10-29 13:52:08,595 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:08,595 - INFO     -   - search_signals present: True
2025-10-29 13:52:08,595 - INFO     -   - nodes_expanded: 20
2025-10-29 13:52:08,595 - INFO     -   - search_depth: 2
2025-10-29 13:52:08,595 - INFO     -   - solution_cost: 2
2025-10-29 13:52:08,595 - INFO     -   - branching_factor: 4.8500
2025-10-29 13:52:08,595 - INFO     -   - solution_found: True
2025-10-29 13:52:08,595 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:08,595 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:08,596 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:52:08,596 - INFO     -   - TS9(4) + TS5(5) → 20 states
2025-10-29 13:52:08,596 - INFO     -   - f_stability=0.625
2025-10-29 13:52:08,596 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:52:08,596 - INFO     -   - solution_found=True
2025-10-29 13:52:08,596 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:08,596 - INFO     - 
  Extracted signals:
2025-10-29 13:52:08,596 - INFO     -     - iteration: 1
2025-10-29 13:52:08,596 - INFO     -     - states_before: 20
2025-10-29 13:52:08,596 - INFO     -     - states_after: 20
2025-10-29 13:52:08,596 - INFO     -     - delta_states: 0
2025-10-29 13:52:08,596 - INFO     -     - f_value_stability: 0.6250
2025-10-29 13:52:08,596 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:08,597 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:08,597 - INFO     -     - nodes_expanded: 20
2025-10-29 13:52:08,597 - INFO     -     - search_depth: 2
2025-10-29 13:52:08,597 - INFO     -     - solution_cost: 2
2025-10-29 13:52:08,597 - INFO     -     - branching_factor: 4.8500
2025-10-29 13:52:08,597 - INFO     -     - solution_found: True
2025-10-29 13:52:08,597 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:08,597 - INFO     - 
  Computing reward:
2025-10-29 13:52:08,597 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:08,597 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:08,597 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:08,597 - INFO     -   [1] BRANCHING FACTOR: 4.850 → score 0.453 (tolerable)
2025-10-29 13:52:08,597 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:52:08,597 - INFO     -   [3] F-VALUE STABILITY: 0.460
2025-10-29 13:52:08,597 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:52:08,597 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:08,597 - INFO     - 
  [COMPOSITE]: 0.589
2025-10-29 13:52:08,598 - INFO     -     = 0.300*0.453 (bf)
2025-10-29 13:52:08,598 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:52:08,598 - INFO     -     + 0.350*0.460 (stability)
2025-10-29 13:52:08,598 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:08,598 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:08,598 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:08,598 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:52:08,598 - INFO     - 
  [FINAL REWARD]: 0.4779
2025-10-29 13:52:08,598 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:08,598 - INFO     -     ✓ Reward computed: 0.4779
2025-10-29 13:52:08,598 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:08,598 - INFO     -     - bf_score                       0.4533
2025-10-29 13:52:08,598 - INFO     -     - depth_score                    0.8603
2025-10-29 13:52:08,598 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:08,599 - INFO     -     - f_stability                    0.4597
2025-10-29 13:52:08,599 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:52:08,599 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:08,599 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:08,599 - INFO     -     - composite                      0.5889
2025-10-29 13:52:08,599 - INFO     -     - total                          0.4779
2025-10-29 13:52:08,599 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:08,599 - INFO     -   Num remaining nodes: 7
2025-10-29 13:52:08,599 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:52:08,599 - INFO     -   Done: False
2025-10-29 13:52:08,599 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:08,601 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:08,601 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:08,601 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:08,601 - INFO     -     - num_nodes: 7
2025-10-29 13:52:08,601 - INFO     -     - num_edges: 36
2025-10-29 13:52:08,601 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:08,601 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:52:08,601 - INFO     -   After: current_merge_step = 2
2025-10-29 13:52:08,601 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:08,601 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:08,601 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:08,602 - INFO     -   ✓ Step logged
2025-10-29 13:52:08,602 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:08,602 - INFO     -   Returning:
2025-10-29 13:52:08,602 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:08,602 - INFO     -     - reward: 0.4779
2025-10-29 13:52:08,603 - INFO     -     - done: False
2025-10-29 13:52:08,603 - INFO     -     - truncated: False
2025-10-29 13:52:08,603 - INFO     -     - info: 19 keys
2025-10-29 13:52:08,603 - INFO     - ==========================================================================================

2025-10-29 13:52:08,607 - INFO     - 
==========================================================================================
2025-10-29 13:52:08,607 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:08,607 - INFO     - ==========================================================================================
2025-10-29 13:52:08,607 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:08,607 - INFO     -   Input action: 23 (type: int)
2025-10-29 13:52:08,607 - INFO     -   Available edges in graph: 36
2025-10-29 13:52:08,608 - INFO     -   Action index calculation:
2025-10-29 13:52:08,608 - INFO     -     - action % max(num_valid_edges, 1) = 23 % 36 = 23
2025-10-29 13:52:08,608 - INFO     -     - clamped to [0, 35]: 23
2025-10-29 13:52:08,608 - INFO     -   ✓ Extracted merge pair from edge 23: (7, 1)
2025-10-29 13:52:08,608 - INFO     -   ✓ Validation passed
2025-10-29 13:52:08,608 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:08,608 - INFO     -     - Total states before merge: 41
2025-10-29 13:52:08,608 - INFO     -     - Num nodes: 7
2025-10-29 13:52:08,608 - INFO     -     - Num edges: 36
2025-10-29 13:52:08,609 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:08,609 - INFO     -       - Node 7: 5 states
2025-10-29 13:52:08,609 - INFO     -       - Node 1: 2 states
2025-10-29 13:52:08,609 - INFO     -       - Expected product: 10 states
2025-10-29 13:52:08,609 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:08,619 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:52:08,619 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:08,619 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:52:08,720 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:08,721 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:08,721 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:52:08,721 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:08,721 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:08,721 - INFO     -   Calling graph_tracker.merge_nodes([7, 1])...
2025-10-29 13:52:08,721 - INFO     - Attempting merge of nodes 7 and 1...
2025-10-29 13:52:08,721 - INFO     - Successfully merged nodes into new node 11 with 10 states.
2025-10-29 13:52:08,721 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:08,721 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:08,722 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:52:08,722 - INFO     - 
================================================================================
2025-10-29 13:52:08,722 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:52:08,722 - INFO     - ================================================================================
2025-10-29 13:52:08,722 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:08,722 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:52:08,722 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:52:08,722 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:08,723 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:08,723 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:08,723 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:08,723 - INFO     -   - Raw f_after length: 10
2025-10-29 13:52:08,723 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:08,723 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:08,723 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:08,723 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:52:08,723 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:08,723 - INFO     -   - ts1_id: 7
2025-10-29 13:52:08,723 - INFO     -   - ts2_id: 1
2025-10-29 13:52:08,723 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:08,723 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:08,723 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:52:08,723 - INFO     -   - Product space size: 10
2025-10-29 13:52:08,723 - INFO     -   - Using product state mapping
2025-10-29 13:52:08,723 - INFO     -   - f_before_product length: 10
2025-10-29 13:52:08,724 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:52:08,724 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:52:08,724 - INFO     -   - delta: 0.5000
2025-10-29 13:52:08,724 - INFO     -   - f_stability: 1.0 - |0.5000| / 2.8000 = 0.8214
2025-10-29 13:52:08,724 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:08,724 - INFO     -   - Compared 7 values
2025-10-29 13:52:08,724 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:08,724 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:08,724 - INFO     -   - states_before: 10
2025-10-29 13:52:08,724 - INFO     -   - states_after: 10
2025-10-29 13:52:08,724 - INFO     -   - delta_states: 0
2025-10-29 13:52:08,724 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:08,724 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:08,724 - INFO     -   - ts2_transitions: 5
2025-10-29 13:52:08,724 - INFO     -   - merged_transitions: 40
2025-10-29 13:52:08,724 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:52:08,724 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:08,725 - INFO     -   - search_signals present: True
2025-10-29 13:52:08,725 - INFO     -   - nodes_expanded: 10
2025-10-29 13:52:08,725 - INFO     -   - search_depth: 1
2025-10-29 13:52:08,725 - INFO     -   - solution_cost: 2
2025-10-29 13:52:08,725 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:52:08,725 - INFO     -   - solution_found: True
2025-10-29 13:52:08,725 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:08,725 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:08,725 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:52:08,725 - INFO     -   - TS7(5) + TS1(2) → 10 states
2025-10-29 13:52:08,725 - INFO     -   - f_stability=0.821
2025-10-29 13:52:08,725 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:52:08,725 - INFO     -   - solution_found=True
2025-10-29 13:52:08,725 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:08,725 - INFO     - 
  Extracted signals:
2025-10-29 13:52:08,726 - INFO     -     - iteration: 2
2025-10-29 13:52:08,726 - INFO     -     - states_before: 10
2025-10-29 13:52:08,726 - INFO     -     - states_after: 10
2025-10-29 13:52:08,726 - INFO     -     - delta_states: 0
2025-10-29 13:52:08,726 - INFO     -     - f_value_stability: 0.8214
2025-10-29 13:52:08,726 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:08,726 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:08,726 - INFO     -     - nodes_expanded: 10
2025-10-29 13:52:08,726 - INFO     -     - search_depth: 1
2025-10-29 13:52:08,727 - INFO     -     - solution_cost: 2
2025-10-29 13:52:08,727 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:52:08,727 - INFO     -     - solution_found: True
2025-10-29 13:52:08,727 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:08,727 - INFO     - 
  Computing reward:
2025-10-29 13:52:08,727 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:08,727 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:08,727 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:08,727 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:52:08,727 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:52:08,727 - INFO     -   [3] F-VALUE STABILITY: 0.593
2025-10-29 13:52:08,727 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:52:08,727 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:08,727 - INFO     - 
  [COMPOSITE]: 0.680
2025-10-29 13:52:08,727 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:52:08,727 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:52:08,727 - INFO     -     + 0.350*0.593 (stability)
2025-10-29 13:52:08,727 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:08,727 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:08,727 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:08,727 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:52:08,728 - INFO     - 
  [FINAL REWARD]: 0.7602
2025-10-29 13:52:08,728 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:08,728 - INFO     -     ✓ Reward computed: 0.7602
2025-10-29 13:52:08,728 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:08,728 - INFO     -     - bf_score                       0.5667
2025-10-29 13:52:08,728 - INFO     -     - depth_score                    0.9119
2025-10-29 13:52:08,728 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:08,728 - INFO     -     - f_stability                    0.5935
2025-10-29 13:52:08,728 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:52:08,728 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:08,728 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:08,728 - INFO     -     - composite                      0.6801
2025-10-29 13:52:08,728 - INFO     -     - total                          0.7602
2025-10-29 13:52:08,728 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:08,728 - INFO     -   Num remaining nodes: 6
2025-10-29 13:52:08,728 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:52:08,728 - INFO     -   Done: False
2025-10-29 13:52:08,728 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:08,730 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:08,730 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:08,730 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:08,730 - INFO     -     - num_nodes: 6
2025-10-29 13:52:08,731 - INFO     -     - num_edges: 28
2025-10-29 13:52:08,731 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:08,731 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:52:08,731 - INFO     -   After: current_merge_step = 3
2025-10-29 13:52:08,731 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:08,731 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:08,731 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:08,733 - INFO     -   ✓ Step logged
2025-10-29 13:52:08,733 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:08,733 - INFO     -   Returning:
2025-10-29 13:52:08,734 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:08,734 - INFO     -     - reward: 0.7602
2025-10-29 13:52:08,734 - INFO     -     - done: False
2025-10-29 13:52:08,734 - INFO     -     - truncated: False
2025-10-29 13:52:08,734 - INFO     -     - info: 19 keys
2025-10-29 13:52:08,734 - INFO     - ==========================================================================================

2025-10-29 13:52:08,738 - INFO     - 
==========================================================================================
2025-10-29 13:52:08,738 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:08,738 - INFO     - ==========================================================================================
2025-10-29 13:52:08,738 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:08,738 - INFO     -   Input action: 22 (type: int)
2025-10-29 13:52:08,738 - INFO     -   Available edges in graph: 28
2025-10-29 13:52:08,738 - INFO     -   Action index calculation:
2025-10-29 13:52:08,738 - INFO     -     - action % max(num_valid_edges, 1) = 22 % 28 = 22
2025-10-29 13:52:08,739 - INFO     -     - clamped to [0, 27]: 22
2025-10-29 13:52:08,739 - INFO     -   ✓ Extracted merge pair from edge 22: (10, 11)
2025-10-29 13:52:08,739 - INFO     -   ✓ Validation passed
2025-10-29 13:52:08,739 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:08,739 - INFO     -     - Total states before merge: 44
2025-10-29 13:52:08,739 - INFO     -     - Num nodes: 6
2025-10-29 13:52:08,739 - INFO     -     - Num edges: 28
2025-10-29 13:52:08,739 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:08,739 - INFO     -       - Node 10: 20 states
2025-10-29 13:52:08,739 - INFO     -       - Node 11: 10 states
2025-10-29 13:52:08,739 - INFO     -       - Expected product: 200 states
2025-10-29 13:52:08,739 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:08,745 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:52:08,745 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:08,745 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:52:08,847 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:08,847 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:08,847 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:52:08,849 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:08,850 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:08,850 - INFO     -   Calling graph_tracker.merge_nodes([10, 11])...
2025-10-29 13:52:08,850 - INFO     - Attempting merge of nodes 10 and 11...
2025-10-29 13:52:08,850 - INFO     - Successfully merged nodes into new node 12 with 200 states.
2025-10-29 13:52:08,850 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:08,850 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:08,850 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:52:08,850 - INFO     - 
================================================================================
2025-10-29 13:52:08,850 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:52:08,850 - INFO     - ================================================================================
2025-10-29 13:52:08,851 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:08,851 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:52:08,851 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:52:08,852 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:08,852 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:08,852 - INFO     -   - Raw ts1_f length: 20
2025-10-29 13:52:08,852 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:52:08,852 - INFO     -   - Raw f_after length: 200
2025-10-29 13:52:08,852 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:08,852 - INFO     -   - ts1_valid: 20 / 20 (removed 0)
2025-10-29 13:52:08,852 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:52:08,853 - INFO     -   - after_valid: 183 / 200 (removed 17)
2025-10-29 13:52:08,853 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:08,853 - INFO     -   - ts1_id: 10
2025-10-29 13:52:08,853 - INFO     -   - ts2_id: 11
2025-10-29 13:52:08,853 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:08,853 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:08,853 - INFO     -   - ts1_size: 20, ts2_size: 10
2025-10-29 13:52:08,853 - INFO     -   - Product space size: 200
2025-10-29 13:52:08,853 - INFO     -   - Using product state mapping
2025-10-29 13:52:08,854 - INFO     -   - f_before_product length: 200
2025-10-29 13:52:08,854 - INFO     -   - avg_f_before: 4.2950 (200 valid states)
2025-10-29 13:52:08,855 - INFO     -   - avg_f_after:  7.5519 (183 valid states)
2025-10-29 13:52:08,855 - INFO     -   - delta: 3.2569
2025-10-29 13:52:08,855 - INFO     -   - f_stability: 1.0 - |3.2569| / 4.2950 = 0.2417
2025-10-29 13:52:08,855 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:08,855 - INFO     -   - Compared 30 values
2025-10-29 13:52:08,855 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:08,855 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:08,855 - INFO     -   - states_before: 200
2025-10-29 13:52:08,855 - INFO     -   - states_after: 200
2025-10-29 13:52:08,855 - INFO     -   - delta_states: 0
2025-10-29 13:52:08,855 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:08,856 - INFO     -   - ts1_transitions: 97
2025-10-29 13:52:08,856 - INFO     -   - ts2_transitions: 40
2025-10-29 13:52:08,856 - INFO     -   - merged_transitions: 1200
2025-10-29 13:52:08,856 - INFO     -   - transition_density_change: 5.3150
2025-10-29 13:52:08,856 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:08,856 - INFO     -   - search_signals present: True
2025-10-29 13:52:08,856 - INFO     -   - nodes_expanded: 183
2025-10-29 13:52:08,856 - INFO     -   - search_depth: 4
2025-10-29 13:52:08,857 - INFO     -   - solution_cost: 4
2025-10-29 13:52:08,857 - INFO     -   - branching_factor: 6.5574
2025-10-29 13:52:08,857 - INFO     -   - solution_found: True
2025-10-29 13:52:08,857 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:08,857 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:08,857 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:52:08,857 - INFO     -   - TS10(20) + TS11(10) → 200 states
2025-10-29 13:52:08,857 - INFO     -   - f_stability=0.242
2025-10-29 13:52:08,857 - INFO     -   - A* nodes_expanded=183
2025-10-29 13:52:08,857 - INFO     -   - solution_found=True
2025-10-29 13:52:08,858 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:08,858 - INFO     - 
  Extracted signals:
2025-10-29 13:52:08,858 - INFO     -     - iteration: 3
2025-10-29 13:52:08,858 - INFO     -     - states_before: 200
2025-10-29 13:52:08,858 - INFO     -     - states_after: 200
2025-10-29 13:52:08,858 - INFO     -     - delta_states: 0
2025-10-29 13:52:08,858 - INFO     -     - f_value_stability: 0.2417
2025-10-29 13:52:08,858 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:08,858 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:08,858 - INFO     -     - nodes_expanded: 183
2025-10-29 13:52:08,858 - INFO     -     - search_depth: 4
2025-10-29 13:52:08,858 - INFO     -     - solution_cost: 4
2025-10-29 13:52:08,858 - INFO     -     - branching_factor: 6.5574
2025-10-29 13:52:08,858 - INFO     -     - solution_found: True
2025-10-29 13:52:08,858 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:08,858 - WARNING  -     ⚠️  Poor F-stability: 0.2417
2025-10-29 13:52:08,859 - INFO     - 
  Computing reward:
2025-10-29 13:52:08,859 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:08,859 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:08,859 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:08,859 - INFO     -   [1] BRANCHING FACTOR: 6.557 → score 0.244 (high BF, minimal credit)
2025-10-29 13:52:08,859 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:52:08,859 - INFO     -   [3] F-VALUE STABILITY: 0.176
2025-10-29 13:52:08,859 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:08,859 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:08,861 - INFO     - 
  [COMPOSITE]: 0.414
2025-10-29 13:52:08,861 - INFO     -     = 0.300*0.244 (bf)
2025-10-29 13:52:08,861 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:52:08,861 - INFO     -     + 0.350*0.176 (stability)
2025-10-29 13:52:08,861 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:08,861 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:08,861 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:08,861 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:08,861 - INFO     - 
  [FINAL REWARD]: 0.0279
2025-10-29 13:52:08,861 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:08,861 - INFO     -     ✓ Reward computed: 0.0279
2025-10-29 13:52:08,862 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:08,862 - INFO     -     - bf_score                       0.2443
2025-10-29 13:52:08,862 - INFO     -     - depth_score                    0.7953
2025-10-29 13:52:08,862 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:08,862 - INFO     -     - f_stability                    0.1760
2025-10-29 13:52:08,862 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:08,862 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:08,862 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:08,862 - INFO     -     - composite                      0.4140
2025-10-29 13:52:08,862 - INFO     -     - total                          0.0279
2025-10-29 13:52:08,862 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:08,862 - INFO     -   Num remaining nodes: 5
2025-10-29 13:52:08,862 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:52:08,862 - INFO     -   Done: False
2025-10-29 13:52:08,862 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:08,863 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:08,863 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:08,863 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:08,863 - INFO     -     - num_nodes: 5
2025-10-29 13:52:08,864 - INFO     -     - num_edges: 18
2025-10-29 13:52:08,864 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:08,864 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:52:08,864 - INFO     -   After: current_merge_step = 4
2025-10-29 13:52:08,864 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:08,864 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:08,864 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:08,865 - INFO     -   ✓ Step logged
2025-10-29 13:52:08,865 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:08,865 - INFO     -   Returning:
2025-10-29 13:52:08,865 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:08,865 - INFO     -     - reward: 0.0279
2025-10-29 13:52:08,865 - INFO     -     - done: False
2025-10-29 13:52:08,865 - INFO     -     - truncated: False
2025-10-29 13:52:08,865 - INFO     -     - info: 19 keys
2025-10-29 13:52:08,866 - INFO     - ==========================================================================================

2025-10-29 13:52:08,871 - INFO     - 
==========================================================================================
2025-10-29 13:52:08,871 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:08,871 - INFO     - ==========================================================================================
2025-10-29 13:52:08,872 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:08,872 - INFO     -   Input action: 12 (type: int)
2025-10-29 13:52:08,872 - INFO     -   Available edges in graph: 18
2025-10-29 13:52:08,872 - INFO     -   Action index calculation:
2025-10-29 13:52:08,872 - INFO     -     - action % max(num_valid_edges, 1) = 12 % 18 = 12
2025-10-29 13:52:08,872 - INFO     -     - clamped to [0, 17]: 12
2025-10-29 13:52:08,872 - INFO     -   ✓ Extracted merge pair from edge 12: (8, 2)
2025-10-29 13:52:08,872 - INFO     -   ✓ Validation passed
2025-10-29 13:52:08,872 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:08,872 - INFO     -     - Total states before merge: 214
2025-10-29 13:52:08,872 - INFO     -     - Num nodes: 5
2025-10-29 13:52:08,872 - INFO     -     - Num edges: 18
2025-10-29 13:52:08,872 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:08,873 - INFO     -       - Node 8: 5 states
2025-10-29 13:52:08,873 - INFO     -       - Node 2: 2 states
2025-10-29 13:52:08,873 - INFO     -       - Expected product: 10 states
2025-10-29 13:52:08,873 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:08,879 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:52:08,879 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:08,879 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:52:08,980 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:08,981 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:08,981 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:52:08,981 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:08,981 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:08,981 - INFO     -   Calling graph_tracker.merge_nodes([8, 2])...
2025-10-29 13:52:08,981 - INFO     - Attempting merge of nodes 8 and 2...
2025-10-29 13:52:08,982 - INFO     - Successfully merged nodes into new node 13 with 10 states.
2025-10-29 13:52:08,982 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:08,982 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:08,982 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:52:08,982 - INFO     - 
================================================================================
2025-10-29 13:52:08,982 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:52:08,982 - INFO     - ================================================================================
2025-10-29 13:52:08,982 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:08,982 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:52:08,982 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:52:08,983 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:08,983 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:08,983 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:08,983 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:08,983 - INFO     -   - Raw f_after length: 10
2025-10-29 13:52:08,983 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:08,983 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:08,983 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:08,983 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:52:08,983 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:08,983 - INFO     -   - ts1_id: 8
2025-10-29 13:52:08,983 - INFO     -   - ts2_id: 2
2025-10-29 13:52:08,983 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:08,984 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:08,984 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:52:08,984 - INFO     -   - Product space size: 10
2025-10-29 13:52:08,984 - INFO     -   - Using product state mapping
2025-10-29 13:52:08,984 - INFO     -   - f_before_product length: 10
2025-10-29 13:52:08,984 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:52:08,984 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:52:08,984 - INFO     -   - delta: 0.4000
2025-10-29 13:52:08,984 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:52:08,984 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:08,984 - INFO     -   - Compared 7 values
2025-10-29 13:52:08,984 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:08,984 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:08,984 - INFO     -   - states_before: 10
2025-10-29 13:52:08,984 - INFO     -   - states_after: 10
2025-10-29 13:52:08,985 - INFO     -   - delta_states: 0
2025-10-29 13:52:08,985 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:08,985 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:08,985 - INFO     -   - ts2_transitions: 5
2025-10-29 13:52:08,985 - INFO     -   - merged_transitions: 40
2025-10-29 13:52:08,985 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:52:08,985 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:08,985 - INFO     -   - search_signals present: True
2025-10-29 13:52:08,985 - INFO     -   - nodes_expanded: 10
2025-10-29 13:52:08,985 - INFO     -   - search_depth: 1
2025-10-29 13:52:08,985 - INFO     -   - solution_cost: 0
2025-10-29 13:52:08,985 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:52:08,985 - INFO     -   - solution_found: True
2025-10-29 13:52:08,985 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:08,985 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:08,986 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:52:08,986 - INFO     -   - TS8(5) + TS2(2) → 10 states
2025-10-29 13:52:08,986 - INFO     -   - f_stability=0.862
2025-10-29 13:52:08,986 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:52:08,986 - INFO     -   - solution_found=True
2025-10-29 13:52:08,986 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:08,986 - INFO     - 
  Extracted signals:
2025-10-29 13:52:08,986 - INFO     -     - iteration: 4
2025-10-29 13:52:08,986 - INFO     -     - states_before: 10
2025-10-29 13:52:08,986 - INFO     -     - states_after: 10
2025-10-29 13:52:08,986 - INFO     -     - delta_states: 0
2025-10-29 13:52:08,986 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:52:08,986 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:08,986 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:08,986 - INFO     -     - nodes_expanded: 10
2025-10-29 13:52:08,986 - INFO     -     - search_depth: 1
2025-10-29 13:52:08,987 - INFO     -     - solution_cost: 0
2025-10-29 13:52:08,987 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:52:08,987 - INFO     -     - solution_found: True
2025-10-29 13:52:08,987 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:08,987 - INFO     - 
  Computing reward:
2025-10-29 13:52:08,987 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:08,987 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:08,987 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:08,987 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:52:08,987 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:52:08,987 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:52:08,987 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:08,988 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:08,988 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:52:08,988 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:52:08,988 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:52:08,988 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:52:08,988 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:08,988 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:08,988 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:08,988 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:08,988 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:52:08,988 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:08,988 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:52:08,988 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:08,988 - INFO     -     - bf_score                       0.5667
2025-10-29 13:52:08,988 - INFO     -     - depth_score                    0.9119
2025-10-29 13:52:08,989 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:08,989 - INFO     -     - f_stability                    0.2913
2025-10-29 13:52:08,989 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:08,989 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:08,989 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:08,989 - INFO     -     - composite                      0.5743
2025-10-29 13:52:08,989 - INFO     -     - total                          0.3487
2025-10-29 13:52:08,989 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:08,989 - INFO     -   Num remaining nodes: 4
2025-10-29 13:52:08,989 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:52:08,989 - INFO     -   Done: False
2025-10-29 13:52:08,989 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:08,990 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:08,990 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:08,990 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:08,990 - INFO     -     - num_nodes: 4
2025-10-29 13:52:08,990 - INFO     -     - num_edges: 12
2025-10-29 13:52:08,990 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:08,990 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:52:08,990 - INFO     -   After: current_merge_step = 5
2025-10-29 13:52:08,990 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:08,990 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:08,991 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:08,991 - INFO     -   ✓ Step logged
2025-10-29 13:52:08,991 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:08,991 - INFO     -   Returning:
2025-10-29 13:52:08,991 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:08,991 - INFO     -     - reward: 0.3487
2025-10-29 13:52:08,991 - INFO     -     - done: False
2025-10-29 13:52:08,991 - INFO     -     - truncated: False
2025-10-29 13:52:08,991 - INFO     -     - info: 19 keys
2025-10-29 13:52:08,991 - INFO     - ==========================================================================================

2025-10-29 13:52:08,997 - INFO     - 
==========================================================================================
2025-10-29 13:52:08,997 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:08,997 - INFO     - ==========================================================================================
2025-10-29 13:52:08,997 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:08,997 - INFO     -   Input action: 6 (type: int)
2025-10-29 13:52:08,997 - INFO     -   Available edges in graph: 12
2025-10-29 13:52:08,997 - INFO     -   Action index calculation:
2025-10-29 13:52:08,998 - INFO     -     - action % max(num_valid_edges, 1) = 6 % 12 = 6
2025-10-29 13:52:08,998 - INFO     -     - clamped to [0, 11]: 6
2025-10-29 13:52:08,998 - INFO     -   ✓ Extracted merge pair from edge 6: (12, 0)
2025-10-29 13:52:08,998 - INFO     -   ✓ Validation passed
2025-10-29 13:52:08,998 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:08,998 - INFO     -     - Total states before merge: 217
2025-10-29 13:52:08,998 - INFO     -     - Num nodes: 4
2025-10-29 13:52:08,998 - INFO     -     - Num edges: 12
2025-10-29 13:52:08,998 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:08,998 - INFO     -       - Node 12: 200 states
2025-10-29 13:52:08,998 - INFO     -       - Node 0: 2 states
2025-10-29 13:52:08,998 - INFO     -       - Expected product: 400 states
2025-10-29 13:52:08,998 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:09,004 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:52:09,004 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:09,004 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:52:09,105 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:09,105 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:09,105 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:52:09,109 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:09,109 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:09,109 - INFO     -   Calling graph_tracker.merge_nodes([12, 0])...
2025-10-29 13:52:09,109 - INFO     - Attempting merge of nodes 12 and 0...
2025-10-29 13:52:09,109 - INFO     - Successfully merged nodes into new node 14 with 400 states.
2025-10-29 13:52:09,109 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:09,109 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:09,109 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:52:09,110 - INFO     - 
================================================================================
2025-10-29 13:52:09,110 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:52:09,110 - INFO     - ================================================================================
2025-10-29 13:52:09,110 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:09,110 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:52:09,110 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:52:09,111 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:09,111 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:09,111 - INFO     -   - Raw ts1_f length: 183
2025-10-29 13:52:09,111 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:09,111 - INFO     -   - Raw f_after length: 366
2025-10-29 13:52:09,111 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:09,112 - INFO     -   - ts1_valid: 183 / 183 (removed 0)
2025-10-29 13:52:09,112 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:09,113 - INFO     -   - after_valid: 357 / 366 (removed 9)
2025-10-29 13:52:09,113 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:09,113 - INFO     -   - ts1_id: 12
2025-10-29 13:52:09,113 - INFO     -   - ts2_id: 0
2025-10-29 13:52:09,113 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:09,113 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:09,113 - INFO     -   - ts1_size: 183, ts2_size: 2
2025-10-29 13:52:09,113 - INFO     -   - Product space size: 366
2025-10-29 13:52:09,113 - INFO     -   - Using product state mapping
2025-10-29 13:52:09,114 - INFO     -   - f_before_product length: 366
2025-10-29 13:52:09,115 - INFO     -   - avg_f_before: 7.5519 (366 valid states)
2025-10-29 13:52:09,115 - INFO     -   - avg_f_after:  8.4986 (357 valid states)
2025-10-29 13:52:09,115 - INFO     -   - delta: 0.9467
2025-10-29 13:52:09,115 - INFO     -   - f_stability: 1.0 - |0.9467| / 7.5519 = 0.8746
2025-10-29 13:52:09,115 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:09,116 - INFO     -   - Compared 185 values
2025-10-29 13:52:09,116 - INFO     -   - Significant changes (> 5.0): 6
2025-10-29 13:52:09,116 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:09,116 - INFO     -   - states_before: 366
2025-10-29 13:52:09,116 - INFO     -   - states_after: 366
2025-10-29 13:52:09,116 - INFO     -   - delta_states: 0
2025-10-29 13:52:09,116 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:09,116 - INFO     -   - ts1_transitions: 1130
2025-10-29 13:52:09,116 - INFO     -   - ts2_transitions: 5
2025-10-29 13:52:09,116 - INFO     -   - merged_transitions: 2707
2025-10-29 13:52:09,116 - INFO     -   - transition_density_change: 4.2951
2025-10-29 13:52:09,116 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:09,117 - INFO     -   - search_signals present: True
2025-10-29 13:52:09,117 - INFO     -   - nodes_expanded: 357
2025-10-29 13:52:09,117 - INFO     -   - search_depth: 4
2025-10-29 13:52:09,117 - INFO     -   - solution_cost: 4
2025-10-29 13:52:09,117 - INFO     -   - branching_factor: 7.5826
2025-10-29 13:52:09,117 - INFO     -   - solution_found: True
2025-10-29 13:52:09,117 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:09,117 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:09,118 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:52:09,118 - INFO     -   - TS12(183) + TS0(2) → 366 states
2025-10-29 13:52:09,118 - INFO     -   - f_stability=0.875
2025-10-29 13:52:09,118 - INFO     -   - A* nodes_expanded=357
2025-10-29 13:52:09,118 - INFO     -   - solution_found=True
2025-10-29 13:52:09,118 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:09,118 - INFO     - 
  Extracted signals:
2025-10-29 13:52:09,118 - INFO     -     - iteration: 5
2025-10-29 13:52:09,118 - INFO     -     - states_before: 366
2025-10-29 13:52:09,118 - INFO     -     - states_after: 366
2025-10-29 13:52:09,118 - INFO     -     - delta_states: 0
2025-10-29 13:52:09,119 - INFO     -     - f_value_stability: 0.8746
2025-10-29 13:52:09,119 - INFO     -     - num_significant_f_changes: 6
2025-10-29 13:52:09,119 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:09,119 - INFO     -     - nodes_expanded: 357
2025-10-29 13:52:09,119 - INFO     -     - search_depth: 4
2025-10-29 13:52:09,119 - INFO     -     - solution_cost: 4
2025-10-29 13:52:09,119 - INFO     -     - branching_factor: 7.5826
2025-10-29 13:52:09,119 - INFO     -     - solution_found: True
2025-10-29 13:52:09,119 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:09,119 - INFO     - 
  Computing reward:
2025-10-29 13:52:09,119 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:09,119 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:09,120 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:09,120 - INFO     -   [1] BRANCHING FACTOR: 7.583 → score 0.142 (high BF, minimal credit)
2025-10-29 13:52:09,120 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:52:09,121 - INFO     -   [3] F-VALUE STABILITY: 0.881
2025-10-29 13:52:09,121 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:52:09,121 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:09,121 - INFO     - 
  [COMPOSITE]: 0.630
2025-10-29 13:52:09,121 - INFO     -     = 0.300*0.142 (bf)
2025-10-29 13:52:09,121 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:52:09,121 - INFO     -     + 0.350*0.881 (stability)
2025-10-29 13:52:09,121 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:09,121 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:09,121 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:09,122 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:52:09,122 - INFO     - 
  [FINAL REWARD]: 0.7596
2025-10-29 13:52:09,122 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:09,122 - INFO     -     ✓ Reward computed: 0.7596
2025-10-29 13:52:09,122 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:09,122 - INFO     -     - bf_score                       0.1417
2025-10-29 13:52:09,122 - INFO     -     - depth_score                    0.7953
2025-10-29 13:52:09,122 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:09,122 - INFO     -     - f_stability                    0.8806
2025-10-29 13:52:09,122 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:52:09,122 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:09,123 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:09,123 - INFO     -     - composite                      0.6298
2025-10-29 13:52:09,123 - INFO     -     - total                          0.7596
2025-10-29 13:52:09,123 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:09,123 - INFO     -   Num remaining nodes: 3
2025-10-29 13:52:09,123 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:52:09,123 - INFO     -   Done: False
2025-10-29 13:52:09,123 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:09,123 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:09,123 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:09,123 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:09,123 - INFO     -     - num_nodes: 3
2025-10-29 13:52:09,124 - INFO     -     - num_edges: 6
2025-10-29 13:52:09,124 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:09,124 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:52:09,124 - INFO     -   After: current_merge_step = 6
2025-10-29 13:52:09,124 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:09,124 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:09,125 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:09,126 - INFO     -   ✓ Step logged
2025-10-29 13:52:09,126 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:09,126 - INFO     -   Returning:
2025-10-29 13:52:09,126 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:09,126 - INFO     -     - reward: 0.7596
2025-10-29 13:52:09,126 - INFO     -     - done: False
2025-10-29 13:52:09,126 - INFO     -     - truncated: False
2025-10-29 13:52:09,126 - INFO     -     - info: 19 keys
2025-10-29 13:52:09,126 - INFO     - ==========================================================================================

2025-10-29 13:52:09,132 - INFO     - 
==========================================================================================
2025-10-29 13:52:09,132 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:09,132 - INFO     - ==========================================================================================
2025-10-29 13:52:09,132 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:09,132 - INFO     -   Input action: 4 (type: int)
2025-10-29 13:52:09,132 - INFO     -   Available edges in graph: 6
2025-10-29 13:52:09,132 - INFO     -   Action index calculation:
2025-10-29 13:52:09,132 - INFO     -     - action % max(num_valid_edges, 1) = 4 % 6 = 4
2025-10-29 13:52:09,132 - INFO     -     - clamped to [0, 5]: 4
2025-10-29 13:52:09,133 - INFO     -   ✓ Extracted merge pair from edge 4: (14, 6)
2025-10-29 13:52:09,133 - INFO     -   ✓ Validation passed
2025-10-29 13:52:09,133 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:09,133 - INFO     -     - Total states before merge: 415
2025-10-29 13:52:09,133 - INFO     -     - Num nodes: 3
2025-10-29 13:52:09,133 - INFO     -     - Num edges: 6
2025-10-29 13:52:09,133 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:09,133 - INFO     -       - Node 14: 400 states
2025-10-29 13:52:09,133 - INFO     -       - Node 6: 5 states
2025-10-29 13:52:09,133 - INFO     -       - Expected product: 2000 states
2025-10-29 13:52:09,133 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:09,139 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:52:09,139 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:09,139 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:52:09,240 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:09,240 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:09,240 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:52:09,249 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:52:09,250 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:09,250 - INFO     -   Calling graph_tracker.merge_nodes([14, 6])...
2025-10-29 13:52:09,250 - INFO     - Attempting merge of nodes 14 and 6...
2025-10-29 13:52:09,250 - INFO     - Successfully merged nodes into new node 15 with 2000 states.
2025-10-29 13:52:09,250 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:09,250 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:09,250 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:52:09,250 - INFO     - 
================================================================================
2025-10-29 13:52:09,250 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:52:09,250 - INFO     - ================================================================================
2025-10-29 13:52:09,250 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:09,250 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:52:09,250 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:52:09,252 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:09,252 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:09,252 - INFO     -   - Raw ts1_f length: 357
2025-10-29 13:52:09,252 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:09,253 - INFO     -   - Raw f_after length: 1785
2025-10-29 13:52:09,253 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:09,253 - INFO     -   - ts1_valid: 357 / 357 (removed 0)
2025-10-29 13:52:09,253 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:09,253 - INFO     -   - after_valid: 1619 / 1785 (removed 166)
2025-10-29 13:52:09,254 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:09,254 - INFO     -   - ts1_id: 14
2025-10-29 13:52:09,254 - INFO     -   - ts2_id: 6
2025-10-29 13:52:09,254 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:09,254 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:09,254 - INFO     -   - ts1_size: 357, ts2_size: 5
2025-10-29 13:52:09,254 - INFO     -   - Product space size: 1785
2025-10-29 13:52:09,254 - INFO     -   - Using product state mapping
2025-10-29 13:52:09,257 - INFO     -   - f_before_product length: 1785
2025-10-29 13:52:09,261 - INFO     -   - avg_f_before: 8.4986 (1785 valid states)
2025-10-29 13:52:09,261 - INFO     -   - avg_f_after:  12.3922 (1619 valid states)
2025-10-29 13:52:09,261 - INFO     -   - delta: 3.8936
2025-10-29 13:52:09,261 - INFO     -   - f_stability: 1.0 - |3.8936| / 8.4986 = 0.5419
2025-10-29 13:52:09,261 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:09,261 - INFO     -   - Compared 362 values
2025-10-29 13:52:09,261 - INFO     -   - Significant changes (> 5.0): 124
2025-10-29 13:52:09,261 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:09,262 - INFO     -   - states_before: 1785
2025-10-29 13:52:09,262 - INFO     -   - states_after: 1785
2025-10-29 13:52:09,262 - INFO     -   - delta_states: 0
2025-10-29 13:52:09,262 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:09,262 - INFO     -   - ts1_transitions: 2648
2025-10-29 13:52:09,262 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:09,262 - INFO     -   - merged_transitions: 9701
2025-10-29 13:52:09,262 - INFO     -   - transition_density_change: 3.9440
2025-10-29 13:52:09,262 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:09,262 - INFO     -   - search_signals present: True
2025-10-29 13:52:09,262 - INFO     -   - nodes_expanded: 1619
2025-10-29 13:52:09,262 - INFO     -   - search_depth: 6
2025-10-29 13:52:09,262 - INFO     -   - solution_cost: 4
2025-10-29 13:52:09,263 - INFO     -   - branching_factor: 5.9920
2025-10-29 13:52:09,263 - INFO     -   - solution_found: True
2025-10-29 13:52:09,263 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:09,264 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:09,264 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:52:09,264 - INFO     -   - TS14(357) + TS6(5) → 1785 states
2025-10-29 13:52:09,264 - INFO     -   - f_stability=0.542
2025-10-29 13:52:09,264 - INFO     -   - A* nodes_expanded=1619
2025-10-29 13:52:09,264 - INFO     -   - solution_found=True
2025-10-29 13:52:09,264 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:09,264 - INFO     - 
  Extracted signals:
2025-10-29 13:52:09,264 - INFO     -     - iteration: 6
2025-10-29 13:52:09,264 - INFO     -     - states_before: 1785
2025-10-29 13:52:09,264 - INFO     -     - states_after: 1785
2025-10-29 13:52:09,264 - INFO     -     - delta_states: 0
2025-10-29 13:52:09,264 - INFO     -     - f_value_stability: 0.5419
2025-10-29 13:52:09,265 - INFO     -     - num_significant_f_changes: 124
2025-10-29 13:52:09,265 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:09,265 - INFO     -     - nodes_expanded: 1619
2025-10-29 13:52:09,265 - INFO     -     - search_depth: 6
2025-10-29 13:52:09,265 - INFO     -     - solution_cost: 4
2025-10-29 13:52:09,265 - INFO     -     - branching_factor: 5.9920
2025-10-29 13:52:09,265 - INFO     -     - solution_found: True
2025-10-29 13:52:09,265 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:09,265 - INFO     - 
  Computing reward:
2025-10-29 13:52:09,265 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:09,265 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:09,265 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:09,265 - INFO     -   [1] BRANCHING FACTOR: 5.992 → score 0.301 (tolerable)
2025-10-29 13:52:09,265 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:52:09,267 - INFO     -   [3] F-VALUE STABILITY: 0.479
2025-10-29 13:52:09,267 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:52:09,267 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:09,267 - INFO     - 
  [COMPOSITE]: 0.529
2025-10-29 13:52:09,267 - INFO     -     = 0.300*0.301 (bf)
2025-10-29 13:52:09,267 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:52:09,267 - INFO     -     + 0.350*0.479 (stability)
2025-10-29 13:52:09,267 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:09,267 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:09,267 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:09,268 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:52:09,268 - INFO     - 
  [FINAL REWARD]: 0.3573
2025-10-29 13:52:09,268 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:09,268 - INFO     -     ✓ Reward computed: 0.3573
2025-10-29 13:52:09,268 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:09,268 - INFO     -     - bf_score                       0.3011
2025-10-29 13:52:09,268 - INFO     -     - depth_score                    0.7525
2025-10-29 13:52:09,268 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:09,268 - INFO     -     - f_stability                    0.4795
2025-10-29 13:52:09,268 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:52:09,268 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:09,268 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:09,269 - INFO     -     - composite                      0.5286
2025-10-29 13:52:09,269 - INFO     -     - total                          0.3573
2025-10-29 13:52:09,269 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:09,269 - INFO     -   Num remaining nodes: 2
2025-10-29 13:52:09,269 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:52:09,269 - INFO     -   Done: False
2025-10-29 13:52:09,269 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:09,269 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:09,269 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:09,270 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:09,270 - INFO     -     - num_nodes: 2
2025-10-29 13:52:09,270 - INFO     -     - num_edges: 2
2025-10-29 13:52:09,270 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:09,270 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:52:09,270 - INFO     -   After: current_merge_step = 7
2025-10-29 13:52:09,270 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:09,270 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:09,270 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:09,270 - INFO     -   ✓ Step logged
2025-10-29 13:52:09,270 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:09,270 - INFO     -   Returning:
2025-10-29 13:52:09,270 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:09,270 - INFO     -     - reward: 0.3573
2025-10-29 13:52:09,270 - INFO     -     - done: False
2025-10-29 13:52:09,271 - INFO     -     - truncated: False
2025-10-29 13:52:09,271 - INFO     -     - info: 19 keys
2025-10-29 13:52:09,271 - INFO     - ==========================================================================================

2025-10-29 13:52:09,275 - INFO     - 
==========================================================================================
2025-10-29 13:52:09,275 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:09,275 - INFO     - ==========================================================================================
2025-10-29 13:52:09,275 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:09,275 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:52:09,275 - INFO     -   Available edges in graph: 2
2025-10-29 13:52:09,275 - INFO     -   Action index calculation:
2025-10-29 13:52:09,275 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:52:09,276 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:52:09,276 - INFO     -   ✓ Extracted merge pair from edge 0: (13, 15)
2025-10-29 13:52:09,276 - INFO     -   ✓ Validation passed
2025-10-29 13:52:09,276 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:09,276 - INFO     -     - Total states before merge: 2010
2025-10-29 13:52:09,276 - INFO     -     - Num nodes: 2
2025-10-29 13:52:09,276 - INFO     -     - Num edges: 2
2025-10-29 13:52:09,276 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:09,276 - INFO     -       - Node 13: 10 states
2025-10-29 13:52:09,276 - INFO     -       - Node 15: 2000 states
2025-10-29 13:52:09,276 - INFO     -       - Expected product: 20000 states
2025-10-29 13:52:09,276 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:09,286 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:52:09,286 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:09,286 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:52:09,387 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:09,387 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:09,387 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:52:09,608 - INFO     -   ✓ TS file received after 0.22s
2025-10-29 13:52:09,608 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:09,608 - INFO     -   Calling graph_tracker.merge_nodes([13, 15])...
2025-10-29 13:52:09,609 - INFO     - Attempting merge of nodes 13 and 15...
2025-10-29 13:52:09,609 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:52:09,609 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:09,609 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:09,609 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:52:09,609 - INFO     - 
================================================================================
2025-10-29 13:52:09,609 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:52:09,609 - INFO     - ================================================================================
2025-10-29 13:52:09,609 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:09,609 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:52:09,609 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:52:09,613 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:09,614 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:09,614 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:52:09,614 - INFO     -   - Raw ts2_f length: 383
2025-10-29 13:52:09,614 - INFO     -   - Raw f_after length: 3830
2025-10-29 13:52:09,614 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:09,614 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:52:09,614 - INFO     -   - ts2_valid: 383 / 383 (removed -383)
2025-10-29 13:52:09,615 - INFO     -   - after_valid: 2802 / 3830 (removed 1028)
2025-10-29 13:52:09,615 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:09,615 - INFO     -   - ts1_id: 13
2025-10-29 13:52:09,617 - INFO     -   - ts2_id: 15
2025-10-29 13:52:09,617 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:09,617 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:09,617 - INFO     -   - ts1_size: 10, ts2_size: 383
2025-10-29 13:52:09,617 - INFO     -   - Product space size: 3830
2025-10-29 13:52:09,617 - INFO     -   - Using product state mapping
2025-10-29 13:52:09,623 - INFO     -   - f_before_product length: 3830
2025-10-29 13:52:09,632 - INFO     -   - avg_f_before: 7.2026 (3830 valid states)
2025-10-29 13:52:09,632 - INFO     -   - avg_f_after:  11.8986 (2802 valid states)
2025-10-29 13:52:09,632 - INFO     -   - delta: 4.6960
2025-10-29 13:52:09,632 - INFO     -   - f_stability: 1.0 - |4.6960| / 7.2026 = 0.3480
2025-10-29 13:52:09,632 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:09,633 - INFO     -   - Compared 393 values
2025-10-29 13:52:09,633 - INFO     -   - Significant changes (> 5.0): 112
2025-10-29 13:52:09,633 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:09,633 - INFO     -   - states_before: 3830
2025-10-29 13:52:09,633 - INFO     -   - states_after: 3830
2025-10-29 13:52:09,633 - INFO     -   - delta_states: 0
2025-10-29 13:52:09,633 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:09,633 - INFO     -   - ts1_transitions: 40
2025-10-29 13:52:09,633 - INFO     -   - ts2_transitions: 3450
2025-10-29 13:52:09,633 - INFO     -   - merged_transitions: 20349
2025-10-29 13:52:09,633 - INFO     -   - transition_density_change: 4.4018
2025-10-29 13:52:09,633 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:09,633 - INFO     -   - search_signals present: True
2025-10-29 13:52:09,633 - INFO     -   - nodes_expanded: 2802
2025-10-29 13:52:09,633 - INFO     -   - search_depth: 6
2025-10-29 13:52:09,634 - INFO     -   - solution_cost: 4
2025-10-29 13:52:09,634 - INFO     -   - branching_factor: 7.2623
2025-10-29 13:52:09,634 - INFO     -   - solution_found: True
2025-10-29 13:52:09,634 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:09,635 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:09,635 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:52:09,636 - INFO     -   - TS13(10) + TS15(383) → 3830 states
2025-10-29 13:52:09,636 - INFO     -   - f_stability=0.348
2025-10-29 13:52:09,636 - INFO     -   - A* nodes_expanded=2802
2025-10-29 13:52:09,636 - INFO     -   - solution_found=True
2025-10-29 13:52:09,636 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:09,636 - INFO     - 
  Extracted signals:
2025-10-29 13:52:09,636 - INFO     -     - iteration: 7
2025-10-29 13:52:09,636 - INFO     -     - states_before: 3830
2025-10-29 13:52:09,636 - INFO     -     - states_after: 3830
2025-10-29 13:52:09,636 - INFO     -     - delta_states: 0
2025-10-29 13:52:09,636 - INFO     -     - f_value_stability: 0.3480
2025-10-29 13:52:09,636 - INFO     -     - num_significant_f_changes: 112
2025-10-29 13:52:09,636 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:09,637 - INFO     -     - nodes_expanded: 2802
2025-10-29 13:52:09,637 - INFO     -     - search_depth: 6
2025-10-29 13:52:09,637 - INFO     -     - solution_cost: 4
2025-10-29 13:52:09,637 - INFO     -     - branching_factor: 7.2623
2025-10-29 13:52:09,637 - INFO     -     - solution_found: True
2025-10-29 13:52:09,637 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:09,638 - INFO     - 
  Computing reward:
2025-10-29 13:52:09,638 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:09,638 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:09,638 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:09,638 - INFO     -   [1] BRANCHING FACTOR: 7.262 → score 0.174 (high BF, minimal credit)
2025-10-29 13:52:09,638 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:52:09,639 - INFO     -   [3] F-VALUE STABILITY: 0.287
2025-10-29 13:52:09,639 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:09,639 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:09,640 - INFO     - 
  [COMPOSITE]: 0.423
2025-10-29 13:52:09,640 - INFO     -     = 0.300*0.174 (bf)
2025-10-29 13:52:09,640 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:52:09,640 - INFO     -     + 0.350*0.287 (stability)
2025-10-29 13:52:09,640 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:09,640 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:09,640 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:09,641 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:09,641 - INFO     - 
  [FINAL REWARD]: 0.0464
2025-10-29 13:52:09,641 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:09,641 - INFO     -     ✓ Reward computed: 0.0464
2025-10-29 13:52:09,641 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:09,641 - INFO     -     - bf_score                       0.1738
2025-10-29 13:52:09,641 - INFO     -     - depth_score                    0.7525
2025-10-29 13:52:09,642 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:09,642 - INFO     -     - f_stability                    0.2873
2025-10-29 13:52:09,642 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:09,642 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:09,642 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:09,642 - INFO     -     - composite                      0.4232
2025-10-29 13:52:09,642 - INFO     -     - total                          0.0464
2025-10-29 13:52:09,642 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:09,642 - INFO     -   Num remaining nodes: 1
2025-10-29 13:52:09,642 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:52:09,642 - INFO     -   Done: True
2025-10-29 13:52:09,642 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:52:09,642 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:09,643 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:09,643 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:09,643 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:09,643 - INFO     -     - num_nodes: 1
2025-10-29 13:52:09,643 - INFO     -     - num_edges: 0
2025-10-29 13:52:09,643 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:09,643 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:52:09,643 - INFO     -   After: current_merge_step = 8
2025-10-29 13:52:09,643 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:09,643 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:09,643 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:09,644 - INFO     -   ✓ Step logged
2025-10-29 13:52:09,644 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:09,644 - INFO     -   Returning:
2025-10-29 13:52:09,644 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:09,644 - INFO     -     - reward: 0.0464
2025-10-29 13:52:09,644 - INFO     -     - done: True
2025-10-29 13:52:09,644 - INFO     -     - truncated: False
2025-10-29 13:52:09,644 - INFO     -     - info: 19 keys
2025-10-29 13:52:09,644 - INFO     - ==========================================================================================

2025-10-29 13:52:09,725 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:52:09,734 - INFO     - [Handshake] Building FD command:
2025-10-29 13:52:09,734 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:52:09,734 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_01.pddl
2025-10-29 13:52:09,734 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:52:09,737 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:52:10,339 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:52:10,339 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:52:10,339 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:52:10,656 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:52:10,656 - INFO     - Initializing GraphTracker...
2025-10-29 13:52:10,656 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:52:10,657 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:52:10,657 - INFO     -    → Node 0 has 2 states
2025-10-29 13:52:10,657 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:52:10,657 - INFO     -    → Node 1 has 2 states
2025-10-29 13:52:10,657 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:52:10,657 - INFO     -    → Node 2 has 2 states
2025-10-29 13:52:10,657 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:52:10,658 - INFO     -    → Node 3 has 2 states
2025-10-29 13:52:10,658 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:52:10,658 - INFO     -    → Node 4 has 2 states
2025-10-29 13:52:10,658 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:52:10,658 - INFO     -    → Node 5 has 5 states
2025-10-29 13:52:10,658 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:52:10,658 - INFO     -    → Node 6 has 5 states
2025-10-29 13:52:10,658 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:52:10,658 - INFO     -    → Node 7 has 5 states
2025-10-29 13:52:10,658 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:52:10,658 - INFO     -    → Node 8 has 5 states
2025-10-29 13:52:10,658 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:52:10,658 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:52:10,661 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:52:10,661 - INFO     - Added edge (0, 1)
2025-10-29 13:52:10,661 - INFO     - Added edge (0, 2)
2025-10-29 13:52:10,661 - INFO     - Added edge (0, 3)
2025-10-29 13:52:10,661 - INFO     - Added edge (0, 4)
2025-10-29 13:52:10,661 - INFO     - Added edge (0, 5)
2025-10-29 13:52:10,661 - INFO     - Added edge (0, 6)
2025-10-29 13:52:10,661 - INFO     - Added edge (0, 7)
2025-10-29 13:52:10,661 - INFO     - Added edge (0, 8)
2025-10-29 13:52:10,661 - INFO     - Added edge (1, 0)
2025-10-29 13:52:10,661 - INFO     - Added edge (1, 2)
2025-10-29 13:52:10,661 - INFO     - Added edge (1, 3)
2025-10-29 13:52:10,661 - INFO     - Added edge (1, 4)
2025-10-29 13:52:10,661 - INFO     - Added edge (1, 5)
2025-10-29 13:52:10,662 - INFO     - Added edge (1, 6)
2025-10-29 13:52:10,662 - INFO     - Added edge (1, 7)
2025-10-29 13:52:10,662 - INFO     - Added edge (1, 8)
2025-10-29 13:52:10,662 - INFO     - Added edge (2, 0)
2025-10-29 13:52:10,662 - INFO     - Added edge (2, 1)
2025-10-29 13:52:10,662 - INFO     - Added edge (2, 3)
2025-10-29 13:52:10,662 - INFO     - Added edge (2, 4)
2025-10-29 13:52:10,662 - INFO     - Added edge (2, 5)
2025-10-29 13:52:10,662 - INFO     - Added edge (2, 6)
2025-10-29 13:52:10,662 - INFO     - Added edge (2, 7)
2025-10-29 13:52:10,662 - INFO     - Added edge (2, 8)
2025-10-29 13:52:10,662 - INFO     - Added edge (3, 0)
2025-10-29 13:52:10,662 - INFO     - Added edge (3, 1)
2025-10-29 13:52:10,662 - INFO     - Added edge (3, 2)
2025-10-29 13:52:10,662 - INFO     - Added edge (3, 4)
2025-10-29 13:52:10,662 - INFO     - Added edge (3, 5)
2025-10-29 13:52:10,662 - INFO     - Added edge (3, 6)
2025-10-29 13:52:10,663 - INFO     - Added edge (3, 7)
2025-10-29 13:52:10,663 - INFO     - Added edge (3, 8)
2025-10-29 13:52:10,663 - INFO     - Added edge (4, 0)
2025-10-29 13:52:10,663 - INFO     - Added edge (4, 1)
2025-10-29 13:52:10,663 - INFO     - Added edge (4, 2)
2025-10-29 13:52:10,663 - INFO     - Added edge (4, 3)
2025-10-29 13:52:10,663 - INFO     - Added edge (4, 5)
2025-10-29 13:52:10,663 - INFO     - Added edge (4, 6)
2025-10-29 13:52:10,663 - INFO     - Added edge (4, 7)
2025-10-29 13:52:10,663 - INFO     - Added edge (4, 8)
2025-10-29 13:52:10,663 - INFO     - Added edge (5, 0)
2025-10-29 13:52:10,663 - INFO     - Added edge (5, 1)
2025-10-29 13:52:10,663 - INFO     - Added edge (5, 2)
2025-10-29 13:52:10,663 - INFO     - Added edge (5, 3)
2025-10-29 13:52:10,663 - INFO     - Added edge (5, 4)
2025-10-29 13:52:10,663 - INFO     - Added edge (6, 0)
2025-10-29 13:52:10,663 - INFO     - Added edge (6, 1)
2025-10-29 13:52:10,664 - INFO     - Added edge (6, 2)
2025-10-29 13:52:10,664 - INFO     - Added edge (6, 3)
2025-10-29 13:52:10,664 - INFO     - Added edge (6, 4)
2025-10-29 13:52:10,664 - INFO     - Added edge (7, 0)
2025-10-29 13:52:10,664 - INFO     - Added edge (7, 1)
2025-10-29 13:52:10,664 - INFO     - Added edge (7, 2)
2025-10-29 13:52:10,664 - INFO     - Added edge (7, 3)
2025-10-29 13:52:10,664 - INFO     - Added edge (7, 4)
2025-10-29 13:52:10,664 - INFO     - Added edge (8, 0)
2025-10-29 13:52:10,664 - INFO     - Added edge (8, 1)
2025-10-29 13:52:10,664 - INFO     - Added edge (8, 2)
2025-10-29 13:52:10,664 - INFO     - Added edge (8, 3)
2025-10-29 13:52:10,664 - INFO     - Added edge (8, 4)
2025-10-29 13:52:10,664 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:52:10,670 - INFO     - 
==========================================================================================
2025-10-29 13:52:10,670 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:10,670 - INFO     - ==========================================================================================
2025-10-29 13:52:10,670 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:10,670 - INFO     -   Input action: 35 (type: int)
2025-10-29 13:52:10,671 - INFO     -   Available edges in graph: 60
2025-10-29 13:52:10,671 - INFO     -   Action index calculation:
2025-10-29 13:52:10,671 - INFO     -     - action % max(num_valid_edges, 1) = 35 % 60 = 35
2025-10-29 13:52:10,671 - INFO     -     - clamped to [0, 59]: 35
2025-10-29 13:52:10,671 - INFO     -   ✓ Extracted merge pair from edge 35: (4, 3)
2025-10-29 13:52:10,671 - INFO     -   ✓ Validation passed
2025-10-29 13:52:10,671 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:10,671 - INFO     -     - Total states before merge: 30
2025-10-29 13:52:10,671 - INFO     -     - Num nodes: 9
2025-10-29 13:52:10,671 - INFO     -     - Num edges: 60
2025-10-29 13:52:10,671 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:10,671 - INFO     -       - Node 4: 2 states
2025-10-29 13:52:10,671 - INFO     -       - Node 3: 2 states
2025-10-29 13:52:10,671 - INFO     -       - Expected product: 4 states
2025-10-29 13:52:10,671 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:10,678 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:52:10,678 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:10,678 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:52:10,778 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:10,778 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:10,778 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:52:10,778 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:10,780 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:10,780 - INFO     -   Calling graph_tracker.merge_nodes([4, 3])...
2025-10-29 13:52:10,780 - INFO     - Attempting merge of nodes 4 and 3...
2025-10-29 13:52:10,780 - INFO     - Successfully merged nodes into new node 9 with 4 states.
2025-10-29 13:52:10,780 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:10,780 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:10,780 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:52:10,780 - INFO     - 
================================================================================
2025-10-29 13:52:10,780 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:52:10,780 - INFO     - ================================================================================
2025-10-29 13:52:10,780 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:10,780 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:52:10,780 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:52:10,781 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:10,781 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:10,781 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:10,781 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:10,781 - INFO     -   - Raw f_after length: 4
2025-10-29 13:52:10,781 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:10,781 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:10,781 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:10,781 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:52:10,781 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:10,781 - INFO     -   - ts1_id: 4
2025-10-29 13:52:10,781 - INFO     -   - ts2_id: 3
2025-10-29 13:52:10,782 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:10,782 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:10,782 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:52:10,782 - INFO     -   - Product space size: 4
2025-10-29 13:52:10,782 - INFO     -   - Using product state mapping
2025-10-29 13:52:10,782 - INFO     -   - f_before_product length: 4
2025-10-29 13:52:10,782 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:52:10,782 - INFO     -   - avg_f_after:  0.7500 (4 valid states)
2025-10-29 13:52:10,782 - INFO     -   - delta: 0.0000
2025-10-29 13:52:10,782 - INFO     -   - f_stability: 1.0 - |0.0000| / 0.7500 = 1.0000
2025-10-29 13:52:10,782 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:10,782 - INFO     -   - Compared 4 values
2025-10-29 13:52:10,782 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:10,782 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:10,783 - INFO     -   - states_before: 4
2025-10-29 13:52:10,783 - INFO     -   - states_after: 4
2025-10-29 13:52:10,783 - INFO     -   - delta_states: 0
2025-10-29 13:52:10,783 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:10,783 - INFO     -   - ts1_transitions: 3
2025-10-29 13:52:10,783 - INFO     -   - ts2_transitions: 5
2025-10-29 13:52:10,783 - INFO     -   - merged_transitions: 15
2025-10-29 13:52:10,783 - INFO     -   - transition_density_change: 1.7500
2025-10-29 13:52:10,783 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:10,784 - INFO     -   - search_signals present: True
2025-10-29 13:52:10,784 - INFO     -   - nodes_expanded: 4
2025-10-29 13:52:10,784 - INFO     -   - search_depth: 0
2025-10-29 13:52:10,784 - INFO     -   - solution_cost: 0
2025-10-29 13:52:10,784 - INFO     -   - branching_factor: 3.7500
2025-10-29 13:52:10,784 - INFO     -   - solution_found: True
2025-10-29 13:52:10,784 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:10,784 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:10,784 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:52:10,784 - INFO     -   - TS4(2) + TS3(2) → 4 states
2025-10-29 13:52:10,784 - INFO     -   - f_stability=1.000
2025-10-29 13:52:10,784 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:52:10,784 - INFO     -   - solution_found=True
2025-10-29 13:52:10,784 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:10,784 - INFO     - 
  Extracted signals:
2025-10-29 13:52:10,785 - INFO     -     - iteration: 0
2025-10-29 13:52:10,785 - INFO     -     - states_before: 4
2025-10-29 13:52:10,785 - INFO     -     - states_after: 4
2025-10-29 13:52:10,785 - INFO     -     - delta_states: 0
2025-10-29 13:52:10,785 - INFO     -     - f_value_stability: 1.0000
2025-10-29 13:52:10,785 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:10,785 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:10,785 - INFO     -     - nodes_expanded: 4
2025-10-29 13:52:10,785 - INFO     -     - search_depth: 0
2025-10-29 13:52:10,785 - INFO     -     - solution_cost: 0
2025-10-29 13:52:10,785 - INFO     -     - branching_factor: 3.7500
2025-10-29 13:52:10,785 - INFO     -     - solution_found: True
2025-10-29 13:52:10,785 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:10,785 - INFO     - 
  Computing reward:
2025-10-29 13:52:10,785 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:10,785 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:10,785 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:10,786 - INFO     -   [1] BRANCHING FACTOR: 3.750 → score 0.600 (tolerable)
2025-10-29 13:52:10,786 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:52:10,786 - INFO     -   [3] F-VALUE STABILITY: 0.260
2025-10-29 13:52:10,786 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:10,786 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:10,786 - INFO     - 
  [COMPOSITE]: 0.491
2025-10-29 13:52:10,786 - INFO     -     = 0.300*0.600 (bf)
2025-10-29 13:52:10,786 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:52:10,786 - INFO     -     + 0.350*0.260 (stability)
2025-10-29 13:52:10,786 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:10,786 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:10,786 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:10,786 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:10,787 - INFO     - 
  [FINAL REWARD]: 0.1819
2025-10-29 13:52:10,787 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:10,787 - INFO     -     ✓ Reward computed: 0.1819
2025-10-29 13:52:10,787 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:10,787 - INFO     -     - bf_score                       0.6000
2025-10-29 13:52:10,787 - INFO     -     - depth_score                    0.5000
2025-10-29 13:52:10,787 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:10,787 - INFO     -     - f_stability                    0.2598
2025-10-29 13:52:10,787 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:10,787 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:10,787 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:10,787 - INFO     -     - composite                      0.4909
2025-10-29 13:52:10,787 - INFO     -     - total                          0.1819
2025-10-29 13:52:10,787 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:10,787 - INFO     -   Num remaining nodes: 8
2025-10-29 13:52:10,787 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:52:10,787 - INFO     -   Done: False
2025-10-29 13:52:10,787 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:10,789 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:10,789 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:10,789 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:10,789 - INFO     -     - num_nodes: 8
2025-10-29 13:52:10,789 - INFO     -     - num_edges: 44
2025-10-29 13:52:10,789 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:10,789 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:52:10,789 - INFO     -   After: current_merge_step = 1
2025-10-29 13:52:10,789 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:10,789 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:10,789 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:10,790 - INFO     -   ✓ Step logged
2025-10-29 13:52:10,790 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:10,790 - INFO     -   Returning:
2025-10-29 13:52:10,790 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:10,790 - INFO     -     - reward: 0.1819
2025-10-29 13:52:10,790 - INFO     -     - done: False
2025-10-29 13:52:10,791 - INFO     -     - truncated: False
2025-10-29 13:52:10,791 - INFO     -     - info: 19 keys
2025-10-29 13:52:10,791 - INFO     - ==========================================================================================

2025-10-29 13:52:10,795 - INFO     - 
==========================================================================================
2025-10-29 13:52:10,795 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:10,795 - INFO     - ==========================================================================================
2025-10-29 13:52:10,796 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:10,796 - INFO     -   Input action: 14 (type: int)
2025-10-29 13:52:10,796 - INFO     -   Available edges in graph: 44
2025-10-29 13:52:10,796 - INFO     -   Action index calculation:
2025-10-29 13:52:10,796 - INFO     -     - action % max(num_valid_edges, 1) = 14 % 44 = 14
2025-10-29 13:52:10,796 - INFO     -     - clamped to [0, 43]: 14
2025-10-29 13:52:10,796 - INFO     -   ✓ Extracted merge pair from edge 14: (2, 0)
2025-10-29 13:52:10,796 - INFO     -   ✓ Validation passed
2025-10-29 13:52:10,796 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:10,796 - INFO     -     - Total states before merge: 30
2025-10-29 13:52:10,796 - INFO     -     - Num nodes: 8
2025-10-29 13:52:10,796 - INFO     -     - Num edges: 44
2025-10-29 13:52:10,796 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:10,796 - INFO     -       - Node 2: 2 states
2025-10-29 13:52:10,796 - INFO     -       - Node 0: 2 states
2025-10-29 13:52:10,796 - INFO     -       - Expected product: 4 states
2025-10-29 13:52:10,796 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:10,803 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:52:10,803 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:10,804 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:52:10,905 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:10,905 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:10,905 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:52:10,905 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:10,905 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:10,905 - INFO     -   Calling graph_tracker.merge_nodes([2, 0])...
2025-10-29 13:52:10,905 - INFO     - Attempting merge of nodes 2 and 0...
2025-10-29 13:52:10,906 - INFO     - Successfully merged nodes into new node 10 with 4 states.
2025-10-29 13:52:10,906 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:10,906 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:10,906 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:52:10,906 - INFO     - 
================================================================================
2025-10-29 13:52:10,906 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:52:10,906 - INFO     - ================================================================================
2025-10-29 13:52:10,906 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:10,906 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:52:10,906 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:52:10,907 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:10,907 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:10,907 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:10,907 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:10,907 - INFO     -   - Raw f_after length: 4
2025-10-29 13:52:10,907 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:10,907 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:10,907 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:10,907 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:52:10,907 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:10,907 - INFO     -   - ts1_id: 2
2025-10-29 13:52:10,907 - INFO     -   - ts2_id: 0
2025-10-29 13:52:10,907 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:10,907 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:10,907 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:52:10,908 - INFO     -   - Product space size: 4
2025-10-29 13:52:10,908 - INFO     -   - Using product state mapping
2025-10-29 13:52:10,908 - INFO     -   - f_before_product length: 4
2025-10-29 13:52:10,908 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:52:10,908 - INFO     -   - avg_f_after:  1.0000 (4 valid states)
2025-10-29 13:52:10,908 - INFO     -   - delta: 0.2500
2025-10-29 13:52:10,908 - INFO     -   - f_stability: 1.0 - |0.2500| / 0.7500 = 0.6667
2025-10-29 13:52:10,908 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:10,908 - INFO     -   - Compared 4 values
2025-10-29 13:52:10,908 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:10,908 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:10,908 - INFO     -   - states_before: 4
2025-10-29 13:52:10,909 - INFO     -   - states_after: 4
2025-10-29 13:52:10,909 - INFO     -   - delta_states: 0
2025-10-29 13:52:10,909 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:10,909 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:10,909 - INFO     -   - ts2_transitions: 5
2025-10-29 13:52:10,909 - INFO     -   - merged_transitions: 20
2025-10-29 13:52:10,909 - INFO     -   - transition_density_change: 2.5000
2025-10-29 13:52:10,909 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:10,910 - INFO     -   - search_signals present: True
2025-10-29 13:52:10,910 - INFO     -   - nodes_expanded: 4
2025-10-29 13:52:10,910 - INFO     -   - search_depth: 0
2025-10-29 13:52:10,910 - INFO     -   - solution_cost: 0
2025-10-29 13:52:10,910 - INFO     -   - branching_factor: 5.0000
2025-10-29 13:52:10,910 - INFO     -   - solution_found: True
2025-10-29 13:52:10,910 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:10,910 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:10,910 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:52:10,910 - INFO     -   - TS2(2) + TS0(2) → 4 states
2025-10-29 13:52:10,911 - INFO     -   - f_stability=0.667
2025-10-29 13:52:10,911 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:52:10,911 - INFO     -   - solution_found=True
2025-10-29 13:52:10,911 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:10,911 - INFO     - 
  Extracted signals:
2025-10-29 13:52:10,911 - INFO     -     - iteration: 1
2025-10-29 13:52:10,911 - INFO     -     - states_before: 4
2025-10-29 13:52:10,911 - INFO     -     - states_after: 4
2025-10-29 13:52:10,911 - INFO     -     - delta_states: 0
2025-10-29 13:52:10,911 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:52:10,911 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:10,911 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:10,911 - INFO     -     - nodes_expanded: 4
2025-10-29 13:52:10,911 - INFO     -     - search_depth: 0
2025-10-29 13:52:10,911 - INFO     -     - solution_cost: 0
2025-10-29 13:52:10,911 - INFO     -     - branching_factor: 5.0000
2025-10-29 13:52:10,911 - INFO     -     - solution_found: True
2025-10-29 13:52:10,912 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:10,912 - INFO     - 
  Computing reward:
2025-10-29 13:52:10,912 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:10,912 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:10,912 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:10,913 - INFO     -   [1] BRANCHING FACTOR: 5.000 → score 0.433 (tolerable)
2025-10-29 13:52:10,913 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:52:10,913 - INFO     -   [3] F-VALUE STABILITY: 0.176
2025-10-29 13:52:10,913 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:10,913 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:10,914 - INFO     - 
  [COMPOSITE]: 0.412
2025-10-29 13:52:10,914 - INFO     -     = 0.300*0.433 (bf)
2025-10-29 13:52:10,914 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:52:10,914 - INFO     -     + 0.350*0.176 (stability)
2025-10-29 13:52:10,914 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:10,914 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:10,914 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:10,914 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:10,914 - INFO     - 
  [FINAL REWARD]: 0.0230
2025-10-29 13:52:10,914 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:10,914 - INFO     -     ✓ Reward computed: 0.0230
2025-10-29 13:52:10,914 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:10,914 - INFO     -     - bf_score                       0.4333
2025-10-29 13:52:10,914 - INFO     -     - depth_score                    0.5000
2025-10-29 13:52:10,914 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:10,914 - INFO     -     - f_stability                    0.1757
2025-10-29 13:52:10,915 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:10,915 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:10,915 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:10,915 - INFO     -     - composite                      0.4115
2025-10-29 13:52:10,915 - INFO     -     - total                          0.0230
2025-10-29 13:52:10,915 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:10,915 - INFO     -   Num remaining nodes: 7
2025-10-29 13:52:10,915 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:52:10,915 - INFO     -   Done: False
2025-10-29 13:52:10,915 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:10,916 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:10,916 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:10,916 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:10,916 - INFO     -     - num_nodes: 7
2025-10-29 13:52:10,916 - INFO     -     - num_edges: 30
2025-10-29 13:52:10,917 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:10,917 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:52:10,917 - INFO     -   After: current_merge_step = 2
2025-10-29 13:52:10,917 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:10,917 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:10,917 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:10,917 - INFO     -   ✓ Step logged
2025-10-29 13:52:10,918 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:10,918 - INFO     -   Returning:
2025-10-29 13:52:10,918 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:10,918 - INFO     -     - reward: 0.0230
2025-10-29 13:52:10,918 - INFO     -     - done: False
2025-10-29 13:52:10,918 - INFO     -     - truncated: False
2025-10-29 13:52:10,918 - INFO     -     - info: 19 keys
2025-10-29 13:52:10,918 - INFO     - ==========================================================================================

2025-10-29 13:52:10,922 - INFO     - 
==========================================================================================
2025-10-29 13:52:10,922 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:10,922 - INFO     - ==========================================================================================
2025-10-29 13:52:10,922 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:10,922 - INFO     -   Input action: 20 (type: int)
2025-10-29 13:52:10,923 - INFO     -   Available edges in graph: 30
2025-10-29 13:52:10,923 - INFO     -   Action index calculation:
2025-10-29 13:52:10,923 - INFO     -     - action % max(num_valid_edges, 1) = 20 % 30 = 20
2025-10-29 13:52:10,923 - INFO     -     - clamped to [0, 29]: 20
2025-10-29 13:52:10,923 - INFO     -   ✓ Extracted merge pair from edge 20: (9, 6)
2025-10-29 13:52:10,923 - INFO     -   ✓ Validation passed
2025-10-29 13:52:10,923 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:10,923 - INFO     -     - Total states before merge: 30
2025-10-29 13:52:10,923 - INFO     -     - Num nodes: 7
2025-10-29 13:52:10,923 - INFO     -     - Num edges: 30
2025-10-29 13:52:10,923 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:10,923 - INFO     -       - Node 9: 4 states
2025-10-29 13:52:10,923 - INFO     -       - Node 6: 5 states
2025-10-29 13:52:10,923 - INFO     -       - Expected product: 20 states
2025-10-29 13:52:10,923 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:10,929 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:52:10,929 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:10,929 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:52:11,030 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:11,030 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:11,030 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:52:11,030 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:11,030 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:11,031 - INFO     -   Calling graph_tracker.merge_nodes([9, 6])...
2025-10-29 13:52:11,031 - INFO     - Attempting merge of nodes 9 and 6...
2025-10-29 13:52:11,031 - INFO     - Successfully merged nodes into new node 11 with 20 states.
2025-10-29 13:52:11,031 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:11,031 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:11,031 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:52:11,031 - INFO     - 
================================================================================
2025-10-29 13:52:11,031 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:52:11,031 - INFO     - ================================================================================
2025-10-29 13:52:11,031 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:11,031 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:52:11,031 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:52:11,032 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:11,032 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:11,032 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:52:11,032 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:11,032 - INFO     -   - Raw f_after length: 20
2025-10-29 13:52:11,032 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:11,032 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:52:11,032 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:11,032 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:52:11,032 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:11,032 - INFO     -   - ts1_id: 9
2025-10-29 13:52:11,032 - INFO     -   - ts2_id: 6
2025-10-29 13:52:11,032 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:11,032 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:11,032 - INFO     -   - ts1_size: 4, ts2_size: 5
2025-10-29 13:52:11,032 - INFO     -   - Product space size: 20
2025-10-29 13:52:11,032 - INFO     -   - Using product state mapping
2025-10-29 13:52:11,032 - INFO     -   - f_before_product length: 20
2025-10-29 13:52:11,032 - INFO     -   - avg_f_before: 2.9500 (20 valid states)
2025-10-29 13:52:11,032 - INFO     -   - avg_f_after:  3.8500 (20 valid states)
2025-10-29 13:52:11,032 - INFO     -   - delta: 0.9000
2025-10-29 13:52:11,032 - INFO     -   - f_stability: 1.0 - |0.9000| / 2.9500 = 0.6949
2025-10-29 13:52:11,032 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:11,032 - INFO     -   - Compared 9 values
2025-10-29 13:52:11,032 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:11,032 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:11,032 - INFO     -   - states_before: 20
2025-10-29 13:52:11,032 - INFO     -   - states_after: 20
2025-10-29 13:52:11,032 - INFO     -   - delta_states: 0
2025-10-29 13:52:11,032 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:11,032 - INFO     -   - ts1_transitions: 15
2025-10-29 13:52:11,032 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:11,032 - INFO     -   - merged_transitions: 97
2025-10-29 13:52:11,032 - INFO     -   - transition_density_change: 3.4500
2025-10-29 13:52:11,032 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:11,040 - INFO     -   - search_signals present: True
2025-10-29 13:52:11,040 - INFO     -   - nodes_expanded: 20
2025-10-29 13:52:11,040 - INFO     -   - search_depth: 2
2025-10-29 13:52:11,040 - INFO     -   - solution_cost: 0
2025-10-29 13:52:11,040 - INFO     -   - branching_factor: 4.8500
2025-10-29 13:52:11,040 - INFO     -   - solution_found: True
2025-10-29 13:52:11,040 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:11,040 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:11,040 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:52:11,040 - INFO     -   - TS9(4) + TS6(5) → 20 states
2025-10-29 13:52:11,040 - INFO     -   - f_stability=0.695
2025-10-29 13:52:11,040 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:52:11,040 - INFO     -   - solution_found=True
2025-10-29 13:52:11,040 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:11,040 - INFO     - 
  Extracted signals:
2025-10-29 13:52:11,040 - INFO     -     - iteration: 2
2025-10-29 13:52:11,040 - INFO     -     - states_before: 20
2025-10-29 13:52:11,040 - INFO     -     - states_after: 20
2025-10-29 13:52:11,040 - INFO     -     - delta_states: 0
2025-10-29 13:52:11,040 - INFO     -     - f_value_stability: 0.6949
2025-10-29 13:52:11,040 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:11,042 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:11,042 - INFO     -     - nodes_expanded: 20
2025-10-29 13:52:11,042 - INFO     -     - search_depth: 2
2025-10-29 13:52:11,042 - INFO     -     - solution_cost: 0
2025-10-29 13:52:11,042 - INFO     -     - branching_factor: 4.8500
2025-10-29 13:52:11,042 - INFO     -     - solution_found: True
2025-10-29 13:52:11,042 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:11,042 - INFO     - 
  Computing reward:
2025-10-29 13:52:11,042 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:11,042 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:11,042 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:11,042 - INFO     -   [1] BRANCHING FACTOR: 4.850 → score 0.453 (tolerable)
2025-10-29 13:52:11,042 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:52:11,042 - INFO     -   [3] F-VALUE STABILITY: 0.232
2025-10-29 13:52:11,042 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:11,042 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:11,042 - INFO     - 
  [COMPOSITE]: 0.509
2025-10-29 13:52:11,042 - INFO     -     = 0.300*0.453 (bf)
2025-10-29 13:52:11,042 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:52:11,042 - INFO     -     + 0.350*0.232 (stability)
2025-10-29 13:52:11,042 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:11,042 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:11,044 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:11,044 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:11,044 - INFO     - 
  [FINAL REWARD]: 0.2185
2025-10-29 13:52:11,044 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:11,044 - INFO     -     ✓ Reward computed: 0.2185
2025-10-29 13:52:11,044 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:11,044 - INFO     -     - bf_score                       0.4533
2025-10-29 13:52:11,044 - INFO     -     - depth_score                    0.8603
2025-10-29 13:52:11,044 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:11,044 - INFO     -     - f_stability                    0.2320
2025-10-29 13:52:11,044 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:11,044 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:11,044 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:11,045 - INFO     -     - composite                      0.5092
2025-10-29 13:52:11,045 - INFO     -     - total                          0.2185
2025-10-29 13:52:11,056 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:11,056 - INFO     -   Num remaining nodes: 6
2025-10-29 13:52:11,056 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:52:11,056 - INFO     -   Done: False
2025-10-29 13:52:11,056 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:11,057 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:11,057 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:11,057 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:11,057 - INFO     -     - num_nodes: 6
2025-10-29 13:52:11,057 - INFO     -     - num_edges: 24
2025-10-29 13:52:11,057 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:11,057 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:52:11,057 - INFO     -   After: current_merge_step = 3
2025-10-29 13:52:11,057 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:11,057 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:11,057 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:11,064 - INFO     -   ✓ Step logged
2025-10-29 13:52:11,064 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:11,064 - INFO     -   Returning:
2025-10-29 13:52:11,064 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:11,064 - INFO     -     - reward: 0.2185
2025-10-29 13:52:11,064 - INFO     -     - done: False
2025-10-29 13:52:11,064 - INFO     -     - truncated: False
2025-10-29 13:52:11,064 - INFO     -     - info: 19 keys
2025-10-29 13:52:11,064 - INFO     - ==========================================================================================

2025-10-29 13:52:11,069 - INFO     - 
==========================================================================================
2025-10-29 13:52:11,069 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:11,069 - INFO     - ==========================================================================================
2025-10-29 13:52:11,069 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:11,069 - INFO     -   Input action: 7 (type: int)
2025-10-29 13:52:11,069 - INFO     -   Available edges in graph: 24
2025-10-29 13:52:11,069 - INFO     -   Action index calculation:
2025-10-29 13:52:11,069 - INFO     -     - action % max(num_valid_edges, 1) = 7 % 24 = 7
2025-10-29 13:52:11,069 - INFO     -     - clamped to [0, 23]: 7
2025-10-29 13:52:11,069 - INFO     -   ✓ Extracted merge pair from edge 7: (5, 11)
2025-10-29 13:52:11,069 - INFO     -   ✓ Validation passed
2025-10-29 13:52:11,069 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:11,069 - INFO     -     - Total states before merge: 41
2025-10-29 13:52:11,069 - INFO     -     - Num nodes: 6
2025-10-29 13:52:11,069 - INFO     -     - Num edges: 24
2025-10-29 13:52:11,069 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:11,069 - INFO     -       - Node 5: 5 states
2025-10-29 13:52:11,069 - INFO     -       - Node 11: 20 states
2025-10-29 13:52:11,069 - INFO     -       - Expected product: 100 states
2025-10-29 13:52:11,069 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:11,074 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:52:11,074 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:11,074 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:52:11,177 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:11,177 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:11,177 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:52:11,177 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:11,177 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:11,177 - INFO     -   Calling graph_tracker.merge_nodes([5, 11])...
2025-10-29 13:52:11,177 - INFO     - Attempting merge of nodes 5 and 11...
2025-10-29 13:52:11,177 - INFO     - Successfully merged nodes into new node 12 with 100 states.
2025-10-29 13:52:11,177 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:11,177 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:11,177 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:52:11,177 - INFO     - 
================================================================================
2025-10-29 13:52:11,177 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:52:11,177 - INFO     - ================================================================================
2025-10-29 13:52:11,177 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:11,177 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:52:11,177 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:52:11,177 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:11,177 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:11,177 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:11,177 - INFO     -   - Raw ts2_f length: 20
2025-10-29 13:52:11,177 - INFO     -   - Raw f_after length: 100
2025-10-29 13:52:11,177 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:11,177 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:11,177 - INFO     -   - ts2_valid: 20 / 20 (removed -20)
2025-10-29 13:52:11,177 - INFO     -   - after_valid: 100 / 100 (removed 0)
2025-10-29 13:52:11,177 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:11,177 - INFO     -   - ts1_id: 5
2025-10-29 13:52:11,177 - INFO     -   - ts2_id: 11
2025-10-29 13:52:11,177 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:11,177 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:11,177 - INFO     -   - ts1_size: 5, ts2_size: 20
2025-10-29 13:52:11,177 - INFO     -   - Product space size: 100
2025-10-29 13:52:11,177 - INFO     -   - Using product state mapping
2025-10-29 13:52:11,177 - INFO     -   - f_before_product length: 100
2025-10-29 13:52:11,177 - INFO     -   - avg_f_before: 4.3600 (100 valid states)
2025-10-29 13:52:11,177 - INFO     -   - avg_f_after:  6.7200 (100 valid states)
2025-10-29 13:52:11,177 - INFO     -   - delta: 2.3600
2025-10-29 13:52:11,177 - INFO     -   - f_stability: 1.0 - |2.3600| / 4.3600 = 0.4587
2025-10-29 13:52:11,177 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:11,177 - INFO     -   - Compared 25 values
2025-10-29 13:52:11,177 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:11,177 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:11,177 - INFO     -   - states_before: 100
2025-10-29 13:52:11,177 - INFO     -   - states_after: 100
2025-10-29 13:52:11,177 - INFO     -   - delta_states: 0
2025-10-29 13:52:11,177 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:11,177 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:11,177 - INFO     -   - ts2_transitions: 97
2025-10-29 13:52:11,177 - INFO     -   - merged_transitions: 595
2025-10-29 13:52:11,177 - INFO     -   - transition_density_change: 4.8500
2025-10-29 13:52:11,177 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:11,186 - INFO     -   - search_signals present: True
2025-10-29 13:52:11,186 - INFO     -   - nodes_expanded: 100
2025-10-29 13:52:11,186 - INFO     -   - search_depth: 3
2025-10-29 13:52:11,186 - INFO     -   - solution_cost: 2
2025-10-29 13:52:11,186 - INFO     -   - branching_factor: 5.9500
2025-10-29 13:52:11,186 - INFO     -   - solution_found: True
2025-10-29 13:52:11,186 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:11,186 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:11,186 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:52:11,186 - INFO     -   - TS5(5) + TS11(20) → 100 states
2025-10-29 13:52:11,186 - INFO     -   - f_stability=0.459
2025-10-29 13:52:11,186 - INFO     -   - A* nodes_expanded=100
2025-10-29 13:52:11,186 - INFO     -   - solution_found=True
2025-10-29 13:52:11,186 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:11,186 - INFO     - 
  Extracted signals:
2025-10-29 13:52:11,186 - INFO     -     - iteration: 3
2025-10-29 13:52:11,186 - INFO     -     - states_before: 100
2025-10-29 13:52:11,186 - INFO     -     - states_after: 100
2025-10-29 13:52:11,186 - INFO     -     - delta_states: 0
2025-10-29 13:52:11,186 - INFO     -     - f_value_stability: 0.4587
2025-10-29 13:52:11,186 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:11,186 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:11,186 - INFO     -     - nodes_expanded: 100
2025-10-29 13:52:11,186 - INFO     -     - search_depth: 3
2025-10-29 13:52:11,186 - INFO     -     - solution_cost: 2
2025-10-29 13:52:11,189 - INFO     -     - branching_factor: 5.9500
2025-10-29 13:52:11,189 - INFO     -     - solution_found: True
2025-10-29 13:52:11,189 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:11,189 - INFO     - 
  Computing reward:
2025-10-29 13:52:11,189 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:11,189 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:11,189 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:11,189 - INFO     -   [1] BRANCHING FACTOR: 5.950 → score 0.307 (tolerable)
2025-10-29 13:52:11,189 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:52:11,190 - INFO     -   [3] F-VALUE STABILITY: 0.427
2025-10-29 13:52:11,190 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:52:11,190 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:11,190 - INFO     - 
  [COMPOSITE]: 0.526
2025-10-29 13:52:11,190 - INFO     -     = 0.300*0.307 (bf)
2025-10-29 13:52:11,190 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:52:11,190 - INFO     -     + 0.350*0.427 (stability)
2025-10-29 13:52:11,190 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:11,190 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:11,190 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:11,190 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:52:11,190 - INFO     - 
  [FINAL REWARD]: 0.3522
2025-10-29 13:52:11,190 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:11,190 - INFO     -     ✓ Reward computed: 0.3522
2025-10-29 13:52:11,190 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:11,190 - INFO     -     - bf_score                       0.3067
2025-10-29 13:52:11,190 - INFO     -     - depth_score                    0.8237
2025-10-29 13:52:11,190 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:11,190 - INFO     -     - f_stability                    0.4268
2025-10-29 13:52:11,190 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:52:11,190 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:11,190 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:11,190 - INFO     -     - composite                      0.5261
2025-10-29 13:52:11,190 - INFO     -     - total                          0.3522
2025-10-29 13:52:11,202 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:11,202 - INFO     -   Num remaining nodes: 5
2025-10-29 13:52:11,202 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:52:11,202 - INFO     -   Done: False
2025-10-29 13:52:11,202 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:11,202 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:11,202 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:11,202 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:11,202 - INFO     -     - num_nodes: 5
2025-10-29 13:52:11,202 - INFO     -     - num_edges: 18
2025-10-29 13:52:11,202 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:11,202 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:52:11,202 - INFO     -   After: current_merge_step = 4
2025-10-29 13:52:11,204 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:11,204 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:11,204 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:11,204 - INFO     -   ✓ Step logged
2025-10-29 13:52:11,204 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:11,204 - INFO     -   Returning:
2025-10-29 13:52:11,204 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:11,204 - INFO     -     - reward: 0.3522
2025-10-29 13:52:11,204 - INFO     -     - done: False
2025-10-29 13:52:11,204 - INFO     -     - truncated: False
2025-10-29 13:52:11,204 - INFO     -     - info: 19 keys
2025-10-29 13:52:11,204 - INFO     - ==========================================================================================

2025-10-29 13:52:11,212 - INFO     - 
==========================================================================================
2025-10-29 13:52:11,212 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:11,212 - INFO     - ==========================================================================================
2025-10-29 13:52:11,213 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:11,213 - INFO     -   Input action: 10 (type: int)
2025-10-29 13:52:11,213 - INFO     -   Available edges in graph: 18
2025-10-29 13:52:11,213 - INFO     -   Action index calculation:
2025-10-29 13:52:11,213 - INFO     -     - action % max(num_valid_edges, 1) = 10 % 18 = 10
2025-10-29 13:52:11,213 - INFO     -     - clamped to [0, 17]: 10
2025-10-29 13:52:11,214 - INFO     -   ✓ Extracted merge pair from edge 10: (10, 1)
2025-10-29 13:52:11,214 - INFO     -   ✓ Validation passed
2025-10-29 13:52:11,214 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:11,214 - INFO     -     - Total states before merge: 116
2025-10-29 13:52:11,214 - INFO     -     - Num nodes: 5
2025-10-29 13:52:11,214 - INFO     -     - Num edges: 18
2025-10-29 13:52:11,214 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:11,214 - INFO     -       - Node 10: 4 states
2025-10-29 13:52:11,214 - INFO     -       - Node 1: 2 states
2025-10-29 13:52:11,214 - INFO     -       - Expected product: 8 states
2025-10-29 13:52:11,214 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:11,218 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:52:11,218 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:11,218 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:52:11,321 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:11,321 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:11,321 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:52:11,321 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:11,322 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:11,322 - INFO     -   Calling graph_tracker.merge_nodes([10, 1])...
2025-10-29 13:52:11,322 - INFO     - Attempting merge of nodes 10 and 1...
2025-10-29 13:52:11,322 - INFO     - Successfully merged nodes into new node 13 with 8 states.
2025-10-29 13:52:11,322 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:11,322 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:11,322 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:52:11,322 - INFO     - 
================================================================================
2025-10-29 13:52:11,322 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:52:11,322 - INFO     - ================================================================================
2025-10-29 13:52:11,322 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:11,322 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:52:11,322 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:52:11,322 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:11,322 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:11,322 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:52:11,322 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:11,322 - INFO     -   - Raw f_after length: 8
2025-10-29 13:52:11,322 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:11,322 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:52:11,322 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:11,322 - INFO     -   - after_valid: 8 / 8 (removed 0)
2025-10-29 13:52:11,322 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:11,322 - INFO     -   - ts1_id: 10
2025-10-29 13:52:11,322 - INFO     -   - ts2_id: 1
2025-10-29 13:52:11,322 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:11,322 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:11,322 - INFO     -   - ts1_size: 4, ts2_size: 2
2025-10-29 13:52:11,322 - INFO     -   - Product space size: 8
2025-10-29 13:52:11,322 - INFO     -   - Using product state mapping
2025-10-29 13:52:11,322 - INFO     -   - f_before_product length: 8
2025-10-29 13:52:11,322 - INFO     -   - avg_f_before: 1.1250 (8 valid states)
2025-10-29 13:52:11,322 - INFO     -   - avg_f_after:  1.5000 (8 valid states)
2025-10-29 13:52:11,322 - INFO     -   - delta: 0.3750
2025-10-29 13:52:11,322 - INFO     -   - f_stability: 1.0 - |0.3750| / 1.1250 = 0.6667
2025-10-29 13:52:11,322 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:11,322 - INFO     -   - Compared 6 values
2025-10-29 13:52:11,325 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:11,325 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:11,325 - INFO     -   - states_before: 8
2025-10-29 13:52:11,325 - INFO     -   - states_after: 8
2025-10-29 13:52:11,325 - INFO     -   - delta_states: 0
2025-10-29 13:52:11,325 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:11,325 - INFO     -   - ts1_transitions: 20
2025-10-29 13:52:11,325 - INFO     -   - ts2_transitions: 5
2025-10-29 13:52:11,325 - INFO     -   - merged_transitions: 68
2025-10-29 13:52:11,325 - INFO     -   - transition_density_change: 5.3750
2025-10-29 13:52:11,325 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:11,325 - INFO     -   - search_signals present: True
2025-10-29 13:52:11,326 - INFO     -   - nodes_expanded: 8
2025-10-29 13:52:11,326 - INFO     -   - search_depth: 0
2025-10-29 13:52:11,326 - INFO     -   - solution_cost: 0
2025-10-29 13:52:11,326 - INFO     -   - branching_factor: 8.5000
2025-10-29 13:52:11,326 - INFO     -   - solution_found: True
2025-10-29 13:52:11,326 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:11,326 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:11,326 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:52:11,326 - INFO     -   - TS10(4) + TS1(2) → 8 states
2025-10-29 13:52:11,326 - INFO     -   - f_stability=0.667
2025-10-29 13:52:11,326 - INFO     -   - A* nodes_expanded=8
2025-10-29 13:52:11,326 - INFO     -   - solution_found=True
2025-10-29 13:52:11,326 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:11,326 - INFO     - 
  Extracted signals:
2025-10-29 13:52:11,326 - INFO     -     - iteration: 4
2025-10-29 13:52:11,326 - INFO     -     - states_before: 8
2025-10-29 13:52:11,326 - INFO     -     - states_after: 8
2025-10-29 13:52:11,326 - INFO     -     - delta_states: 0
2025-10-29 13:52:11,326 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:52:11,326 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:11,326 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:11,326 - INFO     -     - nodes_expanded: 8
2025-10-29 13:52:11,326 - INFO     -     - search_depth: 0
2025-10-29 13:52:11,326 - INFO     -     - solution_cost: 0
2025-10-29 13:52:11,326 - INFO     -     - branching_factor: 8.5000
2025-10-29 13:52:11,326 - INFO     -     - solution_found: True
2025-10-29 13:52:11,326 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:11,326 - WARNING  -     ⚠️  High branching factor: 8.5000
2025-10-29 13:52:11,326 - INFO     - 
  Computing reward:
2025-10-29 13:52:11,326 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:11,326 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:11,326 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:11,326 - INFO     -   [1] BRANCHING FACTOR: 8.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:52:11,326 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:52:11,326 - INFO     -   [3] F-VALUE STABILITY: 0.572
2025-10-29 13:52:11,326 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:52:11,326 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:11,326 - INFO     - 
  [COMPOSITE]: 0.450
2025-10-29 13:52:11,326 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:52:11,326 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:52:11,326 - INFO     -     + 0.350*0.572 (stability)
2025-10-29 13:52:11,326 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:11,326 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:11,326 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:11,326 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:52:11,326 - INFO     - 
  [FINAL REWARD]: 0.3003
2025-10-29 13:52:11,326 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:11,326 - INFO     -     ✓ Reward computed: 0.3003
2025-10-29 13:52:11,326 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:11,341 - INFO     -     - bf_score                       0.1000
2025-10-29 13:52:11,341 - INFO     -     - depth_score                    0.5000
2025-10-29 13:52:11,341 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:11,341 - INFO     -     - f_stability                    0.5719
2025-10-29 13:52:11,341 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:52:11,341 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:11,341 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:11,341 - INFO     -     - composite                      0.4502
2025-10-29 13:52:11,341 - INFO     -     - total                          0.3003
2025-10-29 13:52:11,341 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:11,341 - INFO     -   Num remaining nodes: 4
2025-10-29 13:52:11,341 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:52:11,341 - INFO     -   Done: False
2025-10-29 13:52:11,341 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:11,343 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:11,343 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:11,343 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:11,343 - INFO     -     - num_nodes: 4
2025-10-29 13:52:11,343 - INFO     -     - num_edges: 10
2025-10-29 13:52:11,343 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:11,343 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:52:11,343 - INFO     -   After: current_merge_step = 5
2025-10-29 13:52:11,343 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:11,343 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:11,343 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:11,343 - INFO     -   ✓ Step logged
2025-10-29 13:52:11,345 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:11,345 - INFO     -   Returning:
2025-10-29 13:52:11,345 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:11,345 - INFO     -     - reward: 0.3003
2025-10-29 13:52:11,345 - INFO     -     - done: False
2025-10-29 13:52:11,345 - INFO     -     - truncated: False
2025-10-29 13:52:11,345 - INFO     -     - info: 19 keys
2025-10-29 13:52:11,345 - INFO     - ==========================================================================================

2025-10-29 13:52:11,349 - INFO     - 
==========================================================================================
2025-10-29 13:52:11,349 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:11,349 - INFO     - ==========================================================================================
2025-10-29 13:52:11,349 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:11,349 - INFO     -   Input action: 9 (type: int)
2025-10-29 13:52:11,349 - INFO     -   Available edges in graph: 10
2025-10-29 13:52:11,349 - INFO     -   Action index calculation:
2025-10-29 13:52:11,349 - INFO     -     - action % max(num_valid_edges, 1) = 9 % 10 = 9
2025-10-29 13:52:11,349 - INFO     -     - clamped to [0, 9]: 9
2025-10-29 13:52:11,349 - INFO     -   ✓ Extracted merge pair from edge 9: (13, 12)
2025-10-29 13:52:11,349 - INFO     -   ✓ Validation passed
2025-10-29 13:52:11,349 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:11,349 - INFO     -     - Total states before merge: 118
2025-10-29 13:52:11,351 - INFO     -     - Num nodes: 4
2025-10-29 13:52:11,351 - INFO     -     - Num edges: 10
2025-10-29 13:52:11,351 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:11,351 - INFO     -       - Node 13: 8 states
2025-10-29 13:52:11,351 - INFO     -       - Node 12: 100 states
2025-10-29 13:52:11,351 - INFO     -       - Expected product: 800 states
2025-10-29 13:52:11,351 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:11,356 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:52:11,357 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:11,357 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:52:11,458 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:11,458 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:11,458 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:52:11,461 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:11,461 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:11,461 - INFO     -   Calling graph_tracker.merge_nodes([13, 12])...
2025-10-29 13:52:11,461 - INFO     - Attempting merge of nodes 13 and 12...
2025-10-29 13:52:11,461 - INFO     - Successfully merged nodes into new node 14 with 800 states.
2025-10-29 13:52:11,461 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:11,461 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:11,461 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:52:11,465 - INFO     - 
================================================================================
2025-10-29 13:52:11,465 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:52:11,465 - INFO     - ================================================================================
2025-10-29 13:52:11,465 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:11,465 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:52:11,465 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:52:11,466 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:11,466 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:11,466 - INFO     -   - Raw ts1_f length: 8
2025-10-29 13:52:11,466 - INFO     -   - Raw ts2_f length: 100
2025-10-29 13:52:11,466 - INFO     -   - Raw f_after length: 800
2025-10-29 13:52:11,466 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:11,466 - INFO     -   - ts1_valid: 8 / 8 (removed 0)
2025-10-29 13:52:11,466 - INFO     -   - ts2_valid: 100 / 100 (removed -100)
2025-10-29 13:52:11,466 - INFO     -   - after_valid: 680 / 800 (removed 120)
2025-10-29 13:52:11,468 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:11,468 - INFO     -   - ts1_id: 13
2025-10-29 13:52:11,468 - INFO     -   - ts2_id: 12
2025-10-29 13:52:11,468 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:11,468 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:11,468 - INFO     -   - ts1_size: 8, ts2_size: 100
2025-10-29 13:52:11,468 - INFO     -   - Product space size: 800
2025-10-29 13:52:11,468 - INFO     -   - Using product state mapping
2025-10-29 13:52:11,469 - INFO     -   - f_before_product length: 800
2025-10-29 13:52:11,471 - INFO     -   - avg_f_before: 6.7238 (800 valid states)
2025-10-29 13:52:11,471 - INFO     -   - avg_f_after:  9.2118 (680 valid states)
2025-10-29 13:52:11,471 - INFO     -   - delta: 2.4880
2025-10-29 13:52:11,471 - INFO     -   - f_stability: 1.0 - |2.4880| / 6.7238 = 0.6300
2025-10-29 13:52:11,471 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:11,471 - INFO     -   - Compared 108 values
2025-10-29 13:52:11,471 - INFO     -   - Significant changes (> 5.0): 26
2025-10-29 13:52:11,471 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:11,471 - INFO     -   - states_before: 800
2025-10-29 13:52:11,471 - INFO     -   - states_after: 800
2025-10-29 13:52:11,471 - INFO     -   - delta_states: 0
2025-10-29 13:52:11,471 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:11,471 - INFO     -   - ts1_transitions: 68
2025-10-29 13:52:11,471 - INFO     -   - ts2_transitions: 595
2025-10-29 13:52:11,473 - INFO     -   - merged_transitions: 6720
2025-10-29 13:52:11,473 - INFO     -   - transition_density_change: 7.5713
2025-10-29 13:52:11,473 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:11,473 - INFO     -   - search_signals present: True
2025-10-29 13:52:11,473 - INFO     -   - nodes_expanded: 680
2025-10-29 13:52:11,473 - INFO     -   - search_depth: 4
2025-10-29 13:52:11,473 - INFO     -   - solution_cost: 2
2025-10-29 13:52:11,473 - INFO     -   - branching_factor: 9.8824
2025-10-29 13:52:11,473 - INFO     -   - solution_found: True
2025-10-29 13:52:11,473 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:11,473 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:11,473 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:52:11,473 - INFO     -   - TS13(8) + TS12(100) → 800 states
2025-10-29 13:52:11,473 - INFO     -   - f_stability=0.630
2025-10-29 13:52:11,473 - INFO     -   - A* nodes_expanded=680
2025-10-29 13:52:11,473 - INFO     -   - solution_found=True
2025-10-29 13:52:11,473 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:11,473 - INFO     - 
  Extracted signals:
2025-10-29 13:52:11,473 - INFO     -     - iteration: 5
2025-10-29 13:52:11,473 - INFO     -     - states_before: 800
2025-10-29 13:52:11,473 - INFO     -     - states_after: 800
2025-10-29 13:52:11,476 - INFO     -     - delta_states: 0
2025-10-29 13:52:11,476 - INFO     -     - f_value_stability: 0.6300
2025-10-29 13:52:11,476 - INFO     -     - num_significant_f_changes: 26
2025-10-29 13:52:11,476 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:11,476 - INFO     -     - nodes_expanded: 680
2025-10-29 13:52:11,476 - INFO     -     - search_depth: 4
2025-10-29 13:52:11,476 - INFO     -     - solution_cost: 2
2025-10-29 13:52:11,476 - INFO     -     - branching_factor: 9.8824
2025-10-29 13:52:11,476 - INFO     -     - solution_found: True
2025-10-29 13:52:11,476 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:11,476 - WARNING  -     ⚠️  High branching factor: 9.8824
2025-10-29 13:52:11,476 - INFO     - 
  Computing reward:
2025-10-29 13:52:11,476 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:11,476 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:11,476 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:11,476 - INFO     -   [1] BRANCHING FACTOR: 9.882 → score 0.100 (high BF, minimal credit)
2025-10-29 13:52:11,476 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:52:11,476 - INFO     -   [3] F-VALUE STABILITY: 0.767
2025-10-29 13:52:11,476 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:52:11,476 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:11,476 - INFO     - 
  [COMPOSITE]: 0.578
2025-10-29 13:52:11,476 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:52:11,476 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:52:11,476 - INFO     -     + 0.350*0.767 (stability)
2025-10-29 13:52:11,476 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:11,476 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:11,476 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:11,476 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:52:11,476 - INFO     - 
  [FINAL REWARD]: 0.6551
2025-10-29 13:52:11,476 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:11,476 - INFO     -     ✓ Reward computed: 0.6551
2025-10-29 13:52:11,476 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:11,476 - INFO     -     - bf_score                       0.1000
2025-10-29 13:52:11,476 - INFO     -     - depth_score                    0.7953
2025-10-29 13:52:11,476 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:11,476 - INFO     -     - f_stability                    0.7671
2025-10-29 13:52:11,476 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:52:11,476 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:11,476 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:11,476 - INFO     -     - composite                      0.5775
2025-10-29 13:52:11,476 - INFO     -     - total                          0.6551
2025-10-29 13:52:11,476 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:11,476 - INFO     -   Num remaining nodes: 3
2025-10-29 13:52:11,476 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:52:11,476 - INFO     -   Done: False
2025-10-29 13:52:11,476 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:11,476 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:11,476 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:11,476 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:11,476 - INFO     -     - num_nodes: 3
2025-10-29 13:52:11,476 - INFO     -     - num_edges: 4
2025-10-29 13:52:11,476 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:11,476 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:52:11,476 - INFO     -   After: current_merge_step = 6
2025-10-29 13:52:11,476 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:11,476 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:11,476 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:11,485 - INFO     -   ✓ Step logged
2025-10-29 13:52:11,485 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:11,485 - INFO     -   Returning:
2025-10-29 13:52:11,485 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:11,485 - INFO     -     - reward: 0.6551
2025-10-29 13:52:11,485 - INFO     -     - done: False
2025-10-29 13:52:11,485 - INFO     -     - truncated: False
2025-10-29 13:52:11,486 - INFO     -     - info: 19 keys
2025-10-29 13:52:11,486 - INFO     - ==========================================================================================

2025-10-29 13:52:11,490 - INFO     - 
==========================================================================================
2025-10-29 13:52:11,490 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:11,490 - INFO     - ==========================================================================================
2025-10-29 13:52:11,490 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:11,490 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:52:11,490 - INFO     -   Available edges in graph: 4
2025-10-29 13:52:11,490 - INFO     -   Action index calculation:
2025-10-29 13:52:11,490 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 4 = 1
2025-10-29 13:52:11,490 - INFO     -     - clamped to [0, 3]: 1
2025-10-29 13:52:11,490 - INFO     -   ✓ Extracted merge pair from edge 1: (8, 14)
2025-10-29 13:52:11,490 - INFO     -   ✓ Validation passed
2025-10-29 13:52:11,490 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:11,490 - INFO     -     - Total states before merge: 810
2025-10-29 13:52:11,490 - INFO     -     - Num nodes: 3
2025-10-29 13:52:11,490 - INFO     -     - Num edges: 4
2025-10-29 13:52:11,490 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:11,490 - INFO     -       - Node 8: 5 states
2025-10-29 13:52:11,490 - INFO     -       - Node 14: 800 states
2025-10-29 13:52:11,490 - INFO     -       - Expected product: 4000 states
2025-10-29 13:52:11,490 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:11,493 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:52:11,493 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:11,493 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:52:11,600 - INFO     -   ✓ ACK received after 0.11s
2025-10-29 13:52:11,600 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:11,600 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:52:11,619 - INFO     -   ✓ TS file received after 0.02s
2025-10-29 13:52:11,621 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:11,621 - INFO     -   Calling graph_tracker.merge_nodes([8, 14])...
2025-10-29 13:52:11,621 - INFO     - Attempting merge of nodes 8 and 14...
2025-10-29 13:52:11,621 - INFO     - Successfully merged nodes into new node 15 with 4000 states.
2025-10-29 13:52:11,621 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:11,621 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:11,621 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:52:11,621 - INFO     - 
================================================================================
2025-10-29 13:52:11,621 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:52:11,621 - INFO     - ================================================================================
2025-10-29 13:52:11,621 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:11,621 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:52:11,621 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:52:11,623 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:11,623 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:11,623 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:11,623 - INFO     -   - Raw ts2_f length: 680
2025-10-29 13:52:11,623 - INFO     -   - Raw f_after length: 3400
2025-10-29 13:52:11,623 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:11,623 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:11,625 - INFO     -   - ts2_valid: 680 / 680 (removed -680)
2025-10-29 13:52:11,626 - INFO     -   - after_valid: 2984 / 3400 (removed 416)
2025-10-29 13:52:11,626 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:11,626 - INFO     -   - ts1_id: 8
2025-10-29 13:52:11,626 - INFO     -   - ts2_id: 14
2025-10-29 13:52:11,626 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:11,626 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:11,626 - INFO     -   - ts1_size: 5, ts2_size: 680
2025-10-29 13:52:11,626 - INFO     -   - Product space size: 3400
2025-10-29 13:52:11,626 - INFO     -   - Using product state mapping
2025-10-29 13:52:11,633 - INFO     -   - f_before_product length: 3400
2025-10-29 13:52:11,640 - INFO     -   - avg_f_before: 9.2294 (3400 valid states)
2025-10-29 13:52:11,640 - INFO     -   - avg_f_after:  13.0416 (2984 valid states)
2025-10-29 13:52:11,640 - INFO     -   - delta: 3.8121
2025-10-29 13:52:11,640 - INFO     -   - f_stability: 1.0 - |3.8121| / 9.2294 = 0.5870
2025-10-29 13:52:11,640 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:11,640 - INFO     -   - Compared 685 values
2025-10-29 13:52:11,640 - INFO     -   - Significant changes (> 5.0): 137
2025-10-29 13:52:11,640 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:11,640 - INFO     -   - states_before: 3400
2025-10-29 13:52:11,640 - INFO     -   - states_after: 3400
2025-10-29 13:52:11,640 - INFO     -   - delta_states: 0
2025-10-29 13:52:11,640 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:11,640 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:11,640 - INFO     -   - ts2_transitions: 6002
2025-10-29 13:52:11,640 - INFO     -   - merged_transitions: 20046
2025-10-29 13:52:11,640 - INFO     -   - transition_density_change: 4.1268
2025-10-29 13:52:11,640 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:11,640 - INFO     -   - search_signals present: True
2025-10-29 13:52:11,640 - INFO     -   - nodes_expanded: 2984
2025-10-29 13:52:11,640 - INFO     -   - search_depth: 6
2025-10-29 13:52:11,640 - INFO     -   - solution_cost: 2
2025-10-29 13:52:11,640 - INFO     -   - branching_factor: 6.7178
2025-10-29 13:52:11,640 - INFO     -   - solution_found: True
2025-10-29 13:52:11,640 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:11,640 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:11,640 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:52:11,640 - INFO     -   - TS8(5) + TS14(680) → 3400 states
2025-10-29 13:52:11,640 - INFO     -   - f_stability=0.587
2025-10-29 13:52:11,640 - INFO     -   - A* nodes_expanded=2984
2025-10-29 13:52:11,640 - INFO     -   - solution_found=True
2025-10-29 13:52:11,645 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:11,645 - INFO     - 
  Extracted signals:
2025-10-29 13:52:11,645 - INFO     -     - iteration: 6
2025-10-29 13:52:11,645 - INFO     -     - states_before: 3400
2025-10-29 13:52:11,645 - INFO     -     - states_after: 3400
2025-10-29 13:52:11,645 - INFO     -     - delta_states: 0
2025-10-29 13:52:11,645 - INFO     -     - f_value_stability: 0.5870
2025-10-29 13:52:11,645 - INFO     -     - num_significant_f_changes: 137
2025-10-29 13:52:11,645 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:11,645 - INFO     -     - nodes_expanded: 2984
2025-10-29 13:52:11,645 - INFO     -     - search_depth: 6
2025-10-29 13:52:11,645 - INFO     -     - solution_cost: 2
2025-10-29 13:52:11,645 - INFO     -     - branching_factor: 6.7178
2025-10-29 13:52:11,645 - INFO     -     - solution_found: True
2025-10-29 13:52:11,645 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:11,645 - INFO     - 
  Computing reward:
2025-10-29 13:52:11,645 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:11,645 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:11,645 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:11,645 - INFO     -   [1] BRANCHING FACTOR: 6.718 → score 0.228 (high BF, minimal credit)
2025-10-29 13:52:11,645 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:52:11,648 - INFO     -   [3] F-VALUE STABILITY: 0.623
2025-10-29 13:52:11,648 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:52:11,648 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:11,648 - INFO     - 
  [COMPOSITE]: 0.557
2025-10-29 13:52:11,648 - INFO     -     = 0.300*0.228 (bf)
2025-10-29 13:52:11,648 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:52:11,648 - INFO     -     + 0.350*0.623 (stability)
2025-10-29 13:52:11,656 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:11,656 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:11,656 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:11,656 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:52:11,658 - INFO     - 
  [FINAL REWARD]: 0.5142
2025-10-29 13:52:11,658 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:11,658 - INFO     -     ✓ Reward computed: 0.5142
2025-10-29 13:52:11,658 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:11,658 - INFO     -     - bf_score                       0.2282
2025-10-29 13:52:11,658 - INFO     -     - depth_score                    0.7525
2025-10-29 13:52:11,658 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:11,658 - INFO     -     - f_stability                    0.6232
2025-10-29 13:52:11,658 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:52:11,658 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:11,658 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:11,658 - INFO     -     - composite                      0.5571
2025-10-29 13:52:11,658 - INFO     -     - total                          0.5142
2025-10-29 13:52:11,658 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:11,658 - INFO     -   Num remaining nodes: 2
2025-10-29 13:52:11,658 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:52:11,658 - INFO     -   Done: False
2025-10-29 13:52:11,659 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:11,659 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:11,659 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:11,659 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:11,659 - INFO     -     - num_nodes: 2
2025-10-29 13:52:11,659 - INFO     -     - num_edges: 2
2025-10-29 13:52:11,659 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:11,659 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:52:11,659 - INFO     -   After: current_merge_step = 7
2025-10-29 13:52:11,659 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:11,659 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:11,659 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:11,659 - INFO     -   ✓ Step logged
2025-10-29 13:52:11,659 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:11,659 - INFO     -   Returning:
2025-10-29 13:52:11,659 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:11,659 - INFO     -     - reward: 0.5142
2025-10-29 13:52:11,659 - INFO     -     - done: False
2025-10-29 13:52:11,659 - INFO     -     - truncated: False
2025-10-29 13:52:11,659 - INFO     -     - info: 19 keys
2025-10-29 13:52:11,659 - INFO     - ==========================================================================================

2025-10-29 13:52:11,665 - INFO     - 
==========================================================================================
2025-10-29 13:52:11,665 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:11,665 - INFO     - ==========================================================================================
2025-10-29 13:52:11,665 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:11,665 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:52:11,665 - INFO     -   Available edges in graph: 2
2025-10-29 13:52:11,665 - INFO     -   Action index calculation:
2025-10-29 13:52:11,665 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:52:11,665 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:52:11,665 - INFO     -   ✓ Extracted merge pair from edge 0: (7, 15)
2025-10-29 13:52:11,665 - INFO     -   ✓ Validation passed
2025-10-29 13:52:11,665 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:11,665 - INFO     -     - Total states before merge: 4005
2025-10-29 13:52:11,665 - INFO     -     - Num nodes: 2
2025-10-29 13:52:11,669 - INFO     -     - Num edges: 2
2025-10-29 13:52:11,669 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:11,669 - INFO     -       - Node 7: 5 states
2025-10-29 13:52:11,669 - INFO     -       - Node 15: 4000 states
2025-10-29 13:52:11,669 - INFO     -       - Expected product: 20000 states
2025-10-29 13:52:11,669 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:11,673 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:52:11,673 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:11,673 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:52:11,781 - INFO     -   ✓ ACK received after 0.11s
2025-10-29 13:52:11,781 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:11,781 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:52:12,049 - INFO     -   ✓ TS file received after 0.26s
2025-10-29 13:52:12,049 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:12,049 - INFO     -   Calling graph_tracker.merge_nodes([7, 15])...
2025-10-29 13:52:12,049 - INFO     - Attempting merge of nodes 7 and 15...
2025-10-29 13:52:12,049 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:52:12,049 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:12,049 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:12,049 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:52:12,049 - INFO     - 
================================================================================
2025-10-29 13:52:12,049 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:52:12,049 - INFO     - ================================================================================
2025-10-29 13:52:12,049 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:12,049 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:52:12,049 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:52:12,060 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:12,060 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:12,060 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:12,060 - INFO     -   - Raw ts2_f length: 791
2025-10-29 13:52:12,060 - INFO     -   - Raw f_after length: 3955
2025-10-29 13:52:12,060 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:12,060 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:12,060 - INFO     -   - ts2_valid: 791 / 791 (removed -791)
2025-10-29 13:52:12,065 - INFO     -   - after_valid: 3030 / 3955 (removed 925)
2025-10-29 13:52:12,065 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:12,065 - INFO     -   - ts1_id: 7
2025-10-29 13:52:12,065 - INFO     -   - ts2_id: 15
2025-10-29 13:52:12,066 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:12,066 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:12,066 - INFO     -   - ts1_size: 5, ts2_size: 791
2025-10-29 13:52:12,066 - INFO     -   - Product space size: 3955
2025-10-29 13:52:12,066 - INFO     -   - Using product state mapping
2025-10-29 13:52:12,073 - INFO     -   - f_before_product length: 3955
2025-10-29 13:52:12,082 - INFO     -   - avg_f_before: 9.3740 (3955 valid states)
2025-10-29 13:52:12,082 - INFO     -   - avg_f_after:  14.0122 (3030 valid states)
2025-10-29 13:52:12,082 - INFO     -   - delta: 4.6383
2025-10-29 13:52:12,082 - INFO     -   - f_stability: 1.0 - |4.6383| / 9.3740 = 0.5052
2025-10-29 13:52:12,082 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:12,082 - INFO     -   - Compared 796 values
2025-10-29 13:52:12,082 - INFO     -   - Significant changes (> 5.0): 293
2025-10-29 13:52:12,082 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:12,082 - INFO     -   - states_before: 3955
2025-10-29 13:52:12,082 - INFO     -   - states_after: 3955
2025-10-29 13:52:12,082 - INFO     -   - delta_states: 0
2025-10-29 13:52:12,082 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:12,082 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:12,082 - INFO     -   - ts2_transitions: 7520
2025-10-29 13:52:12,082 - INFO     -   - merged_transitions: 21984
2025-10-29 13:52:12,082 - INFO     -   - transition_density_change: 3.6539
2025-10-29 13:52:12,082 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:12,082 - INFO     -   - search_signals present: True
2025-10-29 13:52:12,082 - INFO     -   - nodes_expanded: 3030
2025-10-29 13:52:12,082 - INFO     -   - search_depth: 7
2025-10-29 13:52:12,082 - INFO     -   - solution_cost: 4
2025-10-29 13:52:12,082 - INFO     -   - branching_factor: 7.2554
2025-10-29 13:52:12,082 - INFO     -   - solution_found: True
2025-10-29 13:52:12,082 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:12,090 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:12,090 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:52:12,090 - INFO     -   - TS7(5) + TS15(791) → 3955 states
2025-10-29 13:52:12,090 - INFO     -   - f_stability=0.505
2025-10-29 13:52:12,090 - INFO     -   - A* nodes_expanded=3030
2025-10-29 13:52:12,090 - INFO     -   - solution_found=True
2025-10-29 13:52:12,090 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:12,090 - INFO     - 
  Extracted signals:
2025-10-29 13:52:12,090 - INFO     -     - iteration: 7
2025-10-29 13:52:12,090 - INFO     -     - states_before: 3955
2025-10-29 13:52:12,090 - INFO     -     - states_after: 3955
2025-10-29 13:52:12,090 - INFO     -     - delta_states: 0
2025-10-29 13:52:12,090 - INFO     -     - f_value_stability: 0.5052
2025-10-29 13:52:12,090 - INFO     -     - num_significant_f_changes: 293
2025-10-29 13:52:12,090 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:12,090 - INFO     -     - nodes_expanded: 3030
2025-10-29 13:52:12,090 - INFO     -     - search_depth: 7
2025-10-29 13:52:12,090 - INFO     -     - solution_cost: 4
2025-10-29 13:52:12,090 - INFO     -     - branching_factor: 7.2554
2025-10-29 13:52:12,090 - INFO     -     - solution_found: True
2025-10-29 13:52:12,090 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:12,090 - INFO     - 
  Computing reward:
2025-10-29 13:52:12,090 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:12,090 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:12,090 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:12,090 - INFO     -   [1] BRANCHING FACTOR: 7.255 → score 0.174 (high BF, minimal credit)
2025-10-29 13:52:12,090 - INFO     -   [2] SOLUTION QUALITY: depth=7 → score 0.736 + bonus 0.300
2025-10-29 13:52:12,093 - INFO     -   [3] F-VALUE STABILITY: 0.628
2025-10-29 13:52:12,093 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:52:12,093 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:12,093 - INFO     - 
  [COMPOSITE]: 0.539
2025-10-29 13:52:12,093 - INFO     -     = 0.300*0.174 (bf)
2025-10-29 13:52:12,093 - INFO     -     + 0.200*0.736 (depth)
2025-10-29 13:52:12,093 - INFO     -     + 0.350*0.628 (stability)
2025-10-29 13:52:12,093 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:12,093 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:12,093 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:12,093 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:52:12,093 - INFO     - 
  [FINAL REWARD]: 0.4782
2025-10-29 13:52:12,093 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:12,093 - INFO     -     ✓ Reward computed: 0.4782
2025-10-29 13:52:12,093 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:12,093 - INFO     -     - bf_score                       0.1745
2025-10-29 13:52:12,093 - INFO     -     - depth_score                    0.7356
2025-10-29 13:52:12,093 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:12,093 - INFO     -     - f_stability                    0.6275
2025-10-29 13:52:12,093 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:52:12,093 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:12,093 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:12,093 - INFO     -     - composite                      0.5391
2025-10-29 13:52:12,093 - INFO     -     - total                          0.4782
2025-10-29 13:52:12,093 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:12,093 - INFO     -   Num remaining nodes: 1
2025-10-29 13:52:12,093 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:52:12,093 - INFO     -   Done: True
2025-10-29 13:52:12,093 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:52:12,093 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:12,093 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:12,098 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:12,098 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:12,098 - INFO     -     - num_nodes: 1
2025-10-29 13:52:12,098 - INFO     -     - num_edges: 0
2025-10-29 13:52:12,098 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:12,098 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:52:12,098 - INFO     -   After: current_merge_step = 8
2025-10-29 13:52:12,098 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:12,098 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:12,098 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:12,098 - INFO     -   ✓ Step logged
2025-10-29 13:52:12,098 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:12,098 - INFO     -   Returning:
2025-10-29 13:52:12,098 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:12,098 - INFO     -     - reward: 0.4782
2025-10-29 13:52:12,098 - INFO     -     - done: True
2025-10-29 13:52:12,098 - INFO     -     - truncated: False
2025-10-29 13:52:12,098 - INFO     -     - info: 19 keys
2025-10-29 13:52:12,098 - INFO     - ==========================================================================================

2025-10-29 13:52:12,198 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:52:12,210 - INFO     - [Handshake] Building FD command:
2025-10-29 13:52:12,210 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:52:12,210 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_01.pddl
2025-10-29 13:52:12,210 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:52:12,213 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:52:12,967 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:52:12,967 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:52:12,967 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:52:13,278 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:52:13,278 - INFO     - Initializing GraphTracker...
2025-10-29 13:52:13,278 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:52:13,278 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:52:13,281 - INFO     -    → Node 0 has 2 states
2025-10-29 13:52:13,281 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:52:13,281 - INFO     -    → Node 1 has 2 states
2025-10-29 13:52:13,281 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:52:13,281 - INFO     -    → Node 2 has 2 states
2025-10-29 13:52:13,281 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:52:13,281 - INFO     -    → Node 3 has 2 states
2025-10-29 13:52:13,281 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:52:13,281 - INFO     -    → Node 4 has 2 states
2025-10-29 13:52:13,281 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:52:13,281 - INFO     -    → Node 5 has 5 states
2025-10-29 13:52:13,281 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:52:13,281 - INFO     -    → Node 6 has 5 states
2025-10-29 13:52:13,281 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:52:13,281 - INFO     -    → Node 7 has 5 states
2025-10-29 13:52:13,281 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:52:13,281 - INFO     -    → Node 8 has 5 states
2025-10-29 13:52:13,281 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:52:13,281 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:52:13,281 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:52:13,281 - INFO     - Added edge (0, 1)
2025-10-29 13:52:13,281 - INFO     - Added edge (0, 2)
2025-10-29 13:52:13,281 - INFO     - Added edge (0, 3)
2025-10-29 13:52:13,281 - INFO     - Added edge (0, 4)
2025-10-29 13:52:13,281 - INFO     - Added edge (0, 5)
2025-10-29 13:52:13,281 - INFO     - Added edge (0, 6)
2025-10-29 13:52:13,281 - INFO     - Added edge (0, 7)
2025-10-29 13:52:13,281 - INFO     - Added edge (0, 8)
2025-10-29 13:52:13,281 - INFO     - Added edge (1, 0)
2025-10-29 13:52:13,281 - INFO     - Added edge (1, 2)
2025-10-29 13:52:13,281 - INFO     - Added edge (1, 3)
2025-10-29 13:52:13,281 - INFO     - Added edge (1, 4)
2025-10-29 13:52:13,281 - INFO     - Added edge (1, 5)
2025-10-29 13:52:13,281 - INFO     - Added edge (1, 6)
2025-10-29 13:52:13,281 - INFO     - Added edge (1, 7)
2025-10-29 13:52:13,281 - INFO     - Added edge (1, 8)
2025-10-29 13:52:13,286 - INFO     - Added edge (2, 0)
2025-10-29 13:52:13,286 - INFO     - Added edge (2, 1)
2025-10-29 13:52:13,286 - INFO     - Added edge (2, 3)
2025-10-29 13:52:13,286 - INFO     - Added edge (2, 4)
2025-10-29 13:52:13,286 - INFO     - Added edge (2, 5)
2025-10-29 13:52:13,286 - INFO     - Added edge (2, 6)
2025-10-29 13:52:13,286 - INFO     - Added edge (2, 7)
2025-10-29 13:52:13,286 - INFO     - Added edge (2, 8)
2025-10-29 13:52:13,286 - INFO     - Added edge (3, 0)
2025-10-29 13:52:13,286 - INFO     - Added edge (3, 1)
2025-10-29 13:52:13,286 - INFO     - Added edge (3, 2)
2025-10-29 13:52:13,286 - INFO     - Added edge (3, 4)
2025-10-29 13:52:13,286 - INFO     - Added edge (3, 5)
2025-10-29 13:52:13,286 - INFO     - Added edge (3, 6)
2025-10-29 13:52:13,286 - INFO     - Added edge (3, 7)
2025-10-29 13:52:13,286 - INFO     - Added edge (3, 8)
2025-10-29 13:52:13,286 - INFO     - Added edge (4, 0)
2025-10-29 13:52:13,286 - INFO     - Added edge (4, 1)
2025-10-29 13:52:13,286 - INFO     - Added edge (4, 2)
2025-10-29 13:52:13,286 - INFO     - Added edge (4, 3)
2025-10-29 13:52:13,286 - INFO     - Added edge (4, 5)
2025-10-29 13:52:13,286 - INFO     - Added edge (4, 6)
2025-10-29 13:52:13,286 - INFO     - Added edge (4, 7)
2025-10-29 13:52:13,286 - INFO     - Added edge (4, 8)
2025-10-29 13:52:13,286 - INFO     - Added edge (5, 0)
2025-10-29 13:52:13,286 - INFO     - Added edge (5, 1)
2025-10-29 13:52:13,286 - INFO     - Added edge (5, 2)
2025-10-29 13:52:13,286 - INFO     - Added edge (5, 3)
2025-10-29 13:52:13,286 - INFO     - Added edge (5, 4)
2025-10-29 13:52:13,286 - INFO     - Added edge (6, 0)
2025-10-29 13:52:13,286 - INFO     - Added edge (6, 1)
2025-10-29 13:52:13,290 - INFO     - Added edge (6, 2)
2025-10-29 13:52:13,290 - INFO     - Added edge (6, 3)
2025-10-29 13:52:13,290 - INFO     - Added edge (6, 4)
2025-10-29 13:52:13,290 - INFO     - Added edge (7, 0)
2025-10-29 13:52:13,290 - INFO     - Added edge (7, 1)
2025-10-29 13:52:13,290 - INFO     - Added edge (7, 2)
2025-10-29 13:52:13,290 - INFO     - Added edge (7, 3)
2025-10-29 13:52:13,290 - INFO     - Added edge (7, 4)
2025-10-29 13:52:13,290 - INFO     - Added edge (8, 0)
2025-10-29 13:52:13,290 - INFO     - Added edge (8, 1)
2025-10-29 13:52:13,290 - INFO     - Added edge (8, 2)
2025-10-29 13:52:13,290 - INFO     - Added edge (8, 3)
2025-10-29 13:52:13,290 - INFO     - Added edge (8, 4)
2025-10-29 13:52:13,290 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:52:17,681 - INFO     -     ✓ Training complete (total: 6 steps)
2025-10-29 13:52:17,682 - INFO     -   [3/5] problem_small_02.pddl
2025-10-29 13:52:17,682 - INFO     - Environment initialized with:
2025-10-29 13:52:17,682 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:52:17,682 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_02.pddl
2025-10-29 13:52:17,682 - INFO     -   FD base: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward
2025-10-29 13:52:17,682 - INFO     -   max_states: 4000
2025-10-29 13:52:17,682 - INFO     -   threshold_before_merge: 1
2025-10-29 13:52:17,682 - INFO     - ✓ Initialized reward function: astar_search
2025-10-29 13:52:17,682 - INFO     - ✓ RewardInfoExtractor initialized (output_dir: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output)
2025-10-29 13:52:17,682 - INFO     - ✓ Initialized reward info extractor
2025-10-29 13:52:17,685 - INFO     -     Training for 3 timesteps...
2025-10-29 13:52:17,695 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:52:17,695 - WARNING  - ⚠️ Could not delete C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\output.sas: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\eliez\\Desktop\\Studies\\Fall 2025\\0960208 - AI Autonomous\\_AI_Proj_Technion\\downward\\output.sas'
2025-10-29 13:52:17,695 - INFO     - [Handshake] Building FD command:
2025-10-29 13:52:17,695 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:52:17,695 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_02.pddl
2025-10-29 13:52:17,695 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:52:17,705 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:52:17,857 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:52:17,857 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:52:18,259 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:52:18,572 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:52:18,572 - INFO     - Initializing GraphTracker...
2025-10-29 13:52:18,572 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:52:18,572 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:52:18,572 - INFO     -    → Node 0 has 2 states
2025-10-29 13:52:18,572 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:52:18,572 - INFO     -    → Node 1 has 2 states
2025-10-29 13:52:18,572 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:52:18,572 - INFO     -    → Node 2 has 2 states
2025-10-29 13:52:18,572 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:52:18,572 - INFO     -    → Node 3 has 2 states
2025-10-29 13:52:18,572 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:52:18,572 - INFO     -    → Node 4 has 2 states
2025-10-29 13:52:18,572 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:52:18,578 - INFO     -    → Node 5 has 5 states
2025-10-29 13:52:18,578 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:52:18,578 - INFO     -    → Node 6 has 5 states
2025-10-29 13:52:18,578 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:52:18,578 - INFO     -    → Node 7 has 5 states
2025-10-29 13:52:18,578 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:52:18,578 - INFO     -    → Node 8 has 5 states
2025-10-29 13:52:18,578 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:52:18,578 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:52:18,578 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:52:18,578 - INFO     - Added edge (0, 1)
2025-10-29 13:52:18,578 - INFO     - Added edge (0, 2)
2025-10-29 13:52:18,578 - INFO     - Added edge (0, 3)
2025-10-29 13:52:18,578 - INFO     - Added edge (0, 4)
2025-10-29 13:52:18,581 - INFO     - Added edge (0, 5)
2025-10-29 13:52:18,581 - INFO     - Added edge (0, 6)
2025-10-29 13:52:18,581 - INFO     - Added edge (0, 7)
2025-10-29 13:52:18,581 - INFO     - Added edge (0, 8)
2025-10-29 13:52:18,581 - INFO     - Added edge (1, 0)
2025-10-29 13:52:18,581 - INFO     - Added edge (1, 2)
2025-10-29 13:52:18,581 - INFO     - Added edge (1, 3)
2025-10-29 13:52:18,581 - INFO     - Added edge (1, 4)
2025-10-29 13:52:18,581 - INFO     - Added edge (1, 5)
2025-10-29 13:52:18,581 - INFO     - Added edge (1, 6)
2025-10-29 13:52:18,581 - INFO     - Added edge (1, 7)
2025-10-29 13:52:18,581 - INFO     - Added edge (1, 8)
2025-10-29 13:52:18,581 - INFO     - Added edge (2, 0)
2025-10-29 13:52:18,581 - INFO     - Added edge (2, 1)
2025-10-29 13:52:18,581 - INFO     - Added edge (2, 3)
2025-10-29 13:52:18,581 - INFO     - Added edge (2, 4)
2025-10-29 13:52:18,581 - INFO     - Added edge (2, 5)
2025-10-29 13:52:18,581 - INFO     - Added edge (2, 6)
2025-10-29 13:52:18,581 - INFO     - Added edge (2, 7)
2025-10-29 13:52:18,581 - INFO     - Added edge (2, 8)
2025-10-29 13:52:18,581 - INFO     - Added edge (3, 0)
2025-10-29 13:52:18,581 - INFO     - Added edge (3, 1)
2025-10-29 13:52:18,581 - INFO     - Added edge (3, 2)
2025-10-29 13:52:18,581 - INFO     - Added edge (3, 4)
2025-10-29 13:52:18,581 - INFO     - Added edge (3, 5)
2025-10-29 13:52:18,581 - INFO     - Added edge (3, 6)
2025-10-29 13:52:18,581 - INFO     - Added edge (3, 7)
2025-10-29 13:52:18,581 - INFO     - Added edge (3, 8)
2025-10-29 13:52:18,581 - INFO     - Added edge (4, 0)
2025-10-29 13:52:18,581 - INFO     - Added edge (4, 1)
2025-10-29 13:52:18,581 - INFO     - Added edge (4, 2)
2025-10-29 13:52:18,581 - INFO     - Added edge (4, 3)
2025-10-29 13:52:18,581 - INFO     - Added edge (4, 5)
2025-10-29 13:52:18,581 - INFO     - Added edge (4, 6)
2025-10-29 13:52:18,581 - INFO     - Added edge (4, 7)
2025-10-29 13:52:18,581 - INFO     - Added edge (4, 8)
2025-10-29 13:52:18,581 - INFO     - Added edge (5, 0)
2025-10-29 13:52:18,581 - INFO     - Added edge (5, 1)
2025-10-29 13:52:18,581 - INFO     - Added edge (5, 2)
2025-10-29 13:52:18,581 - INFO     - Added edge (5, 3)
2025-10-29 13:52:18,581 - INFO     - Added edge (5, 4)
2025-10-29 13:52:18,581 - INFO     - Added edge (6, 0)
2025-10-29 13:52:18,581 - INFO     - Added edge (6, 1)
2025-10-29 13:52:18,581 - INFO     - Added edge (6, 2)
2025-10-29 13:52:18,581 - INFO     - Added edge (6, 3)
2025-10-29 13:52:18,581 - INFO     - Added edge (6, 4)
2025-10-29 13:52:18,581 - INFO     - Added edge (7, 0)
2025-10-29 13:52:18,581 - INFO     - Added edge (7, 1)
2025-10-29 13:52:18,581 - INFO     - Added edge (7, 2)
2025-10-29 13:52:18,581 - INFO     - Added edge (7, 3)
2025-10-29 13:52:18,581 - INFO     - Added edge (7, 4)
2025-10-29 13:52:18,581 - INFO     - Added edge (8, 0)
2025-10-29 13:52:18,581 - INFO     - Added edge (8, 1)
2025-10-29 13:52:18,581 - INFO     - Added edge (8, 2)
2025-10-29 13:52:18,581 - INFO     - Added edge (8, 3)
2025-10-29 13:52:18,581 - INFO     - Added edge (8, 4)
2025-10-29 13:52:18,581 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:52:18,605 - INFO     - 
==========================================================================================
2025-10-29 13:52:18,605 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:18,605 - INFO     - ==========================================================================================
2025-10-29 13:52:18,605 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:18,605 - INFO     -   Input action: 29 (type: int)
2025-10-29 13:52:18,605 - INFO     -   Available edges in graph: 60
2025-10-29 13:52:18,605 - INFO     -   Action index calculation:
2025-10-29 13:52:18,605 - INFO     -     - action % max(num_valid_edges, 1) = 29 % 60 = 29
2025-10-29 13:52:18,605 - INFO     -     - clamped to [0, 59]: 29
2025-10-29 13:52:18,605 - INFO     -   ✓ Extracted merge pair from edge 29: (3, 6)
2025-10-29 13:52:18,605 - INFO     -   ✓ Validation passed
2025-10-29 13:52:18,605 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:18,605 - INFO     -     - Total states before merge: 30
2025-10-29 13:52:18,605 - INFO     -     - Num nodes: 9
2025-10-29 13:52:18,605 - INFO     -     - Num edges: 60
2025-10-29 13:52:18,607 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:18,607 - INFO     -       - Node 3: 2 states
2025-10-29 13:52:18,607 - INFO     -       - Node 6: 5 states
2025-10-29 13:52:18,607 - INFO     -       - Expected product: 10 states
2025-10-29 13:52:18,607 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:18,611 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:52:18,611 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:18,611 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:52:18,713 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:18,713 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:18,713 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:52:18,713 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:18,713 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:18,713 - INFO     -   Calling graph_tracker.merge_nodes([3, 6])...
2025-10-29 13:52:18,713 - INFO     - Attempting merge of nodes 3 and 6...
2025-10-29 13:52:18,715 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:52:18,715 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:18,715 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:18,715 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:52:18,715 - INFO     - 
================================================================================
2025-10-29 13:52:18,715 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:52:18,715 - INFO     - ================================================================================
2025-10-29 13:52:18,715 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:18,715 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:52:18,715 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:52:18,717 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:18,717 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:18,717 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:18,717 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:18,717 - INFO     -   - Raw f_after length: 10
2025-10-29 13:52:18,717 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:18,717 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:18,717 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:18,717 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:52:18,717 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:18,717 - INFO     -   - ts1_id: 3
2025-10-29 13:52:18,717 - INFO     -   - ts2_id: 6
2025-10-29 13:52:18,717 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:18,717 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:18,717 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:52:18,717 - INFO     -   - Product space size: 10
2025-10-29 13:52:18,717 - INFO     -   - Using product state mapping
2025-10-29 13:52:18,719 - INFO     -   - f_before_product length: 10
2025-10-29 13:52:18,719 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:52:18,719 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:52:18,719 - INFO     -   - delta: 0.4000
2025-10-29 13:52:18,719 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:52:18,719 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:18,719 - INFO     -   - Compared 7 values
2025-10-29 13:52:18,719 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:18,719 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:18,719 - INFO     -   - states_before: 10
2025-10-29 13:52:18,719 - INFO     -   - states_after: 10
2025-10-29 13:52:18,719 - INFO     -   - delta_states: 0
2025-10-29 13:52:18,719 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:18,719 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:18,719 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:18,721 - INFO     -   - merged_transitions: 40
2025-10-29 13:52:18,721 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:52:18,721 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:18,721 - INFO     -   - search_signals present: True
2025-10-29 13:52:18,721 - INFO     -   - nodes_expanded: 10
2025-10-29 13:52:18,721 - INFO     -   - search_depth: 1
2025-10-29 13:52:18,721 - INFO     -   - solution_cost: 0
2025-10-29 13:52:18,721 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:52:18,721 - INFO     -   - solution_found: True
2025-10-29 13:52:18,721 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:18,721 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:18,721 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:52:18,721 - INFO     -   - TS3(2) + TS6(5) → 10 states
2025-10-29 13:52:18,721 - INFO     -   - f_stability=0.862
2025-10-29 13:52:18,721 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:52:18,723 - INFO     -   - solution_found=True
2025-10-29 13:52:18,723 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:18,723 - INFO     - 
  Extracted signals:
2025-10-29 13:52:18,723 - INFO     -     - iteration: 0
2025-10-29 13:52:18,723 - INFO     -     - states_before: 10
2025-10-29 13:52:18,723 - INFO     -     - states_after: 10
2025-10-29 13:52:18,723 - INFO     -     - delta_states: 0
2025-10-29 13:52:18,723 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:52:18,723 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:18,723 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:18,723 - INFO     -     - nodes_expanded: 10
2025-10-29 13:52:18,723 - INFO     -     - search_depth: 1
2025-10-29 13:52:18,723 - INFO     -     - solution_cost: 0
2025-10-29 13:52:18,723 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:52:18,723 - INFO     -     - solution_found: True
2025-10-29 13:52:18,723 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:18,725 - INFO     - 
  Computing reward:
2025-10-29 13:52:18,725 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:18,725 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:18,725 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:18,725 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:52:18,725 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:52:18,726 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:52:18,726 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:18,726 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:18,726 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:52:18,726 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:52:18,726 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:52:18,726 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:52:18,726 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:18,726 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:18,726 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:18,726 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:18,726 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:52:18,726 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:18,726 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:52:18,726 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:18,728 - INFO     -     - bf_score                       0.5667
2025-10-29 13:52:18,728 - INFO     -     - depth_score                    0.9119
2025-10-29 13:52:18,728 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:18,728 - INFO     -     - f_stability                    0.2913
2025-10-29 13:52:18,728 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:18,728 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:18,728 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:18,733 - INFO     -     - composite                      0.5743
2025-10-29 13:52:18,733 - INFO     -     - total                          0.3487
2025-10-29 13:52:18,733 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:18,733 - INFO     -   Num remaining nodes: 8
2025-10-29 13:52:18,733 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:52:18,733 - INFO     -   Done: False
2025-10-29 13:52:18,733 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:18,733 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:18,733 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:18,733 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:18,733 - INFO     -     - num_nodes: 8
2025-10-29 13:52:18,733 - INFO     -     - num_edges: 50
2025-10-29 13:52:18,733 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:18,733 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:52:18,733 - INFO     -   After: current_merge_step = 1
2025-10-29 13:52:18,733 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:18,733 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:18,733 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:18,733 - INFO     -   ✓ Step logged
2025-10-29 13:52:18,733 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:18,733 - INFO     -   Returning:
2025-10-29 13:52:18,733 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:18,733 - INFO     -     - reward: 0.3487
2025-10-29 13:52:18,737 - INFO     -     - done: False
2025-10-29 13:52:18,737 - INFO     -     - truncated: False
2025-10-29 13:52:18,737 - INFO     -     - info: 19 keys
2025-10-29 13:52:18,737 - INFO     - ==========================================================================================

2025-10-29 13:52:18,741 - INFO     - 
==========================================================================================
2025-10-29 13:52:18,741 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:18,741 - INFO     - ==========================================================================================
2025-10-29 13:52:18,741 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:18,741 - INFO     -   Input action: 31 (type: int)
2025-10-29 13:52:18,741 - INFO     -   Available edges in graph: 50
2025-10-29 13:52:18,741 - INFO     -   Action index calculation:
2025-10-29 13:52:18,741 - INFO     -     - action % max(num_valid_edges, 1) = 31 % 50 = 31
2025-10-29 13:52:18,741 - INFO     -     - clamped to [0, 49]: 31
2025-10-29 13:52:18,741 - INFO     -   ✓ Extracted merge pair from edge 31: (5, 4)
2025-10-29 13:52:18,741 - INFO     -   ✓ Validation passed
2025-10-29 13:52:18,741 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:18,741 - INFO     -     - Total states before merge: 33
2025-10-29 13:52:18,741 - INFO     -     - Num nodes: 8
2025-10-29 13:52:18,741 - INFO     -     - Num edges: 50
2025-10-29 13:52:18,741 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:18,741 - INFO     -       - Node 5: 5 states
2025-10-29 13:52:18,743 - INFO     -       - Node 4: 2 states
2025-10-29 13:52:18,743 - INFO     -       - Expected product: 10 states
2025-10-29 13:52:18,743 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:18,749 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:52:18,749 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:18,749 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:52:18,851 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:18,851 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:18,851 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:52:18,853 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:18,853 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:18,853 - INFO     -   Calling graph_tracker.merge_nodes([5, 4])...
2025-10-29 13:52:18,853 - INFO     - Attempting merge of nodes 5 and 4...
2025-10-29 13:52:18,853 - INFO     - Successfully merged nodes into new node 10 with 10 states.
2025-10-29 13:52:18,853 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:18,853 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:18,853 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:52:18,853 - INFO     - 
================================================================================
2025-10-29 13:52:18,855 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:52:18,855 - INFO     - ================================================================================
2025-10-29 13:52:18,855 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:18,855 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:52:18,855 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:52:18,855 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:18,855 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:18,855 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:18,857 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:18,857 - INFO     -   - Raw f_after length: 10
2025-10-29 13:52:18,857 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:18,857 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:18,857 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:18,857 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:52:18,858 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:18,858 - INFO     -   - ts1_id: 5
2025-10-29 13:52:18,858 - INFO     -   - ts2_id: 4
2025-10-29 13:52:18,858 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:18,858 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:18,860 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:52:18,860 - INFO     -   - Product space size: 10
2025-10-29 13:52:18,860 - INFO     -   - Using product state mapping
2025-10-29 13:52:18,860 - INFO     -   - f_before_product length: 10
2025-10-29 13:52:18,860 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:52:18,860 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:52:18,860 - INFO     -   - delta: 0.8000
2025-10-29 13:52:18,860 - INFO     -   - f_stability: 1.0 - |0.8000| / 2.8000 = 0.7143
2025-10-29 13:52:18,860 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:18,860 - INFO     -   - Compared 7 values
2025-10-29 13:52:18,860 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:52:18,860 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:18,860 - INFO     -   - states_before: 10
2025-10-29 13:52:18,860 - INFO     -   - states_after: 10
2025-10-29 13:52:18,860 - INFO     -   - delta_states: 0
2025-10-29 13:52:18,862 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:18,862 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:18,862 - INFO     -   - ts2_transitions: 3
2025-10-29 13:52:18,862 - INFO     -   - merged_transitions: 27
2025-10-29 13:52:18,862 - INFO     -   - transition_density_change: 1.1000
2025-10-29 13:52:18,862 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:18,862 - INFO     -   - search_signals present: True
2025-10-29 13:52:18,862 - INFO     -   - nodes_expanded: 10
2025-10-29 13:52:18,862 - INFO     -   - search_depth: 2
2025-10-29 13:52:18,862 - INFO     -   - solution_cost: 2
2025-10-29 13:52:18,862 - INFO     -   - branching_factor: 2.7000
2025-10-29 13:52:18,862 - INFO     -   - solution_found: True
2025-10-29 13:52:18,862 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:18,862 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:18,862 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:52:18,862 - INFO     -   - TS5(5) + TS4(2) → 10 states
2025-10-29 13:52:18,864 - INFO     -   - f_stability=0.714
2025-10-29 13:52:18,864 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:52:18,864 - INFO     -   - solution_found=True
2025-10-29 13:52:18,864 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:18,864 - INFO     - 
  Extracted signals:
2025-10-29 13:52:18,864 - INFO     -     - iteration: 1
2025-10-29 13:52:18,864 - INFO     -     - states_before: 10
2025-10-29 13:52:18,864 - INFO     -     - states_after: 10
2025-10-29 13:52:18,864 - INFO     -     - delta_states: 0
2025-10-29 13:52:18,864 - INFO     -     - f_value_stability: 0.7143
2025-10-29 13:52:18,864 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:52:18,864 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:18,864 - INFO     -     - nodes_expanded: 10
2025-10-29 13:52:18,864 - INFO     -     - search_depth: 2
2025-10-29 13:52:18,864 - INFO     -     - solution_cost: 2
2025-10-29 13:52:18,864 - INFO     -     - branching_factor: 2.7000
2025-10-29 13:52:18,864 - INFO     -     - solution_found: True
2025-10-29 13:52:18,864 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:18,864 - INFO     - 
  Computing reward:
2025-10-29 13:52:18,866 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:18,866 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:18,866 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:18,866 - INFO     -   [1] BRANCHING FACTOR: 2.700 → score 0.745 (good (in comfort zone))
2025-10-29 13:52:18,866 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:52:18,866 - INFO     -   [3] F-VALUE STABILITY: 0.459
2025-10-29 13:52:18,874 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:52:18,874 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:18,874 - INFO     - 
  [COMPOSITE]: 0.676
2025-10-29 13:52:18,874 - INFO     -     = 0.300*0.745 (bf)
2025-10-29 13:52:18,874 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:52:18,874 - INFO     -     + 0.350*0.459 (stability)
2025-10-29 13:52:18,874 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:18,874 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:18,874 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:18,874 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:52:18,874 - INFO     - 
  [FINAL REWARD]: 0.6523
2025-10-29 13:52:18,875 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:18,875 - INFO     -     ✓ Reward computed: 0.6523
2025-10-29 13:52:18,875 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:18,875 - INFO     -     - bf_score                       0.7450
2025-10-29 13:52:18,875 - INFO     -     - depth_score                    0.8603
2025-10-29 13:52:18,875 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:18,875 - INFO     -     - f_stability                    0.4588
2025-10-29 13:52:18,875 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:52:18,875 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:18,875 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:18,875 - INFO     -     - composite                      0.6762
2025-10-29 13:52:18,875 - INFO     -     - total                          0.6523
2025-10-29 13:52:18,875 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:18,875 - INFO     -   Num remaining nodes: 7
2025-10-29 13:52:18,875 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:52:18,875 - INFO     -   Done: False
2025-10-29 13:52:18,875 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:18,879 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:18,879 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:18,879 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:18,879 - INFO     -     - num_nodes: 7
2025-10-29 13:52:18,879 - INFO     -     - num_edges: 40
2025-10-29 13:52:18,879 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:18,879 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:52:18,880 - INFO     -   After: current_merge_step = 2
2025-10-29 13:52:18,880 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:18,880 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:18,880 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:18,881 - INFO     -   ✓ Step logged
2025-10-29 13:52:18,881 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:18,882 - INFO     -   Returning:
2025-10-29 13:52:18,882 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:18,882 - INFO     -     - reward: 0.6523
2025-10-29 13:52:18,882 - INFO     -     - done: False
2025-10-29 13:52:18,882 - INFO     -     - truncated: False
2025-10-29 13:52:18,882 - INFO     -     - info: 19 keys
2025-10-29 13:52:18,882 - INFO     - ==========================================================================================

2025-10-29 13:52:18,890 - INFO     - 
==========================================================================================
2025-10-29 13:52:18,890 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:18,890 - INFO     - ==========================================================================================
2025-10-29 13:52:18,890 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:18,890 - INFO     -   Input action: 20 (type: int)
2025-10-29 13:52:18,890 - INFO     -   Available edges in graph: 40
2025-10-29 13:52:18,890 - INFO     -   Action index calculation:
2025-10-29 13:52:18,890 - INFO     -     - action % max(num_valid_edges, 1) = 20 % 40 = 20
2025-10-29 13:52:18,890 - INFO     -     - clamped to [0, 39]: 20
2025-10-29 13:52:18,890 - INFO     -   ✓ Extracted merge pair from edge 20: (7, 2)
2025-10-29 13:52:18,890 - INFO     -   ✓ Validation passed
2025-10-29 13:52:18,890 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:18,890 - INFO     -     - Total states before merge: 36
2025-10-29 13:52:18,890 - INFO     -     - Num nodes: 7
2025-10-29 13:52:18,890 - INFO     -     - Num edges: 40
2025-10-29 13:52:18,890 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:18,893 - INFO     -       - Node 7: 5 states
2025-10-29 13:52:18,893 - INFO     -       - Node 2: 2 states
2025-10-29 13:52:18,893 - INFO     -       - Expected product: 10 states
2025-10-29 13:52:18,893 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:18,923 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:52:18,923 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:18,923 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:52:19,025 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:19,025 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:19,025 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:52:19,025 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:19,025 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:19,026 - INFO     -   Calling graph_tracker.merge_nodes([7, 2])...
2025-10-29 13:52:19,026 - INFO     - Attempting merge of nodes 7 and 2...
2025-10-29 13:52:19,026 - INFO     - Successfully merged nodes into new node 11 with 10 states.
2025-10-29 13:52:19,026 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:19,026 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:19,026 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:52:19,026 - INFO     - 
================================================================================
2025-10-29 13:52:19,026 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:52:19,026 - INFO     - ================================================================================
2025-10-29 13:52:19,026 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:19,026 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:52:19,026 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:52:19,026 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:19,026 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:19,026 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:19,026 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:19,026 - INFO     -   - Raw f_after length: 10
2025-10-29 13:52:19,026 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:19,026 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:19,028 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:19,028 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:52:19,028 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:19,028 - INFO     -   - ts1_id: 7
2025-10-29 13:52:19,028 - INFO     -   - ts2_id: 2
2025-10-29 13:52:19,028 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:19,028 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:19,028 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:52:19,028 - INFO     -   - Product space size: 10
2025-10-29 13:52:19,028 - INFO     -   - Using product state mapping
2025-10-29 13:52:19,028 - INFO     -   - f_before_product length: 10
2025-10-29 13:52:19,028 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:52:19,028 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:52:19,028 - INFO     -   - delta: 0.8000
2025-10-29 13:52:19,028 - INFO     -   - f_stability: 1.0 - |0.8000| / 2.8000 = 0.7143
2025-10-29 13:52:19,028 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:19,028 - INFO     -   - Compared 7 values
2025-10-29 13:52:19,028 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:52:19,028 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:19,028 - INFO     -   - states_before: 10
2025-10-29 13:52:19,028 - INFO     -   - states_after: 10
2025-10-29 13:52:19,028 - INFO     -   - delta_states: 0
2025-10-29 13:52:19,028 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:19,028 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:19,028 - INFO     -   - ts2_transitions: 5
2025-10-29 13:52:19,028 - INFO     -   - merged_transitions: 37
2025-10-29 13:52:19,028 - INFO     -   - transition_density_change: 1.9000
2025-10-29 13:52:19,028 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:19,037 - INFO     -   - search_signals present: True
2025-10-29 13:52:19,037 - INFO     -   - nodes_expanded: 10
2025-10-29 13:52:19,037 - INFO     -   - search_depth: 2
2025-10-29 13:52:19,037 - INFO     -   - solution_cost: 2
2025-10-29 13:52:19,037 - INFO     -   - branching_factor: 3.7000
2025-10-29 13:52:19,037 - INFO     -   - solution_found: True
2025-10-29 13:52:19,037 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:19,037 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:19,037 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:52:19,038 - INFO     -   - TS7(5) + TS2(2) → 10 states
2025-10-29 13:52:19,038 - INFO     -   - f_stability=0.714
2025-10-29 13:52:19,038 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:52:19,038 - INFO     -   - solution_found=True
2025-10-29 13:52:19,038 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:19,038 - INFO     - 
  Extracted signals:
2025-10-29 13:52:19,038 - INFO     -     - iteration: 2
2025-10-29 13:52:19,038 - INFO     -     - states_before: 10
2025-10-29 13:52:19,038 - INFO     -     - states_after: 10
2025-10-29 13:52:19,038 - INFO     -     - delta_states: 0
2025-10-29 13:52:19,038 - INFO     -     - f_value_stability: 0.7143
2025-10-29 13:52:19,038 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:52:19,038 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:19,038 - INFO     -     - nodes_expanded: 10
2025-10-29 13:52:19,038 - INFO     -     - search_depth: 2
2025-10-29 13:52:19,038 - INFO     -     - solution_cost: 2
2025-10-29 13:52:19,038 - INFO     -     - branching_factor: 3.7000
2025-10-29 13:52:19,038 - INFO     -     - solution_found: True
2025-10-29 13:52:19,038 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:19,038 - INFO     - 
  Computing reward:
2025-10-29 13:52:19,038 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:19,038 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:19,038 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:19,038 - INFO     -   [1] BRANCHING FACTOR: 3.700 → score 0.607 (tolerable)
2025-10-29 13:52:19,038 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:52:19,038 - INFO     -   [3] F-VALUE STABILITY: 0.459
2025-10-29 13:52:19,038 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:52:19,038 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:19,038 - INFO     - 
  [COMPOSITE]: 0.635
2025-10-29 13:52:19,038 - INFO     -     = 0.300*0.607 (bf)
2025-10-29 13:52:19,038 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:52:19,038 - INFO     -     + 0.350*0.459 (stability)
2025-10-29 13:52:19,038 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:19,038 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:19,038 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:19,038 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:52:19,038 - INFO     - 
  [FINAL REWARD]: 0.5693
2025-10-29 13:52:19,038 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:19,038 - INFO     -     ✓ Reward computed: 0.5693
2025-10-29 13:52:19,038 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:19,038 - INFO     -     - bf_score                       0.6067
2025-10-29 13:52:19,038 - INFO     -     - depth_score                    0.8603
2025-10-29 13:52:19,038 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:19,038 - INFO     -     - f_stability                    0.4588
2025-10-29 13:52:19,038 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:52:19,038 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:19,038 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:19,038 - INFO     -     - composite                      0.6347
2025-10-29 13:52:19,038 - INFO     -     - total                          0.5693
2025-10-29 13:52:19,045 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:19,045 - INFO     -   Num remaining nodes: 6
2025-10-29 13:52:19,045 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:52:19,045 - INFO     -   Done: False
2025-10-29 13:52:19,045 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:19,045 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:19,045 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:19,045 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:19,045 - INFO     -     - num_nodes: 6
2025-10-29 13:52:19,045 - INFO     -     - num_edges: 30
2025-10-29 13:52:19,045 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:19,045 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:52:19,045 - INFO     -   After: current_merge_step = 3
2025-10-29 13:52:19,045 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:19,045 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:19,045 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:19,049 - INFO     -   ✓ Step logged
2025-10-29 13:52:19,049 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:19,049 - INFO     -   Returning:
2025-10-29 13:52:19,049 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:19,049 - INFO     -     - reward: 0.5693
2025-10-29 13:52:19,049 - INFO     -     - done: False
2025-10-29 13:52:19,049 - INFO     -     - truncated: False
2025-10-29 13:52:19,049 - INFO     -     - info: 19 keys
2025-10-29 13:52:19,049 - INFO     - ==========================================================================================

2025-10-29 13:52:19,053 - INFO     - 
==========================================================================================
2025-10-29 13:52:19,053 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:19,053 - INFO     - ==========================================================================================
2025-10-29 13:52:19,055 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:19,055 - INFO     -   Input action: 9 (type: int)
2025-10-29 13:52:19,055 - INFO     -   Available edges in graph: 30
2025-10-29 13:52:19,055 - INFO     -   Action index calculation:
2025-10-29 13:52:19,055 - INFO     -     - action % max(num_valid_edges, 1) = 9 % 30 = 9
2025-10-29 13:52:19,055 - INFO     -     - clamped to [0, 29]: 9
2025-10-29 13:52:19,055 - INFO     -   ✓ Extracted merge pair from edge 9: (1, 11)
2025-10-29 13:52:19,055 - INFO     -   ✓ Validation passed
2025-10-29 13:52:19,055 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:19,055 - INFO     -     - Total states before merge: 39
2025-10-29 13:52:19,055 - INFO     -     - Num nodes: 6
2025-10-29 13:52:19,055 - INFO     -     - Num edges: 30
2025-10-29 13:52:19,055 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:19,055 - INFO     -       - Node 1: 2 states
2025-10-29 13:52:19,055 - INFO     -       - Node 11: 10 states
2025-10-29 13:52:19,055 - INFO     -       - Expected product: 20 states
2025-10-29 13:52:19,055 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:19,059 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:52:19,059 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:19,059 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:52:19,161 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:19,161 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:19,161 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:52:19,161 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:19,161 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:19,161 - INFO     -   Calling graph_tracker.merge_nodes([1, 11])...
2025-10-29 13:52:19,161 - INFO     - Attempting merge of nodes 1 and 11...
2025-10-29 13:52:19,161 - INFO     - Successfully merged nodes into new node 12 with 20 states.
2025-10-29 13:52:19,161 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:19,161 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:19,161 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:52:19,161 - INFO     - 
================================================================================
2025-10-29 13:52:19,161 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:52:19,161 - INFO     - ================================================================================
2025-10-29 13:52:19,163 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:19,163 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:52:19,163 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:52:19,163 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:19,163 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:19,163 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:19,163 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:52:19,163 - INFO     -   - Raw f_after length: 20
2025-10-29 13:52:19,163 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:19,163 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:19,163 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:52:19,163 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:52:19,163 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:19,163 - INFO     -   - ts1_id: 1
2025-10-29 13:52:19,163 - INFO     -   - ts2_id: 11
2025-10-29 13:52:19,163 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:19,163 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:19,163 - INFO     -   - ts1_size: 2, ts2_size: 10
2025-10-29 13:52:19,163 - INFO     -   - Product space size: 20
2025-10-29 13:52:19,163 - INFO     -   - Using product state mapping
2025-10-29 13:52:19,163 - INFO     -   - f_before_product length: 20
2025-10-29 13:52:19,163 - INFO     -   - avg_f_before: 3.6000 (20 valid states)
2025-10-29 13:52:19,165 - INFO     -   - avg_f_after:  4.0000 (20 valid states)
2025-10-29 13:52:19,165 - INFO     -   - delta: 0.4000
2025-10-29 13:52:19,165 - INFO     -   - f_stability: 1.0 - |0.4000| / 3.6000 = 0.8889
2025-10-29 13:52:19,165 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:19,165 - INFO     -   - Compared 12 values
2025-10-29 13:52:19,165 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:19,165 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:19,165 - INFO     -   - states_before: 20
2025-10-29 13:52:19,165 - INFO     -   - states_after: 20
2025-10-29 13:52:19,165 - INFO     -   - delta_states: 0
2025-10-29 13:52:19,165 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:19,165 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:19,165 - INFO     -   - ts2_transitions: 37
2025-10-29 13:52:19,165 - INFO     -   - merged_transitions: 122
2025-10-29 13:52:19,165 - INFO     -   - transition_density_change: 4.0000
2025-10-29 13:52:19,165 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:19,169 - INFO     -   - search_signals present: True
2025-10-29 13:52:19,169 - INFO     -   - nodes_expanded: 20
2025-10-29 13:52:19,169 - INFO     -   - search_depth: 2
2025-10-29 13:52:19,169 - INFO     -   - solution_cost: 2
2025-10-29 13:52:19,169 - INFO     -   - branching_factor: 6.1000
2025-10-29 13:52:19,169 - INFO     -   - solution_found: True
2025-10-29 13:52:19,169 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:19,169 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:19,170 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:52:19,170 - INFO     -   - TS1(2) + TS11(10) → 20 states
2025-10-29 13:52:19,170 - INFO     -   - f_stability=0.889
2025-10-29 13:52:19,170 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:52:19,170 - INFO     -   - solution_found=True
2025-10-29 13:52:19,170 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:19,170 - INFO     - 
  Extracted signals:
2025-10-29 13:52:19,170 - INFO     -     - iteration: 3
2025-10-29 13:52:19,170 - INFO     -     - states_before: 20
2025-10-29 13:52:19,170 - INFO     -     - states_after: 20
2025-10-29 13:52:19,170 - INFO     -     - delta_states: 0
2025-10-29 13:52:19,170 - INFO     -     - f_value_stability: 0.8889
2025-10-29 13:52:19,170 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:19,170 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:19,170 - INFO     -     - nodes_expanded: 20
2025-10-29 13:52:19,170 - INFO     -     - search_depth: 2
2025-10-29 13:52:19,170 - INFO     -     - solution_cost: 2
2025-10-29 13:52:19,170 - INFO     -     - branching_factor: 6.1000
2025-10-29 13:52:19,170 - INFO     -     - solution_found: True
2025-10-29 13:52:19,170 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:19,170 - INFO     - 
  Computing reward:
2025-10-29 13:52:19,170 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:19,170 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:19,170 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:19,170 - INFO     -   [1] BRANCHING FACTOR: 6.100 → score 0.290 (high BF, minimal credit)
2025-10-29 13:52:19,170 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:52:19,170 - INFO     -   [3] F-VALUE STABILITY: 0.715
2025-10-29 13:52:19,170 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:52:19,170 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:19,170 - INFO     - 
  [COMPOSITE]: 0.629
2025-10-29 13:52:19,170 - INFO     -     = 0.300*0.290 (bf)
2025-10-29 13:52:19,170 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:52:19,170 - INFO     -     + 0.350*0.715 (stability)
2025-10-29 13:52:19,170 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:19,170 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:19,170 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:19,170 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:52:19,170 - INFO     - 
  [FINAL REWARD]: 0.7583
2025-10-29 13:52:19,170 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:19,170 - INFO     -     ✓ Reward computed: 0.7583
2025-10-29 13:52:19,170 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:19,170 - INFO     -     - bf_score                       0.2900
2025-10-29 13:52:19,170 - INFO     -     - depth_score                    0.8603
2025-10-29 13:52:19,170 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:19,170 - INFO     -     - f_stability                    0.7145
2025-10-29 13:52:19,170 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:52:19,170 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:19,170 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:19,170 - INFO     -     - composite                      0.6291
2025-10-29 13:52:19,170 - INFO     -     - total                          0.7583
2025-10-29 13:52:19,170 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:19,183 - INFO     -   Num remaining nodes: 5
2025-10-29 13:52:19,183 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:52:19,183 - INFO     -   Done: False
2025-10-29 13:52:19,183 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:19,185 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:19,185 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:19,185 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:19,185 - INFO     -     - num_nodes: 5
2025-10-29 13:52:19,185 - INFO     -     - num_edges: 20
2025-10-29 13:52:19,185 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:19,185 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:52:19,185 - INFO     -   After: current_merge_step = 4
2025-10-29 13:52:19,185 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:19,185 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:19,185 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:19,185 - INFO     -   ✓ Step logged
2025-10-29 13:52:19,185 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:19,187 - INFO     -   Returning:
2025-10-29 13:52:19,187 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:19,187 - INFO     -     - reward: 0.7583
2025-10-29 13:52:19,187 - INFO     -     - done: False
2025-10-29 13:52:19,187 - INFO     -     - truncated: False
2025-10-29 13:52:19,187 - INFO     -     - info: 19 keys
2025-10-29 13:52:19,187 - INFO     - ==========================================================================================

2025-10-29 13:52:19,191 - INFO     - 
==========================================================================================
2025-10-29 13:52:19,191 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:19,191 - INFO     - ==========================================================================================
2025-10-29 13:52:19,191 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:19,191 - INFO     -   Input action: 15 (type: int)
2025-10-29 13:52:19,191 - INFO     -   Available edges in graph: 20
2025-10-29 13:52:19,193 - INFO     -   Action index calculation:
2025-10-29 13:52:19,193 - INFO     -     - action % max(num_valid_edges, 1) = 15 % 20 = 15
2025-10-29 13:52:19,193 - INFO     -     - clamped to [0, 19]: 15
2025-10-29 13:52:19,193 - INFO     -   ✓ Extracted merge pair from edge 15: (10, 12)
2025-10-29 13:52:19,193 - INFO     -   ✓ Validation passed
2025-10-29 13:52:19,193 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:19,193 - INFO     -     - Total states before merge: 47
2025-10-29 13:52:19,193 - INFO     -     - Num nodes: 5
2025-10-29 13:52:19,193 - INFO     -     - Num edges: 20
2025-10-29 13:52:19,193 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:19,194 - INFO     -       - Node 10: 10 states
2025-10-29 13:52:19,194 - INFO     -       - Node 12: 20 states
2025-10-29 13:52:19,194 - INFO     -       - Expected product: 200 states
2025-10-29 13:52:19,194 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:19,199 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:52:19,199 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:19,199 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:52:19,302 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:19,302 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:19,302 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:52:19,302 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:19,302 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:19,302 - INFO     -   Calling graph_tracker.merge_nodes([10, 12])...
2025-10-29 13:52:19,305 - INFO     - Attempting merge of nodes 10 and 12...
2025-10-29 13:52:19,305 - INFO     - Successfully merged nodes into new node 13 with 200 states.
2025-10-29 13:52:19,305 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:19,305 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:19,305 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:52:19,305 - INFO     - 
================================================================================
2025-10-29 13:52:19,305 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:52:19,305 - INFO     - ================================================================================
2025-10-29 13:52:19,305 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:19,305 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:52:19,305 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:52:19,305 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:19,305 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:19,305 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:52:19,305 - INFO     -   - Raw ts2_f length: 20
2025-10-29 13:52:19,305 - INFO     -   - Raw f_after length: 200
2025-10-29 13:52:19,305 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:19,305 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:52:19,305 - INFO     -   - ts2_valid: 20 / 20 (removed -20)
2025-10-29 13:52:19,305 - INFO     -   - after_valid: 200 / 200 (removed 0)
2025-10-29 13:52:19,305 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:19,305 - INFO     -   - ts1_id: 10
2025-10-29 13:52:19,305 - INFO     -   - ts2_id: 12
2025-10-29 13:52:19,305 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:19,305 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:19,305 - INFO     -   - ts1_size: 10, ts2_size: 20
2025-10-29 13:52:19,305 - INFO     -   - Product space size: 200
2025-10-29 13:52:19,305 - INFO     -   - Using product state mapping
2025-10-29 13:52:19,305 - INFO     -   - f_before_product length: 200
2025-10-29 13:52:19,305 - INFO     -   - avg_f_before: 4.6200 (200 valid states)
2025-10-29 13:52:19,305 - INFO     -   - avg_f_after:  7.9500 (200 valid states)
2025-10-29 13:52:19,305 - INFO     -   - delta: 3.3300
2025-10-29 13:52:19,305 - INFO     -   - f_stability: 1.0 - |3.3300| / 4.6200 = 0.2792
2025-10-29 13:52:19,305 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:19,305 - INFO     -   - Compared 30 values
2025-10-29 13:52:19,305 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:52:19,305 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:19,305 - INFO     -   - states_before: 200
2025-10-29 13:52:19,305 - INFO     -   - states_after: 200
2025-10-29 13:52:19,305 - INFO     -   - delta_states: 0
2025-10-29 13:52:19,305 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:19,305 - INFO     -   - ts1_transitions: 27
2025-10-29 13:52:19,305 - INFO     -   - ts2_transitions: 122
2025-10-29 13:52:19,305 - INFO     -   - merged_transitions: 1480
2025-10-29 13:52:19,305 - INFO     -   - transition_density_change: 6.6550
2025-10-29 13:52:19,305 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:19,313 - INFO     -   - search_signals present: True
2025-10-29 13:52:19,313 - INFO     -   - nodes_expanded: 200
2025-10-29 13:52:19,313 - INFO     -   - search_depth: 4
2025-10-29 13:52:19,313 - INFO     -   - solution_cost: 4
2025-10-29 13:52:19,313 - INFO     -   - branching_factor: 7.4000
2025-10-29 13:52:19,313 - INFO     -   - solution_found: True
2025-10-29 13:52:19,313 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:19,313 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:19,314 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:52:19,314 - INFO     -   - TS10(10) + TS12(20) → 200 states
2025-10-29 13:52:19,314 - INFO     -   - f_stability=0.279
2025-10-29 13:52:19,314 - INFO     -   - A* nodes_expanded=200
2025-10-29 13:52:19,314 - INFO     -   - solution_found=True
2025-10-29 13:52:19,314 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:19,314 - INFO     - 
  Extracted signals:
2025-10-29 13:52:19,314 - INFO     -     - iteration: 4
2025-10-29 13:52:19,314 - INFO     -     - states_before: 200
2025-10-29 13:52:19,314 - INFO     -     - states_after: 200
2025-10-29 13:52:19,314 - INFO     -     - delta_states: 0
2025-10-29 13:52:19,314 - INFO     -     - f_value_stability: 0.2792
2025-10-29 13:52:19,314 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:52:19,314 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:19,314 - INFO     -     - nodes_expanded: 200
2025-10-29 13:52:19,314 - INFO     -     - search_depth: 4
2025-10-29 13:52:19,314 - INFO     -     - solution_cost: 4
2025-10-29 13:52:19,314 - INFO     -     - branching_factor: 7.4000
2025-10-29 13:52:19,314 - INFO     -     - solution_found: True
2025-10-29 13:52:19,314 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:19,314 - WARNING  -     ⚠️  Poor F-stability: 0.2792
2025-10-29 13:52:19,314 - INFO     - 
  Computing reward:
2025-10-29 13:52:19,314 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:19,314 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:19,314 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:19,314 - INFO     -   [1] BRANCHING FACTOR: 7.400 → score 0.160 (high BF, minimal credit)
2025-10-29 13:52:19,314 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:52:19,314 - INFO     -   [3] F-VALUE STABILITY: 0.179
2025-10-29 13:52:19,314 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:19,314 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:19,314 - INFO     - 
  [COMPOSITE]: 0.390
2025-10-29 13:52:19,314 - INFO     -     = 0.300*0.160 (bf)
2025-10-29 13:52:19,314 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:52:19,314 - INFO     -     + 0.350*0.179 (stability)
2025-10-29 13:52:19,314 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:19,314 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:19,314 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:19,314 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:19,314 - INFO     - 
  [FINAL REWARD]: -0.0203
2025-10-29 13:52:19,314 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:19,314 - INFO     -     ✓ Reward computed: -0.0203
2025-10-29 13:52:19,314 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:19,314 - INFO     -     - bf_score                       0.1600
2025-10-29 13:52:19,314 - INFO     -     - depth_score                    0.7953
2025-10-29 13:52:19,314 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:19,314 - INFO     -     - f_stability                    0.1794
2025-10-29 13:52:19,314 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:19,314 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:19,314 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:19,314 - INFO     -     - composite                      0.3899
2025-10-29 13:52:19,329 - INFO     -     - total                          -0.0203
2025-10-29 13:52:19,329 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:19,329 - INFO     -   Num remaining nodes: 4
2025-10-29 13:52:19,329 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:52:19,329 - INFO     -   Done: False
2025-10-29 13:52:19,329 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:19,329 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:19,331 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:19,331 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:19,331 - INFO     -     - num_nodes: 4
2025-10-29 13:52:19,331 - INFO     -     - num_edges: 12
2025-10-29 13:52:19,331 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:19,331 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:52:19,331 - INFO     -   After: current_merge_step = 5
2025-10-29 13:52:19,331 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:19,331 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:19,331 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:19,331 - INFO     -   ✓ Step logged
2025-10-29 13:52:19,331 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:19,331 - INFO     -   Returning:
2025-10-29 13:52:19,331 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:19,331 - INFO     -     - reward: -0.0203
2025-10-29 13:52:19,331 - INFO     -     - done: False
2025-10-29 13:52:19,331 - INFO     -     - truncated: False
2025-10-29 13:52:19,331 - INFO     -     - info: 19 keys
2025-10-29 13:52:19,331 - INFO     - ==========================================================================================

2025-10-29 13:52:19,337 - INFO     - 
==========================================================================================
2025-10-29 13:52:19,337 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:19,337 - INFO     - ==========================================================================================
2025-10-29 13:52:19,337 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:19,337 - INFO     -   Input action: 9 (type: int)
2025-10-29 13:52:19,337 - INFO     -   Available edges in graph: 12
2025-10-29 13:52:19,337 - INFO     -   Action index calculation:
2025-10-29 13:52:19,337 - INFO     -     - action % max(num_valid_edges, 1) = 9 % 12 = 9
2025-10-29 13:52:19,337 - INFO     -     - clamped to [0, 11]: 9
2025-10-29 13:52:19,337 - INFO     -   ✓ Extracted merge pair from edge 9: (13, 0)
2025-10-29 13:52:19,338 - INFO     -   ✓ Validation passed
2025-10-29 13:52:19,338 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:19,338 - INFO     -     - Total states before merge: 217
2025-10-29 13:52:19,338 - INFO     -     - Num nodes: 4
2025-10-29 13:52:19,338 - INFO     -     - Num edges: 12
2025-10-29 13:52:19,338 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:19,338 - INFO     -       - Node 13: 200 states
2025-10-29 13:52:19,338 - INFO     -       - Node 0: 2 states
2025-10-29 13:52:19,338 - INFO     -       - Expected product: 400 states
2025-10-29 13:52:19,338 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:19,345 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:52:19,345 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:19,345 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:52:19,446 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:19,446 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:19,446 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:52:19,448 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:19,448 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:19,448 - INFO     -   Calling graph_tracker.merge_nodes([13, 0])...
2025-10-29 13:52:19,448 - INFO     - Attempting merge of nodes 13 and 0...
2025-10-29 13:52:19,450 - INFO     - Successfully merged nodes into new node 14 with 400 states.
2025-10-29 13:52:19,450 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:19,450 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:19,450 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:52:19,450 - INFO     - 
================================================================================
2025-10-29 13:52:19,450 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:52:19,450 - INFO     - ================================================================================
2025-10-29 13:52:19,450 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:19,450 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:52:19,450 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:52:19,450 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:19,450 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:19,450 - INFO     -   - Raw ts1_f length: 200
2025-10-29 13:52:19,450 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:19,450 - INFO     -   - Raw f_after length: 400
2025-10-29 13:52:19,452 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:19,452 - INFO     -   - ts1_valid: 200 / 200 (removed 0)
2025-10-29 13:52:19,452 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:19,452 - INFO     -   - after_valid: 400 / 400 (removed 0)
2025-10-29 13:52:19,452 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:19,452 - INFO     -   - ts1_id: 13
2025-10-29 13:52:19,452 - INFO     -   - ts2_id: 0
2025-10-29 13:52:19,452 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:19,452 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:19,452 - INFO     -   - ts1_size: 200, ts2_size: 2
2025-10-29 13:52:19,452 - INFO     -   - Product space size: 400
2025-10-29 13:52:19,452 - INFO     -   - Using product state mapping
2025-10-29 13:52:19,452 - INFO     -   - f_before_product length: 400
2025-10-29 13:52:19,454 - INFO     -   - avg_f_before: 7.9500 (400 valid states)
2025-10-29 13:52:19,454 - INFO     -   - avg_f_after:  8.9225 (400 valid states)
2025-10-29 13:52:19,454 - INFO     -   - delta: 0.9725
2025-10-29 13:52:19,454 - INFO     -   - f_stability: 1.0 - |0.9725| / 7.9500 = 0.8777
2025-10-29 13:52:19,454 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:19,454 - INFO     -   - Compared 202 values
2025-10-29 13:52:19,454 - INFO     -   - Significant changes (> 5.0): 22
2025-10-29 13:52:19,454 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:19,454 - INFO     -   - states_before: 400
2025-10-29 13:52:19,454 - INFO     -   - states_after: 400
2025-10-29 13:52:19,454 - INFO     -   - delta_states: 0
2025-10-29 13:52:19,454 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:19,454 - INFO     -   - ts1_transitions: 1480
2025-10-29 13:52:19,454 - INFO     -   - ts2_transitions: 5
2025-10-29 13:52:19,454 - INFO     -   - merged_transitions: 3540
2025-10-29 13:52:19,454 - INFO     -   - transition_density_change: 5.1375
2025-10-29 13:52:19,454 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:19,458 - INFO     -   - search_signals present: True
2025-10-29 13:52:19,458 - INFO     -   - nodes_expanded: 400
2025-10-29 13:52:19,458 - INFO     -   - search_depth: 4
2025-10-29 13:52:19,458 - INFO     -   - solution_cost: 4
2025-10-29 13:52:19,458 - INFO     -   - branching_factor: 8.8500
2025-10-29 13:52:19,458 - INFO     -   - solution_found: True
2025-10-29 13:52:19,458 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:19,459 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:19,459 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:52:19,459 - INFO     -   - TS13(200) + TS0(2) → 400 states
2025-10-29 13:52:19,459 - INFO     -   - f_stability=0.878
2025-10-29 13:52:19,459 - INFO     -   - A* nodes_expanded=400
2025-10-29 13:52:19,459 - INFO     -   - solution_found=True
2025-10-29 13:52:19,459 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:19,459 - INFO     - 
  Extracted signals:
2025-10-29 13:52:19,459 - INFO     -     - iteration: 5
2025-10-29 13:52:19,459 - INFO     -     - states_before: 400
2025-10-29 13:52:19,459 - INFO     -     - states_after: 400
2025-10-29 13:52:19,459 - INFO     -     - delta_states: 0
2025-10-29 13:52:19,459 - INFO     -     - f_value_stability: 0.8777
2025-10-29 13:52:19,459 - INFO     -     - num_significant_f_changes: 22
2025-10-29 13:52:19,459 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:19,459 - INFO     -     - nodes_expanded: 400
2025-10-29 13:52:19,459 - INFO     -     - search_depth: 4
2025-10-29 13:52:19,459 - INFO     -     - solution_cost: 4
2025-10-29 13:52:19,459 - INFO     -     - branching_factor: 8.8500
2025-10-29 13:52:19,459 - INFO     -     - solution_found: True
2025-10-29 13:52:19,459 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:19,459 - WARNING  -     ⚠️  High branching factor: 8.8500
2025-10-29 13:52:19,459 - INFO     - 
  Computing reward:
2025-10-29 13:52:19,459 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:19,459 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:19,459 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:19,459 - INFO     -   [1] BRANCHING FACTOR: 8.850 → score 0.100 (high BF, minimal credit)
2025-10-29 13:52:19,459 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:52:19,459 - INFO     -   [3] F-VALUE STABILITY: 0.879
2025-10-29 13:52:19,459 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:52:19,459 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:19,459 - INFO     - 
  [COMPOSITE]: 0.617
2025-10-29 13:52:19,459 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:52:19,459 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:52:19,459 - INFO     -     + 0.350*0.879 (stability)
2025-10-29 13:52:19,459 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:19,459 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:19,459 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:19,459 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:52:19,459 - INFO     - 
  [FINAL REWARD]: 0.7337
2025-10-29 13:52:19,459 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:19,459 - INFO     -     ✓ Reward computed: 0.7337
2025-10-29 13:52:19,459 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:19,459 - INFO     -     - bf_score                       0.1000
2025-10-29 13:52:19,459 - INFO     -     - depth_score                    0.7953
2025-10-29 13:52:19,459 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:19,459 - INFO     -     - f_stability                    0.8793
2025-10-29 13:52:19,459 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:52:19,459 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:19,459 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:19,459 - INFO     -     - composite                      0.6168
2025-10-29 13:52:19,469 - INFO     -     - total                          0.7337
2025-10-29 13:52:19,469 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:19,469 - INFO     -   Num remaining nodes: 3
2025-10-29 13:52:19,469 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:52:19,469 - INFO     -   Done: False
2025-10-29 13:52:19,469 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:19,470 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:19,470 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:19,470 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:19,470 - INFO     -     - num_nodes: 3
2025-10-29 13:52:19,470 - INFO     -     - num_edges: 6
2025-10-29 13:52:19,470 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:19,470 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:52:19,470 - INFO     -   After: current_merge_step = 6
2025-10-29 13:52:19,470 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:19,470 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:19,470 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:19,470 - INFO     -   ✓ Step logged
2025-10-29 13:52:19,470 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:19,472 - INFO     -   Returning:
2025-10-29 13:52:19,472 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:19,472 - INFO     -     - reward: 0.7337
2025-10-29 13:52:19,472 - INFO     -     - done: False
2025-10-29 13:52:19,472 - INFO     -     - truncated: False
2025-10-29 13:52:19,472 - INFO     -     - info: 19 keys
2025-10-29 13:52:19,472 - INFO     - ==========================================================================================

2025-10-29 13:52:19,476 - INFO     - 
==========================================================================================
2025-10-29 13:52:19,476 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:19,476 - INFO     - ==========================================================================================
2025-10-29 13:52:19,476 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:19,476 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:52:19,476 - INFO     -   Available edges in graph: 6
2025-10-29 13:52:19,476 - INFO     -   Action index calculation:
2025-10-29 13:52:19,476 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 6 = 2
2025-10-29 13:52:19,476 - INFO     -     - clamped to [0, 5]: 2
2025-10-29 13:52:19,476 - INFO     -   ✓ Extracted merge pair from edge 2: (9, 8)
2025-10-29 13:52:19,476 - INFO     -   ✓ Validation passed
2025-10-29 13:52:19,476 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:19,476 - INFO     -     - Total states before merge: 415
2025-10-29 13:52:19,476 - INFO     -     - Num nodes: 3
2025-10-29 13:52:19,476 - INFO     -     - Num edges: 6
2025-10-29 13:52:19,476 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:19,476 - INFO     -       - Node 9: 10 states
2025-10-29 13:52:19,476 - INFO     -       - Node 8: 5 states
2025-10-29 13:52:19,476 - INFO     -       - Expected product: 50 states
2025-10-29 13:52:19,476 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:19,482 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:52:19,482 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:19,482 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:52:19,584 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:19,584 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:19,584 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:52:19,584 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:19,584 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:19,584 - INFO     -   Calling graph_tracker.merge_nodes([9, 8])...
2025-10-29 13:52:19,584 - INFO     - Attempting merge of nodes 9 and 8...
2025-10-29 13:52:19,584 - INFO     - Successfully merged nodes into new node 15 with 50 states.
2025-10-29 13:52:19,584 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:19,584 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:19,584 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:52:19,584 - INFO     - 
================================================================================
2025-10-29 13:52:19,585 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:52:19,585 - INFO     - ================================================================================
2025-10-29 13:52:19,585 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:19,585 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:52:19,585 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:52:19,585 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:19,585 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:19,585 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:52:19,585 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:19,585 - INFO     -   - Raw f_after length: 50
2025-10-29 13:52:19,585 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:19,585 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:52:19,585 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:19,585 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:52:19,585 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:19,585 - INFO     -   - ts1_id: 9
2025-10-29 13:52:19,585 - INFO     -   - ts2_id: 8
2025-10-29 13:52:19,585 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:19,585 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:19,585 - INFO     -   - ts1_size: 10, ts2_size: 5
2025-10-29 13:52:19,585 - INFO     -   - Product space size: 50
2025-10-29 13:52:19,585 - INFO     -   - Using product state mapping
2025-10-29 13:52:19,585 - INFO     -   - f_before_product length: 50
2025-10-29 13:52:19,585 - INFO     -   - avg_f_before: 3.9600 (50 valid states)
2025-10-29 13:52:19,585 - INFO     -   - avg_f_after:  6.3800 (50 valid states)
2025-10-29 13:52:19,585 - INFO     -   - delta: 2.4200
2025-10-29 13:52:19,585 - INFO     -   - f_stability: 1.0 - |2.4200| / 3.9600 = 0.3889
2025-10-29 13:52:19,585 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:19,585 - INFO     -   - Compared 15 values
2025-10-29 13:52:19,585 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:19,585 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:19,585 - INFO     -   - states_before: 50
2025-10-29 13:52:19,588 - INFO     -   - states_after: 50
2025-10-29 13:52:19,588 - INFO     -   - delta_states: 0
2025-10-29 13:52:19,588 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:19,588 - INFO     -   - ts1_transitions: 40
2025-10-29 13:52:19,588 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:19,588 - INFO     -   - merged_transitions: 260
2025-10-29 13:52:19,588 - INFO     -   - transition_density_change: 4.1400
2025-10-29 13:52:19,589 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:19,589 - INFO     -   - search_signals present: True
2025-10-29 13:52:19,589 - INFO     -   - nodes_expanded: 50
2025-10-29 13:52:19,589 - INFO     -   - search_depth: 3
2025-10-29 13:52:19,589 - INFO     -   - solution_cost: 0
2025-10-29 13:52:19,589 - INFO     -   - branching_factor: 5.2000
2025-10-29 13:52:19,589 - INFO     -   - solution_found: True
2025-10-29 13:52:19,589 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:19,589 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:19,589 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:52:19,589 - INFO     -   - TS9(10) + TS8(5) → 50 states
2025-10-29 13:52:19,589 - INFO     -   - f_stability=0.389
2025-10-29 13:52:19,589 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:52:19,589 - INFO     -   - solution_found=True
2025-10-29 13:52:19,589 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:19,589 - INFO     - 
  Extracted signals:
2025-10-29 13:52:19,589 - INFO     -     - iteration: 6
2025-10-29 13:52:19,589 - INFO     -     - states_before: 50
2025-10-29 13:52:19,596 - INFO     -     - states_after: 50
2025-10-29 13:52:19,596 - INFO     -     - delta_states: 0
2025-10-29 13:52:19,596 - INFO     -     - f_value_stability: 0.3889
2025-10-29 13:52:19,596 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:19,596 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:19,596 - INFO     -     - nodes_expanded: 50
2025-10-29 13:52:19,596 - INFO     -     - search_depth: 3
2025-10-29 13:52:19,596 - INFO     -     - solution_cost: 0
2025-10-29 13:52:19,596 - INFO     -     - branching_factor: 5.2000
2025-10-29 13:52:19,596 - INFO     -     - solution_found: True
2025-10-29 13:52:19,596 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:19,596 - INFO     - 
  Computing reward:
2025-10-29 13:52:19,596 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:19,596 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:19,596 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:19,596 - INFO     -   [1] BRANCHING FACTOR: 5.200 → score 0.407 (tolerable)
2025-10-29 13:52:19,596 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:52:19,596 - INFO     -   [3] F-VALUE STABILITY: 0.412
2025-10-29 13:52:19,596 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:52:19,598 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:19,598 - INFO     - 
  [COMPOSITE]: 0.551
2025-10-29 13:52:19,598 - INFO     -     = 0.300*0.407 (bf)
2025-10-29 13:52:19,598 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:52:19,598 - INFO     -     + 0.350*0.412 (stability)
2025-10-29 13:52:19,598 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:19,598 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:19,598 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:19,598 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:52:19,598 - INFO     - 
  [FINAL REWARD]: 0.4018
2025-10-29 13:52:19,598 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:19,598 - INFO     -     ✓ Reward computed: 0.4018
2025-10-29 13:52:19,598 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:19,598 - INFO     -     - bf_score                       0.4067
2025-10-29 13:52:19,598 - INFO     -     - depth_score                    0.8237
2025-10-29 13:52:19,598 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:19,598 - INFO     -     - f_stability                    0.4119
2025-10-29 13:52:19,598 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:52:19,598 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:19,598 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:19,598 - INFO     -     - composite                      0.5509
2025-10-29 13:52:19,598 - INFO     -     - total                          0.4018
2025-10-29 13:52:19,598 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:19,598 - INFO     -   Num remaining nodes: 2
2025-10-29 13:52:19,598 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:52:19,598 - INFO     -   Done: False
2025-10-29 13:52:19,598 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:19,600 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:19,600 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:19,600 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:19,600 - INFO     -     - num_nodes: 2
2025-10-29 13:52:19,600 - INFO     -     - num_edges: 2
2025-10-29 13:52:19,600 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:19,600 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:52:19,601 - INFO     -   After: current_merge_step = 7
2025-10-29 13:52:19,601 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:19,601 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:19,601 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:19,609 - INFO     -   ✓ Step logged
2025-10-29 13:52:19,609 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:19,609 - INFO     -   Returning:
2025-10-29 13:52:19,609 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:19,609 - INFO     -     - reward: 0.4018
2025-10-29 13:52:19,609 - INFO     -     - done: False
2025-10-29 13:52:19,609 - INFO     -     - truncated: False
2025-10-29 13:52:19,609 - INFO     -     - info: 19 keys
2025-10-29 13:52:19,609 - INFO     - ==========================================================================================

2025-10-29 13:52:19,616 - INFO     - 
==========================================================================================
2025-10-29 13:52:19,616 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:19,616 - INFO     - ==========================================================================================
2025-10-29 13:52:19,616 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:19,616 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:52:19,616 - INFO     -   Available edges in graph: 2
2025-10-29 13:52:19,616 - INFO     -   Action index calculation:
2025-10-29 13:52:19,616 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 2 = 1
2025-10-29 13:52:19,616 - INFO     -     - clamped to [0, 1]: 1
2025-10-29 13:52:19,616 - INFO     -   ✓ Extracted merge pair from edge 1: (15, 14)
2025-10-29 13:52:19,616 - INFO     -   ✓ Validation passed
2025-10-29 13:52:19,616 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:19,616 - INFO     -     - Total states before merge: 450
2025-10-29 13:52:19,616 - INFO     -     - Num nodes: 2
2025-10-29 13:52:19,616 - INFO     -     - Num edges: 2
2025-10-29 13:52:19,616 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:19,616 - INFO     -       - Node 15: 50 states
2025-10-29 13:52:19,616 - INFO     -       - Node 14: 400 states
2025-10-29 13:52:19,616 - INFO     -       - Expected product: 20000 states
2025-10-29 13:52:19,616 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:19,619 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:52:19,619 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:19,619 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:52:19,724 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:19,724 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:19,724 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:52:19,963 - INFO     -   ✓ TS file received after 0.24s
2025-10-29 13:52:19,963 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:19,963 - INFO     -   Calling graph_tracker.merge_nodes([15, 14])...
2025-10-29 13:52:19,963 - INFO     - Attempting merge of nodes 15 and 14...
2025-10-29 13:52:19,963 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:52:19,963 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:19,963 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:19,963 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:52:19,963 - INFO     - 
================================================================================
2025-10-29 13:52:19,963 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:52:19,963 - INFO     - ================================================================================
2025-10-29 13:52:19,963 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:19,963 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:52:19,963 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:52:19,973 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:19,973 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:19,973 - INFO     -   - Raw ts1_f length: 50
2025-10-29 13:52:19,973 - INFO     -   - Raw ts2_f length: 71
2025-10-29 13:52:19,973 - INFO     -   - Raw f_after length: 3550
2025-10-29 13:52:19,973 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:19,973 - INFO     -   - ts1_valid: 50 / 50 (removed 0)
2025-10-29 13:52:19,973 - INFO     -   - ts2_valid: 71 / 71 (removed -71)
2025-10-29 13:52:19,978 - INFO     -   - after_valid: 2131 / 3550 (removed 1419)
2025-10-29 13:52:19,978 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:19,978 - INFO     -   - ts1_id: 15
2025-10-29 13:52:19,978 - INFO     -   - ts2_id: 14
2025-10-29 13:52:19,978 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:19,978 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:19,978 - INFO     -   - ts1_size: 50, ts2_size: 71
2025-10-29 13:52:19,978 - INFO     -   - Product space size: 3550
2025-10-29 13:52:19,978 - INFO     -   - Using product state mapping
2025-10-29 13:52:19,986 - INFO     -   - f_before_product length: 3550
2025-10-29 13:52:19,998 - INFO     -   - avg_f_before: 6.9408 (3550 valid states)
2025-10-29 13:52:19,998 - INFO     -   - avg_f_after:  10.9409 (2131 valid states)
2025-10-29 13:52:19,998 - INFO     -   - delta: 4.0000
2025-10-29 13:52:19,998 - INFO     -   - f_stability: 1.0 - |4.0000| / 6.9408 = 0.4237
2025-10-29 13:52:19,998 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:19,998 - INFO     -   - Compared 121 values
2025-10-29 13:52:19,998 - INFO     -   - Significant changes (> 5.0): 57
2025-10-29 13:52:19,998 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:19,998 - INFO     -   - states_before: 3550
2025-10-29 13:52:19,998 - INFO     -   - states_after: 3550
2025-10-29 13:52:19,998 - INFO     -   - delta_states: 0
2025-10-29 13:52:19,998 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:19,998 - INFO     -   - ts1_transitions: 260
2025-10-29 13:52:19,998 - INFO     -   - ts2_transitions: 866
2025-10-29 13:52:19,998 - INFO     -   - merged_transitions: 14670
2025-10-29 13:52:19,998 - INFO     -   - transition_density_change: 3.8152
2025-10-29 13:52:19,998 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:19,998 - INFO     -   - search_signals present: True
2025-10-29 13:52:19,998 - INFO     -   - nodes_expanded: 2131
2025-10-29 13:52:19,998 - INFO     -   - search_depth: 5
2025-10-29 13:52:19,998 - INFO     -   - solution_cost: 4
2025-10-29 13:52:19,998 - INFO     -   - branching_factor: 6.8841
2025-10-29 13:52:19,998 - INFO     -   - solution_found: True
2025-10-29 13:52:19,998 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:19,998 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:19,998 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:52:19,998 - INFO     -   - TS15(50) + TS14(71) → 3550 states
2025-10-29 13:52:19,998 - INFO     -   - f_stability=0.424
2025-10-29 13:52:19,998 - INFO     -   - A* nodes_expanded=2131
2025-10-29 13:52:19,998 - INFO     -   - solution_found=True
2025-10-29 13:52:20,002 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:20,002 - INFO     - 
  Extracted signals:
2025-10-29 13:52:20,002 - INFO     -     - iteration: 7
2025-10-29 13:52:20,002 - INFO     -     - states_before: 3550
2025-10-29 13:52:20,002 - INFO     -     - states_after: 3550
2025-10-29 13:52:20,002 - INFO     -     - delta_states: 0
2025-10-29 13:52:20,002 - INFO     -     - f_value_stability: 0.4237
2025-10-29 13:52:20,002 - INFO     -     - num_significant_f_changes: 57
2025-10-29 13:52:20,002 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:20,002 - INFO     -     - nodes_expanded: 2131
2025-10-29 13:52:20,002 - INFO     -     - search_depth: 5
2025-10-29 13:52:20,002 - INFO     -     - solution_cost: 4
2025-10-29 13:52:20,002 - INFO     -     - branching_factor: 6.8841
2025-10-29 13:52:20,002 - INFO     -     - solution_found: True
2025-10-29 13:52:20,002 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:20,002 - INFO     - 
  Computing reward:
2025-10-29 13:52:20,002 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:20,002 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:20,002 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:20,002 - INFO     -   [1] BRANCHING FACTOR: 6.884 → score 0.212 (high BF, minimal credit)
2025-10-29 13:52:20,002 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:52:20,002 - INFO     -   [3] F-VALUE STABILITY: 0.230
2025-10-29 13:52:20,002 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:20,002 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:20,002 - INFO     - 
  [COMPOSITE]: 0.418
2025-10-29 13:52:20,002 - INFO     -     = 0.300*0.212 (bf)
2025-10-29 13:52:20,002 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:52:20,002 - INFO     -     + 0.350*0.230 (stability)
2025-10-29 13:52:20,011 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:20,011 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:20,011 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:20,011 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:20,011 - INFO     - 
  [FINAL REWARD]: 0.0365
2025-10-29 13:52:20,011 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:20,011 - INFO     -     ✓ Reward computed: 0.0365
2025-10-29 13:52:20,011 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:20,011 - INFO     -     - bf_score                       0.2116
2025-10-29 13:52:20,011 - INFO     -     - depth_score                    0.7721
2025-10-29 13:52:20,011 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:20,011 - INFO     -     - f_stability                    0.2296
2025-10-29 13:52:20,011 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:20,011 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:20,011 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:20,011 - INFO     -     - composite                      0.4183
2025-10-29 13:52:20,011 - INFO     -     - total                          0.0365
2025-10-29 13:52:20,011 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:20,011 - INFO     -   Num remaining nodes: 1
2025-10-29 13:52:20,011 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:52:20,011 - INFO     -   Done: True
2025-10-29 13:52:20,011 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:52:20,011 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:20,011 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:20,011 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:20,011 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:20,011 - INFO     -     - num_nodes: 1
2025-10-29 13:52:20,011 - INFO     -     - num_edges: 0
2025-10-29 13:52:20,011 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:20,011 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:52:20,011 - INFO     -   After: current_merge_step = 8
2025-10-29 13:52:20,011 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:20,011 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:20,011 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:20,011 - INFO     -   ✓ Step logged
2025-10-29 13:52:20,011 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:20,011 - INFO     -   Returning:
2025-10-29 13:52:20,011 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:20,011 - INFO     -     - reward: 0.0365
2025-10-29 13:52:20,011 - INFO     -     - done: True
2025-10-29 13:52:20,011 - INFO     -     - truncated: False
2025-10-29 13:52:20,011 - INFO     -     - info: 19 keys
2025-10-29 13:52:20,011 - INFO     - ==========================================================================================

2025-10-29 13:52:20,101 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:52:20,106 - INFO     - [Handshake] Building FD command:
2025-10-29 13:52:20,109 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:52:20,109 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_02.pddl
2025-10-29 13:52:20,109 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:52:20,109 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:52:20,716 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:52:20,716 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:52:20,716 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:52:21,025 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:52:21,028 - INFO     - Initializing GraphTracker...
2025-10-29 13:52:21,028 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:52:21,029 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:52:21,029 - INFO     -    → Node 0 has 2 states
2025-10-29 13:52:21,029 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:52:21,029 - INFO     -    → Node 1 has 2 states
2025-10-29 13:52:21,029 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:52:21,029 - INFO     -    → Node 2 has 2 states
2025-10-29 13:52:21,029 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:52:21,029 - INFO     -    → Node 3 has 2 states
2025-10-29 13:52:21,029 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:52:21,029 - INFO     -    → Node 4 has 2 states
2025-10-29 13:52:21,029 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:52:21,029 - INFO     -    → Node 5 has 5 states
2025-10-29 13:52:21,029 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:52:21,029 - INFO     -    → Node 6 has 5 states
2025-10-29 13:52:21,029 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:52:21,029 - INFO     -    → Node 7 has 5 states
2025-10-29 13:52:21,029 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:52:21,029 - INFO     -    → Node 8 has 5 states
2025-10-29 13:52:21,029 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:52:21,029 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:52:21,029 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:52:21,029 - INFO     - Added edge (0, 1)
2025-10-29 13:52:21,029 - INFO     - Added edge (0, 2)
2025-10-29 13:52:21,029 - INFO     - Added edge (0, 3)
2025-10-29 13:52:21,029 - INFO     - Added edge (0, 4)
2025-10-29 13:52:21,029 - INFO     - Added edge (0, 5)
2025-10-29 13:52:21,029 - INFO     - Added edge (0, 6)
2025-10-29 13:52:21,029 - INFO     - Added edge (0, 7)
2025-10-29 13:52:21,029 - INFO     - Added edge (0, 8)
2025-10-29 13:52:21,029 - INFO     - Added edge (1, 0)
2025-10-29 13:52:21,029 - INFO     - Added edge (1, 2)
2025-10-29 13:52:21,029 - INFO     - Added edge (1, 3)
2025-10-29 13:52:21,029 - INFO     - Added edge (1, 4)
2025-10-29 13:52:21,029 - INFO     - Added edge (1, 5)
2025-10-29 13:52:21,029 - INFO     - Added edge (1, 6)
2025-10-29 13:52:21,029 - INFO     - Added edge (1, 7)
2025-10-29 13:52:21,029 - INFO     - Added edge (1, 8)
2025-10-29 13:52:21,029 - INFO     - Added edge (2, 0)
2025-10-29 13:52:21,029 - INFO     - Added edge (2, 1)
2025-10-29 13:52:21,029 - INFO     - Added edge (2, 3)
2025-10-29 13:52:21,029 - INFO     - Added edge (2, 4)
2025-10-29 13:52:21,029 - INFO     - Added edge (2, 5)
2025-10-29 13:52:21,029 - INFO     - Added edge (2, 6)
2025-10-29 13:52:21,029 - INFO     - Added edge (2, 7)
2025-10-29 13:52:21,029 - INFO     - Added edge (2, 8)
2025-10-29 13:52:21,029 - INFO     - Added edge (3, 0)
2025-10-29 13:52:21,029 - INFO     - Added edge (3, 1)
2025-10-29 13:52:21,029 - INFO     - Added edge (3, 2)
2025-10-29 13:52:21,029 - INFO     - Added edge (3, 4)
2025-10-29 13:52:21,029 - INFO     - Added edge (3, 5)
2025-10-29 13:52:21,029 - INFO     - Added edge (3, 6)
2025-10-29 13:52:21,029 - INFO     - Added edge (3, 7)
2025-10-29 13:52:21,033 - INFO     - Added edge (3, 8)
2025-10-29 13:52:21,033 - INFO     - Added edge (4, 0)
2025-10-29 13:52:21,033 - INFO     - Added edge (4, 1)
2025-10-29 13:52:21,033 - INFO     - Added edge (4, 2)
2025-10-29 13:52:21,033 - INFO     - Added edge (4, 3)
2025-10-29 13:52:21,033 - INFO     - Added edge (4, 5)
2025-10-29 13:52:21,033 - INFO     - Added edge (4, 6)
2025-10-29 13:52:21,041 - INFO     - Added edge (4, 7)
2025-10-29 13:52:21,041 - INFO     - Added edge (4, 8)
2025-10-29 13:52:21,041 - INFO     - Added edge (5, 0)
2025-10-29 13:52:21,041 - INFO     - Added edge (5, 1)
2025-10-29 13:52:21,041 - INFO     - Added edge (5, 2)
2025-10-29 13:52:21,041 - INFO     - Added edge (5, 3)
2025-10-29 13:52:21,041 - INFO     - Added edge (5, 4)
2025-10-29 13:52:21,041 - INFO     - Added edge (6, 0)
2025-10-29 13:52:21,041 - INFO     - Added edge (6, 1)
2025-10-29 13:52:21,041 - INFO     - Added edge (6, 2)
2025-10-29 13:52:21,041 - INFO     - Added edge (6, 3)
2025-10-29 13:52:21,042 - INFO     - Added edge (6, 4)
2025-10-29 13:52:21,042 - INFO     - Added edge (7, 0)
2025-10-29 13:52:21,042 - INFO     - Added edge (7, 1)
2025-10-29 13:52:21,042 - INFO     - Added edge (7, 2)
2025-10-29 13:52:21,042 - INFO     - Added edge (7, 3)
2025-10-29 13:52:21,042 - INFO     - Added edge (7, 4)
2025-10-29 13:52:21,042 - INFO     - Added edge (8, 0)
2025-10-29 13:52:21,042 - INFO     - Added edge (8, 1)
2025-10-29 13:52:21,042 - INFO     - Added edge (8, 2)
2025-10-29 13:52:21,042 - INFO     - Added edge (8, 3)
2025-10-29 13:52:21,042 - INFO     - Added edge (8, 4)
2025-10-29 13:52:21,042 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:52:21,049 - INFO     - 
==========================================================================================
2025-10-29 13:52:21,049 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:21,049 - INFO     - ==========================================================================================
2025-10-29 13:52:21,049 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:21,049 - INFO     -   Input action: 51 (type: int)
2025-10-29 13:52:21,049 - INFO     -   Available edges in graph: 60
2025-10-29 13:52:21,049 - INFO     -   Action index calculation:
2025-10-29 13:52:21,049 - INFO     -     - action % max(num_valid_edges, 1) = 51 % 60 = 51
2025-10-29 13:52:21,049 - INFO     -     - clamped to [0, 59]: 51
2025-10-29 13:52:21,049 - INFO     -   ✓ Extracted merge pair from edge 51: (7, 1)
2025-10-29 13:52:21,049 - INFO     -   ✓ Validation passed
2025-10-29 13:52:21,049 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:21,049 - INFO     -     - Total states before merge: 30
2025-10-29 13:52:21,049 - INFO     -     - Num nodes: 9
2025-10-29 13:52:21,049 - INFO     -     - Num edges: 60
2025-10-29 13:52:21,049 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:21,049 - INFO     -       - Node 7: 5 states
2025-10-29 13:52:21,049 - INFO     -       - Node 1: 2 states
2025-10-29 13:52:21,049 - INFO     -       - Expected product: 10 states
2025-10-29 13:52:21,049 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:21,059 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:52:21,061 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:21,061 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:52:21,161 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:21,161 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:21,161 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:52:21,162 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:21,162 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:21,162 - INFO     -   Calling graph_tracker.merge_nodes([7, 1])...
2025-10-29 13:52:21,162 - INFO     - Attempting merge of nodes 7 and 1...
2025-10-29 13:52:21,162 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:52:21,162 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:21,162 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:21,162 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:52:21,162 - INFO     - 
================================================================================
2025-10-29 13:52:21,162 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:52:21,162 - INFO     - ================================================================================
2025-10-29 13:52:21,162 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:21,162 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:52:21,162 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:52:21,162 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:21,162 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:21,164 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:21,164 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:21,164 - INFO     -   - Raw f_after length: 10
2025-10-29 13:52:21,164 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:21,164 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:21,164 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:21,164 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:52:21,164 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:21,164 - INFO     -   - ts1_id: 7
2025-10-29 13:52:21,164 - INFO     -   - ts2_id: 1
2025-10-29 13:52:21,164 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:21,164 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:21,164 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:52:21,164 - INFO     -   - Product space size: 10
2025-10-29 13:52:21,164 - INFO     -   - Using product state mapping
2025-10-29 13:52:21,164 - INFO     -   - f_before_product length: 10
2025-10-29 13:52:21,164 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:52:21,164 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:52:21,164 - INFO     -   - delta: 0.5000
2025-10-29 13:52:21,164 - INFO     -   - f_stability: 1.0 - |0.5000| / 2.8000 = 0.8214
2025-10-29 13:52:21,164 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:21,164 - INFO     -   - Compared 7 values
2025-10-29 13:52:21,164 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:21,164 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:21,164 - INFO     -   - states_before: 10
2025-10-29 13:52:21,164 - INFO     -   - states_after: 10
2025-10-29 13:52:21,164 - INFO     -   - delta_states: 0
2025-10-29 13:52:21,164 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:21,164 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:21,166 - INFO     -   - ts2_transitions: 5
2025-10-29 13:52:21,166 - INFO     -   - merged_transitions: 40
2025-10-29 13:52:21,166 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:52:21,166 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:21,170 - INFO     -   - search_signals present: True
2025-10-29 13:52:21,170 - INFO     -   - nodes_expanded: 10
2025-10-29 13:52:21,170 - INFO     -   - search_depth: 1
2025-10-29 13:52:21,170 - INFO     -   - solution_cost: 2
2025-10-29 13:52:21,170 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:52:21,170 - INFO     -   - solution_found: True
2025-10-29 13:52:21,170 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:21,170 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:21,170 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:52:21,170 - INFO     -   - TS7(5) + TS1(2) → 10 states
2025-10-29 13:52:21,170 - INFO     -   - f_stability=0.821
2025-10-29 13:52:21,170 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:52:21,170 - INFO     -   - solution_found=True
2025-10-29 13:52:21,170 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:21,170 - INFO     - 
  Extracted signals:
2025-10-29 13:52:21,170 - INFO     -     - iteration: 0
2025-10-29 13:52:21,170 - INFO     -     - states_before: 10
2025-10-29 13:52:21,170 - INFO     -     - states_after: 10
2025-10-29 13:52:21,170 - INFO     -     - delta_states: 0
2025-10-29 13:52:21,170 - INFO     -     - f_value_stability: 0.8214
2025-10-29 13:52:21,170 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:21,170 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:21,170 - INFO     -     - nodes_expanded: 10
2025-10-29 13:52:21,170 - INFO     -     - search_depth: 1
2025-10-29 13:52:21,170 - INFO     -     - solution_cost: 2
2025-10-29 13:52:21,172 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:52:21,172 - INFO     -     - solution_found: True
2025-10-29 13:52:21,172 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:21,172 - INFO     - 
  Computing reward:
2025-10-29 13:52:21,172 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:21,172 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:21,172 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:21,172 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:52:21,172 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:52:21,172 - INFO     -   [3] F-VALUE STABILITY: 0.593
2025-10-29 13:52:21,173 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:52:21,173 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:21,173 - INFO     - 
  [COMPOSITE]: 0.680
2025-10-29 13:52:21,173 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:52:21,173 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:52:21,173 - INFO     -     + 0.350*0.593 (stability)
2025-10-29 13:52:21,173 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:21,173 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:21,173 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:21,173 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:52:21,173 - INFO     - 
  [FINAL REWARD]: 0.7602
2025-10-29 13:52:21,173 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:21,173 - INFO     -     ✓ Reward computed: 0.7602
2025-10-29 13:52:21,173 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:21,173 - INFO     -     - bf_score                       0.5667
2025-10-29 13:52:21,173 - INFO     -     - depth_score                    0.9119
2025-10-29 13:52:21,173 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:21,173 - INFO     -     - f_stability                    0.5935
2025-10-29 13:52:21,173 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:52:21,173 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:21,173 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:21,173 - INFO     -     - composite                      0.6801
2025-10-29 13:52:21,173 - INFO     -     - total                          0.7602
2025-10-29 13:52:21,187 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:21,187 - INFO     -   Num remaining nodes: 8
2025-10-29 13:52:21,187 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:52:21,187 - INFO     -   Done: False
2025-10-29 13:52:21,187 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:21,189 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:21,189 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:21,189 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:21,189 - INFO     -     - num_nodes: 8
2025-10-29 13:52:21,189 - INFO     -     - num_edges: 50
2025-10-29 13:52:21,189 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:21,189 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:52:21,189 - INFO     -   After: current_merge_step = 1
2025-10-29 13:52:21,189 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:21,189 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:21,189 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:21,189 - INFO     -   ✓ Step logged
2025-10-29 13:52:21,189 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:21,189 - INFO     -   Returning:
2025-10-29 13:52:21,189 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:21,189 - INFO     -     - reward: 0.7602
2025-10-29 13:52:21,189 - INFO     -     - done: False
2025-10-29 13:52:21,191 - INFO     -     - truncated: False
2025-10-29 13:52:21,191 - INFO     -     - info: 19 keys
2025-10-29 13:52:21,191 - INFO     - ==========================================================================================

2025-10-29 13:52:21,195 - INFO     - 
==========================================================================================
2025-10-29 13:52:21,195 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:21,195 - INFO     - ==========================================================================================
2025-10-29 13:52:21,195 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:21,195 - INFO     -   Input action: 18 (type: int)
2025-10-29 13:52:21,195 - INFO     -   Available edges in graph: 50
2025-10-29 13:52:21,195 - INFO     -   Action index calculation:
2025-10-29 13:52:21,195 - INFO     -     - action % max(num_valid_edges, 1) = 18 % 50 = 18
2025-10-29 13:52:21,195 - INFO     -     - clamped to [0, 49]: 18
2025-10-29 13:52:21,195 - INFO     -   ✓ Extracted merge pair from edge 18: (3, 6)
2025-10-29 13:52:21,195 - INFO     -   ✓ Validation passed
2025-10-29 13:52:21,195 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:21,195 - INFO     -     - Total states before merge: 33
2025-10-29 13:52:21,195 - INFO     -     - Num nodes: 8
2025-10-29 13:52:21,195 - INFO     -     - Num edges: 50
2025-10-29 13:52:21,195 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:21,195 - INFO     -       - Node 3: 2 states
2025-10-29 13:52:21,195 - INFO     -       - Node 6: 5 states
2025-10-29 13:52:21,195 - INFO     -       - Expected product: 10 states
2025-10-29 13:52:21,195 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:21,203 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:52:21,203 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:21,203 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:52:21,306 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:21,306 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:21,306 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:52:21,306 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:21,306 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:21,306 - INFO     -   Calling graph_tracker.merge_nodes([3, 6])...
2025-10-29 13:52:21,306 - INFO     - Attempting merge of nodes 3 and 6...
2025-10-29 13:52:21,306 - INFO     - Successfully merged nodes into new node 10 with 10 states.
2025-10-29 13:52:21,306 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:21,306 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:21,306 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:52:21,306 - INFO     - 
================================================================================
2025-10-29 13:52:21,306 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:52:21,306 - INFO     - ================================================================================
2025-10-29 13:52:21,306 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:21,306 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:52:21,306 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:52:21,306 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:21,306 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:21,306 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:21,306 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:21,306 - INFO     -   - Raw f_after length: 10
2025-10-29 13:52:21,306 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:21,306 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:21,306 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:21,306 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:52:21,306 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:21,306 - INFO     -   - ts1_id: 3
2025-10-29 13:52:21,309 - INFO     -   - ts2_id: 6
2025-10-29 13:52:21,309 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:21,309 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:21,309 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:52:21,309 - INFO     -   - Product space size: 10
2025-10-29 13:52:21,309 - INFO     -   - Using product state mapping
2025-10-29 13:52:21,309 - INFO     -   - f_before_product length: 10
2025-10-29 13:52:21,309 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:52:21,309 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:52:21,309 - INFO     -   - delta: 0.4000
2025-10-29 13:52:21,309 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:52:21,309 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:21,309 - INFO     -   - Compared 7 values
2025-10-29 13:52:21,309 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:21,309 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:21,309 - INFO     -   - states_before: 10
2025-10-29 13:52:21,309 - INFO     -   - states_after: 10
2025-10-29 13:52:21,309 - INFO     -   - delta_states: 0
2025-10-29 13:52:21,309 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:21,309 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:21,309 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:21,309 - INFO     -   - merged_transitions: 40
2025-10-29 13:52:21,309 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:52:21,309 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:21,317 - INFO     -   - search_signals present: True
2025-10-29 13:52:21,317 - INFO     -   - nodes_expanded: 10
2025-10-29 13:52:21,317 - INFO     -   - search_depth: 1
2025-10-29 13:52:21,317 - INFO     -   - solution_cost: 0
2025-10-29 13:52:21,317 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:52:21,317 - INFO     -   - solution_found: True
2025-10-29 13:52:21,317 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:21,317 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:21,317 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:52:21,317 - INFO     -   - TS3(2) + TS6(5) → 10 states
2025-10-29 13:52:21,317 - INFO     -   - f_stability=0.862
2025-10-29 13:52:21,319 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:52:21,319 - INFO     -   - solution_found=True
2025-10-29 13:52:21,319 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:21,319 - INFO     - 
  Extracted signals:
2025-10-29 13:52:21,319 - INFO     -     - iteration: 1
2025-10-29 13:52:21,319 - INFO     -     - states_before: 10
2025-10-29 13:52:21,319 - INFO     -     - states_after: 10
2025-10-29 13:52:21,319 - INFO     -     - delta_states: 0
2025-10-29 13:52:21,319 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:52:21,319 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:21,319 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:21,319 - INFO     -     - nodes_expanded: 10
2025-10-29 13:52:21,319 - INFO     -     - search_depth: 1
2025-10-29 13:52:21,319 - INFO     -     - solution_cost: 0
2025-10-29 13:52:21,319 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:52:21,319 - INFO     -     - solution_found: True
2025-10-29 13:52:21,319 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:21,319 - INFO     - 
  Computing reward:
2025-10-29 13:52:21,319 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:21,319 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:21,319 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:21,319 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:52:21,319 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:52:21,319 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:52:21,321 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:21,321 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:21,321 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:52:21,321 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:52:21,321 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:52:21,321 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:52:21,321 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:21,321 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:21,321 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:21,321 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:21,321 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:52:21,321 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:21,321 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:52:21,321 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:21,321 - INFO     -     - bf_score                       0.5667
2025-10-29 13:52:21,321 - INFO     -     - depth_score                    0.9119
2025-10-29 13:52:21,321 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:21,321 - INFO     -     - f_stability                    0.2913
2025-10-29 13:52:21,321 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:21,321 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:21,321 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:21,321 - INFO     -     - composite                      0.5743
2025-10-29 13:52:21,321 - INFO     -     - total                          0.3487
2025-10-29 13:52:21,333 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:21,333 - INFO     -   Num remaining nodes: 7
2025-10-29 13:52:21,333 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:52:21,333 - INFO     -   Done: False
2025-10-29 13:52:21,333 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:21,333 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:21,333 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:21,333 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:21,333 - INFO     -     - num_nodes: 7
2025-10-29 13:52:21,333 - INFO     -     - num_edges: 40
2025-10-29 13:52:21,333 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:21,333 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:52:21,333 - INFO     -   After: current_merge_step = 2
2025-10-29 13:52:21,333 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:21,333 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:21,333 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:21,333 - INFO     -   ✓ Step logged
2025-10-29 13:52:21,333 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:21,333 - INFO     -   Returning:
2025-10-29 13:52:21,333 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:21,333 - INFO     -     - reward: 0.3487
2025-10-29 13:52:21,333 - INFO     -     - done: False
2025-10-29 13:52:21,333 - INFO     -     - truncated: False
2025-10-29 13:52:21,333 - INFO     -     - info: 19 keys
2025-10-29 13:52:21,333 - INFO     - ==========================================================================================

2025-10-29 13:52:21,342 - INFO     - 
==========================================================================================
2025-10-29 13:52:21,342 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:21,342 - INFO     - ==========================================================================================
2025-10-29 13:52:21,342 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:21,342 - INFO     -   Input action: 35 (type: int)
2025-10-29 13:52:21,342 - INFO     -   Available edges in graph: 40
2025-10-29 13:52:21,342 - INFO     -   Action index calculation:
2025-10-29 13:52:21,342 - INFO     -     - action % max(num_valid_edges, 1) = 35 % 40 = 35
2025-10-29 13:52:21,342 - INFO     -     - clamped to [0, 39]: 35
2025-10-29 13:52:21,342 - INFO     -   ✓ Extracted merge pair from edge 35: (10, 2)
2025-10-29 13:52:21,342 - INFO     -   ✓ Validation passed
2025-10-29 13:52:21,342 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:21,342 - INFO     -     - Total states before merge: 36
2025-10-29 13:52:21,342 - INFO     -     - Num nodes: 7
2025-10-29 13:52:21,342 - INFO     -     - Num edges: 40
2025-10-29 13:52:21,342 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:21,342 - INFO     -       - Node 10: 10 states
2025-10-29 13:52:21,342 - INFO     -       - Node 2: 2 states
2025-10-29 13:52:21,342 - INFO     -       - Expected product: 20 states
2025-10-29 13:52:21,342 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:21,353 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:52:21,353 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:21,353 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:52:21,455 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:21,455 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:21,455 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:52:21,455 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:21,455 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:21,455 - INFO     -   Calling graph_tracker.merge_nodes([10, 2])...
2025-10-29 13:52:21,455 - INFO     - Attempting merge of nodes 10 and 2...
2025-10-29 13:52:21,455 - INFO     - Successfully merged nodes into new node 11 with 20 states.
2025-10-29 13:52:21,455 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:21,455 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:21,455 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:52:21,457 - INFO     - 
================================================================================
2025-10-29 13:52:21,457 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:52:21,457 - INFO     - ================================================================================
2025-10-29 13:52:21,457 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:21,457 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:52:21,457 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:52:21,457 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:21,457 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:21,457 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:52:21,457 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:21,457 - INFO     -   - Raw f_after length: 20
2025-10-29 13:52:21,457 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:21,457 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:52:21,459 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:21,459 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:52:21,459 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:21,459 - INFO     -   - ts1_id: 10
2025-10-29 13:52:21,459 - INFO     -   - ts2_id: 2
2025-10-29 13:52:21,459 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:21,459 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:21,459 - INFO     -   - ts1_size: 10, ts2_size: 2
2025-10-29 13:52:21,459 - INFO     -   - Product space size: 20
2025-10-29 13:52:21,459 - INFO     -   - Using product state mapping
2025-10-29 13:52:21,459 - INFO     -   - f_before_product length: 20
2025-10-29 13:52:21,459 - INFO     -   - avg_f_before: 3.3500 (20 valid states)
2025-10-29 13:52:21,459 - INFO     -   - avg_f_after:  3.7000 (20 valid states)
2025-10-29 13:52:21,459 - INFO     -   - delta: 0.3500
2025-10-29 13:52:21,459 - INFO     -   - f_stability: 1.0 - |0.3500| / 3.3500 = 0.8955
2025-10-29 13:52:21,459 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:21,459 - INFO     -   - Compared 12 values
2025-10-29 13:52:21,459 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:21,461 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:21,461 - INFO     -   - states_before: 20
2025-10-29 13:52:21,461 - INFO     -   - states_after: 20
2025-10-29 13:52:21,461 - INFO     -   - delta_states: 0
2025-10-29 13:52:21,461 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:21,461 - INFO     -   - ts1_transitions: 40
2025-10-29 13:52:21,461 - INFO     -   - ts2_transitions: 5
2025-10-29 13:52:21,461 - INFO     -   - merged_transitions: 128
2025-10-29 13:52:21,461 - INFO     -   - transition_density_change: 4.1500
2025-10-29 13:52:21,461 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:21,461 - INFO     -   - search_signals present: True
2025-10-29 13:52:21,461 - INFO     -   - nodes_expanded: 20
2025-10-29 13:52:21,461 - INFO     -   - search_depth: 1
2025-10-29 13:52:21,461 - INFO     -   - solution_cost: 0
2025-10-29 13:52:21,461 - INFO     -   - branching_factor: 6.4000
2025-10-29 13:52:21,461 - INFO     -   - solution_found: True
2025-10-29 13:52:21,461 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:21,461 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:21,461 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:52:21,461 - INFO     -   - TS10(10) + TS2(2) → 20 states
2025-10-29 13:52:21,461 - INFO     -   - f_stability=0.896
2025-10-29 13:52:21,461 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:52:21,461 - INFO     -   - solution_found=True
2025-10-29 13:52:21,461 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:21,461 - INFO     - 
  Extracted signals:
2025-10-29 13:52:21,461 - INFO     -     - iteration: 2
2025-10-29 13:52:21,461 - INFO     -     - states_before: 20
2025-10-29 13:52:21,461 - INFO     -     - states_after: 20
2025-10-29 13:52:21,461 - INFO     -     - delta_states: 0
2025-10-29 13:52:21,461 - INFO     -     - f_value_stability: 0.8955
2025-10-29 13:52:21,461 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:21,461 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:21,461 - INFO     -     - nodes_expanded: 20
2025-10-29 13:52:21,461 - INFO     -     - search_depth: 1
2025-10-29 13:52:21,461 - INFO     -     - solution_cost: 0
2025-10-29 13:52:21,461 - INFO     -     - branching_factor: 6.4000
2025-10-29 13:52:21,461 - INFO     -     - solution_found: True
2025-10-29 13:52:21,461 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:21,461 - INFO     - 
  Computing reward:
2025-10-29 13:52:21,461 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:21,461 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:21,464 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:21,464 - INFO     -   [1] BRANCHING FACTOR: 6.400 → score 0.260 (high BF, minimal credit)
2025-10-29 13:52:21,464 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:52:21,464 - INFO     -   [3] F-VALUE STABILITY: 0.865
2025-10-29 13:52:21,474 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:52:21,474 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:21,474 - INFO     - 
  [COMPOSITE]: 0.683
2025-10-29 13:52:21,474 - INFO     -     = 0.300*0.260 (bf)
2025-10-29 13:52:21,474 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:52:21,474 - INFO     -     + 0.350*0.865 (stability)
2025-10-29 13:52:21,474 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:21,474 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:21,474 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:21,474 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:52:21,474 - INFO     - 
  [FINAL REWARD]: 0.8663
2025-10-29 13:52:21,475 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:21,475 - INFO     -     ✓ Reward computed: 0.8663
2025-10-29 13:52:21,475 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:21,476 - INFO     -     - bf_score                       0.2600
2025-10-29 13:52:21,476 - INFO     -     - depth_score                    0.9119
2025-10-29 13:52:21,476 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:21,476 - INFO     -     - f_stability                    0.8650
2025-10-29 13:52:21,476 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:52:21,476 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:21,476 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:21,476 - INFO     -     - composite                      0.6831
2025-10-29 13:52:21,476 - INFO     -     - total                          0.8663
2025-10-29 13:52:21,476 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:21,476 - INFO     -   Num remaining nodes: 6
2025-10-29 13:52:21,476 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:52:21,476 - INFO     -   Done: False
2025-10-29 13:52:21,476 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:21,478 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:21,478 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:21,478 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:21,478 - INFO     -     - num_nodes: 6
2025-10-29 13:52:21,478 - INFO     -     - num_edges: 28
2025-10-29 13:52:21,478 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:21,478 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:52:21,478 - INFO     -   After: current_merge_step = 3
2025-10-29 13:52:21,478 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:21,478 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:21,478 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:21,482 - INFO     -   ✓ Step logged
2025-10-29 13:52:21,482 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:21,482 - INFO     -   Returning:
2025-10-29 13:52:21,482 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:21,482 - INFO     -     - reward: 0.8663
2025-10-29 13:52:21,483 - INFO     -     - done: False
2025-10-29 13:52:21,483 - INFO     -     - truncated: False
2025-10-29 13:52:21,483 - INFO     -     - info: 19 keys
2025-10-29 13:52:21,483 - INFO     - ==========================================================================================

2025-10-29 13:52:21,489 - INFO     - 
==========================================================================================
2025-10-29 13:52:21,489 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:21,489 - INFO     - ==========================================================================================
2025-10-29 13:52:21,489 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:21,489 - INFO     -   Input action: 10 (type: int)
2025-10-29 13:52:21,489 - INFO     -   Available edges in graph: 28
2025-10-29 13:52:21,489 - INFO     -   Action index calculation:
2025-10-29 13:52:21,489 - INFO     -     - action % max(num_valid_edges, 1) = 10 % 28 = 10
2025-10-29 13:52:21,489 - INFO     -     - clamped to [0, 27]: 10
2025-10-29 13:52:21,489 - INFO     -   ✓ Extracted merge pair from edge 10: (5, 0)
2025-10-29 13:52:21,489 - INFO     -   ✓ Validation passed
2025-10-29 13:52:21,489 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:21,489 - INFO     -     - Total states before merge: 44
2025-10-29 13:52:21,489 - INFO     -     - Num nodes: 6
2025-10-29 13:52:21,489 - INFO     -     - Num edges: 28
2025-10-29 13:52:21,489 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:21,489 - INFO     -       - Node 5: 5 states
2025-10-29 13:52:21,489 - INFO     -       - Node 0: 2 states
2025-10-29 13:52:21,489 - INFO     -       - Expected product: 10 states
2025-10-29 13:52:21,489 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:21,493 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:52:21,493 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:21,493 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:52:21,596 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:21,596 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:21,596 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:52:21,596 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:21,596 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:21,596 - INFO     -   Calling graph_tracker.merge_nodes([5, 0])...
2025-10-29 13:52:21,596 - INFO     - Attempting merge of nodes 5 and 0...
2025-10-29 13:52:21,596 - INFO     - Successfully merged nodes into new node 12 with 10 states.
2025-10-29 13:52:21,596 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:21,596 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:21,596 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:52:21,596 - INFO     - 
================================================================================
2025-10-29 13:52:21,596 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:52:21,596 - INFO     - ================================================================================
2025-10-29 13:52:21,596 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:21,596 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:52:21,596 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:52:21,598 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:21,598 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:21,598 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:21,598 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:21,598 - INFO     -   - Raw f_after length: 10
2025-10-29 13:52:21,598 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:21,598 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:21,598 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:21,598 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:52:21,598 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:21,598 - INFO     -   - ts1_id: 5
2025-10-29 13:52:21,598 - INFO     -   - ts2_id: 0
2025-10-29 13:52:21,598 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:21,598 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:21,598 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:52:21,598 - INFO     -   - Product space size: 10
2025-10-29 13:52:21,598 - INFO     -   - Using product state mapping
2025-10-29 13:52:21,598 - INFO     -   - f_before_product length: 10
2025-10-29 13:52:21,598 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:52:21,598 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:52:21,598 - INFO     -   - delta: 0.8000
2025-10-29 13:52:21,598 - INFO     -   - f_stability: 1.0 - |0.8000| / 2.8000 = 0.7143
2025-10-29 13:52:21,600 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:21,600 - INFO     -   - Compared 7 values
2025-10-29 13:52:21,600 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:52:21,600 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:21,600 - INFO     -   - states_before: 10
2025-10-29 13:52:21,600 - INFO     -   - states_after: 10
2025-10-29 13:52:21,600 - INFO     -   - delta_states: 0
2025-10-29 13:52:21,600 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:21,600 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:21,600 - INFO     -   - ts2_transitions: 5
2025-10-29 13:52:21,600 - INFO     -   - merged_transitions: 37
2025-10-29 13:52:21,600 - INFO     -   - transition_density_change: 1.9000
2025-10-29 13:52:21,600 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:21,601 - INFO     -   - search_signals present: True
2025-10-29 13:52:21,601 - INFO     -   - nodes_expanded: 10
2025-10-29 13:52:21,601 - INFO     -   - search_depth: 2
2025-10-29 13:52:21,601 - INFO     -   - solution_cost: 2
2025-10-29 13:52:21,601 - INFO     -   - branching_factor: 3.7000
2025-10-29 13:52:21,601 - INFO     -   - solution_found: True
2025-10-29 13:52:21,601 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:21,601 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:21,601 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:52:21,601 - INFO     -   - TS5(5) + TS0(2) → 10 states
2025-10-29 13:52:21,601 - INFO     -   - f_stability=0.714
2025-10-29 13:52:21,601 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:52:21,601 - INFO     -   - solution_found=True
2025-10-29 13:52:21,601 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:21,601 - INFO     - 
  Extracted signals:
2025-10-29 13:52:21,601 - INFO     -     - iteration: 3
2025-10-29 13:52:21,601 - INFO     -     - states_before: 10
2025-10-29 13:52:21,601 - INFO     -     - states_after: 10
2025-10-29 13:52:21,601 - INFO     -     - delta_states: 0
2025-10-29 13:52:21,601 - INFO     -     - f_value_stability: 0.7143
2025-10-29 13:52:21,601 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:52:21,601 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:21,601 - INFO     -     - nodes_expanded: 10
2025-10-29 13:52:21,601 - INFO     -     - search_depth: 2
2025-10-29 13:52:21,601 - INFO     -     - solution_cost: 2
2025-10-29 13:52:21,601 - INFO     -     - branching_factor: 3.7000
2025-10-29 13:52:21,601 - INFO     -     - solution_found: True
2025-10-29 13:52:21,601 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:21,601 - INFO     - 
  Computing reward:
2025-10-29 13:52:21,601 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:21,605 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:21,605 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:21,605 - INFO     -   [1] BRANCHING FACTOR: 3.700 → score 0.607 (tolerable)
2025-10-29 13:52:21,605 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:52:21,605 - INFO     -   [3] F-VALUE STABILITY: 0.459
2025-10-29 13:52:21,605 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:52:21,605 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:21,606 - INFO     - 
  [COMPOSITE]: 0.635
2025-10-29 13:52:21,606 - INFO     -     = 0.300*0.607 (bf)
2025-10-29 13:52:21,606 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:52:21,606 - INFO     -     + 0.350*0.459 (stability)
2025-10-29 13:52:21,606 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:21,606 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:21,606 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:21,606 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:52:21,606 - INFO     - 
  [FINAL REWARD]: 0.5693
2025-10-29 13:52:21,606 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:21,606 - INFO     -     ✓ Reward computed: 0.5693
2025-10-29 13:52:21,606 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:21,606 - INFO     -     - bf_score                       0.6067
2025-10-29 13:52:21,606 - INFO     -     - depth_score                    0.8603
2025-10-29 13:52:21,606 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:21,606 - INFO     -     - f_stability                    0.4588
2025-10-29 13:52:21,606 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:52:21,606 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:21,606 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:21,606 - INFO     -     - composite                      0.6347
2025-10-29 13:52:21,606 - INFO     -     - total                          0.5693
2025-10-29 13:52:21,617 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:21,617 - INFO     -   Num remaining nodes: 5
2025-10-29 13:52:21,618 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:52:21,618 - INFO     -   Done: False
2025-10-29 13:52:21,618 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:21,618 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:21,618 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:21,618 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:21,618 - INFO     -     - num_nodes: 5
2025-10-29 13:52:21,620 - INFO     -     - num_edges: 20
2025-10-29 13:52:21,620 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:21,620 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:52:21,620 - INFO     -   After: current_merge_step = 4
2025-10-29 13:52:21,620 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:21,620 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:21,620 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:21,620 - INFO     -   ✓ Step logged
2025-10-29 13:52:21,620 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:21,620 - INFO     -   Returning:
2025-10-29 13:52:21,620 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:21,621 - INFO     -     - reward: 0.5693
2025-10-29 13:52:21,621 - INFO     -     - done: False
2025-10-29 13:52:21,621 - INFO     -     - truncated: False
2025-10-29 13:52:21,621 - INFO     -     - info: 19 keys
2025-10-29 13:52:21,621 - INFO     - ==========================================================================================

2025-10-29 13:52:21,626 - INFO     - 
==========================================================================================
2025-10-29 13:52:21,626 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:21,626 - INFO     - ==========================================================================================
2025-10-29 13:52:21,626 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:21,626 - INFO     -   Input action: 16 (type: int)
2025-10-29 13:52:21,626 - INFO     -   Available edges in graph: 20
2025-10-29 13:52:21,626 - INFO     -   Action index calculation:
2025-10-29 13:52:21,626 - INFO     -     - action % max(num_valid_edges, 1) = 16 % 20 = 16
2025-10-29 13:52:21,626 - INFO     -     - clamped to [0, 19]: 16
2025-10-29 13:52:21,626 - INFO     -   ✓ Extracted merge pair from edge 16: (12, 4)
2025-10-29 13:52:21,626 - INFO     -   ✓ Validation passed
2025-10-29 13:52:21,626 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:21,626 - INFO     -     - Total states before merge: 47
2025-10-29 13:52:21,626 - INFO     -     - Num nodes: 5
2025-10-29 13:52:21,626 - INFO     -     - Num edges: 20
2025-10-29 13:52:21,626 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:21,626 - INFO     -       - Node 12: 10 states
2025-10-29 13:52:21,626 - INFO     -       - Node 4: 2 states
2025-10-29 13:52:21,626 - INFO     -       - Expected product: 20 states
2025-10-29 13:52:21,626 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:21,633 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:52:21,633 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:21,633 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:52:21,735 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:21,735 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:21,735 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:52:21,736 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:21,736 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:21,737 - INFO     -   Calling graph_tracker.merge_nodes([12, 4])...
2025-10-29 13:52:21,737 - INFO     - Attempting merge of nodes 12 and 4...
2025-10-29 13:52:21,737 - INFO     - Successfully merged nodes into new node 13 with 20 states.
2025-10-29 13:52:21,737 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:21,737 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:21,737 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:52:21,737 - INFO     - 
================================================================================
2025-10-29 13:52:21,737 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:52:21,737 - INFO     - ================================================================================
2025-10-29 13:52:21,737 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:21,737 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:52:21,737 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:52:21,737 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:21,737 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:21,737 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:52:21,737 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:21,737 - INFO     -   - Raw f_after length: 20
2025-10-29 13:52:21,737 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:21,737 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:52:21,737 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:21,737 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:52:21,737 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:21,737 - INFO     -   - ts1_id: 12
2025-10-29 13:52:21,737 - INFO     -   - ts2_id: 4
2025-10-29 13:52:21,739 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:21,739 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:21,739 - INFO     -   - ts1_size: 10, ts2_size: 2
2025-10-29 13:52:21,739 - INFO     -   - Product space size: 20
2025-10-29 13:52:21,739 - INFO     -   - Using product state mapping
2025-10-29 13:52:21,739 - INFO     -   - f_before_product length: 20
2025-10-29 13:52:21,739 - INFO     -   - avg_f_before: 3.6000 (20 valid states)
2025-10-29 13:52:21,739 - INFO     -   - avg_f_after:  4.8000 (20 valid states)
2025-10-29 13:52:21,739 - INFO     -   - delta: 1.2000
2025-10-29 13:52:21,739 - INFO     -   - f_stability: 1.0 - |1.2000| / 3.6000 = 0.6667
2025-10-29 13:52:21,739 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:21,739 - INFO     -   - Compared 12 values
2025-10-29 13:52:21,739 - INFO     -   - Significant changes (> 5.0): 2
2025-10-29 13:52:21,739 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:21,739 - INFO     -   - states_before: 20
2025-10-29 13:52:21,739 - INFO     -   - states_after: 20
2025-10-29 13:52:21,739 - INFO     -   - delta_states: 0
2025-10-29 13:52:21,739 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:21,739 - INFO     -   - ts1_transitions: 37
2025-10-29 13:52:21,741 - INFO     -   - ts2_transitions: 3
2025-10-29 13:52:21,741 - INFO     -   - merged_transitions: 70
2025-10-29 13:52:21,741 - INFO     -   - transition_density_change: 1.5000
2025-10-29 13:52:21,741 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:21,741 - INFO     -   - search_signals present: True
2025-10-29 13:52:21,741 - INFO     -   - nodes_expanded: 20
2025-10-29 13:52:21,741 - INFO     -   - search_depth: 2
2025-10-29 13:52:21,741 - INFO     -   - solution_cost: 2
2025-10-29 13:52:21,742 - INFO     -   - branching_factor: 3.5000
2025-10-29 13:52:21,749 - INFO     -   - solution_found: True
2025-10-29 13:52:21,750 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:21,750 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:21,750 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:52:21,750 - INFO     -   - TS12(10) + TS4(2) → 20 states
2025-10-29 13:52:21,750 - INFO     -   - f_stability=0.667
2025-10-29 13:52:21,750 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:52:21,750 - INFO     -   - solution_found=True
2025-10-29 13:52:21,750 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:21,750 - INFO     - 
  Extracted signals:
2025-10-29 13:52:21,750 - INFO     -     - iteration: 4
2025-10-29 13:52:21,750 - INFO     -     - states_before: 20
2025-10-29 13:52:21,750 - INFO     -     - states_after: 20
2025-10-29 13:52:21,750 - INFO     -     - delta_states: 0
2025-10-29 13:52:21,750 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:52:21,750 - INFO     -     - num_significant_f_changes: 2
2025-10-29 13:52:21,750 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:21,750 - INFO     -     - nodes_expanded: 20
2025-10-29 13:52:21,750 - INFO     -     - search_depth: 2
2025-10-29 13:52:21,750 - INFO     -     - solution_cost: 2
2025-10-29 13:52:21,750 - INFO     -     - branching_factor: 3.5000
2025-10-29 13:52:21,750 - INFO     -     - solution_found: True
2025-10-29 13:52:21,752 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:21,752 - INFO     - 
  Computing reward:
2025-10-29 13:52:21,752 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:21,752 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:21,752 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:21,752 - INFO     -   [1] BRANCHING FACTOR: 3.500 → score 0.633 (tolerable)
2025-10-29 13:52:21,752 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:52:21,752 - INFO     -   [3] F-VALUE STABILITY: 0.705
2025-10-29 13:52:21,752 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:52:21,752 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:21,752 - INFO     - 
  [COMPOSITE]: 0.729
2025-10-29 13:52:21,752 - INFO     -     = 0.300*0.633 (bf)
2025-10-29 13:52:21,752 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:52:21,752 - INFO     -     + 0.350*0.705 (stability)
2025-10-29 13:52:21,752 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:21,752 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:21,752 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:21,752 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:52:21,752 - INFO     - 
  [FINAL REWARD]: 0.9579
2025-10-29 13:52:21,752 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:21,752 - INFO     -     ✓ Reward computed: 0.9579
2025-10-29 13:52:21,752 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:21,752 - INFO     -     - bf_score                       0.6333
2025-10-29 13:52:21,752 - INFO     -     - depth_score                    0.8603
2025-10-29 13:52:21,752 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:21,752 - INFO     -     - f_stability                    0.7054
2025-10-29 13:52:21,752 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:52:21,752 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:21,754 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:21,754 - INFO     -     - composite                      0.7290
2025-10-29 13:52:21,754 - INFO     -     - total                          0.9579
2025-10-29 13:52:21,754 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:21,754 - INFO     -   Num remaining nodes: 4
2025-10-29 13:52:21,754 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:52:21,754 - INFO     -   Done: False
2025-10-29 13:52:21,754 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:21,764 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:21,764 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:21,764 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:21,766 - INFO     -     - num_nodes: 4
2025-10-29 13:52:21,766 - INFO     -     - num_edges: 12
2025-10-29 13:52:21,766 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:21,766 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:52:21,766 - INFO     -   After: current_merge_step = 5
2025-10-29 13:52:21,766 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:21,766 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:21,766 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:21,766 - INFO     -   ✓ Step logged
2025-10-29 13:52:21,766 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:21,766 - INFO     -   Returning:
2025-10-29 13:52:21,766 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:21,766 - INFO     -     - reward: 0.9579
2025-10-29 13:52:21,768 - INFO     -     - done: False
2025-10-29 13:52:21,768 - INFO     -     - truncated: False
2025-10-29 13:52:21,768 - INFO     -     - info: 19 keys
2025-10-29 13:52:21,768 - INFO     - ==========================================================================================

2025-10-29 13:52:21,773 - INFO     - 
==========================================================================================
2025-10-29 13:52:21,773 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:21,774 - INFO     - ==========================================================================================
2025-10-29 13:52:21,774 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:21,774 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:52:21,774 - INFO     -   Available edges in graph: 12
2025-10-29 13:52:21,774 - INFO     -   Action index calculation:
2025-10-29 13:52:21,774 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 12 = 3
2025-10-29 13:52:21,774 - INFO     -     - clamped to [0, 11]: 3
2025-10-29 13:52:21,774 - INFO     -   ✓ Extracted merge pair from edge 3: (9, 8)
2025-10-29 13:52:21,774 - INFO     -   ✓ Validation passed
2025-10-29 13:52:21,774 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:21,774 - INFO     -     - Total states before merge: 55
2025-10-29 13:52:21,774 - INFO     -     - Num nodes: 4
2025-10-29 13:52:21,774 - INFO     -     - Num edges: 12
2025-10-29 13:52:21,774 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:21,774 - INFO     -       - Node 9: 10 states
2025-10-29 13:52:21,774 - INFO     -       - Node 8: 5 states
2025-10-29 13:52:21,774 - INFO     -       - Expected product: 50 states
2025-10-29 13:52:21,774 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:21,776 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:52:21,776 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:21,776 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:52:21,881 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:21,881 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:21,881 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:52:21,882 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:21,882 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:21,882 - INFO     -   Calling graph_tracker.merge_nodes([9, 8])...
2025-10-29 13:52:21,882 - INFO     - Attempting merge of nodes 9 and 8...
2025-10-29 13:52:21,882 - INFO     - Successfully merged nodes into new node 14 with 50 states.
2025-10-29 13:52:21,882 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:21,882 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:21,882 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:52:21,882 - INFO     - 
================================================================================
2025-10-29 13:52:21,882 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:52:21,882 - INFO     - ================================================================================
2025-10-29 13:52:21,882 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:21,882 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:52:21,882 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:52:21,883 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:21,883 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:21,883 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:52:21,883 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:21,883 - INFO     -   - Raw f_after length: 50
2025-10-29 13:52:21,883 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:21,883 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:52:21,883 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:21,883 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:52:21,883 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:21,883 - INFO     -   - ts1_id: 9
2025-10-29 13:52:21,883 - INFO     -   - ts2_id: 8
2025-10-29 13:52:21,883 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:21,883 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:21,883 - INFO     -   - ts1_size: 10, ts2_size: 5
2025-10-29 13:52:21,883 - INFO     -   - Product space size: 50
2025-10-29 13:52:21,883 - INFO     -   - Using product state mapping
2025-10-29 13:52:21,883 - INFO     -   - f_before_product length: 50
2025-10-29 13:52:21,883 - INFO     -   - avg_f_before: 3.8400 (50 valid states)
2025-10-29 13:52:21,883 - INFO     -   - avg_f_after:  6.1400 (50 valid states)
2025-10-29 13:52:21,883 - INFO     -   - delta: 2.3000
2025-10-29 13:52:21,883 - INFO     -   - f_stability: 1.0 - |2.3000| / 3.8400 = 0.4010
2025-10-29 13:52:21,883 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:21,883 - INFO     -   - Compared 15 values
2025-10-29 13:52:21,883 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:21,883 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:21,883 - INFO     -   - states_before: 50
2025-10-29 13:52:21,883 - INFO     -   - states_after: 50
2025-10-29 13:52:21,883 - INFO     -   - delta_states: 0
2025-10-29 13:52:21,883 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:21,883 - INFO     -   - ts1_transitions: 40
2025-10-29 13:52:21,883 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:21,883 - INFO     -   - merged_transitions: 275
2025-10-29 13:52:21,886 - INFO     -   - transition_density_change: 4.4400
2025-10-29 13:52:21,886 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:21,886 - INFO     -   - search_signals present: True
2025-10-29 13:52:21,886 - INFO     -   - nodes_expanded: 50
2025-10-29 13:52:21,886 - INFO     -   - search_depth: 3
2025-10-29 13:52:21,886 - INFO     -   - solution_cost: 2
2025-10-29 13:52:21,886 - INFO     -   - branching_factor: 5.5000
2025-10-29 13:52:21,886 - INFO     -   - solution_found: True
2025-10-29 13:52:21,886 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:21,886 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:21,886 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:52:21,886 - INFO     -   - TS9(10) + TS8(5) → 50 states
2025-10-29 13:52:21,886 - INFO     -   - f_stability=0.401
2025-10-29 13:52:21,886 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:52:21,886 - INFO     -   - solution_found=True
2025-10-29 13:52:21,886 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:21,886 - INFO     - 
  Extracted signals:
2025-10-29 13:52:21,886 - INFO     -     - iteration: 5
2025-10-29 13:52:21,886 - INFO     -     - states_before: 50
2025-10-29 13:52:21,886 - INFO     -     - states_after: 50
2025-10-29 13:52:21,886 - INFO     -     - delta_states: 0
2025-10-29 13:52:21,886 - INFO     -     - f_value_stability: 0.4010
2025-10-29 13:52:21,886 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:21,886 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:21,886 - INFO     -     - nodes_expanded: 50
2025-10-29 13:52:21,886 - INFO     -     - search_depth: 3
2025-10-29 13:52:21,886 - INFO     -     - solution_cost: 2
2025-10-29 13:52:21,886 - INFO     -     - branching_factor: 5.5000
2025-10-29 13:52:21,892 - INFO     -     - solution_found: True
2025-10-29 13:52:21,892 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:21,892 - INFO     - 
  Computing reward:
2025-10-29 13:52:21,892 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:21,892 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:21,892 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:21,892 - INFO     -   [1] BRANCHING FACTOR: 5.500 → score 0.367 (tolerable)
2025-10-29 13:52:21,892 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:52:21,892 - INFO     -   [3] F-VALUE STABILITY: 0.142
2025-10-29 13:52:21,892 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:21,892 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:21,892 - INFO     - 
  [COMPOSITE]: 0.444
2025-10-29 13:52:21,892 - INFO     -     = 0.300*0.367 (bf)
2025-10-29 13:52:21,892 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:52:21,892 - INFO     -     + 0.350*0.142 (stability)
2025-10-29 13:52:21,892 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:21,892 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:21,892 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:21,892 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:21,892 - INFO     - 
  [FINAL REWARD]: 0.0888
2025-10-29 13:52:21,892 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:21,892 - INFO     -     ✓ Reward computed: 0.0888
2025-10-29 13:52:21,892 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:21,892 - INFO     -     - bf_score                       0.3667
2025-10-29 13:52:21,892 - INFO     -     - depth_score                    0.8237
2025-10-29 13:52:21,892 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:21,892 - INFO     -     - f_stability                    0.1419
2025-10-29 13:52:21,892 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:21,892 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:21,892 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:21,892 - INFO     -     - composite                      0.4444
2025-10-29 13:52:21,892 - INFO     -     - total                          0.0888
2025-10-29 13:52:21,892 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:21,892 - INFO     -   Num remaining nodes: 3
2025-10-29 13:52:21,892 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:52:21,892 - INFO     -   Done: False
2025-10-29 13:52:21,892 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:21,892 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:21,892 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:21,892 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:21,892 - INFO     -     - num_nodes: 3
2025-10-29 13:52:21,892 - INFO     -     - num_edges: 6
2025-10-29 13:52:21,892 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:21,892 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:52:21,892 - INFO     -   After: current_merge_step = 6
2025-10-29 13:52:21,892 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:21,892 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:21,892 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:21,892 - INFO     -   ✓ Step logged
2025-10-29 13:52:21,898 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:21,898 - INFO     -   Returning:
2025-10-29 13:52:21,898 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:21,898 - INFO     -     - reward: 0.0888
2025-10-29 13:52:21,898 - INFO     -     - done: False
2025-10-29 13:52:21,898 - INFO     -     - truncated: False
2025-10-29 13:52:21,898 - INFO     -     - info: 19 keys
2025-10-29 13:52:21,898 - INFO     - ==========================================================================================

2025-10-29 13:52:21,908 - INFO     - 
==========================================================================================
2025-10-29 13:52:21,909 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:21,909 - INFO     - ==========================================================================================
2025-10-29 13:52:21,909 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:21,909 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:52:21,909 - INFO     -   Available edges in graph: 6
2025-10-29 13:52:21,909 - INFO     -   Action index calculation:
2025-10-29 13:52:21,909 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 6 = 3
2025-10-29 13:52:21,909 - INFO     -     - clamped to [0, 5]: 3
2025-10-29 13:52:21,909 - INFO     -   ✓ Extracted merge pair from edge 3: (13, 14)
2025-10-29 13:52:21,909 - INFO     -   ✓ Validation passed
2025-10-29 13:52:21,909 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:21,909 - INFO     -     - Total states before merge: 90
2025-10-29 13:52:21,909 - INFO     -     - Num nodes: 3
2025-10-29 13:52:21,909 - INFO     -     - Num edges: 6
2025-10-29 13:52:21,909 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:21,909 - INFO     -       - Node 13: 20 states
2025-10-29 13:52:21,909 - INFO     -       - Node 14: 50 states
2025-10-29 13:52:21,909 - INFO     -       - Expected product: 1000 states
2025-10-29 13:52:21,909 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:21,913 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:52:21,913 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:21,913 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:52:22,015 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:22,015 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:22,015 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:52:22,021 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:52:22,021 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:22,022 - INFO     -   Calling graph_tracker.merge_nodes([13, 14])...
2025-10-29 13:52:22,022 - INFO     - Attempting merge of nodes 13 and 14...
2025-10-29 13:52:22,022 - INFO     - Successfully merged nodes into new node 15 with 1000 states.
2025-10-29 13:52:22,022 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:22,022 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:22,022 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:52:22,022 - INFO     - 
================================================================================
2025-10-29 13:52:22,022 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:52:22,022 - INFO     - ================================================================================
2025-10-29 13:52:22,022 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:22,022 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:52:22,022 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:52:22,024 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:22,024 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:22,025 - INFO     -   - Raw ts1_f length: 20
2025-10-29 13:52:22,025 - INFO     -   - Raw ts2_f length: 50
2025-10-29 13:52:22,025 - INFO     -   - Raw f_after length: 1000
2025-10-29 13:52:22,025 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:22,025 - INFO     -   - ts1_valid: 20 / 20 (removed 0)
2025-10-29 13:52:22,026 - INFO     -   - ts2_valid: 50 / 50 (removed -50)
2025-10-29 13:52:22,026 - INFO     -   - after_valid: 847 / 1000 (removed 153)
2025-10-29 13:52:22,026 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:22,026 - INFO     -   - ts1_id: 13
2025-10-29 13:52:22,026 - INFO     -   - ts2_id: 14
2025-10-29 13:52:22,026 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:22,026 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:22,026 - INFO     -   - ts1_size: 20, ts2_size: 50
2025-10-29 13:52:22,026 - INFO     -   - Product space size: 1000
2025-10-29 13:52:22,026 - INFO     -   - Using product state mapping
2025-10-29 13:52:22,026 - INFO     -   - f_before_product length: 1000
2025-10-29 13:52:22,033 - INFO     -   - avg_f_before: 6.7830 (1000 valid states)
2025-10-29 13:52:22,033 - INFO     -   - avg_f_after:  11.0413 (847 valid states)
2025-10-29 13:52:22,033 - INFO     -   - delta: 4.2583
2025-10-29 13:52:22,033 - INFO     -   - f_stability: 1.0 - |4.2583| / 6.7830 = 0.3722
2025-10-29 13:52:22,033 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:22,033 - INFO     -   - Compared 70 values
2025-10-29 13:52:22,033 - INFO     -   - Significant changes (> 5.0): 41
2025-10-29 13:52:22,033 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:22,033 - INFO     -   - states_before: 1000
2025-10-29 13:52:22,033 - INFO     -   - states_after: 1000
2025-10-29 13:52:22,033 - INFO     -   - delta_states: 0
2025-10-29 13:52:22,033 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:22,033 - INFO     -   - ts1_transitions: 70
2025-10-29 13:52:22,033 - INFO     -   - ts2_transitions: 275
2025-10-29 13:52:22,033 - INFO     -   - merged_transitions: 4900
2025-10-29 13:52:22,033 - INFO     -   - transition_density_change: 4.5550
2025-10-29 13:52:22,033 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:22,033 - INFO     -   - search_signals present: True
2025-10-29 13:52:22,033 - INFO     -   - nodes_expanded: 847
2025-10-29 13:52:22,033 - INFO     -   - search_depth: 5
2025-10-29 13:52:22,033 - INFO     -   - solution_cost: 4
2025-10-29 13:52:22,035 - INFO     -   - branching_factor: 5.7851
2025-10-29 13:52:22,035 - INFO     -   - solution_found: True
2025-10-29 13:52:22,035 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:22,035 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:22,037 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:52:22,037 - INFO     -   - TS13(20) + TS14(50) → 1000 states
2025-10-29 13:52:22,037 - INFO     -   - f_stability=0.372
2025-10-29 13:52:22,037 - INFO     -   - A* nodes_expanded=847
2025-10-29 13:52:22,037 - INFO     -   - solution_found=True
2025-10-29 13:52:22,037 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:22,037 - INFO     - 
  Extracted signals:
2025-10-29 13:52:22,037 - INFO     -     - iteration: 6
2025-10-29 13:52:22,037 - INFO     -     - states_before: 1000
2025-10-29 13:52:22,037 - INFO     -     - states_after: 1000
2025-10-29 13:52:22,037 - INFO     -     - delta_states: 0
2025-10-29 13:52:22,037 - INFO     -     - f_value_stability: 0.3722
2025-10-29 13:52:22,037 - INFO     -     - num_significant_f_changes: 41
2025-10-29 13:52:22,037 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:22,037 - INFO     -     - nodes_expanded: 847
2025-10-29 13:52:22,037 - INFO     -     - search_depth: 5
2025-10-29 13:52:22,037 - INFO     -     - solution_cost: 4
2025-10-29 13:52:22,037 - INFO     -     - branching_factor: 5.7851
2025-10-29 13:52:22,037 - INFO     -     - solution_found: True
2025-10-29 13:52:22,037 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:22,037 - INFO     - 
  Computing reward:
2025-10-29 13:52:22,039 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:22,039 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:22,039 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:22,039 - INFO     -   [1] BRANCHING FACTOR: 5.785 → score 0.329 (tolerable)
2025-10-29 13:52:22,039 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:52:22,039 - INFO     -   [3] F-VALUE STABILITY: 0.342
2025-10-29 13:52:22,039 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:52:22,039 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:22,039 - INFO     - 
  [COMPOSITE]: 0.493
2025-10-29 13:52:22,039 - INFO     -     = 0.300*0.329 (bf)
2025-10-29 13:52:22,039 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:52:22,039 - INFO     -     + 0.350*0.342 (stability)
2025-10-29 13:52:22,039 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:22,039 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:22,039 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:22,039 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:52:22,039 - INFO     - 
  [FINAL REWARD]: 0.2852
2025-10-29 13:52:22,039 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:22,039 - INFO     -     ✓ Reward computed: 0.2852
2025-10-29 13:52:22,039 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:22,039 - INFO     -     - bf_score                       0.3287
2025-10-29 13:52:22,039 - INFO     -     - depth_score                    0.7721
2025-10-29 13:52:22,039 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:22,039 - INFO     -     - f_stability                    0.3416
2025-10-29 13:52:22,039 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:52:22,039 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:22,039 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:22,039 - INFO     -     - composite                      0.4926
2025-10-29 13:52:22,039 - INFO     -     - total                          0.2852
2025-10-29 13:52:22,039 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:22,039 - INFO     -   Num remaining nodes: 2
2025-10-29 13:52:22,039 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:52:22,043 - INFO     -   Done: False
2025-10-29 13:52:22,043 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:22,051 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:22,051 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:22,051 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:22,051 - INFO     -     - num_nodes: 2
2025-10-29 13:52:22,051 - INFO     -     - num_edges: 2
2025-10-29 13:52:22,051 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:22,051 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:52:22,051 - INFO     -   After: current_merge_step = 7
2025-10-29 13:52:22,051 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:22,051 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:22,051 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:22,054 - INFO     -   ✓ Step logged
2025-10-29 13:52:22,054 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:22,054 - INFO     -   Returning:
2025-10-29 13:52:22,054 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:22,054 - INFO     -     - reward: 0.2852
2025-10-29 13:52:22,054 - INFO     -     - done: False
2025-10-29 13:52:22,054 - INFO     -     - truncated: False
2025-10-29 13:52:22,054 - INFO     -     - info: 19 keys
2025-10-29 13:52:22,054 - INFO     - ==========================================================================================

2025-10-29 13:52:22,061 - INFO     - 
==========================================================================================
2025-10-29 13:52:22,061 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:22,061 - INFO     - ==========================================================================================
2025-10-29 13:52:22,061 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:22,061 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:52:22,061 - INFO     -   Available edges in graph: 2
2025-10-29 13:52:22,061 - INFO     -   Action index calculation:
2025-10-29 13:52:22,061 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 2 = 1
2025-10-29 13:52:22,061 - INFO     -     - clamped to [0, 1]: 1
2025-10-29 13:52:22,061 - INFO     -   ✓ Extracted merge pair from edge 1: (15, 11)
2025-10-29 13:52:22,061 - INFO     -   ✓ Validation passed
2025-10-29 13:52:22,061 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:22,061 - INFO     -     - Total states before merge: 1020
2025-10-29 13:52:22,063 - INFO     -     - Num nodes: 2
2025-10-29 13:52:22,063 - INFO     -     - Num edges: 2
2025-10-29 13:52:22,063 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:22,063 - INFO     -       - Node 15: 1000 states
2025-10-29 13:52:22,063 - INFO     -       - Node 11: 20 states
2025-10-29 13:52:22,063 - INFO     -       - Expected product: 20000 states
2025-10-29 13:52:22,063 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:22,067 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:52:22,067 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:22,067 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:52:22,171 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:22,171 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:22,171 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:52:22,390 - INFO     -   ✓ TS file received after 0.22s
2025-10-29 13:52:22,390 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:22,390 - INFO     -   Calling graph_tracker.merge_nodes([15, 11])...
2025-10-29 13:52:22,390 - INFO     - Attempting merge of nodes 15 and 11...
2025-10-29 13:52:22,390 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:52:22,390 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:22,392 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:22,392 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:52:22,392 - INFO     - 
================================================================================
2025-10-29 13:52:22,392 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:52:22,392 - INFO     - ================================================================================
2025-10-29 13:52:22,392 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:22,392 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:52:22,392 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:52:22,396 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:22,396 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:22,396 - INFO     -   - Raw ts1_f length: 185
2025-10-29 13:52:22,396 - INFO     -   - Raw ts2_f length: 20
2025-10-29 13:52:22,396 - INFO     -   - Raw f_after length: 3700
2025-10-29 13:52:22,396 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:22,397 - INFO     -   - ts1_valid: 185 / 185 (removed 0)
2025-10-29 13:52:22,397 - INFO     -   - ts2_valid: 20 / 20 (removed -20)
2025-10-29 13:52:22,397 - INFO     -   - after_valid: 2524 / 3700 (removed 1176)
2025-10-29 13:52:22,397 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:22,397 - INFO     -   - ts1_id: 15
2025-10-29 13:52:22,397 - INFO     -   - ts2_id: 11
2025-10-29 13:52:22,397 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:22,397 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:22,397 - INFO     -   - ts1_size: 185, ts2_size: 20
2025-10-29 13:52:22,397 - INFO     -   - Product space size: 3700
2025-10-29 13:52:22,397 - INFO     -   - Using product state mapping
2025-10-29 13:52:22,401 - INFO     -   - f_before_product length: 3700
2025-10-29 13:52:22,410 - INFO     -   - avg_f_before: 6.0132 (3700 valid states)
2025-10-29 13:52:22,410 - INFO     -   - avg_f_after:  9.5737 (2524 valid states)
2025-10-29 13:52:22,410 - INFO     -   - delta: 3.5604
2025-10-29 13:52:22,410 - INFO     -   - f_stability: 1.0 - |3.5604| / 6.0132 = 0.4079
2025-10-29 13:52:22,410 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:22,410 - INFO     -   - Compared 205 values
2025-10-29 13:52:22,410 - INFO     -   - Significant changes (> 5.0): 61
2025-10-29 13:52:22,410 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:22,410 - INFO     -   - states_before: 3700
2025-10-29 13:52:22,410 - INFO     -   - states_after: 3700
2025-10-29 13:52:22,410 - INFO     -   - delta_states: 0
2025-10-29 13:52:22,410 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:22,410 - INFO     -   - ts1_transitions: 1614
2025-10-29 13:52:22,410 - INFO     -   - ts2_transitions: 128
2025-10-29 13:52:22,410 - INFO     -   - merged_transitions: 19266
2025-10-29 13:52:22,410 - INFO     -   - transition_density_change: 4.7362
2025-10-29 13:52:22,410 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:22,410 - INFO     -   - search_signals present: True
2025-10-29 13:52:22,410 - INFO     -   - nodes_expanded: 2524
2025-10-29 13:52:22,410 - INFO     -   - search_depth: 5
2025-10-29 13:52:22,410 - INFO     -   - solution_cost: 4
2025-10-29 13:52:22,410 - INFO     -   - branching_factor: 7.6331
2025-10-29 13:52:22,410 - INFO     -   - solution_found: True
2025-10-29 13:52:22,410 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:22,410 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:22,410 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:52:22,410 - INFO     -   - TS15(185) + TS11(20) → 3700 states
2025-10-29 13:52:22,410 - INFO     -   - f_stability=0.408
2025-10-29 13:52:22,417 - INFO     -   - A* nodes_expanded=2524
2025-10-29 13:52:22,417 - INFO     -   - solution_found=True
2025-10-29 13:52:22,417 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:22,417 - INFO     - 
  Extracted signals:
2025-10-29 13:52:22,417 - INFO     -     - iteration: 7
2025-10-29 13:52:22,417 - INFO     -     - states_before: 3700
2025-10-29 13:52:22,417 - INFO     -     - states_after: 3700
2025-10-29 13:52:22,417 - INFO     -     - delta_states: 0
2025-10-29 13:52:22,417 - INFO     -     - f_value_stability: 0.4079
2025-10-29 13:52:22,417 - INFO     -     - num_significant_f_changes: 61
2025-10-29 13:52:22,417 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:22,417 - INFO     -     - nodes_expanded: 2524
2025-10-29 13:52:22,417 - INFO     -     - search_depth: 5
2025-10-29 13:52:22,417 - INFO     -     - solution_cost: 4
2025-10-29 13:52:22,417 - INFO     -     - branching_factor: 7.6331
2025-10-29 13:52:22,417 - INFO     -     - solution_found: True
2025-10-29 13:52:22,417 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:22,417 - INFO     - 
  Computing reward:
2025-10-29 13:52:22,417 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:22,417 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:22,417 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:22,417 - INFO     -   [1] BRANCHING FACTOR: 7.633 → score 0.137 (high BF, minimal credit)
2025-10-29 13:52:22,417 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:52:22,417 - INFO     -   [3] F-VALUE STABILITY: 0.361
2025-10-29 13:52:22,417 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:52:22,421 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:22,421 - INFO     - 
  [COMPOSITE]: 0.442
2025-10-29 13:52:22,421 - INFO     -     = 0.300*0.137 (bf)
2025-10-29 13:52:22,421 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:52:22,421 - INFO     -     + 0.350*0.361 (stability)
2025-10-29 13:52:22,421 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:22,421 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:22,421 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:22,421 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:52:22,421 - INFO     - 
  [FINAL REWARD]: 0.1834
2025-10-29 13:52:22,421 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:22,421 - INFO     -     ✓ Reward computed: 0.1834
2025-10-29 13:52:22,421 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:22,421 - INFO     -     - bf_score                       0.1367
2025-10-29 13:52:22,421 - INFO     -     - depth_score                    0.7721
2025-10-29 13:52:22,421 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:22,421 - INFO     -     - f_stability                    0.3608
2025-10-29 13:52:22,421 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:52:22,421 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:22,421 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:22,421 - INFO     -     - composite                      0.4417
2025-10-29 13:52:22,421 - INFO     -     - total                          0.1834
2025-10-29 13:52:22,421 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:22,421 - INFO     -   Num remaining nodes: 1
2025-10-29 13:52:22,421 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:52:22,421 - INFO     -   Done: True
2025-10-29 13:52:22,421 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:52:22,421 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:22,421 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:22,421 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:22,421 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:22,421 - INFO     -     - num_nodes: 1
2025-10-29 13:52:22,421 - INFO     -     - num_edges: 0
2025-10-29 13:52:22,421 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:22,421 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:52:22,421 - INFO     -   After: current_merge_step = 8
2025-10-29 13:52:22,421 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:22,421 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:22,421 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:22,426 - INFO     -   ✓ Step logged
2025-10-29 13:52:22,426 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:22,426 - INFO     -   Returning:
2025-10-29 13:52:22,426 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:22,426 - INFO     -     - reward: 0.1834
2025-10-29 13:52:22,426 - INFO     -     - done: True
2025-10-29 13:52:22,426 - INFO     -     - truncated: False
2025-10-29 13:52:22,426 - INFO     -     - info: 19 keys
2025-10-29 13:52:22,426 - INFO     - ==========================================================================================

2025-10-29 13:52:22,508 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:52:22,518 - INFO     - [Handshake] Building FD command:
2025-10-29 13:52:22,518 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:52:22,518 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_02.pddl
2025-10-29 13:52:22,518 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:52:22,518 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:52:23,431 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:52:23,431 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:52:23,431 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:52:23,769 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:52:23,769 - INFO     - Initializing GraphTracker...
2025-10-29 13:52:23,769 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:52:23,769 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:52:23,769 - INFO     -    → Node 0 has 2 states
2025-10-29 13:52:23,769 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:52:23,769 - INFO     -    → Node 1 has 2 states
2025-10-29 13:52:23,769 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:52:23,769 - INFO     -    → Node 2 has 2 states
2025-10-29 13:52:23,769 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:52:23,769 - INFO     -    → Node 3 has 2 states
2025-10-29 13:52:23,769 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:52:23,769 - INFO     -    → Node 4 has 2 states
2025-10-29 13:52:23,769 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:52:23,769 - INFO     -    → Node 5 has 5 states
2025-10-29 13:52:23,769 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:52:23,774 - INFO     -    → Node 6 has 5 states
2025-10-29 13:52:23,774 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:52:23,774 - INFO     -    → Node 7 has 5 states
2025-10-29 13:52:23,774 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:52:23,774 - INFO     -    → Node 8 has 5 states
2025-10-29 13:52:23,774 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:52:23,774 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:52:23,776 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:52:23,776 - INFO     - Added edge (0, 1)
2025-10-29 13:52:23,776 - INFO     - Added edge (0, 2)
2025-10-29 13:52:23,776 - INFO     - Added edge (0, 3)
2025-10-29 13:52:23,778 - INFO     - Added edge (0, 4)
2025-10-29 13:52:23,778 - INFO     - Added edge (0, 5)
2025-10-29 13:52:23,778 - INFO     - Added edge (0, 6)
2025-10-29 13:52:23,778 - INFO     - Added edge (0, 7)
2025-10-29 13:52:23,778 - INFO     - Added edge (0, 8)
2025-10-29 13:52:23,778 - INFO     - Added edge (1, 0)
2025-10-29 13:52:23,778 - INFO     - Added edge (1, 2)
2025-10-29 13:52:23,778 - INFO     - Added edge (1, 3)
2025-10-29 13:52:23,778 - INFO     - Added edge (1, 4)
2025-10-29 13:52:23,778 - INFO     - Added edge (1, 5)
2025-10-29 13:52:23,778 - INFO     - Added edge (1, 6)
2025-10-29 13:52:23,778 - INFO     - Added edge (1, 7)
2025-10-29 13:52:23,778 - INFO     - Added edge (1, 8)
2025-10-29 13:52:23,778 - INFO     - Added edge (2, 0)
2025-10-29 13:52:23,778 - INFO     - Added edge (2, 1)
2025-10-29 13:52:23,778 - INFO     - Added edge (2, 3)
2025-10-29 13:52:23,778 - INFO     - Added edge (2, 4)
2025-10-29 13:52:23,778 - INFO     - Added edge (2, 5)
2025-10-29 13:52:23,780 - INFO     - Added edge (2, 6)
2025-10-29 13:52:23,780 - INFO     - Added edge (2, 7)
2025-10-29 13:52:23,780 - INFO     - Added edge (2, 8)
2025-10-29 13:52:23,780 - INFO     - Added edge (3, 0)
2025-10-29 13:52:23,780 - INFO     - Added edge (3, 1)
2025-10-29 13:52:23,780 - INFO     - Added edge (3, 2)
2025-10-29 13:52:23,780 - INFO     - Added edge (3, 4)
2025-10-29 13:52:23,780 - INFO     - Added edge (3, 5)
2025-10-29 13:52:23,780 - INFO     - Added edge (3, 6)
2025-10-29 13:52:23,780 - INFO     - Added edge (3, 7)
2025-10-29 13:52:23,780 - INFO     - Added edge (3, 8)
2025-10-29 13:52:23,781 - INFO     - Added edge (4, 0)
2025-10-29 13:52:23,781 - INFO     - Added edge (4, 1)
2025-10-29 13:52:23,781 - INFO     - Added edge (4, 2)
2025-10-29 13:52:23,781 - INFO     - Added edge (4, 3)
2025-10-29 13:52:23,781 - INFO     - Added edge (4, 5)
2025-10-29 13:52:23,781 - INFO     - Added edge (4, 6)
2025-10-29 13:52:23,781 - INFO     - Added edge (4, 7)
2025-10-29 13:52:23,782 - INFO     - Added edge (4, 8)
2025-10-29 13:52:23,782 - INFO     - Added edge (5, 0)
2025-10-29 13:52:23,782 - INFO     - Added edge (5, 1)
2025-10-29 13:52:23,782 - INFO     - Added edge (5, 2)
2025-10-29 13:52:23,782 - INFO     - Added edge (5, 3)
2025-10-29 13:52:23,782 - INFO     - Added edge (5, 4)
2025-10-29 13:52:23,782 - INFO     - Added edge (6, 0)
2025-10-29 13:52:23,782 - INFO     - Added edge (6, 1)
2025-10-29 13:52:23,782 - INFO     - Added edge (6, 2)
2025-10-29 13:52:23,782 - INFO     - Added edge (6, 3)
2025-10-29 13:52:23,782 - INFO     - Added edge (6, 4)
2025-10-29 13:52:23,782 - INFO     - Added edge (7, 0)
2025-10-29 13:52:23,782 - INFO     - Added edge (7, 1)
2025-10-29 13:52:23,782 - INFO     - Added edge (7, 2)
2025-10-29 13:52:23,782 - INFO     - Added edge (7, 3)
2025-10-29 13:52:23,782 - INFO     - Added edge (7, 4)
2025-10-29 13:52:23,782 - INFO     - Added edge (8, 0)
2025-10-29 13:52:23,782 - INFO     - Added edge (8, 1)
2025-10-29 13:52:23,782 - INFO     - Added edge (8, 2)
2025-10-29 13:52:23,784 - INFO     - Added edge (8, 3)
2025-10-29 13:52:23,784 - INFO     - Added edge (8, 4)
2025-10-29 13:52:23,784 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:52:23,797 - INFO     - 
==========================================================================================
2025-10-29 13:52:23,798 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:23,798 - INFO     - ==========================================================================================
2025-10-29 13:52:23,798 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:23,798 - INFO     -   Input action: 15 (type: int)
2025-10-29 13:52:23,798 - INFO     -   Available edges in graph: 60
2025-10-29 13:52:23,798 - INFO     -   Action index calculation:
2025-10-29 13:52:23,798 - INFO     -     - action % max(num_valid_edges, 1) = 15 % 60 = 15
2025-10-29 13:52:23,798 - INFO     -     - clamped to [0, 59]: 15
2025-10-29 13:52:23,798 - INFO     -   ✓ Extracted merge pair from edge 15: (1, 8)
2025-10-29 13:52:23,798 - INFO     -   ✓ Validation passed
2025-10-29 13:52:23,798 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:23,798 - INFO     -     - Total states before merge: 30
2025-10-29 13:52:23,798 - INFO     -     - Num nodes: 9
2025-10-29 13:52:23,798 - INFO     -     - Num edges: 60
2025-10-29 13:52:23,798 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:23,798 - INFO     -       - Node 1: 2 states
2025-10-29 13:52:23,798 - INFO     -       - Node 8: 5 states
2025-10-29 13:52:23,798 - INFO     -       - Expected product: 10 states
2025-10-29 13:52:23,798 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:23,809 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:52:23,809 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:23,809 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:52:23,910 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:23,910 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:23,910 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:52:23,910 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:23,910 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:23,910 - INFO     -   Calling graph_tracker.merge_nodes([1, 8])...
2025-10-29 13:52:23,910 - INFO     - Attempting merge of nodes 1 and 8...
2025-10-29 13:52:23,910 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:52:23,910 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:23,910 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:23,910 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:52:23,910 - INFO     - 
================================================================================
2025-10-29 13:52:23,910 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:52:23,910 - INFO     - ================================================================================
2025-10-29 13:52:23,910 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:23,910 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:52:23,910 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:52:23,912 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:23,912 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:23,912 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:23,912 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:23,912 - INFO     -   - Raw f_after length: 10
2025-10-29 13:52:23,912 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:23,912 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:23,912 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:23,912 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:52:23,912 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:23,912 - INFO     -   - ts1_id: 1
2025-10-29 13:52:23,912 - INFO     -   - ts2_id: 8
2025-10-29 13:52:23,912 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:23,912 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:23,912 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:52:23,912 - INFO     -   - Product space size: 10
2025-10-29 13:52:23,912 - INFO     -   - Using product state mapping
2025-10-29 13:52:23,912 - INFO     -   - f_before_product length: 10
2025-10-29 13:52:23,912 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:52:23,912 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:52:23,912 - INFO     -   - delta: 0.4000
2025-10-29 13:52:23,912 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:52:23,912 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:23,912 - INFO     -   - Compared 7 values
2025-10-29 13:52:23,912 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:23,912 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:23,914 - INFO     -   - states_before: 10
2025-10-29 13:52:23,914 - INFO     -   - states_after: 10
2025-10-29 13:52:23,914 - INFO     -   - delta_states: 0
2025-10-29 13:52:23,914 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:23,914 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:23,914 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:23,914 - INFO     -   - merged_transitions: 40
2025-10-29 13:52:23,914 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:52:23,914 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:23,920 - INFO     -   - search_signals present: True
2025-10-29 13:52:23,920 - INFO     -   - nodes_expanded: 10
2025-10-29 13:52:23,920 - INFO     -   - search_depth: 1
2025-10-29 13:52:23,920 - INFO     -   - solution_cost: 0
2025-10-29 13:52:23,920 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:52:23,920 - INFO     -   - solution_found: True
2025-10-29 13:52:23,920 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:23,921 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:23,921 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:52:23,921 - INFO     -   - TS1(2) + TS8(5) → 10 states
2025-10-29 13:52:23,921 - INFO     -   - f_stability=0.862
2025-10-29 13:52:23,921 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:52:23,921 - INFO     -   - solution_found=True
2025-10-29 13:52:23,921 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:23,921 - INFO     - 
  Extracted signals:
2025-10-29 13:52:23,921 - INFO     -     - iteration: 0
2025-10-29 13:52:23,921 - INFO     -     - states_before: 10
2025-10-29 13:52:23,921 - INFO     -     - states_after: 10
2025-10-29 13:52:23,921 - INFO     -     - delta_states: 0
2025-10-29 13:52:23,921 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:52:23,921 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:23,921 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:23,922 - INFO     -     - nodes_expanded: 10
2025-10-29 13:52:23,922 - INFO     -     - search_depth: 1
2025-10-29 13:52:23,922 - INFO     -     - solution_cost: 0
2025-10-29 13:52:23,922 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:52:23,922 - INFO     -     - solution_found: True
2025-10-29 13:52:23,922 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:23,922 - INFO     - 
  Computing reward:
2025-10-29 13:52:23,922 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:23,922 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:23,922 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:23,922 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:52:23,922 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:52:23,922 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:52:23,922 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:23,922 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:23,922 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:52:23,922 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:52:23,922 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:52:23,922 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:52:23,922 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:23,922 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:23,922 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:23,922 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:23,922 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:52:23,922 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:23,922 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:52:23,922 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:23,922 - INFO     -     - bf_score                       0.5667
2025-10-29 13:52:23,924 - INFO     -     - depth_score                    0.9119
2025-10-29 13:52:23,924 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:23,924 - INFO     -     - f_stability                    0.2913
2025-10-29 13:52:23,924 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:23,924 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:23,924 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:23,924 - INFO     -     - composite                      0.5743
2025-10-29 13:52:23,924 - INFO     -     - total                          0.3487
2025-10-29 13:52:23,931 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:23,931 - INFO     -   Num remaining nodes: 8
2025-10-29 13:52:23,932 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:52:23,932 - INFO     -   Done: False
2025-10-29 13:52:23,932 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:23,932 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:23,932 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:23,932 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:23,932 - INFO     -     - num_nodes: 8
2025-10-29 13:52:23,932 - INFO     -     - num_edges: 50
2025-10-29 13:52:23,932 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:23,932 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:52:23,932 - INFO     -   After: current_merge_step = 1
2025-10-29 13:52:23,932 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:23,932 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:23,932 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:23,932 - INFO     -   ✓ Step logged
2025-10-29 13:52:23,932 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:23,932 - INFO     -   Returning:
2025-10-29 13:52:23,932 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:23,932 - INFO     -     - reward: 0.3487
2025-10-29 13:52:23,932 - INFO     -     - done: False
2025-10-29 13:52:23,932 - INFO     -     - truncated: False
2025-10-29 13:52:23,932 - INFO     -     - info: 19 keys
2025-10-29 13:52:23,932 - INFO     - ==========================================================================================

2025-10-29 13:52:23,940 - INFO     - 
==========================================================================================
2025-10-29 13:52:23,940 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:23,940 - INFO     - ==========================================================================================
2025-10-29 13:52:23,940 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:23,940 - INFO     -   Input action: 29 (type: int)
2025-10-29 13:52:23,940 - INFO     -   Available edges in graph: 50
2025-10-29 13:52:23,940 - INFO     -   Action index calculation:
2025-10-29 13:52:23,940 - INFO     -     - action % max(num_valid_edges, 1) = 29 % 50 = 29
2025-10-29 13:52:23,940 - INFO     -     - clamped to [0, 49]: 29
2025-10-29 13:52:23,940 - INFO     -   ✓ Extracted merge pair from edge 29: (5, 2)
2025-10-29 13:52:23,940 - INFO     -   ✓ Validation passed
2025-10-29 13:52:23,940 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:23,940 - INFO     -     - Total states before merge: 33
2025-10-29 13:52:23,940 - INFO     -     - Num nodes: 8
2025-10-29 13:52:23,940 - INFO     -     - Num edges: 50
2025-10-29 13:52:23,940 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:23,940 - INFO     -       - Node 5: 5 states
2025-10-29 13:52:23,940 - INFO     -       - Node 2: 2 states
2025-10-29 13:52:23,940 - INFO     -       - Expected product: 10 states
2025-10-29 13:52:23,940 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:23,948 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:52:23,948 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:23,948 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:52:24,050 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:24,050 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:24,050 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:52:24,050 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:24,050 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:24,050 - INFO     -   Calling graph_tracker.merge_nodes([5, 2])...
2025-10-29 13:52:24,050 - INFO     - Attempting merge of nodes 5 and 2...
2025-10-29 13:52:24,050 - INFO     - Successfully merged nodes into new node 10 with 10 states.
2025-10-29 13:52:24,050 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:24,050 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:24,050 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:52:24,050 - INFO     - 
================================================================================
2025-10-29 13:52:24,050 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:52:24,050 - INFO     - ================================================================================
2025-10-29 13:52:24,050 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:24,050 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:52:24,050 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:52:24,052 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:24,052 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:24,052 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:24,052 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:24,052 - INFO     -   - Raw f_after length: 10
2025-10-29 13:52:24,052 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:24,052 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:24,052 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:24,052 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:52:24,052 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:24,052 - INFO     -   - ts1_id: 5
2025-10-29 13:52:24,053 - INFO     -   - ts2_id: 2
2025-10-29 13:52:24,053 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:24,053 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:24,053 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:52:24,053 - INFO     -   - Product space size: 10
2025-10-29 13:52:24,053 - INFO     -   - Using product state mapping
2025-10-29 13:52:24,053 - INFO     -   - f_before_product length: 10
2025-10-29 13:52:24,053 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:52:24,053 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:52:24,054 - INFO     -   - delta: 0.5000
2025-10-29 13:52:24,054 - INFO     -   - f_stability: 1.0 - |0.5000| / 2.8000 = 0.8214
2025-10-29 13:52:24,054 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:24,054 - INFO     -   - Compared 7 values
2025-10-29 13:52:24,054 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:24,054 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:24,054 - INFO     -   - states_before: 10
2025-10-29 13:52:24,054 - INFO     -   - states_after: 10
2025-10-29 13:52:24,054 - INFO     -   - delta_states: 0
2025-10-29 13:52:24,054 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:24,054 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:24,054 - INFO     -   - ts2_transitions: 5
2025-10-29 13:52:24,054 - INFO     -   - merged_transitions: 40
2025-10-29 13:52:24,054 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:52:24,054 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:24,060 - INFO     -   - search_signals present: True
2025-10-29 13:52:24,060 - INFO     -   - nodes_expanded: 10
2025-10-29 13:52:24,060 - INFO     -   - search_depth: 1
2025-10-29 13:52:24,060 - INFO     -   - solution_cost: 2
2025-10-29 13:52:24,060 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:52:24,060 - INFO     -   - solution_found: True
2025-10-29 13:52:24,060 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:24,060 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:24,060 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:52:24,060 - INFO     -   - TS5(5) + TS2(2) → 10 states
2025-10-29 13:52:24,060 - INFO     -   - f_stability=0.821
2025-10-29 13:52:24,060 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:52:24,060 - INFO     -   - solution_found=True
2025-10-29 13:52:24,060 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:24,060 - INFO     - 
  Extracted signals:
2025-10-29 13:52:24,060 - INFO     -     - iteration: 1
2025-10-29 13:52:24,060 - INFO     -     - states_before: 10
2025-10-29 13:52:24,060 - INFO     -     - states_after: 10
2025-10-29 13:52:24,060 - INFO     -     - delta_states: 0
2025-10-29 13:52:24,060 - INFO     -     - f_value_stability: 0.8214
2025-10-29 13:52:24,060 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:24,060 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:24,060 - INFO     -     - nodes_expanded: 10
2025-10-29 13:52:24,060 - INFO     -     - search_depth: 1
2025-10-29 13:52:24,060 - INFO     -     - solution_cost: 2
2025-10-29 13:52:24,060 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:52:24,060 - INFO     -     - solution_found: True
2025-10-29 13:52:24,060 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:24,060 - INFO     - 
  Computing reward:
2025-10-29 13:52:24,060 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:24,060 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:24,060 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:24,060 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:52:24,060 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:52:24,060 - INFO     -   [3] F-VALUE STABILITY: 0.593
2025-10-29 13:52:24,060 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:52:24,060 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:24,060 - INFO     - 
  [COMPOSITE]: 0.680
2025-10-29 13:52:24,060 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:52:24,060 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:52:24,060 - INFO     -     + 0.350*0.593 (stability)
2025-10-29 13:52:24,060 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:24,060 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:24,060 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:24,060 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:52:24,060 - INFO     - 
  [FINAL REWARD]: 0.7602
2025-10-29 13:52:24,060 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:24,060 - INFO     -     ✓ Reward computed: 0.7602
2025-10-29 13:52:24,060 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:24,060 - INFO     -     - bf_score                       0.5667
2025-10-29 13:52:24,060 - INFO     -     - depth_score                    0.9119
2025-10-29 13:52:24,060 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:24,060 - INFO     -     - f_stability                    0.5935
2025-10-29 13:52:24,060 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:52:24,064 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:24,064 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:24,064 - INFO     -     - composite                      0.6801
2025-10-29 13:52:24,064 - INFO     -     - total                          0.7602
2025-10-29 13:52:24,064 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:24,072 - INFO     -   Num remaining nodes: 7
2025-10-29 13:52:24,072 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:52:24,072 - INFO     -   Done: False
2025-10-29 13:52:24,072 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:24,072 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:24,072 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:24,072 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:24,072 - INFO     -     - num_nodes: 7
2025-10-29 13:52:24,072 - INFO     -     - num_edges: 40
2025-10-29 13:52:24,072 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:24,072 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:52:24,072 - INFO     -   After: current_merge_step = 2
2025-10-29 13:52:24,072 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:24,072 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:24,072 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:24,072 - INFO     -   ✓ Step logged
2025-10-29 13:52:24,072 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:24,072 - INFO     -   Returning:
2025-10-29 13:52:24,072 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:24,072 - INFO     -     - reward: 0.7602
2025-10-29 13:52:24,072 - INFO     -     - done: False
2025-10-29 13:52:24,072 - INFO     -     - truncated: False
2025-10-29 13:52:24,072 - INFO     -     - info: 19 keys
2025-10-29 13:52:24,072 - INFO     - ==========================================================================================

2025-10-29 13:52:24,078 - INFO     - 
==========================================================================================
2025-10-29 13:52:24,078 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:24,078 - INFO     - ==========================================================================================
2025-10-29 13:52:24,078 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:24,078 - INFO     -   Input action: 26 (type: int)
2025-10-29 13:52:24,078 - INFO     -   Available edges in graph: 40
2025-10-29 13:52:24,078 - INFO     -   Action index calculation:
2025-10-29 13:52:24,078 - INFO     -     - action % max(num_valid_edges, 1) = 26 % 40 = 26
2025-10-29 13:52:24,078 - INFO     -     - clamped to [0, 39]: 26
2025-10-29 13:52:24,078 - INFO     -   ✓ Extracted merge pair from edge 26: (7, 9)
2025-10-29 13:52:24,078 - INFO     -   ✓ Validation passed
2025-10-29 13:52:24,078 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:24,078 - INFO     -     - Total states before merge: 36
2025-10-29 13:52:24,078 - INFO     -     - Num nodes: 7
2025-10-29 13:52:24,078 - INFO     -     - Num edges: 40
2025-10-29 13:52:24,078 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:24,078 - INFO     -       - Node 7: 5 states
2025-10-29 13:52:24,078 - INFO     -       - Node 9: 10 states
2025-10-29 13:52:24,078 - INFO     -       - Expected product: 50 states
2025-10-29 13:52:24,078 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:24,085 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:52:24,085 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:24,085 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:52:24,188 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:24,188 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:24,188 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:52:24,190 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:24,190 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:24,190 - INFO     -   Calling graph_tracker.merge_nodes([7, 9])...
2025-10-29 13:52:24,190 - INFO     - Attempting merge of nodes 7 and 9...
2025-10-29 13:52:24,190 - INFO     - Successfully merged nodes into new node 11 with 50 states.
2025-10-29 13:52:24,190 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:24,190 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:24,190 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:52:24,190 - INFO     - 
================================================================================
2025-10-29 13:52:24,190 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:52:24,190 - INFO     - ================================================================================
2025-10-29 13:52:24,190 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:24,190 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:52:24,190 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:52:24,190 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:24,190 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:24,190 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:24,190 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:52:24,192 - INFO     -   - Raw f_after length: 50
2025-10-29 13:52:24,192 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:24,192 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:24,192 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:52:24,192 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:52:24,192 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:24,192 - INFO     -   - ts1_id: 7
2025-10-29 13:52:24,192 - INFO     -   - ts2_id: 9
2025-10-29 13:52:24,192 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:24,192 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:24,192 - INFO     -   - ts1_size: 5, ts2_size: 10
2025-10-29 13:52:24,192 - INFO     -   - Product space size: 50
2025-10-29 13:52:24,192 - INFO     -   - Using product state mapping
2025-10-29 13:52:24,192 - INFO     -   - f_before_product length: 50
2025-10-29 13:52:24,192 - INFO     -   - avg_f_before: 3.8800 (50 valid states)
2025-10-29 13:52:24,192 - INFO     -   - avg_f_after:  6.1400 (50 valid states)
2025-10-29 13:52:24,192 - INFO     -   - delta: 2.2600
2025-10-29 13:52:24,192 - INFO     -   - f_stability: 1.0 - |2.2600| / 3.8800 = 0.4175
2025-10-29 13:52:24,192 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:24,192 - INFO     -   - Compared 15 values
2025-10-29 13:52:24,192 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:24,192 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:24,192 - INFO     -   - states_before: 50
2025-10-29 13:52:24,192 - INFO     -   - states_after: 50
2025-10-29 13:52:24,192 - INFO     -   - delta_states: 0
2025-10-29 13:52:24,194 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:24,194 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:24,194 - INFO     -   - ts2_transitions: 40
2025-10-29 13:52:24,194 - INFO     -   - merged_transitions: 275
2025-10-29 13:52:24,194 - INFO     -   - transition_density_change: 4.4400
2025-10-29 13:52:24,194 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:24,194 - INFO     -   - search_signals present: True
2025-10-29 13:52:24,194 - INFO     -   - nodes_expanded: 50
2025-10-29 13:52:24,194 - INFO     -   - search_depth: 3
2025-10-29 13:52:24,194 - INFO     -   - solution_cost: 2
2025-10-29 13:52:24,194 - INFO     -   - branching_factor: 5.5000
2025-10-29 13:52:24,194 - INFO     -   - solution_found: True
2025-10-29 13:52:24,198 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:24,198 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:24,199 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:52:24,199 - INFO     -   - TS7(5) + TS9(10) → 50 states
2025-10-29 13:52:24,199 - INFO     -   - f_stability=0.418
2025-10-29 13:52:24,199 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:52:24,199 - INFO     -   - solution_found=True
2025-10-29 13:52:24,199 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:24,199 - INFO     - 
  Extracted signals:
2025-10-29 13:52:24,199 - INFO     -     - iteration: 2
2025-10-29 13:52:24,199 - INFO     -     - states_before: 50
2025-10-29 13:52:24,199 - INFO     -     - states_after: 50
2025-10-29 13:52:24,199 - INFO     -     - delta_states: 0
2025-10-29 13:52:24,199 - INFO     -     - f_value_stability: 0.4175
2025-10-29 13:52:24,199 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:24,200 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:24,200 - INFO     -     - nodes_expanded: 50
2025-10-29 13:52:24,200 - INFO     -     - search_depth: 3
2025-10-29 13:52:24,200 - INFO     -     - solution_cost: 2
2025-10-29 13:52:24,200 - INFO     -     - branching_factor: 5.5000
2025-10-29 13:52:24,200 - INFO     -     - solution_found: True
2025-10-29 13:52:24,200 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:24,200 - INFO     - 
  Computing reward:
2025-10-29 13:52:24,200 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:24,200 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:24,200 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:24,200 - INFO     -   [1] BRANCHING FACTOR: 5.500 → score 0.367 (tolerable)
2025-10-29 13:52:24,201 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:52:24,201 - INFO     -   [3] F-VALUE STABILITY: 0.550
2025-10-29 13:52:24,201 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:52:24,201 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:24,201 - INFO     - 
  [COMPOSITE]: 0.587
2025-10-29 13:52:24,201 - INFO     -     = 0.300*0.367 (bf)
2025-10-29 13:52:24,201 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:52:24,201 - INFO     -     + 0.350*0.550 (stability)
2025-10-29 13:52:24,201 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:24,201 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:24,201 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:24,201 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:52:24,202 - INFO     - 
  [FINAL REWARD]: 0.5744
2025-10-29 13:52:24,202 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:24,202 - INFO     -     ✓ Reward computed: 0.5744
2025-10-29 13:52:24,202 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:24,202 - INFO     -     - bf_score                       0.3667
2025-10-29 13:52:24,202 - INFO     -     - depth_score                    0.8237
2025-10-29 13:52:24,202 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:24,202 - INFO     -     - f_stability                    0.5499
2025-10-29 13:52:24,202 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:52:24,202 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:24,203 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:24,203 - INFO     -     - composite                      0.5872
2025-10-29 13:52:24,203 - INFO     -     - total                          0.5744
2025-10-29 13:52:24,203 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:24,203 - INFO     -   Num remaining nodes: 6
2025-10-29 13:52:24,203 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:52:24,203 - INFO     -   Done: False
2025-10-29 13:52:24,203 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:24,203 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:24,214 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:24,214 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:24,214 - INFO     -     - num_nodes: 6
2025-10-29 13:52:24,214 - INFO     -     - num_edges: 30
2025-10-29 13:52:24,214 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:24,214 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:52:24,214 - INFO     -   After: current_merge_step = 3
2025-10-29 13:52:24,214 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:24,214 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:24,214 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:24,216 - INFO     -   ✓ Step logged
2025-10-29 13:52:24,216 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:24,216 - INFO     -   Returning:
2025-10-29 13:52:24,216 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:24,216 - INFO     -     - reward: 0.5744
2025-10-29 13:52:24,216 - INFO     -     - done: False
2025-10-29 13:52:24,216 - INFO     -     - truncated: False
2025-10-29 13:52:24,218 - INFO     -     - info: 19 keys
2025-10-29 13:52:24,218 - INFO     - ==========================================================================================

2025-10-29 13:52:24,222 - INFO     - 
==========================================================================================
2025-10-29 13:52:24,222 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:24,222 - INFO     - ==========================================================================================
2025-10-29 13:52:24,222 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:24,222 - INFO     -   Input action: 6 (type: int)
2025-10-29 13:52:24,222 - INFO     -   Available edges in graph: 30
2025-10-29 13:52:24,222 - INFO     -   Action index calculation:
2025-10-29 13:52:24,222 - INFO     -     - action % max(num_valid_edges, 1) = 6 % 30 = 6
2025-10-29 13:52:24,222 - INFO     -     - clamped to [0, 29]: 6
2025-10-29 13:52:24,222 - INFO     -   ✓ Extracted merge pair from edge 6: (3, 4)
2025-10-29 13:52:24,222 - INFO     -   ✓ Validation passed
2025-10-29 13:52:24,222 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:24,222 - INFO     -     - Total states before merge: 71
2025-10-29 13:52:24,222 - INFO     -     - Num nodes: 6
2025-10-29 13:52:24,222 - INFO     -     - Num edges: 30
2025-10-29 13:52:24,222 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:24,222 - INFO     -       - Node 3: 2 states
2025-10-29 13:52:24,222 - INFO     -       - Node 4: 2 states
2025-10-29 13:52:24,222 - INFO     -       - Expected product: 4 states
2025-10-29 13:52:24,222 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:24,222 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:52:24,222 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:24,222 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:52:24,329 - INFO     -   ✓ ACK received after 0.11s
2025-10-29 13:52:24,329 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:24,329 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:52:24,330 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:24,330 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:24,330 - INFO     -   Calling graph_tracker.merge_nodes([3, 4])...
2025-10-29 13:52:24,330 - INFO     - Attempting merge of nodes 3 and 4...
2025-10-29 13:52:24,330 - INFO     - Successfully merged nodes into new node 12 with 4 states.
2025-10-29 13:52:24,330 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:24,330 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:24,330 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:52:24,330 - INFO     - 
================================================================================
2025-10-29 13:52:24,330 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:52:24,330 - INFO     - ================================================================================
2025-10-29 13:52:24,330 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:24,330 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:52:24,330 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:52:24,330 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:24,330 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:24,330 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:24,330 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:24,330 - INFO     -   - Raw f_after length: 4
2025-10-29 13:52:24,330 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:24,330 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:24,330 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:24,330 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:52:24,330 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:24,330 - INFO     -   - ts1_id: 3
2025-10-29 13:52:24,330 - INFO     -   - ts2_id: 4
2025-10-29 13:52:24,330 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:24,330 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:24,330 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:52:24,330 - INFO     -   - Product space size: 4
2025-10-29 13:52:24,330 - INFO     -   - Using product state mapping
2025-10-29 13:52:24,330 - INFO     -   - f_before_product length: 4
2025-10-29 13:52:24,330 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:52:24,330 - INFO     -   - avg_f_after:  0.7500 (4 valid states)
2025-10-29 13:52:24,330 - INFO     -   - delta: 0.0000
2025-10-29 13:52:24,330 - INFO     -   - f_stability: 1.0 - |0.0000| / 0.7500 = 1.0000
2025-10-29 13:52:24,330 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:24,330 - INFO     -   - Compared 4 values
2025-10-29 13:52:24,330 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:24,330 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:24,330 - INFO     -   - states_before: 4
2025-10-29 13:52:24,330 - INFO     -   - states_after: 4
2025-10-29 13:52:24,330 - INFO     -   - delta_states: 0
2025-10-29 13:52:24,330 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:24,330 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:24,330 - INFO     -   - ts2_transitions: 3
2025-10-29 13:52:24,334 - INFO     -   - merged_transitions: 15
2025-10-29 13:52:24,334 - INFO     -   - transition_density_change: 1.7500
2025-10-29 13:52:24,334 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:24,334 - INFO     -   - search_signals present: True
2025-10-29 13:52:24,334 - INFO     -   - nodes_expanded: 4
2025-10-29 13:52:24,334 - INFO     -   - search_depth: 0
2025-10-29 13:52:24,334 - INFO     -   - solution_cost: 0
2025-10-29 13:52:24,334 - INFO     -   - branching_factor: 3.7500
2025-10-29 13:52:24,334 - INFO     -   - solution_found: True
2025-10-29 13:52:24,334 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:24,334 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:24,334 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:52:24,334 - INFO     -   - TS3(2) + TS4(2) → 4 states
2025-10-29 13:52:24,334 - INFO     -   - f_stability=1.000
2025-10-29 13:52:24,334 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:52:24,334 - INFO     -   - solution_found=True
2025-10-29 13:52:24,334 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:24,334 - INFO     - 
  Extracted signals:
2025-10-29 13:52:24,334 - INFO     -     - iteration: 3
2025-10-29 13:52:24,334 - INFO     -     - states_before: 4
2025-10-29 13:52:24,334 - INFO     -     - states_after: 4
2025-10-29 13:52:24,334 - INFO     -     - delta_states: 0
2025-10-29 13:52:24,334 - INFO     -     - f_value_stability: 1.0000
2025-10-29 13:52:24,334 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:24,334 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:24,334 - INFO     -     - nodes_expanded: 4
2025-10-29 13:52:24,334 - INFO     -     - search_depth: 0
2025-10-29 13:52:24,334 - INFO     -     - solution_cost: 0
2025-10-29 13:52:24,334 - INFO     -     - branching_factor: 3.7500
2025-10-29 13:52:24,334 - INFO     -     - solution_found: True
2025-10-29 13:52:24,334 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:24,334 - INFO     - 
  Computing reward:
2025-10-29 13:52:24,334 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:24,334 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:24,334 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:24,334 - INFO     -   [1] BRANCHING FACTOR: 3.750 → score 0.600 (tolerable)
2025-10-29 13:52:24,337 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:52:24,337 - INFO     -   [3] F-VALUE STABILITY: 0.260
2025-10-29 13:52:24,337 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:24,337 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:24,337 - INFO     - 
  [COMPOSITE]: 0.491
2025-10-29 13:52:24,337 - INFO     -     = 0.300*0.600 (bf)
2025-10-29 13:52:24,338 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:52:24,338 - INFO     -     + 0.350*0.260 (stability)
2025-10-29 13:52:24,338 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:24,338 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:24,338 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:24,338 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:24,338 - INFO     - 
  [FINAL REWARD]: 0.1819
2025-10-29 13:52:24,338 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:24,338 - INFO     -     ✓ Reward computed: 0.1819
2025-10-29 13:52:24,338 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:24,338 - INFO     -     - bf_score                       0.6000
2025-10-29 13:52:24,338 - INFO     -     - depth_score                    0.5000
2025-10-29 13:52:24,338 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:24,338 - INFO     -     - f_stability                    0.2598
2025-10-29 13:52:24,338 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:24,338 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:24,338 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:24,338 - INFO     -     - composite                      0.4909
2025-10-29 13:52:24,338 - INFO     -     - total                          0.1819
2025-10-29 13:52:24,342 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:24,342 - INFO     -   Num remaining nodes: 5
2025-10-29 13:52:24,342 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:52:24,342 - INFO     -   Done: False
2025-10-29 13:52:24,342 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:24,342 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:24,342 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:24,342 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:24,342 - INFO     -     - num_nodes: 5
2025-10-29 13:52:24,342 - INFO     -     - num_edges: 20
2025-10-29 13:52:24,342 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:24,342 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:52:24,342 - INFO     -   After: current_merge_step = 4
2025-10-29 13:52:24,342 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:24,342 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:24,342 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:24,342 - INFO     -   ✓ Step logged
2025-10-29 13:52:24,342 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:24,342 - INFO     -   Returning:
2025-10-29 13:52:24,342 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:24,342 - INFO     -     - reward: 0.1819
2025-10-29 13:52:24,342 - INFO     -     - done: False
2025-10-29 13:52:24,342 - INFO     -     - truncated: False
2025-10-29 13:52:24,342 - INFO     -     - info: 19 keys
2025-10-29 13:52:24,342 - INFO     - ==========================================================================================

2025-10-29 13:52:24,347 - INFO     - 
==========================================================================================
2025-10-29 13:52:24,347 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:24,347 - INFO     - ==========================================================================================
2025-10-29 13:52:24,347 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:24,347 - INFO     -   Input action: 19 (type: int)
2025-10-29 13:52:24,347 - INFO     -   Available edges in graph: 20
2025-10-29 13:52:24,347 - INFO     -   Action index calculation:
2025-10-29 13:52:24,347 - INFO     -     - action % max(num_valid_edges, 1) = 19 % 20 = 19
2025-10-29 13:52:24,350 - INFO     -     - clamped to [0, 19]: 19
2025-10-29 13:52:24,350 - INFO     -   ✓ Extracted merge pair from edge 19: (12, 11)
2025-10-29 13:52:24,350 - INFO     -   ✓ Validation passed
2025-10-29 13:52:24,350 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:24,350 - INFO     -     - Total states before merge: 71
2025-10-29 13:52:24,350 - INFO     -     - Num nodes: 5
2025-10-29 13:52:24,350 - INFO     -     - Num edges: 20
2025-10-29 13:52:24,350 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:24,350 - INFO     -       - Node 12: 4 states
2025-10-29 13:52:24,350 - INFO     -       - Node 11: 50 states
2025-10-29 13:52:24,351 - INFO     -       - Expected product: 200 states
2025-10-29 13:52:24,351 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:24,355 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:52:24,355 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:24,355 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:52:24,458 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:24,458 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:24,458 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:52:24,461 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:24,461 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:24,461 - INFO     -   Calling graph_tracker.merge_nodes([12, 11])...
2025-10-29 13:52:24,461 - INFO     - Attempting merge of nodes 12 and 11...
2025-10-29 13:52:24,461 - INFO     - Successfully merged nodes into new node 13 with 200 states.
2025-10-29 13:52:24,461 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:24,461 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:24,461 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:52:24,462 - INFO     - 
================================================================================
2025-10-29 13:52:24,462 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:52:24,462 - INFO     - ================================================================================
2025-10-29 13:52:24,462 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:24,462 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:52:24,462 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:52:24,463 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:24,463 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:24,463 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:52:24,463 - INFO     -   - Raw ts2_f length: 50
2025-10-29 13:52:24,463 - INFO     -   - Raw f_after length: 200
2025-10-29 13:52:24,464 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:24,464 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:52:24,464 - INFO     -   - ts2_valid: 50 / 50 (removed -50)
2025-10-29 13:52:24,464 - INFO     -   - after_valid: 200 / 200 (removed 0)
2025-10-29 13:52:24,464 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:24,464 - INFO     -   - ts1_id: 12
2025-10-29 13:52:24,464 - INFO     -   - ts2_id: 11
2025-10-29 13:52:24,464 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:24,464 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:24,464 - INFO     -   - ts1_size: 4, ts2_size: 50
2025-10-29 13:52:24,464 - INFO     -   - Product space size: 200
2025-10-29 13:52:24,464 - INFO     -   - Using product state mapping
2025-10-29 13:52:24,464 - INFO     -   - f_before_product length: 200
2025-10-29 13:52:24,466 - INFO     -   - avg_f_before: 6.1400 (200 valid states)
2025-10-29 13:52:24,466 - INFO     -   - avg_f_after:  8.0950 (200 valid states)
2025-10-29 13:52:24,466 - INFO     -   - delta: 1.9550
2025-10-29 13:52:24,467 - INFO     -   - f_stability: 1.0 - |1.9550| / 6.1400 = 0.6816
2025-10-29 13:52:24,467 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:24,467 - INFO     -   - Compared 54 values
2025-10-29 13:52:24,467 - INFO     -   - Significant changes (> 5.0): 5
2025-10-29 13:52:24,467 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:24,467 - INFO     -   - states_before: 200
2025-10-29 13:52:24,467 - INFO     -   - states_after: 200
2025-10-29 13:52:24,467 - INFO     -   - delta_states: 0
2025-10-29 13:52:24,467 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:24,467 - INFO     -   - ts1_transitions: 15
2025-10-29 13:52:24,467 - INFO     -   - ts2_transitions: 275
2025-10-29 13:52:24,467 - INFO     -   - merged_transitions: 1480
2025-10-29 13:52:24,467 - INFO     -   - transition_density_change: 5.9500
2025-10-29 13:52:24,467 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:24,467 - INFO     -   - search_signals present: True
2025-10-29 13:52:24,467 - INFO     -   - nodes_expanded: 200
2025-10-29 13:52:24,467 - INFO     -   - search_depth: 4
2025-10-29 13:52:24,467 - INFO     -   - solution_cost: 2
2025-10-29 13:52:24,467 - INFO     -   - branching_factor: 7.4000
2025-10-29 13:52:24,467 - INFO     -   - solution_found: True
2025-10-29 13:52:24,467 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:24,467 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:24,467 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:52:24,467 - INFO     -   - TS12(4) + TS11(50) → 200 states
2025-10-29 13:52:24,467 - INFO     -   - f_stability=0.682
2025-10-29 13:52:24,467 - INFO     -   - A* nodes_expanded=200
2025-10-29 13:52:24,467 - INFO     -   - solution_found=True
2025-10-29 13:52:24,467 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:24,467 - INFO     - 
  Extracted signals:
2025-10-29 13:52:24,467 - INFO     -     - iteration: 4
2025-10-29 13:52:24,467 - INFO     -     - states_before: 200
2025-10-29 13:52:24,467 - INFO     -     - states_after: 200
2025-10-29 13:52:24,467 - INFO     -     - delta_states: 0
2025-10-29 13:52:24,467 - INFO     -     - f_value_stability: 0.6816
2025-10-29 13:52:24,467 - INFO     -     - num_significant_f_changes: 5
2025-10-29 13:52:24,467 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:24,467 - INFO     -     - nodes_expanded: 200
2025-10-29 13:52:24,467 - INFO     -     - search_depth: 4
2025-10-29 13:52:24,467 - INFO     -     - solution_cost: 2
2025-10-29 13:52:24,467 - INFO     -     - branching_factor: 7.4000
2025-10-29 13:52:24,467 - INFO     -     - solution_found: True
2025-10-29 13:52:24,467 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:24,467 - INFO     - 
  Computing reward:
2025-10-29 13:52:24,467 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:24,467 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:24,467 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:24,467 - INFO     -   [1] BRANCHING FACTOR: 7.400 → score 0.160 (high BF, minimal credit)
2025-10-29 13:52:24,467 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:52:24,472 - INFO     -   [3] F-VALUE STABILITY: 0.747
2025-10-29 13:52:24,472 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:52:24,472 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:24,472 - INFO     - 
  [COMPOSITE]: 0.589
2025-10-29 13:52:24,473 - INFO     -     = 0.300*0.160 (bf)
2025-10-29 13:52:24,473 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:52:24,473 - INFO     -     + 0.350*0.747 (stability)
2025-10-29 13:52:24,474 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:24,474 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:24,474 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:24,475 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:52:24,475 - INFO     - 
  [FINAL REWARD]: 0.6773
2025-10-29 13:52:24,475 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:24,475 - INFO     -     ✓ Reward computed: 0.6773
2025-10-29 13:52:24,475 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:24,475 - INFO     -     - bf_score                       0.1600
2025-10-29 13:52:24,475 - INFO     -     - depth_score                    0.7953
2025-10-29 13:52:24,475 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:24,475 - INFO     -     - f_stability                    0.7474
2025-10-29 13:52:24,475 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:52:24,475 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:24,475 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:24,475 - INFO     -     - composite                      0.5887
2025-10-29 13:52:24,475 - INFO     -     - total                          0.6773
2025-10-29 13:52:24,475 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:24,475 - INFO     -   Num remaining nodes: 4
2025-10-29 13:52:24,475 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:52:24,475 - INFO     -   Done: False
2025-10-29 13:52:24,475 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:24,476 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:24,476 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:24,477 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:24,477 - INFO     -     - num_nodes: 4
2025-10-29 13:52:24,477 - INFO     -     - num_edges: 12
2025-10-29 13:52:24,477 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:24,477 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:52:24,477 - INFO     -   After: current_merge_step = 5
2025-10-29 13:52:24,477 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:24,477 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:24,477 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:24,477 - INFO     -   ✓ Step logged
2025-10-29 13:52:24,478 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:24,478 - INFO     -   Returning:
2025-10-29 13:52:24,478 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:24,478 - INFO     -     - reward: 0.6773
2025-10-29 13:52:24,478 - INFO     -     - done: False
2025-10-29 13:52:24,478 - INFO     -     - truncated: False
2025-10-29 13:52:24,478 - INFO     -     - info: 19 keys
2025-10-29 13:52:24,478 - INFO     - ==========================================================================================

2025-10-29 13:52:24,483 - INFO     - 
==========================================================================================
2025-10-29 13:52:24,483 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:24,483 - INFO     - ==========================================================================================
2025-10-29 13:52:24,483 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:24,483 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:52:24,483 - INFO     -   Available edges in graph: 12
2025-10-29 13:52:24,483 - INFO     -   Action index calculation:
2025-10-29 13:52:24,483 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 12 = 2
2025-10-29 13:52:24,483 - INFO     -     - clamped to [0, 11]: 2
2025-10-29 13:52:24,483 - INFO     -   ✓ Extracted merge pair from edge 2: (0, 13)
2025-10-29 13:52:24,483 - INFO     -   ✓ Validation passed
2025-10-29 13:52:24,483 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:24,483 - INFO     -     - Total states before merge: 217
2025-10-29 13:52:24,484 - INFO     -     - Num nodes: 4
2025-10-29 13:52:24,484 - INFO     -     - Num edges: 12
2025-10-29 13:52:24,484 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:24,484 - INFO     -       - Node 0: 2 states
2025-10-29 13:52:24,484 - INFO     -       - Node 13: 200 states
2025-10-29 13:52:24,485 - INFO     -       - Expected product: 400 states
2025-10-29 13:52:24,485 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:24,492 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:52:24,492 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:24,492 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:52:24,593 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:24,593 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:24,594 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:52:24,596 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:24,596 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:24,596 - INFO     -   Calling graph_tracker.merge_nodes([0, 13])...
2025-10-29 13:52:24,596 - INFO     - Attempting merge of nodes 0 and 13...
2025-10-29 13:52:24,596 - INFO     - Successfully merged nodes into new node 14 with 400 states.
2025-10-29 13:52:24,596 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:24,596 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:24,596 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:52:24,596 - INFO     - 
================================================================================
2025-10-29 13:52:24,596 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:52:24,596 - INFO     - ================================================================================
2025-10-29 13:52:24,596 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:24,596 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:52:24,596 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:52:24,596 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:24,596 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:24,596 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:24,596 - INFO     -   - Raw ts2_f length: 200
2025-10-29 13:52:24,596 - INFO     -   - Raw f_after length: 400
2025-10-29 13:52:24,596 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:24,596 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:24,596 - INFO     -   - ts2_valid: 200 / 200 (removed -200)
2025-10-29 13:52:24,596 - INFO     -   - after_valid: 357 / 400 (removed 43)
2025-10-29 13:52:24,596 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:24,596 - INFO     -   - ts1_id: 0
2025-10-29 13:52:24,596 - INFO     -   - ts2_id: 13
2025-10-29 13:52:24,596 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:24,596 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:24,596 - INFO     -   - ts1_size: 2, ts2_size: 200
2025-10-29 13:52:24,596 - INFO     -   - Product space size: 400
2025-10-29 13:52:24,596 - INFO     -   - Using product state mapping
2025-10-29 13:52:24,596 - INFO     -   - f_before_product length: 400
2025-10-29 13:52:24,602 - INFO     -   - avg_f_before: 8.0950 (400 valid states)
2025-10-29 13:52:24,602 - INFO     -   - avg_f_after:  8.3641 (357 valid states)
2025-10-29 13:52:24,602 - INFO     -   - delta: 0.2691
2025-10-29 13:52:24,602 - INFO     -   - f_stability: 1.0 - |0.2691| / 8.0950 = 0.9668
2025-10-29 13:52:24,602 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:24,602 - INFO     -   - Compared 202 values
2025-10-29 13:52:24,602 - INFO     -   - Significant changes (> 5.0): 32
2025-10-29 13:52:24,602 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:24,602 - INFO     -   - states_before: 400
2025-10-29 13:52:24,602 - INFO     -   - states_after: 400
2025-10-29 13:52:24,602 - INFO     -   - delta_states: 0
2025-10-29 13:52:24,602 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:24,602 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:24,602 - INFO     -   - ts2_transitions: 1480
2025-10-29 13:52:24,602 - INFO     -   - merged_transitions: 2880
2025-10-29 13:52:24,602 - INFO     -   - transition_density_change: 3.4875
2025-10-29 13:52:24,602 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:24,602 - INFO     -   - search_signals present: True
2025-10-29 13:52:24,602 - INFO     -   - nodes_expanded: 357
2025-10-29 13:52:24,602 - INFO     -   - search_depth: 4
2025-10-29 13:52:24,602 - INFO     -   - solution_cost: 2
2025-10-29 13:52:24,602 - INFO     -   - branching_factor: 8.0672
2025-10-29 13:52:24,602 - INFO     -   - solution_found: True
2025-10-29 13:52:24,602 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:24,605 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:24,605 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:52:24,605 - INFO     -   - TS0(2) + TS13(200) → 400 states
2025-10-29 13:52:24,605 - INFO     -   - f_stability=0.967
2025-10-29 13:52:24,606 - INFO     -   - A* nodes_expanded=357
2025-10-29 13:52:24,606 - INFO     -   - solution_found=True
2025-10-29 13:52:24,606 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:24,606 - INFO     - 
  Extracted signals:
2025-10-29 13:52:24,606 - INFO     -     - iteration: 5
2025-10-29 13:52:24,606 - INFO     -     - states_before: 400
2025-10-29 13:52:24,606 - INFO     -     - states_after: 400
2025-10-29 13:52:24,606 - INFO     -     - delta_states: 0
2025-10-29 13:52:24,606 - INFO     -     - f_value_stability: 0.9668
2025-10-29 13:52:24,606 - INFO     -     - num_significant_f_changes: 32
2025-10-29 13:52:24,606 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:24,606 - INFO     -     - nodes_expanded: 357
2025-10-29 13:52:24,606 - INFO     -     - search_depth: 4
2025-10-29 13:52:24,606 - INFO     -     - solution_cost: 2
2025-10-29 13:52:24,606 - INFO     -     - branching_factor: 8.0672
2025-10-29 13:52:24,606 - INFO     -     - solution_found: True
2025-10-29 13:52:24,606 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:24,606 - WARNING  -     ⚠️  High branching factor: 8.0672
2025-10-29 13:52:24,606 - INFO     - 
  Computing reward:
2025-10-29 13:52:24,606 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:24,606 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:24,606 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:24,606 - INFO     -   [1] BRANCHING FACTOR: 8.067 → score 0.100 (high BF, minimal credit)
2025-10-29 13:52:24,606 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:52:24,606 - INFO     -   [3] F-VALUE STABILITY: 0.991
2025-10-29 13:52:24,606 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:52:24,606 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:24,606 - INFO     - 
  [COMPOSITE]: 0.656
2025-10-29 13:52:24,606 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:52:24,606 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:52:24,616 - INFO     -     + 0.350*0.991 (stability)
2025-10-29 13:52:24,616 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:24,617 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:24,617 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:24,617 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:52:24,617 - INFO     - 
  [FINAL REWARD]: 0.8122
2025-10-29 13:52:24,617 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:24,617 - INFO     -     ✓ Reward computed: 0.8122
2025-10-29 13:52:24,617 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:24,618 - INFO     -     - bf_score                       0.1000
2025-10-29 13:52:24,618 - INFO     -     - depth_score                    0.7953
2025-10-29 13:52:24,618 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:24,618 - INFO     -     - f_stability                    0.9915
2025-10-29 13:52:24,618 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:52:24,618 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:24,618 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:24,618 - INFO     -     - composite                      0.6561
2025-10-29 13:52:24,618 - INFO     -     - total                          0.8122
2025-10-29 13:52:24,618 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:24,618 - INFO     -   Num remaining nodes: 3
2025-10-29 13:52:24,618 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:52:24,618 - INFO     -   Done: False
2025-10-29 13:52:24,618 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:24,618 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:24,618 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:24,618 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:24,618 - INFO     -     - num_nodes: 3
2025-10-29 13:52:24,618 - INFO     -     - num_edges: 6
2025-10-29 13:52:24,618 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:24,618 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:52:24,618 - INFO     -   After: current_merge_step = 6
2025-10-29 13:52:24,618 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:24,618 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:24,618 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:24,618 - INFO     -   ✓ Step logged
2025-10-29 13:52:24,618 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:24,618 - INFO     -   Returning:
2025-10-29 13:52:24,618 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:24,618 - INFO     -     - reward: 0.8122
2025-10-29 13:52:24,618 - INFO     -     - done: False
2025-10-29 13:52:24,618 - INFO     -     - truncated: False
2025-10-29 13:52:24,622 - INFO     -     - info: 19 keys
2025-10-29 13:52:24,622 - INFO     - ==========================================================================================

2025-10-29 13:52:24,626 - INFO     - 
==========================================================================================
2025-10-29 13:52:24,626 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:24,626 - INFO     - ==========================================================================================
2025-10-29 13:52:24,626 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:24,626 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:52:24,626 - INFO     -   Available edges in graph: 6
2025-10-29 13:52:24,626 - INFO     -   Action index calculation:
2025-10-29 13:52:24,626 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 6 = 1
2025-10-29 13:52:24,626 - INFO     -     - clamped to [0, 5]: 1
2025-10-29 13:52:24,626 - INFO     -   ✓ Extracted merge pair from edge 1: (6, 14)
2025-10-29 13:52:24,626 - INFO     -   ✓ Validation passed
2025-10-29 13:52:24,626 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:24,626 - INFO     -     - Total states before merge: 415
2025-10-29 13:52:24,626 - INFO     -     - Num nodes: 3
2025-10-29 13:52:24,626 - INFO     -     - Num edges: 6
2025-10-29 13:52:24,626 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:24,626 - INFO     -       - Node 6: 5 states
2025-10-29 13:52:24,626 - INFO     -       - Node 14: 400 states
2025-10-29 13:52:24,626 - INFO     -       - Expected product: 2000 states
2025-10-29 13:52:24,626 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:24,635 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:52:24,635 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:24,635 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:52:24,737 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:24,737 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:24,737 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:52:24,741 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:24,741 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:24,741 - INFO     -   Calling graph_tracker.merge_nodes([6, 14])...
2025-10-29 13:52:24,741 - INFO     - Attempting merge of nodes 6 and 14...
2025-10-29 13:52:24,741 - INFO     - Successfully merged nodes into new node 15 with 2000 states.
2025-10-29 13:52:24,741 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:24,741 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:24,741 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:52:24,741 - INFO     - 
================================================================================
2025-10-29 13:52:24,741 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:52:24,741 - INFO     - ================================================================================
2025-10-29 13:52:24,741 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:24,741 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:52:24,749 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:52:24,749 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:24,749 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:24,749 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:24,749 - INFO     -   - Raw ts2_f length: 357
2025-10-29 13:52:24,749 - INFO     -   - Raw f_after length: 1785
2025-10-29 13:52:24,749 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:24,749 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:24,749 - INFO     -   - ts2_valid: 357 / 357 (removed -357)
2025-10-29 13:52:24,749 - INFO     -   - after_valid: 1619 / 1785 (removed 166)
2025-10-29 13:52:24,749 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:24,749 - INFO     -   - ts1_id: 6
2025-10-29 13:52:24,749 - INFO     -   - ts2_id: 14
2025-10-29 13:52:24,749 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:24,749 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:24,749 - INFO     -   - ts1_size: 5, ts2_size: 357
2025-10-29 13:52:24,749 - INFO     -   - Product space size: 1785
2025-10-29 13:52:24,749 - INFO     -   - Using product state mapping
2025-10-29 13:52:24,749 - INFO     -   - f_before_product length: 1785
2025-10-29 13:52:24,757 - INFO     -   - avg_f_before: 8.3961 (1785 valid states)
2025-10-29 13:52:24,757 - INFO     -   - avg_f_after:  12.0914 (1619 valid states)
2025-10-29 13:52:24,757 - INFO     -   - delta: 3.6953
2025-10-29 13:52:24,757 - INFO     -   - f_stability: 1.0 - |3.6953| / 8.3961 = 0.5599
2025-10-29 13:52:24,757 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:24,760 - INFO     -   - Compared 362 values
2025-10-29 13:52:24,760 - INFO     -   - Significant changes (> 5.0): 88
2025-10-29 13:52:24,760 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:24,760 - INFO     -   - states_before: 1785
2025-10-29 13:52:24,760 - INFO     -   - states_after: 1785
2025-10-29 13:52:24,760 - INFO     -   - delta_states: 0
2025-10-29 13:52:24,760 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:24,760 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:24,760 - INFO     -   - ts2_transitions: 2648
2025-10-29 13:52:24,761 - INFO     -   - merged_transitions: 9701
2025-10-29 13:52:24,761 - INFO     -   - transition_density_change: 3.9440
2025-10-29 13:52:24,761 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:24,761 - INFO     -   - search_signals present: True
2025-10-29 13:52:24,761 - INFO     -   - nodes_expanded: 1619
2025-10-29 13:52:24,761 - INFO     -   - search_depth: 5
2025-10-29 13:52:24,761 - INFO     -   - solution_cost: 2
2025-10-29 13:52:24,761 - INFO     -   - branching_factor: 5.9920
2025-10-29 13:52:24,761 - INFO     -   - solution_found: True
2025-10-29 13:52:24,761 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:24,761 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:24,761 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:52:24,761 - INFO     -   - TS6(5) + TS14(357) → 1785 states
2025-10-29 13:52:24,761 - INFO     -   - f_stability=0.560
2025-10-29 13:52:24,761 - INFO     -   - A* nodes_expanded=1619
2025-10-29 13:52:24,761 - INFO     -   - solution_found=True
2025-10-29 13:52:24,761 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:24,761 - INFO     - 
  Extracted signals:
2025-10-29 13:52:24,761 - INFO     -     - iteration: 6
2025-10-29 13:52:24,761 - INFO     -     - states_before: 1785
2025-10-29 13:52:24,761 - INFO     -     - states_after: 1785
2025-10-29 13:52:24,761 - INFO     -     - delta_states: 0
2025-10-29 13:52:24,761 - INFO     -     - f_value_stability: 0.5599
2025-10-29 13:52:24,761 - INFO     -     - num_significant_f_changes: 88
2025-10-29 13:52:24,761 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:24,761 - INFO     -     - nodes_expanded: 1619
2025-10-29 13:52:24,761 - INFO     -     - search_depth: 5
2025-10-29 13:52:24,761 - INFO     -     - solution_cost: 2
2025-10-29 13:52:24,765 - INFO     -     - branching_factor: 5.9920
2025-10-29 13:52:24,765 - INFO     -     - solution_found: True
2025-10-29 13:52:24,765 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:24,765 - INFO     - 
  Computing reward:
2025-10-29 13:52:24,765 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:24,765 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:24,765 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:24,765 - INFO     -   [1] BRANCHING FACTOR: 5.992 → score 0.301 (tolerable)
2025-10-29 13:52:24,765 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:52:24,765 - INFO     -   [3] F-VALUE STABILITY: 0.584
2025-10-29 13:52:24,765 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:52:24,765 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:24,765 - INFO     - 
  [COMPOSITE]: 0.569
2025-10-29 13:52:24,765 - INFO     -     = 0.300*0.301 (bf)
2025-10-29 13:52:24,765 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:52:24,765 - INFO     -     + 0.350*0.584 (stability)
2025-10-29 13:52:24,765 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:24,765 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:24,765 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:24,765 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:52:24,770 - INFO     - 
  [FINAL REWARD]: 0.5385
2025-10-29 13:52:24,770 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:24,770 - INFO     -     ✓ Reward computed: 0.5385
2025-10-29 13:52:24,770 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:24,770 - INFO     -     - bf_score                       0.3011
2025-10-29 13:52:24,770 - INFO     -     - depth_score                    0.7721
2025-10-29 13:52:24,770 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:24,770 - INFO     -     - f_stability                    0.5843
2025-10-29 13:52:24,770 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:52:24,770 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:24,770 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:24,770 - INFO     -     - composite                      0.5693
2025-10-29 13:52:24,770 - INFO     -     - total                          0.5385
2025-10-29 13:52:24,770 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:24,770 - INFO     -   Num remaining nodes: 2
2025-10-29 13:52:24,770 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:52:24,770 - INFO     -   Done: False
2025-10-29 13:52:24,770 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:24,770 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:24,772 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:24,772 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:24,772 - INFO     -     - num_nodes: 2
2025-10-29 13:52:24,772 - INFO     -     - num_edges: 2
2025-10-29 13:52:24,772 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:24,772 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:52:24,772 - INFO     -   After: current_merge_step = 7
2025-10-29 13:52:24,772 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:24,772 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:24,772 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:24,773 - INFO     -   ✓ Step logged
2025-10-29 13:52:24,773 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:24,773 - INFO     -   Returning:
2025-10-29 13:52:24,773 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:24,773 - INFO     -     - reward: 0.5385
2025-10-29 13:52:24,773 - INFO     -     - done: False
2025-10-29 13:52:24,773 - INFO     -     - truncated: False
2025-10-29 13:52:24,773 - INFO     -     - info: 19 keys
2025-10-29 13:52:24,773 - INFO     - ==========================================================================================

2025-10-29 13:52:24,774 - INFO     - 
==========================================================================================
2025-10-29 13:52:24,774 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:24,774 - INFO     - ==========================================================================================
2025-10-29 13:52:24,774 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:24,774 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:52:24,774 - INFO     -   Available edges in graph: 2
2025-10-29 13:52:24,774 - INFO     -   Action index calculation:
2025-10-29 13:52:24,774 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 2 = 1
2025-10-29 13:52:24,774 - INFO     -     - clamped to [0, 1]: 1
2025-10-29 13:52:24,774 - INFO     -   ✓ Extracted merge pair from edge 1: (15, 10)
2025-10-29 13:52:24,774 - INFO     -   ✓ Validation passed
2025-10-29 13:52:24,774 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:24,774 - INFO     -     - Total states before merge: 2010
2025-10-29 13:52:24,774 - INFO     -     - Num nodes: 2
2025-10-29 13:52:24,774 - INFO     -     - Num edges: 2
2025-10-29 13:52:24,774 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:24,779 - INFO     -       - Node 15: 2000 states
2025-10-29 13:52:24,779 - INFO     -       - Node 10: 10 states
2025-10-29 13:52:24,779 - INFO     -       - Expected product: 20000 states
2025-10-29 13:52:24,779 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:24,786 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:52:24,786 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:24,786 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:52:24,887 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:24,887 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:24,887 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:52:25,133 - INFO     -   ✓ TS file received after 0.25s
2025-10-29 13:52:25,133 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:25,133 - INFO     -   Calling graph_tracker.merge_nodes([15, 10])...
2025-10-29 13:52:25,133 - INFO     - Attempting merge of nodes 15 and 10...
2025-10-29 13:52:25,142 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:52:25,142 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:25,142 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:25,142 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:52:25,142 - INFO     - 
================================================================================
2025-10-29 13:52:25,142 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:52:25,142 - INFO     - ================================================================================
2025-10-29 13:52:25,142 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:25,142 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:52:25,142 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:52:25,151 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:25,151 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:25,151 - INFO     -   - Raw ts1_f length: 354
2025-10-29 13:52:25,151 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:52:25,151 - INFO     -   - Raw f_after length: 3540
2025-10-29 13:52:25,151 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:25,151 - INFO     -   - ts1_valid: 354 / 354 (removed 0)
2025-10-29 13:52:25,151 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:52:25,151 - INFO     -   - after_valid: 2561 / 3540 (removed 979)
2025-10-29 13:52:25,151 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:25,151 - INFO     -   - ts1_id: 15
2025-10-29 13:52:25,151 - INFO     -   - ts2_id: 10
2025-10-29 13:52:25,151 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:25,151 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:25,151 - INFO     -   - ts1_size: 354, ts2_size: 10
2025-10-29 13:52:25,151 - INFO     -   - Product space size: 3540
2025-10-29 13:52:25,151 - INFO     -   - Using product state mapping
2025-10-29 13:52:25,157 - INFO     -   - f_before_product length: 3540
2025-10-29 13:52:25,170 - INFO     -   - avg_f_before: 7.2356 (3540 valid states)
2025-10-29 13:52:25,170 - INFO     -   - avg_f_after:  11.6474 (2561 valid states)
2025-10-29 13:52:25,170 - INFO     -   - delta: 4.4118
2025-10-29 13:52:25,170 - INFO     -   - f_stability: 1.0 - |4.4118| / 7.2356 = 0.3903
2025-10-29 13:52:25,170 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:25,170 - INFO     -   - Compared 364 values
2025-10-29 13:52:25,175 - INFO     -   - Significant changes (> 5.0): 97
2025-10-29 13:52:25,175 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:25,175 - INFO     -   - states_before: 3540
2025-10-29 13:52:25,175 - INFO     -   - states_after: 3540
2025-10-29 13:52:25,175 - INFO     -   - delta_states: 0
2025-10-29 13:52:25,175 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:25,175 - INFO     -   - ts1_transitions: 3212
2025-10-29 13:52:25,175 - INFO     -   - ts2_transitions: 40
2025-10-29 13:52:25,175 - INFO     -   - merged_transitions: 19135
2025-10-29 13:52:25,175 - INFO     -   - transition_density_change: 4.4867
2025-10-29 13:52:25,175 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:25,175 - INFO     -   - search_signals present: True
2025-10-29 13:52:25,175 - INFO     -   - nodes_expanded: 2561
2025-10-29 13:52:25,175 - INFO     -   - search_depth: 5
2025-10-29 13:52:25,175 - INFO     -   - solution_cost: 4
2025-10-29 13:52:25,175 - INFO     -   - branching_factor: 7.4717
2025-10-29 13:52:25,175 - INFO     -   - solution_found: True
2025-10-29 13:52:25,175 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:25,175 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:25,175 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:52:25,175 - INFO     -   - TS15(354) + TS10(10) → 3540 states
2025-10-29 13:52:25,175 - INFO     -   - f_stability=0.390
2025-10-29 13:52:25,175 - INFO     -   - A* nodes_expanded=2561
2025-10-29 13:52:25,175 - INFO     -   - solution_found=True
2025-10-29 13:52:25,175 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:25,175 - INFO     - 
  Extracted signals:
2025-10-29 13:52:25,175 - INFO     -     - iteration: 7
2025-10-29 13:52:25,175 - INFO     -     - states_before: 3540
2025-10-29 13:52:25,175 - INFO     -     - states_after: 3540
2025-10-29 13:52:25,175 - INFO     -     - delta_states: 0
2025-10-29 13:52:25,175 - INFO     -     - f_value_stability: 0.3903
2025-10-29 13:52:25,175 - INFO     -     - num_significant_f_changes: 97
2025-10-29 13:52:25,175 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:25,175 - INFO     -     - nodes_expanded: 2561
2025-10-29 13:52:25,175 - INFO     -     - search_depth: 5
2025-10-29 13:52:25,175 - INFO     -     - solution_cost: 4
2025-10-29 13:52:25,175 - INFO     -     - branching_factor: 7.4717
2025-10-29 13:52:25,175 - INFO     -     - solution_found: True
2025-10-29 13:52:25,175 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:25,175 - INFO     - 
  Computing reward:
2025-10-29 13:52:25,175 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:25,175 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:25,175 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:25,180 - INFO     -   [1] BRANCHING FACTOR: 7.472 → score 0.153 (high BF, minimal credit)
2025-10-29 13:52:25,180 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:52:25,182 - INFO     -   [3] F-VALUE STABILITY: 0.442
2025-10-29 13:52:25,182 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:52:25,182 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:25,182 - INFO     - 
  [COMPOSITE]: 0.475
2025-10-29 13:52:25,182 - INFO     -     = 0.300*0.153 (bf)
2025-10-29 13:52:25,182 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:52:25,182 - INFO     -     + 0.350*0.442 (stability)
2025-10-29 13:52:25,182 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:25,182 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:25,182 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:25,182 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:52:25,183 - INFO     - 
  [FINAL REWARD]: 0.2498
2025-10-29 13:52:25,183 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:25,183 - INFO     -     ✓ Reward computed: 0.2498
2025-10-29 13:52:25,183 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:25,183 - INFO     -     - bf_score                       0.1528
2025-10-29 13:52:25,183 - INFO     -     - depth_score                    0.7721
2025-10-29 13:52:25,183 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:25,183 - INFO     -     - f_stability                    0.4418
2025-10-29 13:52:25,183 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:52:25,183 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:25,183 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:25,183 - INFO     -     - composite                      0.4749
2025-10-29 13:52:25,183 - INFO     -     - total                          0.2498
2025-10-29 13:52:25,183 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:25,183 - INFO     -   Num remaining nodes: 1
2025-10-29 13:52:25,183 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:52:25,183 - INFO     -   Done: True
2025-10-29 13:52:25,183 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:52:25,183 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:25,183 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:25,183 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:25,183 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:25,183 - INFO     -     - num_nodes: 1
2025-10-29 13:52:25,183 - INFO     -     - num_edges: 0
2025-10-29 13:52:25,183 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:25,183 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:52:25,183 - INFO     -   After: current_merge_step = 8
2025-10-29 13:52:25,183 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:25,183 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:25,183 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:25,183 - INFO     -   ✓ Step logged
2025-10-29 13:52:25,183 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:25,183 - INFO     -   Returning:
2025-10-29 13:52:25,183 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:25,183 - INFO     -     - reward: 0.2498
2025-10-29 13:52:25,183 - INFO     -     - done: True
2025-10-29 13:52:25,183 - INFO     -     - truncated: False
2025-10-29 13:52:25,183 - INFO     -     - info: 19 keys
2025-10-29 13:52:25,183 - INFO     - ==========================================================================================

2025-10-29 13:52:25,288 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:52:25,301 - INFO     - [Handshake] Building FD command:
2025-10-29 13:52:25,301 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:52:25,301 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_02.pddl
2025-10-29 13:52:25,301 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:52:25,305 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:52:26,060 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:52:26,060 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:52:26,060 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:52:26,394 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:52:26,394 - INFO     - Initializing GraphTracker...
2025-10-29 13:52:26,394 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:52:26,394 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:52:26,394 - INFO     -    → Node 0 has 2 states
2025-10-29 13:52:26,394 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:52:26,394 - INFO     -    → Node 1 has 2 states
2025-10-29 13:52:26,394 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:52:26,394 - INFO     -    → Node 2 has 2 states
2025-10-29 13:52:26,394 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:52:26,394 - INFO     -    → Node 3 has 2 states
2025-10-29 13:52:26,394 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:52:26,394 - INFO     -    → Node 4 has 2 states
2025-10-29 13:52:26,394 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:52:26,394 - INFO     -    → Node 5 has 5 states
2025-10-29 13:52:26,398 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:52:26,398 - INFO     -    → Node 6 has 5 states
2025-10-29 13:52:26,398 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:52:26,398 - INFO     -    → Node 7 has 5 states
2025-10-29 13:52:26,398 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:52:26,398 - INFO     -    → Node 8 has 5 states
2025-10-29 13:52:26,398 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:52:26,398 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:52:26,398 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:52:26,398 - INFO     - Added edge (0, 1)
2025-10-29 13:52:26,398 - INFO     - Added edge (0, 2)
2025-10-29 13:52:26,398 - INFO     - Added edge (0, 3)
2025-10-29 13:52:26,398 - INFO     - Added edge (0, 4)
2025-10-29 13:52:26,398 - INFO     - Added edge (0, 5)
2025-10-29 13:52:26,398 - INFO     - Added edge (0, 6)
2025-10-29 13:52:26,398 - INFO     - Added edge (0, 7)
2025-10-29 13:52:26,398 - INFO     - Added edge (0, 8)
2025-10-29 13:52:26,398 - INFO     - Added edge (1, 0)
2025-10-29 13:52:26,398 - INFO     - Added edge (1, 2)
2025-10-29 13:52:26,398 - INFO     - Added edge (1, 3)
2025-10-29 13:52:26,398 - INFO     - Added edge (1, 4)
2025-10-29 13:52:26,398 - INFO     - Added edge (1, 5)
2025-10-29 13:52:26,398 - INFO     - Added edge (1, 6)
2025-10-29 13:52:26,398 - INFO     - Added edge (1, 7)
2025-10-29 13:52:26,398 - INFO     - Added edge (1, 8)
2025-10-29 13:52:26,398 - INFO     - Added edge (2, 0)
2025-10-29 13:52:26,398 - INFO     - Added edge (2, 1)
2025-10-29 13:52:26,398 - INFO     - Added edge (2, 3)
2025-10-29 13:52:26,398 - INFO     - Added edge (2, 4)
2025-10-29 13:52:26,398 - INFO     - Added edge (2, 5)
2025-10-29 13:52:26,398 - INFO     - Added edge (2, 6)
2025-10-29 13:52:26,398 - INFO     - Added edge (2, 7)
2025-10-29 13:52:26,398 - INFO     - Added edge (2, 8)
2025-10-29 13:52:26,398 - INFO     - Added edge (3, 0)
2025-10-29 13:52:26,398 - INFO     - Added edge (3, 1)
2025-10-29 13:52:26,398 - INFO     - Added edge (3, 2)
2025-10-29 13:52:26,398 - INFO     - Added edge (3, 4)
2025-10-29 13:52:26,398 - INFO     - Added edge (3, 5)
2025-10-29 13:52:26,405 - INFO     - Added edge (3, 6)
2025-10-29 13:52:26,405 - INFO     - Added edge (3, 7)
2025-10-29 13:52:26,405 - INFO     - Added edge (3, 8)
2025-10-29 13:52:26,405 - INFO     - Added edge (4, 0)
2025-10-29 13:52:26,405 - INFO     - Added edge (4, 1)
2025-10-29 13:52:26,405 - INFO     - Added edge (4, 2)
2025-10-29 13:52:26,405 - INFO     - Added edge (4, 3)
2025-10-29 13:52:26,405 - INFO     - Added edge (4, 5)
2025-10-29 13:52:26,405 - INFO     - Added edge (4, 6)
2025-10-29 13:52:26,407 - INFO     - Added edge (4, 7)
2025-10-29 13:52:26,407 - INFO     - Added edge (4, 8)
2025-10-29 13:52:26,407 - INFO     - Added edge (5, 0)
2025-10-29 13:52:26,407 - INFO     - Added edge (5, 1)
2025-10-29 13:52:26,407 - INFO     - Added edge (5, 2)
2025-10-29 13:52:26,407 - INFO     - Added edge (5, 3)
2025-10-29 13:52:26,407 - INFO     - Added edge (5, 4)
2025-10-29 13:52:26,407 - INFO     - Added edge (6, 0)
2025-10-29 13:52:26,407 - INFO     - Added edge (6, 1)
2025-10-29 13:52:26,407 - INFO     - Added edge (6, 2)
2025-10-29 13:52:26,407 - INFO     - Added edge (6, 3)
2025-10-29 13:52:26,407 - INFO     - Added edge (6, 4)
2025-10-29 13:52:26,407 - INFO     - Added edge (7, 0)
2025-10-29 13:52:26,407 - INFO     - Added edge (7, 1)
2025-10-29 13:52:26,407 - INFO     - Added edge (7, 2)
2025-10-29 13:52:26,407 - INFO     - Added edge (7, 3)
2025-10-29 13:52:26,407 - INFO     - Added edge (7, 4)
2025-10-29 13:52:26,407 - INFO     - Added edge (8, 0)
2025-10-29 13:52:26,407 - INFO     - Added edge (8, 1)
2025-10-29 13:52:26,407 - INFO     - Added edge (8, 2)
2025-10-29 13:52:26,407 - INFO     - Added edge (8, 3)
2025-10-29 13:52:26,407 - INFO     - Added edge (8, 4)
2025-10-29 13:52:26,407 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:52:26,422 - INFO     - 
==========================================================================================
2025-10-29 13:52:26,422 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:26,422 - INFO     - ==========================================================================================
2025-10-29 13:52:26,422 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:26,422 - INFO     -   Input action: 28 (type: int)
2025-10-29 13:52:26,422 - INFO     -   Available edges in graph: 60
2025-10-29 13:52:26,422 - INFO     -   Action index calculation:
2025-10-29 13:52:26,422 - INFO     -     - action % max(num_valid_edges, 1) = 28 % 60 = 28
2025-10-29 13:52:26,422 - INFO     -     - clamped to [0, 59]: 28
2025-10-29 13:52:26,426 - INFO     -   ✓ Extracted merge pair from edge 28: (3, 5)
2025-10-29 13:52:26,426 - INFO     -   ✓ Validation passed
2025-10-29 13:52:26,426 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:26,426 - INFO     -     - Total states before merge: 30
2025-10-29 13:52:26,426 - INFO     -     - Num nodes: 9
2025-10-29 13:52:26,426 - INFO     -     - Num edges: 60
2025-10-29 13:52:26,426 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:26,426 - INFO     -       - Node 3: 2 states
2025-10-29 13:52:26,426 - INFO     -       - Node 5: 5 states
2025-10-29 13:52:26,426 - INFO     -       - Expected product: 10 states
2025-10-29 13:52:26,426 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:26,434 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:52:26,434 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:26,434 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:52:26,536 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:26,537 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:26,537 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:52:26,537 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:26,538 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:26,538 - INFO     -   Calling graph_tracker.merge_nodes([3, 5])...
2025-10-29 13:52:26,538 - INFO     - Attempting merge of nodes 3 and 5...
2025-10-29 13:52:26,538 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:52:26,538 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:26,538 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:26,538 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:52:26,538 - INFO     - 
================================================================================
2025-10-29 13:52:26,538 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:52:26,538 - INFO     - ================================================================================
2025-10-29 13:52:26,538 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:26,538 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:52:26,538 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:52:26,540 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:26,540 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:26,540 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:26,540 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:26,540 - INFO     -   - Raw f_after length: 10
2025-10-29 13:52:26,540 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:26,540 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:26,540 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:26,540 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:52:26,540 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:26,540 - INFO     -   - ts1_id: 3
2025-10-29 13:52:26,540 - INFO     -   - ts2_id: 5
2025-10-29 13:52:26,540 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:26,540 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:26,540 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:52:26,540 - INFO     -   - Product space size: 10
2025-10-29 13:52:26,540 - INFO     -   - Using product state mapping
2025-10-29 13:52:26,540 - INFO     -   - f_before_product length: 10
2025-10-29 13:52:26,540 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:52:26,540 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:52:26,540 - INFO     -   - delta: 0.5000
2025-10-29 13:52:26,540 - INFO     -   - f_stability: 1.0 - |0.5000| / 2.8000 = 0.8214
2025-10-29 13:52:26,540 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:26,542 - INFO     -   - Compared 7 values
2025-10-29 13:52:26,542 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:26,542 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:26,542 - INFO     -   - states_before: 10
2025-10-29 13:52:26,542 - INFO     -   - states_after: 10
2025-10-29 13:52:26,542 - INFO     -   - delta_states: 0
2025-10-29 13:52:26,542 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:26,542 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:26,542 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:26,542 - INFO     -   - merged_transitions: 40
2025-10-29 13:52:26,542 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:52:26,542 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:26,544 - INFO     -   - search_signals present: True
2025-10-29 13:52:26,544 - INFO     -   - nodes_expanded: 10
2025-10-29 13:52:26,544 - INFO     -   - search_depth: 1
2025-10-29 13:52:26,544 - INFO     -   - solution_cost: 2
2025-10-29 13:52:26,544 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:52:26,544 - INFO     -   - solution_found: True
2025-10-29 13:52:26,544 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:26,544 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:26,544 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:52:26,546 - INFO     -   - TS3(2) + TS5(5) → 10 states
2025-10-29 13:52:26,546 - INFO     -   - f_stability=0.821
2025-10-29 13:52:26,546 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:52:26,546 - INFO     -   - solution_found=True
2025-10-29 13:52:26,546 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:26,546 - INFO     - 
  Extracted signals:
2025-10-29 13:52:26,546 - INFO     -     - iteration: 0
2025-10-29 13:52:26,546 - INFO     -     - states_before: 10
2025-10-29 13:52:26,546 - INFO     -     - states_after: 10
2025-10-29 13:52:26,546 - INFO     -     - delta_states: 0
2025-10-29 13:52:26,546 - INFO     -     - f_value_stability: 0.8214
2025-10-29 13:52:26,546 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:26,546 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:26,546 - INFO     -     - nodes_expanded: 10
2025-10-29 13:52:26,546 - INFO     -     - search_depth: 1
2025-10-29 13:52:26,546 - INFO     -     - solution_cost: 2
2025-10-29 13:52:26,546 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:52:26,546 - INFO     -     - solution_found: True
2025-10-29 13:52:26,546 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:26,548 - INFO     - 
  Computing reward:
2025-10-29 13:52:26,548 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:26,548 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:26,548 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:26,548 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:52:26,548 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:52:26,549 - INFO     -   [3] F-VALUE STABILITY: 0.593
2025-10-29 13:52:26,549 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:52:26,549 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:26,549 - INFO     - 
  [COMPOSITE]: 0.680
2025-10-29 13:52:26,549 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:52:26,549 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:52:26,549 - INFO     -     + 0.350*0.593 (stability)
2025-10-29 13:52:26,549 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:26,549 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:26,549 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:26,549 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:52:26,550 - INFO     - 
  [FINAL REWARD]: 0.7602
2025-10-29 13:52:26,550 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:26,550 - INFO     -     ✓ Reward computed: 0.7602
2025-10-29 13:52:26,550 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:26,550 - INFO     -     - bf_score                       0.5667
2025-10-29 13:52:26,550 - INFO     -     - depth_score                    0.9119
2025-10-29 13:52:26,550 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:26,550 - INFO     -     - f_stability                    0.5935
2025-10-29 13:52:26,550 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:52:26,550 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:26,550 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:26,550 - INFO     -     - composite                      0.6801
2025-10-29 13:52:26,550 - INFO     -     - total                          0.7602
2025-10-29 13:52:26,560 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:26,560 - INFO     -   Num remaining nodes: 8
2025-10-29 13:52:26,560 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:52:26,560 - INFO     -   Done: False
2025-10-29 13:52:26,560 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:26,561 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:26,561 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:26,561 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:26,563 - INFO     -     - num_nodes: 8
2025-10-29 13:52:26,565 - INFO     -     - num_edges: 50
2025-10-29 13:52:26,565 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:26,565 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:52:26,565 - INFO     -   After: current_merge_step = 1
2025-10-29 13:52:26,565 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:26,565 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:26,565 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:26,569 - INFO     -   ✓ Step logged
2025-10-29 13:52:26,569 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:26,569 - INFO     -   Returning:
2025-10-29 13:52:26,569 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:26,569 - INFO     -     - reward: 0.7602
2025-10-29 13:52:26,569 - INFO     -     - done: False
2025-10-29 13:52:26,569 - INFO     -     - truncated: False
2025-10-29 13:52:26,569 - INFO     -     - info: 19 keys
2025-10-29 13:52:26,569 - INFO     - ==========================================================================================

2025-10-29 13:52:26,634 - INFO     - 
==========================================================================================
2025-10-29 13:52:26,634 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:26,634 - INFO     - ==========================================================================================
2025-10-29 13:52:26,634 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:26,634 - INFO     -   Input action: 6 (type: int)
2025-10-29 13:52:26,634 - INFO     -   Available edges in graph: 50
2025-10-29 13:52:26,634 - INFO     -   Action index calculation:
2025-10-29 13:52:26,634 - INFO     -     - action % max(num_valid_edges, 1) = 6 % 50 = 6
2025-10-29 13:52:26,636 - INFO     -     - clamped to [0, 49]: 6
2025-10-29 13:52:26,636 - INFO     -   ✓ Extracted merge pair from edge 6: (0, 9)
2025-10-29 13:52:26,636 - INFO     -   ✓ Validation passed
2025-10-29 13:52:26,636 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:26,636 - INFO     -     - Total states before merge: 33
2025-10-29 13:52:26,636 - INFO     -     - Num nodes: 8
2025-10-29 13:52:26,636 - INFO     -     - Num edges: 50
2025-10-29 13:52:26,636 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:26,636 - INFO     -       - Node 0: 2 states
2025-10-29 13:52:26,636 - INFO     -       - Node 9: 10 states
2025-10-29 13:52:26,636 - INFO     -       - Expected product: 20 states
2025-10-29 13:52:26,636 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:26,643 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:52:26,643 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:26,643 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:52:26,748 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:26,748 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:26,748 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:52:26,750 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:26,750 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:26,752 - INFO     -   Calling graph_tracker.merge_nodes([0, 9])...
2025-10-29 13:52:26,752 - INFO     - Attempting merge of nodes 0 and 9...
2025-10-29 13:52:26,753 - INFO     - Successfully merged nodes into new node 10 with 20 states.
2025-10-29 13:52:26,753 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:26,753 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:26,753 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:52:26,753 - INFO     - 
================================================================================
2025-10-29 13:52:26,754 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:52:26,754 - INFO     - ================================================================================
2025-10-29 13:52:26,754 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:26,754 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:52:26,754 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:52:26,754 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:26,754 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:26,754 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:26,754 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:52:26,754 - INFO     -   - Raw f_after length: 20
2025-10-29 13:52:26,754 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:26,754 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:26,754 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:52:26,756 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:52:26,756 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:26,756 - INFO     -   - ts1_id: 0
2025-10-29 13:52:26,758 - INFO     -   - ts2_id: 9
2025-10-29 13:52:26,758 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:26,758 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:26,758 - INFO     -   - ts1_size: 2, ts2_size: 10
2025-10-29 13:52:26,758 - INFO     -   - Product space size: 20
2025-10-29 13:52:26,758 - INFO     -   - Using product state mapping
2025-10-29 13:52:26,758 - INFO     -   - f_before_product length: 20
2025-10-29 13:52:26,760 - INFO     -   - avg_f_before: 3.3000 (20 valid states)
2025-10-29 13:52:26,760 - INFO     -   - avg_f_after:  4.0000 (20 valid states)
2025-10-29 13:52:26,760 - INFO     -   - delta: 0.7000
2025-10-29 13:52:26,762 - INFO     -   - f_stability: 1.0 - |0.7000| / 3.3000 = 0.7879
2025-10-29 13:52:26,762 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:26,762 - INFO     -   - Compared 12 values
2025-10-29 13:52:26,762 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:26,762 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:26,762 - INFO     -   - states_before: 20
2025-10-29 13:52:26,762 - INFO     -   - states_after: 20
2025-10-29 13:52:26,762 - INFO     -   - delta_states: 0
2025-10-29 13:52:26,762 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:26,762 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:26,762 - INFO     -   - ts2_transitions: 40
2025-10-29 13:52:26,764 - INFO     -   - merged_transitions: 122
2025-10-29 13:52:26,764 - INFO     -   - transition_density_change: 3.8500
2025-10-29 13:52:26,764 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:26,764 - INFO     -   - search_signals present: True
2025-10-29 13:52:26,766 - INFO     -   - nodes_expanded: 20
2025-10-29 13:52:26,766 - INFO     -   - search_depth: 2
2025-10-29 13:52:26,766 - INFO     -   - solution_cost: 2
2025-10-29 13:52:26,766 - INFO     -   - branching_factor: 6.1000
2025-10-29 13:52:26,766 - INFO     -   - solution_found: True
2025-10-29 13:52:26,766 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:26,768 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:26,768 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:52:26,768 - INFO     -   - TS0(2) + TS9(10) → 20 states
2025-10-29 13:52:26,768 - INFO     -   - f_stability=0.788
2025-10-29 13:52:26,768 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:52:26,770 - INFO     -   - solution_found=True
2025-10-29 13:52:26,770 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:26,770 - INFO     - 
  Extracted signals:
2025-10-29 13:52:26,770 - INFO     -     - iteration: 1
2025-10-29 13:52:26,770 - INFO     -     - states_before: 20
2025-10-29 13:52:26,772 - INFO     -     - states_after: 20
2025-10-29 13:52:26,772 - INFO     -     - delta_states: 0
2025-10-29 13:52:26,772 - INFO     -     - f_value_stability: 0.7879
2025-10-29 13:52:26,772 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:26,772 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:26,772 - INFO     -     - nodes_expanded: 20
2025-10-29 13:52:26,772 - INFO     -     - search_depth: 2
2025-10-29 13:52:26,772 - INFO     -     - solution_cost: 2
2025-10-29 13:52:26,772 - INFO     -     - branching_factor: 6.1000
2025-10-29 13:52:26,774 - INFO     -     - solution_found: True
2025-10-29 13:52:26,774 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:26,774 - INFO     - 
  Computing reward:
2025-10-29 13:52:26,774 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:26,776 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:26,776 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:26,776 - INFO     -   [1] BRANCHING FACTOR: 6.100 → score 0.290 (high BF, minimal credit)
2025-10-29 13:52:26,776 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:52:26,778 - INFO     -   [3] F-VALUE STABILITY: 0.764
2025-10-29 13:52:26,778 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:52:26,778 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:26,778 - INFO     - 
  [COMPOSITE]: 0.646
2025-10-29 13:52:26,778 - INFO     -     = 0.300*0.290 (bf)
2025-10-29 13:52:26,778 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:52:26,778 - INFO     -     + 0.350*0.764 (stability)
2025-10-29 13:52:26,778 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:26,778 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:26,778 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:26,778 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:52:26,780 - INFO     - 
  [FINAL REWARD]: 0.7929
2025-10-29 13:52:26,780 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:26,782 - INFO     -     ✓ Reward computed: 0.7929
2025-10-29 13:52:26,782 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:26,782 - INFO     -     - bf_score                       0.2900
2025-10-29 13:52:26,782 - INFO     -     - depth_score                    0.8603
2025-10-29 13:52:26,782 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:26,782 - INFO     -     - f_stability                    0.7639
2025-10-29 13:52:26,782 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:52:26,782 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:26,782 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:26,782 - INFO     -     - composite                      0.6464
2025-10-29 13:52:26,782 - INFO     -     - total                          0.7929
2025-10-29 13:52:26,782 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:26,784 - INFO     -   Num remaining nodes: 7
2025-10-29 13:52:26,784 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:52:26,784 - INFO     -   Done: False
2025-10-29 13:52:26,784 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:26,786 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:26,788 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:26,788 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:26,788 - INFO     -     - num_nodes: 7
2025-10-29 13:52:26,790 - INFO     -     - num_edges: 36
2025-10-29 13:52:26,790 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:26,790 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:52:26,790 - INFO     -   After: current_merge_step = 2
2025-10-29 13:52:26,790 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:26,790 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:26,792 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:26,792 - INFO     -   ✓ Step logged
2025-10-29 13:52:26,794 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:26,794 - INFO     -   Returning:
2025-10-29 13:52:26,794 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:26,794 - INFO     -     - reward: 0.7929
2025-10-29 13:52:26,798 - INFO     -     - done: False
2025-10-29 13:52:26,798 - INFO     -     - truncated: False
2025-10-29 13:52:26,798 - INFO     -     - info: 19 keys
2025-10-29 13:52:26,800 - INFO     - ==========================================================================================

2025-10-29 13:52:26,889 - INFO     - 
==========================================================================================
2025-10-29 13:52:26,889 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:26,889 - INFO     - ==========================================================================================
2025-10-29 13:52:26,889 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:26,889 - INFO     -   Input action: 16 (type: int)
2025-10-29 13:52:26,889 - INFO     -   Available edges in graph: 36
2025-10-29 13:52:26,889 - INFO     -   Action index calculation:
2025-10-29 13:52:26,889 - INFO     -     - action % max(num_valid_edges, 1) = 16 % 36 = 16
2025-10-29 13:52:26,891 - INFO     -     - clamped to [0, 35]: 16
2025-10-29 13:52:26,891 - INFO     -   ✓ Extracted merge pair from edge 16: (4, 8)
2025-10-29 13:52:26,891 - INFO     -   ✓ Validation passed
2025-10-29 13:52:26,891 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:26,891 - INFO     -     - Total states before merge: 41
2025-10-29 13:52:26,891 - INFO     -     - Num nodes: 7
2025-10-29 13:52:26,891 - INFO     -     - Num edges: 36
2025-10-29 13:52:26,891 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:26,892 - INFO     -       - Node 4: 2 states
2025-10-29 13:52:26,892 - INFO     -       - Node 8: 5 states
2025-10-29 13:52:26,892 - INFO     -       - Expected product: 10 states
2025-10-29 13:52:26,892 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:26,906 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:52:26,906 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:26,906 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:52:27,007 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:27,007 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:27,007 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:52:27,007 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:27,007 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:27,007 - INFO     -   Calling graph_tracker.merge_nodes([4, 8])...
2025-10-29 13:52:27,007 - INFO     - Attempting merge of nodes 4 and 8...
2025-10-29 13:52:27,007 - INFO     - Successfully merged nodes into new node 11 with 10 states.
2025-10-29 13:52:27,009 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:27,009 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:27,009 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:52:27,009 - INFO     - 
================================================================================
2025-10-29 13:52:27,009 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:52:27,009 - INFO     - ================================================================================
2025-10-29 13:52:27,009 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:27,009 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:52:27,009 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:52:27,009 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:27,009 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:27,009 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:27,011 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:27,011 - INFO     -   - Raw f_after length: 10
2025-10-29 13:52:27,011 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:27,011 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:27,011 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:27,011 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:52:27,011 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:27,011 - INFO     -   - ts1_id: 4
2025-10-29 13:52:27,011 - INFO     -   - ts2_id: 8
2025-10-29 13:52:27,011 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:27,011 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:27,011 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:52:27,011 - INFO     -   - Product space size: 10
2025-10-29 13:52:27,011 - INFO     -   - Using product state mapping
2025-10-29 13:52:27,011 - INFO     -   - f_before_product length: 10
2025-10-29 13:52:27,011 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:52:27,012 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:52:27,012 - INFO     -   - delta: 0.7000
2025-10-29 13:52:27,012 - INFO     -   - f_stability: 1.0 - |0.7000| / 2.9000 = 0.7586
2025-10-29 13:52:27,012 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:27,012 - INFO     -   - Compared 7 values
2025-10-29 13:52:27,012 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:52:27,012 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:27,012 - INFO     -   - states_before: 10
2025-10-29 13:52:27,012 - INFO     -   - states_after: 10
2025-10-29 13:52:27,012 - INFO     -   - delta_states: 0
2025-10-29 13:52:27,012 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:27,012 - INFO     -   - ts1_transitions: 3
2025-10-29 13:52:27,012 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:27,012 - INFO     -   - merged_transitions: 27
2025-10-29 13:52:27,012 - INFO     -   - transition_density_change: 1.1000
2025-10-29 13:52:27,012 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:27,016 - INFO     -   - search_signals present: True
2025-10-29 13:52:27,016 - INFO     -   - nodes_expanded: 10
2025-10-29 13:52:27,017 - INFO     -   - search_depth: 2
2025-10-29 13:52:27,017 - INFO     -   - solution_cost: 0
2025-10-29 13:52:27,017 - INFO     -   - branching_factor: 2.7000
2025-10-29 13:52:27,017 - INFO     -   - solution_found: True
2025-10-29 13:52:27,018 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:27,018 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:27,018 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:52:27,018 - INFO     -   - TS4(2) + TS8(5) → 10 states
2025-10-29 13:52:27,018 - INFO     -   - f_stability=0.759
2025-10-29 13:52:27,018 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:52:27,018 - INFO     -   - solution_found=True
2025-10-29 13:52:27,018 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:27,018 - INFO     - 
  Extracted signals:
2025-10-29 13:52:27,018 - INFO     -     - iteration: 2
2025-10-29 13:52:27,018 - INFO     -     - states_before: 10
2025-10-29 13:52:27,018 - INFO     -     - states_after: 10
2025-10-29 13:52:27,018 - INFO     -     - delta_states: 0
2025-10-29 13:52:27,018 - INFO     -     - f_value_stability: 0.7586
2025-10-29 13:52:27,018 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:52:27,018 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:27,018 - INFO     -     - nodes_expanded: 10
2025-10-29 13:52:27,018 - INFO     -     - search_depth: 2
2025-10-29 13:52:27,018 - INFO     -     - solution_cost: 0
2025-10-29 13:52:27,018 - INFO     -     - branching_factor: 2.7000
2025-10-29 13:52:27,018 - INFO     -     - solution_found: True
2025-10-29 13:52:27,018 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:27,018 - INFO     - 
  Computing reward:
2025-10-29 13:52:27,018 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:27,018 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:27,018 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:27,020 - INFO     -   [1] BRANCHING FACTOR: 2.700 → score 0.745 (good (in comfort zone))
2025-10-29 13:52:27,020 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:52:27,020 - INFO     -   [3] F-VALUE STABILITY: 0.251
2025-10-29 13:52:27,020 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:27,020 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:27,020 - INFO     - 
  [COMPOSITE]: 0.603
2025-10-29 13:52:27,020 - INFO     -     = 0.300*0.745 (bf)
2025-10-29 13:52:27,020 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:52:27,020 - INFO     -     + 0.350*0.251 (stability)
2025-10-29 13:52:27,020 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:27,020 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:27,020 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:27,021 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:27,021 - INFO     - 
  [FINAL REWARD]: 0.4066
2025-10-29 13:52:27,021 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:27,021 - INFO     -     ✓ Reward computed: 0.4066
2025-10-29 13:52:27,021 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:27,021 - INFO     -     - bf_score                       0.7450
2025-10-29 13:52:27,021 - INFO     -     - depth_score                    0.8603
2025-10-29 13:52:27,021 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:27,021 - INFO     -     - f_stability                    0.2507
2025-10-29 13:52:27,021 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:27,021 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:27,021 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:27,021 - INFO     -     - composite                      0.6033
2025-10-29 13:52:27,021 - INFO     -     - total                          0.4066
2025-10-29 13:52:27,029 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:27,029 - INFO     -   Num remaining nodes: 6
2025-10-29 13:52:27,029 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:52:27,029 - INFO     -   Done: False
2025-10-29 13:52:27,029 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:27,031 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:27,031 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:27,031 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:27,031 - INFO     -     - num_nodes: 6
2025-10-29 13:52:27,031 - INFO     -     - num_edges: 28
2025-10-29 13:52:27,031 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:27,031 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:52:27,031 - INFO     -   After: current_merge_step = 3
2025-10-29 13:52:27,031 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:27,031 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:27,031 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:27,033 - INFO     -   ✓ Step logged
2025-10-29 13:52:27,033 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:27,033 - INFO     -   Returning:
2025-10-29 13:52:27,033 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:27,033 - INFO     -     - reward: 0.4066
2025-10-29 13:52:27,035 - INFO     -     - done: False
2025-10-29 13:52:27,035 - INFO     -     - truncated: False
2025-10-29 13:52:27,035 - INFO     -     - info: 19 keys
2025-10-29 13:52:27,035 - INFO     - ==========================================================================================

2025-10-29 13:52:27,037 - INFO     - 
==========================================================================================
2025-10-29 13:52:27,037 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:27,037 - INFO     - ==========================================================================================
2025-10-29 13:52:27,037 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:27,040 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:52:27,040 - INFO     -   Available edges in graph: 28
2025-10-29 13:52:27,040 - INFO     -   Action index calculation:
2025-10-29 13:52:27,040 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 28 = 2
2025-10-29 13:52:27,040 - INFO     -     - clamped to [0, 27]: 2
2025-10-29 13:52:27,040 - INFO     -   ✓ Extracted merge pair from edge 2: (1, 7)
2025-10-29 13:52:27,040 - INFO     -   ✓ Validation passed
2025-10-29 13:52:27,040 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:27,040 - INFO     -     - Total states before merge: 44
2025-10-29 13:52:27,040 - INFO     -     - Num nodes: 6
2025-10-29 13:52:27,040 - INFO     -     - Num edges: 28
2025-10-29 13:52:27,040 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:27,040 - INFO     -       - Node 1: 2 states
2025-10-29 13:52:27,040 - INFO     -       - Node 7: 5 states
2025-10-29 13:52:27,042 - INFO     -       - Expected product: 10 states
2025-10-29 13:52:27,042 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:27,045 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:52:27,045 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:27,045 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:52:27,147 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:27,147 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:27,147 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:52:27,147 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:27,147 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:27,149 - INFO     -   Calling graph_tracker.merge_nodes([1, 7])...
2025-10-29 13:52:27,149 - INFO     - Attempting merge of nodes 1 and 7...
2025-10-29 13:52:27,149 - INFO     - Successfully merged nodes into new node 12 with 10 states.
2025-10-29 13:52:27,149 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:27,149 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:27,149 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:52:27,149 - INFO     - 
================================================================================
2025-10-29 13:52:27,149 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:52:27,149 - INFO     - ================================================================================
2025-10-29 13:52:27,149 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:27,149 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:52:27,149 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:52:27,150 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:27,150 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:27,150 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:27,150 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:27,150 - INFO     -   - Raw f_after length: 10
2025-10-29 13:52:27,150 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:27,150 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:27,150 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:27,150 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:52:27,150 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:27,150 - INFO     -   - ts1_id: 1
2025-10-29 13:52:27,150 - INFO     -   - ts2_id: 7
2025-10-29 13:52:27,150 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:27,150 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:27,150 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:52:27,150 - INFO     -   - Product space size: 10
2025-10-29 13:52:27,150 - INFO     -   - Using product state mapping
2025-10-29 13:52:27,150 - INFO     -   - f_before_product length: 10
2025-10-29 13:52:27,150 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:52:27,152 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:52:27,152 - INFO     -   - delta: 0.5000
2025-10-29 13:52:27,152 - INFO     -   - f_stability: 1.0 - |0.5000| / 2.8000 = 0.8214
2025-10-29 13:52:27,152 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:27,152 - INFO     -   - Compared 7 values
2025-10-29 13:52:27,152 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:52:27,152 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:27,152 - INFO     -   - states_before: 10
2025-10-29 13:52:27,152 - INFO     -   - states_after: 10
2025-10-29 13:52:27,152 - INFO     -   - delta_states: 0
2025-10-29 13:52:27,152 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:27,152 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:27,152 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:27,152 - INFO     -   - merged_transitions: 40
2025-10-29 13:52:27,152 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:52:27,152 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:27,168 - INFO     -   - search_signals present: True
2025-10-29 13:52:27,168 - INFO     -   - nodes_expanded: 10
2025-10-29 13:52:27,168 - INFO     -   - search_depth: 1
2025-10-29 13:52:27,168 - INFO     -   - solution_cost: 2
2025-10-29 13:52:27,168 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:52:27,168 - INFO     -   - solution_found: True
2025-10-29 13:52:27,168 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:27,168 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:27,168 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:52:27,168 - INFO     -   - TS1(2) + TS7(5) → 10 states
2025-10-29 13:52:27,168 - INFO     -   - f_stability=0.821
2025-10-29 13:52:27,168 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:52:27,168 - INFO     -   - solution_found=True
2025-10-29 13:52:27,168 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:27,168 - INFO     - 
  Extracted signals:
2025-10-29 13:52:27,168 - INFO     -     - iteration: 3
2025-10-29 13:52:27,168 - INFO     -     - states_before: 10
2025-10-29 13:52:27,168 - INFO     -     - states_after: 10
2025-10-29 13:52:27,168 - INFO     -     - delta_states: 0
2025-10-29 13:52:27,168 - INFO     -     - f_value_stability: 0.8214
2025-10-29 13:52:27,168 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:52:27,168 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:27,168 - INFO     -     - nodes_expanded: 10
2025-10-29 13:52:27,168 - INFO     -     - search_depth: 1
2025-10-29 13:52:27,168 - INFO     -     - solution_cost: 2
2025-10-29 13:52:27,168 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:52:27,168 - INFO     -     - solution_found: True
2025-10-29 13:52:27,168 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:27,168 - INFO     - 
  Computing reward:
2025-10-29 13:52:27,168 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:27,168 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:27,168 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:27,168 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:52:27,168 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:52:27,168 - INFO     -   [3] F-VALUE STABILITY: 0.593
2025-10-29 13:52:27,168 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:52:27,168 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:27,168 - INFO     - 
  [COMPOSITE]: 0.680
2025-10-29 13:52:27,168 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:52:27,168 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:52:27,168 - INFO     -     + 0.350*0.593 (stability)
2025-10-29 13:52:27,168 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:27,168 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:27,168 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:27,168 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:52:27,168 - INFO     - 
  [FINAL REWARD]: 0.7602
2025-10-29 13:52:27,168 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:27,168 - INFO     -     ✓ Reward computed: 0.7602
2025-10-29 13:52:27,168 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:27,168 - INFO     -     - bf_score                       0.5667
2025-10-29 13:52:27,168 - INFO     -     - depth_score                    0.9119
2025-10-29 13:52:27,168 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:27,168 - INFO     -     - f_stability                    0.5935
2025-10-29 13:52:27,168 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:52:27,173 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:27,173 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:27,173 - INFO     -     - composite                      0.6801
2025-10-29 13:52:27,173 - INFO     -     - total                          0.7602
2025-10-29 13:52:27,183 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:27,183 - INFO     -   Num remaining nodes: 5
2025-10-29 13:52:27,183 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:52:27,185 - INFO     -   Done: False
2025-10-29 13:52:27,185 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:27,186 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:27,186 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:27,186 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:27,186 - INFO     -     - num_nodes: 5
2025-10-29 13:52:27,186 - INFO     -     - num_edges: 20
2025-10-29 13:52:27,186 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:27,186 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:52:27,186 - INFO     -   After: current_merge_step = 4
2025-10-29 13:52:27,186 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:27,186 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:27,186 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:27,186 - INFO     -   ✓ Step logged
2025-10-29 13:52:27,186 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:27,186 - INFO     -   Returning:
2025-10-29 13:52:27,186 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:27,188 - INFO     -     - reward: 0.7602
2025-10-29 13:52:27,188 - INFO     -     - done: False
2025-10-29 13:52:27,188 - INFO     -     - truncated: False
2025-10-29 13:52:27,188 - INFO     -     - info: 19 keys
2025-10-29 13:52:27,188 - INFO     - ==========================================================================================

2025-10-29 13:52:27,193 - INFO     - 
==========================================================================================
2025-10-29 13:52:27,193 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:27,193 - INFO     - ==========================================================================================
2025-10-29 13:52:27,193 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:27,193 - INFO     -   Input action: 9 (type: int)
2025-10-29 13:52:27,193 - INFO     -   Available edges in graph: 20
2025-10-29 13:52:27,193 - INFO     -   Action index calculation:
2025-10-29 13:52:27,193 - INFO     -     - action % max(num_valid_edges, 1) = 9 % 20 = 9
2025-10-29 13:52:27,193 - INFO     -     - clamped to [0, 19]: 9
2025-10-29 13:52:27,193 - INFO     -   ✓ Extracted merge pair from edge 9: (10, 6)
2025-10-29 13:52:27,193 - INFO     -   ✓ Validation passed
2025-10-29 13:52:27,193 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:27,193 - INFO     -     - Total states before merge: 47
2025-10-29 13:52:27,193 - INFO     -     - Num nodes: 5
2025-10-29 13:52:27,193 - INFO     -     - Num edges: 20
2025-10-29 13:52:27,193 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:27,193 - INFO     -       - Node 10: 20 states
2025-10-29 13:52:27,193 - INFO     -       - Node 6: 5 states
2025-10-29 13:52:27,194 - INFO     -       - Expected product: 100 states
2025-10-29 13:52:27,194 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:27,202 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:52:27,202 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:27,202 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:52:27,305 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:27,305 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:27,305 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:52:27,307 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:27,307 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:27,307 - INFO     -   Calling graph_tracker.merge_nodes([10, 6])...
2025-10-29 13:52:27,307 - INFO     - Attempting merge of nodes 10 and 6...
2025-10-29 13:52:27,307 - INFO     - Successfully merged nodes into new node 13 with 100 states.
2025-10-29 13:52:27,307 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:27,307 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:27,307 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:52:27,307 - INFO     - 
================================================================================
2025-10-29 13:52:27,307 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:52:27,307 - INFO     - ================================================================================
2025-10-29 13:52:27,307 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:27,307 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:52:27,307 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:52:27,307 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:27,307 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:27,307 - INFO     -   - Raw ts1_f length: 20
2025-10-29 13:52:27,307 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:52:27,307 - INFO     -   - Raw f_after length: 100
2025-10-29 13:52:27,307 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:27,307 - INFO     -   - ts1_valid: 20 / 20 (removed 0)
2025-10-29 13:52:27,307 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:52:27,307 - INFO     -   - after_valid: 100 / 100 (removed 0)
2025-10-29 13:52:27,307 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:27,307 - INFO     -   - ts1_id: 10
2025-10-29 13:52:27,307 - INFO     -   - ts2_id: 6
2025-10-29 13:52:27,307 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:27,307 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:27,307 - INFO     -   - ts1_size: 20, ts2_size: 5
2025-10-29 13:52:27,307 - INFO     -   - Product space size: 100
2025-10-29 13:52:27,307 - INFO     -   - Using product state mapping
2025-10-29 13:52:27,307 - INFO     -   - f_before_product length: 100
2025-10-29 13:52:27,307 - INFO     -   - avg_f_before: 4.3600 (100 valid states)
2025-10-29 13:52:27,307 - INFO     -   - avg_f_after:  6.7600 (100 valid states)
2025-10-29 13:52:27,307 - INFO     -   - delta: 2.4000
2025-10-29 13:52:27,307 - INFO     -   - f_stability: 1.0 - |2.4000| / 4.3600 = 0.4495
2025-10-29 13:52:27,307 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:27,307 - INFO     -   - Compared 25 values
2025-10-29 13:52:27,307 - INFO     -   - Significant changes (> 5.0): 3
2025-10-29 13:52:27,307 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:27,307 - INFO     -   - states_before: 100
2025-10-29 13:52:27,307 - INFO     -   - states_after: 100
2025-10-29 13:52:27,307 - INFO     -   - delta_states: 0
2025-10-29 13:52:27,307 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:27,307 - INFO     -   - ts1_transitions: 122
2025-10-29 13:52:27,307 - INFO     -   - ts2_transitions: 13
2025-10-29 13:52:27,307 - INFO     -   - merged_transitions: 750
2025-10-29 13:52:27,307 - INFO     -   - transition_density_change: 6.1500
2025-10-29 13:52:27,307 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:27,307 - INFO     -   - search_signals present: True
2025-10-29 13:52:27,307 - INFO     -   - nodes_expanded: 100
2025-10-29 13:52:27,307 - INFO     -   - search_depth: 3
2025-10-29 13:52:27,307 - INFO     -   - solution_cost: 2
2025-10-29 13:52:27,307 - INFO     -   - branching_factor: 7.5000
2025-10-29 13:52:27,317 - INFO     -   - solution_found: True
2025-10-29 13:52:27,317 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:27,317 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:27,317 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:52:27,317 - INFO     -   - TS10(20) + TS6(5) → 100 states
2025-10-29 13:52:27,317 - INFO     -   - f_stability=0.450
2025-10-29 13:52:27,318 - INFO     -   - A* nodes_expanded=100
2025-10-29 13:52:27,318 - INFO     -   - solution_found=True
2025-10-29 13:52:27,318 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:27,318 - INFO     - 
  Extracted signals:
2025-10-29 13:52:27,318 - INFO     -     - iteration: 4
2025-10-29 13:52:27,318 - INFO     -     - states_before: 100
2025-10-29 13:52:27,318 - INFO     -     - states_after: 100
2025-10-29 13:52:27,318 - INFO     -     - delta_states: 0
2025-10-29 13:52:27,318 - INFO     -     - f_value_stability: 0.4495
2025-10-29 13:52:27,318 - INFO     -     - num_significant_f_changes: 3
2025-10-29 13:52:27,318 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:27,318 - INFO     -     - nodes_expanded: 100
2025-10-29 13:52:27,318 - INFO     -     - search_depth: 3
2025-10-29 13:52:27,318 - INFO     -     - solution_cost: 2
2025-10-29 13:52:27,318 - INFO     -     - branching_factor: 7.5000
2025-10-29 13:52:27,318 - INFO     -     - solution_found: True
2025-10-29 13:52:27,318 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:27,318 - INFO     - 
  Computing reward:
2025-10-29 13:52:27,318 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:27,318 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:27,318 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:27,318 - INFO     -   [1] BRANCHING FACTOR: 7.500 → score 0.150 (high BF, minimal credit)
2025-10-29 13:52:27,318 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:52:27,320 - INFO     -   [3] F-VALUE STABILITY: 0.370
2025-10-29 13:52:27,320 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:52:27,320 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:27,320 - INFO     - 
  [COMPOSITE]: 0.459
2025-10-29 13:52:27,320 - INFO     -     = 0.300*0.150 (bf)
2025-10-29 13:52:27,320 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:52:27,320 - INFO     -     + 0.350*0.370 (stability)
2025-10-29 13:52:27,320 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:27,320 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:27,320 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:27,320 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:52:27,320 - INFO     - 
  [FINAL REWARD]: 0.2182
2025-10-29 13:52:27,320 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:27,320 - INFO     -     ✓ Reward computed: 0.2182
2025-10-29 13:52:27,320 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:27,320 - INFO     -     - bf_score                       0.1500
2025-10-29 13:52:27,320 - INFO     -     - depth_score                    0.8237
2025-10-29 13:52:27,320 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:27,320 - INFO     -     - f_stability                    0.3697
2025-10-29 13:52:27,320 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:52:27,320 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:27,320 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:27,320 - INFO     -     - composite                      0.4591
2025-10-29 13:52:27,320 - INFO     -     - total                          0.2182
2025-10-29 13:52:27,322 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:27,322 - INFO     -   Num remaining nodes: 4
2025-10-29 13:52:27,322 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:52:27,322 - INFO     -   Done: False
2025-10-29 13:52:27,322 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:27,325 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:27,325 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:27,325 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:27,325 - INFO     -     - num_nodes: 4
2025-10-29 13:52:27,325 - INFO     -     - num_edges: 12
2025-10-29 13:52:27,325 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:27,325 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:52:27,325 - INFO     -   After: current_merge_step = 5
2025-10-29 13:52:27,325 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:27,325 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:27,325 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:27,325 - INFO     -   ✓ Step logged
2025-10-29 13:52:27,325 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:27,325 - INFO     -   Returning:
2025-10-29 13:52:27,325 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:27,325 - INFO     -     - reward: 0.2182
2025-10-29 13:52:27,325 - INFO     -     - done: False
2025-10-29 13:52:27,329 - INFO     -     - truncated: False
2025-10-29 13:52:27,329 - INFO     -     - info: 19 keys
2025-10-29 13:52:27,329 - INFO     - ==========================================================================================

2025-10-29 13:52:27,331 - INFO     - 
==========================================================================================
2025-10-29 13:52:27,331 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:27,331 - INFO     - ==========================================================================================
2025-10-29 13:52:27,331 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:27,331 - INFO     -   Input action: 5 (type: int)
2025-10-29 13:52:27,333 - INFO     -   Available edges in graph: 12
2025-10-29 13:52:27,333 - INFO     -   Action index calculation:
2025-10-29 13:52:27,333 - INFO     -     - action % max(num_valid_edges, 1) = 5 % 12 = 5
2025-10-29 13:52:27,333 - INFO     -     - clamped to [0, 11]: 5
2025-10-29 13:52:27,333 - INFO     -   ✓ Extracted merge pair from edge 5: (11, 13)
2025-10-29 13:52:27,333 - INFO     -   ✓ Validation passed
2025-10-29 13:52:27,333 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:27,333 - INFO     -     - Total states before merge: 122
2025-10-29 13:52:27,333 - INFO     -     - Num nodes: 4
2025-10-29 13:52:27,333 - INFO     -     - Num edges: 12
2025-10-29 13:52:27,333 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:27,333 - INFO     -       - Node 11: 10 states
2025-10-29 13:52:27,333 - INFO     -       - Node 13: 100 states
2025-10-29 13:52:27,333 - INFO     -       - Expected product: 1000 states
2025-10-29 13:52:27,333 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:27,337 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:52:27,337 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:27,337 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:52:27,439 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:27,439 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:27,439 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:52:27,445 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:52:27,445 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:27,445 - INFO     -   Calling graph_tracker.merge_nodes([11, 13])...
2025-10-29 13:52:27,445 - INFO     - Attempting merge of nodes 11 and 13...
2025-10-29 13:52:27,445 - INFO     - Successfully merged nodes into new node 14 with 1000 states.
2025-10-29 13:52:27,445 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:27,447 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:27,447 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:52:27,447 - INFO     - 
================================================================================
2025-10-29 13:52:27,447 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:52:27,447 - INFO     - ================================================================================
2025-10-29 13:52:27,447 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:27,447 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:52:27,447 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:52:27,449 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:27,449 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:27,449 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:52:27,449 - INFO     -   - Raw ts2_f length: 100
2025-10-29 13:52:27,449 - INFO     -   - Raw f_after length: 1000
2025-10-29 13:52:27,449 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:27,449 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:52:27,449 - INFO     -   - ts2_valid: 100 / 100 (removed -100)
2025-10-29 13:52:27,450 - INFO     -   - after_valid: 1000 / 1000 (removed 0)
2025-10-29 13:52:27,450 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:27,450 - INFO     -   - ts1_id: 11
2025-10-29 13:52:27,450 - INFO     -   - ts2_id: 13
2025-10-29 13:52:27,450 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:27,450 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:27,450 - INFO     -   - ts1_size: 10, ts2_size: 100
2025-10-29 13:52:27,450 - INFO     -   - Product space size: 1000
2025-10-29 13:52:27,450 - INFO     -   - Using product state mapping
2025-10-29 13:52:27,450 - INFO     -   - f_before_product length: 1000
2025-10-29 13:52:27,454 - INFO     -   - avg_f_before: 6.9580 (1000 valid states)
2025-10-29 13:52:27,454 - INFO     -   - avg_f_after:  11.4930 (1000 valid states)
2025-10-29 13:52:27,454 - INFO     -   - delta: 4.5350
2025-10-29 13:52:27,454 - INFO     -   - f_stability: 1.0 - |4.5350| / 6.9580 = 0.3482
2025-10-29 13:52:27,454 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:27,456 - INFO     -   - Compared 110 values
2025-10-29 13:52:27,456 - INFO     -   - Significant changes (> 5.0): 48
2025-10-29 13:52:27,456 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:27,456 - INFO     -   - states_before: 1000
2025-10-29 13:52:27,456 - INFO     -   - states_after: 1000
2025-10-29 13:52:27,456 - INFO     -   - delta_states: 0
2025-10-29 13:52:27,456 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:27,456 - INFO     -   - ts1_transitions: 27
2025-10-29 13:52:27,456 - INFO     -   - ts2_transitions: 750
2025-10-29 13:52:27,456 - INFO     -   - merged_transitions: 6300
2025-10-29 13:52:27,456 - INFO     -   - transition_density_change: 5.5230
2025-10-29 13:52:27,456 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:27,456 - INFO     -   - search_signals present: True
2025-10-29 13:52:27,456 - INFO     -   - nodes_expanded: 1000
2025-10-29 13:52:27,456 - INFO     -   - search_depth: 5
2025-10-29 13:52:27,456 - INFO     -   - solution_cost: 2
2025-10-29 13:52:27,456 - INFO     -   - branching_factor: 6.3000
2025-10-29 13:52:27,456 - INFO     -   - solution_found: True
2025-10-29 13:52:27,456 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:27,456 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:27,456 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:52:27,458 - INFO     -   - TS11(10) + TS13(100) → 1000 states
2025-10-29 13:52:27,458 - INFO     -   - f_stability=0.348
2025-10-29 13:52:27,458 - INFO     -   - A* nodes_expanded=1000
2025-10-29 13:52:27,458 - INFO     -   - solution_found=True
2025-10-29 13:52:27,458 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:27,458 - INFO     - 
  Extracted signals:
2025-10-29 13:52:27,458 - INFO     -     - iteration: 5
2025-10-29 13:52:27,458 - INFO     -     - states_before: 1000
2025-10-29 13:52:27,458 - INFO     -     - states_after: 1000
2025-10-29 13:52:27,458 - INFO     -     - delta_states: 0
2025-10-29 13:52:27,458 - INFO     -     - f_value_stability: 0.3482
2025-10-29 13:52:27,458 - INFO     -     - num_significant_f_changes: 48
2025-10-29 13:52:27,458 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:27,459 - INFO     -     - nodes_expanded: 1000
2025-10-29 13:52:27,459 - INFO     -     - search_depth: 5
2025-10-29 13:52:27,459 - INFO     -     - solution_cost: 2
2025-10-29 13:52:27,459 - INFO     -     - branching_factor: 6.3000
2025-10-29 13:52:27,459 - INFO     -     - solution_found: True
2025-10-29 13:52:27,459 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:27,459 - INFO     - 
  Computing reward:
2025-10-29 13:52:27,459 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:27,459 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:27,459 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:27,459 - INFO     -   [1] BRANCHING FACTOR: 6.300 → score 0.270 (high BF, minimal credit)
2025-10-29 13:52:27,467 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:52:27,467 - INFO     -   [3] F-VALUE STABILITY: 0.369
2025-10-29 13:52:27,467 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:52:27,467 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:27,467 - INFO     - 
  [COMPOSITE]: 0.485
2025-10-29 13:52:27,467 - INFO     -     = 0.300*0.270 (bf)
2025-10-29 13:52:27,467 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:52:27,467 - INFO     -     + 0.350*0.369 (stability)
2025-10-29 13:52:27,467 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:27,467 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:27,467 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:27,467 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:52:27,467 - INFO     - 
  [FINAL REWARD]: 0.2690
2025-10-29 13:52:27,467 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:27,467 - INFO     -     ✓ Reward computed: 0.2690
2025-10-29 13:52:27,467 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:27,467 - INFO     -     - bf_score                       0.2700
2025-10-29 13:52:27,467 - INFO     -     - depth_score                    0.7721
2025-10-29 13:52:27,467 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:27,467 - INFO     -     - f_stability                    0.3688
2025-10-29 13:52:27,467 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:52:27,467 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:27,467 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:27,467 - INFO     -     - composite                      0.4845
2025-10-29 13:52:27,467 - INFO     -     - total                          0.2690
2025-10-29 13:52:27,467 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:27,467 - INFO     -   Num remaining nodes: 3
2025-10-29 13:52:27,467 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:52:27,467 - INFO     -   Done: False
2025-10-29 13:52:27,467 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:27,467 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:27,467 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:27,467 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:27,467 - INFO     -     - num_nodes: 3
2025-10-29 13:52:27,467 - INFO     -     - num_edges: 6
2025-10-29 13:52:27,467 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:27,467 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:52:27,467 - INFO     -   After: current_merge_step = 6
2025-10-29 13:52:27,467 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:27,467 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:27,467 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:27,467 - INFO     -   ✓ Step logged
2025-10-29 13:52:27,467 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:27,467 - INFO     -   Returning:
2025-10-29 13:52:27,467 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:27,472 - INFO     -     - reward: 0.2690
2025-10-29 13:52:27,472 - INFO     -     - done: False
2025-10-29 13:52:27,472 - INFO     -     - truncated: False
2025-10-29 13:52:27,472 - INFO     -     - info: 19 keys
2025-10-29 13:52:27,472 - INFO     - ==========================================================================================

2025-10-29 13:52:27,475 - INFO     - 
==========================================================================================
2025-10-29 13:52:27,475 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:27,475 - INFO     - ==========================================================================================
2025-10-29 13:52:27,475 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:27,475 - INFO     -   Input action: 5 (type: int)
2025-10-29 13:52:27,475 - INFO     -   Available edges in graph: 6
2025-10-29 13:52:27,483 - INFO     -   Action index calculation:
2025-10-29 13:52:27,483 - INFO     -     - action % max(num_valid_edges, 1) = 5 % 6 = 5
2025-10-29 13:52:27,483 - INFO     -     - clamped to [0, 5]: 5
2025-10-29 13:52:27,483 - INFO     -   ✓ Extracted merge pair from edge 5: (14, 12)
2025-10-29 13:52:27,483 - INFO     -   ✓ Validation passed
2025-10-29 13:52:27,483 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:27,483 - INFO     -     - Total states before merge: 1012
2025-10-29 13:52:27,483 - INFO     -     - Num nodes: 3
2025-10-29 13:52:27,483 - INFO     -     - Num edges: 6
2025-10-29 13:52:27,483 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:27,485 - INFO     -       - Node 14: 1000 states
2025-10-29 13:52:27,485 - INFO     -       - Node 12: 10 states
2025-10-29 13:52:27,485 - INFO     -       - Expected product: 10000 states
2025-10-29 13:52:27,485 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:27,492 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:52:27,492 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:27,492 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:52:27,594 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:27,595 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:27,595 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:52:27,859 - INFO     -   ✓ TS file received after 0.26s
2025-10-29 13:52:27,859 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:27,859 - INFO     -   Calling graph_tracker.merge_nodes([14, 12])...
2025-10-29 13:52:27,859 - INFO     - Attempting merge of nodes 14 and 12...
2025-10-29 13:52:27,859 - INFO     - Successfully merged nodes into new node 15 with 10000 states.
2025-10-29 13:52:27,859 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:27,859 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:27,859 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:52:27,859 - INFO     - 
================================================================================
2025-10-29 13:52:27,859 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:52:27,859 - INFO     - ================================================================================
2025-10-29 13:52:27,859 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:27,859 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:52:27,859 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:52:27,873 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:27,873 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:27,873 - INFO     -   - Raw ts1_f length: 387
2025-10-29 13:52:27,873 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:52:27,873 - INFO     -   - Raw f_after length: 3870
2025-10-29 13:52:27,873 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:27,873 - INFO     -   - ts1_valid: 387 / 387 (removed 0)
2025-10-29 13:52:27,873 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:52:27,873 - INFO     -   - after_valid: 1356 / 3870 (removed 2514)
2025-10-29 13:52:27,873 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:27,881 - INFO     -   - ts1_id: 14
2025-10-29 13:52:27,881 - INFO     -   - ts2_id: 12
2025-10-29 13:52:27,881 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:27,881 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:27,881 - INFO     -   - ts1_size: 387, ts2_size: 10
2025-10-29 13:52:27,881 - INFO     -   - Product space size: 3870
2025-10-29 13:52:27,881 - INFO     -   - Using product state mapping
2025-10-29 13:52:27,897 - INFO     -   - f_before_product length: 3870
2025-10-29 13:52:27,906 - INFO     -   - avg_f_before: 8.4742 (3870 valid states)
2025-10-29 13:52:27,906 - INFO     -   - avg_f_after:  13.6468 (1356 valid states)
2025-10-29 13:52:27,906 - INFO     -   - delta: 5.1726
2025-10-29 13:52:27,906 - INFO     -   - f_stability: 1.0 - |5.1726| / 8.4742 = 0.3896
2025-10-29 13:52:27,906 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:27,906 - INFO     -   - Compared 397 values
2025-10-29 13:52:27,906 - INFO     -   - Significant changes (> 5.0): 139
2025-10-29 13:52:27,906 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:27,906 - INFO     -   - states_before: 3870
2025-10-29 13:52:27,906 - INFO     -   - states_after: 3870
2025-10-29 13:52:27,906 - INFO     -   - delta_states: 0
2025-10-29 13:52:27,906 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:27,906 - INFO     -   - ts1_transitions: 4012
2025-10-29 13:52:27,906 - INFO     -   - ts2_transitions: 40
2025-10-29 13:52:27,906 - INFO     -   - merged_transitions: 22519
2025-10-29 13:52:27,906 - INFO     -   - transition_density_change: 4.7718
2025-10-29 13:52:27,906 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:27,906 - INFO     -   - search_signals present: True
2025-10-29 13:52:27,906 - INFO     -   - nodes_expanded: 1356
2025-10-29 13:52:27,906 - INFO     -   - search_depth: 7
2025-10-29 13:52:27,914 - INFO     -   - solution_cost: 4
2025-10-29 13:52:27,914 - INFO     -   - branching_factor: 16.6069
2025-10-29 13:52:27,914 - INFO     -   - solution_found: True
2025-10-29 13:52:27,914 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:27,914 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:27,914 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:52:27,914 - INFO     -   - TS14(387) + TS12(10) → 3870 states
2025-10-29 13:52:27,914 - INFO     -   - f_stability=0.390
2025-10-29 13:52:27,914 - INFO     -   - A* nodes_expanded=1356
2025-10-29 13:52:27,914 - INFO     -   - solution_found=True
2025-10-29 13:52:27,914 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:27,914 - INFO     - 
  Extracted signals:
2025-10-29 13:52:27,914 - INFO     -     - iteration: 6
2025-10-29 13:52:27,914 - INFO     -     - states_before: 3870
2025-10-29 13:52:27,917 - INFO     -     - states_after: 3870
2025-10-29 13:52:27,917 - INFO     -     - delta_states: 0
2025-10-29 13:52:27,917 - INFO     -     - f_value_stability: 0.3896
2025-10-29 13:52:27,917 - INFO     -     - num_significant_f_changes: 139
2025-10-29 13:52:27,917 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:27,917 - INFO     -     - nodes_expanded: 1356
2025-10-29 13:52:27,917 - INFO     -     - search_depth: 7
2025-10-29 13:52:27,917 - INFO     -     - solution_cost: 4
2025-10-29 13:52:27,917 - INFO     -     - branching_factor: 16.6069
2025-10-29 13:52:27,917 - INFO     -     - solution_found: True
2025-10-29 13:52:27,917 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:27,918 - WARNING  -     ⚠️  High branching factor: 16.6069
2025-10-29 13:52:27,918 - INFO     - 
  Computing reward:
2025-10-29 13:52:27,918 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:27,918 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:27,918 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:27,918 - INFO     -   [1] BRANCHING FACTOR: 16.607 → score 0.100 (high BF, minimal credit)
2025-10-29 13:52:27,918 - INFO     -   [2] SOLUTION QUALITY: depth=7 → score 0.736 + bonus 0.300
2025-10-29 13:52:27,918 - INFO     -   [3] F-VALUE STABILITY: 0.409
2025-10-29 13:52:27,918 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:52:27,918 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:27,918 - INFO     - 
  [COMPOSITE]: 0.440
2025-10-29 13:52:27,918 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:52:27,918 - INFO     -     + 0.200*0.736 (depth)
2025-10-29 13:52:27,918 - INFO     -     + 0.350*0.409 (stability)
2025-10-29 13:52:27,918 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:27,918 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:27,918 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:27,918 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:52:27,922 - INFO     - 
  [FINAL REWARD]: 0.1802
2025-10-29 13:52:27,922 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:27,922 - INFO     -     ✓ Reward computed: 0.1802
2025-10-29 13:52:27,922 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:27,922 - INFO     -     - bf_score                       0.1000
2025-10-29 13:52:27,922 - INFO     -     - depth_score                    0.7356
2025-10-29 13:52:27,922 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:27,922 - INFO     -     - f_stability                    0.4086
2025-10-29 13:52:27,922 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:52:27,922 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:27,922 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:27,922 - INFO     -     - composite                      0.4401
2025-10-29 13:52:27,922 - INFO     -     - total                          0.1802
2025-10-29 13:52:27,922 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:27,922 - INFO     -   Num remaining nodes: 2
2025-10-29 13:52:27,929 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:52:27,929 - INFO     -   Done: False
2025-10-29 13:52:27,929 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:27,929 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:27,929 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:27,930 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:27,930 - INFO     -     - num_nodes: 2
2025-10-29 13:52:27,930 - INFO     -     - num_edges: 2
2025-10-29 13:52:27,930 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:27,930 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:52:27,930 - INFO     -   After: current_merge_step = 7
2025-10-29 13:52:27,930 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:27,930 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:27,930 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:27,930 - INFO     -   ✓ Step logged
2025-10-29 13:52:27,930 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:27,930 - INFO     -   Returning:
2025-10-29 13:52:27,930 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:27,930 - INFO     -     - reward: 0.1802
2025-10-29 13:52:27,930 - INFO     -     - done: False
2025-10-29 13:52:27,930 - INFO     -     - truncated: False
2025-10-29 13:52:27,930 - INFO     -     - info: 19 keys
2025-10-29 13:52:27,930 - INFO     - ==========================================================================================

2025-10-29 13:52:27,930 - INFO     - 
==========================================================================================
2025-10-29 13:52:27,930 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:27,930 - INFO     - ==========================================================================================
2025-10-29 13:52:27,930 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:27,930 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:52:27,930 - INFO     -   Available edges in graph: 2
2025-10-29 13:52:27,930 - INFO     -   Action index calculation:
2025-10-29 13:52:27,930 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:52:27,930 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:52:27,930 - INFO     -   ✓ Extracted merge pair from edge 0: (2, 15)
2025-10-29 13:52:27,930 - INFO     -   ✓ Validation passed
2025-10-29 13:52:27,930 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:27,930 - INFO     -     - Total states before merge: 10002
2025-10-29 13:52:27,930 - INFO     -     - Num nodes: 2
2025-10-29 13:52:27,930 - INFO     -     - Num edges: 2
2025-10-29 13:52:27,930 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:27,930 - INFO     -       - Node 2: 2 states
2025-10-29 13:52:27,930 - INFO     -       - Node 15: 10000 states
2025-10-29 13:52:27,930 - INFO     -       - Expected product: 20000 states
2025-10-29 13:52:27,930 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:27,947 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:52:27,947 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:27,947 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:52:28,049 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:28,049 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:28,049 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:52:28,052 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:28,052 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:28,052 - INFO     -   Calling graph_tracker.merge_nodes([2, 15])...
2025-10-29 13:52:28,052 - INFO     - Attempting merge of nodes 2 and 15...
2025-10-29 13:52:28,052 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:52:28,052 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:28,052 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:28,052 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:52:28,052 - INFO     - 
================================================================================
2025-10-29 13:52:28,052 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:52:28,052 - INFO     - ================================================================================
2025-10-29 13:52:28,052 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:28,052 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:52:28,052 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:52:28,060 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:28,060 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:28,060 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:52:28,060 - INFO     -   - Raw ts2_f length: 1149
2025-10-29 13:52:28,061 - INFO     -   - Raw f_after length: 2298
2025-10-29 13:52:28,061 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:28,061 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:52:28,061 - INFO     -   - ts2_valid: 1149 / 1149 (removed -1149)
2025-10-29 13:52:28,061 - INFO     -   - after_valid: 1994 / 2298 (removed 304)
2025-10-29 13:52:28,061 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:28,061 - INFO     -   - ts1_id: 2
2025-10-29 13:52:28,061 - INFO     -   - ts2_id: 15
2025-10-29 13:52:28,061 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:28,061 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:28,061 - INFO     -   - ts1_size: 2, ts2_size: 1149
2025-10-29 13:52:28,061 - INFO     -   - Product space size: 2298
2025-10-29 13:52:28,061 - INFO     -   - Using product state mapping
2025-10-29 13:52:28,061 - INFO     -   - f_before_product length: 2298
2025-10-29 13:52:28,068 - INFO     -   - avg_f_before: 13.4909 (2298 valid states)
2025-10-29 13:52:28,068 - INFO     -   - avg_f_after:  14.5592 (1994 valid states)
2025-10-29 13:52:28,068 - INFO     -   - delta: 1.0683
2025-10-29 13:52:28,068 - INFO     -   - f_stability: 1.0 - |1.0683| / 13.4909 = 0.9208
2025-10-29 13:52:28,068 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:28,068 - INFO     -   - Compared 1151 values
2025-10-29 13:52:28,068 - INFO     -   - Significant changes (> 5.0): 235
2025-10-29 13:52:28,068 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:28,068 - INFO     -   - states_before: 2298
2025-10-29 13:52:28,068 - INFO     -   - states_after: 2298
2025-10-29 13:52:28,068 - INFO     -   - delta_states: 0
2025-10-29 13:52:28,068 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:28,072 - INFO     -   - ts1_transitions: 5
2025-10-29 13:52:28,072 - INFO     -   - ts2_transitions: 4826
2025-10-29 13:52:28,072 - INFO     -   - merged_transitions: 8228
2025-10-29 13:52:28,072 - INFO     -   - transition_density_change: 1.4782
2025-10-29 13:52:28,072 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:28,072 - INFO     -   - search_signals present: True
2025-10-29 13:52:28,072 - INFO     -   - nodes_expanded: 1994
2025-10-29 13:52:28,073 - INFO     -   - search_depth: 7
2025-10-29 13:52:28,073 - INFO     -   - solution_cost: 4
2025-10-29 13:52:28,073 - INFO     -   - branching_factor: 4.1264
2025-10-29 13:52:28,073 - INFO     -   - solution_found: True
2025-10-29 13:52:28,073 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:28,073 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:28,073 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:52:28,073 - INFO     -   - TS2(2) + TS15(1149) → 2298 states
2025-10-29 13:52:28,073 - INFO     -   - f_stability=0.921
2025-10-29 13:52:28,073 - INFO     -   - A* nodes_expanded=1994
2025-10-29 13:52:28,073 - INFO     -   - solution_found=True
2025-10-29 13:52:28,073 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:28,073 - INFO     - 
  Extracted signals:
2025-10-29 13:52:28,073 - INFO     -     - iteration: 7
2025-10-29 13:52:28,073 - INFO     -     - states_before: 2298
2025-10-29 13:52:28,073 - INFO     -     - states_after: 2298
2025-10-29 13:52:28,073 - INFO     -     - delta_states: 0
2025-10-29 13:52:28,073 - INFO     -     - f_value_stability: 0.9208
2025-10-29 13:52:28,073 - INFO     -     - num_significant_f_changes: 235
2025-10-29 13:52:28,073 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:28,073 - INFO     -     - nodes_expanded: 1994
2025-10-29 13:52:28,073 - INFO     -     - search_depth: 7
2025-10-29 13:52:28,073 - INFO     -     - solution_cost: 4
2025-10-29 13:52:28,073 - INFO     -     - branching_factor: 4.1264
2025-10-29 13:52:28,076 - INFO     -     - solution_found: True
2025-10-29 13:52:28,076 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:28,076 - INFO     - 
  Computing reward:
2025-10-29 13:52:28,076 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:28,076 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:28,076 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:28,076 - INFO     -   [1] BRANCHING FACTOR: 4.126 → score 0.550 (tolerable)
2025-10-29 13:52:28,076 - INFO     -   [2] SOLUTION QUALITY: depth=7 → score 0.736 + bonus 0.300
2025-10-29 13:52:28,076 - INFO     -   [3] F-VALUE STABILITY: 0.965
2025-10-29 13:52:28,076 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:52:28,076 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:28,076 - INFO     - 
  [COMPOSITE]: 0.770
2025-10-29 13:52:28,076 - INFO     -     = 0.300*0.550 (bf)
2025-10-29 13:52:28,076 - INFO     -     + 0.200*0.736 (depth)
2025-10-29 13:52:28,076 - INFO     -     + 0.350*0.965 (stability)
2025-10-29 13:52:28,076 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:28,076 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:28,076 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:28,076 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:52:28,076 - INFO     - 
  [FINAL REWARD]: 1.0000
2025-10-29 13:52:28,076 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:28,076 - INFO     -     ✓ Reward computed: 1.0000
2025-10-29 13:52:28,076 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:28,076 - INFO     -     - bf_score                       0.5498
2025-10-29 13:52:28,076 - INFO     -     - depth_score                    0.7356
2025-10-29 13:52:28,076 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:28,076 - INFO     -     - f_stability                    0.9650
2025-10-29 13:52:28,076 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:52:28,076 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:28,076 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:28,076 - INFO     -     - composite                      0.7698
2025-10-29 13:52:28,076 - INFO     -     - total                          1.0000
2025-10-29 13:52:28,076 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:28,076 - INFO     -   Num remaining nodes: 1
2025-10-29 13:52:28,076 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:52:28,076 - INFO     -   Done: True
2025-10-29 13:52:28,076 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:52:28,076 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:28,076 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:28,076 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:28,076 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:28,076 - INFO     -     - num_nodes: 1
2025-10-29 13:52:28,076 - INFO     -     - num_edges: 0
2025-10-29 13:52:28,076 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:28,076 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:52:28,076 - INFO     -   After: current_merge_step = 8
2025-10-29 13:52:28,076 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:28,076 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:28,076 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:28,076 - INFO     -   ✓ Step logged
2025-10-29 13:52:28,076 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:28,076 - INFO     -   Returning:
2025-10-29 13:52:28,076 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:28,076 - INFO     -     - reward: 1.0000
2025-10-29 13:52:28,076 - INFO     -     - done: True
2025-10-29 13:52:28,076 - INFO     -     - truncated: False
2025-10-29 13:52:28,076 - INFO     -     - info: 19 keys
2025-10-29 13:52:28,076 - INFO     - ==========================================================================================

2025-10-29 13:52:28,149 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:52:28,159 - INFO     - [Handshake] Building FD command:
2025-10-29 13:52:28,159 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:52:28,159 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_02.pddl
2025-10-29 13:52:28,159 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:52:28,159 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:52:28,917 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:52:28,917 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:52:28,918 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:52:29,229 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:52:29,229 - INFO     - Initializing GraphTracker...
2025-10-29 13:52:29,229 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:52:29,229 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:52:29,229 - INFO     -    → Node 0 has 2 states
2025-10-29 13:52:29,229 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:52:29,229 - INFO     -    → Node 1 has 2 states
2025-10-29 13:52:29,229 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:52:29,229 - INFO     -    → Node 2 has 2 states
2025-10-29 13:52:29,229 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:52:29,229 - INFO     -    → Node 3 has 2 states
2025-10-29 13:52:29,229 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:52:29,229 - INFO     -    → Node 4 has 2 states
2025-10-29 13:52:29,229 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:52:29,229 - INFO     -    → Node 5 has 5 states
2025-10-29 13:52:29,229 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:52:29,229 - INFO     -    → Node 6 has 5 states
2025-10-29 13:52:29,229 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:52:29,229 - INFO     -    → Node 7 has 5 states
2025-10-29 13:52:29,229 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:52:29,229 - INFO     -    → Node 8 has 5 states
2025-10-29 13:52:29,229 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:52:29,229 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:52:29,229 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:52:29,229 - INFO     - Added edge (0, 1)
2025-10-29 13:52:29,229 - INFO     - Added edge (0, 2)
2025-10-29 13:52:29,229 - INFO     - Added edge (0, 3)
2025-10-29 13:52:29,229 - INFO     - Added edge (0, 4)
2025-10-29 13:52:29,229 - INFO     - Added edge (0, 5)
2025-10-29 13:52:29,229 - INFO     - Added edge (0, 6)
2025-10-29 13:52:29,229 - INFO     - Added edge (0, 7)
2025-10-29 13:52:29,229 - INFO     - Added edge (0, 8)
2025-10-29 13:52:29,229 - INFO     - Added edge (1, 0)
2025-10-29 13:52:29,229 - INFO     - Added edge (1, 2)
2025-10-29 13:52:29,229 - INFO     - Added edge (1, 3)
2025-10-29 13:52:29,229 - INFO     - Added edge (1, 4)
2025-10-29 13:52:29,229 - INFO     - Added edge (1, 5)
2025-10-29 13:52:29,229 - INFO     - Added edge (1, 6)
2025-10-29 13:52:29,229 - INFO     - Added edge (1, 7)
2025-10-29 13:52:29,229 - INFO     - Added edge (1, 8)
2025-10-29 13:52:29,229 - INFO     - Added edge (2, 0)
2025-10-29 13:52:29,229 - INFO     - Added edge (2, 1)
2025-10-29 13:52:29,229 - INFO     - Added edge (2, 3)
2025-10-29 13:52:29,229 - INFO     - Added edge (2, 4)
2025-10-29 13:52:29,229 - INFO     - Added edge (2, 5)
2025-10-29 13:52:29,229 - INFO     - Added edge (2, 6)
2025-10-29 13:52:29,229 - INFO     - Added edge (2, 7)
2025-10-29 13:52:29,229 - INFO     - Added edge (2, 8)
2025-10-29 13:52:29,229 - INFO     - Added edge (3, 0)
2025-10-29 13:52:29,229 - INFO     - Added edge (3, 1)
2025-10-29 13:52:29,229 - INFO     - Added edge (3, 2)
2025-10-29 13:52:29,229 - INFO     - Added edge (3, 4)
2025-10-29 13:52:29,229 - INFO     - Added edge (3, 5)
2025-10-29 13:52:29,229 - INFO     - Added edge (3, 6)
2025-10-29 13:52:29,229 - INFO     - Added edge (3, 7)
2025-10-29 13:52:29,229 - INFO     - Added edge (3, 8)
2025-10-29 13:52:29,229 - INFO     - Added edge (4, 0)
2025-10-29 13:52:29,229 - INFO     - Added edge (4, 1)
2025-10-29 13:52:29,229 - INFO     - Added edge (4, 2)
2025-10-29 13:52:29,237 - INFO     - Added edge (4, 3)
2025-10-29 13:52:29,237 - INFO     - Added edge (4, 5)
2025-10-29 13:52:29,237 - INFO     - Added edge (4, 6)
2025-10-29 13:52:29,237 - INFO     - Added edge (4, 7)
2025-10-29 13:52:29,237 - INFO     - Added edge (4, 8)
2025-10-29 13:52:29,237 - INFO     - Added edge (5, 0)
2025-10-29 13:52:29,237 - INFO     - Added edge (5, 1)
2025-10-29 13:52:29,237 - INFO     - Added edge (5, 2)
2025-10-29 13:52:29,237 - INFO     - Added edge (5, 3)
2025-10-29 13:52:29,238 - INFO     - Added edge (5, 4)
2025-10-29 13:52:29,238 - INFO     - Added edge (6, 0)
2025-10-29 13:52:29,238 - INFO     - Added edge (6, 1)
2025-10-29 13:52:29,238 - INFO     - Added edge (6, 2)
2025-10-29 13:52:29,238 - INFO     - Added edge (6, 3)
2025-10-29 13:52:29,238 - INFO     - Added edge (6, 4)
2025-10-29 13:52:29,238 - INFO     - Added edge (7, 0)
2025-10-29 13:52:29,238 - INFO     - Added edge (7, 1)
2025-10-29 13:52:29,238 - INFO     - Added edge (7, 2)
2025-10-29 13:52:29,238 - INFO     - Added edge (7, 3)
2025-10-29 13:52:29,238 - INFO     - Added edge (7, 4)
2025-10-29 13:52:29,238 - INFO     - Added edge (8, 0)
2025-10-29 13:52:29,238 - INFO     - Added edge (8, 1)
2025-10-29 13:52:29,238 - INFO     - Added edge (8, 2)
2025-10-29 13:52:29,238 - INFO     - Added edge (8, 3)
2025-10-29 13:52:29,238 - INFO     - Added edge (8, 4)
2025-10-29 13:52:29,238 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:52:29,245 - INFO     - 
==========================================================================================
2025-10-29 13:52:29,245 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:29,245 - INFO     - ==========================================================================================
2025-10-29 13:52:29,245 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:29,245 - INFO     -   Input action: 46 (type: int)
2025-10-29 13:52:29,245 - INFO     -   Available edges in graph: 60
2025-10-29 13:52:29,245 - INFO     -   Action index calculation:
2025-10-29 13:52:29,245 - INFO     -     - action % max(num_valid_edges, 1) = 46 % 60 = 46
2025-10-29 13:52:29,245 - INFO     -     - clamped to [0, 59]: 46
2025-10-29 13:52:29,245 - INFO     -   ✓ Extracted merge pair from edge 46: (6, 1)
2025-10-29 13:52:29,245 - INFO     -   ✓ Validation passed
2025-10-29 13:52:29,245 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:29,245 - INFO     -     - Total states before merge: 30
2025-10-29 13:52:29,245 - INFO     -     - Num nodes: 9
2025-10-29 13:52:29,245 - INFO     -     - Num edges: 60
2025-10-29 13:52:29,245 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:29,245 - INFO     -       - Node 6: 5 states
2025-10-29 13:52:29,245 - INFO     -       - Node 1: 2 states
2025-10-29 13:52:29,247 - INFO     -       - Expected product: 10 states
2025-10-29 13:52:29,247 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:29,253 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:52:29,253 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:29,253 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:52:29,354 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:52:29,354 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:52:29,354 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:52:29,354 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:52:29,354 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:52:29,354 - INFO     -   Calling graph_tracker.merge_nodes([6, 1])...
2025-10-29 13:52:29,354 - INFO     - Attempting merge of nodes 6 and 1...
2025-10-29 13:52:29,354 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:52:29,354 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:52:29,354 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:52:29,354 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:52:29,354 - INFO     - 
================================================================================
2025-10-29 13:52:29,356 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:52:29,356 - INFO     - ================================================================================
2025-10-29 13:52:29,356 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:52:29,356 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:52:29,356 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:52:29,357 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:52:29,357 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:52:29,357 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:52:29,357 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:52:29,357 - INFO     -   - Raw f_after length: 10
2025-10-29 13:52:29,357 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:52:29,357 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:52:29,357 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:52:29,358 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:52:29,358 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:52:29,358 - INFO     -   - ts1_id: 6
2025-10-29 13:52:29,358 - INFO     -   - ts2_id: 1
2025-10-29 13:52:29,358 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:52:29,358 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:52:29,358 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:52:29,358 - INFO     -   - Product space size: 10
2025-10-29 13:52:29,358 - INFO     -   - Using product state mapping
2025-10-29 13:52:29,358 - INFO     -   - f_before_product length: 10
2025-10-29 13:52:29,358 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:52:29,358 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:52:29,358 - INFO     -   - delta: 0.7000
2025-10-29 13:52:29,358 - INFO     -   - f_stability: 1.0 - |0.7000| / 2.9000 = 0.7586
2025-10-29 13:52:29,358 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:52:29,358 - INFO     -   - Compared 7 values
2025-10-29 13:52:29,358 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:52:29,358 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:52:29,358 - INFO     -   - states_before: 10
2025-10-29 13:52:29,358 - INFO     -   - states_after: 10
2025-10-29 13:52:29,358 - INFO     -   - delta_states: 0
2025-10-29 13:52:29,358 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:52:29,358 - INFO     -   - ts1_transitions: 13
2025-10-29 13:52:29,358 - INFO     -   - ts2_transitions: 5
2025-10-29 13:52:29,358 - INFO     -   - merged_transitions: 37
2025-10-29 13:52:29,358 - INFO     -   - transition_density_change: 1.9000
2025-10-29 13:52:29,358 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:52:29,358 - INFO     -   - search_signals present: True
2025-10-29 13:52:29,358 - INFO     -   - nodes_expanded: 10
2025-10-29 13:52:29,358 - INFO     -   - search_depth: 2
2025-10-29 13:52:29,358 - INFO     -   - solution_cost: 0
2025-10-29 13:52:29,358 - INFO     -   - branching_factor: 3.7000
2025-10-29 13:52:29,358 - INFO     -   - solution_found: True
2025-10-29 13:52:29,358 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:52:29,358 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:52:29,358 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:52:29,358 - INFO     -   - TS6(5) + TS1(2) → 10 states
2025-10-29 13:52:29,358 - INFO     -   - f_stability=0.759
2025-10-29 13:52:29,358 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:52:29,358 - INFO     -   - solution_found=True
2025-10-29 13:52:29,358 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:52:29,358 - INFO     - 
  Extracted signals:
2025-10-29 13:52:29,358 - INFO     -     - iteration: 0
2025-10-29 13:52:29,358 - INFO     -     - states_before: 10
2025-10-29 13:52:29,358 - INFO     -     - states_after: 10
2025-10-29 13:52:29,358 - INFO     -     - delta_states: 0
2025-10-29 13:52:29,358 - INFO     -     - f_value_stability: 0.7586
2025-10-29 13:52:29,358 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:52:29,358 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:52:29,358 - INFO     -     - nodes_expanded: 10
2025-10-29 13:52:29,358 - INFO     -     - search_depth: 2
2025-10-29 13:52:29,358 - INFO     -     - solution_cost: 0
2025-10-29 13:52:29,358 - INFO     -     - branching_factor: 3.7000
2025-10-29 13:52:29,358 - INFO     -     - solution_found: True
2025-10-29 13:52:29,358 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:52:29,358 - INFO     - 
  Computing reward:
2025-10-29 13:52:29,358 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:52:29,358 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:52:29,358 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:52:29,358 - INFO     -   [1] BRANCHING FACTOR: 3.700 → score 0.607 (tolerable)
2025-10-29 13:52:29,358 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:52:29,358 - INFO     -   [3] F-VALUE STABILITY: 0.251
2025-10-29 13:52:29,358 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:52:29,358 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:52:29,366 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:52:29,366 - INFO     -     = 0.300*0.607 (bf)
2025-10-29 13:52:29,366 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:52:29,366 - INFO     -     + 0.350*0.251 (stability)
2025-10-29 13:52:29,366 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:52:29,366 - INFO     - 
  [BONUSES]:
2025-10-29 13:52:29,366 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:52:29,366 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:52:29,366 - INFO     - 
  [FINAL REWARD]: 0.3236
2025-10-29 13:52:29,366 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:52:29,366 - INFO     -     ✓ Reward computed: 0.3236
2025-10-29 13:52:29,366 - INFO     - 
  Reward component breakdown:
2025-10-29 13:52:29,366 - INFO     -     - bf_score                       0.6067
2025-10-29 13:52:29,366 - INFO     -     - depth_score                    0.8603
2025-10-29 13:52:29,366 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:52:29,366 - INFO     -     - f_stability                    0.2507
2025-10-29 13:52:29,366 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:52:29,366 - INFO     -     - state_score                    0.8000
2025-10-29 13:52:29,366 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:52:29,366 - INFO     -     - composite                      0.5618
2025-10-29 13:52:29,366 - INFO     -     - total                          0.3236
2025-10-29 13:52:29,366 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:52:29,366 - INFO     -   Num remaining nodes: 8
2025-10-29 13:52:29,366 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:52:29,368 - INFO     -   Done: False
2025-10-29 13:52:29,368 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:52:29,370 - INFO     -   ✓ Observation built successfully
2025-10-29 13:52:29,370 - INFO     -     - x shape: (100, 19)
2025-10-29 13:52:29,370 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:52:29,370 - INFO     -     - num_nodes: 8
2025-10-29 13:52:29,370 - INFO     -     - num_edges: 50
2025-10-29 13:52:29,370 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:52:29,370 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:52:29,370 - INFO     -   After: current_merge_step = 1
2025-10-29 13:52:29,370 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:52:29,370 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:52:29,370 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:52:29,372 - INFO     -   ✓ Step logged
2025-10-29 13:52:29,372 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:52:29,372 - INFO     -   Returning:
2025-10-29 13:52:29,372 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:52:29,372 - INFO     -     - reward: 0.3236
2025-10-29 13:52:29,372 - INFO     -     - done: False
2025-10-29 13:52:29,372 - INFO     -     - truncated: False
2025-10-29 13:52:29,372 - INFO     -     - info: 19 keys
2025-10-29 13:52:29,372 - INFO     - ==========================================================================================

2025-10-29 13:52:29,375 - INFO     - 
==========================================================================================
2025-10-29 13:52:29,375 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:52:29,375 - INFO     - ==========================================================================================
2025-10-29 13:52:29,375 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:52:29,375 - INFO     -   Input action: 38 (type: int)
2025-10-29 13:52:29,375 - INFO     -   Available edges in graph: 50
2025-10-29 13:52:29,375 - INFO     -   Action index calculation:
2025-10-29 13:52:29,375 - INFO     -     - action % max(num_valid_edges, 1) = 38 % 50 = 38
2025-10-29 13:52:29,375 - INFO     -     - clamped to [0, 49]: 38
2025-10-29 13:52:29,375 - INFO     -   ✓ Extracted merge pair from edge 38: (8, 0)
2025-10-29 13:52:29,383 - INFO     -   ✓ Validation passed
2025-10-29 13:52:29,383 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:52:29,383 - INFO     -     - Total states before merge: 33
2025-10-29 13:52:29,383 - INFO     -     - Num nodes: 8
2025-10-29 13:52:29,383 - INFO     -     - Num edges: 50
2025-10-29 13:52:29,383 - INFO     - 
    Nodes being merged:
2025-10-29 13:52:29,383 - INFO     -       - Node 8: 5 states
2025-10-29 13:52:29,383 - INFO     -       - Node 0: 2 states
2025-10-29 13:52:29,383 - INFO     -       - Expected product: 10 states
2025-10-29 13:52:29,383 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:52:29,393 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:52:29,393 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:52:29,393 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:52:59,405 - ERROR    - 
❌ STEP FAILED: FD did not acknowledge merge within 30.0s (waited 30.0s)
2025-10-29 13:52:59,405 - ERROR    - Traceback:
Traceback (most recent call last):
  File "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\merge_env.py", line 929, in _step_real
    raise TimeoutError(
TimeoutError: FD did not acknowledge merge within 30.0s (waited 30.0s)

2025-10-29 13:52:59,405 - INFO     - ==========================================================================================

2025-10-29 13:52:59,429 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:52:59,437 - INFO     - [Handshake] Building FD command:
2025-10-29 13:52:59,437 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:52:59,437 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_02.pddl
2025-10-29 13:52:59,437 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:52:59,441 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:00,043 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:00,043 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:00,043 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:00,368 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:00,368 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:00,368 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:00,369 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:00,369 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:00,369 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:00,369 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:00,369 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:00,369 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:00,369 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:00,369 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:00,369 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:00,369 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:00,369 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:00,369 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:00,369 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:00,369 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:00,369 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:00,370 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:00,370 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:00,370 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:00,370 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:00,370 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:00,371 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:00,371 - INFO     - Added edge (0, 1)
2025-10-29 13:53:00,371 - INFO     - Added edge (0, 2)
2025-10-29 13:53:00,371 - INFO     - Added edge (0, 3)
2025-10-29 13:53:00,371 - INFO     - Added edge (0, 4)
2025-10-29 13:53:00,371 - INFO     - Added edge (0, 5)
2025-10-29 13:53:00,371 - INFO     - Added edge (0, 6)
2025-10-29 13:53:00,371 - INFO     - Added edge (0, 7)
2025-10-29 13:53:00,371 - INFO     - Added edge (0, 8)
2025-10-29 13:53:00,371 - INFO     - Added edge (1, 0)
2025-10-29 13:53:00,371 - INFO     - Added edge (1, 2)
2025-10-29 13:53:00,371 - INFO     - Added edge (1, 3)
2025-10-29 13:53:00,371 - INFO     - Added edge (1, 4)
2025-10-29 13:53:00,372 - INFO     - Added edge (1, 5)
2025-10-29 13:53:00,372 - INFO     - Added edge (1, 6)
2025-10-29 13:53:00,372 - INFO     - Added edge (1, 7)
2025-10-29 13:53:00,372 - INFO     - Added edge (1, 8)
2025-10-29 13:53:00,372 - INFO     - Added edge (2, 0)
2025-10-29 13:53:00,372 - INFO     - Added edge (2, 1)
2025-10-29 13:53:00,372 - INFO     - Added edge (2, 3)
2025-10-29 13:53:00,372 - INFO     - Added edge (2, 4)
2025-10-29 13:53:00,372 - INFO     - Added edge (2, 5)
2025-10-29 13:53:00,372 - INFO     - Added edge (2, 6)
2025-10-29 13:53:00,372 - INFO     - Added edge (2, 7)
2025-10-29 13:53:00,372 - INFO     - Added edge (2, 8)
2025-10-29 13:53:00,372 - INFO     - Added edge (3, 0)
2025-10-29 13:53:00,372 - INFO     - Added edge (3, 1)
2025-10-29 13:53:00,372 - INFO     - Added edge (3, 2)
2025-10-29 13:53:00,372 - INFO     - Added edge (3, 4)
2025-10-29 13:53:00,372 - INFO     - Added edge (3, 5)
2025-10-29 13:53:00,372 - INFO     - Added edge (3, 6)
2025-10-29 13:53:00,372 - INFO     - Added edge (3, 7)
2025-10-29 13:53:00,372 - INFO     - Added edge (3, 8)
2025-10-29 13:53:00,373 - INFO     - Added edge (4, 0)
2025-10-29 13:53:00,373 - INFO     - Added edge (4, 1)
2025-10-29 13:53:00,373 - INFO     - Added edge (4, 2)
2025-10-29 13:53:00,373 - INFO     - Added edge (4, 3)
2025-10-29 13:53:00,373 - INFO     - Added edge (4, 5)
2025-10-29 13:53:00,373 - INFO     - Added edge (4, 6)
2025-10-29 13:53:00,373 - INFO     - Added edge (4, 7)
2025-10-29 13:53:00,373 - INFO     - Added edge (4, 8)
2025-10-29 13:53:00,373 - INFO     - Added edge (5, 0)
2025-10-29 13:53:00,373 - INFO     - Added edge (5, 1)
2025-10-29 13:53:00,373 - INFO     - Added edge (5, 2)
2025-10-29 13:53:00,373 - INFO     - Added edge (5, 3)
2025-10-29 13:53:00,373 - INFO     - Added edge (5, 4)
2025-10-29 13:53:00,373 - INFO     - Added edge (6, 0)
2025-10-29 13:53:00,373 - INFO     - Added edge (6, 1)
2025-10-29 13:53:00,373 - INFO     - Added edge (6, 2)
2025-10-29 13:53:00,373 - INFO     - Added edge (6, 3)
2025-10-29 13:53:00,373 - INFO     - Added edge (6, 4)
2025-10-29 13:53:00,373 - INFO     - Added edge (7, 0)
2025-10-29 13:53:00,373 - INFO     - Added edge (7, 1)
2025-10-29 13:53:00,373 - INFO     - Added edge (7, 2)
2025-10-29 13:53:00,374 - INFO     - Added edge (7, 3)
2025-10-29 13:53:00,374 - INFO     - Added edge (7, 4)
2025-10-29 13:53:00,374 - INFO     - Added edge (8, 0)
2025-10-29 13:53:00,374 - INFO     - Added edge (8, 1)
2025-10-29 13:53:00,374 - INFO     - Added edge (8, 2)
2025-10-29 13:53:00,374 - INFO     - Added edge (8, 3)
2025-10-29 13:53:00,374 - INFO     - Added edge (8, 4)
2025-10-29 13:53:00,374 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:00,380 - INFO     - 
==========================================================================================
2025-10-29 13:53:00,380 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:00,380 - INFO     - ==========================================================================================
2025-10-29 13:53:00,381 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:00,381 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:53:00,381 - INFO     -   Available edges in graph: 60
2025-10-29 13:53:00,381 - INFO     -   Action index calculation:
2025-10-29 13:53:00,381 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 60 = 1
2025-10-29 13:53:00,381 - INFO     -     - clamped to [0, 59]: 1
2025-10-29 13:53:00,381 - INFO     -   ✓ Extracted merge pair from edge 1: (0, 2)
2025-10-29 13:53:00,381 - INFO     -   ✓ Validation passed
2025-10-29 13:53:00,381 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:00,381 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:00,381 - INFO     -     - Num nodes: 9
2025-10-29 13:53:00,381 - INFO     -     - Num edges: 60
2025-10-29 13:53:00,382 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:00,382 - INFO     -       - Node 0: 2 states
2025-10-29 13:53:00,382 - INFO     -       - Node 2: 2 states
2025-10-29 13:53:00,382 - INFO     -       - Expected product: 4 states
2025-10-29 13:53:00,382 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:00,389 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:53:00,389 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:00,389 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:53:00,489 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:00,489 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:00,490 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:53:00,490 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:00,490 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:00,490 - INFO     -   Calling graph_tracker.merge_nodes([0, 2])...
2025-10-29 13:53:00,490 - INFO     - Attempting merge of nodes 0 and 2...
2025-10-29 13:53:00,490 - INFO     - Successfully merged nodes into new node 9 with 4 states.
2025-10-29 13:53:00,490 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:00,491 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:00,491 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:53:00,491 - INFO     - 
================================================================================
2025-10-29 13:53:00,491 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:53:00,491 - INFO     - ================================================================================
2025-10-29 13:53:00,491 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:00,491 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:53:00,491 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:53:00,492 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:00,492 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:00,492 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:00,492 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:00,492 - INFO     -   - Raw f_after length: 4
2025-10-29 13:53:00,492 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:00,492 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:00,492 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:00,492 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:53:00,492 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:00,492 - INFO     -   - ts1_id: 0
2025-10-29 13:53:00,492 - INFO     -   - ts2_id: 2
2025-10-29 13:53:00,493 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:00,493 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:00,493 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:53:00,493 - INFO     -   - Product space size: 4
2025-10-29 13:53:00,493 - INFO     -   - Using product state mapping
2025-10-29 13:53:00,493 - INFO     -   - f_before_product length: 4
2025-10-29 13:53:00,493 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:53:00,493 - INFO     -   - avg_f_after:  1.0000 (4 valid states)
2025-10-29 13:53:00,493 - INFO     -   - delta: 0.2500
2025-10-29 13:53:00,493 - INFO     -   - f_stability: 1.0 - |0.2500| / 0.7500 = 0.6667
2025-10-29 13:53:00,493 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:00,493 - INFO     -   - Compared 4 values
2025-10-29 13:53:00,493 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:00,493 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:00,494 - INFO     -   - states_before: 4
2025-10-29 13:53:00,494 - INFO     -   - states_after: 4
2025-10-29 13:53:00,494 - INFO     -   - delta_states: 0
2025-10-29 13:53:00,494 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:00,494 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:00,494 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:00,494 - INFO     -   - merged_transitions: 20
2025-10-29 13:53:00,494 - INFO     -   - transition_density_change: 2.5000
2025-10-29 13:53:00,494 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:00,494 - INFO     -   - search_signals present: True
2025-10-29 13:53:00,494 - INFO     -   - nodes_expanded: 4
2025-10-29 13:53:00,494 - INFO     -   - search_depth: 0
2025-10-29 13:53:00,494 - INFO     -   - solution_cost: 0
2025-10-29 13:53:00,494 - INFO     -   - branching_factor: 5.0000
2025-10-29 13:53:00,494 - INFO     -   - solution_found: True
2025-10-29 13:53:00,494 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:00,495 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:00,495 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:53:00,495 - INFO     -   - TS0(2) + TS2(2) → 4 states
2025-10-29 13:53:00,495 - INFO     -   - f_stability=0.667
2025-10-29 13:53:00,495 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:53:00,495 - INFO     -   - solution_found=True
2025-10-29 13:53:00,495 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:00,495 - INFO     - 
  Extracted signals:
2025-10-29 13:53:00,495 - INFO     -     - iteration: 0
2025-10-29 13:53:00,495 - INFO     -     - states_before: 4
2025-10-29 13:53:00,495 - INFO     -     - states_after: 4
2025-10-29 13:53:00,495 - INFO     -     - delta_states: 0
2025-10-29 13:53:00,495 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:53:00,495 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:00,495 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:00,495 - INFO     -     - nodes_expanded: 4
2025-10-29 13:53:00,495 - INFO     -     - search_depth: 0
2025-10-29 13:53:00,495 - INFO     -     - solution_cost: 0
2025-10-29 13:53:00,495 - INFO     -     - branching_factor: 5.0000
2025-10-29 13:53:00,495 - INFO     -     - solution_found: True
2025-10-29 13:53:00,495 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:00,495 - INFO     - 
  Computing reward:
2025-10-29 13:53:00,495 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:00,495 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:00,495 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:00,495 - INFO     -   [1] BRANCHING FACTOR: 5.000 → score 0.433 (tolerable)
2025-10-29 13:53:00,496 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:53:00,496 - INFO     -   [3] F-VALUE STABILITY: 0.176
2025-10-29 13:53:00,496 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:00,496 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:00,497 - INFO     - 
  [COMPOSITE]: 0.412
2025-10-29 13:53:00,497 - INFO     -     = 0.300*0.433 (bf)
2025-10-29 13:53:00,497 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:53:00,497 - INFO     -     + 0.350*0.176 (stability)
2025-10-29 13:53:00,497 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:00,497 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:00,497 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:00,497 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:00,497 - INFO     - 
  [FINAL REWARD]: 0.0230
2025-10-29 13:53:00,497 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:00,497 - INFO     -     ✓ Reward computed: 0.0230
2025-10-29 13:53:00,497 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:00,497 - INFO     -     - bf_score                       0.4333
2025-10-29 13:53:00,497 - INFO     -     - depth_score                    0.5000
2025-10-29 13:53:00,497 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:00,498 - INFO     -     - f_stability                    0.1757
2025-10-29 13:53:00,498 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:00,498 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:00,498 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:00,498 - INFO     -     - composite                      0.4115
2025-10-29 13:53:00,498 - INFO     -     - total                          0.0230
2025-10-29 13:53:00,498 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:00,498 - INFO     -   Num remaining nodes: 8
2025-10-29 13:53:00,498 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:53:00,498 - INFO     -   Done: False
2025-10-29 13:53:00,498 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:00,499 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:00,499 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:00,499 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:00,500 - INFO     -     - num_nodes: 8
2025-10-29 13:53:00,500 - INFO     -     - num_edges: 44
2025-10-29 13:53:00,500 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:00,500 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:53:00,500 - INFO     -   After: current_merge_step = 1
2025-10-29 13:53:00,500 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:00,500 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:00,500 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:00,501 - INFO     -   ✓ Step logged
2025-10-29 13:53:00,501 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:00,501 - INFO     -   Returning:
2025-10-29 13:53:00,501 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:00,501 - INFO     -     - reward: 0.0230
2025-10-29 13:53:00,501 - INFO     -     - done: False
2025-10-29 13:53:00,501 - INFO     -     - truncated: False
2025-10-29 13:53:00,501 - INFO     -     - info: 19 keys
2025-10-29 13:53:00,502 - INFO     - ==========================================================================================

2025-10-29 13:53:00,506 - INFO     - 
==========================================================================================
2025-10-29 13:53:00,506 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:00,506 - INFO     - ==========================================================================================
2025-10-29 13:53:00,506 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:00,506 - INFO     -   Input action: 5 (type: int)
2025-10-29 13:53:00,506 - INFO     -   Available edges in graph: 44
2025-10-29 13:53:00,506 - INFO     -   Action index calculation:
2025-10-29 13:53:00,506 - INFO     -     - action % max(num_valid_edges, 1) = 5 % 44 = 5
2025-10-29 13:53:00,506 - INFO     -     - clamped to [0, 43]: 5
2025-10-29 13:53:00,506 - INFO     -   ✓ Extracted merge pair from edge 5: (1, 8)
2025-10-29 13:53:00,506 - INFO     -   ✓ Validation passed
2025-10-29 13:53:00,506 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:00,506 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:00,506 - INFO     -     - Num nodes: 8
2025-10-29 13:53:00,507 - INFO     -     - Num edges: 44
2025-10-29 13:53:00,507 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:00,507 - INFO     -       - Node 1: 2 states
2025-10-29 13:53:00,507 - INFO     -       - Node 8: 5 states
2025-10-29 13:53:00,507 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:00,507 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:00,514 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:53:00,515 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:00,515 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:53:00,615 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:00,615 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:00,615 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:53:00,615 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:00,615 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:00,615 - INFO     -   Calling graph_tracker.merge_nodes([1, 8])...
2025-10-29 13:53:00,615 - INFO     - Attempting merge of nodes 1 and 8...
2025-10-29 13:53:00,615 - INFO     - Successfully merged nodes into new node 10 with 10 states.
2025-10-29 13:53:00,615 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:00,615 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:00,617 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:53:00,617 - INFO     - 
================================================================================
2025-10-29 13:53:00,617 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:53:00,617 - INFO     - ================================================================================
2025-10-29 13:53:00,617 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:00,617 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:53:00,617 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:53:00,617 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:00,618 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:00,618 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:00,618 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:00,618 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:00,618 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:00,618 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:00,618 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:00,618 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:00,618 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:00,618 - INFO     -   - ts1_id: 1
2025-10-29 13:53:00,618 - INFO     -   - ts2_id: 8
2025-10-29 13:53:00,618 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:00,618 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:00,618 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:53:00,618 - INFO     -   - Product space size: 10
2025-10-29 13:53:00,618 - INFO     -   - Using product state mapping
2025-10-29 13:53:00,618 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:00,618 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:53:00,618 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:53:00,618 - INFO     -   - delta: 0.4000
2025-10-29 13:53:00,618 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:53:00,618 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:00,618 - INFO     -   - Compared 7 values
2025-10-29 13:53:00,618 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:00,618 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:00,619 - INFO     -   - states_before: 10
2025-10-29 13:53:00,619 - INFO     -   - states_after: 10
2025-10-29 13:53:00,619 - INFO     -   - delta_states: 0
2025-10-29 13:53:00,619 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:00,619 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:00,619 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:00,619 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:00,619 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:00,619 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:00,619 - INFO     -   - search_signals present: True
2025-10-29 13:53:00,619 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:00,619 - INFO     -   - search_depth: 1
2025-10-29 13:53:00,619 - INFO     -   - solution_cost: 0
2025-10-29 13:53:00,619 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:00,619 - INFO     -   - solution_found: True
2025-10-29 13:53:00,619 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:00,619 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:00,620 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:53:00,620 - INFO     -   - TS1(2) + TS8(5) → 10 states
2025-10-29 13:53:00,620 - INFO     -   - f_stability=0.862
2025-10-29 13:53:00,620 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:00,620 - INFO     -   - solution_found=True
2025-10-29 13:53:00,620 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:00,620 - INFO     - 
  Extracted signals:
2025-10-29 13:53:00,620 - INFO     -     - iteration: 1
2025-10-29 13:53:00,620 - INFO     -     - states_before: 10
2025-10-29 13:53:00,620 - INFO     -     - states_after: 10
2025-10-29 13:53:00,620 - INFO     -     - delta_states: 0
2025-10-29 13:53:00,620 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:53:00,620 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:00,620 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:00,620 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:00,620 - INFO     -     - search_depth: 1
2025-10-29 13:53:00,620 - INFO     -     - solution_cost: 0
2025-10-29 13:53:00,620 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:00,621 - INFO     -     - solution_found: True
2025-10-29 13:53:00,621 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:00,621 - INFO     - 
  Computing reward:
2025-10-29 13:53:00,621 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:00,621 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:00,621 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:00,621 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:00,621 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:53:00,621 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:53:00,621 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:00,621 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:00,622 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:53:00,622 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:00,622 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:53:00,622 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:53:00,622 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:00,622 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:00,622 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:00,622 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:00,622 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:53:00,622 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:00,622 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:53:00,622 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:00,622 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:00,622 - INFO     -     - depth_score                    0.9119
2025-10-29 13:53:00,622 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:00,622 - INFO     -     - f_stability                    0.2913
2025-10-29 13:53:00,622 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:00,622 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:00,622 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:00,624 - INFO     -     - composite                      0.5743
2025-10-29 13:53:00,624 - INFO     -     - total                          0.3487
2025-10-29 13:53:00,624 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:00,624 - INFO     -   Num remaining nodes: 7
2025-10-29 13:53:00,624 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:53:00,624 - INFO     -   Done: False
2025-10-29 13:53:00,624 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:00,625 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:00,625 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:00,625 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:00,625 - INFO     -     - num_nodes: 7
2025-10-29 13:53:00,625 - INFO     -     - num_edges: 36
2025-10-29 13:53:00,625 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:00,625 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:53:00,626 - INFO     -   After: current_merge_step = 2
2025-10-29 13:53:00,626 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:00,626 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:00,626 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:00,627 - INFO     -   ✓ Step logged
2025-10-29 13:53:00,627 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:00,627 - INFO     -   Returning:
2025-10-29 13:53:00,627 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:00,627 - INFO     -     - reward: 0.3487
2025-10-29 13:53:00,627 - INFO     -     - done: False
2025-10-29 13:53:00,627 - INFO     -     - truncated: False
2025-10-29 13:53:00,627 - INFO     -     - info: 19 keys
2025-10-29 13:53:00,628 - INFO     - ==========================================================================================

2025-10-29 13:53:00,631 - INFO     - 
==========================================================================================
2025-10-29 13:53:00,631 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:00,631 - INFO     - ==========================================================================================
2025-10-29 13:53:00,631 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:00,631 - INFO     -   Input action: 33 (type: int)
2025-10-29 13:53:00,631 - INFO     -   Available edges in graph: 36
2025-10-29 13:53:00,631 - INFO     -   Action index calculation:
2025-10-29 13:53:00,631 - INFO     -     - action % max(num_valid_edges, 1) = 33 % 36 = 33
2025-10-29 13:53:00,631 - INFO     -     - clamped to [0, 35]: 33
2025-10-29 13:53:00,631 - INFO     -   ✓ Extracted merge pair from edge 33: (10, 6)
2025-10-29 13:53:00,631 - INFO     -   ✓ Validation passed
2025-10-29 13:53:00,631 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:00,631 - INFO     -     - Total states before merge: 33
2025-10-29 13:53:00,631 - INFO     -     - Num nodes: 7
2025-10-29 13:53:00,632 - INFO     -     - Num edges: 36
2025-10-29 13:53:00,632 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:00,632 - INFO     -       - Node 10: 10 states
2025-10-29 13:53:00,632 - INFO     -       - Node 6: 5 states
2025-10-29 13:53:00,632 - INFO     -       - Expected product: 50 states
2025-10-29 13:53:00,632 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:00,639 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:53:00,639 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:00,639 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:53:00,740 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:00,740 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:00,740 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:53:00,741 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:00,741 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:00,741 - INFO     -   Calling graph_tracker.merge_nodes([10, 6])...
2025-10-29 13:53:00,741 - INFO     - Attempting merge of nodes 10 and 6...
2025-10-29 13:53:00,741 - INFO     - Successfully merged nodes into new node 11 with 50 states.
2025-10-29 13:53:00,741 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:00,741 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:00,741 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:53:00,741 - INFO     - 
================================================================================
2025-10-29 13:53:00,741 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:53:00,742 - INFO     - ================================================================================
2025-10-29 13:53:00,742 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:00,742 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:53:00,742 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:53:00,742 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:00,742 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:00,742 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:53:00,742 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:00,742 - INFO     -   - Raw f_after length: 50
2025-10-29 13:53:00,742 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:00,742 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:53:00,742 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:00,743 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:53:00,743 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:00,743 - INFO     -   - ts1_id: 10
2025-10-29 13:53:00,743 - INFO     -   - ts2_id: 6
2025-10-29 13:53:00,743 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:00,743 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:00,743 - INFO     -   - ts1_size: 10, ts2_size: 5
2025-10-29 13:53:00,743 - INFO     -   - Product space size: 50
2025-10-29 13:53:00,743 - INFO     -   - Using product state mapping
2025-10-29 13:53:00,743 - INFO     -   - f_before_product length: 50
2025-10-29 13:53:00,743 - INFO     -   - avg_f_before: 3.9600 (50 valid states)
2025-10-29 13:53:00,743 - INFO     -   - avg_f_after:  6.3800 (50 valid states)
2025-10-29 13:53:00,743 - INFO     -   - delta: 2.4200
2025-10-29 13:53:00,744 - INFO     -   - f_stability: 1.0 - |2.4200| / 3.9600 = 0.3889
2025-10-29 13:53:00,744 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:00,744 - INFO     -   - Compared 15 values
2025-10-29 13:53:00,744 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:00,744 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:00,744 - INFO     -   - states_before: 50
2025-10-29 13:53:00,744 - INFO     -   - states_after: 50
2025-10-29 13:53:00,744 - INFO     -   - delta_states: 0
2025-10-29 13:53:00,744 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:00,744 - INFO     -   - ts1_transitions: 40
2025-10-29 13:53:00,744 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:00,744 - INFO     -   - merged_transitions: 260
2025-10-29 13:53:00,744 - INFO     -   - transition_density_change: 4.1400
2025-10-29 13:53:00,744 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:00,745 - INFO     -   - search_signals present: True
2025-10-29 13:53:00,745 - INFO     -   - nodes_expanded: 50
2025-10-29 13:53:00,745 - INFO     -   - search_depth: 3
2025-10-29 13:53:00,745 - INFO     -   - solution_cost: 0
2025-10-29 13:53:00,745 - INFO     -   - branching_factor: 5.2000
2025-10-29 13:53:00,745 - INFO     -   - solution_found: True
2025-10-29 13:53:00,745 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:00,745 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:00,745 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:53:00,745 - INFO     -   - TS10(10) + TS6(5) → 50 states
2025-10-29 13:53:00,745 - INFO     -   - f_stability=0.389
2025-10-29 13:53:00,745 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:53:00,746 - INFO     -   - solution_found=True
2025-10-29 13:53:00,746 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:00,746 - INFO     - 
  Extracted signals:
2025-10-29 13:53:00,746 - INFO     -     - iteration: 2
2025-10-29 13:53:00,746 - INFO     -     - states_before: 50
2025-10-29 13:53:00,746 - INFO     -     - states_after: 50
2025-10-29 13:53:00,746 - INFO     -     - delta_states: 0
2025-10-29 13:53:00,746 - INFO     -     - f_value_stability: 0.3889
2025-10-29 13:53:00,746 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:00,746 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:00,746 - INFO     -     - nodes_expanded: 50
2025-10-29 13:53:00,746 - INFO     -     - search_depth: 3
2025-10-29 13:53:00,746 - INFO     -     - solution_cost: 0
2025-10-29 13:53:00,746 - INFO     -     - branching_factor: 5.2000
2025-10-29 13:53:00,746 - INFO     -     - solution_found: True
2025-10-29 13:53:00,746 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:00,746 - INFO     - 
  Computing reward:
2025-10-29 13:53:00,746 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:00,747 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:00,747 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:00,747 - INFO     -   [1] BRANCHING FACTOR: 5.200 → score 0.407 (tolerable)
2025-10-29 13:53:00,747 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:00,747 - INFO     -   [3] F-VALUE STABILITY: 0.412
2025-10-29 13:53:00,747 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:00,747 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:00,747 - INFO     - 
  [COMPOSITE]: 0.551
2025-10-29 13:53:00,747 - INFO     -     = 0.300*0.407 (bf)
2025-10-29 13:53:00,747 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:00,747 - INFO     -     + 0.350*0.412 (stability)
2025-10-29 13:53:00,747 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:00,747 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:00,748 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:00,748 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:00,748 - INFO     - 
  [FINAL REWARD]: 0.4018
2025-10-29 13:53:00,748 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:00,748 - INFO     -     ✓ Reward computed: 0.4018
2025-10-29 13:53:00,748 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:00,749 - INFO     -     - bf_score                       0.4067
2025-10-29 13:53:00,749 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:00,749 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:00,749 - INFO     -     - f_stability                    0.4119
2025-10-29 13:53:00,749 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:00,749 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:00,749 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:00,749 - INFO     -     - composite                      0.5509
2025-10-29 13:53:00,749 - INFO     -     - total                          0.4018
2025-10-29 13:53:00,750 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:00,750 - INFO     -   Num remaining nodes: 6
2025-10-29 13:53:00,750 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:53:00,750 - INFO     -   Done: False
2025-10-29 13:53:00,750 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:00,750 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:00,750 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:00,750 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:00,750 - INFO     -     - num_nodes: 6
2025-10-29 13:53:00,751 - INFO     -     - num_edges: 28
2025-10-29 13:53:00,751 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:00,751 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:53:00,751 - INFO     -   After: current_merge_step = 3
2025-10-29 13:53:00,751 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:00,751 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:00,751 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:00,753 - INFO     -   ✓ Step logged
2025-10-29 13:53:00,753 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:00,753 - INFO     -   Returning:
2025-10-29 13:53:00,753 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:00,753 - INFO     -     - reward: 0.4018
2025-10-29 13:53:00,753 - INFO     -     - done: False
2025-10-29 13:53:00,753 - INFO     -     - truncated: False
2025-10-29 13:53:00,753 - INFO     -     - info: 19 keys
2025-10-29 13:53:00,753 - INFO     - ==========================================================================================

2025-10-29 13:53:00,757 - INFO     - 
==========================================================================================
2025-10-29 13:53:00,757 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:00,757 - INFO     - ==========================================================================================
2025-10-29 13:53:00,757 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:00,757 - INFO     -   Input action: 10 (type: int)
2025-10-29 13:53:00,757 - INFO     -   Available edges in graph: 28
2025-10-29 13:53:00,757 - INFO     -   Action index calculation:
2025-10-29 13:53:00,757 - INFO     -     - action % max(num_valid_edges, 1) = 10 % 28 = 10
2025-10-29 13:53:00,758 - INFO     -     - clamped to [0, 27]: 10
2025-10-29 13:53:00,758 - INFO     -   ✓ Extracted merge pair from edge 10: (5, 3)
2025-10-29 13:53:00,758 - INFO     -   ✓ Validation passed
2025-10-29 13:53:00,758 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:00,758 - INFO     -     - Total states before merge: 68
2025-10-29 13:53:00,758 - INFO     -     - Num nodes: 6
2025-10-29 13:53:00,758 - INFO     -     - Num edges: 28
2025-10-29 13:53:00,758 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:00,758 - INFO     -       - Node 5: 5 states
2025-10-29 13:53:00,758 - INFO     -       - Node 3: 2 states
2025-10-29 13:53:00,758 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:00,758 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:00,764 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:53:00,764 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:00,764 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:53:00,865 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:00,865 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:00,865 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:53:00,866 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:00,866 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:00,866 - INFO     -   Calling graph_tracker.merge_nodes([5, 3])...
2025-10-29 13:53:00,866 - INFO     - Attempting merge of nodes 5 and 3...
2025-10-29 13:53:00,866 - INFO     - Successfully merged nodes into new node 12 with 10 states.
2025-10-29 13:53:00,866 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:00,866 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:00,866 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:53:00,866 - INFO     - 
================================================================================
2025-10-29 13:53:00,866 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:53:00,866 - INFO     - ================================================================================
2025-10-29 13:53:00,866 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:00,866 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:53:00,866 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:53:00,867 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:00,867 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:00,867 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:00,867 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:00,867 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:00,867 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:00,867 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:00,867 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:00,867 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:00,867 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:00,867 - INFO     -   - ts1_id: 5
2025-10-29 13:53:00,867 - INFO     -   - ts2_id: 3
2025-10-29 13:53:00,867 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:00,867 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:00,867 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:00,867 - INFO     -   - Product space size: 10
2025-10-29 13:53:00,867 - INFO     -   - Using product state mapping
2025-10-29 13:53:00,867 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:00,867 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:00,867 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:53:00,867 - INFO     -   - delta: 0.5000
2025-10-29 13:53:00,867 - INFO     -   - f_stability: 1.0 - |0.5000| / 2.8000 = 0.8214
2025-10-29 13:53:00,869 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:00,869 - INFO     -   - Compared 7 values
2025-10-29 13:53:00,869 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:00,869 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:00,869 - INFO     -   - states_before: 10
2025-10-29 13:53:00,869 - INFO     -   - states_after: 10
2025-10-29 13:53:00,869 - INFO     -   - delta_states: 0
2025-10-29 13:53:00,869 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:00,869 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:00,869 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:00,869 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:00,869 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:00,869 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:00,869 - INFO     -   - search_signals present: True
2025-10-29 13:53:00,869 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:00,869 - INFO     -   - search_depth: 1
2025-10-29 13:53:00,869 - INFO     -   - solution_cost: 2
2025-10-29 13:53:00,869 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:00,869 - INFO     -   - solution_found: True
2025-10-29 13:53:00,869 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:00,869 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:00,869 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:53:00,869 - INFO     -   - TS5(5) + TS3(2) → 10 states
2025-10-29 13:53:00,870 - INFO     -   - f_stability=0.821
2025-10-29 13:53:00,870 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:00,870 - INFO     -   - solution_found=True
2025-10-29 13:53:00,870 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:00,870 - INFO     - 
  Extracted signals:
2025-10-29 13:53:00,870 - INFO     -     - iteration: 3
2025-10-29 13:53:00,870 - INFO     -     - states_before: 10
2025-10-29 13:53:00,870 - INFO     -     - states_after: 10
2025-10-29 13:53:00,870 - INFO     -     - delta_states: 0
2025-10-29 13:53:00,870 - INFO     -     - f_value_stability: 0.8214
2025-10-29 13:53:00,870 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:00,870 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:00,870 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:00,870 - INFO     -     - search_depth: 1
2025-10-29 13:53:00,870 - INFO     -     - solution_cost: 2
2025-10-29 13:53:00,871 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:00,871 - INFO     -     - solution_found: True
2025-10-29 13:53:00,871 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:00,871 - INFO     - 
  Computing reward:
2025-10-29 13:53:00,871 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:00,871 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:00,871 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:00,871 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:00,871 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:53:00,871 - INFO     -   [3] F-VALUE STABILITY: 0.593
2025-10-29 13:53:00,871 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:00,871 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:00,872 - INFO     - 
  [COMPOSITE]: 0.680
2025-10-29 13:53:00,872 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:00,872 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:53:00,872 - INFO     -     + 0.350*0.593 (stability)
2025-10-29 13:53:00,872 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:00,872 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:00,872 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:00,872 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:00,872 - INFO     - 
  [FINAL REWARD]: 0.7602
2025-10-29 13:53:00,872 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:00,872 - INFO     -     ✓ Reward computed: 0.7602
2025-10-29 13:53:00,872 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:00,872 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:00,872 - INFO     -     - depth_score                    0.9119
2025-10-29 13:53:00,872 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:00,873 - INFO     -     - f_stability                    0.5935
2025-10-29 13:53:00,873 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:00,873 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:00,873 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:00,873 - INFO     -     - composite                      0.6801
2025-10-29 13:53:00,873 - INFO     -     - total                          0.7602
2025-10-29 13:53:00,873 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:00,873 - INFO     -   Num remaining nodes: 5
2025-10-29 13:53:00,873 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:53:00,873 - INFO     -   Done: False
2025-10-29 13:53:00,873 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:00,874 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:00,874 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:00,874 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:00,874 - INFO     -     - num_nodes: 5
2025-10-29 13:53:00,874 - INFO     -     - num_edges: 20
2025-10-29 13:53:00,874 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:00,874 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:53:00,874 - INFO     -   After: current_merge_step = 4
2025-10-29 13:53:00,874 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:00,874 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:00,875 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:00,875 - INFO     -   ✓ Step logged
2025-10-29 13:53:00,875 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:00,875 - INFO     -   Returning:
2025-10-29 13:53:00,875 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:00,875 - INFO     -     - reward: 0.7602
2025-10-29 13:53:00,875 - INFO     -     - done: False
2025-10-29 13:53:00,876 - INFO     -     - truncated: False
2025-10-29 13:53:00,876 - INFO     -     - info: 19 keys
2025-10-29 13:53:00,876 - INFO     - ==========================================================================================

2025-10-29 13:53:00,882 - INFO     - 
==========================================================================================
2025-10-29 13:53:00,882 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:00,882 - INFO     - ==========================================================================================
2025-10-29 13:53:00,882 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:00,882 - INFO     -   Input action: 10 (type: int)
2025-10-29 13:53:00,882 - INFO     -   Available edges in graph: 20
2025-10-29 13:53:00,882 - INFO     -   Action index calculation:
2025-10-29 13:53:00,882 - INFO     -     - action % max(num_valid_edges, 1) = 10 % 20 = 10
2025-10-29 13:53:00,882 - INFO     -     - clamped to [0, 19]: 10
2025-10-29 13:53:00,882 - INFO     -   ✓ Extracted merge pair from edge 10: (9, 11)
2025-10-29 13:53:00,882 - INFO     -   ✓ Validation passed
2025-10-29 13:53:00,882 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:00,883 - INFO     -     - Total states before merge: 71
2025-10-29 13:53:00,883 - INFO     -     - Num nodes: 5
2025-10-29 13:53:00,883 - INFO     -     - Num edges: 20
2025-10-29 13:53:00,883 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:00,883 - INFO     -       - Node 9: 4 states
2025-10-29 13:53:00,883 - INFO     -       - Node 11: 50 states
2025-10-29 13:53:00,883 - INFO     -       - Expected product: 200 states
2025-10-29 13:53:00,883 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:00,894 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:53:00,894 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:00,894 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:53:00,995 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:00,995 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:00,995 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:53:00,997 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:00,997 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:00,997 - INFO     -   Calling graph_tracker.merge_nodes([9, 11])...
2025-10-29 13:53:00,997 - INFO     - Attempting merge of nodes 9 and 11...
2025-10-29 13:53:00,997 - INFO     - Successfully merged nodes into new node 13 with 200 states.
2025-10-29 13:53:00,997 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:00,997 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:00,997 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:53:00,997 - INFO     - 
================================================================================
2025-10-29 13:53:00,997 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:53:00,997 - INFO     - ================================================================================
2025-10-29 13:53:00,997 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:00,998 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:53:00,998 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:53:00,998 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:00,998 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:00,998 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:53:00,998 - INFO     -   - Raw ts2_f length: 50
2025-10-29 13:53:00,999 - INFO     -   - Raw f_after length: 200
2025-10-29 13:53:00,999 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:00,999 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:53:00,999 - INFO     -   - ts2_valid: 50 / 50 (removed -50)
2025-10-29 13:53:00,999 - INFO     -   - after_valid: 200 / 200 (removed 0)
2025-10-29 13:53:00,999 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:00,999 - INFO     -   - ts1_id: 9
2025-10-29 13:53:00,999 - INFO     -   - ts2_id: 11
2025-10-29 13:53:00,999 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:00,999 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:00,999 - INFO     -   - ts1_size: 4, ts2_size: 50
2025-10-29 13:53:00,999 - INFO     -   - Product space size: 200
2025-10-29 13:53:00,999 - INFO     -   - Using product state mapping
2025-10-29 13:53:01,000 - INFO     -   - f_before_product length: 200
2025-10-29 13:53:01,002 - INFO     -   - avg_f_before: 6.4050 (200 valid states)
2025-10-29 13:53:01,002 - INFO     -   - avg_f_after:  7.2000 (200 valid states)
2025-10-29 13:53:01,002 - INFO     -   - delta: 0.7950
2025-10-29 13:53:01,002 - INFO     -   - f_stability: 1.0 - |0.7950| / 6.4050 = 0.8759
2025-10-29 13:53:01,002 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:01,002 - INFO     -   - Compared 54 values
2025-10-29 13:53:01,002 - INFO     -   - Significant changes (> 5.0): 10
2025-10-29 13:53:01,002 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:01,002 - INFO     -   - states_before: 200
2025-10-29 13:53:01,002 - INFO     -   - states_after: 200
2025-10-29 13:53:01,002 - INFO     -   - delta_states: 0
2025-10-29 13:53:01,002 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:01,002 - INFO     -   - ts1_transitions: 20
2025-10-29 13:53:01,003 - INFO     -   - ts2_transitions: 260
2025-10-29 13:53:01,003 - INFO     -   - merged_transitions: 1660
2025-10-29 13:53:01,003 - INFO     -   - transition_density_change: 6.9000
2025-10-29 13:53:01,003 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:01,003 - INFO     -   - search_signals present: True
2025-10-29 13:53:01,003 - INFO     -   - nodes_expanded: 200
2025-10-29 13:53:01,003 - INFO     -   - search_depth: 3
2025-10-29 13:53:01,003 - INFO     -   - solution_cost: 0
2025-10-29 13:53:01,003 - INFO     -   - branching_factor: 8.3000
2025-10-29 13:53:01,003 - INFO     -   - solution_found: True
2025-10-29 13:53:01,003 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:01,004 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:01,004 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:53:01,004 - INFO     -   - TS9(4) + TS11(50) → 200 states
2025-10-29 13:53:01,004 - INFO     -   - f_stability=0.876
2025-10-29 13:53:01,004 - INFO     -   - A* nodes_expanded=200
2025-10-29 13:53:01,004 - INFO     -   - solution_found=True
2025-10-29 13:53:01,004 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:01,004 - INFO     - 
  Extracted signals:
2025-10-29 13:53:01,005 - INFO     -     - iteration: 4
2025-10-29 13:53:01,005 - INFO     -     - states_before: 200
2025-10-29 13:53:01,005 - INFO     -     - states_after: 200
2025-10-29 13:53:01,005 - INFO     -     - delta_states: 0
2025-10-29 13:53:01,005 - INFO     -     - f_value_stability: 0.8759
2025-10-29 13:53:01,005 - INFO     -     - num_significant_f_changes: 10
2025-10-29 13:53:01,005 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:01,005 - INFO     -     - nodes_expanded: 200
2025-10-29 13:53:01,005 - INFO     -     - search_depth: 3
2025-10-29 13:53:01,005 - INFO     -     - solution_cost: 0
2025-10-29 13:53:01,005 - INFO     -     - branching_factor: 8.3000
2025-10-29 13:53:01,005 - INFO     -     - solution_found: True
2025-10-29 13:53:01,005 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:01,006 - WARNING  -     ⚠️  High branching factor: 8.3000
2025-10-29 13:53:01,006 - INFO     - 
  Computing reward:
2025-10-29 13:53:01,006 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:01,006 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:01,006 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:01,006 - INFO     -   [1] BRANCHING FACTOR: 8.300 → score 0.100 (high BF, minimal credit)
2025-10-29 13:53:01,006 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:01,006 - INFO     -   [3] F-VALUE STABILITY: 0.798
2025-10-29 13:53:01,007 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:01,007 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:01,007 - INFO     - 
  [COMPOSITE]: 0.594
2025-10-29 13:53:01,007 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:53:01,007 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:01,007 - INFO     -     + 0.350*0.798 (stability)
2025-10-29 13:53:01,007 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:01,007 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:01,007 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:01,007 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:01,007 - INFO     - 
  [FINAL REWARD]: 0.6884
2025-10-29 13:53:01,007 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:01,007 - INFO     -     ✓ Reward computed: 0.6884
2025-10-29 13:53:01,007 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:01,007 - INFO     -     - bf_score                       0.1000
2025-10-29 13:53:01,007 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:01,008 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:01,008 - INFO     -     - f_stability                    0.7985
2025-10-29 13:53:01,008 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:01,008 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:01,008 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:01,008 - INFO     -     - composite                      0.5942
2025-10-29 13:53:01,008 - INFO     -     - total                          0.6884
2025-10-29 13:53:01,008 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:01,008 - INFO     -   Num remaining nodes: 4
2025-10-29 13:53:01,008 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:53:01,008 - INFO     -   Done: False
2025-10-29 13:53:01,008 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:01,009 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:01,009 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:01,009 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:01,009 - INFO     -     - num_nodes: 4
2025-10-29 13:53:01,009 - INFO     -     - num_edges: 12
2025-10-29 13:53:01,009 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:01,009 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:53:01,009 - INFO     -   After: current_merge_step = 5
2025-10-29 13:53:01,009 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:01,009 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:01,010 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:01,010 - INFO     -   ✓ Step logged
2025-10-29 13:53:01,010 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:01,010 - INFO     -   Returning:
2025-10-29 13:53:01,010 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:01,010 - INFO     -     - reward: 0.6884
2025-10-29 13:53:01,010 - INFO     -     - done: False
2025-10-29 13:53:01,011 - INFO     -     - truncated: False
2025-10-29 13:53:01,011 - INFO     -     - info: 19 keys
2025-10-29 13:53:01,011 - INFO     - ==========================================================================================

2025-10-29 13:53:01,016 - INFO     - 
==========================================================================================
2025-10-29 13:53:01,016 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:01,016 - INFO     - ==========================================================================================
2025-10-29 13:53:01,016 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:01,016 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:53:01,016 - INFO     -   Available edges in graph: 12
2025-10-29 13:53:01,016 - INFO     -   Action index calculation:
2025-10-29 13:53:01,016 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 12 = 2
2025-10-29 13:53:01,016 - INFO     -     - clamped to [0, 11]: 2
2025-10-29 13:53:01,016 - INFO     -   ✓ Extracted merge pair from edge 2: (4, 13)
2025-10-29 13:53:01,017 - INFO     -   ✓ Validation passed
2025-10-29 13:53:01,017 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:01,017 - INFO     -     - Total states before merge: 217
2025-10-29 13:53:01,017 - INFO     -     - Num nodes: 4
2025-10-29 13:53:01,017 - INFO     -     - Num edges: 12
2025-10-29 13:53:01,017 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:01,017 - INFO     -       - Node 4: 2 states
2025-10-29 13:53:01,017 - INFO     -       - Node 13: 200 states
2025-10-29 13:53:01,017 - INFO     -       - Expected product: 400 states
2025-10-29 13:53:01,017 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:01,023 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:53:01,023 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:01,023 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:53:01,125 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:01,125 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:01,125 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:53:01,128 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:01,128 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:01,128 - INFO     -   Calling graph_tracker.merge_nodes([4, 13])...
2025-10-29 13:53:01,128 - INFO     - Attempting merge of nodes 4 and 13...
2025-10-29 13:53:01,128 - INFO     - Successfully merged nodes into new node 14 with 400 states.
2025-10-29 13:53:01,128 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:01,128 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:01,128 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:53:01,128 - INFO     - 
================================================================================
2025-10-29 13:53:01,128 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:53:01,128 - INFO     - ================================================================================
2025-10-29 13:53:01,128 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:01,128 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:53:01,128 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:53:01,129 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:01,129 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:01,129 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:01,129 - INFO     -   - Raw ts2_f length: 200
2025-10-29 13:53:01,129 - INFO     -   - Raw f_after length: 400
2025-10-29 13:53:01,129 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:01,130 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:01,130 - INFO     -   - ts2_valid: 200 / 200 (removed -200)
2025-10-29 13:53:01,130 - INFO     -   - after_valid: 357 / 400 (removed 43)
2025-10-29 13:53:01,130 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:01,130 - INFO     -   - ts1_id: 4
2025-10-29 13:53:01,130 - INFO     -   - ts2_id: 13
2025-10-29 13:53:01,130 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:01,130 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:01,130 - INFO     -   - ts1_size: 2, ts2_size: 200
2025-10-29 13:53:01,130 - INFO     -   - Product space size: 400
2025-10-29 13:53:01,130 - INFO     -   - Using product state mapping
2025-10-29 13:53:01,131 - INFO     -   - f_before_product length: 400
2025-10-29 13:53:01,131 - INFO     -   - avg_f_before: 7.2025 (400 valid states)
2025-10-29 13:53:01,131 - INFO     -   - avg_f_after:  7.9748 (357 valid states)
2025-10-29 13:53:01,133 - INFO     -   - delta: 0.7723
2025-10-29 13:53:01,133 - INFO     -   - f_stability: 1.0 - |0.7723| / 7.2025 = 0.8928
2025-10-29 13:53:01,133 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:01,133 - INFO     -   - Compared 202 values
2025-10-29 13:53:01,133 - INFO     -   - Significant changes (> 5.0): 28
2025-10-29 13:53:01,133 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:01,133 - INFO     -   - states_before: 400
2025-10-29 13:53:01,133 - INFO     -   - states_after: 400
2025-10-29 13:53:01,133 - INFO     -   - delta_states: 0
2025-10-29 13:53:01,133 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:01,133 - INFO     -   - ts1_transitions: 3
2025-10-29 13:53:01,133 - INFO     -   - ts2_transitions: 1660
2025-10-29 13:53:01,133 - INFO     -   - merged_transitions: 2880
2025-10-29 13:53:01,134 - INFO     -   - transition_density_change: 3.0425
2025-10-29 13:53:01,134 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:01,134 - INFO     -   - search_signals present: True
2025-10-29 13:53:01,134 - INFO     -   - nodes_expanded: 357
2025-10-29 13:53:01,134 - INFO     -   - search_depth: 3
2025-10-29 13:53:01,134 - INFO     -   - solution_cost: 0
2025-10-29 13:53:01,134 - INFO     -   - branching_factor: 8.0672
2025-10-29 13:53:01,134 - INFO     -   - solution_found: True
2025-10-29 13:53:01,134 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:01,134 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:01,134 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:53:01,134 - INFO     -   - TS4(2) + TS13(200) → 400 states
2025-10-29 13:53:01,135 - INFO     -   - f_stability=0.893
2025-10-29 13:53:01,135 - INFO     -   - A* nodes_expanded=357
2025-10-29 13:53:01,135 - INFO     -   - solution_found=True
2025-10-29 13:53:01,135 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:01,135 - INFO     - 
  Extracted signals:
2025-10-29 13:53:01,135 - INFO     -     - iteration: 5
2025-10-29 13:53:01,135 - INFO     -     - states_before: 400
2025-10-29 13:53:01,135 - INFO     -     - states_after: 400
2025-10-29 13:53:01,135 - INFO     -     - delta_states: 0
2025-10-29 13:53:01,135 - INFO     -     - f_value_stability: 0.8928
2025-10-29 13:53:01,135 - INFO     -     - num_significant_f_changes: 28
2025-10-29 13:53:01,135 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:01,135 - INFO     -     - nodes_expanded: 357
2025-10-29 13:53:01,135 - INFO     -     - search_depth: 3
2025-10-29 13:53:01,135 - INFO     -     - solution_cost: 0
2025-10-29 13:53:01,135 - INFO     -     - branching_factor: 8.0672
2025-10-29 13:53:01,135 - INFO     -     - solution_found: True
2025-10-29 13:53:01,135 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:01,136 - WARNING  -     ⚠️  High branching factor: 8.0672
2025-10-29 13:53:01,136 - INFO     - 
  Computing reward:
2025-10-29 13:53:01,136 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:01,136 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:01,136 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:01,136 - INFO     -   [1] BRANCHING FACTOR: 8.067 → score 0.100 (high BF, minimal credit)
2025-10-29 13:53:01,136 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:01,137 - INFO     -   [3] F-VALUE STABILITY: 0.876
2025-10-29 13:53:01,137 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:01,137 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:01,137 - INFO     - 
  [COMPOSITE]: 0.621
2025-10-29 13:53:01,137 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:53:01,137 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:01,137 - INFO     -     + 0.350*0.876 (stability)
2025-10-29 13:53:01,137 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:01,137 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:01,137 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:01,137 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:01,137 - INFO     - 
  [FINAL REWARD]: 0.7424
2025-10-29 13:53:01,137 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:01,137 - INFO     -     ✓ Reward computed: 0.7424
2025-10-29 13:53:01,137 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:01,138 - INFO     -     - bf_score                       0.1000
2025-10-29 13:53:01,138 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:01,138 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:01,138 - INFO     -     - f_stability                    0.8756
2025-10-29 13:53:01,138 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:01,138 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:01,138 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:01,138 - INFO     -     - composite                      0.6212
2025-10-29 13:53:01,138 - INFO     -     - total                          0.7424
2025-10-29 13:53:01,138 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:01,138 - INFO     -   Num remaining nodes: 3
2025-10-29 13:53:01,138 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:53:01,138 - INFO     -   Done: False
2025-10-29 13:53:01,138 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:01,139 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:01,139 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:01,139 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:01,139 - INFO     -     - num_nodes: 3
2025-10-29 13:53:01,139 - INFO     -     - num_edges: 6
2025-10-29 13:53:01,139 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:01,139 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:53:01,139 - INFO     -   After: current_merge_step = 6
2025-10-29 13:53:01,139 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:01,139 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:01,139 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:01,140 - INFO     -   ✓ Step logged
2025-10-29 13:53:01,140 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:01,140 - INFO     -   Returning:
2025-10-29 13:53:01,140 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:01,140 - INFO     -     - reward: 0.7424
2025-10-29 13:53:01,140 - INFO     -     - done: False
2025-10-29 13:53:01,140 - INFO     -     - truncated: False
2025-10-29 13:53:01,140 - INFO     -     - info: 19 keys
2025-10-29 13:53:01,140 - INFO     - ==========================================================================================

2025-10-29 13:53:01,144 - INFO     - 
==========================================================================================
2025-10-29 13:53:01,144 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:01,144 - INFO     - ==========================================================================================
2025-10-29 13:53:01,144 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:01,144 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:53:01,144 - INFO     -   Available edges in graph: 6
2025-10-29 13:53:01,144 - INFO     -   Action index calculation:
2025-10-29 13:53:01,144 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 6 = 0
2025-10-29 13:53:01,144 - INFO     -     - clamped to [0, 5]: 0
2025-10-29 13:53:01,144 - INFO     -   ✓ Extracted merge pair from edge 0: (7, 12)
2025-10-29 13:53:01,146 - INFO     -   ✓ Validation passed
2025-10-29 13:53:01,146 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:01,146 - INFO     -     - Total states before merge: 415
2025-10-29 13:53:01,146 - INFO     -     - Num nodes: 3
2025-10-29 13:53:01,146 - INFO     -     - Num edges: 6
2025-10-29 13:53:01,146 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:01,146 - INFO     -       - Node 7: 5 states
2025-10-29 13:53:01,146 - INFO     -       - Node 12: 10 states
2025-10-29 13:53:01,146 - INFO     -       - Expected product: 50 states
2025-10-29 13:53:01,146 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:01,151 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:53:01,152 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:01,152 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:53:01,252 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:01,253 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:01,253 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:53:01,253 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:01,253 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:01,253 - INFO     -   Calling graph_tracker.merge_nodes([7, 12])...
2025-10-29 13:53:01,253 - INFO     - Attempting merge of nodes 7 and 12...
2025-10-29 13:53:01,253 - INFO     - Successfully merged nodes into new node 15 with 50 states.
2025-10-29 13:53:01,254 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:01,254 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:01,254 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:53:01,254 - INFO     - 
================================================================================
2025-10-29 13:53:01,254 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:53:01,254 - INFO     - ================================================================================
2025-10-29 13:53:01,254 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:01,254 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:53:01,254 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:53:01,254 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:01,254 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:01,255 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:01,255 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:01,255 - INFO     -   - Raw f_after length: 50
2025-10-29 13:53:01,255 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:01,255 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:01,255 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:01,255 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:53:01,255 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:01,255 - INFO     -   - ts1_id: 7
2025-10-29 13:53:01,255 - INFO     -   - ts2_id: 12
2025-10-29 13:53:01,255 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:01,255 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:01,255 - INFO     -   - ts1_size: 5, ts2_size: 10
2025-10-29 13:53:01,255 - INFO     -   - Product space size: 50
2025-10-29 13:53:01,255 - INFO     -   - Using product state mapping
2025-10-29 13:53:01,256 - INFO     -   - f_before_product length: 50
2025-10-29 13:53:01,256 - INFO     -   - avg_f_before: 3.6600 (50 valid states)
2025-10-29 13:53:01,256 - INFO     -   - avg_f_after:  6.4600 (50 valid states)
2025-10-29 13:53:01,256 - INFO     -   - delta: 2.8000
2025-10-29 13:53:01,256 - INFO     -   - f_stability: 1.0 - |2.8000| / 3.6600 = 0.2350
2025-10-29 13:53:01,256 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:01,256 - INFO     -   - Compared 15 values
2025-10-29 13:53:01,256 - INFO     -   - Significant changes (> 5.0): 2
2025-10-29 13:53:01,256 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:01,256 - INFO     -   - states_before: 50
2025-10-29 13:53:01,256 - INFO     -   - states_after: 50
2025-10-29 13:53:01,257 - INFO     -   - delta_states: 0
2025-10-29 13:53:01,257 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:01,257 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:01,257 - INFO     -   - ts2_transitions: 40
2025-10-29 13:53:01,257 - INFO     -   - merged_transitions: 275
2025-10-29 13:53:01,257 - INFO     -   - transition_density_change: 4.4400
2025-10-29 13:53:01,257 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:01,258 - INFO     -   - search_signals present: True
2025-10-29 13:53:01,258 - INFO     -   - nodes_expanded: 50
2025-10-29 13:53:01,258 - INFO     -   - search_depth: 3
2025-10-29 13:53:01,258 - INFO     -   - solution_cost: 4
2025-10-29 13:53:01,258 - INFO     -   - branching_factor: 5.5000
2025-10-29 13:53:01,258 - INFO     -   - solution_found: True
2025-10-29 13:53:01,258 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:01,258 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:01,258 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:53:01,258 - INFO     -   - TS7(5) + TS12(10) → 50 states
2025-10-29 13:53:01,259 - INFO     -   - f_stability=0.235
2025-10-29 13:53:01,259 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:53:01,259 - INFO     -   - solution_found=True
2025-10-29 13:53:01,259 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:01,259 - INFO     - 
  Extracted signals:
2025-10-29 13:53:01,259 - INFO     -     - iteration: 6
2025-10-29 13:53:01,259 - INFO     -     - states_before: 50
2025-10-29 13:53:01,259 - INFO     -     - states_after: 50
2025-10-29 13:53:01,259 - INFO     -     - delta_states: 0
2025-10-29 13:53:01,259 - INFO     -     - f_value_stability: 0.2350
2025-10-29 13:53:01,259 - INFO     -     - num_significant_f_changes: 2
2025-10-29 13:53:01,259 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:01,259 - INFO     -     - nodes_expanded: 50
2025-10-29 13:53:01,259 - INFO     -     - search_depth: 3
2025-10-29 13:53:01,259 - INFO     -     - solution_cost: 4
2025-10-29 13:53:01,259 - INFO     -     - branching_factor: 5.5000
2025-10-29 13:53:01,259 - INFO     -     - solution_found: True
2025-10-29 13:53:01,259 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:01,260 - WARNING  -     ⚠️  Poor F-stability: 0.2350
2025-10-29 13:53:01,260 - INFO     - 
  Computing reward:
2025-10-29 13:53:01,260 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:01,260 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:01,260 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:01,260 - INFO     -   [1] BRANCHING FACTOR: 5.500 → score 0.367 (tolerable)
2025-10-29 13:53:01,260 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:01,260 - INFO     -   [3] F-VALUE STABILITY: 0.148
2025-10-29 13:53:01,260 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:01,260 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:01,260 - INFO     - 
  [COMPOSITE]: 0.446
2025-10-29 13:53:01,260 - INFO     -     = 0.300*0.367 (bf)
2025-10-29 13:53:01,261 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:01,261 - INFO     -     + 0.350*0.148 (stability)
2025-10-29 13:53:01,261 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:01,261 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:01,261 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:01,261 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:01,261 - INFO     - 
  [FINAL REWARD]: 0.0928
2025-10-29 13:53:01,261 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:01,261 - INFO     -     ✓ Reward computed: 0.0928
2025-10-29 13:53:01,261 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:01,261 - INFO     -     - bf_score                       0.3667
2025-10-29 13:53:01,261 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:01,261 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:01,261 - INFO     -     - f_stability                    0.1476
2025-10-29 13:53:01,261 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:01,261 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:01,261 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:01,262 - INFO     -     - composite                      0.4464
2025-10-29 13:53:01,262 - INFO     -     - total                          0.0928
2025-10-29 13:53:01,262 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:01,262 - INFO     -   Num remaining nodes: 2
2025-10-29 13:53:01,262 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:53:01,262 - INFO     -   Done: False
2025-10-29 13:53:01,262 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:01,262 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:01,262 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:01,262 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:01,262 - INFO     -     - num_nodes: 2
2025-10-29 13:53:01,262 - INFO     -     - num_edges: 2
2025-10-29 13:53:01,263 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:01,263 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:53:01,263 - INFO     -   After: current_merge_step = 7
2025-10-29 13:53:01,263 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:01,263 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:01,263 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:01,263 - INFO     -   ✓ Step logged
2025-10-29 13:53:01,263 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:01,263 - INFO     -   Returning:
2025-10-29 13:53:01,263 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:01,263 - INFO     -     - reward: 0.0928
2025-10-29 13:53:01,263 - INFO     -     - done: False
2025-10-29 13:53:01,263 - INFO     -     - truncated: False
2025-10-29 13:53:01,263 - INFO     -     - info: 19 keys
2025-10-29 13:53:01,263 - INFO     - ==========================================================================================

2025-10-29 13:53:01,268 - INFO     - 
==========================================================================================
2025-10-29 13:53:01,268 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:01,268 - INFO     - ==========================================================================================
2025-10-29 13:53:01,268 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:01,268 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:53:01,268 - INFO     -   Available edges in graph: 2
2025-10-29 13:53:01,268 - INFO     -   Action index calculation:
2025-10-29 13:53:01,268 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:53:01,269 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:53:01,269 - INFO     -   ✓ Extracted merge pair from edge 0: (14, 15)
2025-10-29 13:53:01,269 - INFO     -   ✓ Validation passed
2025-10-29 13:53:01,269 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:01,269 - INFO     -     - Total states before merge: 450
2025-10-29 13:53:01,269 - INFO     -     - Num nodes: 2
2025-10-29 13:53:01,269 - INFO     -     - Num edges: 2
2025-10-29 13:53:01,269 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:01,269 - INFO     -       - Node 14: 400 states
2025-10-29 13:53:01,269 - INFO     -       - Node 15: 50 states
2025-10-29 13:53:01,269 - INFO     -       - Expected product: 20000 states
2025-10-29 13:53:01,269 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:01,275 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:53:01,277 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:01,277 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:53:01,377 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:01,377 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:01,377 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:53:01,395 - INFO     -   ✓ TS file received after 0.02s
2025-10-29 13:53:01,395 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:01,395 - INFO     -   Calling graph_tracker.merge_nodes([14, 15])...
2025-10-29 13:53:01,395 - INFO     - Attempting merge of nodes 14 and 15...
2025-10-29 13:53:01,395 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:53:01,395 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:01,395 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:01,395 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:53:01,395 - INFO     - 
================================================================================
2025-10-29 13:53:01,396 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:53:01,396 - INFO     - ================================================================================
2025-10-29 13:53:01,396 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:01,396 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:53:01,396 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:53:01,400 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:01,400 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:01,400 - INFO     -   - Raw ts1_f length: 77
2025-10-29 13:53:01,400 - INFO     -   - Raw ts2_f length: 50
2025-10-29 13:53:01,400 - INFO     -   - Raw f_after length: 3850
2025-10-29 13:53:01,400 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:01,400 - INFO     -   - ts1_valid: 77 / 77 (removed 0)
2025-10-29 13:53:01,400 - INFO     -   - ts2_valid: 50 / 50 (removed -50)
2025-10-29 13:53:01,402 - INFO     -   - after_valid: 2517 / 3850 (removed 1333)
2025-10-29 13:53:01,402 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:01,402 - INFO     -   - ts1_id: 14
2025-10-29 13:53:01,402 - INFO     -   - ts2_id: 15
2025-10-29 13:53:01,402 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:01,402 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:01,402 - INFO     -   - ts1_size: 77, ts2_size: 50
2025-10-29 13:53:01,403 - INFO     -   - Product space size: 3850
2025-10-29 13:53:01,403 - INFO     -   - Using product state mapping
2025-10-29 13:53:01,409 - INFO     -   - f_before_product length: 3850
2025-10-29 13:53:01,417 - INFO     -   - avg_f_before: 6.7662 (3850 valid states)
2025-10-29 13:53:01,417 - INFO     -   - avg_f_after:  12.2547 (2517 valid states)
2025-10-29 13:53:01,417 - INFO     -   - delta: 5.4884
2025-10-29 13:53:01,417 - INFO     -   - f_stability: 1.0 - |5.4884| / 6.7662 = 0.1888
2025-10-29 13:53:01,417 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:01,417 - INFO     -   - Compared 127 values
2025-10-29 13:53:01,417 - INFO     -   - Significant changes (> 5.0): 59
2025-10-29 13:53:01,417 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:01,417 - INFO     -   - states_before: 3850
2025-10-29 13:53:01,417 - INFO     -   - states_after: 3850
2025-10-29 13:53:01,417 - INFO     -   - delta_states: 0
2025-10-29 13:53:01,417 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:01,417 - INFO     -   - ts1_transitions: 774
2025-10-29 13:53:01,418 - INFO     -   - ts2_transitions: 275
2025-10-29 13:53:01,418 - INFO     -   - merged_transitions: 17160
2025-10-29 13:53:01,418 - INFO     -   - transition_density_change: 4.1847
2025-10-29 13:53:01,418 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:01,418 - INFO     -   - search_signals present: True
2025-10-29 13:53:01,418 - INFO     -   - nodes_expanded: 2517
2025-10-29 13:53:01,418 - INFO     -   - search_depth: 6
2025-10-29 13:53:01,418 - INFO     -   - solution_cost: 4
2025-10-29 13:53:01,418 - INFO     -   - branching_factor: 6.8176
2025-10-29 13:53:01,418 - INFO     -   - solution_found: True
2025-10-29 13:53:01,418 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:01,419 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:01,419 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:53:01,419 - INFO     -   - TS14(77) + TS15(50) → 3850 states
2025-10-29 13:53:01,420 - INFO     -   - f_stability=0.189
2025-10-29 13:53:01,420 - INFO     -   - A* nodes_expanded=2517
2025-10-29 13:53:01,420 - INFO     -   - solution_found=True
2025-10-29 13:53:01,420 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:01,420 - INFO     - 
  Extracted signals:
2025-10-29 13:53:01,420 - INFO     -     - iteration: 7
2025-10-29 13:53:01,420 - INFO     -     - states_before: 3850
2025-10-29 13:53:01,420 - INFO     -     - states_after: 3850
2025-10-29 13:53:01,420 - INFO     -     - delta_states: 0
2025-10-29 13:53:01,420 - INFO     -     - f_value_stability: 0.1888
2025-10-29 13:53:01,420 - INFO     -     - num_significant_f_changes: 59
2025-10-29 13:53:01,420 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:01,420 - INFO     -     - nodes_expanded: 2517
2025-10-29 13:53:01,420 - INFO     -     - search_depth: 6
2025-10-29 13:53:01,420 - INFO     -     - solution_cost: 4
2025-10-29 13:53:01,421 - INFO     -     - branching_factor: 6.8176
2025-10-29 13:53:01,421 - INFO     -     - solution_found: True
2025-10-29 13:53:01,421 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:01,421 - WARNING  -     ⚠️  Poor F-stability: 0.1888
2025-10-29 13:53:01,421 - INFO     - 
  Computing reward:
2025-10-29 13:53:01,421 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:01,421 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:01,421 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:01,421 - INFO     -   [1] BRANCHING FACTOR: 6.818 → score 0.218 (high BF, minimal credit)
2025-10-29 13:53:01,421 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:01,423 - INFO     -   [3] F-VALUE STABILITY: 0.159
2025-10-29 13:53:01,423 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:01,423 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:01,423 - INFO     - 
  [COMPOSITE]: 0.392
2025-10-29 13:53:01,423 - INFO     -     = 0.300*0.218 (bf)
2025-10-29 13:53:01,423 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:01,423 - INFO     -     + 0.350*0.159 (stability)
2025-10-29 13:53:01,423 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:01,423 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:01,423 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:01,423 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:01,424 - INFO     - 
  [FINAL REWARD]: -0.0167
2025-10-29 13:53:01,424 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:01,424 - INFO     -     ✓ Reward computed: -0.0167
2025-10-29 13:53:01,424 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:01,424 - INFO     -     - bf_score                       0.2182
2025-10-29 13:53:01,424 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:01,424 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:01,424 - INFO     -     - f_stability                    0.1590
2025-10-29 13:53:01,424 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:01,424 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:01,425 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:01,425 - INFO     -     - composite                      0.3916
2025-10-29 13:53:01,425 - INFO     -     - total                          -0.0167
2025-10-29 13:53:01,425 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:01,425 - INFO     -   Num remaining nodes: 1
2025-10-29 13:53:01,425 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:53:01,425 - INFO     -   Done: True
2025-10-29 13:53:01,425 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:53:01,425 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:01,425 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:01,425 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:01,425 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:01,425 - INFO     -     - num_nodes: 1
2025-10-29 13:53:01,425 - INFO     -     - num_edges: 0
2025-10-29 13:53:01,425 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:01,425 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:53:01,426 - INFO     -   After: current_merge_step = 8
2025-10-29 13:53:01,426 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:01,426 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:01,426 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:01,426 - INFO     -   ✓ Step logged
2025-10-29 13:53:01,426 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:01,426 - INFO     -   Returning:
2025-10-29 13:53:01,426 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:01,426 - INFO     -     - reward: -0.0167
2025-10-29 13:53:01,427 - INFO     -     - done: True
2025-10-29 13:53:01,427 - INFO     -     - truncated: False
2025-10-29 13:53:01,427 - INFO     -     - info: 19 keys
2025-10-29 13:53:01,427 - INFO     - ==========================================================================================

2025-10-29 13:53:01,500 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:53:01,506 - INFO     - [Handshake] Building FD command:
2025-10-29 13:53:01,506 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:01,506 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_02.pddl
2025-10-29 13:53:01,506 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:53:01,509 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:02,111 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:02,111 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:02,111 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:02,421 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:02,421 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:02,421 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:02,422 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:02,422 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:02,422 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:02,422 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:02,422 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:02,422 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:02,422 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:02,423 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:02,423 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:02,423 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:02,423 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:02,423 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:02,423 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:02,423 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:02,423 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:02,423 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:02,423 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:02,423 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:02,423 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:02,423 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:02,424 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:02,424 - INFO     - Added edge (0, 1)
2025-10-29 13:53:02,425 - INFO     - Added edge (0, 2)
2025-10-29 13:53:02,425 - INFO     - Added edge (0, 3)
2025-10-29 13:53:02,425 - INFO     - Added edge (0, 4)
2025-10-29 13:53:02,425 - INFO     - Added edge (0, 5)
2025-10-29 13:53:02,425 - INFO     - Added edge (0, 6)
2025-10-29 13:53:02,425 - INFO     - Added edge (0, 7)
2025-10-29 13:53:02,425 - INFO     - Added edge (0, 8)
2025-10-29 13:53:02,425 - INFO     - Added edge (1, 0)
2025-10-29 13:53:02,425 - INFO     - Added edge (1, 2)
2025-10-29 13:53:02,425 - INFO     - Added edge (1, 3)
2025-10-29 13:53:02,425 - INFO     - Added edge (1, 4)
2025-10-29 13:53:02,425 - INFO     - Added edge (1, 5)
2025-10-29 13:53:02,425 - INFO     - Added edge (1, 6)
2025-10-29 13:53:02,425 - INFO     - Added edge (1, 7)
2025-10-29 13:53:02,425 - INFO     - Added edge (1, 8)
2025-10-29 13:53:02,425 - INFO     - Added edge (2, 0)
2025-10-29 13:53:02,425 - INFO     - Added edge (2, 1)
2025-10-29 13:53:02,425 - INFO     - Added edge (2, 3)
2025-10-29 13:53:02,425 - INFO     - Added edge (2, 4)
2025-10-29 13:53:02,425 - INFO     - Added edge (2, 5)
2025-10-29 13:53:02,425 - INFO     - Added edge (2, 6)
2025-10-29 13:53:02,426 - INFO     - Added edge (2, 7)
2025-10-29 13:53:02,426 - INFO     - Added edge (2, 8)
2025-10-29 13:53:02,426 - INFO     - Added edge (3, 0)
2025-10-29 13:53:02,426 - INFO     - Added edge (3, 1)
2025-10-29 13:53:02,426 - INFO     - Added edge (3, 2)
2025-10-29 13:53:02,426 - INFO     - Added edge (3, 4)
2025-10-29 13:53:02,426 - INFO     - Added edge (3, 5)
2025-10-29 13:53:02,426 - INFO     - Added edge (3, 6)
2025-10-29 13:53:02,426 - INFO     - Added edge (3, 7)
2025-10-29 13:53:02,426 - INFO     - Added edge (3, 8)
2025-10-29 13:53:02,426 - INFO     - Added edge (4, 0)
2025-10-29 13:53:02,426 - INFO     - Added edge (4, 1)
2025-10-29 13:53:02,426 - INFO     - Added edge (4, 2)
2025-10-29 13:53:02,426 - INFO     - Added edge (4, 3)
2025-10-29 13:53:02,426 - INFO     - Added edge (4, 5)
2025-10-29 13:53:02,426 - INFO     - Added edge (4, 6)
2025-10-29 13:53:02,426 - INFO     - Added edge (4, 7)
2025-10-29 13:53:02,426 - INFO     - Added edge (4, 8)
2025-10-29 13:53:02,426 - INFO     - Added edge (5, 0)
2025-10-29 13:53:02,426 - INFO     - Added edge (5, 1)
2025-10-29 13:53:02,427 - INFO     - Added edge (5, 2)
2025-10-29 13:53:02,427 - INFO     - Added edge (5, 3)
2025-10-29 13:53:02,427 - INFO     - Added edge (5, 4)
2025-10-29 13:53:02,427 - INFO     - Added edge (6, 0)
2025-10-29 13:53:02,427 - INFO     - Added edge (6, 1)
2025-10-29 13:53:02,427 - INFO     - Added edge (6, 2)
2025-10-29 13:53:02,427 - INFO     - Added edge (6, 3)
2025-10-29 13:53:02,427 - INFO     - Added edge (6, 4)
2025-10-29 13:53:02,427 - INFO     - Added edge (7, 0)
2025-10-29 13:53:02,427 - INFO     - Added edge (7, 1)
2025-10-29 13:53:02,427 - INFO     - Added edge (7, 2)
2025-10-29 13:53:02,427 - INFO     - Added edge (7, 3)
2025-10-29 13:53:02,427 - INFO     - Added edge (7, 4)
2025-10-29 13:53:02,427 - INFO     - Added edge (8, 0)
2025-10-29 13:53:02,427 - INFO     - Added edge (8, 1)
2025-10-29 13:53:02,427 - INFO     - Added edge (8, 2)
2025-10-29 13:53:02,427 - INFO     - Added edge (8, 3)
2025-10-29 13:53:02,427 - INFO     - Added edge (8, 4)
2025-10-29 13:53:02,427 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:02,434 - INFO     - 
==========================================================================================
2025-10-29 13:53:02,434 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:02,434 - INFO     - ==========================================================================================
2025-10-29 13:53:02,434 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:02,435 - INFO     -   Input action: 47 (type: int)
2025-10-29 13:53:02,435 - INFO     -   Available edges in graph: 60
2025-10-29 13:53:02,435 - INFO     -   Action index calculation:
2025-10-29 13:53:02,435 - INFO     -     - action % max(num_valid_edges, 1) = 47 % 60 = 47
2025-10-29 13:53:02,435 - INFO     -     - clamped to [0, 59]: 47
2025-10-29 13:53:02,435 - INFO     -   ✓ Extracted merge pair from edge 47: (6, 2)
2025-10-29 13:53:02,435 - INFO     -   ✓ Validation passed
2025-10-29 13:53:02,435 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:02,435 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:02,435 - INFO     -     - Num nodes: 9
2025-10-29 13:53:02,435 - INFO     -     - Num edges: 60
2025-10-29 13:53:02,435 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:02,435 - INFO     -       - Node 6: 5 states
2025-10-29 13:53:02,435 - INFO     -       - Node 2: 2 states
2025-10-29 13:53:02,435 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:02,436 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:02,445 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:53:02,445 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:02,445 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:53:02,546 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:02,546 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:02,546 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:53:02,547 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:02,547 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:02,547 - INFO     -   Calling graph_tracker.merge_nodes([6, 2])...
2025-10-29 13:53:02,547 - INFO     - Attempting merge of nodes 6 and 2...
2025-10-29 13:53:02,547 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:53:02,547 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:02,547 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:02,547 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:53:02,547 - INFO     - 
================================================================================
2025-10-29 13:53:02,547 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:53:02,547 - INFO     - ================================================================================
2025-10-29 13:53:02,547 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:02,547 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:53:02,547 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:53:02,547 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:02,547 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:02,547 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:02,547 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:02,549 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:02,549 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:02,549 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:02,549 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:02,549 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:02,549 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:02,549 - INFO     -   - ts1_id: 6
2025-10-29 13:53:02,549 - INFO     -   - ts2_id: 2
2025-10-29 13:53:02,549 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:02,549 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:02,549 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:02,549 - INFO     -   - Product space size: 10
2025-10-29 13:53:02,549 - INFO     -   - Using product state mapping
2025-10-29 13:53:02,549 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:02,549 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:53:02,550 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:53:02,550 - INFO     -   - delta: 0.4000
2025-10-29 13:53:02,550 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:53:02,550 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:02,550 - INFO     -   - Compared 7 values
2025-10-29 13:53:02,550 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:02,550 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:02,550 - INFO     -   - states_before: 10
2025-10-29 13:53:02,550 - INFO     -   - states_after: 10
2025-10-29 13:53:02,550 - INFO     -   - delta_states: 0
2025-10-29 13:53:02,550 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:02,550 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:02,550 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:02,550 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:02,550 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:02,550 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:02,550 - INFO     -   - search_signals present: True
2025-10-29 13:53:02,550 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:02,551 - INFO     -   - search_depth: 1
2025-10-29 13:53:02,551 - INFO     -   - solution_cost: 0
2025-10-29 13:53:02,551 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:02,551 - INFO     -   - solution_found: True
2025-10-29 13:53:02,551 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:02,551 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:02,551 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:53:02,551 - INFO     -   - TS6(5) + TS2(2) → 10 states
2025-10-29 13:53:02,551 - INFO     -   - f_stability=0.862
2025-10-29 13:53:02,551 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:02,551 - INFO     -   - solution_found=True
2025-10-29 13:53:02,551 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:02,551 - INFO     - 
  Extracted signals:
2025-10-29 13:53:02,551 - INFO     -     - iteration: 0
2025-10-29 13:53:02,551 - INFO     -     - states_before: 10
2025-10-29 13:53:02,551 - INFO     -     - states_after: 10
2025-10-29 13:53:02,551 - INFO     -     - delta_states: 0
2025-10-29 13:53:02,551 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:53:02,552 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:02,552 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:02,552 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:02,552 - INFO     -     - search_depth: 1
2025-10-29 13:53:02,552 - INFO     -     - solution_cost: 0
2025-10-29 13:53:02,552 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:02,552 - INFO     -     - solution_found: True
2025-10-29 13:53:02,552 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:02,552 - INFO     - 
  Computing reward:
2025-10-29 13:53:02,552 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:02,552 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:02,552 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:02,552 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:02,552 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:53:02,553 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:53:02,553 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:02,553 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:02,553 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:53:02,553 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:02,553 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:53:02,553 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:53:02,553 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:02,553 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:02,553 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:02,553 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:02,553 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:53:02,553 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:02,553 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:53:02,553 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:02,553 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:02,553 - INFO     -     - depth_score                    0.9119
2025-10-29 13:53:02,553 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:02,553 - INFO     -     - f_stability                    0.2913
2025-10-29 13:53:02,553 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:02,554 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:02,554 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:02,554 - INFO     -     - composite                      0.5743
2025-10-29 13:53:02,554 - INFO     -     - total                          0.3487
2025-10-29 13:53:02,554 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:02,554 - INFO     -   Num remaining nodes: 8
2025-10-29 13:53:02,554 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:53:02,554 - INFO     -   Done: False
2025-10-29 13:53:02,554 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:02,556 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:02,556 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:02,556 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:02,556 - INFO     -     - num_nodes: 8
2025-10-29 13:53:02,556 - INFO     -     - num_edges: 50
2025-10-29 13:53:02,556 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:02,556 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:53:02,556 - INFO     -   After: current_merge_step = 1
2025-10-29 13:53:02,556 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:02,556 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:02,556 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:02,557 - INFO     -   ✓ Step logged
2025-10-29 13:53:02,557 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:02,557 - INFO     -   Returning:
2025-10-29 13:53:02,557 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:02,557 - INFO     -     - reward: 0.3487
2025-10-29 13:53:02,557 - INFO     -     - done: False
2025-10-29 13:53:02,557 - INFO     -     - truncated: False
2025-10-29 13:53:02,558 - INFO     -     - info: 19 keys
2025-10-29 13:53:02,558 - INFO     - ==========================================================================================

2025-10-29 13:53:02,562 - INFO     - 
==========================================================================================
2025-10-29 13:53:02,562 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:02,562 - INFO     - ==========================================================================================
2025-10-29 13:53:02,562 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:02,562 - INFO     -   Input action: 39 (type: int)
2025-10-29 13:53:02,562 - INFO     -   Available edges in graph: 50
2025-10-29 13:53:02,562 - INFO     -   Action index calculation:
2025-10-29 13:53:02,562 - INFO     -     - action % max(num_valid_edges, 1) = 39 % 50 = 39
2025-10-29 13:53:02,562 - INFO     -     - clamped to [0, 49]: 39
2025-10-29 13:53:02,562 - INFO     -   ✓ Extracted merge pair from edge 39: (8, 1)
2025-10-29 13:53:02,562 - INFO     -   ✓ Validation passed
2025-10-29 13:53:02,562 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:02,562 - INFO     -     - Total states before merge: 33
2025-10-29 13:53:02,562 - INFO     -     - Num nodes: 8
2025-10-29 13:53:02,562 - INFO     -     - Num edges: 50
2025-10-29 13:53:02,562 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:02,562 - INFO     -       - Node 8: 5 states
2025-10-29 13:53:02,562 - INFO     -       - Node 1: 2 states
2025-10-29 13:53:02,562 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:02,562 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:02,569 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:53:02,569 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:02,569 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:53:02,671 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:02,671 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:02,671 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:53:02,672 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:02,672 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:02,672 - INFO     -   Calling graph_tracker.merge_nodes([8, 1])...
2025-10-29 13:53:02,672 - INFO     - Attempting merge of nodes 8 and 1...
2025-10-29 13:53:02,672 - INFO     - Successfully merged nodes into new node 10 with 10 states.
2025-10-29 13:53:02,672 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:02,672 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:02,672 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:53:02,672 - INFO     - 
================================================================================
2025-10-29 13:53:02,673 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:53:02,673 - INFO     - ================================================================================
2025-10-29 13:53:02,673 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:02,673 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:53:02,673 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:53:02,674 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:02,674 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:02,674 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:02,674 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:02,674 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:02,674 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:02,674 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:02,674 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:02,674 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:02,674 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:02,674 - INFO     -   - ts1_id: 8
2025-10-29 13:53:02,674 - INFO     -   - ts2_id: 1
2025-10-29 13:53:02,675 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:02,675 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:02,675 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:02,675 - INFO     -   - Product space size: 10
2025-10-29 13:53:02,675 - INFO     -   - Using product state mapping
2025-10-29 13:53:02,675 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:02,675 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:53:02,675 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:53:02,675 - INFO     -   - delta: 0.4000
2025-10-29 13:53:02,676 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:53:02,676 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:02,676 - INFO     -   - Compared 7 values
2025-10-29 13:53:02,676 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:02,676 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:02,676 - INFO     -   - states_before: 10
2025-10-29 13:53:02,676 - INFO     -   - states_after: 10
2025-10-29 13:53:02,676 - INFO     -   - delta_states: 0
2025-10-29 13:53:02,676 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:02,676 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:02,676 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:02,676 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:02,676 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:02,677 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:02,677 - INFO     -   - search_signals present: True
2025-10-29 13:53:02,677 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:02,677 - INFO     -   - search_depth: 1
2025-10-29 13:53:02,677 - INFO     -   - solution_cost: 0
2025-10-29 13:53:02,677 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:02,677 - INFO     -   - solution_found: True
2025-10-29 13:53:02,677 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:02,677 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:02,677 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:53:02,677 - INFO     -   - TS8(5) + TS1(2) → 10 states
2025-10-29 13:53:02,677 - INFO     -   - f_stability=0.862
2025-10-29 13:53:02,677 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:02,678 - INFO     -   - solution_found=True
2025-10-29 13:53:02,678 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:02,678 - INFO     - 
  Extracted signals:
2025-10-29 13:53:02,678 - INFO     -     - iteration: 1
2025-10-29 13:53:02,678 - INFO     -     - states_before: 10
2025-10-29 13:53:02,678 - INFO     -     - states_after: 10
2025-10-29 13:53:02,678 - INFO     -     - delta_states: 0
2025-10-29 13:53:02,678 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:53:02,678 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:02,679 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:02,679 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:02,679 - INFO     -     - search_depth: 1
2025-10-29 13:53:02,679 - INFO     -     - solution_cost: 0
2025-10-29 13:53:02,679 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:02,679 - INFO     -     - solution_found: True
2025-10-29 13:53:02,679 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:02,679 - INFO     - 
  Computing reward:
2025-10-29 13:53:02,679 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:02,680 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:02,680 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:02,680 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:02,680 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:53:02,680 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:53:02,680 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:02,680 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:02,680 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:53:02,680 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:02,682 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:53:02,682 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:53:02,682 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:02,682 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:02,682 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:02,682 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:02,682 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:53:02,682 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:02,682 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:53:02,682 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:02,682 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:02,682 - INFO     -     - depth_score                    0.9119
2025-10-29 13:53:02,682 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:02,682 - INFO     -     - f_stability                    0.2913
2025-10-29 13:53:02,683 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:02,683 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:02,683 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:02,683 - INFO     -     - composite                      0.5743
2025-10-29 13:53:02,683 - INFO     -     - total                          0.3487
2025-10-29 13:53:02,683 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:02,683 - INFO     -   Num remaining nodes: 7
2025-10-29 13:53:02,683 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:53:02,683 - INFO     -   Done: False
2025-10-29 13:53:02,683 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:02,685 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:02,685 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:02,685 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:02,685 - INFO     -     - num_nodes: 7
2025-10-29 13:53:02,685 - INFO     -     - num_edges: 40
2025-10-29 13:53:02,685 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:02,685 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:53:02,685 - INFO     -   After: current_merge_step = 2
2025-10-29 13:53:02,685 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:02,685 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:02,685 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:02,686 - INFO     -   ✓ Step logged
2025-10-29 13:53:02,686 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:02,686 - INFO     -   Returning:
2025-10-29 13:53:02,686 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:02,686 - INFO     -     - reward: 0.3487
2025-10-29 13:53:02,686 - INFO     -     - done: False
2025-10-29 13:53:02,687 - INFO     -     - truncated: False
2025-10-29 13:53:02,687 - INFO     -     - info: 19 keys
2025-10-29 13:53:02,687 - INFO     - ==========================================================================================

2025-10-29 13:53:02,691 - INFO     - 
==========================================================================================
2025-10-29 13:53:02,691 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:02,691 - INFO     - ==========================================================================================
2025-10-29 13:53:02,691 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:02,691 - INFO     -   Input action: 6 (type: int)
2025-10-29 13:53:02,691 - INFO     -   Available edges in graph: 40
2025-10-29 13:53:02,691 - INFO     -   Action index calculation:
2025-10-29 13:53:02,691 - INFO     -     - action % max(num_valid_edges, 1) = 6 % 40 = 6
2025-10-29 13:53:02,691 - INFO     -     - clamped to [0, 39]: 6
2025-10-29 13:53:02,691 - INFO     -   ✓ Extracted merge pair from edge 6: (3, 0)
2025-10-29 13:53:02,691 - INFO     -   ✓ Validation passed
2025-10-29 13:53:02,691 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:02,692 - INFO     -     - Total states before merge: 36
2025-10-29 13:53:02,692 - INFO     -     - Num nodes: 7
2025-10-29 13:53:02,692 - INFO     -     - Num edges: 40
2025-10-29 13:53:02,692 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:02,692 - INFO     -       - Node 3: 2 states
2025-10-29 13:53:02,693 - INFO     -       - Node 0: 2 states
2025-10-29 13:53:02,693 - INFO     -       - Expected product: 4 states
2025-10-29 13:53:02,693 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:02,700 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:53:02,700 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:02,700 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:53:02,801 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:02,802 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:02,802 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:53:02,802 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:02,802 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:02,802 - INFO     -   Calling graph_tracker.merge_nodes([3, 0])...
2025-10-29 13:53:02,802 - INFO     - Attempting merge of nodes 3 and 0...
2025-10-29 13:53:02,802 - INFO     - Successfully merged nodes into new node 11 with 4 states.
2025-10-29 13:53:02,802 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:02,802 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:02,802 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:53:02,802 - INFO     - 
================================================================================
2025-10-29 13:53:02,802 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:53:02,802 - INFO     - ================================================================================
2025-10-29 13:53:02,802 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:02,803 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:53:02,803 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:53:02,803 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:02,803 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:02,803 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:02,803 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:02,803 - INFO     -   - Raw f_after length: 4
2025-10-29 13:53:02,803 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:02,803 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:02,803 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:02,804 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:53:02,804 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:02,804 - INFO     -   - ts1_id: 3
2025-10-29 13:53:02,804 - INFO     -   - ts2_id: 0
2025-10-29 13:53:02,804 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:02,804 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:02,804 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:53:02,804 - INFO     -   - Product space size: 4
2025-10-29 13:53:02,804 - INFO     -   - Using product state mapping
2025-10-29 13:53:02,804 - INFO     -   - f_before_product length: 4
2025-10-29 13:53:02,805 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:53:02,805 - INFO     -   - avg_f_after:  1.0000 (4 valid states)
2025-10-29 13:53:02,805 - INFO     -   - delta: 0.2500
2025-10-29 13:53:02,805 - INFO     -   - f_stability: 1.0 - |0.2500| / 0.7500 = 0.6667
2025-10-29 13:53:02,805 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:02,805 - INFO     -   - Compared 4 values
2025-10-29 13:53:02,806 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:02,806 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:02,806 - INFO     -   - states_before: 4
2025-10-29 13:53:02,806 - INFO     -   - states_after: 4
2025-10-29 13:53:02,806 - INFO     -   - delta_states: 0
2025-10-29 13:53:02,806 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:02,806 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:02,806 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:02,806 - INFO     -   - merged_transitions: 20
2025-10-29 13:53:02,806 - INFO     -   - transition_density_change: 2.5000
2025-10-29 13:53:02,806 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:02,806 - INFO     -   - search_signals present: True
2025-10-29 13:53:02,807 - INFO     -   - nodes_expanded: 4
2025-10-29 13:53:02,807 - INFO     -   - search_depth: 0
2025-10-29 13:53:02,807 - INFO     -   - solution_cost: 0
2025-10-29 13:53:02,807 - INFO     -   - branching_factor: 5.0000
2025-10-29 13:53:02,807 - INFO     -   - solution_found: True
2025-10-29 13:53:02,807 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:02,807 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:02,807 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:53:02,808 - INFO     -   - TS3(2) + TS0(2) → 4 states
2025-10-29 13:53:02,808 - INFO     -   - f_stability=0.667
2025-10-29 13:53:02,808 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:53:02,808 - INFO     -   - solution_found=True
2025-10-29 13:53:02,808 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:02,808 - INFO     - 
  Extracted signals:
2025-10-29 13:53:02,808 - INFO     -     - iteration: 2
2025-10-29 13:53:02,808 - INFO     -     - states_before: 4
2025-10-29 13:53:02,808 - INFO     -     - states_after: 4
2025-10-29 13:53:02,808 - INFO     -     - delta_states: 0
2025-10-29 13:53:02,808 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:53:02,808 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:02,808 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:02,809 - INFO     -     - nodes_expanded: 4
2025-10-29 13:53:02,809 - INFO     -     - search_depth: 0
2025-10-29 13:53:02,809 - INFO     -     - solution_cost: 0
2025-10-29 13:53:02,809 - INFO     -     - branching_factor: 5.0000
2025-10-29 13:53:02,809 - INFO     -     - solution_found: True
2025-10-29 13:53:02,809 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:02,809 - INFO     - 
  Computing reward:
2025-10-29 13:53:02,809 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:02,809 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:02,809 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:02,809 - INFO     -   [1] BRANCHING FACTOR: 5.000 → score 0.433 (tolerable)
2025-10-29 13:53:02,809 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:53:02,810 - INFO     -   [3] F-VALUE STABILITY: 0.176
2025-10-29 13:53:02,810 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:02,810 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:02,810 - INFO     - 
  [COMPOSITE]: 0.412
2025-10-29 13:53:02,810 - INFO     -     = 0.300*0.433 (bf)
2025-10-29 13:53:02,810 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:53:02,810 - INFO     -     + 0.350*0.176 (stability)
2025-10-29 13:53:02,810 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:02,810 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:02,811 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:02,811 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:02,811 - INFO     - 
  [FINAL REWARD]: 0.0230
2025-10-29 13:53:02,811 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:02,811 - INFO     -     ✓ Reward computed: 0.0230
2025-10-29 13:53:02,811 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:02,811 - INFO     -     - bf_score                       0.4333
2025-10-29 13:53:02,811 - INFO     -     - depth_score                    0.5000
2025-10-29 13:53:02,811 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:02,811 - INFO     -     - f_stability                    0.1757
2025-10-29 13:53:02,811 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:02,812 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:02,812 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:02,812 - INFO     -     - composite                      0.4115
2025-10-29 13:53:02,812 - INFO     -     - total                          0.0230
2025-10-29 13:53:02,812 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:02,812 - INFO     -   Num remaining nodes: 6
2025-10-29 13:53:02,812 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:53:02,812 - INFO     -   Done: False
2025-10-29 13:53:02,812 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:02,813 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:02,813 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:02,813 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:02,813 - INFO     -     - num_nodes: 6
2025-10-29 13:53:02,813 - INFO     -     - num_edges: 28
2025-10-29 13:53:02,815 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:02,815 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:53:02,815 - INFO     -   After: current_merge_step = 3
2025-10-29 13:53:02,815 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:02,815 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:02,815 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:02,816 - INFO     -   ✓ Step logged
2025-10-29 13:53:02,816 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:02,816 - INFO     -   Returning:
2025-10-29 13:53:02,816 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:02,816 - INFO     -     - reward: 0.0230
2025-10-29 13:53:02,816 - INFO     -     - done: False
2025-10-29 13:53:02,816 - INFO     -     - truncated: False
2025-10-29 13:53:02,817 - INFO     -     - info: 19 keys
2025-10-29 13:53:02,817 - INFO     - ==========================================================================================

2025-10-29 13:53:02,822 - INFO     - 
==========================================================================================
2025-10-29 13:53:02,822 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:02,822 - INFO     - ==========================================================================================
2025-10-29 13:53:02,823 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:02,823 - INFO     -   Input action: 25 (type: int)
2025-10-29 13:53:02,823 - INFO     -   Available edges in graph: 28
2025-10-29 13:53:02,823 - INFO     -   Action index calculation:
2025-10-29 13:53:02,823 - INFO     -     - action % max(num_valid_edges, 1) = 25 % 28 = 25
2025-10-29 13:53:02,823 - INFO     -     - clamped to [0, 27]: 25
2025-10-29 13:53:02,823 - INFO     -   ✓ Extracted merge pair from edge 25: (11, 7)
2025-10-29 13:53:02,823 - INFO     -   ✓ Validation passed
2025-10-29 13:53:02,823 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:02,823 - INFO     -     - Total states before merge: 36
2025-10-29 13:53:02,823 - INFO     -     - Num nodes: 6
2025-10-29 13:53:02,823 - INFO     -     - Num edges: 28
2025-10-29 13:53:02,823 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:02,823 - INFO     -       - Node 11: 4 states
2025-10-29 13:53:02,823 - INFO     -       - Node 7: 5 states
2025-10-29 13:53:02,823 - INFO     -       - Expected product: 20 states
2025-10-29 13:53:02,823 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:02,829 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:53:02,830 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:02,830 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:53:02,931 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:02,931 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:02,931 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:53:02,931 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:02,931 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:02,931 - INFO     -   Calling graph_tracker.merge_nodes([11, 7])...
2025-10-29 13:53:02,931 - INFO     - Attempting merge of nodes 11 and 7...
2025-10-29 13:53:02,931 - INFO     - Successfully merged nodes into new node 12 with 20 states.
2025-10-29 13:53:02,931 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:02,932 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:02,932 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:53:02,932 - INFO     - 
================================================================================
2025-10-29 13:53:02,932 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:53:02,932 - INFO     - ================================================================================
2025-10-29 13:53:02,932 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:02,932 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:53:02,933 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:53:02,933 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:02,933 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:02,933 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:53:02,933 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:02,933 - INFO     -   - Raw f_after length: 20
2025-10-29 13:53:02,933 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:02,933 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:53:02,933 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:02,934 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:53:02,934 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:02,934 - INFO     -   - ts1_id: 11
2025-10-29 13:53:02,934 - INFO     -   - ts2_id: 7
2025-10-29 13:53:02,934 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:02,934 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:02,934 - INFO     -   - ts1_size: 4, ts2_size: 5
2025-10-29 13:53:02,934 - INFO     -   - Product space size: 20
2025-10-29 13:53:02,934 - INFO     -   - Using product state mapping
2025-10-29 13:53:02,934 - INFO     -   - f_before_product length: 20
2025-10-29 13:53:02,934 - INFO     -   - avg_f_before: 2.8000 (20 valid states)
2025-10-29 13:53:02,934 - INFO     -   - avg_f_after:  4.1000 (20 valid states)
2025-10-29 13:53:02,934 - INFO     -   - delta: 1.3000
2025-10-29 13:53:02,934 - INFO     -   - f_stability: 1.0 - |1.3000| / 2.8000 = 0.5357
2025-10-29 13:53:02,934 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:02,934 - INFO     -   - Compared 9 values
2025-10-29 13:53:02,935 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:02,935 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:02,935 - INFO     -   - states_before: 20
2025-10-29 13:53:02,935 - INFO     -   - states_after: 20
2025-10-29 13:53:02,935 - INFO     -   - delta_states: 0
2025-10-29 13:53:02,935 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:02,935 - INFO     -   - ts1_transitions: 20
2025-10-29 13:53:02,935 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:02,935 - INFO     -   - merged_transitions: 128
2025-10-29 13:53:02,935 - INFO     -   - transition_density_change: 4.7500
2025-10-29 13:53:02,935 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:02,935 - INFO     -   - search_signals present: True
2025-10-29 13:53:02,935 - INFO     -   - nodes_expanded: 20
2025-10-29 13:53:02,935 - INFO     -   - search_depth: 2
2025-10-29 13:53:02,935 - INFO     -   - solution_cost: 2
2025-10-29 13:53:02,935 - INFO     -   - branching_factor: 6.4000
2025-10-29 13:53:02,935 - INFO     -   - solution_found: True
2025-10-29 13:53:02,936 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:02,936 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:02,936 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:53:02,936 - INFO     -   - TS11(4) + TS7(5) → 20 states
2025-10-29 13:53:02,936 - INFO     -   - f_stability=0.536
2025-10-29 13:53:02,936 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:53:02,936 - INFO     -   - solution_found=True
2025-10-29 13:53:02,936 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:02,936 - INFO     - 
  Extracted signals:
2025-10-29 13:53:02,936 - INFO     -     - iteration: 3
2025-10-29 13:53:02,936 - INFO     -     - states_before: 20
2025-10-29 13:53:02,936 - INFO     -     - states_after: 20
2025-10-29 13:53:02,936 - INFO     -     - delta_states: 0
2025-10-29 13:53:02,936 - INFO     -     - f_value_stability: 0.5357
2025-10-29 13:53:02,936 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:02,937 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:02,937 - INFO     -     - nodes_expanded: 20
2025-10-29 13:53:02,937 - INFO     -     - search_depth: 2
2025-10-29 13:53:02,937 - INFO     -     - solution_cost: 2
2025-10-29 13:53:02,937 - INFO     -     - branching_factor: 6.4000
2025-10-29 13:53:02,937 - INFO     -     - solution_found: True
2025-10-29 13:53:02,937 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:02,937 - INFO     - 
  Computing reward:
2025-10-29 13:53:02,937 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:02,937 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:02,937 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:02,937 - INFO     -   [1] BRANCHING FACTOR: 6.400 → score 0.260 (high BF, minimal credit)
2025-10-29 13:53:02,937 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:02,937 - INFO     -   [3] F-VALUE STABILITY: 0.252
2025-10-29 13:53:02,937 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:02,938 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:02,938 - INFO     - 
  [COMPOSITE]: 0.458
2025-10-29 13:53:02,938 - INFO     -     = 0.300*0.260 (bf)
2025-10-29 13:53:02,938 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:02,938 - INFO     -     + 0.350*0.252 (stability)
2025-10-29 13:53:02,938 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:02,938 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:02,938 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:02,938 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:02,938 - INFO     - 
  [FINAL REWARD]: 0.1167
2025-10-29 13:53:02,938 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:02,938 - INFO     -     ✓ Reward computed: 0.1167
2025-10-29 13:53:02,938 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:02,938 - INFO     -     - bf_score                       0.2600
2025-10-29 13:53:02,938 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:02,939 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:02,939 - INFO     -     - f_stability                    0.2523
2025-10-29 13:53:02,939 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:02,939 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:02,939 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:02,939 - INFO     -     - composite                      0.4584
2025-10-29 13:53:02,939 - INFO     -     - total                          0.1167
2025-10-29 13:53:02,939 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:02,939 - INFO     -   Num remaining nodes: 5
2025-10-29 13:53:02,939 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:53:02,939 - INFO     -   Done: False
2025-10-29 13:53:02,939 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:02,940 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:02,940 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:02,940 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:02,940 - INFO     -     - num_nodes: 5
2025-10-29 13:53:02,940 - INFO     -     - num_edges: 20
2025-10-29 13:53:02,940 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:02,940 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:53:02,940 - INFO     -   After: current_merge_step = 4
2025-10-29 13:53:02,940 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:02,940 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:02,941 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:02,941 - INFO     -   ✓ Step logged
2025-10-29 13:53:02,941 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:02,941 - INFO     -   Returning:
2025-10-29 13:53:02,941 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:02,941 - INFO     -     - reward: 0.1167
2025-10-29 13:53:02,941 - INFO     -     - done: False
2025-10-29 13:53:02,941 - INFO     -     - truncated: False
2025-10-29 13:53:02,941 - INFO     -     - info: 19 keys
2025-10-29 13:53:02,942 - INFO     - ==========================================================================================

2025-10-29 13:53:02,946 - INFO     - 
==========================================================================================
2025-10-29 13:53:02,946 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:02,946 - INFO     - ==========================================================================================
2025-10-29 13:53:02,946 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:02,946 - INFO     -   Input action: 17 (type: int)
2025-10-29 13:53:02,946 - INFO     -   Available edges in graph: 20
2025-10-29 13:53:02,946 - INFO     -   Action index calculation:
2025-10-29 13:53:02,947 - INFO     -     - action % max(num_valid_edges, 1) = 17 % 20 = 17
2025-10-29 13:53:02,947 - INFO     -     - clamped to [0, 19]: 17
2025-10-29 13:53:02,947 - INFO     -   ✓ Extracted merge pair from edge 17: (12, 5)
2025-10-29 13:53:02,947 - INFO     -   ✓ Validation passed
2025-10-29 13:53:02,947 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:02,947 - INFO     -     - Total states before merge: 47
2025-10-29 13:53:02,947 - INFO     -     - Num nodes: 5
2025-10-29 13:53:02,947 - INFO     -     - Num edges: 20
2025-10-29 13:53:02,947 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:02,947 - INFO     -       - Node 12: 20 states
2025-10-29 13:53:02,947 - INFO     -       - Node 5: 5 states
2025-10-29 13:53:02,947 - INFO     -       - Expected product: 100 states
2025-10-29 13:53:02,947 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:02,954 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:53:02,954 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:02,954 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:53:03,056 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:03,056 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:03,056 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:53:03,057 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:03,057 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:03,057 - INFO     -   Calling graph_tracker.merge_nodes([12, 5])...
2025-10-29 13:53:03,057 - INFO     - Attempting merge of nodes 12 and 5...
2025-10-29 13:53:03,057 - INFO     - Successfully merged nodes into new node 13 with 100 states.
2025-10-29 13:53:03,058 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:03,058 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:03,058 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:53:03,058 - INFO     - 
================================================================================
2025-10-29 13:53:03,058 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:53:03,058 - INFO     - ================================================================================
2025-10-29 13:53:03,058 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:03,058 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:53:03,058 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:53:03,059 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:03,059 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:03,059 - INFO     -   - Raw ts1_f length: 20
2025-10-29 13:53:03,059 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:03,059 - INFO     -   - Raw f_after length: 100
2025-10-29 13:53:03,059 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:03,059 - INFO     -   - ts1_valid: 20 / 20 (removed 0)
2025-10-29 13:53:03,059 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:03,059 - INFO     -   - after_valid: 100 / 100 (removed 0)
2025-10-29 13:53:03,059 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:03,059 - INFO     -   - ts1_id: 12
2025-10-29 13:53:03,059 - INFO     -   - ts2_id: 5
2025-10-29 13:53:03,059 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:03,059 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:03,059 - INFO     -   - ts1_size: 20, ts2_size: 5
2025-10-29 13:53:03,059 - INFO     -   - Product space size: 100
2025-10-29 13:53:03,059 - INFO     -   - Using product state mapping
2025-10-29 13:53:03,060 - INFO     -   - f_before_product length: 100
2025-10-29 13:53:03,060 - INFO     -   - avg_f_before: 4.3200 (100 valid states)
2025-10-29 13:53:03,060 - INFO     -   - avg_f_after:  7.0800 (100 valid states)
2025-10-29 13:53:03,060 - INFO     -   - delta: 2.7600
2025-10-29 13:53:03,060 - INFO     -   - f_stability: 1.0 - |2.7600| / 4.3200 = 0.3611
2025-10-29 13:53:03,060 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:03,060 - INFO     -   - Compared 25 values
2025-10-29 13:53:03,060 - INFO     -   - Significant changes (> 5.0): 2
2025-10-29 13:53:03,060 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:03,060 - INFO     -   - states_before: 100
2025-10-29 13:53:03,061 - INFO     -   - states_after: 100
2025-10-29 13:53:03,061 - INFO     -   - delta_states: 0
2025-10-29 13:53:03,061 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:03,061 - INFO     -   - ts1_transitions: 128
2025-10-29 13:53:03,061 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:03,061 - INFO     -   - merged_transitions: 750
2025-10-29 13:53:03,061 - INFO     -   - transition_density_change: 6.0900
2025-10-29 13:53:03,061 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:03,061 - INFO     -   - search_signals present: True
2025-10-29 13:53:03,061 - INFO     -   - nodes_expanded: 100
2025-10-29 13:53:03,061 - INFO     -   - search_depth: 3
2025-10-29 13:53:03,061 - INFO     -   - solution_cost: 4
2025-10-29 13:53:03,061 - INFO     -   - branching_factor: 7.5000
2025-10-29 13:53:03,061 - INFO     -   - solution_found: True
2025-10-29 13:53:03,061 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:03,062 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:03,062 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:53:03,062 - INFO     -   - TS12(20) + TS5(5) → 100 states
2025-10-29 13:53:03,062 - INFO     -   - f_stability=0.361
2025-10-29 13:53:03,062 - INFO     -   - A* nodes_expanded=100
2025-10-29 13:53:03,062 - INFO     -   - solution_found=True
2025-10-29 13:53:03,062 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:03,062 - INFO     - 
  Extracted signals:
2025-10-29 13:53:03,062 - INFO     -     - iteration: 4
2025-10-29 13:53:03,062 - INFO     -     - states_before: 100
2025-10-29 13:53:03,062 - INFO     -     - states_after: 100
2025-10-29 13:53:03,062 - INFO     -     - delta_states: 0
2025-10-29 13:53:03,062 - INFO     -     - f_value_stability: 0.3611
2025-10-29 13:53:03,062 - INFO     -     - num_significant_f_changes: 2
2025-10-29 13:53:03,062 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:03,063 - INFO     -     - nodes_expanded: 100
2025-10-29 13:53:03,063 - INFO     -     - search_depth: 3
2025-10-29 13:53:03,063 - INFO     -     - solution_cost: 4
2025-10-29 13:53:03,063 - INFO     -     - branching_factor: 7.5000
2025-10-29 13:53:03,063 - INFO     -     - solution_found: True
2025-10-29 13:53:03,063 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:03,063 - INFO     - 
  Computing reward:
2025-10-29 13:53:03,063 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:03,063 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:03,063 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:03,063 - INFO     -   [1] BRANCHING FACTOR: 7.500 → score 0.150 (high BF, minimal credit)
2025-10-29 13:53:03,063 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:03,064 - INFO     -   [3] F-VALUE STABILITY: 0.410
2025-10-29 13:53:03,064 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:03,064 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:03,064 - INFO     - 
  [COMPOSITE]: 0.473
2025-10-29 13:53:03,064 - INFO     -     = 0.300*0.150 (bf)
2025-10-29 13:53:03,064 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:03,064 - INFO     -     + 0.350*0.410 (stability)
2025-10-29 13:53:03,064 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:03,064 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:03,064 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:03,064 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:03,064 - INFO     - 
  [FINAL REWARD]: 0.2467
2025-10-29 13:53:03,064 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:03,064 - INFO     -     ✓ Reward computed: 0.2467
2025-10-29 13:53:03,065 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:03,065 - INFO     -     - bf_score                       0.1500
2025-10-29 13:53:03,065 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:03,065 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:03,065 - INFO     -     - f_stability                    0.4103
2025-10-29 13:53:03,065 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:03,065 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:03,065 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:03,065 - INFO     -     - composite                      0.4734
2025-10-29 13:53:03,065 - INFO     -     - total                          0.2467
2025-10-29 13:53:03,065 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:03,065 - INFO     -   Num remaining nodes: 4
2025-10-29 13:53:03,065 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:53:03,065 - INFO     -   Done: False
2025-10-29 13:53:03,065 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:03,066 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:03,066 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:03,066 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:03,066 - INFO     -     - num_nodes: 4
2025-10-29 13:53:03,066 - INFO     -     - num_edges: 12
2025-10-29 13:53:03,066 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:03,066 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:53:03,066 - INFO     -   After: current_merge_step = 5
2025-10-29 13:53:03,066 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:03,066 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:03,066 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:03,067 - INFO     -   ✓ Step logged
2025-10-29 13:53:03,067 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:03,067 - INFO     -   Returning:
2025-10-29 13:53:03,067 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:03,067 - INFO     -     - reward: 0.2467
2025-10-29 13:53:03,067 - INFO     -     - done: False
2025-10-29 13:53:03,067 - INFO     -     - truncated: False
2025-10-29 13:53:03,067 - INFO     -     - info: 19 keys
2025-10-29 13:53:03,067 - INFO     - ==========================================================================================

2025-10-29 13:53:03,072 - INFO     - 
==========================================================================================
2025-10-29 13:53:03,072 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:03,072 - INFO     - ==========================================================================================
2025-10-29 13:53:03,072 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:03,072 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:53:03,072 - INFO     -   Available edges in graph: 12
2025-10-29 13:53:03,072 - INFO     -   Action index calculation:
2025-10-29 13:53:03,072 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 12 = 3
2025-10-29 13:53:03,072 - INFO     -     - clamped to [0, 11]: 3
2025-10-29 13:53:03,072 - INFO     -   ✓ Extracted merge pair from edge 3: (9, 4)
2025-10-29 13:53:03,072 - INFO     -   ✓ Validation passed
2025-10-29 13:53:03,072 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:03,072 - INFO     -     - Total states before merge: 122
2025-10-29 13:53:03,073 - INFO     -     - Num nodes: 4
2025-10-29 13:53:03,073 - INFO     -     - Num edges: 12
2025-10-29 13:53:03,073 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:03,073 - INFO     -       - Node 9: 10 states
2025-10-29 13:53:03,073 - INFO     -       - Node 4: 2 states
2025-10-29 13:53:03,073 - INFO     -       - Expected product: 20 states
2025-10-29 13:53:03,073 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:03,078 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:53:03,078 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:03,078 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:53:03,178 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:03,178 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:03,178 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:53:03,178 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:03,179 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:03,179 - INFO     -   Calling graph_tracker.merge_nodes([9, 4])...
2025-10-29 13:53:03,179 - INFO     - Attempting merge of nodes 9 and 4...
2025-10-29 13:53:03,179 - INFO     - Successfully merged nodes into new node 14 with 20 states.
2025-10-29 13:53:03,179 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:03,179 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:03,179 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:53:03,179 - INFO     - 
================================================================================
2025-10-29 13:53:03,179 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:53:03,179 - INFO     - ================================================================================
2025-10-29 13:53:03,179 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:03,179 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:53:03,179 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:53:03,180 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:03,180 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:03,180 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:53:03,180 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:03,180 - INFO     -   - Raw f_after length: 20
2025-10-29 13:53:03,180 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:03,180 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:53:03,180 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:03,180 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:53:03,180 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:03,180 - INFO     -   - ts1_id: 9
2025-10-29 13:53:03,180 - INFO     -   - ts2_id: 4
2025-10-29 13:53:03,180 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:03,180 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:03,181 - INFO     -   - ts1_size: 10, ts2_size: 2
2025-10-29 13:53:03,181 - INFO     -   - Product space size: 20
2025-10-29 13:53:03,181 - INFO     -   - Using product state mapping
2025-10-29 13:53:03,181 - INFO     -   - f_before_product length: 20
2025-10-29 13:53:03,181 - INFO     -   - avg_f_before: 3.3500 (20 valid states)
2025-10-29 13:53:03,181 - INFO     -   - avg_f_after:  3.8500 (20 valid states)
2025-10-29 13:53:03,181 - INFO     -   - delta: 0.5000
2025-10-29 13:53:03,181 - INFO     -   - f_stability: 1.0 - |0.5000| / 3.3500 = 0.8507
2025-10-29 13:53:03,181 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:03,181 - INFO     -   - Compared 12 values
2025-10-29 13:53:03,181 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:03,181 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:03,181 - INFO     -   - states_before: 20
2025-10-29 13:53:03,181 - INFO     -   - states_after: 20
2025-10-29 13:53:03,182 - INFO     -   - delta_states: 0
2025-10-29 13:53:03,182 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:03,182 - INFO     -   - ts1_transitions: 40
2025-10-29 13:53:03,182 - INFO     -   - ts2_transitions: 3
2025-10-29 13:53:03,182 - INFO     -   - merged_transitions: 97
2025-10-29 13:53:03,182 - INFO     -   - transition_density_change: 2.7000
2025-10-29 13:53:03,182 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:03,183 - INFO     -   - search_signals present: True
2025-10-29 13:53:03,183 - INFO     -   - nodes_expanded: 20
2025-10-29 13:53:03,183 - INFO     -   - search_depth: 2
2025-10-29 13:53:03,183 - INFO     -   - solution_cost: 0
2025-10-29 13:53:03,183 - INFO     -   - branching_factor: 4.8500
2025-10-29 13:53:03,183 - INFO     -   - solution_found: True
2025-10-29 13:53:03,183 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:03,183 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:03,183 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:53:03,183 - INFO     -   - TS9(10) + TS4(2) → 20 states
2025-10-29 13:53:03,183 - INFO     -   - f_stability=0.851
2025-10-29 13:53:03,183 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:53:03,183 - INFO     -   - solution_found=True
2025-10-29 13:53:03,183 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:03,183 - INFO     - 
  Extracted signals:
2025-10-29 13:53:03,183 - INFO     -     - iteration: 5
2025-10-29 13:53:03,183 - INFO     -     - states_before: 20
2025-10-29 13:53:03,183 - INFO     -     - states_after: 20
2025-10-29 13:53:03,183 - INFO     -     - delta_states: 0
2025-10-29 13:53:03,183 - INFO     -     - f_value_stability: 0.8507
2025-10-29 13:53:03,183 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:03,185 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:03,185 - INFO     -     - nodes_expanded: 20
2025-10-29 13:53:03,185 - INFO     -     - search_depth: 2
2025-10-29 13:53:03,185 - INFO     -     - solution_cost: 0
2025-10-29 13:53:03,185 - INFO     -     - branching_factor: 4.8500
2025-10-29 13:53:03,185 - INFO     -     - solution_found: True
2025-10-29 13:53:03,185 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:03,185 - INFO     - 
  Computing reward:
2025-10-29 13:53:03,185 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:03,185 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:03,185 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:03,185 - INFO     -   [1] BRANCHING FACTOR: 4.850 → score 0.453 (tolerable)
2025-10-29 13:53:03,185 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:03,186 - INFO     -   [3] F-VALUE STABILITY: 0.885
2025-10-29 13:53:03,186 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:03,186 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:03,186 - INFO     - 
  [COMPOSITE]: 0.738
2025-10-29 13:53:03,186 - INFO     -     = 0.300*0.453 (bf)
2025-10-29 13:53:03,186 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:03,186 - INFO     -     + 0.350*0.885 (stability)
2025-10-29 13:53:03,186 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:03,186 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:03,186 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:03,186 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:03,186 - INFO     - 
  [FINAL REWARD]: 0.9756
2025-10-29 13:53:03,186 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:03,186 - INFO     -     ✓ Reward computed: 0.9756
2025-10-29 13:53:03,186 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:03,186 - INFO     -     - bf_score                       0.4533
2025-10-29 13:53:03,186 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:03,186 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:03,186 - INFO     -     - f_stability                    0.8850
2025-10-29 13:53:03,186 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:03,186 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:03,186 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:03,187 - INFO     -     - composite                      0.7378
2025-10-29 13:53:03,187 - INFO     -     - total                          0.9756
2025-10-29 13:53:03,187 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:03,187 - INFO     -   Num remaining nodes: 3
2025-10-29 13:53:03,187 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:53:03,187 - INFO     -   Done: False
2025-10-29 13:53:03,187 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:03,187 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:03,187 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:03,188 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:03,188 - INFO     -     - num_nodes: 3
2025-10-29 13:53:03,188 - INFO     -     - num_edges: 6
2025-10-29 13:53:03,188 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:03,188 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:53:03,188 - INFO     -   After: current_merge_step = 6
2025-10-29 13:53:03,188 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:03,188 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:03,188 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:03,189 - INFO     -   ✓ Step logged
2025-10-29 13:53:03,189 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:03,189 - INFO     -   Returning:
2025-10-29 13:53:03,189 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:03,189 - INFO     -     - reward: 0.9756
2025-10-29 13:53:03,189 - INFO     -     - done: False
2025-10-29 13:53:03,189 - INFO     -     - truncated: False
2025-10-29 13:53:03,190 - INFO     -     - info: 19 keys
2025-10-29 13:53:03,190 - INFO     - ==========================================================================================

2025-10-29 13:53:03,194 - INFO     - 
==========================================================================================
2025-10-29 13:53:03,194 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:03,194 - INFO     - ==========================================================================================
2025-10-29 13:53:03,194 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:03,194 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:53:03,194 - INFO     -   Available edges in graph: 6
2025-10-29 13:53:03,194 - INFO     -   Action index calculation:
2025-10-29 13:53:03,194 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 6 = 3
2025-10-29 13:53:03,194 - INFO     -     - clamped to [0, 5]: 3
2025-10-29 13:53:03,194 - INFO     -   ✓ Extracted merge pair from edge 3: (13, 14)
2025-10-29 13:53:03,194 - INFO     -   ✓ Validation passed
2025-10-29 13:53:03,194 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:03,194 - INFO     -     - Total states before merge: 130
2025-10-29 13:53:03,195 - INFO     -     - Num nodes: 3
2025-10-29 13:53:03,195 - INFO     -     - Num edges: 6
2025-10-29 13:53:03,195 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:03,195 - INFO     -       - Node 13: 100 states
2025-10-29 13:53:03,195 - INFO     -       - Node 14: 20 states
2025-10-29 13:53:03,195 - INFO     -       - Expected product: 2000 states
2025-10-29 13:53:03,195 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:03,201 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:53:03,201 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:03,201 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:53:03,302 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:03,302 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:03,302 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:53:03,311 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:53:03,311 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:03,311 - INFO     -   Calling graph_tracker.merge_nodes([13, 14])...
2025-10-29 13:53:03,311 - INFO     - Attempting merge of nodes 13 and 14...
2025-10-29 13:53:03,311 - INFO     - Successfully merged nodes into new node 15 with 2000 states.
2025-10-29 13:53:03,311 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:03,311 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:03,311 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:53:03,311 - INFO     - 
================================================================================
2025-10-29 13:53:03,311 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:53:03,312 - INFO     - ================================================================================
2025-10-29 13:53:03,312 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:03,312 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:53:03,312 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:53:03,314 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:03,314 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:03,314 - INFO     -   - Raw ts1_f length: 100
2025-10-29 13:53:03,314 - INFO     -   - Raw ts2_f length: 20
2025-10-29 13:53:03,314 - INFO     -   - Raw f_after length: 2000
2025-10-29 13:53:03,314 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:03,314 - INFO     -   - ts1_valid: 100 / 100 (removed 0)
2025-10-29 13:53:03,314 - INFO     -   - ts2_valid: 20 / 20 (removed -20)
2025-10-29 13:53:03,315 - INFO     -   - after_valid: 1619 / 2000 (removed 381)
2025-10-29 13:53:03,315 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:03,315 - INFO     -   - ts1_id: 13
2025-10-29 13:53:03,315 - INFO     -   - ts2_id: 14
2025-10-29 13:53:03,315 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:03,315 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:03,315 - INFO     -   - ts1_size: 100, ts2_size: 20
2025-10-29 13:53:03,315 - INFO     -   - Product space size: 2000
2025-10-29 13:53:03,315 - INFO     -   - Using product state mapping
2025-10-29 13:53:03,318 - INFO     -   - f_before_product length: 2000
2025-10-29 13:53:03,322 - INFO     -   - avg_f_before: 7.1775 (2000 valid states)
2025-10-29 13:53:03,323 - INFO     -   - avg_f_after:  12.0735 (1619 valid states)
2025-10-29 13:53:03,323 - INFO     -   - delta: 4.8960
2025-10-29 13:53:03,323 - INFO     -   - f_stability: 1.0 - |4.8960| / 7.1775 = 0.3179
2025-10-29 13:53:03,323 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:03,323 - INFO     -   - Compared 120 values
2025-10-29 13:53:03,323 - INFO     -   - Significant changes (> 5.0): 63
2025-10-29 13:53:03,323 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:03,323 - INFO     -   - states_before: 2000
2025-10-29 13:53:03,323 - INFO     -   - states_after: 2000
2025-10-29 13:53:03,323 - INFO     -   - delta_states: 0
2025-10-29 13:53:03,323 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:03,323 - INFO     -   - ts1_transitions: 750
2025-10-29 13:53:03,323 - INFO     -   - ts2_transitions: 97
2025-10-29 13:53:03,323 - INFO     -   - merged_transitions: 10500
2025-10-29 13:53:03,323 - INFO     -   - transition_density_change: 4.8265
2025-10-29 13:53:03,323 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:03,323 - INFO     -   - search_signals present: True
2025-10-29 13:53:03,323 - INFO     -   - nodes_expanded: 1619
2025-10-29 13:53:03,324 - INFO     -   - search_depth: 5
2025-10-29 13:53:03,324 - INFO     -   - solution_cost: 4
2025-10-29 13:53:03,324 - INFO     -   - branching_factor: 6.4855
2025-10-29 13:53:03,324 - INFO     -   - solution_found: True
2025-10-29 13:53:03,324 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:03,325 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:03,325 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:53:03,325 - INFO     -   - TS13(100) + TS14(20) → 2000 states
2025-10-29 13:53:03,325 - INFO     -   - f_stability=0.318
2025-10-29 13:53:03,325 - INFO     -   - A* nodes_expanded=1619
2025-10-29 13:53:03,325 - INFO     -   - solution_found=True
2025-10-29 13:53:03,325 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:03,325 - INFO     - 
  Extracted signals:
2025-10-29 13:53:03,325 - INFO     -     - iteration: 6
2025-10-29 13:53:03,325 - INFO     -     - states_before: 2000
2025-10-29 13:53:03,325 - INFO     -     - states_after: 2000
2025-10-29 13:53:03,325 - INFO     -     - delta_states: 0
2025-10-29 13:53:03,325 - INFO     -     - f_value_stability: 0.3179
2025-10-29 13:53:03,325 - INFO     -     - num_significant_f_changes: 63
2025-10-29 13:53:03,326 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:03,326 - INFO     -     - nodes_expanded: 1619
2025-10-29 13:53:03,326 - INFO     -     - search_depth: 5
2025-10-29 13:53:03,326 - INFO     -     - solution_cost: 4
2025-10-29 13:53:03,326 - INFO     -     - branching_factor: 6.4855
2025-10-29 13:53:03,326 - INFO     -     - solution_found: True
2025-10-29 13:53:03,326 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:03,326 - INFO     - 
  Computing reward:
2025-10-29 13:53:03,326 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:03,326 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:03,326 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:03,326 - INFO     -   [1] BRANCHING FACTOR: 6.485 → score 0.251 (high BF, minimal credit)
2025-10-29 13:53:03,327 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:03,327 - INFO     -   [3] F-VALUE STABILITY: 0.194
2025-10-29 13:53:03,328 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:03,328 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:03,328 - INFO     - 
  [COMPOSITE]: 0.418
2025-10-29 13:53:03,328 - INFO     -     = 0.300*0.251 (bf)
2025-10-29 13:53:03,328 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:03,328 - INFO     -     + 0.350*0.194 (stability)
2025-10-29 13:53:03,328 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:03,328 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:03,328 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:03,328 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:03,329 - INFO     - 
  [FINAL REWARD]: 0.0354
2025-10-29 13:53:03,329 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:03,329 - INFO     -     ✓ Reward computed: 0.0354
2025-10-29 13:53:03,329 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:03,329 - INFO     -     - bf_score                       0.2515
2025-10-29 13:53:03,329 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:03,329 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:03,329 - INFO     -     - f_stability                    0.1938
2025-10-29 13:53:03,329 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:03,329 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:03,329 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:03,329 - INFO     -     - composite                      0.4177
2025-10-29 13:53:03,329 - INFO     -     - total                          0.0354
2025-10-29 13:53:03,329 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:03,329 - INFO     -   Num remaining nodes: 2
2025-10-29 13:53:03,329 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:53:03,331 - INFO     -   Done: False
2025-10-29 13:53:03,331 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:03,331 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:03,331 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:03,331 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:03,331 - INFO     -     - num_nodes: 2
2025-10-29 13:53:03,331 - INFO     -     - num_edges: 2
2025-10-29 13:53:03,331 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:03,331 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:53:03,332 - INFO     -   After: current_merge_step = 7
2025-10-29 13:53:03,332 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:03,332 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:03,332 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:03,332 - INFO     -   ✓ Step logged
2025-10-29 13:53:03,332 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:03,332 - INFO     -   Returning:
2025-10-29 13:53:03,333 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:03,333 - INFO     -     - reward: 0.0354
2025-10-29 13:53:03,333 - INFO     -     - done: False
2025-10-29 13:53:03,333 - INFO     -     - truncated: False
2025-10-29 13:53:03,333 - INFO     -     - info: 19 keys
2025-10-29 13:53:03,333 - INFO     - ==========================================================================================

2025-10-29 13:53:03,337 - INFO     - 
==========================================================================================
2025-10-29 13:53:03,337 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:03,338 - INFO     - ==========================================================================================
2025-10-29 13:53:03,338 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:03,338 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:53:03,338 - INFO     -   Available edges in graph: 2
2025-10-29 13:53:03,338 - INFO     -   Action index calculation:
2025-10-29 13:53:03,338 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 2 = 1
2025-10-29 13:53:03,338 - INFO     -     - clamped to [0, 1]: 1
2025-10-29 13:53:03,338 - INFO     -   ✓ Extracted merge pair from edge 1: (15, 10)
2025-10-29 13:53:03,338 - INFO     -   ✓ Validation passed
2025-10-29 13:53:03,338 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:03,338 - INFO     -     - Total states before merge: 2010
2025-10-29 13:53:03,338 - INFO     -     - Num nodes: 2
2025-10-29 13:53:03,338 - INFO     -     - Num edges: 2
2025-10-29 13:53:03,338 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:03,338 - INFO     -       - Node 15: 2000 states
2025-10-29 13:53:03,339 - INFO     -       - Node 10: 10 states
2025-10-29 13:53:03,339 - INFO     -       - Expected product: 20000 states
2025-10-29 13:53:03,339 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:03,345 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:53:03,345 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:03,346 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:53:03,447 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:03,447 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:03,447 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:53:03,469 - INFO     -   ✓ TS file received after 0.02s
2025-10-29 13:53:03,469 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:03,469 - INFO     -   Calling graph_tracker.merge_nodes([15, 10])...
2025-10-29 13:53:03,469 - INFO     - Attempting merge of nodes 15 and 10...
2025-10-29 13:53:03,469 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:53:03,469 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:03,469 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:03,469 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:53:03,469 - INFO     - 
================================================================================
2025-10-29 13:53:03,469 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:53:03,469 - INFO     - ================================================================================
2025-10-29 13:53:03,469 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:03,469 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:53:03,469 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:53:03,474 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:03,474 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:03,475 - INFO     -   - Raw ts1_f length: 384
2025-10-29 13:53:03,475 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:03,475 - INFO     -   - Raw f_after length: 3840
2025-10-29 13:53:03,475 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:03,475 - INFO     -   - ts1_valid: 384 / 384 (removed 0)
2025-10-29 13:53:03,475 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:03,477 - INFO     -   - after_valid: 2878 / 3840 (removed 962)
2025-10-29 13:53:03,477 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:03,477 - INFO     -   - ts1_id: 15
2025-10-29 13:53:03,478 - INFO     -   - ts2_id: 10
2025-10-29 13:53:03,478 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:03,478 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:03,478 - INFO     -   - ts1_size: 384, ts2_size: 10
2025-10-29 13:53:03,478 - INFO     -   - Product space size: 3840
2025-10-29 13:53:03,478 - INFO     -   - Using product state mapping
2025-10-29 13:53:03,483 - INFO     -   - f_before_product length: 3840
2025-10-29 13:53:03,495 - INFO     -   - avg_f_before: 7.2214 (3840 valid states)
2025-10-29 13:53:03,495 - INFO     -   - avg_f_after:  12.5514 (2878 valid states)
2025-10-29 13:53:03,495 - INFO     -   - delta: 5.3301
2025-10-29 13:53:03,495 - INFO     -   - f_stability: 1.0 - |5.3301| / 7.2214 = 0.2619
2025-10-29 13:53:03,495 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:03,495 - INFO     -   - Compared 394 values
2025-10-29 13:53:03,495 - INFO     -   - Significant changes (> 5.0): 123
2025-10-29 13:53:03,495 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:03,495 - INFO     -   - states_before: 3840
2025-10-29 13:53:03,495 - INFO     -   - states_after: 3840
2025-10-29 13:53:03,495 - INFO     -   - delta_states: 0
2025-10-29 13:53:03,495 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:03,495 - INFO     -   - ts1_transitions: 3354
2025-10-29 13:53:03,495 - INFO     -   - ts2_transitions: 40
2025-10-29 13:53:03,495 - INFO     -   - merged_transitions: 19670
2025-10-29 13:53:03,495 - INFO     -   - transition_density_change: 4.2385
2025-10-29 13:53:03,495 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:03,495 - INFO     -   - search_signals present: True
2025-10-29 13:53:03,496 - INFO     -   - nodes_expanded: 2878
2025-10-29 13:53:03,496 - INFO     -   - search_depth: 6
2025-10-29 13:53:03,496 - INFO     -   - solution_cost: 4
2025-10-29 13:53:03,496 - INFO     -   - branching_factor: 6.8346
2025-10-29 13:53:03,496 - INFO     -   - solution_found: True
2025-10-29 13:53:03,496 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:03,499 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:03,499 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:53:03,499 - INFO     -   - TS15(384) + TS10(10) → 3840 states
2025-10-29 13:53:03,499 - INFO     -   - f_stability=0.262
2025-10-29 13:53:03,499 - INFO     -   - A* nodes_expanded=2878
2025-10-29 13:53:03,500 - INFO     -   - solution_found=True
2025-10-29 13:53:03,500 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:03,500 - INFO     - 
  Extracted signals:
2025-10-29 13:53:03,500 - INFO     -     - iteration: 7
2025-10-29 13:53:03,500 - INFO     -     - states_before: 3840
2025-10-29 13:53:03,500 - INFO     -     - states_after: 3840
2025-10-29 13:53:03,500 - INFO     -     - delta_states: 0
2025-10-29 13:53:03,500 - INFO     -     - f_value_stability: 0.2619
2025-10-29 13:53:03,500 - INFO     -     - num_significant_f_changes: 123
2025-10-29 13:53:03,500 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:03,501 - INFO     -     - nodes_expanded: 2878
2025-10-29 13:53:03,501 - INFO     -     - search_depth: 6
2025-10-29 13:53:03,501 - INFO     -     - solution_cost: 4
2025-10-29 13:53:03,501 - INFO     -     - branching_factor: 6.8346
2025-10-29 13:53:03,501 - INFO     -     - solution_found: True
2025-10-29 13:53:03,501 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:03,501 - WARNING  -     ⚠️  Poor F-stability: 0.2619
2025-10-29 13:53:03,502 - INFO     - 
  Computing reward:
2025-10-29 13:53:03,502 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:03,502 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:03,502 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:03,502 - INFO     -   [1] BRANCHING FACTOR: 6.835 → score 0.217 (high BF, minimal credit)
2025-10-29 13:53:03,502 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:03,504 - INFO     -   [3] F-VALUE STABILITY: 0.200
2025-10-29 13:53:03,504 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:03,504 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:03,504 - INFO     - 
  [COMPOSITE]: 0.405
2025-10-29 13:53:03,504 - INFO     -     = 0.300*0.217 (bf)
2025-10-29 13:53:03,505 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:03,505 - INFO     -     + 0.350*0.200 (stability)
2025-10-29 13:53:03,505 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:03,505 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:03,505 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:03,505 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:03,506 - INFO     - 
  [FINAL REWARD]: 0.0109
2025-10-29 13:53:03,506 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:03,506 - INFO     -     ✓ Reward computed: 0.0109
2025-10-29 13:53:03,506 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:03,506 - INFO     -     - bf_score                       0.2165
2025-10-29 13:53:03,506 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:03,506 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:03,506 - INFO     -     - f_stability                    0.2000
2025-10-29 13:53:03,506 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:03,506 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:03,507 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:03,507 - INFO     -     - composite                      0.4055
2025-10-29 13:53:03,507 - INFO     -     - total                          0.0109
2025-10-29 13:53:03,507 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:03,507 - INFO     -   Num remaining nodes: 1
2025-10-29 13:53:03,507 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:53:03,507 - INFO     -   Done: True
2025-10-29 13:53:03,507 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:53:03,507 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:03,507 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:03,507 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:03,508 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:03,508 - INFO     -     - num_nodes: 1
2025-10-29 13:53:03,508 - INFO     -     - num_edges: 0
2025-10-29 13:53:03,508 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:03,508 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:53:03,508 - INFO     -   After: current_merge_step = 8
2025-10-29 13:53:03,508 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:03,508 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:03,508 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:03,509 - INFO     -   ✓ Step logged
2025-10-29 13:53:03,509 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:03,509 - INFO     -   Returning:
2025-10-29 13:53:03,509 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:03,509 - INFO     -     - reward: 0.0109
2025-10-29 13:53:03,509 - INFO     -     - done: True
2025-10-29 13:53:03,509 - INFO     -     - truncated: False
2025-10-29 13:53:03,509 - INFO     -     - info: 19 keys
2025-10-29 13:53:03,509 - INFO     - ==========================================================================================

2025-10-29 13:53:03,586 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:53:03,591 - INFO     - [Handshake] Building FD command:
2025-10-29 13:53:03,591 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:03,591 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_02.pddl
2025-10-29 13:53:03,591 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:53:03,595 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:04,347 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:04,347 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:04,347 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:04,659 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:04,659 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:04,659 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:04,660 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:04,660 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:04,661 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:04,661 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:04,661 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:04,661 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:04,661 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:04,661 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:04,661 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:04,661 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:04,661 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:04,661 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:04,661 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:04,661 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:04,661 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:04,661 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:04,661 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:04,661 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:04,661 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:04,662 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:04,663 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:04,663 - INFO     - Added edge (0, 1)
2025-10-29 13:53:04,663 - INFO     - Added edge (0, 2)
2025-10-29 13:53:04,663 - INFO     - Added edge (0, 3)
2025-10-29 13:53:04,663 - INFO     - Added edge (0, 4)
2025-10-29 13:53:04,663 - INFO     - Added edge (0, 5)
2025-10-29 13:53:04,663 - INFO     - Added edge (0, 6)
2025-10-29 13:53:04,663 - INFO     - Added edge (0, 7)
2025-10-29 13:53:04,663 - INFO     - Added edge (0, 8)
2025-10-29 13:53:04,663 - INFO     - Added edge (1, 0)
2025-10-29 13:53:04,663 - INFO     - Added edge (1, 2)
2025-10-29 13:53:04,663 - INFO     - Added edge (1, 3)
2025-10-29 13:53:04,663 - INFO     - Added edge (1, 4)
2025-10-29 13:53:04,663 - INFO     - Added edge (1, 5)
2025-10-29 13:53:04,663 - INFO     - Added edge (1, 6)
2025-10-29 13:53:04,663 - INFO     - Added edge (1, 7)
2025-10-29 13:53:04,663 - INFO     - Added edge (1, 8)
2025-10-29 13:53:04,663 - INFO     - Added edge (2, 0)
2025-10-29 13:53:04,663 - INFO     - Added edge (2, 1)
2025-10-29 13:53:04,664 - INFO     - Added edge (2, 3)
2025-10-29 13:53:04,664 - INFO     - Added edge (2, 4)
2025-10-29 13:53:04,664 - INFO     - Added edge (2, 5)
2025-10-29 13:53:04,664 - INFO     - Added edge (2, 6)
2025-10-29 13:53:04,664 - INFO     - Added edge (2, 7)
2025-10-29 13:53:04,664 - INFO     - Added edge (2, 8)
2025-10-29 13:53:04,664 - INFO     - Added edge (3, 0)
2025-10-29 13:53:04,664 - INFO     - Added edge (3, 1)
2025-10-29 13:53:04,664 - INFO     - Added edge (3, 2)
2025-10-29 13:53:04,664 - INFO     - Added edge (3, 4)
2025-10-29 13:53:04,664 - INFO     - Added edge (3, 5)
2025-10-29 13:53:04,664 - INFO     - Added edge (3, 6)
2025-10-29 13:53:04,664 - INFO     - Added edge (3, 7)
2025-10-29 13:53:04,664 - INFO     - Added edge (3, 8)
2025-10-29 13:53:04,664 - INFO     - Added edge (4, 0)
2025-10-29 13:53:04,664 - INFO     - Added edge (4, 1)
2025-10-29 13:53:04,664 - INFO     - Added edge (4, 2)
2025-10-29 13:53:04,664 - INFO     - Added edge (4, 3)
2025-10-29 13:53:04,664 - INFO     - Added edge (4, 5)
2025-10-29 13:53:04,664 - INFO     - Added edge (4, 6)
2025-10-29 13:53:04,665 - INFO     - Added edge (4, 7)
2025-10-29 13:53:04,665 - INFO     - Added edge (4, 8)
2025-10-29 13:53:04,665 - INFO     - Added edge (5, 0)
2025-10-29 13:53:04,665 - INFO     - Added edge (5, 1)
2025-10-29 13:53:04,665 - INFO     - Added edge (5, 2)
2025-10-29 13:53:04,665 - INFO     - Added edge (5, 3)
2025-10-29 13:53:04,665 - INFO     - Added edge (5, 4)
2025-10-29 13:53:04,665 - INFO     - Added edge (6, 0)
2025-10-29 13:53:04,665 - INFO     - Added edge (6, 1)
2025-10-29 13:53:04,665 - INFO     - Added edge (6, 2)
2025-10-29 13:53:04,665 - INFO     - Added edge (6, 3)
2025-10-29 13:53:04,665 - INFO     - Added edge (6, 4)
2025-10-29 13:53:04,665 - INFO     - Added edge (7, 0)
2025-10-29 13:53:04,665 - INFO     - Added edge (7, 1)
2025-10-29 13:53:04,665 - INFO     - Added edge (7, 2)
2025-10-29 13:53:04,665 - INFO     - Added edge (7, 3)
2025-10-29 13:53:04,665 - INFO     - Added edge (7, 4)
2025-10-29 13:53:04,665 - INFO     - Added edge (8, 0)
2025-10-29 13:53:04,665 - INFO     - Added edge (8, 1)
2025-10-29 13:53:04,665 - INFO     - Added edge (8, 2)
2025-10-29 13:53:04,665 - INFO     - Added edge (8, 3)
2025-10-29 13:53:04,666 - INFO     - Added edge (8, 4)
2025-10-29 13:53:04,666 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:04,672 - INFO     - 
==========================================================================================
2025-10-29 13:53:04,672 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:04,673 - INFO     - ==========================================================================================
2025-10-29 13:53:04,673 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:04,673 - INFO     -   Input action: 17 (type: int)
2025-10-29 13:53:04,673 - INFO     -   Available edges in graph: 60
2025-10-29 13:53:04,673 - INFO     -   Action index calculation:
2025-10-29 13:53:04,673 - INFO     -     - action % max(num_valid_edges, 1) = 17 % 60 = 17
2025-10-29 13:53:04,673 - INFO     -     - clamped to [0, 59]: 17
2025-10-29 13:53:04,673 - INFO     -   ✓ Extracted merge pair from edge 17: (2, 1)
2025-10-29 13:53:04,673 - INFO     -   ✓ Validation passed
2025-10-29 13:53:04,673 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:04,673 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:04,673 - INFO     -     - Num nodes: 9
2025-10-29 13:53:04,673 - INFO     -     - Num edges: 60
2025-10-29 13:53:04,673 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:04,674 - INFO     -       - Node 2: 2 states
2025-10-29 13:53:04,674 - INFO     -       - Node 1: 2 states
2025-10-29 13:53:04,674 - INFO     -       - Expected product: 4 states
2025-10-29 13:53:04,674 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:04,683 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:53:04,683 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:04,683 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:53:04,784 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:04,785 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:04,785 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:53:04,785 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:04,785 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:04,785 - INFO     -   Calling graph_tracker.merge_nodes([2, 1])...
2025-10-29 13:53:04,785 - INFO     - Attempting merge of nodes 2 and 1...
2025-10-29 13:53:04,785 - INFO     - Successfully merged nodes into new node 9 with 4 states.
2025-10-29 13:53:04,786 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:04,786 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:04,786 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:53:04,786 - INFO     - 
================================================================================
2025-10-29 13:53:04,786 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:53:04,786 - INFO     - ================================================================================
2025-10-29 13:53:04,786 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:04,786 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:53:04,786 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:53:04,787 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:04,787 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:04,787 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:04,787 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:04,787 - INFO     -   - Raw f_after length: 4
2025-10-29 13:53:04,787 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:04,787 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:04,787 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:04,787 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:53:04,787 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:04,788 - INFO     -   - ts1_id: 2
2025-10-29 13:53:04,788 - INFO     -   - ts2_id: 1
2025-10-29 13:53:04,788 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:04,788 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:04,788 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:53:04,788 - INFO     -   - Product space size: 4
2025-10-29 13:53:04,788 - INFO     -   - Using product state mapping
2025-10-29 13:53:04,788 - INFO     -   - f_before_product length: 4
2025-10-29 13:53:04,788 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:53:04,788 - INFO     -   - avg_f_after:  1.0000 (4 valid states)
2025-10-29 13:53:04,789 - INFO     -   - delta: 0.2500
2025-10-29 13:53:04,789 - INFO     -   - f_stability: 1.0 - |0.2500| / 0.7500 = 0.6667
2025-10-29 13:53:04,789 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:04,789 - INFO     -   - Compared 4 values
2025-10-29 13:53:04,789 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:04,789 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:04,789 - INFO     -   - states_before: 4
2025-10-29 13:53:04,789 - INFO     -   - states_after: 4
2025-10-29 13:53:04,789 - INFO     -   - delta_states: 0
2025-10-29 13:53:04,789 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:04,789 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:04,789 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:04,790 - INFO     -   - merged_transitions: 20
2025-10-29 13:53:04,790 - INFO     -   - transition_density_change: 2.5000
2025-10-29 13:53:04,790 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:04,790 - INFO     -   - search_signals present: True
2025-10-29 13:53:04,790 - INFO     -   - nodes_expanded: 4
2025-10-29 13:53:04,790 - INFO     -   - search_depth: 0
2025-10-29 13:53:04,790 - INFO     -   - solution_cost: 0
2025-10-29 13:53:04,790 - INFO     -   - branching_factor: 5.0000
2025-10-29 13:53:04,790 - INFO     -   - solution_found: True
2025-10-29 13:53:04,790 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:04,790 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:04,791 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:53:04,791 - INFO     -   - TS2(2) + TS1(2) → 4 states
2025-10-29 13:53:04,791 - INFO     -   - f_stability=0.667
2025-10-29 13:53:04,791 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:53:04,791 - INFO     -   - solution_found=True
2025-10-29 13:53:04,791 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:04,791 - INFO     - 
  Extracted signals:
2025-10-29 13:53:04,791 - INFO     -     - iteration: 0
2025-10-29 13:53:04,791 - INFO     -     - states_before: 4
2025-10-29 13:53:04,791 - INFO     -     - states_after: 4
2025-10-29 13:53:04,791 - INFO     -     - delta_states: 0
2025-10-29 13:53:04,791 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:53:04,791 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:04,791 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:04,791 - INFO     -     - nodes_expanded: 4
2025-10-29 13:53:04,791 - INFO     -     - search_depth: 0
2025-10-29 13:53:04,791 - INFO     -     - solution_cost: 0
2025-10-29 13:53:04,791 - INFO     -     - branching_factor: 5.0000
2025-10-29 13:53:04,792 - INFO     -     - solution_found: True
2025-10-29 13:53:04,792 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:04,792 - INFO     - 
  Computing reward:
2025-10-29 13:53:04,792 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:04,792 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:04,793 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:04,793 - INFO     -   [1] BRANCHING FACTOR: 5.000 → score 0.433 (tolerable)
2025-10-29 13:53:04,793 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:53:04,793 - INFO     -   [3] F-VALUE STABILITY: 0.176
2025-10-29 13:53:04,793 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:04,793 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:04,793 - INFO     - 
  [COMPOSITE]: 0.412
2025-10-29 13:53:04,794 - INFO     -     = 0.300*0.433 (bf)
2025-10-29 13:53:04,794 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:53:04,794 - INFO     -     + 0.350*0.176 (stability)
2025-10-29 13:53:04,794 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:04,794 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:04,794 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:04,794 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:04,794 - INFO     - 
  [FINAL REWARD]: 0.0230
2025-10-29 13:53:04,794 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:04,795 - INFO     -     ✓ Reward computed: 0.0230
2025-10-29 13:53:04,795 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:04,795 - INFO     -     - bf_score                       0.4333
2025-10-29 13:53:04,795 - INFO     -     - depth_score                    0.5000
2025-10-29 13:53:04,795 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:04,795 - INFO     -     - f_stability                    0.1757
2025-10-29 13:53:04,795 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:04,795 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:04,795 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:04,796 - INFO     -     - composite                      0.4115
2025-10-29 13:53:04,796 - INFO     -     - total                          0.0230
2025-10-29 13:53:04,796 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:04,796 - INFO     -   Num remaining nodes: 8
2025-10-29 13:53:04,796 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:53:04,796 - INFO     -   Done: False
2025-10-29 13:53:04,796 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:04,798 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:04,798 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:04,798 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:04,798 - INFO     -     - num_nodes: 8
2025-10-29 13:53:04,798 - INFO     -     - num_edges: 44
2025-10-29 13:53:04,798 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:04,798 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:53:04,798 - INFO     -   After: current_merge_step = 1
2025-10-29 13:53:04,798 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:04,798 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:04,798 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:04,799 - INFO     -   ✓ Step logged
2025-10-29 13:53:04,799 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:04,799 - INFO     -   Returning:
2025-10-29 13:53:04,799 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:04,799 - INFO     -     - reward: 0.0230
2025-10-29 13:53:04,799 - INFO     -     - done: False
2025-10-29 13:53:04,800 - INFO     -     - truncated: False
2025-10-29 13:53:04,800 - INFO     -     - info: 19 keys
2025-10-29 13:53:04,800 - INFO     - ==========================================================================================

2025-10-29 13:53:04,804 - INFO     - 
==========================================================================================
2025-10-29 13:53:04,804 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:04,804 - INFO     - ==========================================================================================
2025-10-29 13:53:04,804 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:04,804 - INFO     -   Input action: 37 (type: int)
2025-10-29 13:53:04,804 - INFO     -   Available edges in graph: 44
2025-10-29 13:53:04,804 - INFO     -   Action index calculation:
2025-10-29 13:53:04,804 - INFO     -     - action % max(num_valid_edges, 1) = 37 % 44 = 37
2025-10-29 13:53:04,806 - INFO     -     - clamped to [0, 43]: 37
2025-10-29 13:53:04,806 - INFO     -   ✓ Extracted merge pair from edge 37: (9, 0)
2025-10-29 13:53:04,806 - INFO     -   ✓ Validation passed
2025-10-29 13:53:04,806 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:04,806 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:04,806 - INFO     -     - Num nodes: 8
2025-10-29 13:53:04,806 - INFO     -     - Num edges: 44
2025-10-29 13:53:04,806 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:04,806 - INFO     -       - Node 9: 4 states
2025-10-29 13:53:04,806 - INFO     -       - Node 0: 2 states
2025-10-29 13:53:04,806 - INFO     -       - Expected product: 8 states
2025-10-29 13:53:04,806 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:04,812 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:53:04,812 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:04,813 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:53:04,913 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:04,914 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:04,914 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:53:04,914 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:04,914 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:04,914 - INFO     -   Calling graph_tracker.merge_nodes([9, 0])...
2025-10-29 13:53:04,914 - INFO     - Attempting merge of nodes 9 and 0...
2025-10-29 13:53:04,914 - INFO     - Successfully merged nodes into new node 10 with 8 states.
2025-10-29 13:53:04,914 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:04,914 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:04,915 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:53:04,915 - INFO     - 
================================================================================
2025-10-29 13:53:04,915 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:53:04,915 - INFO     - ================================================================================
2025-10-29 13:53:04,915 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:04,915 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:53:04,915 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:53:04,915 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:04,915 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:04,915 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:53:04,915 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:04,916 - INFO     -   - Raw f_after length: 8
2025-10-29 13:53:04,916 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:04,916 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:53:04,916 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:04,916 - INFO     -   - after_valid: 8 / 8 (removed 0)
2025-10-29 13:53:04,916 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:04,916 - INFO     -   - ts1_id: 9
2025-10-29 13:53:04,916 - INFO     -   - ts2_id: 0
2025-10-29 13:53:04,916 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:04,916 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:04,916 - INFO     -   - ts1_size: 4, ts2_size: 2
2025-10-29 13:53:04,916 - INFO     -   - Product space size: 8
2025-10-29 13:53:04,916 - INFO     -   - Using product state mapping
2025-10-29 13:53:04,916 - INFO     -   - f_before_product length: 8
2025-10-29 13:53:04,916 - INFO     -   - avg_f_before: 1.1250 (8 valid states)
2025-10-29 13:53:04,916 - INFO     -   - avg_f_after:  1.5000 (8 valid states)
2025-10-29 13:53:04,916 - INFO     -   - delta: 0.3750
2025-10-29 13:53:04,916 - INFO     -   - f_stability: 1.0 - |0.3750| / 1.1250 = 0.6667
2025-10-29 13:53:04,916 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:04,916 - INFO     -   - Compared 6 values
2025-10-29 13:53:04,916 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:04,916 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:04,917 - INFO     -   - states_before: 8
2025-10-29 13:53:04,917 - INFO     -   - states_after: 8
2025-10-29 13:53:04,917 - INFO     -   - delta_states: 0
2025-10-29 13:53:04,917 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:04,917 - INFO     -   - ts1_transitions: 20
2025-10-29 13:53:04,917 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:04,917 - INFO     -   - merged_transitions: 68
2025-10-29 13:53:04,917 - INFO     -   - transition_density_change: 5.3750
2025-10-29 13:53:04,917 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:04,917 - INFO     -   - search_signals present: True
2025-10-29 13:53:04,917 - INFO     -   - nodes_expanded: 8
2025-10-29 13:53:04,917 - INFO     -   - search_depth: 0
2025-10-29 13:53:04,917 - INFO     -   - solution_cost: 0
2025-10-29 13:53:04,917 - INFO     -   - branching_factor: 8.5000
2025-10-29 13:53:04,918 - INFO     -   - solution_found: True
2025-10-29 13:53:04,918 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:04,918 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:04,918 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:53:04,918 - INFO     -   - TS9(4) + TS0(2) → 8 states
2025-10-29 13:53:04,918 - INFO     -   - f_stability=0.667
2025-10-29 13:53:04,918 - INFO     -   - A* nodes_expanded=8
2025-10-29 13:53:04,918 - INFO     -   - solution_found=True
2025-10-29 13:53:04,918 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:04,918 - INFO     - 
  Extracted signals:
2025-10-29 13:53:04,918 - INFO     -     - iteration: 1
2025-10-29 13:53:04,918 - INFO     -     - states_before: 8
2025-10-29 13:53:04,918 - INFO     -     - states_after: 8
2025-10-29 13:53:04,918 - INFO     -     - delta_states: 0
2025-10-29 13:53:04,919 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:53:04,919 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:04,919 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:04,919 - INFO     -     - nodes_expanded: 8
2025-10-29 13:53:04,919 - INFO     -     - search_depth: 0
2025-10-29 13:53:04,919 - INFO     -     - solution_cost: 0
2025-10-29 13:53:04,919 - INFO     -     - branching_factor: 8.5000
2025-10-29 13:53:04,919 - INFO     -     - solution_found: True
2025-10-29 13:53:04,919 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:04,919 - WARNING  -     ⚠️  High branching factor: 8.5000
2025-10-29 13:53:04,919 - INFO     - 
  Computing reward:
2025-10-29 13:53:04,919 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:04,919 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:04,919 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:04,919 - INFO     -   [1] BRANCHING FACTOR: 8.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:53:04,919 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:53:04,920 - INFO     -   [3] F-VALUE STABILITY: 0.572
2025-10-29 13:53:04,920 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:04,920 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:04,920 - INFO     - 
  [COMPOSITE]: 0.450
2025-10-29 13:53:04,920 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:53:04,920 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:53:04,920 - INFO     -     + 0.350*0.572 (stability)
2025-10-29 13:53:04,920 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:04,920 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:04,920 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:04,920 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:04,920 - INFO     - 
  [FINAL REWARD]: 0.3003
2025-10-29 13:53:04,920 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:04,920 - INFO     -     ✓ Reward computed: 0.3003
2025-10-29 13:53:04,921 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:04,921 - INFO     -     - bf_score                       0.1000
2025-10-29 13:53:04,921 - INFO     -     - depth_score                    0.5000
2025-10-29 13:53:04,921 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:04,921 - INFO     -     - f_stability                    0.5719
2025-10-29 13:53:04,921 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:04,921 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:04,921 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:04,921 - INFO     -     - composite                      0.4502
2025-10-29 13:53:04,921 - INFO     -     - total                          0.3003
2025-10-29 13:53:04,921 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:04,921 - INFO     -   Num remaining nodes: 7
2025-10-29 13:53:04,921 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:53:04,921 - INFO     -   Done: False
2025-10-29 13:53:04,921 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:04,922 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:04,922 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:04,923 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:04,923 - INFO     -     - num_nodes: 7
2025-10-29 13:53:04,923 - INFO     -     - num_edges: 30
2025-10-29 13:53:04,923 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:04,923 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:53:04,923 - INFO     -   After: current_merge_step = 2
2025-10-29 13:53:04,923 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:04,923 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:04,923 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:04,924 - INFO     -   ✓ Step logged
2025-10-29 13:53:04,924 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:04,924 - INFO     -   Returning:
2025-10-29 13:53:04,924 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:04,924 - INFO     -     - reward: 0.3003
2025-10-29 13:53:04,924 - INFO     -     - done: False
2025-10-29 13:53:04,925 - INFO     -     - truncated: False
2025-10-29 13:53:04,925 - INFO     -     - info: 19 keys
2025-10-29 13:53:04,925 - INFO     - ==========================================================================================

2025-10-29 13:53:04,929 - INFO     - 
==========================================================================================
2025-10-29 13:53:04,929 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:04,929 - INFO     - ==========================================================================================
2025-10-29 13:53:04,929 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:04,929 - INFO     -   Input action: 19 (type: int)
2025-10-29 13:53:04,929 - INFO     -   Available edges in graph: 30
2025-10-29 13:53:04,929 - INFO     -   Action index calculation:
2025-10-29 13:53:04,929 - INFO     -     - action % max(num_valid_edges, 1) = 19 % 30 = 19
2025-10-29 13:53:04,929 - INFO     -     - clamped to [0, 29]: 19
2025-10-29 13:53:04,929 - INFO     -   ✓ Extracted merge pair from edge 19: (7, 4)
2025-10-29 13:53:04,929 - INFO     -   ✓ Validation passed
2025-10-29 13:53:04,929 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:04,929 - INFO     -     - Total states before merge: 32
2025-10-29 13:53:04,929 - INFO     -     - Num nodes: 7
2025-10-29 13:53:04,929 - INFO     -     - Num edges: 30
2025-10-29 13:53:04,929 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:04,930 - INFO     -       - Node 7: 5 states
2025-10-29 13:53:04,930 - INFO     -       - Node 4: 2 states
2025-10-29 13:53:04,930 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:04,930 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:04,935 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:53:04,935 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:04,935 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:53:05,036 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:05,036 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:05,036 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:53:05,037 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:05,037 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:05,037 - INFO     -   Calling graph_tracker.merge_nodes([7, 4])...
2025-10-29 13:53:05,037 - INFO     - Attempting merge of nodes 7 and 4...
2025-10-29 13:53:05,037 - INFO     - Successfully merged nodes into new node 11 with 10 states.
2025-10-29 13:53:05,037 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:05,037 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:05,037 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:53:05,037 - INFO     - 
================================================================================
2025-10-29 13:53:05,037 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:53:05,037 - INFO     - ================================================================================
2025-10-29 13:53:05,038 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:05,038 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:53:05,038 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:53:05,038 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:05,038 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:05,038 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:05,038 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:05,038 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:05,038 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:05,039 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:05,039 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:05,039 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:05,039 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:05,039 - INFO     -   - ts1_id: 7
2025-10-29 13:53:05,039 - INFO     -   - ts2_id: 4
2025-10-29 13:53:05,039 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:05,039 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:05,039 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:05,039 - INFO     -   - Product space size: 10
2025-10-29 13:53:05,039 - INFO     -   - Using product state mapping
2025-10-29 13:53:05,039 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:05,039 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:05,039 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:53:05,039 - INFO     -   - delta: 0.8000
2025-10-29 13:53:05,039 - INFO     -   - f_stability: 1.0 - |0.8000| / 2.8000 = 0.7143
2025-10-29 13:53:05,040 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:05,040 - INFO     -   - Compared 7 values
2025-10-29 13:53:05,040 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:05,040 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:05,040 - INFO     -   - states_before: 10
2025-10-29 13:53:05,040 - INFO     -   - states_after: 10
2025-10-29 13:53:05,040 - INFO     -   - delta_states: 0
2025-10-29 13:53:05,040 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:05,040 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:05,040 - INFO     -   - ts2_transitions: 3
2025-10-29 13:53:05,040 - INFO     -   - merged_transitions: 27
2025-10-29 13:53:05,040 - INFO     -   - transition_density_change: 1.1000
2025-10-29 13:53:05,040 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:05,040 - INFO     -   - search_signals present: True
2025-10-29 13:53:05,040 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:05,040 - INFO     -   - search_depth: 2
2025-10-29 13:53:05,040 - INFO     -   - solution_cost: 2
2025-10-29 13:53:05,040 - INFO     -   - branching_factor: 2.7000
2025-10-29 13:53:05,041 - INFO     -   - solution_found: True
2025-10-29 13:53:05,041 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:05,041 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:05,041 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:53:05,041 - INFO     -   - TS7(5) + TS4(2) → 10 states
2025-10-29 13:53:05,041 - INFO     -   - f_stability=0.714
2025-10-29 13:53:05,041 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:05,041 - INFO     -   - solution_found=True
2025-10-29 13:53:05,041 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:05,041 - INFO     - 
  Extracted signals:
2025-10-29 13:53:05,041 - INFO     -     - iteration: 2
2025-10-29 13:53:05,041 - INFO     -     - states_before: 10
2025-10-29 13:53:05,041 - INFO     -     - states_after: 10
2025-10-29 13:53:05,041 - INFO     -     - delta_states: 0
2025-10-29 13:53:05,041 - INFO     -     - f_value_stability: 0.7143
2025-10-29 13:53:05,041 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:05,042 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:05,042 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:05,042 - INFO     -     - search_depth: 2
2025-10-29 13:53:05,042 - INFO     -     - solution_cost: 2
2025-10-29 13:53:05,042 - INFO     -     - branching_factor: 2.7000
2025-10-29 13:53:05,042 - INFO     -     - solution_found: True
2025-10-29 13:53:05,042 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:05,042 - INFO     - 
  Computing reward:
2025-10-29 13:53:05,042 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:05,042 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:05,042 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:05,042 - INFO     -   [1] BRANCHING FACTOR: 2.700 → score 0.745 (good (in comfort zone))
2025-10-29 13:53:05,042 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:05,042 - INFO     -   [3] F-VALUE STABILITY: 0.459
2025-10-29 13:53:05,042 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:05,042 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:05,043 - INFO     - 
  [COMPOSITE]: 0.676
2025-10-29 13:53:05,043 - INFO     -     = 0.300*0.745 (bf)
2025-10-29 13:53:05,043 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:05,043 - INFO     -     + 0.350*0.459 (stability)
2025-10-29 13:53:05,043 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:05,043 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:05,043 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:05,043 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:05,043 - INFO     - 
  [FINAL REWARD]: 0.6523
2025-10-29 13:53:05,043 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:05,043 - INFO     -     ✓ Reward computed: 0.6523
2025-10-29 13:53:05,043 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:05,043 - INFO     -     - bf_score                       0.7450
2025-10-29 13:53:05,043 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:05,043 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:05,043 - INFO     -     - f_stability                    0.4588
2025-10-29 13:53:05,043 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:05,043 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:05,043 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:05,043 - INFO     -     - composite                      0.6762
2025-10-29 13:53:05,043 - INFO     -     - total                          0.6523
2025-10-29 13:53:05,043 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:05,043 - INFO     -   Num remaining nodes: 6
2025-10-29 13:53:05,043 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:53:05,043 - INFO     -   Done: False
2025-10-29 13:53:05,043 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:05,045 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:05,045 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:05,045 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:05,045 - INFO     -     - num_nodes: 6
2025-10-29 13:53:05,045 - INFO     -     - num_edges: 24
2025-10-29 13:53:05,045 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:05,045 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:53:05,045 - INFO     -   After: current_merge_step = 3
2025-10-29 13:53:05,045 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:05,045 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:05,045 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:05,048 - INFO     -   ✓ Step logged
2025-10-29 13:53:05,048 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:05,048 - INFO     -   Returning:
2025-10-29 13:53:05,048 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:05,048 - INFO     -     - reward: 0.6523
2025-10-29 13:53:05,048 - INFO     -     - done: False
2025-10-29 13:53:05,048 - INFO     -     - truncated: False
2025-10-29 13:53:05,048 - INFO     -     - info: 19 keys
2025-10-29 13:53:05,048 - INFO     - ==========================================================================================

2025-10-29 13:53:05,052 - INFO     - 
==========================================================================================
2025-10-29 13:53:05,052 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:05,052 - INFO     - ==========================================================================================
2025-10-29 13:53:05,052 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:05,053 - INFO     -   Input action: 11 (type: int)
2025-10-29 13:53:05,053 - INFO     -   Available edges in graph: 24
2025-10-29 13:53:05,053 - INFO     -   Action index calculation:
2025-10-29 13:53:05,053 - INFO     -     - action % max(num_valid_edges, 1) = 11 % 24 = 11
2025-10-29 13:53:05,053 - INFO     -     - clamped to [0, 23]: 11
2025-10-29 13:53:05,053 - INFO     -   ✓ Extracted merge pair from edge 11: (8, 3)
2025-10-29 13:53:05,053 - INFO     -   ✓ Validation passed
2025-10-29 13:53:05,053 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:05,053 - INFO     -     - Total states before merge: 35
2025-10-29 13:53:05,053 - INFO     -     - Num nodes: 6
2025-10-29 13:53:05,053 - INFO     -     - Num edges: 24
2025-10-29 13:53:05,053 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:05,053 - INFO     -       - Node 8: 5 states
2025-10-29 13:53:05,053 - INFO     -       - Node 3: 2 states
2025-10-29 13:53:05,053 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:05,053 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:05,060 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:53:05,060 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:05,060 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:53:05,160 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:05,160 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:05,160 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:53:05,161 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:05,161 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:05,161 - INFO     -   Calling graph_tracker.merge_nodes([8, 3])...
2025-10-29 13:53:05,161 - INFO     - Attempting merge of nodes 8 and 3...
2025-10-29 13:53:05,161 - INFO     - Successfully merged nodes into new node 12 with 10 states.
2025-10-29 13:53:05,161 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:05,161 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:05,161 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:53:05,161 - INFO     - 
================================================================================
2025-10-29 13:53:05,161 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:53:05,161 - INFO     - ================================================================================
2025-10-29 13:53:05,161 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:05,161 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:53:05,161 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:53:05,163 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:05,163 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:05,163 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:05,163 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:05,163 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:05,163 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:05,163 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:05,163 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:05,163 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:05,163 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:05,164 - INFO     -   - ts1_id: 8
2025-10-29 13:53:05,164 - INFO     -   - ts2_id: 3
2025-10-29 13:53:05,164 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:05,164 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:05,164 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:05,164 - INFO     -   - Product space size: 10
2025-10-29 13:53:05,164 - INFO     -   - Using product state mapping
2025-10-29 13:53:05,164 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:05,164 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:53:05,164 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:53:05,164 - INFO     -   - delta: 0.7000
2025-10-29 13:53:05,164 - INFO     -   - f_stability: 1.0 - |0.7000| / 2.9000 = 0.7586
2025-10-29 13:53:05,164 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:05,164 - INFO     -   - Compared 7 values
2025-10-29 13:53:05,165 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:05,165 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:05,165 - INFO     -   - states_before: 10
2025-10-29 13:53:05,165 - INFO     -   - states_after: 10
2025-10-29 13:53:05,165 - INFO     -   - delta_states: 0
2025-10-29 13:53:05,165 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:05,165 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:05,165 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:05,165 - INFO     -   - merged_transitions: 37
2025-10-29 13:53:05,165 - INFO     -   - transition_density_change: 1.9000
2025-10-29 13:53:05,165 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:05,165 - INFO     -   - search_signals present: True
2025-10-29 13:53:05,165 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:05,165 - INFO     -   - search_depth: 2
2025-10-29 13:53:05,165 - INFO     -   - solution_cost: 0
2025-10-29 13:53:05,166 - INFO     -   - branching_factor: 3.7000
2025-10-29 13:53:05,166 - INFO     -   - solution_found: True
2025-10-29 13:53:05,166 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:05,166 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:05,166 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:53:05,166 - INFO     -   - TS8(5) + TS3(2) → 10 states
2025-10-29 13:53:05,166 - INFO     -   - f_stability=0.759
2025-10-29 13:53:05,166 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:05,166 - INFO     -   - solution_found=True
2025-10-29 13:53:05,166 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:05,166 - INFO     - 
  Extracted signals:
2025-10-29 13:53:05,166 - INFO     -     - iteration: 3
2025-10-29 13:53:05,166 - INFO     -     - states_before: 10
2025-10-29 13:53:05,166 - INFO     -     - states_after: 10
2025-10-29 13:53:05,167 - INFO     -     - delta_states: 0
2025-10-29 13:53:05,167 - INFO     -     - f_value_stability: 0.7586
2025-10-29 13:53:05,167 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:05,167 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:05,167 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:05,167 - INFO     -     - search_depth: 2
2025-10-29 13:53:05,167 - INFO     -     - solution_cost: 0
2025-10-29 13:53:05,167 - INFO     -     - branching_factor: 3.7000
2025-10-29 13:53:05,167 - INFO     -     - solution_found: True
2025-10-29 13:53:05,167 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:05,167 - INFO     - 
  Computing reward:
2025-10-29 13:53:05,167 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:05,167 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:05,167 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:05,167 - INFO     -   [1] BRANCHING FACTOR: 3.700 → score 0.607 (tolerable)
2025-10-29 13:53:05,167 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:05,168 - INFO     -   [3] F-VALUE STABILITY: 0.251
2025-10-29 13:53:05,168 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:05,168 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:05,168 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:53:05,168 - INFO     -     = 0.300*0.607 (bf)
2025-10-29 13:53:05,168 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:05,168 - INFO     -     + 0.350*0.251 (stability)
2025-10-29 13:53:05,168 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:05,168 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:05,168 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:05,168 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:05,168 - INFO     - 
  [FINAL REWARD]: 0.3236
2025-10-29 13:53:05,168 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:05,168 - INFO     -     ✓ Reward computed: 0.3236
2025-10-29 13:53:05,169 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:05,169 - INFO     -     - bf_score                       0.6067
2025-10-29 13:53:05,169 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:05,169 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:05,169 - INFO     -     - f_stability                    0.2507
2025-10-29 13:53:05,169 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:05,169 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:05,169 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:05,169 - INFO     -     - composite                      0.5618
2025-10-29 13:53:05,169 - INFO     -     - total                          0.3236
2025-10-29 13:53:05,169 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:05,169 - INFO     -   Num remaining nodes: 5
2025-10-29 13:53:05,169 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:53:05,169 - INFO     -   Done: False
2025-10-29 13:53:05,169 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:05,170 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:05,170 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:05,170 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:05,170 - INFO     -     - num_nodes: 5
2025-10-29 13:53:05,170 - INFO     -     - num_edges: 18
2025-10-29 13:53:05,170 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:05,170 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:53:05,171 - INFO     -   After: current_merge_step = 4
2025-10-29 13:53:05,171 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:05,171 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:05,171 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:05,171 - INFO     -   ✓ Step logged
2025-10-29 13:53:05,172 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:05,172 - INFO     -   Returning:
2025-10-29 13:53:05,172 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:05,172 - INFO     -     - reward: 0.3236
2025-10-29 13:53:05,172 - INFO     -     - done: False
2025-10-29 13:53:05,172 - INFO     -     - truncated: False
2025-10-29 13:53:05,172 - INFO     -     - info: 19 keys
2025-10-29 13:53:05,172 - INFO     - ==========================================================================================

2025-10-29 13:53:05,176 - INFO     - 
==========================================================================================
2025-10-29 13:53:05,176 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:05,176 - INFO     - ==========================================================================================
2025-10-29 13:53:05,176 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:05,176 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:53:05,176 - INFO     -   Available edges in graph: 18
2025-10-29 13:53:05,177 - INFO     -   Action index calculation:
2025-10-29 13:53:05,177 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 18 = 1
2025-10-29 13:53:05,177 - INFO     -     - clamped to [0, 17]: 1
2025-10-29 13:53:05,177 - INFO     -   ✓ Extracted merge pair from edge 1: (5, 11)
2025-10-29 13:53:05,177 - INFO     -   ✓ Validation passed
2025-10-29 13:53:05,177 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:05,177 - INFO     -     - Total states before merge: 38
2025-10-29 13:53:05,177 - INFO     -     - Num nodes: 5
2025-10-29 13:53:05,177 - INFO     -     - Num edges: 18
2025-10-29 13:53:05,177 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:05,177 - INFO     -       - Node 5: 5 states
2025-10-29 13:53:05,177 - INFO     -       - Node 11: 10 states
2025-10-29 13:53:05,177 - INFO     -       - Expected product: 50 states
2025-10-29 13:53:05,177 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:05,184 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:53:05,185 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:05,185 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:53:05,285 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:05,285 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:05,285 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:53:05,287 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:05,287 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:05,287 - INFO     -   Calling graph_tracker.merge_nodes([5, 11])...
2025-10-29 13:53:05,287 - INFO     - Attempting merge of nodes 5 and 11...
2025-10-29 13:53:05,287 - INFO     - Successfully merged nodes into new node 13 with 50 states.
2025-10-29 13:53:05,287 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:05,287 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:05,288 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:53:05,288 - INFO     - 
================================================================================
2025-10-29 13:53:05,288 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:53:05,288 - INFO     - ================================================================================
2025-10-29 13:53:05,288 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:05,288 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:53:05,288 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:53:05,288 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:05,290 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:05,290 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:05,290 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:05,290 - INFO     -   - Raw f_after length: 50
2025-10-29 13:53:05,290 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:05,290 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:05,290 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:05,290 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:53:05,290 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:05,290 - INFO     -   - ts1_id: 5
2025-10-29 13:53:05,290 - INFO     -   - ts2_id: 11
2025-10-29 13:53:05,290 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:05,290 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:05,291 - INFO     -   - ts1_size: 5, ts2_size: 10
2025-10-29 13:53:05,291 - INFO     -   - Product space size: 50
2025-10-29 13:53:05,291 - INFO     -   - Using product state mapping
2025-10-29 13:53:05,291 - INFO     -   - f_before_product length: 50
2025-10-29 13:53:05,291 - INFO     -   - avg_f_before: 3.9200 (50 valid states)
2025-10-29 13:53:05,291 - INFO     -   - avg_f_after:  6.4400 (50 valid states)
2025-10-29 13:53:05,291 - INFO     -   - delta: 2.5200
2025-10-29 13:53:05,291 - INFO     -   - f_stability: 1.0 - |2.5200| / 3.9200 = 0.3571
2025-10-29 13:53:05,292 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:05,292 - INFO     -   - Compared 15 values
2025-10-29 13:53:05,292 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:05,292 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:05,292 - INFO     -   - states_before: 50
2025-10-29 13:53:05,292 - INFO     -   - states_after: 50
2025-10-29 13:53:05,292 - INFO     -   - delta_states: 0
2025-10-29 13:53:05,292 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:05,292 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:05,292 - INFO     -   - ts2_transitions: 27
2025-10-29 13:53:05,292 - INFO     -   - merged_transitions: 195
2025-10-29 13:53:05,293 - INFO     -   - transition_density_change: 3.1000
2025-10-29 13:53:05,293 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:05,293 - INFO     -   - search_signals present: True
2025-10-29 13:53:05,293 - INFO     -   - nodes_expanded: 50
2025-10-29 13:53:05,293 - INFO     -   - search_depth: 3
2025-10-29 13:53:05,293 - INFO     -   - solution_cost: 4
2025-10-29 13:53:05,293 - INFO     -   - branching_factor: 3.9000
2025-10-29 13:53:05,293 - INFO     -   - solution_found: True
2025-10-29 13:53:05,293 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:05,293 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:05,293 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:53:05,294 - INFO     -   - TS5(5) + TS11(10) → 50 states
2025-10-29 13:53:05,294 - INFO     -   - f_stability=0.357
2025-10-29 13:53:05,294 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:53:05,294 - INFO     -   - solution_found=True
2025-10-29 13:53:05,294 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:05,294 - INFO     - 
  Extracted signals:
2025-10-29 13:53:05,294 - INFO     -     - iteration: 4
2025-10-29 13:53:05,294 - INFO     -     - states_before: 50
2025-10-29 13:53:05,294 - INFO     -     - states_after: 50
2025-10-29 13:53:05,294 - INFO     -     - delta_states: 0
2025-10-29 13:53:05,294 - INFO     -     - f_value_stability: 0.3571
2025-10-29 13:53:05,294 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:05,294 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:05,294 - INFO     -     - nodes_expanded: 50
2025-10-29 13:53:05,294 - INFO     -     - search_depth: 3
2025-10-29 13:53:05,295 - INFO     -     - solution_cost: 4
2025-10-29 13:53:05,295 - INFO     -     - branching_factor: 3.9000
2025-10-29 13:53:05,295 - INFO     -     - solution_found: True
2025-10-29 13:53:05,295 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:05,295 - INFO     - 
  Computing reward:
2025-10-29 13:53:05,295 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:05,295 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:05,295 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:05,295 - INFO     -   [1] BRANCHING FACTOR: 3.900 → score 0.580 (tolerable)
2025-10-29 13:53:05,295 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:05,296 - INFO     -   [3] F-VALUE STABILITY: 0.222
2025-10-29 13:53:05,296 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:05,296 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:05,296 - INFO     - 
  [COMPOSITE]: 0.537
2025-10-29 13:53:05,296 - INFO     -     = 0.300*0.580 (bf)
2025-10-29 13:53:05,296 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:05,296 - INFO     -     + 0.350*0.222 (stability)
2025-10-29 13:53:05,296 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:05,296 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:05,296 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:05,296 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:05,296 - INFO     - 
  [FINAL REWARD]: 0.2732
2025-10-29 13:53:05,297 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:05,297 - INFO     -     ✓ Reward computed: 0.2732
2025-10-29 13:53:05,297 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:05,297 - INFO     -     - bf_score                       0.5800
2025-10-29 13:53:05,297 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:05,297 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:05,297 - INFO     -     - f_stability                    0.2224
2025-10-29 13:53:05,297 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:05,297 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:05,297 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:05,298 - INFO     -     - composite                      0.5366
2025-10-29 13:53:05,298 - INFO     -     - total                          0.2732
2025-10-29 13:53:05,298 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:05,298 - INFO     -   Num remaining nodes: 4
2025-10-29 13:53:05,298 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:53:05,298 - INFO     -   Done: False
2025-10-29 13:53:05,298 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:05,298 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:05,298 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:05,298 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:05,298 - INFO     -     - num_nodes: 4
2025-10-29 13:53:05,299 - INFO     -     - num_edges: 12
2025-10-29 13:53:05,299 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:05,299 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:53:05,299 - INFO     -   After: current_merge_step = 5
2025-10-29 13:53:05,299 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:05,299 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:05,299 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:05,299 - INFO     -   ✓ Step logged
2025-10-29 13:53:05,300 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:05,300 - INFO     -   Returning:
2025-10-29 13:53:05,300 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:05,300 - INFO     -     - reward: 0.2732
2025-10-29 13:53:05,300 - INFO     -     - done: False
2025-10-29 13:53:05,300 - INFO     -     - truncated: False
2025-10-29 13:53:05,300 - INFO     -     - info: 19 keys
2025-10-29 13:53:05,300 - INFO     - ==========================================================================================

2025-10-29 13:53:05,305 - INFO     - 
==========================================================================================
2025-10-29 13:53:05,305 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:05,305 - INFO     - ==========================================================================================
2025-10-29 13:53:05,305 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:05,305 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:53:05,305 - INFO     -   Available edges in graph: 12
2025-10-29 13:53:05,305 - INFO     -   Action index calculation:
2025-10-29 13:53:05,305 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 12 = 0
2025-10-29 13:53:05,305 - INFO     -     - clamped to [0, 11]: 0
2025-10-29 13:53:05,305 - INFO     -   ✓ Extracted merge pair from edge 0: (6, 10)
2025-10-29 13:53:05,305 - INFO     -   ✓ Validation passed
2025-10-29 13:53:05,305 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:05,306 - INFO     -     - Total states before merge: 73
2025-10-29 13:53:05,306 - INFO     -     - Num nodes: 4
2025-10-29 13:53:05,306 - INFO     -     - Num edges: 12
2025-10-29 13:53:05,306 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:05,306 - INFO     -       - Node 6: 5 states
2025-10-29 13:53:05,306 - INFO     -       - Node 10: 8 states
2025-10-29 13:53:05,306 - INFO     -       - Expected product: 40 states
2025-10-29 13:53:05,306 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:05,312 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:53:05,312 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:05,312 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:53:05,413 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:05,413 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:05,414 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:53:05,414 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:05,414 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:05,414 - INFO     -   Calling graph_tracker.merge_nodes([6, 10])...
2025-10-29 13:53:05,415 - INFO     - Attempting merge of nodes 6 and 10...
2025-10-29 13:53:05,415 - INFO     - Successfully merged nodes into new node 14 with 40 states.
2025-10-29 13:53:05,415 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:05,415 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:05,415 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:53:05,415 - INFO     - 
================================================================================
2025-10-29 13:53:05,415 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:53:05,415 - INFO     - ================================================================================
2025-10-29 13:53:05,415 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:05,415 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:53:05,415 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:53:05,416 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:05,416 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:05,416 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:05,416 - INFO     -   - Raw ts2_f length: 8
2025-10-29 13:53:05,416 - INFO     -   - Raw f_after length: 40
2025-10-29 13:53:05,416 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:05,416 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:05,416 - INFO     -   - ts2_valid: 8 / 8 (removed -8)
2025-10-29 13:53:05,416 - INFO     -   - after_valid: 40 / 40 (removed 0)
2025-10-29 13:53:05,416 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:05,416 - INFO     -   - ts1_id: 6
2025-10-29 13:53:05,417 - INFO     -   - ts2_id: 10
2025-10-29 13:53:05,417 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:05,417 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:05,417 - INFO     -   - ts1_size: 5, ts2_size: 8
2025-10-29 13:53:05,417 - INFO     -   - Product space size: 40
2025-10-29 13:53:05,417 - INFO     -   - Using product state mapping
2025-10-29 13:53:05,417 - INFO     -   - f_before_product length: 40
2025-10-29 13:53:05,417 - INFO     -   - avg_f_before: 3.1250 (40 valid states)
2025-10-29 13:53:05,417 - INFO     -   - avg_f_after:  4.3750 (40 valid states)
2025-10-29 13:53:05,417 - INFO     -   - delta: 1.2500
2025-10-29 13:53:05,417 - INFO     -   - f_stability: 1.0 - |1.2500| / 3.1250 = 0.6000
2025-10-29 13:53:05,418 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:05,418 - INFO     -   - Compared 13 values
2025-10-29 13:53:05,418 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:05,418 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:05,418 - INFO     -   - states_before: 40
2025-10-29 13:53:05,418 - INFO     -   - states_after: 40
2025-10-29 13:53:05,418 - INFO     -   - delta_states: 0
2025-10-29 13:53:05,418 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:05,418 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:05,418 - INFO     -   - ts2_transitions: 68
2025-10-29 13:53:05,418 - INFO     -   - merged_transitions: 380
2025-10-29 13:53:05,418 - INFO     -   - transition_density_change: 7.4750
2025-10-29 13:53:05,418 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:05,418 - INFO     -   - search_signals present: True
2025-10-29 13:53:05,418 - INFO     -   - nodes_expanded: 40
2025-10-29 13:53:05,418 - INFO     -   - search_depth: 2
2025-10-29 13:53:05,419 - INFO     -   - solution_cost: 0
2025-10-29 13:53:05,419 - INFO     -   - branching_factor: 9.5000
2025-10-29 13:53:05,419 - INFO     -   - solution_found: True
2025-10-29 13:53:05,419 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:05,419 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:05,419 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:53:05,419 - INFO     -   - TS6(5) + TS10(8) → 40 states
2025-10-29 13:53:05,419 - INFO     -   - f_stability=0.600
2025-10-29 13:53:05,419 - INFO     -   - A* nodes_expanded=40
2025-10-29 13:53:05,419 - INFO     -   - solution_found=True
2025-10-29 13:53:05,419 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:05,419 - INFO     - 
  Extracted signals:
2025-10-29 13:53:05,419 - INFO     -     - iteration: 5
2025-10-29 13:53:05,420 - INFO     -     - states_before: 40
2025-10-29 13:53:05,420 - INFO     -     - states_after: 40
2025-10-29 13:53:05,420 - INFO     -     - delta_states: 0
2025-10-29 13:53:05,420 - INFO     -     - f_value_stability: 0.6000
2025-10-29 13:53:05,420 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:05,420 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:05,420 - INFO     -     - nodes_expanded: 40
2025-10-29 13:53:05,420 - INFO     -     - search_depth: 2
2025-10-29 13:53:05,420 - INFO     -     - solution_cost: 0
2025-10-29 13:53:05,420 - INFO     -     - branching_factor: 9.5000
2025-10-29 13:53:05,420 - INFO     -     - solution_found: True
2025-10-29 13:53:05,420 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:05,420 - WARNING  -     ⚠️  High branching factor: 9.5000
2025-10-29 13:53:05,420 - INFO     - 
  Computing reward:
2025-10-29 13:53:05,420 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:05,420 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:05,420 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:05,421 - INFO     -   [1] BRANCHING FACTOR: 9.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:53:05,421 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:05,421 - INFO     -   [3] F-VALUE STABILITY: 0.157
2025-10-29 13:53:05,421 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:05,421 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:05,421 - INFO     - 
  [COMPOSITE]: 0.377
2025-10-29 13:53:05,421 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:53:05,421 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:05,421 - INFO     -     + 0.350*0.157 (stability)
2025-10-29 13:53:05,421 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:05,421 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:05,421 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:05,422 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:05,422 - INFO     - 
  [FINAL REWARD]: -0.0463
2025-10-29 13:53:05,422 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:05,422 - INFO     -     ✓ Reward computed: -0.0463
2025-10-29 13:53:05,422 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:05,422 - INFO     -     - bf_score                       0.1000
2025-10-29 13:53:05,422 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:05,422 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:05,422 - INFO     -     - f_stability                    0.1565
2025-10-29 13:53:05,422 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:05,422 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:05,422 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:05,422 - INFO     -     - composite                      0.3768
2025-10-29 13:53:05,422 - INFO     -     - total                          -0.0463
2025-10-29 13:53:05,423 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:05,423 - INFO     -   Num remaining nodes: 3
2025-10-29 13:53:05,423 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:53:05,423 - INFO     -   Done: False
2025-10-29 13:53:05,423 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:05,423 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:05,423 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:05,423 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:05,424 - INFO     -     - num_nodes: 3
2025-10-29 13:53:05,424 - INFO     -     - num_edges: 6
2025-10-29 13:53:05,424 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:05,424 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:53:05,424 - INFO     -   After: current_merge_step = 6
2025-10-29 13:53:05,424 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:05,424 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:05,424 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:05,424 - INFO     -   ✓ Step logged
2025-10-29 13:53:05,425 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:05,425 - INFO     -   Returning:
2025-10-29 13:53:05,425 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:05,425 - INFO     -     - reward: -0.0463
2025-10-29 13:53:05,425 - INFO     -     - done: False
2025-10-29 13:53:05,425 - INFO     -     - truncated: False
2025-10-29 13:53:05,425 - INFO     -     - info: 19 keys
2025-10-29 13:53:05,425 - INFO     - ==========================================================================================

2025-10-29 13:53:05,429 - INFO     - 
==========================================================================================
2025-10-29 13:53:05,429 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:05,429 - INFO     - ==========================================================================================
2025-10-29 13:53:05,429 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:05,429 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:53:05,429 - INFO     -   Available edges in graph: 6
2025-10-29 13:53:05,429 - INFO     -   Action index calculation:
2025-10-29 13:53:05,429 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 6 = 1
2025-10-29 13:53:05,429 - INFO     -     - clamped to [0, 5]: 1
2025-10-29 13:53:05,429 - INFO     -   ✓ Extracted merge pair from edge 1: (12, 14)
2025-10-29 13:53:05,429 - INFO     -   ✓ Validation passed
2025-10-29 13:53:05,429 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:05,429 - INFO     -     - Total states before merge: 100
2025-10-29 13:53:05,429 - INFO     -     - Num nodes: 3
2025-10-29 13:53:05,429 - INFO     -     - Num edges: 6
2025-10-29 13:53:05,429 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:05,429 - INFO     -       - Node 12: 10 states
2025-10-29 13:53:05,429 - INFO     -       - Node 14: 40 states
2025-10-29 13:53:05,429 - INFO     -       - Expected product: 400 states
2025-10-29 13:53:05,430 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:05,435 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:53:05,435 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:05,435 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:53:05,536 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:05,536 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:05,536 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:53:05,540 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:05,540 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:05,541 - INFO     -   Calling graph_tracker.merge_nodes([12, 14])...
2025-10-29 13:53:05,541 - INFO     - Attempting merge of nodes 12 and 14...
2025-10-29 13:53:05,541 - INFO     - Successfully merged nodes into new node 15 with 400 states.
2025-10-29 13:53:05,541 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:05,541 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:05,541 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:53:05,541 - INFO     - 
================================================================================
2025-10-29 13:53:05,541 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:53:05,541 - INFO     - ================================================================================
2025-10-29 13:53:05,541 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:05,541 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:53:05,541 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:53:05,542 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:05,543 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:05,543 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:53:05,543 - INFO     -   - Raw ts2_f length: 40
2025-10-29 13:53:05,543 - INFO     -   - Raw f_after length: 400
2025-10-29 13:53:05,543 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:05,543 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:53:05,543 - INFO     -   - ts2_valid: 40 / 40 (removed -40)
2025-10-29 13:53:05,544 - INFO     -   - after_valid: 400 / 400 (removed 0)
2025-10-29 13:53:05,544 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:05,544 - INFO     -   - ts1_id: 12
2025-10-29 13:53:05,544 - INFO     -   - ts2_id: 14
2025-10-29 13:53:05,544 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:05,544 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:05,544 - INFO     -   - ts1_size: 10, ts2_size: 40
2025-10-29 13:53:05,544 - INFO     -   - Product space size: 400
2025-10-29 13:53:05,544 - INFO     -   - Using product state mapping
2025-10-29 13:53:05,546 - INFO     -   - f_before_product length: 400
2025-10-29 13:53:05,547 - INFO     -   - avg_f_before: 5.1725 (400 valid states)
2025-10-29 13:53:05,547 - INFO     -   - avg_f_after:  7.9100 (400 valid states)
2025-10-29 13:53:05,547 - INFO     -   - delta: 2.7375
2025-10-29 13:53:05,547 - INFO     -   - f_stability: 1.0 - |2.7375| / 5.1725 = 0.4708
2025-10-29 13:53:05,547 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:05,547 - INFO     -   - Compared 50 values
2025-10-29 13:53:05,547 - INFO     -   - Significant changes (> 5.0): 11
2025-10-29 13:53:05,547 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:05,547 - INFO     -   - states_before: 400
2025-10-29 13:53:05,547 - INFO     -   - states_after: 400
2025-10-29 13:53:05,548 - INFO     -   - delta_states: 0
2025-10-29 13:53:05,548 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:05,548 - INFO     -   - ts1_transitions: 37
2025-10-29 13:53:05,548 - INFO     -   - ts2_transitions: 380
2025-10-29 13:53:05,548 - INFO     -   - merged_transitions: 3920
2025-10-29 13:53:05,549 - INFO     -   - transition_density_change: 8.7575
2025-10-29 13:53:05,549 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:05,549 - INFO     -   - search_signals present: True
2025-10-29 13:53:05,549 - INFO     -   - nodes_expanded: 400
2025-10-29 13:53:05,549 - INFO     -   - search_depth: 3
2025-10-29 13:53:05,549 - INFO     -   - solution_cost: 0
2025-10-29 13:53:05,549 - INFO     -   - branching_factor: 9.8000
2025-10-29 13:53:05,549 - INFO     -   - solution_found: True
2025-10-29 13:53:05,549 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:05,550 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:05,550 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:53:05,550 - INFO     -   - TS12(10) + TS14(40) → 400 states
2025-10-29 13:53:05,550 - INFO     -   - f_stability=0.471
2025-10-29 13:53:05,551 - INFO     -   - A* nodes_expanded=400
2025-10-29 13:53:05,551 - INFO     -   - solution_found=True
2025-10-29 13:53:05,551 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:05,551 - INFO     - 
  Extracted signals:
2025-10-29 13:53:05,551 - INFO     -     - iteration: 6
2025-10-29 13:53:05,551 - INFO     -     - states_before: 400
2025-10-29 13:53:05,551 - INFO     -     - states_after: 400
2025-10-29 13:53:05,551 - INFO     -     - delta_states: 0
2025-10-29 13:53:05,551 - INFO     -     - f_value_stability: 0.4708
2025-10-29 13:53:05,552 - INFO     -     - num_significant_f_changes: 11
2025-10-29 13:53:05,552 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:05,552 - INFO     -     - nodes_expanded: 400
2025-10-29 13:53:05,552 - INFO     -     - search_depth: 3
2025-10-29 13:53:05,552 - INFO     -     - solution_cost: 0
2025-10-29 13:53:05,552 - INFO     -     - branching_factor: 9.8000
2025-10-29 13:53:05,552 - INFO     -     - solution_found: True
2025-10-29 13:53:05,552 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:05,553 - WARNING  -     ⚠️  High branching factor: 9.8000
2025-10-29 13:53:05,553 - INFO     - 
  Computing reward:
2025-10-29 13:53:05,553 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:05,553 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:05,553 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:05,553 - INFO     -   [1] BRANCHING FACTOR: 9.800 → score 0.100 (high BF, minimal credit)
2025-10-29 13:53:05,553 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:05,554 - INFO     -   [3] F-VALUE STABILITY: 0.192
2025-10-29 13:53:05,554 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:05,554 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:05,554 - INFO     - 
  [COMPOSITE]: 0.382
2025-10-29 13:53:05,554 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:53:05,554 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:05,555 - INFO     -     + 0.350*0.192 (stability)
2025-10-29 13:53:05,555 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:05,555 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:05,555 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:05,555 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:05,555 - INFO     - 
  [FINAL REWARD]: -0.0359
2025-10-29 13:53:05,555 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:05,555 - INFO     -     ✓ Reward computed: -0.0359
2025-10-29 13:53:05,555 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:05,556 - INFO     -     - bf_score                       0.1000
2025-10-29 13:53:05,556 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:05,556 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:05,556 - INFO     -     - f_stability                    0.1923
2025-10-29 13:53:05,556 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:05,556 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:05,556 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:05,556 - INFO     -     - composite                      0.3820
2025-10-29 13:53:05,556 - INFO     -     - total                          -0.0359
2025-10-29 13:53:05,557 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:05,557 - INFO     -   Num remaining nodes: 2
2025-10-29 13:53:05,557 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:53:05,557 - INFO     -   Done: False
2025-10-29 13:53:05,557 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:05,558 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:05,558 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:05,558 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:05,558 - INFO     -     - num_nodes: 2
2025-10-29 13:53:05,558 - INFO     -     - num_edges: 2
2025-10-29 13:53:05,558 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:05,558 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:53:05,558 - INFO     -   After: current_merge_step = 7
2025-10-29 13:53:05,558 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:05,559 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:05,559 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:05,559 - INFO     -   ✓ Step logged
2025-10-29 13:53:05,559 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:05,559 - INFO     -   Returning:
2025-10-29 13:53:05,559 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:05,559 - INFO     -     - reward: -0.0359
2025-10-29 13:53:05,559 - INFO     -     - done: False
2025-10-29 13:53:05,561 - INFO     -     - truncated: False
2025-10-29 13:53:05,561 - INFO     -     - info: 19 keys
2025-10-29 13:53:05,561 - INFO     - ==========================================================================================

2025-10-29 13:53:05,566 - INFO     - 
==========================================================================================
2025-10-29 13:53:05,566 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:05,566 - INFO     - ==========================================================================================
2025-10-29 13:53:05,566 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:05,566 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:53:05,566 - INFO     -   Available edges in graph: 2
2025-10-29 13:53:05,566 - INFO     -   Action index calculation:
2025-10-29 13:53:05,566 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:53:05,567 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:53:05,567 - INFO     -   ✓ Extracted merge pair from edge 0: (13, 15)
2025-10-29 13:53:05,567 - INFO     -   ✓ Validation passed
2025-10-29 13:53:05,567 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:05,567 - INFO     -     - Total states before merge: 450
2025-10-29 13:53:05,567 - INFO     -     - Num nodes: 2
2025-10-29 13:53:05,567 - INFO     -     - Num edges: 2
2025-10-29 13:53:05,567 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:05,567 - INFO     -       - Node 13: 50 states
2025-10-29 13:53:05,567 - INFO     -       - Node 15: 400 states
2025-10-29 13:53:05,567 - INFO     -       - Expected product: 20000 states
2025-10-29 13:53:05,568 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:05,577 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:53:05,577 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:05,577 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:53:05,679 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:05,679 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:05,679 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:53:05,699 - INFO     -   ✓ TS file received after 0.02s
2025-10-29 13:53:05,699 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:05,700 - INFO     -   Calling graph_tracker.merge_nodes([13, 15])...
2025-10-29 13:53:05,700 - INFO     - Attempting merge of nodes 13 and 15...
2025-10-29 13:53:05,700 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:53:05,700 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:05,700 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:05,700 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:53:05,700 - INFO     - 
================================================================================
2025-10-29 13:53:05,700 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:53:05,700 - INFO     - ================================================================================
2025-10-29 13:53:05,700 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:05,700 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:53:05,700 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:53:05,705 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:05,705 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:05,705 - INFO     -   - Raw ts1_f length: 50
2025-10-29 13:53:05,705 - INFO     -   - Raw ts2_f length: 77
2025-10-29 13:53:05,705 - INFO     -   - Raw f_after length: 3850
2025-10-29 13:53:05,705 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:05,705 - INFO     -   - ts1_valid: 50 / 50 (removed 0)
2025-10-29 13:53:05,706 - INFO     -   - ts2_valid: 77 / 77 (removed -77)
2025-10-29 13:53:05,707 - INFO     -   - after_valid: 2225 / 3850 (removed 1625)
2025-10-29 13:53:05,707 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:05,707 - INFO     -   - ts1_id: 13
2025-10-29 13:53:05,708 - INFO     -   - ts2_id: 15
2025-10-29 13:53:05,708 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:05,708 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:05,708 - INFO     -   - ts1_size: 50, ts2_size: 77
2025-10-29 13:53:05,708 - INFO     -   - Product space size: 3850
2025-10-29 13:53:05,708 - INFO     -   - Using product state mapping
2025-10-29 13:53:05,715 - INFO     -   - f_before_product length: 3850
2025-10-29 13:53:05,722 - INFO     -   - avg_f_before: 6.8151 (3850 valid states)
2025-10-29 13:53:05,723 - INFO     -   - avg_f_after:  13.1479 (2225 valid states)
2025-10-29 13:53:05,723 - INFO     -   - delta: 6.3328
2025-10-29 13:53:05,723 - INFO     -   - f_stability: 1.0 - |6.3328| / 6.8151 = 0.0708
2025-10-29 13:53:05,723 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:05,723 - INFO     -   - Compared 127 values
2025-10-29 13:53:05,723 - INFO     -   - Significant changes (> 5.0): 111
2025-10-29 13:53:05,723 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:05,723 - INFO     -   - states_before: 3850
2025-10-29 13:53:05,723 - INFO     -   - states_after: 3850
2025-10-29 13:53:05,723 - INFO     -   - delta_states: 0
2025-10-29 13:53:05,723 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:05,723 - INFO     -   - ts1_transitions: 195
2025-10-29 13:53:05,723 - INFO     -   - ts2_transitions: 960
2025-10-29 13:53:05,723 - INFO     -   - merged_transitions: 15195
2025-10-29 13:53:05,724 - INFO     -   - transition_density_change: 3.6468
2025-10-29 13:53:05,724 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:05,724 - INFO     -   - search_signals present: True
2025-10-29 13:53:05,724 - INFO     -   - nodes_expanded: 2225
2025-10-29 13:53:05,724 - INFO     -   - search_depth: 6
2025-10-29 13:53:05,724 - INFO     -   - solution_cost: 4
2025-10-29 13:53:05,724 - INFO     -   - branching_factor: 6.8292
2025-10-29 13:53:05,724 - INFO     -   - solution_found: True
2025-10-29 13:53:05,724 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:05,725 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:05,725 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:53:05,725 - INFO     -   - TS13(50) + TS15(77) → 3850 states
2025-10-29 13:53:05,725 - INFO     -   - f_stability=0.071
2025-10-29 13:53:05,726 - INFO     -   - A* nodes_expanded=2225
2025-10-29 13:53:05,726 - INFO     -   - solution_found=True
2025-10-29 13:53:05,726 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:05,726 - INFO     - 
  Extracted signals:
2025-10-29 13:53:05,726 - INFO     -     - iteration: 7
2025-10-29 13:53:05,726 - INFO     -     - states_before: 3850
2025-10-29 13:53:05,726 - INFO     -     - states_after: 3850
2025-10-29 13:53:05,726 - INFO     -     - delta_states: 0
2025-10-29 13:53:05,726 - INFO     -     - f_value_stability: 0.0708
2025-10-29 13:53:05,726 - INFO     -     - num_significant_f_changes: 111
2025-10-29 13:53:05,726 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:05,726 - INFO     -     - nodes_expanded: 2225
2025-10-29 13:53:05,726 - INFO     -     - search_depth: 6
2025-10-29 13:53:05,726 - INFO     -     - solution_cost: 4
2025-10-29 13:53:05,727 - INFO     -     - branching_factor: 6.8292
2025-10-29 13:53:05,727 - INFO     -     - solution_found: True
2025-10-29 13:53:05,727 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:05,727 - WARNING  -     ⚠️  Poor F-stability: 0.0708
2025-10-29 13:53:05,727 - INFO     - 
  Computing reward:
2025-10-29 13:53:05,727 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:05,727 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:05,727 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:05,727 - INFO     -   [1] BRANCHING FACTOR: 6.829 → score 0.217 (high BF, minimal credit)
2025-10-29 13:53:05,727 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:05,729 - INFO     -   [3] F-VALUE STABILITY: 0.181
2025-10-29 13:53:05,729 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:05,729 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:05,729 - INFO     - 
  [COMPOSITE]: 0.399
2025-10-29 13:53:05,729 - INFO     -     = 0.300*0.217 (bf)
2025-10-29 13:53:05,729 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:05,729 - INFO     -     + 0.350*0.181 (stability)
2025-10-29 13:53:05,729 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:05,730 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:05,730 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:05,730 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:05,730 - WARNING  -   ⚠️  BAD MERGE DETECTED: F-stability extremely poor: 0.071
2025-10-29 13:53:05,730 - INFO     -     + Bad merge penalty: -0.150
2025-10-29 13:53:05,730 - INFO     - 
  [FINAL REWARD]: -0.1518
2025-10-29 13:53:05,730 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:05,731 - INFO     -     ✓ Reward computed: -0.1518
2025-10-29 13:53:05,731 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:05,731 - INFO     -     - bf_score                       0.2171
2025-10-29 13:53:05,731 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:05,731 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:05,731 - INFO     -     - f_stability                    0.1813
2025-10-29 13:53:05,731 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:05,731 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:05,731 - INFO     -     - bad_merge_penalty              -0.1500
2025-10-29 13:53:05,731 - INFO     -     - composite                      0.3991
2025-10-29 13:53:05,731 - INFO     -     - total                          -0.1518
2025-10-29 13:53:05,731 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:05,731 - INFO     -   Num remaining nodes: 1
2025-10-29 13:53:05,731 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:53:05,731 - INFO     -   Done: True
2025-10-29 13:53:05,731 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:53:05,732 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:05,732 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:05,732 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:05,732 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:05,732 - INFO     -     - num_nodes: 1
2025-10-29 13:53:05,732 - INFO     -     - num_edges: 0
2025-10-29 13:53:05,732 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:05,732 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:53:05,732 - INFO     -   After: current_merge_step = 8
2025-10-29 13:53:05,732 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:05,732 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:05,732 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:05,733 - INFO     -   ✓ Step logged
2025-10-29 13:53:05,733 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:05,733 - INFO     -   Returning:
2025-10-29 13:53:05,733 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:05,733 - INFO     -     - reward: -0.1518
2025-10-29 13:53:05,733 - INFO     -     - done: True
2025-10-29 13:53:05,733 - INFO     -     - truncated: False
2025-10-29 13:53:05,733 - INFO     -     - info: 19 keys
2025-10-29 13:53:05,733 - INFO     - ==========================================================================================

2025-10-29 13:53:05,806 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:53:05,813 - INFO     - [Handshake] Building FD command:
2025-10-29 13:53:05,813 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:05,813 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_02.pddl
2025-10-29 13:53:05,813 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:53:05,816 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:06,418 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:06,418 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:06,418 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:06,732 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:06,732 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:06,732 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:06,734 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:06,734 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:06,734 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:06,734 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:06,734 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:06,734 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:06,734 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:06,734 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:06,734 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:06,734 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:06,734 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:06,734 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:06,734 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:06,734 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:06,734 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:06,734 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:06,734 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:06,735 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:06,735 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:06,735 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:06,735 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:06,735 - INFO     - Added edge (0, 1)
2025-10-29 13:53:06,735 - INFO     - Added edge (0, 2)
2025-10-29 13:53:06,736 - INFO     - Added edge (0, 3)
2025-10-29 13:53:06,736 - INFO     - Added edge (0, 4)
2025-10-29 13:53:06,736 - INFO     - Added edge (0, 5)
2025-10-29 13:53:06,736 - INFO     - Added edge (0, 6)
2025-10-29 13:53:06,736 - INFO     - Added edge (0, 7)
2025-10-29 13:53:06,736 - INFO     - Added edge (0, 8)
2025-10-29 13:53:06,736 - INFO     - Added edge (1, 0)
2025-10-29 13:53:06,736 - INFO     - Added edge (1, 2)
2025-10-29 13:53:06,736 - INFO     - Added edge (1, 3)
2025-10-29 13:53:06,736 - INFO     - Added edge (1, 4)
2025-10-29 13:53:06,736 - INFO     - Added edge (1, 5)
2025-10-29 13:53:06,736 - INFO     - Added edge (1, 6)
2025-10-29 13:53:06,736 - INFO     - Added edge (1, 7)
2025-10-29 13:53:06,736 - INFO     - Added edge (1, 8)
2025-10-29 13:53:06,737 - INFO     - Added edge (2, 0)
2025-10-29 13:53:06,737 - INFO     - Added edge (2, 1)
2025-10-29 13:53:06,737 - INFO     - Added edge (2, 3)
2025-10-29 13:53:06,737 - INFO     - Added edge (2, 4)
2025-10-29 13:53:06,737 - INFO     - Added edge (2, 5)
2025-10-29 13:53:06,737 - INFO     - Added edge (2, 6)
2025-10-29 13:53:06,737 - INFO     - Added edge (2, 7)
2025-10-29 13:53:06,737 - INFO     - Added edge (2, 8)
2025-10-29 13:53:06,737 - INFO     - Added edge (3, 0)
2025-10-29 13:53:06,737 - INFO     - Added edge (3, 1)
2025-10-29 13:53:06,737 - INFO     - Added edge (3, 2)
2025-10-29 13:53:06,738 - INFO     - Added edge (3, 4)
2025-10-29 13:53:06,738 - INFO     - Added edge (3, 5)
2025-10-29 13:53:06,738 - INFO     - Added edge (3, 6)
2025-10-29 13:53:06,738 - INFO     - Added edge (3, 7)
2025-10-29 13:53:06,738 - INFO     - Added edge (3, 8)
2025-10-29 13:53:06,738 - INFO     - Added edge (4, 0)
2025-10-29 13:53:06,738 - INFO     - Added edge (4, 1)
2025-10-29 13:53:06,738 - INFO     - Added edge (4, 2)
2025-10-29 13:53:06,738 - INFO     - Added edge (4, 3)
2025-10-29 13:53:06,738 - INFO     - Added edge (4, 5)
2025-10-29 13:53:06,738 - INFO     - Added edge (4, 6)
2025-10-29 13:53:06,738 - INFO     - Added edge (4, 7)
2025-10-29 13:53:06,738 - INFO     - Added edge (4, 8)
2025-10-29 13:53:06,738 - INFO     - Added edge (5, 0)
2025-10-29 13:53:06,738 - INFO     - Added edge (5, 1)
2025-10-29 13:53:06,738 - INFO     - Added edge (5, 2)
2025-10-29 13:53:06,738 - INFO     - Added edge (5, 3)
2025-10-29 13:53:06,738 - INFO     - Added edge (5, 4)
2025-10-29 13:53:06,738 - INFO     - Added edge (6, 0)
2025-10-29 13:53:06,738 - INFO     - Added edge (6, 1)
2025-10-29 13:53:06,739 - INFO     - Added edge (6, 2)
2025-10-29 13:53:06,739 - INFO     - Added edge (6, 3)
2025-10-29 13:53:06,739 - INFO     - Added edge (6, 4)
2025-10-29 13:53:06,739 - INFO     - Added edge (7, 0)
2025-10-29 13:53:06,739 - INFO     - Added edge (7, 1)
2025-10-29 13:53:06,739 - INFO     - Added edge (7, 2)
2025-10-29 13:53:06,739 - INFO     - Added edge (7, 3)
2025-10-29 13:53:06,739 - INFO     - Added edge (7, 4)
2025-10-29 13:53:06,739 - INFO     - Added edge (8, 0)
2025-10-29 13:53:06,739 - INFO     - Added edge (8, 1)
2025-10-29 13:53:06,739 - INFO     - Added edge (8, 2)
2025-10-29 13:53:06,739 - INFO     - Added edge (8, 3)
2025-10-29 13:53:06,739 - INFO     - Added edge (8, 4)
2025-10-29 13:53:06,739 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:06,745 - INFO     - 
==========================================================================================
2025-10-29 13:53:06,745 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:06,745 - INFO     - ==========================================================================================
2025-10-29 13:53:06,745 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:06,746 - INFO     -   Input action: 52 (type: int)
2025-10-29 13:53:06,746 - INFO     -   Available edges in graph: 60
2025-10-29 13:53:06,746 - INFO     -   Action index calculation:
2025-10-29 13:53:06,746 - INFO     -     - action % max(num_valid_edges, 1) = 52 % 60 = 52
2025-10-29 13:53:06,746 - INFO     -     - clamped to [0, 59]: 52
2025-10-29 13:53:06,746 - INFO     -   ✓ Extracted merge pair from edge 52: (7, 2)
2025-10-29 13:53:06,746 - INFO     -   ✓ Validation passed
2025-10-29 13:53:06,746 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:06,746 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:06,746 - INFO     -     - Num nodes: 9
2025-10-29 13:53:06,746 - INFO     -     - Num edges: 60
2025-10-29 13:53:06,746 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:06,746 - INFO     -       - Node 7: 5 states
2025-10-29 13:53:06,747 - INFO     -       - Node 2: 2 states
2025-10-29 13:53:06,747 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:06,747 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:06,776 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:53:06,776 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:06,776 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:53:06,878 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:06,878 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:06,878 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:53:06,879 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:06,879 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:06,879 - INFO     -   Calling graph_tracker.merge_nodes([7, 2])...
2025-10-29 13:53:06,879 - INFO     - Attempting merge of nodes 7 and 2...
2025-10-29 13:53:06,879 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:53:06,879 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:06,879 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:06,879 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:53:06,880 - INFO     - 
================================================================================
2025-10-29 13:53:06,880 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:53:06,880 - INFO     - ================================================================================
2025-10-29 13:53:06,880 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:06,880 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:53:06,880 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:53:06,880 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:06,881 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:06,881 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:06,881 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:06,881 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:06,881 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:06,881 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:06,881 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:06,881 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:06,881 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:06,881 - INFO     -   - ts1_id: 7
2025-10-29 13:53:06,881 - INFO     -   - ts2_id: 2
2025-10-29 13:53:06,881 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:06,881 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:06,881 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:06,881 - INFO     -   - Product space size: 10
2025-10-29 13:53:06,881 - INFO     -   - Using product state mapping
2025-10-29 13:53:06,882 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:06,882 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:06,882 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:53:06,882 - INFO     -   - delta: 0.8000
2025-10-29 13:53:06,882 - INFO     -   - f_stability: 1.0 - |0.8000| / 2.8000 = 0.7143
2025-10-29 13:53:06,882 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:06,882 - INFO     -   - Compared 7 values
2025-10-29 13:53:06,882 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:06,882 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:06,882 - INFO     -   - states_before: 10
2025-10-29 13:53:06,882 - INFO     -   - states_after: 10
2025-10-29 13:53:06,883 - INFO     -   - delta_states: 0
2025-10-29 13:53:06,883 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:06,883 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:06,883 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:06,883 - INFO     -   - merged_transitions: 37
2025-10-29 13:53:06,883 - INFO     -   - transition_density_change: 1.9000
2025-10-29 13:53:06,883 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:06,883 - INFO     -   - search_signals present: True
2025-10-29 13:53:06,883 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:06,883 - INFO     -   - search_depth: 2
2025-10-29 13:53:06,883 - INFO     -   - solution_cost: 2
2025-10-29 13:53:06,883 - INFO     -   - branching_factor: 3.7000
2025-10-29 13:53:06,883 - INFO     -   - solution_found: True
2025-10-29 13:53:06,883 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:06,884 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:06,884 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:53:06,884 - INFO     -   - TS7(5) + TS2(2) → 10 states
2025-10-29 13:53:06,884 - INFO     -   - f_stability=0.714
2025-10-29 13:53:06,884 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:06,884 - INFO     -   - solution_found=True
2025-10-29 13:53:06,884 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:06,884 - INFO     - 
  Extracted signals:
2025-10-29 13:53:06,884 - INFO     -     - iteration: 0
2025-10-29 13:53:06,884 - INFO     -     - states_before: 10
2025-10-29 13:53:06,884 - INFO     -     - states_after: 10
2025-10-29 13:53:06,884 - INFO     -     - delta_states: 0
2025-10-29 13:53:06,884 - INFO     -     - f_value_stability: 0.7143
2025-10-29 13:53:06,884 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:06,884 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:06,884 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:06,884 - INFO     -     - search_depth: 2
2025-10-29 13:53:06,885 - INFO     -     - solution_cost: 2
2025-10-29 13:53:06,885 - INFO     -     - branching_factor: 3.7000
2025-10-29 13:53:06,885 - INFO     -     - solution_found: True
2025-10-29 13:53:06,885 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:06,885 - INFO     - 
  Computing reward:
2025-10-29 13:53:06,885 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:06,885 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:06,885 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:06,885 - INFO     -   [1] BRANCHING FACTOR: 3.700 → score 0.607 (tolerable)
2025-10-29 13:53:06,885 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:06,885 - INFO     -   [3] F-VALUE STABILITY: 0.459
2025-10-29 13:53:06,885 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:06,885 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:06,885 - INFO     - 
  [COMPOSITE]: 0.635
2025-10-29 13:53:06,885 - INFO     -     = 0.300*0.607 (bf)
2025-10-29 13:53:06,886 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:06,886 - INFO     -     + 0.350*0.459 (stability)
2025-10-29 13:53:06,886 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:06,886 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:06,886 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:06,886 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:06,886 - INFO     - 
  [FINAL REWARD]: 0.5693
2025-10-29 13:53:06,886 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:06,886 - INFO     -     ✓ Reward computed: 0.5693
2025-10-29 13:53:06,886 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:06,886 - INFO     -     - bf_score                       0.6067
2025-10-29 13:53:06,886 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:06,886 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:06,886 - INFO     -     - f_stability                    0.4588
2025-10-29 13:53:06,886 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:06,886 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:06,886 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:06,886 - INFO     -     - composite                      0.6347
2025-10-29 13:53:06,887 - INFO     -     - total                          0.5693
2025-10-29 13:53:06,887 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:06,887 - INFO     -   Num remaining nodes: 8
2025-10-29 13:53:06,887 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:53:06,887 - INFO     -   Done: False
2025-10-29 13:53:06,887 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:06,888 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:06,888 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:06,888 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:06,888 - INFO     -     - num_nodes: 8
2025-10-29 13:53:06,888 - INFO     -     - num_edges: 50
2025-10-29 13:53:06,889 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:06,889 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:53:06,889 - INFO     -   After: current_merge_step = 1
2025-10-29 13:53:06,889 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:06,889 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:06,889 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:06,890 - INFO     -   ✓ Step logged
2025-10-29 13:53:06,890 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:06,890 - INFO     -   Returning:
2025-10-29 13:53:06,890 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:06,890 - INFO     -     - reward: 0.5693
2025-10-29 13:53:06,890 - INFO     -     - done: False
2025-10-29 13:53:06,890 - INFO     -     - truncated: False
2025-10-29 13:53:06,890 - INFO     -     - info: 19 keys
2025-10-29 13:53:06,890 - INFO     - ==========================================================================================

2025-10-29 13:53:06,894 - INFO     - 
==========================================================================================
2025-10-29 13:53:06,894 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:06,894 - INFO     - ==========================================================================================
2025-10-29 13:53:06,894 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:06,894 - INFO     -   Input action: 39 (type: int)
2025-10-29 13:53:06,894 - INFO     -   Available edges in graph: 50
2025-10-29 13:53:06,894 - INFO     -   Action index calculation:
2025-10-29 13:53:06,894 - INFO     -     - action % max(num_valid_edges, 1) = 39 % 50 = 39
2025-10-29 13:53:06,894 - INFO     -     - clamped to [0, 49]: 39
2025-10-29 13:53:06,895 - INFO     -   ✓ Extracted merge pair from edge 39: (8, 1)
2025-10-29 13:53:06,895 - INFO     -   ✓ Validation passed
2025-10-29 13:53:06,895 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:06,895 - INFO     -     - Total states before merge: 33
2025-10-29 13:53:06,895 - INFO     -     - Num nodes: 8
2025-10-29 13:53:06,895 - INFO     -     - Num edges: 50
2025-10-29 13:53:06,895 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:06,895 - INFO     -       - Node 8: 5 states
2025-10-29 13:53:06,895 - INFO     -       - Node 1: 2 states
2025-10-29 13:53:06,895 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:06,895 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:06,901 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:53:06,901 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:06,901 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:53:07,002 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:07,002 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:07,002 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:53:07,002 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:07,002 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:07,002 - INFO     -   Calling graph_tracker.merge_nodes([8, 1])...
2025-10-29 13:53:07,002 - INFO     - Attempting merge of nodes 8 and 1...
2025-10-29 13:53:07,002 - INFO     - Successfully merged nodes into new node 10 with 10 states.
2025-10-29 13:53:07,002 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:07,003 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:07,003 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:53:07,003 - INFO     - 
================================================================================
2025-10-29 13:53:07,003 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:53:07,003 - INFO     - ================================================================================
2025-10-29 13:53:07,003 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:07,003 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:53:07,003 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:53:07,003 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:07,003 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:07,004 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:07,004 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:07,004 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:07,004 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:07,004 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:07,004 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:07,004 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:07,004 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:07,004 - INFO     -   - ts1_id: 8
2025-10-29 13:53:07,004 - INFO     -   - ts2_id: 1
2025-10-29 13:53:07,004 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:07,004 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:07,004 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:07,004 - INFO     -   - Product space size: 10
2025-10-29 13:53:07,004 - INFO     -   - Using product state mapping
2025-10-29 13:53:07,004 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:07,005 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:53:07,005 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:53:07,005 - INFO     -   - delta: 0.4000
2025-10-29 13:53:07,005 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:53:07,005 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:07,005 - INFO     -   - Compared 7 values
2025-10-29 13:53:07,005 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:07,005 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:07,005 - INFO     -   - states_before: 10
2025-10-29 13:53:07,005 - INFO     -   - states_after: 10
2025-10-29 13:53:07,005 - INFO     -   - delta_states: 0
2025-10-29 13:53:07,005 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:07,005 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:07,006 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:07,006 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:07,006 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:07,006 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:07,006 - INFO     -   - search_signals present: True
2025-10-29 13:53:07,006 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:07,006 - INFO     -   - search_depth: 1
2025-10-29 13:53:07,006 - INFO     -   - solution_cost: 0
2025-10-29 13:53:07,006 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:07,006 - INFO     -   - solution_found: True
2025-10-29 13:53:07,006 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:07,006 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:07,006 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:53:07,006 - INFO     -   - TS8(5) + TS1(2) → 10 states
2025-10-29 13:53:07,008 - INFO     -   - f_stability=0.862
2025-10-29 13:53:07,008 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:07,008 - INFO     -   - solution_found=True
2025-10-29 13:53:07,008 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:07,008 - INFO     - 
  Extracted signals:
2025-10-29 13:53:07,008 - INFO     -     - iteration: 1
2025-10-29 13:53:07,008 - INFO     -     - states_before: 10
2025-10-29 13:53:07,008 - INFO     -     - states_after: 10
2025-10-29 13:53:07,008 - INFO     -     - delta_states: 0
2025-10-29 13:53:07,008 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:53:07,009 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:07,009 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:07,009 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:07,009 - INFO     -     - search_depth: 1
2025-10-29 13:53:07,009 - INFO     -     - solution_cost: 0
2025-10-29 13:53:07,009 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:07,009 - INFO     -     - solution_found: True
2025-10-29 13:53:07,009 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:07,009 - INFO     - 
  Computing reward:
2025-10-29 13:53:07,009 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:07,009 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:07,009 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:07,009 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:07,009 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:53:07,010 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:53:07,010 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:07,010 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:07,010 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:53:07,010 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:07,010 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:53:07,010 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:53:07,010 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:07,010 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:07,010 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:07,010 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:07,010 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:53:07,010 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:07,010 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:53:07,010 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:07,011 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:07,011 - INFO     -     - depth_score                    0.9119
2025-10-29 13:53:07,011 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:07,011 - INFO     -     - f_stability                    0.2913
2025-10-29 13:53:07,011 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:07,011 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:07,011 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:07,011 - INFO     -     - composite                      0.5743
2025-10-29 13:53:07,011 - INFO     -     - total                          0.3487
2025-10-29 13:53:07,011 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:07,011 - INFO     -   Num remaining nodes: 7
2025-10-29 13:53:07,011 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:53:07,011 - INFO     -   Done: False
2025-10-29 13:53:07,011 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:07,013 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:07,013 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:07,013 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:07,013 - INFO     -     - num_nodes: 7
2025-10-29 13:53:07,013 - INFO     -     - num_edges: 40
2025-10-29 13:53:07,013 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:07,013 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:53:07,013 - INFO     -   After: current_merge_step = 2
2025-10-29 13:53:07,013 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:07,013 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:07,013 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:07,014 - INFO     -   ✓ Step logged
2025-10-29 13:53:07,014 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:07,014 - INFO     -   Returning:
2025-10-29 13:53:07,014 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:07,014 - INFO     -     - reward: 0.3487
2025-10-29 13:53:07,014 - INFO     -     - done: False
2025-10-29 13:53:07,014 - INFO     -     - truncated: False
2025-10-29 13:53:07,015 - INFO     -     - info: 19 keys
2025-10-29 13:53:07,015 - INFO     - ==========================================================================================

2025-10-29 13:53:07,019 - INFO     - 
==========================================================================================
2025-10-29 13:53:07,019 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:07,019 - INFO     - ==========================================================================================
2025-10-29 13:53:07,020 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:07,020 - INFO     -   Input action: 24 (type: int)
2025-10-29 13:53:07,020 - INFO     -   Available edges in graph: 40
2025-10-29 13:53:07,020 - INFO     -   Action index calculation:
2025-10-29 13:53:07,020 - INFO     -     - action % max(num_valid_edges, 1) = 24 % 40 = 24
2025-10-29 13:53:07,020 - INFO     -     - clamped to [0, 39]: 24
2025-10-29 13:53:07,020 - INFO     -   ✓ Extracted merge pair from edge 24: (6, 3)
2025-10-29 13:53:07,020 - INFO     -   ✓ Validation passed
2025-10-29 13:53:07,020 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:07,020 - INFO     -     - Total states before merge: 36
2025-10-29 13:53:07,020 - INFO     -     - Num nodes: 7
2025-10-29 13:53:07,020 - INFO     -     - Num edges: 40
2025-10-29 13:53:07,020 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:07,020 - INFO     -       - Node 6: 5 states
2025-10-29 13:53:07,021 - INFO     -       - Node 3: 2 states
2025-10-29 13:53:07,021 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:07,021 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:07,028 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:53:07,028 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:07,028 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:53:07,129 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:07,129 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:07,129 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:53:07,129 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:07,130 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:07,130 - INFO     -   Calling graph_tracker.merge_nodes([6, 3])...
2025-10-29 13:53:07,130 - INFO     - Attempting merge of nodes 6 and 3...
2025-10-29 13:53:07,130 - INFO     - Successfully merged nodes into new node 11 with 10 states.
2025-10-29 13:53:07,130 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:07,130 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:07,130 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:53:07,130 - INFO     - 
================================================================================
2025-10-29 13:53:07,130 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:53:07,130 - INFO     - ================================================================================
2025-10-29 13:53:07,130 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:07,130 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:53:07,130 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:53:07,131 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:07,131 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:07,131 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:07,131 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:07,131 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:07,131 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:07,131 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:07,131 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:07,131 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:07,131 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:07,131 - INFO     -   - ts1_id: 6
2025-10-29 13:53:07,131 - INFO     -   - ts2_id: 3
2025-10-29 13:53:07,131 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:07,131 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:07,131 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:07,131 - INFO     -   - Product space size: 10
2025-10-29 13:53:07,131 - INFO     -   - Using product state mapping
2025-10-29 13:53:07,131 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:07,131 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:53:07,131 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:53:07,131 - INFO     -   - delta: 0.4000
2025-10-29 13:53:07,131 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:53:07,131 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:07,133 - INFO     -   - Compared 7 values
2025-10-29 13:53:07,133 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:07,133 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:07,133 - INFO     -   - states_before: 10
2025-10-29 13:53:07,133 - INFO     -   - states_after: 10
2025-10-29 13:53:07,133 - INFO     -   - delta_states: 0
2025-10-29 13:53:07,133 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:07,133 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:07,133 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:07,133 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:07,133 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:07,133 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:07,134 - INFO     -   - search_signals present: True
2025-10-29 13:53:07,134 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:07,134 - INFO     -   - search_depth: 1
2025-10-29 13:53:07,134 - INFO     -   - solution_cost: 0
2025-10-29 13:53:07,134 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:07,134 - INFO     -   - solution_found: True
2025-10-29 13:53:07,134 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:07,134 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:07,134 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:53:07,134 - INFO     -   - TS6(5) + TS3(2) → 10 states
2025-10-29 13:53:07,134 - INFO     -   - f_stability=0.862
2025-10-29 13:53:07,134 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:07,135 - INFO     -   - solution_found=True
2025-10-29 13:53:07,135 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:07,135 - INFO     - 
  Extracted signals:
2025-10-29 13:53:07,135 - INFO     -     - iteration: 2
2025-10-29 13:53:07,135 - INFO     -     - states_before: 10
2025-10-29 13:53:07,135 - INFO     -     - states_after: 10
2025-10-29 13:53:07,135 - INFO     -     - delta_states: 0
2025-10-29 13:53:07,135 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:53:07,135 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:07,135 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:07,135 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:07,135 - INFO     -     - search_depth: 1
2025-10-29 13:53:07,135 - INFO     -     - solution_cost: 0
2025-10-29 13:53:07,135 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:07,135 - INFO     -     - solution_found: True
2025-10-29 13:53:07,136 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:07,136 - INFO     - 
  Computing reward:
2025-10-29 13:53:07,136 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:07,136 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:07,136 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:07,136 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:07,136 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:53:07,136 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:53:07,136 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:07,136 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:07,136 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:53:07,137 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:07,137 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:53:07,137 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:53:07,137 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:07,137 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:07,137 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:07,137 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:07,137 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:53:07,137 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:07,137 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:53:07,137 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:07,137 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:07,137 - INFO     -     - depth_score                    0.9119
2025-10-29 13:53:07,137 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:07,137 - INFO     -     - f_stability                    0.2913
2025-10-29 13:53:07,137 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:07,137 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:07,138 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:07,138 - INFO     -     - composite                      0.5743
2025-10-29 13:53:07,138 - INFO     -     - total                          0.3487
2025-10-29 13:53:07,138 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:07,138 - INFO     -   Num remaining nodes: 6
2025-10-29 13:53:07,138 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:53:07,138 - INFO     -   Done: False
2025-10-29 13:53:07,138 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:07,139 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:07,139 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:07,139 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:07,139 - INFO     -     - num_nodes: 6
2025-10-29 13:53:07,139 - INFO     -     - num_edges: 30
2025-10-29 13:53:07,139 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:07,139 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:53:07,139 - INFO     -   After: current_merge_step = 3
2025-10-29 13:53:07,140 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:07,140 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:07,140 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:07,142 - INFO     -   ✓ Step logged
2025-10-29 13:53:07,142 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:07,142 - INFO     -   Returning:
2025-10-29 13:53:07,142 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:07,142 - INFO     -     - reward: 0.3487
2025-10-29 13:53:07,142 - INFO     -     - done: False
2025-10-29 13:53:07,142 - INFO     -     - truncated: False
2025-10-29 13:53:07,142 - INFO     -     - info: 19 keys
2025-10-29 13:53:07,142 - INFO     - ==========================================================================================

2025-10-29 13:53:07,147 - INFO     - 
==========================================================================================
2025-10-29 13:53:07,147 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:07,147 - INFO     - ==========================================================================================
2025-10-29 13:53:07,147 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:07,147 - INFO     -   Input action: 20 (type: int)
2025-10-29 13:53:07,147 - INFO     -   Available edges in graph: 30
2025-10-29 13:53:07,147 - INFO     -   Action index calculation:
2025-10-29 13:53:07,147 - INFO     -     - action % max(num_valid_edges, 1) = 20 % 30 = 20
2025-10-29 13:53:07,147 - INFO     -     - clamped to [0, 29]: 20
2025-10-29 13:53:07,147 - INFO     -   ✓ Extracted merge pair from edge 20: (10, 0)
2025-10-29 13:53:07,147 - INFO     -   ✓ Validation passed
2025-10-29 13:53:07,147 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:07,147 - INFO     -     - Total states before merge: 39
2025-10-29 13:53:07,147 - INFO     -     - Num nodes: 6
2025-10-29 13:53:07,148 - INFO     -     - Num edges: 30
2025-10-29 13:53:07,148 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:07,148 - INFO     -       - Node 10: 10 states
2025-10-29 13:53:07,148 - INFO     -       - Node 0: 2 states
2025-10-29 13:53:07,148 - INFO     -       - Expected product: 20 states
2025-10-29 13:53:07,148 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:07,152 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:53:07,152 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:07,152 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:53:07,253 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:07,254 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:07,254 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:53:07,254 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:07,254 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:07,254 - INFO     -   Calling graph_tracker.merge_nodes([10, 0])...
2025-10-29 13:53:07,254 - INFO     - Attempting merge of nodes 10 and 0...
2025-10-29 13:53:07,255 - INFO     - Successfully merged nodes into new node 12 with 20 states.
2025-10-29 13:53:07,255 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:07,255 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:07,255 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:53:07,255 - INFO     - 
================================================================================
2025-10-29 13:53:07,255 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:53:07,255 - INFO     - ================================================================================
2025-10-29 13:53:07,255 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:07,255 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:53:07,255 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:53:07,256 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:07,256 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:07,256 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:53:07,256 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:07,256 - INFO     -   - Raw f_after length: 20
2025-10-29 13:53:07,256 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:07,256 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:53:07,256 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:07,256 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:53:07,256 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:07,256 - INFO     -   - ts1_id: 10
2025-10-29 13:53:07,256 - INFO     -   - ts2_id: 0
2025-10-29 13:53:07,257 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:07,257 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:07,257 - INFO     -   - ts1_size: 10, ts2_size: 2
2025-10-29 13:53:07,257 - INFO     -   - Product space size: 20
2025-10-29 13:53:07,257 - INFO     -   - Using product state mapping
2025-10-29 13:53:07,257 - INFO     -   - f_before_product length: 20
2025-10-29 13:53:07,257 - INFO     -   - avg_f_before: 3.3500 (20 valid states)
2025-10-29 13:53:07,257 - INFO     -   - avg_f_after:  3.7000 (20 valid states)
2025-10-29 13:53:07,257 - INFO     -   - delta: 0.3500
2025-10-29 13:53:07,257 - INFO     -   - f_stability: 1.0 - |0.3500| / 3.3500 = 0.8955
2025-10-29 13:53:07,257 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:07,258 - INFO     -   - Compared 12 values
2025-10-29 13:53:07,258 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:07,258 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:07,258 - INFO     -   - states_before: 20
2025-10-29 13:53:07,258 - INFO     -   - states_after: 20
2025-10-29 13:53:07,258 - INFO     -   - delta_states: 0
2025-10-29 13:53:07,258 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:07,258 - INFO     -   - ts1_transitions: 40
2025-10-29 13:53:07,258 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:07,258 - INFO     -   - merged_transitions: 128
2025-10-29 13:53:07,258 - INFO     -   - transition_density_change: 4.1500
2025-10-29 13:53:07,258 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:07,258 - INFO     -   - search_signals present: True
2025-10-29 13:53:07,258 - INFO     -   - nodes_expanded: 20
2025-10-29 13:53:07,258 - INFO     -   - search_depth: 1
2025-10-29 13:53:07,259 - INFO     -   - solution_cost: 0
2025-10-29 13:53:07,259 - INFO     -   - branching_factor: 6.4000
2025-10-29 13:53:07,259 - INFO     -   - solution_found: True
2025-10-29 13:53:07,259 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:07,259 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:07,259 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:53:07,259 - INFO     -   - TS10(10) + TS0(2) → 20 states
2025-10-29 13:53:07,259 - INFO     -   - f_stability=0.896
2025-10-29 13:53:07,259 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:53:07,259 - INFO     -   - solution_found=True
2025-10-29 13:53:07,259 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:07,259 - INFO     - 
  Extracted signals:
2025-10-29 13:53:07,259 - INFO     -     - iteration: 3
2025-10-29 13:53:07,259 - INFO     -     - states_before: 20
2025-10-29 13:53:07,260 - INFO     -     - states_after: 20
2025-10-29 13:53:07,260 - INFO     -     - delta_states: 0
2025-10-29 13:53:07,260 - INFO     -     - f_value_stability: 0.8955
2025-10-29 13:53:07,260 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:07,260 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:07,260 - INFO     -     - nodes_expanded: 20
2025-10-29 13:53:07,260 - INFO     -     - search_depth: 1
2025-10-29 13:53:07,260 - INFO     -     - solution_cost: 0
2025-10-29 13:53:07,260 - INFO     -     - branching_factor: 6.4000
2025-10-29 13:53:07,260 - INFO     -     - solution_found: True
2025-10-29 13:53:07,260 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:07,261 - INFO     - 
  Computing reward:
2025-10-29 13:53:07,261 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:07,261 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:07,261 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:07,261 - INFO     -   [1] BRANCHING FACTOR: 6.400 → score 0.260 (high BF, minimal credit)
2025-10-29 13:53:07,261 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:53:07,261 - INFO     -   [3] F-VALUE STABILITY: 0.865
2025-10-29 13:53:07,262 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:07,262 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:07,262 - INFO     - 
  [COMPOSITE]: 0.683
2025-10-29 13:53:07,262 - INFO     -     = 0.300*0.260 (bf)
2025-10-29 13:53:07,262 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:53:07,262 - INFO     -     + 0.350*0.865 (stability)
2025-10-29 13:53:07,262 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:07,262 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:07,262 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:07,262 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:07,262 - INFO     - 
  [FINAL REWARD]: 0.8663
2025-10-29 13:53:07,262 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:07,262 - INFO     -     ✓ Reward computed: 0.8663
2025-10-29 13:53:07,263 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:07,263 - INFO     -     - bf_score                       0.2600
2025-10-29 13:53:07,263 - INFO     -     - depth_score                    0.9119
2025-10-29 13:53:07,263 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:07,263 - INFO     -     - f_stability                    0.8650
2025-10-29 13:53:07,263 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:07,263 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:07,263 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:07,263 - INFO     -     - composite                      0.6831
2025-10-29 13:53:07,263 - INFO     -     - total                          0.8663
2025-10-29 13:53:07,263 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:07,263 - INFO     -   Num remaining nodes: 5
2025-10-29 13:53:07,263 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:53:07,263 - INFO     -   Done: False
2025-10-29 13:53:07,263 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:07,264 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:07,264 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:07,264 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:07,266 - INFO     -     - num_nodes: 5
2025-10-29 13:53:07,266 - INFO     -     - num_edges: 20
2025-10-29 13:53:07,266 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:07,266 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:53:07,266 - INFO     -   After: current_merge_step = 4
2025-10-29 13:53:07,266 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:07,266 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:07,266 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:07,267 - INFO     -   ✓ Step logged
2025-10-29 13:53:07,267 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:07,267 - INFO     -   Returning:
2025-10-29 13:53:07,267 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:07,267 - INFO     -     - reward: 0.8663
2025-10-29 13:53:07,267 - INFO     -     - done: False
2025-10-29 13:53:07,268 - INFO     -     - truncated: False
2025-10-29 13:53:07,268 - INFO     -     - info: 19 keys
2025-10-29 13:53:07,268 - INFO     - ==========================================================================================

2025-10-29 13:53:07,272 - INFO     - 
==========================================================================================
2025-10-29 13:53:07,272 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:07,273 - INFO     - ==========================================================================================
2025-10-29 13:53:07,273 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:07,273 - INFO     -   Input action: 5 (type: int)
2025-10-29 13:53:07,273 - INFO     -   Available edges in graph: 20
2025-10-29 13:53:07,273 - INFO     -   Action index calculation:
2025-10-29 13:53:07,273 - INFO     -     - action % max(num_valid_edges, 1) = 5 % 20 = 5
2025-10-29 13:53:07,273 - INFO     -     - clamped to [0, 19]: 5
2025-10-29 13:53:07,273 - INFO     -   ✓ Extracted merge pair from edge 5: (5, 9)
2025-10-29 13:53:07,273 - INFO     -   ✓ Validation passed
2025-10-29 13:53:07,273 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:07,273 - INFO     -     - Total states before merge: 47
2025-10-29 13:53:07,273 - INFO     -     - Num nodes: 5
2025-10-29 13:53:07,273 - INFO     -     - Num edges: 20
2025-10-29 13:53:07,273 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:07,274 - INFO     -       - Node 5: 5 states
2025-10-29 13:53:07,274 - INFO     -       - Node 9: 10 states
2025-10-29 13:53:07,274 - INFO     -       - Expected product: 50 states
2025-10-29 13:53:07,274 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:07,278 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:53:07,279 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:07,279 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:53:07,380 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:07,380 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:07,380 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:53:07,381 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:07,381 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:07,381 - INFO     -   Calling graph_tracker.merge_nodes([5, 9])...
2025-10-29 13:53:07,381 - INFO     - Attempting merge of nodes 5 and 9...
2025-10-29 13:53:07,381 - INFO     - Successfully merged nodes into new node 13 with 50 states.
2025-10-29 13:53:07,382 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:07,382 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:07,382 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:53:07,382 - INFO     - 
================================================================================
2025-10-29 13:53:07,382 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:53:07,382 - INFO     - ================================================================================
2025-10-29 13:53:07,382 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:07,382 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:53:07,382 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:53:07,383 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:07,383 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:07,383 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:07,383 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:07,383 - INFO     -   - Raw f_after length: 50
2025-10-29 13:53:07,383 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:07,383 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:07,383 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:07,383 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:53:07,383 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:07,383 - INFO     -   - ts1_id: 5
2025-10-29 13:53:07,383 - INFO     -   - ts2_id: 9
2025-10-29 13:53:07,383 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:07,383 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:07,383 - INFO     -   - ts1_size: 5, ts2_size: 10
2025-10-29 13:53:07,383 - INFO     -   - Product space size: 50
2025-10-29 13:53:07,383 - INFO     -   - Using product state mapping
2025-10-29 13:53:07,383 - INFO     -   - f_before_product length: 50
2025-10-29 13:53:07,384 - INFO     -   - avg_f_before: 3.9200 (50 valid states)
2025-10-29 13:53:07,384 - INFO     -   - avg_f_after:  6.3800 (50 valid states)
2025-10-29 13:53:07,384 - INFO     -   - delta: 2.4600
2025-10-29 13:53:07,384 - INFO     -   - f_stability: 1.0 - |2.4600| / 3.9200 = 0.3724
2025-10-29 13:53:07,384 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:07,384 - INFO     -   - Compared 15 values
2025-10-29 13:53:07,384 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:07,384 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:07,384 - INFO     -   - states_before: 50
2025-10-29 13:53:07,386 - INFO     -   - states_after: 50
2025-10-29 13:53:07,386 - INFO     -   - delta_states: 0
2025-10-29 13:53:07,386 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:07,386 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:07,386 - INFO     -   - ts2_transitions: 37
2025-10-29 13:53:07,386 - INFO     -   - merged_transitions: 260
2025-10-29 13:53:07,386 - INFO     -   - transition_density_change: 4.2000
2025-10-29 13:53:07,386 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:07,386 - INFO     -   - search_signals present: True
2025-10-29 13:53:07,386 - INFO     -   - nodes_expanded: 50
2025-10-29 13:53:07,386 - INFO     -   - search_depth: 3
2025-10-29 13:53:07,386 - INFO     -   - solution_cost: 4
2025-10-29 13:53:07,387 - INFO     -   - branching_factor: 5.2000
2025-10-29 13:53:07,387 - INFO     -   - solution_found: True
2025-10-29 13:53:07,387 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:07,387 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:07,387 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:53:07,387 - INFO     -   - TS5(5) + TS9(10) → 50 states
2025-10-29 13:53:07,387 - INFO     -   - f_stability=0.372
2025-10-29 13:53:07,387 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:53:07,387 - INFO     -   - solution_found=True
2025-10-29 13:53:07,388 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:07,388 - INFO     - 
  Extracted signals:
2025-10-29 13:53:07,388 - INFO     -     - iteration: 4
2025-10-29 13:53:07,388 - INFO     -     - states_before: 50
2025-10-29 13:53:07,388 - INFO     -     - states_after: 50
2025-10-29 13:53:07,388 - INFO     -     - delta_states: 0
2025-10-29 13:53:07,388 - INFO     -     - f_value_stability: 0.3724
2025-10-29 13:53:07,388 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:07,388 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:07,388 - INFO     -     - nodes_expanded: 50
2025-10-29 13:53:07,388 - INFO     -     - search_depth: 3
2025-10-29 13:53:07,388 - INFO     -     - solution_cost: 4
2025-10-29 13:53:07,388 - INFO     -     - branching_factor: 5.2000
2025-10-29 13:53:07,389 - INFO     -     - solution_found: True
2025-10-29 13:53:07,389 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:07,389 - INFO     - 
  Computing reward:
2025-10-29 13:53:07,389 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:07,389 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:07,389 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:07,389 - INFO     -   [1] BRANCHING FACTOR: 5.200 → score 0.407 (tolerable)
2025-10-29 13:53:07,389 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:07,390 - INFO     -   [3] F-VALUE STABILITY: 0.231
2025-10-29 13:53:07,390 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:07,390 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:07,390 - INFO     - 
  [COMPOSITE]: 0.488
2025-10-29 13:53:07,390 - INFO     -     = 0.300*0.407 (bf)
2025-10-29 13:53:07,390 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:07,390 - INFO     -     + 0.350*0.231 (stability)
2025-10-29 13:53:07,390 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:07,390 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:07,390 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:07,390 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:07,391 - INFO     - 
  [FINAL REWARD]: 0.1752
2025-10-29 13:53:07,391 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:07,391 - INFO     -     ✓ Reward computed: 0.1752
2025-10-29 13:53:07,391 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:07,391 - INFO     -     - bf_score                       0.4067
2025-10-29 13:53:07,391 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:07,391 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:07,391 - INFO     -     - f_stability                    0.2311
2025-10-29 13:53:07,391 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:07,391 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:07,391 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:07,392 - INFO     -     - composite                      0.4876
2025-10-29 13:53:07,392 - INFO     -     - total                          0.1752
2025-10-29 13:53:07,392 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:07,392 - INFO     -   Num remaining nodes: 4
2025-10-29 13:53:07,392 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:53:07,392 - INFO     -   Done: False
2025-10-29 13:53:07,392 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:07,393 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:07,393 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:07,393 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:07,393 - INFO     -     - num_nodes: 4
2025-10-29 13:53:07,393 - INFO     -     - num_edges: 12
2025-10-29 13:53:07,393 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:07,393 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:53:07,393 - INFO     -   After: current_merge_step = 5
2025-10-29 13:53:07,393 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:07,394 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:07,394 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:07,394 - INFO     -   ✓ Step logged
2025-10-29 13:53:07,394 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:07,394 - INFO     -   Returning:
2025-10-29 13:53:07,394 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:07,395 - INFO     -     - reward: 0.1752
2025-10-29 13:53:07,395 - INFO     -     - done: False
2025-10-29 13:53:07,395 - INFO     -     - truncated: False
2025-10-29 13:53:07,395 - INFO     -     - info: 19 keys
2025-10-29 13:53:07,395 - INFO     - ==========================================================================================

2025-10-29 13:53:07,399 - INFO     - 
==========================================================================================
2025-10-29 13:53:07,399 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:07,399 - INFO     - ==========================================================================================
2025-10-29 13:53:07,399 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:07,399 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:53:07,399 - INFO     -   Available edges in graph: 12
2025-10-29 13:53:07,399 - INFO     -   Action index calculation:
2025-10-29 13:53:07,400 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 12 = 0
2025-10-29 13:53:07,400 - INFO     -     - clamped to [0, 11]: 0
2025-10-29 13:53:07,400 - INFO     -   ✓ Extracted merge pair from edge 0: (4, 11)
2025-10-29 13:53:07,400 - INFO     -   ✓ Validation passed
2025-10-29 13:53:07,400 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:07,400 - INFO     -     - Total states before merge: 82
2025-10-29 13:53:07,400 - INFO     -     - Num nodes: 4
2025-10-29 13:53:07,400 - INFO     -     - Num edges: 12
2025-10-29 13:53:07,400 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:07,400 - INFO     -       - Node 4: 2 states
2025-10-29 13:53:07,400 - INFO     -       - Node 11: 10 states
2025-10-29 13:53:07,400 - INFO     -       - Expected product: 20 states
2025-10-29 13:53:07,400 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:07,407 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:53:07,407 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:07,407 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:53:07,509 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:07,509 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:07,509 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:53:07,510 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:07,510 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:07,510 - INFO     -   Calling graph_tracker.merge_nodes([4, 11])...
2025-10-29 13:53:07,510 - INFO     - Attempting merge of nodes 4 and 11...
2025-10-29 13:53:07,510 - INFO     - Successfully merged nodes into new node 14 with 20 states.
2025-10-29 13:53:07,511 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:07,511 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:07,511 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:53:07,511 - INFO     - 
================================================================================
2025-10-29 13:53:07,511 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:53:07,511 - INFO     - ================================================================================
2025-10-29 13:53:07,511 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:07,511 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:53:07,511 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:53:07,512 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:07,512 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:07,512 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:07,512 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:07,512 - INFO     -   - Raw f_after length: 20
2025-10-29 13:53:07,512 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:07,512 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:07,512 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:07,512 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:53:07,512 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:07,512 - INFO     -   - ts1_id: 4
2025-10-29 13:53:07,512 - INFO     -   - ts2_id: 11
2025-10-29 13:53:07,512 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:07,513 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:07,513 - INFO     -   - ts1_size: 2, ts2_size: 10
2025-10-29 13:53:07,513 - INFO     -   - Product space size: 20
2025-10-29 13:53:07,513 - INFO     -   - Using product state mapping
2025-10-29 13:53:07,513 - INFO     -   - f_before_product length: 20
2025-10-29 13:53:07,513 - INFO     -   - avg_f_before: 3.3500 (20 valid states)
2025-10-29 13:53:07,513 - INFO     -   - avg_f_after:  3.8500 (20 valid states)
2025-10-29 13:53:07,513 - INFO     -   - delta: 0.5000
2025-10-29 13:53:07,514 - INFO     -   - f_stability: 1.0 - |0.5000| / 3.3500 = 0.8507
2025-10-29 13:53:07,514 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:07,514 - INFO     -   - Compared 12 values
2025-10-29 13:53:07,514 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:07,514 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:07,514 - INFO     -   - states_before: 20
2025-10-29 13:53:07,514 - INFO     -   - states_after: 20
2025-10-29 13:53:07,514 - INFO     -   - delta_states: 0
2025-10-29 13:53:07,514 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:07,514 - INFO     -   - ts1_transitions: 3
2025-10-29 13:53:07,514 - INFO     -   - ts2_transitions: 40
2025-10-29 13:53:07,515 - INFO     -   - merged_transitions: 97
2025-10-29 13:53:07,515 - INFO     -   - transition_density_change: 2.7000
2025-10-29 13:53:07,515 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:07,515 - INFO     -   - search_signals present: True
2025-10-29 13:53:07,515 - INFO     -   - nodes_expanded: 20
2025-10-29 13:53:07,515 - INFO     -   - search_depth: 2
2025-10-29 13:53:07,515 - INFO     -   - solution_cost: 0
2025-10-29 13:53:07,515 - INFO     -   - branching_factor: 4.8500
2025-10-29 13:53:07,515 - INFO     -   - solution_found: True
2025-10-29 13:53:07,515 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:07,515 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:07,515 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:53:07,515 - INFO     -   - TS4(2) + TS11(10) → 20 states
2025-10-29 13:53:07,515 - INFO     -   - f_stability=0.851
2025-10-29 13:53:07,515 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:53:07,515 - INFO     -   - solution_found=True
2025-10-29 13:53:07,515 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:07,517 - INFO     - 
  Extracted signals:
2025-10-29 13:53:07,517 - INFO     -     - iteration: 5
2025-10-29 13:53:07,517 - INFO     -     - states_before: 20
2025-10-29 13:53:07,517 - INFO     -     - states_after: 20
2025-10-29 13:53:07,517 - INFO     -     - delta_states: 0
2025-10-29 13:53:07,517 - INFO     -     - f_value_stability: 0.8507
2025-10-29 13:53:07,517 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:07,517 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:07,517 - INFO     -     - nodes_expanded: 20
2025-10-29 13:53:07,517 - INFO     -     - search_depth: 2
2025-10-29 13:53:07,517 - INFO     -     - solution_cost: 0
2025-10-29 13:53:07,517 - INFO     -     - branching_factor: 4.8500
2025-10-29 13:53:07,517 - INFO     -     - solution_found: True
2025-10-29 13:53:07,517 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:07,517 - INFO     - 
  Computing reward:
2025-10-29 13:53:07,517 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:07,517 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:07,517 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:07,517 - INFO     -   [1] BRANCHING FACTOR: 4.850 → score 0.453 (tolerable)
2025-10-29 13:53:07,518 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:07,518 - INFO     -   [3] F-VALUE STABILITY: 0.885
2025-10-29 13:53:07,518 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:07,518 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:07,518 - INFO     - 
  [COMPOSITE]: 0.738
2025-10-29 13:53:07,518 - INFO     -     = 0.300*0.453 (bf)
2025-10-29 13:53:07,518 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:07,518 - INFO     -     + 0.350*0.885 (stability)
2025-10-29 13:53:07,518 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:07,518 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:07,519 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:07,519 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:07,519 - INFO     - 
  [FINAL REWARD]: 0.9756
2025-10-29 13:53:07,519 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:07,519 - INFO     -     ✓ Reward computed: 0.9756
2025-10-29 13:53:07,519 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:07,519 - INFO     -     - bf_score                       0.4533
2025-10-29 13:53:07,519 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:07,519 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:07,519 - INFO     -     - f_stability                    0.8850
2025-10-29 13:53:07,519 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:07,519 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:07,519 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:07,520 - INFO     -     - composite                      0.7378
2025-10-29 13:53:07,520 - INFO     -     - total                          0.9756
2025-10-29 13:53:07,520 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:07,520 - INFO     -   Num remaining nodes: 3
2025-10-29 13:53:07,520 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:53:07,520 - INFO     -   Done: False
2025-10-29 13:53:07,520 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:07,521 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:07,521 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:07,521 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:07,521 - INFO     -     - num_nodes: 3
2025-10-29 13:53:07,521 - INFO     -     - num_edges: 6
2025-10-29 13:53:07,521 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:07,521 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:53:07,521 - INFO     -   After: current_merge_step = 6
2025-10-29 13:53:07,521 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:07,521 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:07,521 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:07,522 - INFO     -   ✓ Step logged
2025-10-29 13:53:07,522 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:07,522 - INFO     -   Returning:
2025-10-29 13:53:07,522 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:07,522 - INFO     -     - reward: 0.9756
2025-10-29 13:53:07,522 - INFO     -     - done: False
2025-10-29 13:53:07,522 - INFO     -     - truncated: False
2025-10-29 13:53:07,522 - INFO     -     - info: 19 keys
2025-10-29 13:53:07,522 - INFO     - ==========================================================================================

2025-10-29 13:53:11,726 - INFO     -     ✓ Training complete (total: 9 steps)
2025-10-29 13:53:11,727 - INFO     -   [4/5] problem_small_03.pddl
2025-10-29 13:53:11,727 - INFO     - Environment initialized with:
2025-10-29 13:53:11,727 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:11,727 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_03.pddl
2025-10-29 13:53:11,727 - INFO     -   FD base: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward
2025-10-29 13:53:11,727 - INFO     -   max_states: 4000
2025-10-29 13:53:11,727 - INFO     -   threshold_before_merge: 1
2025-10-29 13:53:11,729 - INFO     - ✓ Initialized reward function: astar_search
2025-10-29 13:53:11,729 - INFO     - ✓ RewardInfoExtractor initialized (output_dir: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output)
2025-10-29 13:53:11,729 - INFO     - ✓ Initialized reward info extractor
2025-10-29 13:53:11,730 - INFO     -     Training for 3 timesteps...
2025-10-29 13:53:11,787 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:53:11,790 - WARNING  - ⚠️ Could not delete C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\output.sas: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\eliez\\Desktop\\Studies\\Fall 2025\\0960208 - AI Autonomous\\_AI_Proj_Technion\\downward\\output.sas'
2025-10-29 13:53:11,791 - INFO     - [Handshake] Building FD command:
2025-10-29 13:53:11,791 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:11,791 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_03.pddl
2025-10-29 13:53:11,791 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:53:11,797 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:11,948 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:11,948 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:12,349 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:12,665 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:12,665 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:12,665 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:12,666 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:12,666 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:12,666 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:12,666 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:12,666 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:12,666 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:12,666 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:12,666 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:12,666 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:12,666 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:12,666 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:12,666 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:12,666 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:12,666 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:12,667 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:12,667 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:12,667 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:12,667 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:12,667 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:12,667 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:12,668 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:12,668 - INFO     - Added edge (0, 1)
2025-10-29 13:53:12,668 - INFO     - Added edge (0, 2)
2025-10-29 13:53:12,668 - INFO     - Added edge (0, 3)
2025-10-29 13:53:12,668 - INFO     - Added edge (0, 4)
2025-10-29 13:53:12,668 - INFO     - Added edge (0, 5)
2025-10-29 13:53:12,668 - INFO     - Added edge (0, 6)
2025-10-29 13:53:12,668 - INFO     - Added edge (0, 7)
2025-10-29 13:53:12,668 - INFO     - Added edge (0, 8)
2025-10-29 13:53:12,668 - INFO     - Added edge (1, 0)
2025-10-29 13:53:12,668 - INFO     - Added edge (1, 2)
2025-10-29 13:53:12,668 - INFO     - Added edge (1, 3)
2025-10-29 13:53:12,668 - INFO     - Added edge (1, 4)
2025-10-29 13:53:12,668 - INFO     - Added edge (1, 5)
2025-10-29 13:53:12,669 - INFO     - Added edge (1, 6)
2025-10-29 13:53:12,669 - INFO     - Added edge (1, 7)
2025-10-29 13:53:12,669 - INFO     - Added edge (1, 8)
2025-10-29 13:53:12,669 - INFO     - Added edge (2, 0)
2025-10-29 13:53:12,669 - INFO     - Added edge (2, 1)
2025-10-29 13:53:12,669 - INFO     - Added edge (2, 3)
2025-10-29 13:53:12,669 - INFO     - Added edge (2, 4)
2025-10-29 13:53:12,669 - INFO     - Added edge (2, 5)
2025-10-29 13:53:12,669 - INFO     - Added edge (2, 6)
2025-10-29 13:53:12,669 - INFO     - Added edge (2, 7)
2025-10-29 13:53:12,669 - INFO     - Added edge (2, 8)
2025-10-29 13:53:12,669 - INFO     - Added edge (3, 0)
2025-10-29 13:53:12,669 - INFO     - Added edge (3, 1)
2025-10-29 13:53:12,669 - INFO     - Added edge (3, 2)
2025-10-29 13:53:12,669 - INFO     - Added edge (3, 4)
2025-10-29 13:53:12,669 - INFO     - Added edge (3, 5)
2025-10-29 13:53:12,669 - INFO     - Added edge (3, 6)
2025-10-29 13:53:12,669 - INFO     - Added edge (3, 7)
2025-10-29 13:53:12,669 - INFO     - Added edge (3, 8)
2025-10-29 13:53:12,669 - INFO     - Added edge (4, 0)
2025-10-29 13:53:12,669 - INFO     - Added edge (4, 1)
2025-10-29 13:53:12,670 - INFO     - Added edge (4, 2)
2025-10-29 13:53:12,670 - INFO     - Added edge (4, 3)
2025-10-29 13:53:12,670 - INFO     - Added edge (4, 5)
2025-10-29 13:53:12,670 - INFO     - Added edge (4, 6)
2025-10-29 13:53:12,670 - INFO     - Added edge (4, 7)
2025-10-29 13:53:12,670 - INFO     - Added edge (4, 8)
2025-10-29 13:53:12,670 - INFO     - Added edge (5, 0)
2025-10-29 13:53:12,670 - INFO     - Added edge (5, 1)
2025-10-29 13:53:12,670 - INFO     - Added edge (5, 2)
2025-10-29 13:53:12,670 - INFO     - Added edge (5, 3)
2025-10-29 13:53:12,670 - INFO     - Added edge (5, 4)
2025-10-29 13:53:12,670 - INFO     - Added edge (6, 0)
2025-10-29 13:53:12,670 - INFO     - Added edge (6, 1)
2025-10-29 13:53:12,670 - INFO     - Added edge (6, 2)
2025-10-29 13:53:12,670 - INFO     - Added edge (6, 3)
2025-10-29 13:53:12,670 - INFO     - Added edge (6, 4)
2025-10-29 13:53:12,670 - INFO     - Added edge (7, 0)
2025-10-29 13:53:12,670 - INFO     - Added edge (7, 1)
2025-10-29 13:53:12,670 - INFO     - Added edge (7, 2)
2025-10-29 13:53:12,670 - INFO     - Added edge (7, 3)
2025-10-29 13:53:12,670 - INFO     - Added edge (7, 4)
2025-10-29 13:53:12,671 - INFO     - Added edge (8, 0)
2025-10-29 13:53:12,671 - INFO     - Added edge (8, 1)
2025-10-29 13:53:12,671 - INFO     - Added edge (8, 2)
2025-10-29 13:53:12,671 - INFO     - Added edge (8, 3)
2025-10-29 13:53:12,671 - INFO     - Added edge (8, 4)
2025-10-29 13:53:12,671 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:12,680 - INFO     - 
==========================================================================================
2025-10-29 13:53:12,680 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:12,680 - INFO     - ==========================================================================================
2025-10-29 13:53:12,680 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:12,680 - INFO     -   Input action: 45 (type: int)
2025-10-29 13:53:12,680 - INFO     -   Available edges in graph: 60
2025-10-29 13:53:12,680 - INFO     -   Action index calculation:
2025-10-29 13:53:12,680 - INFO     -     - action % max(num_valid_edges, 1) = 45 % 60 = 45
2025-10-29 13:53:12,680 - INFO     -     - clamped to [0, 59]: 45
2025-10-29 13:53:12,680 - INFO     -   ✓ Extracted merge pair from edge 45: (6, 0)
2025-10-29 13:53:12,680 - INFO     -   ✓ Validation passed
2025-10-29 13:53:12,680 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:12,680 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:12,680 - INFO     -     - Num nodes: 9
2025-10-29 13:53:12,680 - INFO     -     - Num edges: 60
2025-10-29 13:53:12,681 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:12,681 - INFO     -       - Node 6: 5 states
2025-10-29 13:53:12,681 - INFO     -       - Node 0: 2 states
2025-10-29 13:53:12,681 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:12,681 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:12,690 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:53:12,690 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:12,691 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:53:12,792 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:12,792 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:12,792 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:53:12,792 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:12,792 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:12,792 - INFO     -   Calling graph_tracker.merge_nodes([6, 0])...
2025-10-29 13:53:12,792 - INFO     - Attempting merge of nodes 6 and 0...
2025-10-29 13:53:12,792 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:53:12,792 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:12,792 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:12,792 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:53:12,793 - INFO     - 
================================================================================
2025-10-29 13:53:12,793 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:53:12,793 - INFO     - ================================================================================
2025-10-29 13:53:12,793 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:12,793 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:53:12,793 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:53:12,793 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:12,793 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:12,793 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:12,793 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:12,794 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:12,794 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:12,794 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:12,794 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:12,794 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:12,794 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:12,794 - INFO     -   - ts1_id: 6
2025-10-29 13:53:12,794 - INFO     -   - ts2_id: 0
2025-10-29 13:53:12,794 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:12,794 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:12,794 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:12,794 - INFO     -   - Product space size: 10
2025-10-29 13:53:12,794 - INFO     -   - Using product state mapping
2025-10-29 13:53:12,794 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:12,794 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:53:12,795 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:53:12,795 - INFO     -   - delta: 0.4000
2025-10-29 13:53:12,795 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:53:12,795 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:12,795 - INFO     -   - Compared 7 values
2025-10-29 13:53:12,795 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:12,795 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:12,795 - INFO     -   - states_before: 10
2025-10-29 13:53:12,795 - INFO     -   - states_after: 10
2025-10-29 13:53:12,795 - INFO     -   - delta_states: 0
2025-10-29 13:53:12,795 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:12,795 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:12,795 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:12,795 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:12,796 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:12,796 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:12,796 - INFO     -   - search_signals present: True
2025-10-29 13:53:12,796 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:12,796 - INFO     -   - search_depth: 1
2025-10-29 13:53:12,796 - INFO     -   - solution_cost: 0
2025-10-29 13:53:12,796 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:12,796 - INFO     -   - solution_found: True
2025-10-29 13:53:12,797 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:12,797 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:12,797 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:53:12,797 - INFO     -   - TS6(5) + TS0(2) → 10 states
2025-10-29 13:53:12,797 - INFO     -   - f_stability=0.862
2025-10-29 13:53:12,797 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:12,797 - INFO     -   - solution_found=True
2025-10-29 13:53:12,797 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:12,797 - INFO     - 
  Extracted signals:
2025-10-29 13:53:12,797 - INFO     -     - iteration: 0
2025-10-29 13:53:12,797 - INFO     -     - states_before: 10
2025-10-29 13:53:12,797 - INFO     -     - states_after: 10
2025-10-29 13:53:12,797 - INFO     -     - delta_states: 0
2025-10-29 13:53:12,797 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:53:12,797 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:12,797 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:12,797 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:12,797 - INFO     -     - search_depth: 1
2025-10-29 13:53:12,797 - INFO     -     - solution_cost: 0
2025-10-29 13:53:12,797 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:12,797 - INFO     -     - solution_found: True
2025-10-29 13:53:12,798 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:12,798 - INFO     - 
  Computing reward:
2025-10-29 13:53:12,798 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:12,798 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:12,798 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:12,798 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:12,798 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:53:12,798 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:53:12,798 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:12,798 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:12,798 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:53:12,798 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:12,799 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:53:12,799 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:53:12,799 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:12,799 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:12,799 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:12,799 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:12,799 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:53:12,799 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:12,799 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:53:12,799 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:12,799 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:12,799 - INFO     -     - depth_score                    0.9119
2025-10-29 13:53:12,799 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:12,800 - INFO     -     - f_stability                    0.2913
2025-10-29 13:53:12,800 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:12,800 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:12,800 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:12,800 - INFO     -     - composite                      0.5743
2025-10-29 13:53:12,800 - INFO     -     - total                          0.3487
2025-10-29 13:53:12,800 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:12,800 - INFO     -   Num remaining nodes: 8
2025-10-29 13:53:12,800 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:53:12,800 - INFO     -   Done: False
2025-10-29 13:53:12,800 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:12,802 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:12,802 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:12,802 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:12,802 - INFO     -     - num_nodes: 8
2025-10-29 13:53:12,803 - INFO     -     - num_edges: 50
2025-10-29 13:53:12,803 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:12,803 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:53:12,803 - INFO     -   After: current_merge_step = 1
2025-10-29 13:53:12,803 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:12,803 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:12,803 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:12,804 - INFO     -   ✓ Step logged
2025-10-29 13:53:12,804 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:12,804 - INFO     -   Returning:
2025-10-29 13:53:12,804 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:12,804 - INFO     -     - reward: 0.3487
2025-10-29 13:53:12,804 - INFO     -     - done: False
2025-10-29 13:53:12,804 - INFO     -     - truncated: False
2025-10-29 13:53:12,804 - INFO     -     - info: 19 keys
2025-10-29 13:53:12,805 - INFO     - ==========================================================================================

2025-10-29 13:53:12,811 - INFO     - 
==========================================================================================
2025-10-29 13:53:12,811 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:12,811 - INFO     - ==========================================================================================
2025-10-29 13:53:12,811 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:12,811 - INFO     -   Input action: 36 (type: int)
2025-10-29 13:53:12,811 - INFO     -   Available edges in graph: 50
2025-10-29 13:53:12,811 - INFO     -   Action index calculation:
2025-10-29 13:53:12,811 - INFO     -     - action % max(num_valid_edges, 1) = 36 % 50 = 36
2025-10-29 13:53:12,812 - INFO     -     - clamped to [0, 49]: 36
2025-10-29 13:53:12,812 - INFO     -   ✓ Extracted merge pair from edge 36: (7, 4)
2025-10-29 13:53:12,812 - INFO     -   ✓ Validation passed
2025-10-29 13:53:12,812 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:12,812 - INFO     -     - Total states before merge: 33
2025-10-29 13:53:12,812 - INFO     -     - Num nodes: 8
2025-10-29 13:53:12,812 - INFO     -     - Num edges: 50
2025-10-29 13:53:12,812 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:12,812 - INFO     -       - Node 7: 5 states
2025-10-29 13:53:12,812 - INFO     -       - Node 4: 2 states
2025-10-29 13:53:12,812 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:12,812 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:12,820 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:53:12,820 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:12,820 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:53:12,921 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:12,921 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:12,921 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:53:12,922 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:12,922 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:12,922 - INFO     -   Calling graph_tracker.merge_nodes([7, 4])...
2025-10-29 13:53:12,922 - INFO     - Attempting merge of nodes 7 and 4...
2025-10-29 13:53:12,922 - INFO     - Successfully merged nodes into new node 10 with 10 states.
2025-10-29 13:53:12,922 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:12,922 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:12,922 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:53:12,922 - INFO     - 
================================================================================
2025-10-29 13:53:12,922 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:53:12,922 - INFO     - ================================================================================
2025-10-29 13:53:12,922 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:12,922 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:53:12,922 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:53:12,923 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:12,923 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:12,923 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:12,923 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:12,923 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:12,923 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:12,923 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:12,923 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:12,923 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:12,923 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:12,923 - INFO     -   - ts1_id: 7
2025-10-29 13:53:12,923 - INFO     -   - ts2_id: 4
2025-10-29 13:53:12,924 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:12,924 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:12,924 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:12,924 - INFO     -   - Product space size: 10
2025-10-29 13:53:12,924 - INFO     -   - Using product state mapping
2025-10-29 13:53:12,924 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:12,924 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:12,924 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:53:12,924 - INFO     -   - delta: 0.8000
2025-10-29 13:53:12,924 - INFO     -   - f_stability: 1.0 - |0.8000| / 2.8000 = 0.7143
2025-10-29 13:53:12,924 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:12,924 - INFO     -   - Compared 7 values
2025-10-29 13:53:12,924 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:12,924 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:12,925 - INFO     -   - states_before: 10
2025-10-29 13:53:12,925 - INFO     -   - states_after: 10
2025-10-29 13:53:12,925 - INFO     -   - delta_states: 0
2025-10-29 13:53:12,925 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:12,925 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:12,925 - INFO     -   - ts2_transitions: 3
2025-10-29 13:53:12,925 - INFO     -   - merged_transitions: 27
2025-10-29 13:53:12,925 - INFO     -   - transition_density_change: 1.1000
2025-10-29 13:53:12,925 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:12,925 - INFO     -   - search_signals present: True
2025-10-29 13:53:12,925 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:12,925 - INFO     -   - search_depth: 2
2025-10-29 13:53:12,925 - INFO     -   - solution_cost: 2
2025-10-29 13:53:12,926 - INFO     -   - branching_factor: 2.7000
2025-10-29 13:53:12,926 - INFO     -   - solution_found: True
2025-10-29 13:53:12,926 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:12,926 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:12,926 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:53:12,926 - INFO     -   - TS7(5) + TS4(2) → 10 states
2025-10-29 13:53:12,926 - INFO     -   - f_stability=0.714
2025-10-29 13:53:12,926 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:12,926 - INFO     -   - solution_found=True
2025-10-29 13:53:12,926 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:12,926 - INFO     - 
  Extracted signals:
2025-10-29 13:53:12,926 - INFO     -     - iteration: 1
2025-10-29 13:53:12,926 - INFO     -     - states_before: 10
2025-10-29 13:53:12,926 - INFO     -     - states_after: 10
2025-10-29 13:53:12,926 - INFO     -     - delta_states: 0
2025-10-29 13:53:12,926 - INFO     -     - f_value_stability: 0.7143
2025-10-29 13:53:12,926 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:12,926 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:12,926 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:12,926 - INFO     -     - search_depth: 2
2025-10-29 13:53:12,926 - INFO     -     - solution_cost: 2
2025-10-29 13:53:12,926 - INFO     -     - branching_factor: 2.7000
2025-10-29 13:53:12,927 - INFO     -     - solution_found: True
2025-10-29 13:53:12,927 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:12,927 - INFO     - 
  Computing reward:
2025-10-29 13:53:12,927 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:12,927 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:12,927 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:12,927 - INFO     -   [1] BRANCHING FACTOR: 2.700 → score 0.745 (good (in comfort zone))
2025-10-29 13:53:12,927 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:12,927 - INFO     -   [3] F-VALUE STABILITY: 0.459
2025-10-29 13:53:12,927 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:12,927 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:12,928 - INFO     - 
  [COMPOSITE]: 0.676
2025-10-29 13:53:12,928 - INFO     -     = 0.300*0.745 (bf)
2025-10-29 13:53:12,928 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:12,928 - INFO     -     + 0.350*0.459 (stability)
2025-10-29 13:53:12,928 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:12,928 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:12,928 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:12,929 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:12,929 - INFO     - 
  [FINAL REWARD]: 0.6523
2025-10-29 13:53:12,929 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:12,929 - INFO     -     ✓ Reward computed: 0.6523
2025-10-29 13:53:12,929 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:12,929 - INFO     -     - bf_score                       0.7450
2025-10-29 13:53:12,929 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:12,929 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:12,929 - INFO     -     - f_stability                    0.4588
2025-10-29 13:53:12,929 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:12,929 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:12,929 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:12,929 - INFO     -     - composite                      0.6762
2025-10-29 13:53:12,929 - INFO     -     - total                          0.6523
2025-10-29 13:53:12,929 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:12,929 - INFO     -   Num remaining nodes: 7
2025-10-29 13:53:12,930 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:53:12,930 - INFO     -   Done: False
2025-10-29 13:53:12,930 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:12,931 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:12,931 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:12,931 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:12,931 - INFO     -     - num_nodes: 7
2025-10-29 13:53:12,931 - INFO     -     - num_edges: 40
2025-10-29 13:53:12,931 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:12,931 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:53:12,931 - INFO     -   After: current_merge_step = 2
2025-10-29 13:53:12,931 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:12,931 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:12,931 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:12,932 - INFO     -   ✓ Step logged
2025-10-29 13:53:12,932 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:12,932 - INFO     -   Returning:
2025-10-29 13:53:12,932 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:12,932 - INFO     -     - reward: 0.6523
2025-10-29 13:53:12,932 - INFO     -     - done: False
2025-10-29 13:53:12,932 - INFO     -     - truncated: False
2025-10-29 13:53:12,932 - INFO     -     - info: 19 keys
2025-10-29 13:53:12,933 - INFO     - ==========================================================================================

2025-10-29 13:53:12,937 - INFO     - 
==========================================================================================
2025-10-29 13:53:12,937 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:12,937 - INFO     - ==========================================================================================
2025-10-29 13:53:12,937 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:12,937 - INFO     -   Input action: 30 (type: int)
2025-10-29 13:53:12,937 - INFO     -   Available edges in graph: 40
2025-10-29 13:53:12,937 - INFO     -   Action index calculation:
2025-10-29 13:53:12,937 - INFO     -     - action % max(num_valid_edges, 1) = 30 % 40 = 30
2025-10-29 13:53:12,937 - INFO     -     - clamped to [0, 39]: 30
2025-10-29 13:53:12,937 - INFO     -   ✓ Extracted merge pair from edge 30: (9, 3)
2025-10-29 13:53:12,937 - INFO     -   ✓ Validation passed
2025-10-29 13:53:12,937 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:12,938 - INFO     -     - Total states before merge: 36
2025-10-29 13:53:12,938 - INFO     -     - Num nodes: 7
2025-10-29 13:53:12,938 - INFO     -     - Num edges: 40
2025-10-29 13:53:12,938 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:12,938 - INFO     -       - Node 9: 10 states
2025-10-29 13:53:12,938 - INFO     -       - Node 3: 2 states
2025-10-29 13:53:12,938 - INFO     -       - Expected product: 20 states
2025-10-29 13:53:12,938 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:12,943 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:53:12,943 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:12,943 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:53:13,044 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:13,044 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:13,044 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:53:13,044 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:13,044 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:13,044 - INFO     -   Calling graph_tracker.merge_nodes([9, 3])...
2025-10-29 13:53:13,044 - INFO     - Attempting merge of nodes 9 and 3...
2025-10-29 13:53:13,044 - INFO     - Successfully merged nodes into new node 11 with 20 states.
2025-10-29 13:53:13,045 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:13,045 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:13,045 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:53:13,045 - INFO     - 
================================================================================
2025-10-29 13:53:13,045 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:53:13,045 - INFO     - ================================================================================
2025-10-29 13:53:13,045 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:13,045 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:53:13,045 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:53:13,045 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:13,046 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:13,046 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:53:13,046 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:13,046 - INFO     -   - Raw f_after length: 20
2025-10-29 13:53:13,046 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:13,046 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:53:13,046 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:13,046 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:53:13,046 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:13,046 - INFO     -   - ts1_id: 9
2025-10-29 13:53:13,046 - INFO     -   - ts2_id: 3
2025-10-29 13:53:13,046 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:13,046 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:13,046 - INFO     -   - ts1_size: 10, ts2_size: 2
2025-10-29 13:53:13,046 - INFO     -   - Product space size: 20
2025-10-29 13:53:13,046 - INFO     -   - Using product state mapping
2025-10-29 13:53:13,046 - INFO     -   - f_before_product length: 20
2025-10-29 13:53:13,047 - INFO     -   - avg_f_before: 3.3500 (20 valid states)
2025-10-29 13:53:13,047 - INFO     -   - avg_f_after:  3.7000 (20 valid states)
2025-10-29 13:53:13,047 - INFO     -   - delta: 0.3500
2025-10-29 13:53:13,047 - INFO     -   - f_stability: 1.0 - |0.3500| / 3.3500 = 0.8955
2025-10-29 13:53:13,047 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:13,047 - INFO     -   - Compared 12 values
2025-10-29 13:53:13,047 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:13,047 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:13,047 - INFO     -   - states_before: 20
2025-10-29 13:53:13,047 - INFO     -   - states_after: 20
2025-10-29 13:53:13,047 - INFO     -   - delta_states: 0
2025-10-29 13:53:13,047 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:13,047 - INFO     -   - ts1_transitions: 40
2025-10-29 13:53:13,047 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:13,047 - INFO     -   - merged_transitions: 128
2025-10-29 13:53:13,047 - INFO     -   - transition_density_change: 4.1500
2025-10-29 13:53:13,047 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:13,047 - INFO     -   - search_signals present: True
2025-10-29 13:53:13,047 - INFO     -   - nodes_expanded: 20
2025-10-29 13:53:13,047 - INFO     -   - search_depth: 1
2025-10-29 13:53:13,047 - INFO     -   - solution_cost: 0
2025-10-29 13:53:13,047 - INFO     -   - branching_factor: 6.4000
2025-10-29 13:53:13,047 - INFO     -   - solution_found: True
2025-10-29 13:53:13,047 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:13,049 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:13,049 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:53:13,049 - INFO     -   - TS9(10) + TS3(2) → 20 states
2025-10-29 13:53:13,049 - INFO     -   - f_stability=0.896
2025-10-29 13:53:13,049 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:53:13,049 - INFO     -   - solution_found=True
2025-10-29 13:53:13,049 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:13,049 - INFO     - 
  Extracted signals:
2025-10-29 13:53:13,049 - INFO     -     - iteration: 2
2025-10-29 13:53:13,049 - INFO     -     - states_before: 20
2025-10-29 13:53:13,049 - INFO     -     - states_after: 20
2025-10-29 13:53:13,049 - INFO     -     - delta_states: 0
2025-10-29 13:53:13,049 - INFO     -     - f_value_stability: 0.8955
2025-10-29 13:53:13,049 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:13,049 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:13,049 - INFO     -     - nodes_expanded: 20
2025-10-29 13:53:13,050 - INFO     -     - search_depth: 1
2025-10-29 13:53:13,050 - INFO     -     - solution_cost: 0
2025-10-29 13:53:13,050 - INFO     -     - branching_factor: 6.4000
2025-10-29 13:53:13,050 - INFO     -     - solution_found: True
2025-10-29 13:53:13,050 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:13,050 - INFO     - 
  Computing reward:
2025-10-29 13:53:13,050 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:13,050 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:13,050 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:13,050 - INFO     -   [1] BRANCHING FACTOR: 6.400 → score 0.260 (high BF, minimal credit)
2025-10-29 13:53:13,050 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:53:13,050 - INFO     -   [3] F-VALUE STABILITY: 0.865
2025-10-29 13:53:13,050 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:13,051 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:13,051 - INFO     - 
  [COMPOSITE]: 0.683
2025-10-29 13:53:13,051 - INFO     -     = 0.300*0.260 (bf)
2025-10-29 13:53:13,051 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:53:13,051 - INFO     -     + 0.350*0.865 (stability)
2025-10-29 13:53:13,051 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:13,051 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:13,051 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:13,051 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:13,051 - INFO     - 
  [FINAL REWARD]: 0.8663
2025-10-29 13:53:13,051 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:13,051 - INFO     -     ✓ Reward computed: 0.8663
2025-10-29 13:53:13,051 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:13,051 - INFO     -     - bf_score                       0.2600
2025-10-29 13:53:13,052 - INFO     -     - depth_score                    0.9119
2025-10-29 13:53:13,052 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:13,052 - INFO     -     - f_stability                    0.8650
2025-10-29 13:53:13,052 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:13,052 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:13,052 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:13,052 - INFO     -     - composite                      0.6831
2025-10-29 13:53:13,052 - INFO     -     - total                          0.8663
2025-10-29 13:53:13,052 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:13,052 - INFO     -   Num remaining nodes: 6
2025-10-29 13:53:13,052 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:53:13,052 - INFO     -   Done: False
2025-10-29 13:53:13,052 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:13,053 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:13,053 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:13,053 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:13,053 - INFO     -     - num_nodes: 6
2025-10-29 13:53:13,054 - INFO     -     - num_edges: 28
2025-10-29 13:53:13,054 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:13,054 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:53:13,054 - INFO     -   After: current_merge_step = 3
2025-10-29 13:53:13,054 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:13,054 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:13,054 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:13,056 - INFO     -   ✓ Step logged
2025-10-29 13:53:13,057 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:13,057 - INFO     -   Returning:
2025-10-29 13:53:13,057 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:13,057 - INFO     -     - reward: 0.8663
2025-10-29 13:53:13,057 - INFO     -     - done: False
2025-10-29 13:53:13,057 - INFO     -     - truncated: False
2025-10-29 13:53:13,057 - INFO     -     - info: 19 keys
2025-10-29 13:53:13,057 - INFO     - ==========================================================================================

2025-10-29 13:53:13,062 - INFO     - 
==========================================================================================
2025-10-29 13:53:13,062 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:13,062 - INFO     - ==========================================================================================
2025-10-29 13:53:13,062 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:13,062 - INFO     -   Input action: 24 (type: int)
2025-10-29 13:53:13,062 - INFO     -   Available edges in graph: 28
2025-10-29 13:53:13,062 - INFO     -   Action index calculation:
2025-10-29 13:53:13,062 - INFO     -     - action % max(num_valid_edges, 1) = 24 % 28 = 24
2025-10-29 13:53:13,062 - INFO     -     - clamped to [0, 27]: 24
2025-10-29 13:53:13,062 - INFO     -   ✓ Extracted merge pair from edge 24: (11, 2)
2025-10-29 13:53:13,062 - INFO     -   ✓ Validation passed
2025-10-29 13:53:13,062 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:13,062 - INFO     -     - Total states before merge: 44
2025-10-29 13:53:13,062 - INFO     -     - Num nodes: 6
2025-10-29 13:53:13,062 - INFO     -     - Num edges: 28
2025-10-29 13:53:13,062 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:13,062 - INFO     -       - Node 11: 20 states
2025-10-29 13:53:13,062 - INFO     -       - Node 2: 2 states
2025-10-29 13:53:13,062 - INFO     -       - Expected product: 40 states
2025-10-29 13:53:13,062 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:13,067 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:53:13,067 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:13,068 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:53:13,169 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:13,169 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:13,169 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:53:13,170 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:13,170 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:13,170 - INFO     -   Calling graph_tracker.merge_nodes([11, 2])...
2025-10-29 13:53:13,171 - INFO     - Attempting merge of nodes 11 and 2...
2025-10-29 13:53:13,171 - INFO     - Successfully merged nodes into new node 12 with 40 states.
2025-10-29 13:53:13,171 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:13,171 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:13,171 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:53:13,171 - INFO     - 
================================================================================
2025-10-29 13:53:13,171 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:53:13,171 - INFO     - ================================================================================
2025-10-29 13:53:13,171 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:13,171 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:53:13,171 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:53:13,172 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:13,172 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:13,172 - INFO     -   - Raw ts1_f length: 20
2025-10-29 13:53:13,172 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:13,172 - INFO     -   - Raw f_after length: 40
2025-10-29 13:53:13,172 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:13,172 - INFO     -   - ts1_valid: 20 / 20 (removed 0)
2025-10-29 13:53:13,173 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:13,173 - INFO     -   - after_valid: 40 / 40 (removed 0)
2025-10-29 13:53:13,173 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:13,173 - INFO     -   - ts1_id: 11
2025-10-29 13:53:13,173 - INFO     -   - ts2_id: 2
2025-10-29 13:53:13,173 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:13,173 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:13,173 - INFO     -   - ts1_size: 20, ts2_size: 2
2025-10-29 13:53:13,173 - INFO     -   - Product space size: 40
2025-10-29 13:53:13,173 - INFO     -   - Using product state mapping
2025-10-29 13:53:13,173 - INFO     -   - f_before_product length: 40
2025-10-29 13:53:13,174 - INFO     -   - avg_f_before: 3.7250 (40 valid states)
2025-10-29 13:53:13,174 - INFO     -   - avg_f_after:  4.0750 (40 valid states)
2025-10-29 13:53:13,174 - INFO     -   - delta: 0.3500
2025-10-29 13:53:13,174 - INFO     -   - f_stability: 1.0 - |0.3500| / 3.7250 = 0.9060
2025-10-29 13:53:13,174 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:13,174 - INFO     -   - Compared 22 values
2025-10-29 13:53:13,174 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:13,174 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:13,174 - INFO     -   - states_before: 40
2025-10-29 13:53:13,174 - INFO     -   - states_after: 40
2025-10-29 13:53:13,174 - INFO     -   - delta_states: 0
2025-10-29 13:53:13,174 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:13,175 - INFO     -   - ts1_transitions: 128
2025-10-29 13:53:13,175 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:13,175 - INFO     -   - merged_transitions: 352
2025-10-29 13:53:13,175 - INFO     -   - transition_density_change: 5.4750
2025-10-29 13:53:13,175 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:13,175 - INFO     -   - search_signals present: True
2025-10-29 13:53:13,175 - INFO     -   - nodes_expanded: 40
2025-10-29 13:53:13,175 - INFO     -   - search_depth: 1
2025-10-29 13:53:13,175 - INFO     -   - solution_cost: 0
2025-10-29 13:53:13,175 - INFO     -   - branching_factor: 8.8000
2025-10-29 13:53:13,175 - INFO     -   - solution_found: True
2025-10-29 13:53:13,175 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:13,175 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:13,175 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:53:13,175 - INFO     -   - TS11(20) + TS2(2) → 40 states
2025-10-29 13:53:13,176 - INFO     -   - f_stability=0.906
2025-10-29 13:53:13,176 - INFO     -   - A* nodes_expanded=40
2025-10-29 13:53:13,176 - INFO     -   - solution_found=True
2025-10-29 13:53:13,176 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:13,176 - INFO     - 
  Extracted signals:
2025-10-29 13:53:13,176 - INFO     -     - iteration: 3
2025-10-29 13:53:13,176 - INFO     -     - states_before: 40
2025-10-29 13:53:13,176 - INFO     -     - states_after: 40
2025-10-29 13:53:13,176 - INFO     -     - delta_states: 0
2025-10-29 13:53:13,176 - INFO     -     - f_value_stability: 0.9060
2025-10-29 13:53:13,176 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:13,176 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:13,176 - INFO     -     - nodes_expanded: 40
2025-10-29 13:53:13,176 - INFO     -     - search_depth: 1
2025-10-29 13:53:13,176 - INFO     -     - solution_cost: 0
2025-10-29 13:53:13,176 - INFO     -     - branching_factor: 8.8000
2025-10-29 13:53:13,176 - INFO     -     - solution_found: True
2025-10-29 13:53:13,177 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:13,177 - WARNING  -     ⚠️  High branching factor: 8.8000
2025-10-29 13:53:13,177 - INFO     - 
  Computing reward:
2025-10-29 13:53:13,177 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:13,177 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:13,177 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:13,177 - INFO     -   [1] BRANCHING FACTOR: 8.800 → score 0.100 (high BF, minimal credit)
2025-10-29 13:53:13,177 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:53:13,177 - INFO     -   [3] F-VALUE STABILITY: 0.788
2025-10-29 13:53:13,177 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:13,177 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:13,177 - INFO     - 
  [COMPOSITE]: 0.608
2025-10-29 13:53:13,178 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:53:13,178 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:53:13,178 - INFO     -     + 0.350*0.788 (stability)
2025-10-29 13:53:13,178 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:13,178 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:13,178 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:13,178 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:13,178 - INFO     - 
  [FINAL REWARD]: 0.7166
2025-10-29 13:53:13,178 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:13,178 - INFO     -     ✓ Reward computed: 0.7166
2025-10-29 13:53:13,178 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:13,178 - INFO     -     - bf_score                       0.1000
2025-10-29 13:53:13,178 - INFO     -     - depth_score                    0.9119
2025-10-29 13:53:13,178 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:13,178 - INFO     -     - f_stability                    0.7884
2025-10-29 13:53:13,178 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:13,178 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:13,179 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:13,179 - INFO     -     - composite                      0.6083
2025-10-29 13:53:13,179 - INFO     -     - total                          0.7166
2025-10-29 13:53:13,179 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:13,179 - INFO     -   Num remaining nodes: 5
2025-10-29 13:53:13,179 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:53:13,179 - INFO     -   Done: False
2025-10-29 13:53:13,179 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:13,179 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:13,179 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:13,179 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:13,181 - INFO     -     - num_nodes: 5
2025-10-29 13:53:13,181 - INFO     -     - num_edges: 18
2025-10-29 13:53:13,181 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:13,181 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:53:13,181 - INFO     -   After: current_merge_step = 4
2025-10-29 13:53:13,181 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:13,181 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:13,181 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:13,182 - INFO     -   ✓ Step logged
2025-10-29 13:53:13,182 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:13,182 - INFO     -   Returning:
2025-10-29 13:53:13,182 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:13,182 - INFO     -     - reward: 0.7166
2025-10-29 13:53:13,182 - INFO     -     - done: False
2025-10-29 13:53:13,182 - INFO     -     - truncated: False
2025-10-29 13:53:13,182 - INFO     -     - info: 19 keys
2025-10-29 13:53:13,182 - INFO     - ==========================================================================================

2025-10-29 13:53:13,186 - INFO     - 
==========================================================================================
2025-10-29 13:53:13,186 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:13,186 - INFO     - ==========================================================================================
2025-10-29 13:53:13,187 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:13,187 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:53:13,187 - INFO     -   Available edges in graph: 18
2025-10-29 13:53:13,187 - INFO     -   Action index calculation:
2025-10-29 13:53:13,187 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 18 = 0
2025-10-29 13:53:13,187 - INFO     -     - clamped to [0, 17]: 0
2025-10-29 13:53:13,187 - INFO     -   ✓ Extracted merge pair from edge 0: (1, 5)
2025-10-29 13:53:13,187 - INFO     -   ✓ Validation passed
2025-10-29 13:53:13,187 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:13,187 - INFO     -     - Total states before merge: 62
2025-10-29 13:53:13,187 - INFO     -     - Num nodes: 5
2025-10-29 13:53:13,187 - INFO     -     - Num edges: 18
2025-10-29 13:53:13,187 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:13,187 - INFO     -       - Node 1: 2 states
2025-10-29 13:53:13,187 - INFO     -       - Node 5: 5 states
2025-10-29 13:53:13,187 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:13,187 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:13,193 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:53:13,193 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:13,193 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:53:13,294 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:13,294 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:13,294 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:53:13,295 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:13,295 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:13,295 - INFO     -   Calling graph_tracker.merge_nodes([1, 5])...
2025-10-29 13:53:13,295 - INFO     - Attempting merge of nodes 1 and 5...
2025-10-29 13:53:13,295 - INFO     - Successfully merged nodes into new node 13 with 10 states.
2025-10-29 13:53:13,295 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:13,295 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:13,295 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:53:13,295 - INFO     - 
================================================================================
2025-10-29 13:53:13,296 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:53:13,296 - INFO     - ================================================================================
2025-10-29 13:53:13,296 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:13,296 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:53:13,296 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:53:13,296 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:13,296 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:13,296 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:13,297 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:13,297 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:13,297 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:13,297 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:13,297 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:13,297 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:13,297 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:13,297 - INFO     -   - ts1_id: 1
2025-10-29 13:53:13,297 - INFO     -   - ts2_id: 5
2025-10-29 13:53:13,297 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:13,297 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:13,297 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:53:13,297 - INFO     -   - Product space size: 10
2025-10-29 13:53:13,297 - INFO     -   - Using product state mapping
2025-10-29 13:53:13,297 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:13,298 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:13,298 - INFO     -   - avg_f_after:  3.7000 (10 valid states)
2025-10-29 13:53:13,298 - INFO     -   - delta: 0.9000
2025-10-29 13:53:13,298 - INFO     -   - f_stability: 1.0 - |0.9000| / 2.8000 = 0.6786
2025-10-29 13:53:13,298 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:13,298 - INFO     -   - Compared 7 values
2025-10-29 13:53:13,298 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:13,298 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:13,298 - INFO     -   - states_before: 10
2025-10-29 13:53:13,298 - INFO     -   - states_after: 10
2025-10-29 13:53:13,298 - INFO     -   - delta_states: 0
2025-10-29 13:53:13,299 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:13,299 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:13,299 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:13,299 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:13,299 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:13,299 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:13,299 - INFO     -   - search_signals present: True
2025-10-29 13:53:13,299 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:13,300 - INFO     -   - search_depth: 2
2025-10-29 13:53:13,300 - INFO     -   - solution_cost: 2
2025-10-29 13:53:13,300 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:13,300 - INFO     -   - solution_found: True
2025-10-29 13:53:13,300 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:13,300 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:13,301 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:53:13,301 - INFO     -   - TS1(2) + TS5(5) → 10 states
2025-10-29 13:53:13,301 - INFO     -   - f_stability=0.679
2025-10-29 13:53:13,301 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:13,301 - INFO     -   - solution_found=True
2025-10-29 13:53:13,301 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:13,301 - INFO     - 
  Extracted signals:
2025-10-29 13:53:13,301 - INFO     -     - iteration: 4
2025-10-29 13:53:13,301 - INFO     -     - states_before: 10
2025-10-29 13:53:13,301 - INFO     -     - states_after: 10
2025-10-29 13:53:13,301 - INFO     -     - delta_states: 0
2025-10-29 13:53:13,301 - INFO     -     - f_value_stability: 0.6786
2025-10-29 13:53:13,301 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:13,302 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:13,302 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:13,302 - INFO     -     - search_depth: 2
2025-10-29 13:53:13,302 - INFO     -     - solution_cost: 2
2025-10-29 13:53:13,302 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:13,302 - INFO     -     - solution_found: True
2025-10-29 13:53:13,302 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:13,302 - INFO     - 
  Computing reward:
2025-10-29 13:53:13,302 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:13,302 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:13,302 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:13,302 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:13,302 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:13,303 - INFO     -   [3] F-VALUE STABILITY: 0.286
2025-10-29 13:53:13,303 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:13,303 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:13,303 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:53:13,303 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:13,303 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:13,303 - INFO     -     + 0.350*0.286 (stability)
2025-10-29 13:53:13,303 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:13,303 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:13,303 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:13,303 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:13,303 - INFO     - 
  [FINAL REWARD]: 0.3244
2025-10-29 13:53:13,303 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:13,303 - INFO     -     ✓ Reward computed: 0.3244
2025-10-29 13:53:13,303 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:13,303 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:13,304 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:13,304 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:13,304 - INFO     -     - f_stability                    0.2862
2025-10-29 13:53:13,304 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:13,304 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:13,304 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:13,304 - INFO     -     - composite                      0.5622
2025-10-29 13:53:13,304 - INFO     -     - total                          0.3244
2025-10-29 13:53:13,304 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:13,304 - INFO     -   Num remaining nodes: 4
2025-10-29 13:53:13,304 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:53:13,304 - INFO     -   Done: False
2025-10-29 13:53:13,305 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:13,305 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:13,305 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:13,306 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:13,306 - INFO     -     - num_nodes: 4
2025-10-29 13:53:13,306 - INFO     -     - num_edges: 12
2025-10-29 13:53:13,306 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:13,306 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:53:13,306 - INFO     -   After: current_merge_step = 5
2025-10-29 13:53:13,306 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:13,306 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:13,307 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:13,307 - INFO     -   ✓ Step logged
2025-10-29 13:53:13,307 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:13,307 - INFO     -   Returning:
2025-10-29 13:53:13,307 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:13,307 - INFO     -     - reward: 0.3244
2025-10-29 13:53:13,307 - INFO     -     - done: False
2025-10-29 13:53:13,308 - INFO     -     - truncated: False
2025-10-29 13:53:13,308 - INFO     -     - info: 19 keys
2025-10-29 13:53:13,308 - INFO     - ==========================================================================================

2025-10-29 13:53:13,313 - INFO     - 
==========================================================================================
2025-10-29 13:53:13,313 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:13,313 - INFO     - ==========================================================================================
2025-10-29 13:53:13,313 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:13,313 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:53:13,314 - INFO     -   Available edges in graph: 12
2025-10-29 13:53:13,314 - INFO     -   Action index calculation:
2025-10-29 13:53:13,314 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 12 = 3
2025-10-29 13:53:13,314 - INFO     -     - clamped to [0, 11]: 3
2025-10-29 13:53:13,314 - INFO     -   ✓ Extracted merge pair from edge 3: (10, 8)
2025-10-29 13:53:13,314 - INFO     -   ✓ Validation passed
2025-10-29 13:53:13,314 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:13,314 - INFO     -     - Total states before merge: 65
2025-10-29 13:53:13,314 - INFO     -     - Num nodes: 4
2025-10-29 13:53:13,314 - INFO     -     - Num edges: 12
2025-10-29 13:53:13,314 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:13,314 - INFO     -       - Node 10: 10 states
2025-10-29 13:53:13,314 - INFO     -       - Node 8: 5 states
2025-10-29 13:53:13,314 - INFO     -       - Expected product: 50 states
2025-10-29 13:53:13,315 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:13,321 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:53:13,321 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:13,321 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:53:13,422 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:13,422 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:13,422 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:53:13,423 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:13,423 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:13,423 - INFO     -   Calling graph_tracker.merge_nodes([10, 8])...
2025-10-29 13:53:13,423 - INFO     - Attempting merge of nodes 10 and 8...
2025-10-29 13:53:13,423 - INFO     - Successfully merged nodes into new node 14 with 50 states.
2025-10-29 13:53:13,423 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:13,423 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:13,423 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:53:13,424 - INFO     - 
================================================================================
2025-10-29 13:53:13,424 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:53:13,424 - INFO     - ================================================================================
2025-10-29 13:53:13,424 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:13,424 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:53:13,424 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:53:13,424 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:13,424 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:13,424 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:53:13,425 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:13,425 - INFO     -   - Raw f_after length: 50
2025-10-29 13:53:13,425 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:13,425 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:53:13,425 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:13,425 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:53:13,425 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:13,425 - INFO     -   - ts1_id: 10
2025-10-29 13:53:13,425 - INFO     -   - ts2_id: 8
2025-10-29 13:53:13,425 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:13,425 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:13,425 - INFO     -   - ts1_size: 10, ts2_size: 5
2025-10-29 13:53:13,425 - INFO     -   - Product space size: 50
2025-10-29 13:53:13,425 - INFO     -   - Using product state mapping
2025-10-29 13:53:13,425 - INFO     -   - f_before_product length: 50
2025-10-29 13:53:13,426 - INFO     -   - avg_f_before: 4.0800 (50 valid states)
2025-10-29 13:53:13,426 - INFO     -   - avg_f_after:  6.4400 (50 valid states)
2025-10-29 13:53:13,426 - INFO     -   - delta: 2.3600
2025-10-29 13:53:13,426 - INFO     -   - f_stability: 1.0 - |2.3600| / 4.0800 = 0.4216
2025-10-29 13:53:13,426 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:13,426 - INFO     -   - Compared 15 values
2025-10-29 13:53:13,426 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:13,426 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:13,426 - INFO     -   - states_before: 50
2025-10-29 13:53:13,426 - INFO     -   - states_after: 50
2025-10-29 13:53:13,426 - INFO     -   - delta_states: 0
2025-10-29 13:53:13,426 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:13,426 - INFO     -   - ts1_transitions: 27
2025-10-29 13:53:13,427 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:13,427 - INFO     -   - merged_transitions: 195
2025-10-29 13:53:13,427 - INFO     -   - transition_density_change: 3.1000
2025-10-29 13:53:13,427 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:13,427 - INFO     -   - search_signals present: True
2025-10-29 13:53:13,427 - INFO     -   - nodes_expanded: 50
2025-10-29 13:53:13,427 - INFO     -   - search_depth: 3
2025-10-29 13:53:13,427 - INFO     -   - solution_cost: 2
2025-10-29 13:53:13,427 - INFO     -   - branching_factor: 3.9000
2025-10-29 13:53:13,428 - INFO     -   - solution_found: True
2025-10-29 13:53:13,428 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:13,428 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:13,428 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:53:13,428 - INFO     -   - TS10(10) + TS8(5) → 50 states
2025-10-29 13:53:13,428 - INFO     -   - f_stability=0.422
2025-10-29 13:53:13,428 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:53:13,428 - INFO     -   - solution_found=True
2025-10-29 13:53:13,428 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:13,428 - INFO     - 
  Extracted signals:
2025-10-29 13:53:13,428 - INFO     -     - iteration: 5
2025-10-29 13:53:13,428 - INFO     -     - states_before: 50
2025-10-29 13:53:13,429 - INFO     -     - states_after: 50
2025-10-29 13:53:13,429 - INFO     -     - delta_states: 0
2025-10-29 13:53:13,429 - INFO     -     - f_value_stability: 0.4216
2025-10-29 13:53:13,429 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:13,429 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:13,429 - INFO     -     - nodes_expanded: 50
2025-10-29 13:53:13,429 - INFO     -     - search_depth: 3
2025-10-29 13:53:13,429 - INFO     -     - solution_cost: 2
2025-10-29 13:53:13,429 - INFO     -     - branching_factor: 3.9000
2025-10-29 13:53:13,429 - INFO     -     - solution_found: True
2025-10-29 13:53:13,429 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:13,429 - INFO     - 
  Computing reward:
2025-10-29 13:53:13,429 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:13,429 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:13,429 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:13,429 - INFO     -   [1] BRANCHING FACTOR: 3.900 → score 0.580 (tolerable)
2025-10-29 13:53:13,430 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:13,430 - INFO     -   [3] F-VALUE STABILITY: 0.532
2025-10-29 13:53:13,430 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:13,430 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:13,430 - INFO     - 
  [COMPOSITE]: 0.645
2025-10-29 13:53:13,430 - INFO     -     = 0.300*0.580 (bf)
2025-10-29 13:53:13,430 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:13,430 - INFO     -     + 0.350*0.532 (stability)
2025-10-29 13:53:13,430 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:13,430 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:13,430 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:13,430 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:13,430 - INFO     - 
  [FINAL REWARD]: 0.6901
2025-10-29 13:53:13,431 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:13,431 - INFO     -     ✓ Reward computed: 0.6901
2025-10-29 13:53:13,431 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:13,431 - INFO     -     - bf_score                       0.5800
2025-10-29 13:53:13,431 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:13,431 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:13,431 - INFO     -     - f_stability                    0.5323
2025-10-29 13:53:13,431 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:13,431 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:13,431 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:13,431 - INFO     -     - composite                      0.6450
2025-10-29 13:53:13,431 - INFO     -     - total                          0.6901
2025-10-29 13:53:13,431 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:13,431 - INFO     -   Num remaining nodes: 3
2025-10-29 13:53:13,431 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:53:13,431 - INFO     -   Done: False
2025-10-29 13:53:13,432 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:13,432 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:13,432 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:13,432 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:13,432 - INFO     -     - num_nodes: 3
2025-10-29 13:53:13,432 - INFO     -     - num_edges: 6
2025-10-29 13:53:13,432 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:13,432 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:53:13,432 - INFO     -   After: current_merge_step = 6
2025-10-29 13:53:13,433 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:13,433 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:13,433 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:13,433 - INFO     -   ✓ Step logged
2025-10-29 13:53:13,433 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:13,433 - INFO     -   Returning:
2025-10-29 13:53:13,433 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:13,433 - INFO     -     - reward: 0.6901
2025-10-29 13:53:13,433 - INFO     -     - done: False
2025-10-29 13:53:13,433 - INFO     -     - truncated: False
2025-10-29 13:53:13,434 - INFO     -     - info: 19 keys
2025-10-29 13:53:13,434 - INFO     - ==========================================================================================

2025-10-29 13:53:13,437 - INFO     - 
==========================================================================================
2025-10-29 13:53:13,437 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:13,437 - INFO     - ==========================================================================================
2025-10-29 13:53:13,437 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:13,437 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:53:13,438 - INFO     -   Available edges in graph: 6
2025-10-29 13:53:13,438 - INFO     -   Action index calculation:
2025-10-29 13:53:13,438 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 6 = 1
2025-10-29 13:53:13,438 - INFO     -     - clamped to [0, 5]: 1
2025-10-29 13:53:13,438 - INFO     -   ✓ Extracted merge pair from edge 1: (12, 14)
2025-10-29 13:53:13,438 - INFO     -   ✓ Validation passed
2025-10-29 13:53:13,438 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:13,438 - INFO     -     - Total states before merge: 100
2025-10-29 13:53:13,438 - INFO     -     - Num nodes: 3
2025-10-29 13:53:13,438 - INFO     -     - Num edges: 6
2025-10-29 13:53:13,438 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:13,438 - INFO     -       - Node 12: 40 states
2025-10-29 13:53:13,438 - INFO     -       - Node 14: 50 states
2025-10-29 13:53:13,438 - INFO     -       - Expected product: 2000 states
2025-10-29 13:53:13,438 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:13,446 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:53:13,446 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:13,446 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:53:13,547 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:13,547 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:13,547 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:53:13,556 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:53:13,557 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:13,557 - INFO     -   Calling graph_tracker.merge_nodes([12, 14])...
2025-10-29 13:53:13,557 - INFO     - Attempting merge of nodes 12 and 14...
2025-10-29 13:53:13,557 - INFO     - Successfully merged nodes into new node 15 with 2000 states.
2025-10-29 13:53:13,557 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:13,557 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:13,557 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:53:13,557 - INFO     - 
================================================================================
2025-10-29 13:53:13,557 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:53:13,557 - INFO     - ================================================================================
2025-10-29 13:53:13,557 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:13,557 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:53:13,557 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:53:13,558 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:13,558 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:13,558 - INFO     -   - Raw ts1_f length: 20
2025-10-29 13:53:13,558 - INFO     -   - Raw ts2_f length: 20
2025-10-29 13:53:13,558 - INFO     -   - Raw f_after length: 400
2025-10-29 13:53:13,558 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:13,558 - INFO     -   - ts1_valid: 20 / 20 (removed 0)
2025-10-29 13:53:13,558 - INFO     -   - ts2_valid: 20 / 20 (removed -20)
2025-10-29 13:53:13,559 - INFO     -   - after_valid: 400 / 400 (removed 0)
2025-10-29 13:53:13,559 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:13,559 - INFO     -   - ts1_id: 12
2025-10-29 13:53:13,559 - INFO     -   - ts2_id: 14
2025-10-29 13:53:13,559 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:13,559 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:13,559 - INFO     -   - ts1_size: 20, ts2_size: 20
2025-10-29 13:53:13,559 - INFO     -   - Product space size: 400
2025-10-29 13:53:13,559 - INFO     -   - Using product state mapping
2025-10-29 13:53:13,560 - INFO     -   - f_before_product length: 400
2025-10-29 13:53:13,561 - INFO     -   - avg_f_before: 4.7975 (400 valid states)
2025-10-29 13:53:13,561 - INFO     -   - avg_f_after:  8.7525 (400 valid states)
2025-10-29 13:53:13,561 - INFO     -   - delta: 3.9550
2025-10-29 13:53:13,561 - INFO     -   - f_stability: 1.0 - |3.9550| / 4.7975 = 0.1756
2025-10-29 13:53:13,561 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:13,561 - INFO     -   - Compared 40 values
2025-10-29 13:53:13,561 - INFO     -   - Significant changes (> 5.0): 8
2025-10-29 13:53:13,561 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:13,561 - INFO     -   - states_before: 400
2025-10-29 13:53:13,561 - INFO     -   - states_after: 400
2025-10-29 13:53:13,561 - INFO     -   - delta_states: 0
2025-10-29 13:53:13,562 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:13,562 - INFO     -   - ts1_transitions: 128
2025-10-29 13:53:13,562 - INFO     -   - ts2_transitions: 97
2025-10-29 13:53:13,562 - INFO     -   - merged_transitions: 3540
2025-10-29 13:53:13,562 - INFO     -   - transition_density_change: 8.2875
2025-10-29 13:53:13,562 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:13,562 - INFO     -   - search_signals present: True
2025-10-29 13:53:13,562 - INFO     -   - nodes_expanded: 400
2025-10-29 13:53:13,562 - INFO     -   - search_depth: 4
2025-10-29 13:53:13,562 - INFO     -   - solution_cost: 0
2025-10-29 13:53:13,562 - INFO     -   - branching_factor: 8.8500
2025-10-29 13:53:13,562 - INFO     -   - solution_found: True
2025-10-29 13:53:13,562 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:13,563 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:13,563 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:53:13,563 - INFO     -   - TS12(20) + TS14(20) → 400 states
2025-10-29 13:53:13,563 - INFO     -   - f_stability=0.176
2025-10-29 13:53:13,563 - INFO     -   - A* nodes_expanded=400
2025-10-29 13:53:13,563 - INFO     -   - solution_found=True
2025-10-29 13:53:13,563 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:13,563 - INFO     - 
  Extracted signals:
2025-10-29 13:53:13,563 - INFO     -     - iteration: 6
2025-10-29 13:53:13,563 - INFO     -     - states_before: 400
2025-10-29 13:53:13,563 - INFO     -     - states_after: 400
2025-10-29 13:53:13,563 - INFO     -     - delta_states: 0
2025-10-29 13:53:13,563 - INFO     -     - f_value_stability: 0.1756
2025-10-29 13:53:13,563 - INFO     -     - num_significant_f_changes: 8
2025-10-29 13:53:13,563 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:13,564 - INFO     -     - nodes_expanded: 400
2025-10-29 13:53:13,564 - INFO     -     - search_depth: 4
2025-10-29 13:53:13,564 - INFO     -     - solution_cost: 0
2025-10-29 13:53:13,564 - INFO     -     - branching_factor: 8.8500
2025-10-29 13:53:13,564 - INFO     -     - solution_found: True
2025-10-29 13:53:13,564 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:13,564 - WARNING  -     ⚠️  Poor F-stability: 0.1756
2025-10-29 13:53:13,564 - WARNING  -     ⚠️  High branching factor: 8.8500
2025-10-29 13:53:13,564 - INFO     - 
  Computing reward:
2025-10-29 13:53:13,564 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:13,564 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:13,564 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:13,564 - INFO     -   [1] BRANCHING FACTOR: 8.850 → score 0.100 (high BF, minimal credit)
2025-10-29 13:53:13,564 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:53:13,565 - INFO     -   [3] F-VALUE STABILITY: 0.064
2025-10-29 13:53:13,565 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:13,565 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:13,565 - INFO     - 
  [COMPOSITE]: 0.332
2025-10-29 13:53:13,565 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:53:13,565 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:53:13,565 - INFO     -     + 0.350*0.064 (stability)
2025-10-29 13:53:13,565 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:13,565 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:13,566 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:13,566 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:13,566 - INFO     - 
  [FINAL REWARD]: -0.1369
2025-10-29 13:53:13,566 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:13,566 - INFO     -     ✓ Reward computed: -0.1369
2025-10-29 13:53:13,566 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:13,566 - INFO     -     - bf_score                       0.1000
2025-10-29 13:53:13,566 - INFO     -     - depth_score                    0.7953
2025-10-29 13:53:13,566 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:13,566 - INFO     -     - f_stability                    0.0643
2025-10-29 13:53:13,566 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:13,566 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:13,567 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:13,567 - INFO     -     - composite                      0.3316
2025-10-29 13:53:13,567 - INFO     -     - total                          -0.1369
2025-10-29 13:53:13,567 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:13,567 - INFO     -   Num remaining nodes: 2
2025-10-29 13:53:13,567 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:53:13,567 - INFO     -   Done: False
2025-10-29 13:53:13,567 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:13,567 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:13,567 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:13,567 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:13,568 - INFO     -     - num_nodes: 2
2025-10-29 13:53:13,568 - INFO     -     - num_edges: 2
2025-10-29 13:53:13,568 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:13,568 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:53:13,568 - INFO     -   After: current_merge_step = 7
2025-10-29 13:53:13,568 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:13,568 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:13,568 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:13,568 - INFO     -   ✓ Step logged
2025-10-29 13:53:13,569 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:13,569 - INFO     -   Returning:
2025-10-29 13:53:13,569 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:13,569 - INFO     -     - reward: -0.1369
2025-10-29 13:53:13,569 - INFO     -     - done: False
2025-10-29 13:53:13,569 - INFO     -     - truncated: False
2025-10-29 13:53:13,569 - INFO     -     - info: 19 keys
2025-10-29 13:53:13,569 - INFO     - ==========================================================================================

2025-10-29 13:53:13,573 - INFO     - 
==========================================================================================
2025-10-29 13:53:13,574 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:13,574 - INFO     - ==========================================================================================
2025-10-29 13:53:13,574 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:13,574 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:53:13,574 - INFO     -   Available edges in graph: 2
2025-10-29 13:53:13,574 - INFO     -   Action index calculation:
2025-10-29 13:53:13,574 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 2 = 1
2025-10-29 13:53:13,574 - INFO     -     - clamped to [0, 1]: 1
2025-10-29 13:53:13,574 - INFO     -   ✓ Extracted merge pair from edge 1: (15, 13)
2025-10-29 13:53:13,574 - INFO     -   ✓ Validation passed
2025-10-29 13:53:13,574 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:13,574 - INFO     -     - Total states before merge: 2010
2025-10-29 13:53:13,574 - INFO     -     - Num nodes: 2
2025-10-29 13:53:13,574 - INFO     -     - Num edges: 2
2025-10-29 13:53:13,574 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:13,574 - INFO     -       - Node 15: 2000 states
2025-10-29 13:53:13,574 - INFO     -       - Node 13: 10 states
2025-10-29 13:53:13,574 - INFO     -       - Expected product: 20000 states
2025-10-29 13:53:13,574 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:13,581 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:53:13,581 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:13,581 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:53:13,682 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:13,682 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:13,682 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:53:13,716 - INFO     -   ✓ TS file received after 0.03s
2025-10-29 13:53:13,716 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:13,717 - INFO     -   Calling graph_tracker.merge_nodes([15, 13])...
2025-10-29 13:53:13,717 - INFO     - Attempting merge of nodes 15 and 13...
2025-10-29 13:53:13,717 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:53:13,717 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:13,717 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:13,717 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:53:13,717 - INFO     - 
================================================================================
2025-10-29 13:53:13,717 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:53:13,717 - INFO     - ================================================================================
2025-10-29 13:53:13,717 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:13,717 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:53:13,717 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:53:23,811 - ERROR    - Timeout waiting for valid JSON at C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:53:23,815 - ERROR    - [LOAD] ✗ Failed to load before or after data
2025-10-29 13:53:23,815 - WARNING  -   ⚠️ Failed to extract merge info, using defaults
2025-10-29 13:53:23,815 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:23,815 - INFO     -   Num remaining nodes: 1
2025-10-29 13:53:23,815 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:53:23,815 - INFO     -   Done: True
2025-10-29 13:53:23,817 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:53:23,817 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:23,818 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:23,818 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:23,818 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:23,818 - INFO     -     - num_nodes: 1
2025-10-29 13:53:23,818 - INFO     -     - num_edges: 0
2025-10-29 13:53:23,818 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:23,818 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:53:23,818 - INFO     -   After: current_merge_step = 8
2025-10-29 13:53:23,818 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:23,819 - INFO     -   ✓ Step logged
2025-10-29 13:53:23,819 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:23,819 - INFO     -   Returning:
2025-10-29 13:53:23,819 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:23,819 - INFO     -     - reward: 0.0000
2025-10-29 13:53:23,819 - INFO     -     - done: True
2025-10-29 13:53:23,819 - INFO     -     - truncated: False
2025-10-29 13:53:23,819 - INFO     -     - info: 3 keys
2025-10-29 13:53:23,819 - INFO     - ==========================================================================================

2025-10-29 13:53:23,894 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:53:23,902 - INFO     - [Handshake] Building FD command:
2025-10-29 13:53:23,902 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:23,902 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_03.pddl
2025-10-29 13:53:23,902 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:53:23,905 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:24,508 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:24,508 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:24,508 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:24,822 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:24,822 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:24,822 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:24,823 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:24,823 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:24,823 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:24,823 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:24,823 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:24,823 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:24,823 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:24,823 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:24,823 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:24,823 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:24,823 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:24,823 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:24,823 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:24,823 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:24,823 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:24,823 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:24,823 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:24,824 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:24,824 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:24,824 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:24,825 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:24,829 - INFO     - Added edge (0, 1)
2025-10-29 13:53:24,830 - INFO     - Added edge (0, 2)
2025-10-29 13:53:24,830 - INFO     - Added edge (0, 3)
2025-10-29 13:53:24,830 - INFO     - Added edge (0, 4)
2025-10-29 13:53:24,830 - INFO     - Added edge (0, 5)
2025-10-29 13:53:24,830 - INFO     - Added edge (0, 6)
2025-10-29 13:53:24,830 - INFO     - Added edge (0, 7)
2025-10-29 13:53:24,830 - INFO     - Added edge (0, 8)
2025-10-29 13:53:24,830 - INFO     - Added edge (1, 0)
2025-10-29 13:53:24,830 - INFO     - Added edge (1, 2)
2025-10-29 13:53:24,830 - INFO     - Added edge (1, 3)
2025-10-29 13:53:24,830 - INFO     - Added edge (1, 4)
2025-10-29 13:53:24,830 - INFO     - Added edge (1, 5)
2025-10-29 13:53:24,830 - INFO     - Added edge (1, 6)
2025-10-29 13:53:24,830 - INFO     - Added edge (1, 7)
2025-10-29 13:53:24,830 - INFO     - Added edge (1, 8)
2025-10-29 13:53:24,831 - INFO     - Added edge (2, 0)
2025-10-29 13:53:24,831 - INFO     - Added edge (2, 1)
2025-10-29 13:53:24,831 - INFO     - Added edge (2, 3)
2025-10-29 13:53:24,831 - INFO     - Added edge (2, 4)
2025-10-29 13:53:24,831 - INFO     - Added edge (2, 5)
2025-10-29 13:53:24,831 - INFO     - Added edge (2, 6)
2025-10-29 13:53:24,831 - INFO     - Added edge (2, 7)
2025-10-29 13:53:24,831 - INFO     - Added edge (2, 8)
2025-10-29 13:53:24,831 - INFO     - Added edge (3, 0)
2025-10-29 13:53:24,831 - INFO     - Added edge (3, 1)
2025-10-29 13:53:24,831 - INFO     - Added edge (3, 2)
2025-10-29 13:53:24,831 - INFO     - Added edge (3, 4)
2025-10-29 13:53:24,831 - INFO     - Added edge (3, 5)
2025-10-29 13:53:24,831 - INFO     - Added edge (3, 6)
2025-10-29 13:53:24,831 - INFO     - Added edge (3, 7)
2025-10-29 13:53:24,831 - INFO     - Added edge (3, 8)
2025-10-29 13:53:24,831 - INFO     - Added edge (4, 0)
2025-10-29 13:53:24,831 - INFO     - Added edge (4, 1)
2025-10-29 13:53:24,831 - INFO     - Added edge (4, 2)
2025-10-29 13:53:24,831 - INFO     - Added edge (4, 3)
2025-10-29 13:53:24,831 - INFO     - Added edge (4, 5)
2025-10-29 13:53:24,831 - INFO     - Added edge (4, 6)
2025-10-29 13:53:24,831 - INFO     - Added edge (4, 7)
2025-10-29 13:53:24,832 - INFO     - Added edge (4, 8)
2025-10-29 13:53:24,832 - INFO     - Added edge (5, 0)
2025-10-29 13:53:24,832 - INFO     - Added edge (5, 1)
2025-10-29 13:53:24,832 - INFO     - Added edge (5, 2)
2025-10-29 13:53:24,832 - INFO     - Added edge (5, 3)
2025-10-29 13:53:24,832 - INFO     - Added edge (5, 4)
2025-10-29 13:53:24,832 - INFO     - Added edge (6, 0)
2025-10-29 13:53:24,832 - INFO     - Added edge (6, 1)
2025-10-29 13:53:24,832 - INFO     - Added edge (6, 2)
2025-10-29 13:53:24,832 - INFO     - Added edge (6, 3)
2025-10-29 13:53:24,832 - INFO     - Added edge (6, 4)
2025-10-29 13:53:24,832 - INFO     - Added edge (7, 0)
2025-10-29 13:53:24,832 - INFO     - Added edge (7, 1)
2025-10-29 13:53:24,832 - INFO     - Added edge (7, 2)
2025-10-29 13:53:24,832 - INFO     - Added edge (7, 3)
2025-10-29 13:53:24,833 - INFO     - Added edge (7, 4)
2025-10-29 13:53:24,833 - INFO     - Added edge (8, 0)
2025-10-29 13:53:24,833 - INFO     - Added edge (8, 1)
2025-10-29 13:53:24,833 - INFO     - Added edge (8, 2)
2025-10-29 13:53:24,833 - INFO     - Added edge (8, 3)
2025-10-29 13:53:24,833 - INFO     - Added edge (8, 4)
2025-10-29 13:53:24,834 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:24,841 - INFO     - 
==========================================================================================
2025-10-29 13:53:24,841 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:24,841 - INFO     - ==========================================================================================
2025-10-29 13:53:24,841 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:24,841 - INFO     -   Input action: 38 (type: int)
2025-10-29 13:53:24,841 - INFO     -   Available edges in graph: 60
2025-10-29 13:53:24,841 - INFO     -   Action index calculation:
2025-10-29 13:53:24,841 - INFO     -     - action % max(num_valid_edges, 1) = 38 % 60 = 38
2025-10-29 13:53:24,842 - INFO     -     - clamped to [0, 59]: 38
2025-10-29 13:53:24,842 - INFO     -   ✓ Extracted merge pair from edge 38: (4, 7)
2025-10-29 13:53:24,842 - INFO     -   ✓ Validation passed
2025-10-29 13:53:24,842 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:24,842 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:24,842 - INFO     -     - Num nodes: 9
2025-10-29 13:53:24,842 - INFO     -     - Num edges: 60
2025-10-29 13:53:24,842 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:24,842 - INFO     -       - Node 4: 2 states
2025-10-29 13:53:24,842 - INFO     -       - Node 7: 5 states
2025-10-29 13:53:24,842 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:24,842 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:24,847 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:53:24,847 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:24,847 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:53:24,948 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:24,948 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:24,948 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:53:24,949 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:24,949 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:24,949 - INFO     -   Calling graph_tracker.merge_nodes([4, 7])...
2025-10-29 13:53:24,949 - INFO     - Attempting merge of nodes 4 and 7...
2025-10-29 13:53:24,949 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:53:24,949 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:24,950 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:24,950 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:53:24,950 - INFO     - 
================================================================================
2025-10-29 13:53:24,950 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:53:24,950 - INFO     - ================================================================================
2025-10-29 13:53:24,950 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:24,950 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:53:24,951 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:53:24,951 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:24,951 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:24,951 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:24,952 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:24,952 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:24,952 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:24,952 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:24,953 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:24,953 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:24,953 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:24,953 - INFO     -   - ts1_id: 4
2025-10-29 13:53:24,953 - INFO     -   - ts2_id: 7
2025-10-29 13:53:24,953 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:24,953 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:24,953 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:53:24,953 - INFO     -   - Product space size: 10
2025-10-29 13:53:24,954 - INFO     -   - Using product state mapping
2025-10-29 13:53:24,954 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:24,954 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:24,954 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:53:24,954 - INFO     -   - delta: 0.8000
2025-10-29 13:53:24,954 - INFO     -   - f_stability: 1.0 - |0.8000| / 2.8000 = 0.7143
2025-10-29 13:53:24,954 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:24,955 - INFO     -   - Compared 7 values
2025-10-29 13:53:24,955 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:24,955 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:24,955 - INFO     -   - states_before: 10
2025-10-29 13:53:24,955 - INFO     -   - states_after: 10
2025-10-29 13:53:24,955 - INFO     -   - delta_states: 0
2025-10-29 13:53:24,955 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:24,955 - INFO     -   - ts1_transitions: 3
2025-10-29 13:53:24,955 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:24,955 - INFO     -   - merged_transitions: 27
2025-10-29 13:53:24,956 - INFO     -   - transition_density_change: 1.1000
2025-10-29 13:53:24,956 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:24,956 - INFO     -   - search_signals present: True
2025-10-29 13:53:24,956 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:24,956 - INFO     -   - search_depth: 2
2025-10-29 13:53:24,956 - INFO     -   - solution_cost: 2
2025-10-29 13:53:24,956 - INFO     -   - branching_factor: 2.7000
2025-10-29 13:53:24,956 - INFO     -   - solution_found: True
2025-10-29 13:53:24,956 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:24,956 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:24,956 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:53:24,956 - INFO     -   - TS4(2) + TS7(5) → 10 states
2025-10-29 13:53:24,956 - INFO     -   - f_stability=0.714
2025-10-29 13:53:24,958 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:24,958 - INFO     -   - solution_found=True
2025-10-29 13:53:24,958 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:24,958 - INFO     - 
  Extracted signals:
2025-10-29 13:53:24,958 - INFO     -     - iteration: 0
2025-10-29 13:53:24,958 - INFO     -     - states_before: 10
2025-10-29 13:53:24,958 - INFO     -     - states_after: 10
2025-10-29 13:53:24,958 - INFO     -     - delta_states: 0
2025-10-29 13:53:24,958 - INFO     -     - f_value_stability: 0.7143
2025-10-29 13:53:24,958 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:24,958 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:24,958 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:24,958 - INFO     -     - search_depth: 2
2025-10-29 13:53:24,958 - INFO     -     - solution_cost: 2
2025-10-29 13:53:24,959 - INFO     -     - branching_factor: 2.7000
2025-10-29 13:53:24,959 - INFO     -     - solution_found: True
2025-10-29 13:53:24,959 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:24,959 - INFO     - 
  Computing reward:
2025-10-29 13:53:24,959 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:24,959 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:24,959 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:24,959 - INFO     -   [1] BRANCHING FACTOR: 2.700 → score 0.745 (good (in comfort zone))
2025-10-29 13:53:24,959 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:24,959 - INFO     -   [3] F-VALUE STABILITY: 0.459
2025-10-29 13:53:24,959 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:24,959 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:24,960 - INFO     - 
  [COMPOSITE]: 0.676
2025-10-29 13:53:24,960 - INFO     -     = 0.300*0.745 (bf)
2025-10-29 13:53:24,960 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:24,960 - INFO     -     + 0.350*0.459 (stability)
2025-10-29 13:53:24,960 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:24,960 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:24,960 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:24,960 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:24,960 - INFO     - 
  [FINAL REWARD]: 0.6523
2025-10-29 13:53:24,960 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:24,960 - INFO     -     ✓ Reward computed: 0.6523
2025-10-29 13:53:24,960 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:24,960 - INFO     -     - bf_score                       0.7450
2025-10-29 13:53:24,960 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:24,960 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:24,960 - INFO     -     - f_stability                    0.4588
2025-10-29 13:53:24,960 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:24,961 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:24,961 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:24,961 - INFO     -     - composite                      0.6762
2025-10-29 13:53:24,961 - INFO     -     - total                          0.6523
2025-10-29 13:53:24,961 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:24,961 - INFO     -   Num remaining nodes: 8
2025-10-29 13:53:24,961 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:53:24,961 - INFO     -   Done: False
2025-10-29 13:53:24,961 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:24,962 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:24,963 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:24,963 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:24,963 - INFO     -     - num_nodes: 8
2025-10-29 13:53:24,963 - INFO     -     - num_edges: 50
2025-10-29 13:53:24,963 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:24,963 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:53:24,963 - INFO     -   After: current_merge_step = 1
2025-10-29 13:53:24,963 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:24,963 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:24,963 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:24,964 - INFO     -   ✓ Step logged
2025-10-29 13:53:24,964 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:24,964 - INFO     -   Returning:
2025-10-29 13:53:24,964 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:24,964 - INFO     -     - reward: 0.6523
2025-10-29 13:53:24,964 - INFO     -     - done: False
2025-10-29 13:53:24,964 - INFO     -     - truncated: False
2025-10-29 13:53:24,964 - INFO     -     - info: 19 keys
2025-10-29 13:53:24,964 - INFO     - ==========================================================================================

2025-10-29 13:53:24,969 - INFO     - 
==========================================================================================
2025-10-29 13:53:24,969 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:24,969 - INFO     - ==========================================================================================
2025-10-29 13:53:24,969 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:24,969 - INFO     -   Input action: 6 (type: int)
2025-10-29 13:53:24,969 - INFO     -   Available edges in graph: 50
2025-10-29 13:53:24,969 - INFO     -   Action index calculation:
2025-10-29 13:53:24,969 - INFO     -     - action % max(num_valid_edges, 1) = 6 % 50 = 6
2025-10-29 13:53:24,969 - INFO     -     - clamped to [0, 49]: 6
2025-10-29 13:53:24,969 - INFO     -   ✓ Extracted merge pair from edge 6: (0, 9)
2025-10-29 13:53:24,969 - INFO     -   ✓ Validation passed
2025-10-29 13:53:24,969 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:24,969 - INFO     -     - Total states before merge: 33
2025-10-29 13:53:24,969 - INFO     -     - Num nodes: 8
2025-10-29 13:53:24,969 - INFO     -     - Num edges: 50
2025-10-29 13:53:24,970 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:24,970 - INFO     -       - Node 0: 2 states
2025-10-29 13:53:24,970 - INFO     -       - Node 9: 10 states
2025-10-29 13:53:24,970 - INFO     -       - Expected product: 20 states
2025-10-29 13:53:24,970 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:24,975 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:53:24,975 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:24,975 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:53:25,077 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:25,077 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:25,077 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:53:25,077 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:25,077 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:25,078 - INFO     -   Calling graph_tracker.merge_nodes([0, 9])...
2025-10-29 13:53:25,078 - INFO     - Attempting merge of nodes 0 and 9...
2025-10-29 13:53:25,078 - INFO     - Successfully merged nodes into new node 10 with 20 states.
2025-10-29 13:53:25,078 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:25,078 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:25,078 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:53:25,078 - INFO     - 
================================================================================
2025-10-29 13:53:25,078 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:53:25,078 - INFO     - ================================================================================
2025-10-29 13:53:25,078 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:25,078 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:53:25,079 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:53:25,079 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:25,079 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:25,079 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:25,079 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:25,080 - INFO     -   - Raw f_after length: 20
2025-10-29 13:53:25,080 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:25,080 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:25,080 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:25,080 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:53:25,080 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:25,080 - INFO     -   - ts1_id: 0
2025-10-29 13:53:25,080 - INFO     -   - ts2_id: 9
2025-10-29 13:53:25,080 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:25,080 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:25,080 - INFO     -   - ts1_size: 2, ts2_size: 10
2025-10-29 13:53:25,080 - INFO     -   - Product space size: 20
2025-10-29 13:53:25,080 - INFO     -   - Using product state mapping
2025-10-29 13:53:25,080 - INFO     -   - f_before_product length: 20
2025-10-29 13:53:25,081 - INFO     -   - avg_f_before: 3.6000 (20 valid states)
2025-10-29 13:53:25,081 - INFO     -   - avg_f_after:  3.8500 (20 valid states)
2025-10-29 13:53:25,081 - INFO     -   - delta: 0.2500
2025-10-29 13:53:25,081 - INFO     -   - f_stability: 1.0 - |0.2500| / 3.6000 = 0.9306
2025-10-29 13:53:25,081 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:25,081 - INFO     -   - Compared 12 values
2025-10-29 13:53:25,081 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:25,081 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:25,082 - INFO     -   - states_before: 20
2025-10-29 13:53:25,082 - INFO     -   - states_after: 20
2025-10-29 13:53:25,082 - INFO     -   - delta_states: 0
2025-10-29 13:53:25,082 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:25,082 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:25,082 - INFO     -   - ts2_transitions: 27
2025-10-29 13:53:25,082 - INFO     -   - merged_transitions: 97
2025-10-29 13:53:25,082 - INFO     -   - transition_density_change: 3.2500
2025-10-29 13:53:25,082 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:25,082 - INFO     -   - search_signals present: True
2025-10-29 13:53:25,082 - INFO     -   - nodes_expanded: 20
2025-10-29 13:53:25,082 - INFO     -   - search_depth: 2
2025-10-29 13:53:25,082 - INFO     -   - solution_cost: 2
2025-10-29 13:53:25,082 - INFO     -   - branching_factor: 4.8500
2025-10-29 13:53:25,082 - INFO     -   - solution_found: True
2025-10-29 13:53:25,082 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:25,084 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:25,084 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:53:25,084 - INFO     -   - TS0(2) + TS9(10) → 20 states
2025-10-29 13:53:25,084 - INFO     -   - f_stability=0.931
2025-10-29 13:53:25,084 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:53:25,084 - INFO     -   - solution_found=True
2025-10-29 13:53:25,084 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:25,084 - INFO     - 
  Extracted signals:
2025-10-29 13:53:25,084 - INFO     -     - iteration: 1
2025-10-29 13:53:25,084 - INFO     -     - states_before: 20
2025-10-29 13:53:25,084 - INFO     -     - states_after: 20
2025-10-29 13:53:25,084 - INFO     -     - delta_states: 0
2025-10-29 13:53:25,084 - INFO     -     - f_value_stability: 0.9306
2025-10-29 13:53:25,084 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:25,085 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:25,085 - INFO     -     - nodes_expanded: 20
2025-10-29 13:53:25,085 - INFO     -     - search_depth: 2
2025-10-29 13:53:25,085 - INFO     -     - solution_cost: 2
2025-10-29 13:53:25,085 - INFO     -     - branching_factor: 4.8500
2025-10-29 13:53:25,085 - INFO     -     - solution_found: True
2025-10-29 13:53:25,085 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:25,085 - INFO     - 
  Computing reward:
2025-10-29 13:53:25,085 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:25,085 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:25,085 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:25,085 - INFO     -   [1] BRANCHING FACTOR: 4.850 → score 0.453 (tolerable)
2025-10-29 13:53:25,085 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:25,086 - INFO     -   [3] F-VALUE STABILITY: 0.815
2025-10-29 13:53:25,086 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:25,086 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:25,086 - INFO     - 
  [COMPOSITE]: 0.713
2025-10-29 13:53:25,086 - INFO     -     = 0.300*0.453 (bf)
2025-10-29 13:53:25,086 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:25,086 - INFO     -     + 0.350*0.815 (stability)
2025-10-29 13:53:25,086 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:25,086 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:25,086 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:25,086 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:25,086 - INFO     - 
  [FINAL REWARD]: 0.9263
2025-10-29 13:53:25,086 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:25,086 - INFO     -     ✓ Reward computed: 0.9263
2025-10-29 13:53:25,086 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:25,086 - INFO     -     - bf_score                       0.4533
2025-10-29 13:53:25,086 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:25,086 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:25,086 - INFO     -     - f_stability                    0.8146
2025-10-29 13:53:25,086 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:25,086 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:25,086 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:25,086 - INFO     -     - composite                      0.7132
2025-10-29 13:53:25,086 - INFO     -     - total                          0.9263
2025-10-29 13:53:25,086 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:25,087 - INFO     -   Num remaining nodes: 7
2025-10-29 13:53:25,087 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:53:25,087 - INFO     -   Done: False
2025-10-29 13:53:25,087 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:25,088 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:25,088 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:25,088 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:25,088 - INFO     -     - num_nodes: 7
2025-10-29 13:53:25,088 - INFO     -     - num_edges: 36
2025-10-29 13:53:25,088 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:25,088 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:53:25,088 - INFO     -   After: current_merge_step = 2
2025-10-29 13:53:25,088 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:25,088 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:25,088 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:25,089 - INFO     -   ✓ Step logged
2025-10-29 13:53:25,089 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:25,089 - INFO     -   Returning:
2025-10-29 13:53:25,089 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:25,089 - INFO     -     - reward: 0.9263
2025-10-29 13:53:25,089 - INFO     -     - done: False
2025-10-29 13:53:25,089 - INFO     -     - truncated: False
2025-10-29 13:53:25,089 - INFO     -     - info: 19 keys
2025-10-29 13:53:25,089 - INFO     - ==========================================================================================

2025-10-29 13:53:25,094 - INFO     - 
==========================================================================================
2025-10-29 13:53:25,094 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:25,094 - INFO     - ==========================================================================================
2025-10-29 13:53:25,094 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:25,094 - INFO     -   Input action: 16 (type: int)
2025-10-29 13:53:25,094 - INFO     -   Available edges in graph: 36
2025-10-29 13:53:25,094 - INFO     -   Action index calculation:
2025-10-29 13:53:25,094 - INFO     -     - action % max(num_valid_edges, 1) = 16 % 36 = 16
2025-10-29 13:53:25,094 - INFO     -     - clamped to [0, 35]: 16
2025-10-29 13:53:25,094 - INFO     -   ✓ Extracted merge pair from edge 16: (3, 8)
2025-10-29 13:53:25,095 - INFO     -   ✓ Validation passed
2025-10-29 13:53:25,095 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:25,095 - INFO     -     - Total states before merge: 41
2025-10-29 13:53:25,095 - INFO     -     - Num nodes: 7
2025-10-29 13:53:25,095 - INFO     -     - Num edges: 36
2025-10-29 13:53:25,095 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:25,095 - INFO     -       - Node 3: 2 states
2025-10-29 13:53:25,095 - INFO     -       - Node 8: 5 states
2025-10-29 13:53:25,095 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:25,095 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:25,105 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:53:25,105 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:25,105 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:53:25,207 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:25,207 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:25,207 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:53:25,207 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:25,208 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:25,208 - INFO     -   Calling graph_tracker.merge_nodes([3, 8])...
2025-10-29 13:53:25,208 - INFO     - Attempting merge of nodes 3 and 8...
2025-10-29 13:53:25,208 - INFO     - Successfully merged nodes into new node 11 with 10 states.
2025-10-29 13:53:25,208 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:25,208 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:25,208 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:53:25,208 - INFO     - 
================================================================================
2025-10-29 13:53:25,208 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:53:25,208 - INFO     - ================================================================================
2025-10-29 13:53:25,208 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:25,208 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:53:25,208 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:53:25,209 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:25,209 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:25,209 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:25,209 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:25,209 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:25,209 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:25,209 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:25,209 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:25,209 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:25,209 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:25,209 - INFO     -   - ts1_id: 3
2025-10-29 13:53:25,209 - INFO     -   - ts2_id: 8
2025-10-29 13:53:25,209 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:25,210 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:25,210 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:53:25,210 - INFO     -   - Product space size: 10
2025-10-29 13:53:25,210 - INFO     -   - Using product state mapping
2025-10-29 13:53:25,210 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:25,210 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:53:25,210 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:53:25,210 - INFO     -   - delta: 0.7000
2025-10-29 13:53:25,210 - INFO     -   - f_stability: 1.0 - |0.7000| / 2.9000 = 0.7586
2025-10-29 13:53:25,210 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:25,210 - INFO     -   - Compared 7 values
2025-10-29 13:53:25,210 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:25,210 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:25,211 - INFO     -   - states_before: 10
2025-10-29 13:53:25,211 - INFO     -   - states_after: 10
2025-10-29 13:53:25,211 - INFO     -   - delta_states: 0
2025-10-29 13:53:25,211 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:25,211 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:25,211 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:25,211 - INFO     -   - merged_transitions: 37
2025-10-29 13:53:25,211 - INFO     -   - transition_density_change: 1.9000
2025-10-29 13:53:25,211 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:25,211 - INFO     -   - search_signals present: True
2025-10-29 13:53:25,211 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:25,211 - INFO     -   - search_depth: 2
2025-10-29 13:53:25,211 - INFO     -   - solution_cost: 0
2025-10-29 13:53:25,211 - INFO     -   - branching_factor: 3.7000
2025-10-29 13:53:25,211 - INFO     -   - solution_found: True
2025-10-29 13:53:25,211 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:25,212 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:25,212 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:53:25,212 - INFO     -   - TS3(2) + TS8(5) → 10 states
2025-10-29 13:53:25,212 - INFO     -   - f_stability=0.759
2025-10-29 13:53:25,212 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:25,212 - INFO     -   - solution_found=True
2025-10-29 13:53:25,212 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:25,212 - INFO     - 
  Extracted signals:
2025-10-29 13:53:25,212 - INFO     -     - iteration: 2
2025-10-29 13:53:25,212 - INFO     -     - states_before: 10
2025-10-29 13:53:25,212 - INFO     -     - states_after: 10
2025-10-29 13:53:25,212 - INFO     -     - delta_states: 0
2025-10-29 13:53:25,212 - INFO     -     - f_value_stability: 0.7586
2025-10-29 13:53:25,212 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:25,212 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:25,213 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:25,213 - INFO     -     - search_depth: 2
2025-10-29 13:53:25,213 - INFO     -     - solution_cost: 0
2025-10-29 13:53:25,213 - INFO     -     - branching_factor: 3.7000
2025-10-29 13:53:25,213 - INFO     -     - solution_found: True
2025-10-29 13:53:25,213 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:25,213 - INFO     - 
  Computing reward:
2025-10-29 13:53:25,213 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:25,213 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:25,213 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:25,213 - INFO     -   [1] BRANCHING FACTOR: 3.700 → score 0.607 (tolerable)
2025-10-29 13:53:25,213 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:25,214 - INFO     -   [3] F-VALUE STABILITY: 0.251
2025-10-29 13:53:25,214 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:25,214 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:25,214 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:53:25,214 - INFO     -     = 0.300*0.607 (bf)
2025-10-29 13:53:25,214 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:25,214 - INFO     -     + 0.350*0.251 (stability)
2025-10-29 13:53:25,214 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:25,214 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:25,214 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:25,214 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:25,214 - INFO     - 
  [FINAL REWARD]: 0.3236
2025-10-29 13:53:25,214 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:25,214 - INFO     -     ✓ Reward computed: 0.3236
2025-10-29 13:53:25,214 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:25,214 - INFO     -     - bf_score                       0.6067
2025-10-29 13:53:25,215 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:25,215 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:25,215 - INFO     -     - f_stability                    0.2507
2025-10-29 13:53:25,215 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:25,215 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:25,215 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:25,215 - INFO     -     - composite                      0.5618
2025-10-29 13:53:25,215 - INFO     -     - total                          0.3236
2025-10-29 13:53:25,215 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:25,215 - INFO     -   Num remaining nodes: 6
2025-10-29 13:53:25,215 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:53:25,215 - INFO     -   Done: False
2025-10-29 13:53:25,215 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:25,216 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:25,216 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:25,216 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:25,217 - INFO     -     - num_nodes: 6
2025-10-29 13:53:25,217 - INFO     -     - num_edges: 28
2025-10-29 13:53:25,217 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:25,217 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:53:25,217 - INFO     -   After: current_merge_step = 3
2025-10-29 13:53:25,217 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:25,217 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:25,217 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:25,220 - INFO     -   ✓ Step logged
2025-10-29 13:53:25,220 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:25,220 - INFO     -   Returning:
2025-10-29 13:53:25,220 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:25,220 - INFO     -     - reward: 0.3236
2025-10-29 13:53:25,220 - INFO     -     - done: False
2025-10-29 13:53:25,220 - INFO     -     - truncated: False
2025-10-29 13:53:25,220 - INFO     -     - info: 19 keys
2025-10-29 13:53:25,220 - INFO     - ==========================================================================================

2025-10-29 13:53:25,224 - INFO     - 
==========================================================================================
2025-10-29 13:53:25,224 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:25,224 - INFO     - ==========================================================================================
2025-10-29 13:53:25,224 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:25,224 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:53:25,224 - INFO     -   Available edges in graph: 28
2025-10-29 13:53:25,224 - INFO     -   Action index calculation:
2025-10-29 13:53:25,224 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 28 = 2
2025-10-29 13:53:25,224 - INFO     -     - clamped to [0, 27]: 2
2025-10-29 13:53:25,224 - INFO     -   ✓ Extracted merge pair from edge 2: (1, 6)
2025-10-29 13:53:25,224 - INFO     -   ✓ Validation passed
2025-10-29 13:53:25,225 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:25,225 - INFO     -     - Total states before merge: 44
2025-10-29 13:53:25,225 - INFO     -     - Num nodes: 6
2025-10-29 13:53:25,225 - INFO     -     - Num edges: 28
2025-10-29 13:53:25,225 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:25,225 - INFO     -       - Node 1: 2 states
2025-10-29 13:53:25,225 - INFO     -       - Node 6: 5 states
2025-10-29 13:53:25,225 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:25,225 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:25,231 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:53:25,231 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:25,231 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:53:25,332 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:25,332 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:25,332 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:53:25,333 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:25,333 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:25,333 - INFO     -   Calling graph_tracker.merge_nodes([1, 6])...
2025-10-29 13:53:25,333 - INFO     - Attempting merge of nodes 1 and 6...
2025-10-29 13:53:25,334 - INFO     - Successfully merged nodes into new node 12 with 10 states.
2025-10-29 13:53:25,334 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:25,334 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:25,334 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:53:25,334 - INFO     - 
================================================================================
2025-10-29 13:53:25,334 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:53:25,334 - INFO     - ================================================================================
2025-10-29 13:53:25,334 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:25,334 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:53:25,334 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:53:25,335 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:25,335 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:25,335 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:25,335 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:25,335 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:25,335 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:25,335 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:25,335 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:25,335 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:25,337 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:25,337 - INFO     -   - ts1_id: 1
2025-10-29 13:53:25,337 - INFO     -   - ts2_id: 6
2025-10-29 13:53:25,337 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:25,337 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:25,337 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:53:25,337 - INFO     -   - Product space size: 10
2025-10-29 13:53:25,337 - INFO     -   - Using product state mapping
2025-10-29 13:53:25,337 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:25,337 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:53:25,338 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:53:25,338 - INFO     -   - delta: 0.7000
2025-10-29 13:53:25,338 - INFO     -   - f_stability: 1.0 - |0.7000| / 2.9000 = 0.7586
2025-10-29 13:53:25,338 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:25,338 - INFO     -   - Compared 7 values
2025-10-29 13:53:25,338 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:25,338 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:25,338 - INFO     -   - states_before: 10
2025-10-29 13:53:25,338 - INFO     -   - states_after: 10
2025-10-29 13:53:25,338 - INFO     -   - delta_states: 0
2025-10-29 13:53:25,338 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:25,338 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:25,339 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:25,339 - INFO     -   - merged_transitions: 37
2025-10-29 13:53:25,339 - INFO     -   - transition_density_change: 1.9000
2025-10-29 13:53:25,339 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:25,339 - INFO     -   - search_signals present: True
2025-10-29 13:53:25,339 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:25,339 - INFO     -   - search_depth: 2
2025-10-29 13:53:25,339 - INFO     -   - solution_cost: 0
2025-10-29 13:53:25,339 - INFO     -   - branching_factor: 3.7000
2025-10-29 13:53:25,339 - INFO     -   - solution_found: True
2025-10-29 13:53:25,339 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:25,339 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:25,340 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:53:25,340 - INFO     -   - TS1(2) + TS6(5) → 10 states
2025-10-29 13:53:25,340 - INFO     -   - f_stability=0.759
2025-10-29 13:53:25,340 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:25,340 - INFO     -   - solution_found=True
2025-10-29 13:53:25,340 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:25,340 - INFO     - 
  Extracted signals:
2025-10-29 13:53:25,340 - INFO     -     - iteration: 3
2025-10-29 13:53:25,341 - INFO     -     - states_before: 10
2025-10-29 13:53:25,341 - INFO     -     - states_after: 10
2025-10-29 13:53:25,341 - INFO     -     - delta_states: 0
2025-10-29 13:53:25,341 - INFO     -     - f_value_stability: 0.7586
2025-10-29 13:53:25,341 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:25,341 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:25,341 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:25,341 - INFO     -     - search_depth: 2
2025-10-29 13:53:25,341 - INFO     -     - solution_cost: 0
2025-10-29 13:53:25,341 - INFO     -     - branching_factor: 3.7000
2025-10-29 13:53:25,342 - INFO     -     - solution_found: True
2025-10-29 13:53:25,342 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:25,342 - INFO     - 
  Computing reward:
2025-10-29 13:53:25,342 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:25,342 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:25,342 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:25,342 - INFO     -   [1] BRANCHING FACTOR: 3.700 → score 0.607 (tolerable)
2025-10-29 13:53:25,342 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:25,342 - INFO     -   [3] F-VALUE STABILITY: 0.251
2025-10-29 13:53:25,343 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:25,343 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:25,343 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:53:25,343 - INFO     -     = 0.300*0.607 (bf)
2025-10-29 13:53:25,343 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:25,343 - INFO     -     + 0.350*0.251 (stability)
2025-10-29 13:53:25,343 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:25,343 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:25,344 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:25,344 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:25,344 - INFO     - 
  [FINAL REWARD]: 0.3236
2025-10-29 13:53:25,344 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:25,344 - INFO     -     ✓ Reward computed: 0.3236
2025-10-29 13:53:25,344 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:25,344 - INFO     -     - bf_score                       0.6067
2025-10-29 13:53:25,344 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:25,344 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:25,344 - INFO     -     - f_stability                    0.2507
2025-10-29 13:53:25,345 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:25,345 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:25,345 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:25,345 - INFO     -     - composite                      0.5618
2025-10-29 13:53:25,345 - INFO     -     - total                          0.3236
2025-10-29 13:53:25,345 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:25,345 - INFO     -   Num remaining nodes: 5
2025-10-29 13:53:25,345 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:53:25,345 - INFO     -   Done: False
2025-10-29 13:53:25,345 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:25,346 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:25,346 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:25,346 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:25,346 - INFO     -     - num_nodes: 5
2025-10-29 13:53:25,346 - INFO     -     - num_edges: 20
2025-10-29 13:53:25,346 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:25,346 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:53:25,346 - INFO     -   After: current_merge_step = 4
2025-10-29 13:53:25,347 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:25,347 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:25,347 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:25,347 - INFO     -   ✓ Step logged
2025-10-29 13:53:25,347 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:25,347 - INFO     -   Returning:
2025-10-29 13:53:25,347 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:25,348 - INFO     -     - reward: 0.3236
2025-10-29 13:53:25,348 - INFO     -     - done: False
2025-10-29 13:53:25,348 - INFO     -     - truncated: False
2025-10-29 13:53:25,348 - INFO     -     - info: 19 keys
2025-10-29 13:53:25,348 - INFO     - ==========================================================================================

2025-10-29 13:53:25,353 - INFO     - 
==========================================================================================
2025-10-29 13:53:25,353 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:25,353 - INFO     - ==========================================================================================
2025-10-29 13:53:25,353 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:25,353 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:53:25,354 - INFO     -   Available edges in graph: 20
2025-10-29 13:53:25,354 - INFO     -   Action index calculation:
2025-10-29 13:53:25,354 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 20 = 2
2025-10-29 13:53:25,354 - INFO     -     - clamped to [0, 19]: 2
2025-10-29 13:53:25,354 - INFO     -   ✓ Extracted merge pair from edge 2: (2, 11)
2025-10-29 13:53:25,354 - INFO     -   ✓ Validation passed
2025-10-29 13:53:25,354 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:25,354 - INFO     -     - Total states before merge: 47
2025-10-29 13:53:25,354 - INFO     -     - Num nodes: 5
2025-10-29 13:53:25,354 - INFO     -     - Num edges: 20
2025-10-29 13:53:25,354 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:25,354 - INFO     -       - Node 2: 2 states
2025-10-29 13:53:25,354 - INFO     -       - Node 11: 10 states
2025-10-29 13:53:25,354 - INFO     -       - Expected product: 20 states
2025-10-29 13:53:25,354 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:25,362 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:53:25,362 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:25,362 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:53:25,462 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:25,462 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:25,462 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:53:25,464 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:25,464 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:25,464 - INFO     -   Calling graph_tracker.merge_nodes([2, 11])...
2025-10-29 13:53:25,464 - INFO     - Attempting merge of nodes 2 and 11...
2025-10-29 13:53:25,464 - INFO     - Successfully merged nodes into new node 13 with 20 states.
2025-10-29 13:53:25,465 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:25,465 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:25,465 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:53:25,465 - INFO     - 
================================================================================
2025-10-29 13:53:25,465 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:53:25,465 - INFO     - ================================================================================
2025-10-29 13:53:25,465 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:25,465 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:53:25,465 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:53:25,466 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:25,466 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:25,466 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:25,466 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:25,467 - INFO     -   - Raw f_after length: 20
2025-10-29 13:53:25,467 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:25,467 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:25,467 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:25,467 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:53:25,467 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:25,467 - INFO     -   - ts1_id: 2
2025-10-29 13:53:25,467 - INFO     -   - ts2_id: 11
2025-10-29 13:53:25,467 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:25,467 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:25,467 - INFO     -   - ts1_size: 2, ts2_size: 10
2025-10-29 13:53:25,468 - INFO     -   - Product space size: 20
2025-10-29 13:53:25,468 - INFO     -   - Using product state mapping
2025-10-29 13:53:25,468 - INFO     -   - f_before_product length: 20
2025-10-29 13:53:25,468 - INFO     -   - avg_f_before: 3.6500 (20 valid states)
2025-10-29 13:53:25,468 - INFO     -   - avg_f_after:  4.0000 (20 valid states)
2025-10-29 13:53:25,468 - INFO     -   - delta: 0.3500
2025-10-29 13:53:25,468 - INFO     -   - f_stability: 1.0 - |0.3500| / 3.6500 = 0.9041
2025-10-29 13:53:25,468 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:25,469 - INFO     -   - Compared 12 values
2025-10-29 13:53:25,469 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:25,469 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:25,469 - INFO     -   - states_before: 20
2025-10-29 13:53:25,469 - INFO     -   - states_after: 20
2025-10-29 13:53:25,469 - INFO     -   - delta_states: 0
2025-10-29 13:53:25,469 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:25,469 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:25,469 - INFO     -   - ts2_transitions: 37
2025-10-29 13:53:25,469 - INFO     -   - merged_transitions: 122
2025-10-29 13:53:25,469 - INFO     -   - transition_density_change: 4.0000
2025-10-29 13:53:25,469 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:25,470 - INFO     -   - search_signals present: True
2025-10-29 13:53:25,470 - INFO     -   - nodes_expanded: 20
2025-10-29 13:53:25,470 - INFO     -   - search_depth: 2
2025-10-29 13:53:25,470 - INFO     -   - solution_cost: 0
2025-10-29 13:53:25,470 - INFO     -   - branching_factor: 6.1000
2025-10-29 13:53:25,470 - INFO     -   - solution_found: True
2025-10-29 13:53:25,470 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:25,470 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:25,470 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:53:25,470 - INFO     -   - TS2(2) + TS11(10) → 20 states
2025-10-29 13:53:25,470 - INFO     -   - f_stability=0.904
2025-10-29 13:53:25,470 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:53:25,470 - INFO     -   - solution_found=True
2025-10-29 13:53:25,470 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:25,471 - INFO     - 
  Extracted signals:
2025-10-29 13:53:25,471 - INFO     -     - iteration: 4
2025-10-29 13:53:25,471 - INFO     -     - states_before: 20
2025-10-29 13:53:25,471 - INFO     -     - states_after: 20
2025-10-29 13:53:25,471 - INFO     -     - delta_states: 0
2025-10-29 13:53:25,471 - INFO     -     - f_value_stability: 0.9041
2025-10-29 13:53:25,471 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:25,471 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:25,471 - INFO     -     - nodes_expanded: 20
2025-10-29 13:53:25,471 - INFO     -     - search_depth: 2
2025-10-29 13:53:25,471 - INFO     -     - solution_cost: 0
2025-10-29 13:53:25,471 - INFO     -     - branching_factor: 6.1000
2025-10-29 13:53:25,471 - INFO     -     - solution_found: True
2025-10-29 13:53:25,471 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:25,471 - INFO     - 
  Computing reward:
2025-10-29 13:53:25,471 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:25,471 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:25,471 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:25,472 - INFO     -   [1] BRANCHING FACTOR: 6.100 → score 0.290 (high BF, minimal credit)
2025-10-29 13:53:25,472 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:25,472 - INFO     -   [3] F-VALUE STABILITY: 0.879
2025-10-29 13:53:25,472 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:25,472 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:25,472 - INFO     - 
  [COMPOSITE]: 0.687
2025-10-29 13:53:25,472 - INFO     -     = 0.300*0.290 (bf)
2025-10-29 13:53:25,472 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:25,472 - INFO     -     + 0.350*0.879 (stability)
2025-10-29 13:53:25,472 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:25,472 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:25,472 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:25,473 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:25,473 - INFO     - 
  [FINAL REWARD]: 0.8734
2025-10-29 13:53:25,473 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:25,473 - INFO     -     ✓ Reward computed: 0.8734
2025-10-29 13:53:25,473 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:25,473 - INFO     -     - bf_score                       0.2900
2025-10-29 13:53:25,473 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:25,473 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:25,473 - INFO     -     - f_stability                    0.8789
2025-10-29 13:53:25,473 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:25,473 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:25,473 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:25,473 - INFO     -     - composite                      0.6867
2025-10-29 13:53:25,473 - INFO     -     - total                          0.8734
2025-10-29 13:53:25,473 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:25,473 - INFO     -   Num remaining nodes: 4
2025-10-29 13:53:25,473 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:53:25,474 - INFO     -   Done: False
2025-10-29 13:53:25,474 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:25,474 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:25,474 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:25,474 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:25,474 - INFO     -     - num_nodes: 4
2025-10-29 13:53:25,474 - INFO     -     - num_edges: 12
2025-10-29 13:53:25,475 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:25,475 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:53:25,475 - INFO     -   After: current_merge_step = 5
2025-10-29 13:53:25,475 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:25,475 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:25,475 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:25,475 - INFO     -   ✓ Step logged
2025-10-29 13:53:25,475 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:25,476 - INFO     -   Returning:
2025-10-29 13:53:25,476 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:25,476 - INFO     -     - reward: 0.8734
2025-10-29 13:53:25,476 - INFO     -     - done: False
2025-10-29 13:53:25,476 - INFO     -     - truncated: False
2025-10-29 13:53:25,476 - INFO     -     - info: 19 keys
2025-10-29 13:53:25,476 - INFO     - ==========================================================================================

2025-10-29 13:53:25,481 - INFO     - 
==========================================================================================
2025-10-29 13:53:25,481 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:25,481 - INFO     - ==========================================================================================
2025-10-29 13:53:25,481 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:25,481 - INFO     -   Input action: 4 (type: int)
2025-10-29 13:53:25,481 - INFO     -   Available edges in graph: 12
2025-10-29 13:53:25,481 - INFO     -   Action index calculation:
2025-10-29 13:53:25,481 - INFO     -     - action % max(num_valid_edges, 1) = 4 % 12 = 4
2025-10-29 13:53:25,481 - INFO     -     - clamped to [0, 11]: 4
2025-10-29 13:53:25,481 - INFO     -   ✓ Extracted merge pair from edge 4: (10, 12)
2025-10-29 13:53:25,481 - INFO     -   ✓ Validation passed
2025-10-29 13:53:25,481 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:25,481 - INFO     -     - Total states before merge: 55
2025-10-29 13:53:25,481 - INFO     -     - Num nodes: 4
2025-10-29 13:53:25,481 - INFO     -     - Num edges: 12
2025-10-29 13:53:25,481 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:25,481 - INFO     -       - Node 10: 20 states
2025-10-29 13:53:25,481 - INFO     -       - Node 12: 10 states
2025-10-29 13:53:25,482 - INFO     -       - Expected product: 200 states
2025-10-29 13:53:25,482 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:25,488 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:53:25,489 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:25,489 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:53:25,589 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:25,589 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:25,589 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:53:25,592 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:25,592 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:25,592 - INFO     -   Calling graph_tracker.merge_nodes([10, 12])...
2025-10-29 13:53:25,592 - INFO     - Attempting merge of nodes 10 and 12...
2025-10-29 13:53:25,592 - INFO     - Successfully merged nodes into new node 14 with 200 states.
2025-10-29 13:53:25,592 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:25,592 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:25,592 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:53:25,592 - INFO     - 
================================================================================
2025-10-29 13:53:25,593 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:53:25,593 - INFO     - ================================================================================
2025-10-29 13:53:25,593 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:25,593 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:53:25,593 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:53:25,593 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:25,594 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:25,594 - INFO     -   - Raw ts1_f length: 20
2025-10-29 13:53:25,594 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:25,594 - INFO     -   - Raw f_after length: 200
2025-10-29 13:53:25,594 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:25,594 - INFO     -   - ts1_valid: 20 / 20 (removed 0)
2025-10-29 13:53:25,594 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:25,594 - INFO     -   - after_valid: 200 / 200 (removed 0)
2025-10-29 13:53:25,594 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:25,594 - INFO     -   - ts1_id: 10
2025-10-29 13:53:25,594 - INFO     -   - ts2_id: 12
2025-10-29 13:53:25,594 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:25,595 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:25,595 - INFO     -   - ts1_size: 20, ts2_size: 10
2025-10-29 13:53:25,595 - INFO     -   - Product space size: 200
2025-10-29 13:53:25,595 - INFO     -   - Using product state mapping
2025-10-29 13:53:25,595 - INFO     -   - f_before_product length: 200
2025-10-29 13:53:25,596 - INFO     -   - avg_f_before: 4.7050 (200 valid states)
2025-10-29 13:53:25,596 - INFO     -   - avg_f_after:  7.7350 (200 valid states)
2025-10-29 13:53:25,596 - INFO     -   - delta: 3.0300
2025-10-29 13:53:25,596 - INFO     -   - f_stability: 1.0 - |3.0300| / 4.7050 = 0.3560
2025-10-29 13:53:25,596 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:25,597 - INFO     -   - Compared 30 values
2025-10-29 13:53:25,597 - INFO     -   - Significant changes (> 5.0): 11
2025-10-29 13:53:25,597 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:25,597 - INFO     -   - states_before: 200
2025-10-29 13:53:25,597 - INFO     -   - states_after: 200
2025-10-29 13:53:25,597 - INFO     -   - delta_states: 0
2025-10-29 13:53:25,597 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:25,597 - INFO     -   - ts1_transitions: 97
2025-10-29 13:53:25,597 - INFO     -   - ts2_transitions: 37
2025-10-29 13:53:25,597 - INFO     -   - merged_transitions: 1480
2025-10-29 13:53:25,597 - INFO     -   - transition_density_change: 6.7300
2025-10-29 13:53:25,597 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:25,597 - INFO     -   - search_signals present: True
2025-10-29 13:53:25,598 - INFO     -   - nodes_expanded: 200
2025-10-29 13:53:25,598 - INFO     -   - search_depth: 4
2025-10-29 13:53:25,598 - INFO     -   - solution_cost: 2
2025-10-29 13:53:25,598 - INFO     -   - branching_factor: 7.4000
2025-10-29 13:53:25,598 - INFO     -   - solution_found: True
2025-10-29 13:53:25,598 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:25,598 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:25,598 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:53:25,598 - INFO     -   - TS10(20) + TS12(10) → 200 states
2025-10-29 13:53:25,598 - INFO     -   - f_stability=0.356
2025-10-29 13:53:25,599 - INFO     -   - A* nodes_expanded=200
2025-10-29 13:53:25,599 - INFO     -   - solution_found=True
2025-10-29 13:53:25,599 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:25,599 - INFO     - 
  Extracted signals:
2025-10-29 13:53:25,599 - INFO     -     - iteration: 5
2025-10-29 13:53:25,599 - INFO     -     - states_before: 200
2025-10-29 13:53:25,599 - INFO     -     - states_after: 200
2025-10-29 13:53:25,599 - INFO     -     - delta_states: 0
2025-10-29 13:53:25,599 - INFO     -     - f_value_stability: 0.3560
2025-10-29 13:53:25,599 - INFO     -     - num_significant_f_changes: 11
2025-10-29 13:53:25,599 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:25,599 - INFO     -     - nodes_expanded: 200
2025-10-29 13:53:25,599 - INFO     -     - search_depth: 4
2025-10-29 13:53:25,599 - INFO     -     - solution_cost: 2
2025-10-29 13:53:25,599 - INFO     -     - branching_factor: 7.4000
2025-10-29 13:53:25,599 - INFO     -     - solution_found: True
2025-10-29 13:53:25,599 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:25,599 - INFO     - 
  Computing reward:
2025-10-29 13:53:25,599 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:25,599 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:25,601 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:25,601 - INFO     -   [1] BRANCHING FACTOR: 7.400 → score 0.160 (high BF, minimal credit)
2025-10-29 13:53:25,601 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:53:25,601 - INFO     -   [3] F-VALUE STABILITY: 0.121
2025-10-29 13:53:25,601 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:25,601 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:25,602 - INFO     - 
  [COMPOSITE]: 0.369
2025-10-29 13:53:25,602 - INFO     -     = 0.300*0.160 (bf)
2025-10-29 13:53:25,602 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:53:25,602 - INFO     -     + 0.350*0.121 (stability)
2025-10-29 13:53:25,602 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:25,602 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:25,602 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:25,602 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:25,602 - INFO     - 
  [FINAL REWARD]: -0.0614
2025-10-29 13:53:25,602 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:25,602 - INFO     -     ✓ Reward computed: -0.0614
2025-10-29 13:53:25,602 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:25,602 - INFO     -     - bf_score                       0.1600
2025-10-29 13:53:25,602 - INFO     -     - depth_score                    0.7953
2025-10-29 13:53:25,602 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:25,602 - INFO     -     - f_stability                    0.1206
2025-10-29 13:53:25,602 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:25,602 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:25,602 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:25,602 - INFO     -     - composite                      0.3693
2025-10-29 13:53:25,603 - INFO     -     - total                          -0.0614
2025-10-29 13:53:25,603 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:25,603 - INFO     -   Num remaining nodes: 3
2025-10-29 13:53:25,603 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:53:25,603 - INFO     -   Done: False
2025-10-29 13:53:25,603 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:25,604 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:25,604 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:25,604 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:25,604 - INFO     -     - num_nodes: 3
2025-10-29 13:53:25,604 - INFO     -     - num_edges: 6
2025-10-29 13:53:25,604 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:25,604 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:53:25,604 - INFO     -   After: current_merge_step = 6
2025-10-29 13:53:25,604 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:25,604 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:25,605 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:25,605 - INFO     -   ✓ Step logged
2025-10-29 13:53:25,605 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:25,605 - INFO     -   Returning:
2025-10-29 13:53:25,605 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:25,605 - INFO     -     - reward: -0.0614
2025-10-29 13:53:25,605 - INFO     -     - done: False
2025-10-29 13:53:25,605 - INFO     -     - truncated: False
2025-10-29 13:53:25,606 - INFO     -     - info: 19 keys
2025-10-29 13:53:25,606 - INFO     - ==========================================================================================

2025-10-29 13:53:25,610 - INFO     - 
==========================================================================================
2025-10-29 13:53:25,610 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:25,610 - INFO     - ==========================================================================================
2025-10-29 13:53:25,610 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:25,610 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:53:25,610 - INFO     -   Available edges in graph: 6
2025-10-29 13:53:25,610 - INFO     -   Action index calculation:
2025-10-29 13:53:25,610 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 6 = 2
2025-10-29 13:53:25,610 - INFO     -     - clamped to [0, 5]: 2
2025-10-29 13:53:25,610 - INFO     -   ✓ Extracted merge pair from edge 2: (13, 5)
2025-10-29 13:53:25,610 - INFO     -   ✓ Validation passed
2025-10-29 13:53:25,610 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:25,610 - INFO     -     - Total states before merge: 225
2025-10-29 13:53:25,610 - INFO     -     - Num nodes: 3
2025-10-29 13:53:25,610 - INFO     -     - Num edges: 6
2025-10-29 13:53:25,610 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:25,610 - INFO     -       - Node 13: 20 states
2025-10-29 13:53:25,611 - INFO     -       - Node 5: 5 states
2025-10-29 13:53:25,611 - INFO     -       - Expected product: 100 states
2025-10-29 13:53:25,611 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:25,616 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:53:25,616 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:25,616 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:53:25,716 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:25,717 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:25,717 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:53:25,717 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:25,718 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:25,718 - INFO     -   Calling graph_tracker.merge_nodes([13, 5])...
2025-10-29 13:53:25,718 - INFO     - Attempting merge of nodes 13 and 5...
2025-10-29 13:53:25,718 - INFO     - Successfully merged nodes into new node 15 with 100 states.
2025-10-29 13:53:25,718 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:25,718 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:25,718 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:53:25,718 - INFO     - 
================================================================================
2025-10-29 13:53:25,718 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:53:25,718 - INFO     - ================================================================================
2025-10-29 13:53:25,718 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:25,718 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:53:25,718 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:53:25,719 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:25,719 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:25,719 - INFO     -   - Raw ts1_f length: 20
2025-10-29 13:53:25,719 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:25,719 - INFO     -   - Raw f_after length: 100
2025-10-29 13:53:25,719 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:25,719 - INFO     -   - ts1_valid: 20 / 20 (removed 0)
2025-10-29 13:53:25,719 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:25,719 - INFO     -   - after_valid: 100 / 100 (removed 0)
2025-10-29 13:53:25,719 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:25,719 - INFO     -   - ts1_id: 13
2025-10-29 13:53:25,719 - INFO     -   - ts2_id: 5
2025-10-29 13:53:25,720 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:25,720 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:25,720 - INFO     -   - ts1_size: 20, ts2_size: 5
2025-10-29 13:53:25,720 - INFO     -   - Product space size: 100
2025-10-29 13:53:25,720 - INFO     -   - Using product state mapping
2025-10-29 13:53:25,720 - INFO     -   - f_before_product length: 100
2025-10-29 13:53:25,721 - INFO     -   - avg_f_before: 4.4600 (100 valid states)
2025-10-29 13:53:25,721 - INFO     -   - avg_f_after:  6.7600 (100 valid states)
2025-10-29 13:53:25,721 - INFO     -   - delta: 2.3000
2025-10-29 13:53:25,721 - INFO     -   - f_stability: 1.0 - |2.3000| / 4.4600 = 0.4843
2025-10-29 13:53:25,721 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:25,721 - INFO     -   - Compared 25 values
2025-10-29 13:53:25,721 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:25,721 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:25,721 - INFO     -   - states_before: 100
2025-10-29 13:53:25,721 - INFO     -   - states_after: 100
2025-10-29 13:53:25,721 - INFO     -   - delta_states: 0
2025-10-29 13:53:25,721 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:25,721 - INFO     -   - ts1_transitions: 122
2025-10-29 13:53:25,721 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:25,721 - INFO     -   - merged_transitions: 750
2025-10-29 13:53:25,721 - INFO     -   - transition_density_change: 6.1500
2025-10-29 13:53:25,721 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:25,721 - INFO     -   - search_signals present: True
2025-10-29 13:53:25,721 - INFO     -   - nodes_expanded: 100
2025-10-29 13:53:25,721 - INFO     -   - search_depth: 3
2025-10-29 13:53:25,721 - INFO     -   - solution_cost: 2
2025-10-29 13:53:25,722 - INFO     -   - branching_factor: 7.5000
2025-10-29 13:53:25,722 - INFO     -   - solution_found: True
2025-10-29 13:53:25,722 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:25,722 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:25,722 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:53:25,722 - INFO     -   - TS13(20) + TS5(5) → 100 states
2025-10-29 13:53:25,722 - INFO     -   - f_stability=0.484
2025-10-29 13:53:25,722 - INFO     -   - A* nodes_expanded=100
2025-10-29 13:53:25,722 - INFO     -   - solution_found=True
2025-10-29 13:53:25,722 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:25,722 - INFO     - 
  Extracted signals:
2025-10-29 13:53:25,722 - INFO     -     - iteration: 6
2025-10-29 13:53:25,722 - INFO     -     - states_before: 100
2025-10-29 13:53:25,723 - INFO     -     - states_after: 100
2025-10-29 13:53:25,723 - INFO     -     - delta_states: 0
2025-10-29 13:53:25,723 - INFO     -     - f_value_stability: 0.4843
2025-10-29 13:53:25,723 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:25,723 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:25,723 - INFO     -     - nodes_expanded: 100
2025-10-29 13:53:25,723 - INFO     -     - search_depth: 3
2025-10-29 13:53:25,723 - INFO     -     - solution_cost: 2
2025-10-29 13:53:25,723 - INFO     -     - branching_factor: 7.5000
2025-10-29 13:53:25,723 - INFO     -     - solution_found: True
2025-10-29 13:53:25,723 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:25,723 - INFO     - 
  Computing reward:
2025-10-29 13:53:25,723 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:25,723 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:25,723 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:25,723 - INFO     -   [1] BRANCHING FACTOR: 7.500 → score 0.150 (high BF, minimal credit)
2025-10-29 13:53:25,723 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:25,724 - INFO     -   [3] F-VALUE STABILITY: 0.435
2025-10-29 13:53:25,724 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:25,724 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:25,724 - INFO     - 
  [COMPOSITE]: 0.482
2025-10-29 13:53:25,724 - INFO     -     = 0.300*0.150 (bf)
2025-10-29 13:53:25,724 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:25,724 - INFO     -     + 0.350*0.435 (stability)
2025-10-29 13:53:25,724 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:25,724 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:25,724 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:25,724 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:25,724 - INFO     - 
  [FINAL REWARD]: 0.2643
2025-10-29 13:53:25,724 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:25,725 - INFO     -     ✓ Reward computed: 0.2643
2025-10-29 13:53:25,725 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:25,725 - INFO     -     - bf_score                       0.1500
2025-10-29 13:53:25,725 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:25,725 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:25,725 - INFO     -     - f_stability                    0.4355
2025-10-29 13:53:25,725 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:25,725 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:25,725 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:25,725 - INFO     -     - composite                      0.4822
2025-10-29 13:53:25,725 - INFO     -     - total                          0.2643
2025-10-29 13:53:25,725 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:25,725 - INFO     -   Num remaining nodes: 2
2025-10-29 13:53:25,725 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:53:25,725 - INFO     -   Done: False
2025-10-29 13:53:25,725 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:25,726 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:25,726 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:25,726 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:25,726 - INFO     -     - num_nodes: 2
2025-10-29 13:53:25,726 - INFO     -     - num_edges: 2
2025-10-29 13:53:25,726 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:25,726 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:53:25,726 - INFO     -   After: current_merge_step = 7
2025-10-29 13:53:25,726 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:25,726 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:25,727 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:25,727 - INFO     -   ✓ Step logged
2025-10-29 13:53:25,727 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:25,727 - INFO     -   Returning:
2025-10-29 13:53:25,727 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:25,727 - INFO     -     - reward: 0.2643
2025-10-29 13:53:25,727 - INFO     -     - done: False
2025-10-29 13:53:25,728 - INFO     -     - truncated: False
2025-10-29 13:53:25,728 - INFO     -     - info: 19 keys
2025-10-29 13:53:25,728 - INFO     - ==========================================================================================

2025-10-29 13:53:25,733 - INFO     - 
==========================================================================================
2025-10-29 13:53:25,733 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:25,733 - INFO     - ==========================================================================================
2025-10-29 13:53:25,733 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:25,733 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:53:25,733 - INFO     -   Available edges in graph: 2
2025-10-29 13:53:25,733 - INFO     -   Action index calculation:
2025-10-29 13:53:25,733 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 2 = 1
2025-10-29 13:53:25,733 - INFO     -     - clamped to [0, 1]: 1
2025-10-29 13:53:25,733 - INFO     -   ✓ Extracted merge pair from edge 1: (15, 14)
2025-10-29 13:53:25,733 - INFO     -   ✓ Validation passed
2025-10-29 13:53:25,733 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:25,733 - INFO     -     - Total states before merge: 300
2025-10-29 13:53:25,733 - INFO     -     - Num nodes: 2
2025-10-29 13:53:25,733 - INFO     -     - Num edges: 2
2025-10-29 13:53:25,734 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:25,734 - INFO     -       - Node 15: 100 states
2025-10-29 13:53:25,734 - INFO     -       - Node 14: 200 states
2025-10-29 13:53:25,734 - INFO     -       - Expected product: 20000 states
2025-10-29 13:53:25,734 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:25,742 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:53:25,743 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:25,743 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:53:25,843 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:25,843 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:25,843 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:53:25,855 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:53:25,855 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:25,855 - INFO     -   Calling graph_tracker.merge_nodes([15, 14])...
2025-10-29 13:53:25,855 - INFO     - Attempting merge of nodes 15 and 14...
2025-10-29 13:53:25,855 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:53:25,855 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:25,855 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:25,855 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:53:25,855 - INFO     - 
================================================================================
2025-10-29 13:53:25,855 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:53:25,855 - INFO     - ================================================================================
2025-10-29 13:53:25,856 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:25,856 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:53:25,856 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:53:25,859 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:25,859 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:25,859 - INFO     -   - Raw ts1_f length: 60
2025-10-29 13:53:25,859 - INFO     -   - Raw ts2_f length: 47
2025-10-29 13:53:25,859 - INFO     -   - Raw f_after length: 2820
2025-10-29 13:53:25,859 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:25,860 - INFO     -   - ts1_valid: 60 / 60 (removed 0)
2025-10-29 13:53:25,860 - INFO     -   - ts2_valid: 47 / 47 (removed -47)
2025-10-29 13:53:25,861 - INFO     -   - after_valid: 1820 / 2820 (removed 1000)
2025-10-29 13:53:25,861 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:25,861 - INFO     -   - ts1_id: 15
2025-10-29 13:53:25,861 - INFO     -   - ts2_id: 14
2025-10-29 13:53:25,861 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:25,861 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:25,861 - INFO     -   - ts1_size: 60, ts2_size: 47
2025-10-29 13:53:25,861 - INFO     -   - Product space size: 2820
2025-10-29 13:53:25,861 - INFO     -   - Using product state mapping
2025-10-29 13:53:25,865 - INFO     -   - f_before_product length: 2820
2025-10-29 13:53:25,875 - INFO     -   - avg_f_before: 5.8270 (2820 valid states)
2025-10-29 13:53:25,875 - INFO     -   - avg_f_after:  9.4846 (1820 valid states)
2025-10-29 13:53:25,875 - INFO     -   - delta: 3.6577
2025-10-29 13:53:25,875 - INFO     -   - f_stability: 1.0 - |3.6577| / 5.8270 = 0.3723
2025-10-29 13:53:25,875 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:25,875 - INFO     -   - Compared 107 values
2025-10-29 13:53:25,875 - INFO     -   - Significant changes (> 5.0): 21
2025-10-29 13:53:25,875 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:25,875 - INFO     -   - states_before: 2820
2025-10-29 13:53:25,875 - INFO     -   - states_after: 2820
2025-10-29 13:53:25,875 - INFO     -   - delta_states: 0
2025-10-29 13:53:25,875 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:25,875 - INFO     -   - ts1_transitions: 535
2025-10-29 13:53:25,875 - INFO     -   - ts2_transitions: 485
2025-10-29 13:53:25,875 - INFO     -   - merged_transitions: 14010
2025-10-29 13:53:25,875 - INFO     -   - transition_density_change: 4.6064
2025-10-29 13:53:25,875 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:25,875 - INFO     -   - search_signals present: True
2025-10-29 13:53:25,875 - INFO     -   - nodes_expanded: 1820
2025-10-29 13:53:25,875 - INFO     -   - search_depth: 5
2025-10-29 13:53:25,875 - INFO     -   - solution_cost: 4
2025-10-29 13:53:25,875 - INFO     -   - branching_factor: 7.6978
2025-10-29 13:53:25,877 - INFO     -   - solution_found: True
2025-10-29 13:53:25,877 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:25,878 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:25,878 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:53:25,878 - INFO     -   - TS15(60) + TS14(47) → 2820 states
2025-10-29 13:53:25,878 - INFO     -   - f_stability=0.372
2025-10-29 13:53:25,878 - INFO     -   - A* nodes_expanded=1820
2025-10-29 13:53:25,878 - INFO     -   - solution_found=True
2025-10-29 13:53:25,878 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:25,878 - INFO     - 
  Extracted signals:
2025-10-29 13:53:25,878 - INFO     -     - iteration: 7
2025-10-29 13:53:25,878 - INFO     -     - states_before: 2820
2025-10-29 13:53:25,878 - INFO     -     - states_after: 2820
2025-10-29 13:53:25,878 - INFO     -     - delta_states: 0
2025-10-29 13:53:25,878 - INFO     -     - f_value_stability: 0.3723
2025-10-29 13:53:25,878 - INFO     -     - num_significant_f_changes: 21
2025-10-29 13:53:25,878 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:25,878 - INFO     -     - nodes_expanded: 1820
2025-10-29 13:53:25,878 - INFO     -     - search_depth: 5
2025-10-29 13:53:25,878 - INFO     -     - solution_cost: 4
2025-10-29 13:53:25,878 - INFO     -     - branching_factor: 7.6978
2025-10-29 13:53:25,879 - INFO     -     - solution_found: True
2025-10-29 13:53:25,879 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:25,879 - INFO     - 
  Computing reward:
2025-10-29 13:53:25,879 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:25,879 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:25,879 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:25,879 - INFO     -   [1] BRANCHING FACTOR: 7.698 → score 0.130 (high BF, minimal credit)
2025-10-29 13:53:25,879 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:25,880 - INFO     -   [3] F-VALUE STABILITY: 0.169
2025-10-29 13:53:25,880 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:25,881 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:25,881 - INFO     - 
  [COMPOSITE]: 0.372
2025-10-29 13:53:25,881 - INFO     -     = 0.300*0.130 (bf)
2025-10-29 13:53:25,881 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:25,881 - INFO     -     + 0.350*0.169 (stability)
2025-10-29 13:53:25,881 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:25,881 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:25,881 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:25,881 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:25,882 - INFO     - 
  [FINAL REWARD]: -0.0551
2025-10-29 13:53:25,882 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:25,882 - INFO     -     ✓ Reward computed: -0.0551
2025-10-29 13:53:25,882 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:25,882 - INFO     -     - bf_score                       0.1302
2025-10-29 13:53:25,882 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:25,882 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:25,882 - INFO     -     - f_stability                    0.1685
2025-10-29 13:53:25,882 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:25,882 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:25,882 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:25,882 - INFO     -     - composite                      0.3725
2025-10-29 13:53:25,882 - INFO     -     - total                          -0.0551
2025-10-29 13:53:25,882 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:25,883 - INFO     -   Num remaining nodes: 1
2025-10-29 13:53:25,883 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:53:25,883 - INFO     -   Done: True
2025-10-29 13:53:25,883 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:53:25,883 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:25,883 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:25,883 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:25,883 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:25,883 - INFO     -     - num_nodes: 1
2025-10-29 13:53:25,883 - INFO     -     - num_edges: 0
2025-10-29 13:53:25,883 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:25,883 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:53:25,884 - INFO     -   After: current_merge_step = 8
2025-10-29 13:53:25,884 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:25,884 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:25,884 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:25,885 - INFO     -   ✓ Step logged
2025-10-29 13:53:25,885 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:25,885 - INFO     -   Returning:
2025-10-29 13:53:25,885 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:25,885 - INFO     -     - reward: -0.0551
2025-10-29 13:53:25,885 - INFO     -     - done: True
2025-10-29 13:53:25,885 - INFO     -     - truncated: False
2025-10-29 13:53:25,885 - INFO     -     - info: 19 keys
2025-10-29 13:53:25,885 - INFO     - ==========================================================================================

2025-10-29 13:53:25,953 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:53:25,959 - INFO     - [Handshake] Building FD command:
2025-10-29 13:53:25,960 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:25,960 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_03.pddl
2025-10-29 13:53:25,960 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:53:25,962 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:26,565 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:26,565 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:26,565 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:26,879 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:26,880 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:26,880 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:26,880 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:26,880 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:26,880 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:26,881 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:26,881 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:26,881 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:26,881 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:26,881 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:26,881 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:26,881 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:26,881 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:26,881 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:26,881 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:26,881 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:26,881 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:26,881 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:26,881 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:26,881 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:26,881 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:26,881 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:26,882 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:26,882 - INFO     - Added edge (0, 1)
2025-10-29 13:53:26,882 - INFO     - Added edge (0, 2)
2025-10-29 13:53:26,882 - INFO     - Added edge (0, 3)
2025-10-29 13:53:26,883 - INFO     - Added edge (0, 4)
2025-10-29 13:53:26,883 - INFO     - Added edge (0, 5)
2025-10-29 13:53:26,883 - INFO     - Added edge (0, 6)
2025-10-29 13:53:26,883 - INFO     - Added edge (0, 7)
2025-10-29 13:53:26,883 - INFO     - Added edge (0, 8)
2025-10-29 13:53:26,883 - INFO     - Added edge (1, 0)
2025-10-29 13:53:26,883 - INFO     - Added edge (1, 2)
2025-10-29 13:53:26,883 - INFO     - Added edge (1, 3)
2025-10-29 13:53:26,883 - INFO     - Added edge (1, 4)
2025-10-29 13:53:26,883 - INFO     - Added edge (1, 5)
2025-10-29 13:53:26,883 - INFO     - Added edge (1, 6)
2025-10-29 13:53:26,883 - INFO     - Added edge (1, 7)
2025-10-29 13:53:26,883 - INFO     - Added edge (1, 8)
2025-10-29 13:53:26,883 - INFO     - Added edge (2, 0)
2025-10-29 13:53:26,883 - INFO     - Added edge (2, 1)
2025-10-29 13:53:26,883 - INFO     - Added edge (2, 3)
2025-10-29 13:53:26,883 - INFO     - Added edge (2, 4)
2025-10-29 13:53:26,883 - INFO     - Added edge (2, 5)
2025-10-29 13:53:26,883 - INFO     - Added edge (2, 6)
2025-10-29 13:53:26,883 - INFO     - Added edge (2, 7)
2025-10-29 13:53:26,883 - INFO     - Added edge (2, 8)
2025-10-29 13:53:26,883 - INFO     - Added edge (3, 0)
2025-10-29 13:53:26,883 - INFO     - Added edge (3, 1)
2025-10-29 13:53:26,883 - INFO     - Added edge (3, 2)
2025-10-29 13:53:26,883 - INFO     - Added edge (3, 4)
2025-10-29 13:53:26,883 - INFO     - Added edge (3, 5)
2025-10-29 13:53:26,883 - INFO     - Added edge (3, 6)
2025-10-29 13:53:26,883 - INFO     - Added edge (3, 7)
2025-10-29 13:53:26,883 - INFO     - Added edge (3, 8)
2025-10-29 13:53:26,884 - INFO     - Added edge (4, 0)
2025-10-29 13:53:26,884 - INFO     - Added edge (4, 1)
2025-10-29 13:53:26,884 - INFO     - Added edge (4, 2)
2025-10-29 13:53:26,884 - INFO     - Added edge (4, 3)
2025-10-29 13:53:26,884 - INFO     - Added edge (4, 5)
2025-10-29 13:53:26,884 - INFO     - Added edge (4, 6)
2025-10-29 13:53:26,884 - INFO     - Added edge (4, 7)
2025-10-29 13:53:26,884 - INFO     - Added edge (4, 8)
2025-10-29 13:53:26,884 - INFO     - Added edge (5, 0)
2025-10-29 13:53:26,885 - INFO     - Added edge (5, 1)
2025-10-29 13:53:26,885 - INFO     - Added edge (5, 2)
2025-10-29 13:53:26,885 - INFO     - Added edge (5, 3)
2025-10-29 13:53:26,885 - INFO     - Added edge (5, 4)
2025-10-29 13:53:26,885 - INFO     - Added edge (6, 0)
2025-10-29 13:53:26,885 - INFO     - Added edge (6, 1)
2025-10-29 13:53:26,885 - INFO     - Added edge (6, 2)
2025-10-29 13:53:26,885 - INFO     - Added edge (6, 3)
2025-10-29 13:53:26,885 - INFO     - Added edge (6, 4)
2025-10-29 13:53:26,885 - INFO     - Added edge (7, 0)
2025-10-29 13:53:26,885 - INFO     - Added edge (7, 1)
2025-10-29 13:53:26,885 - INFO     - Added edge (7, 2)
2025-10-29 13:53:26,886 - INFO     - Added edge (7, 3)
2025-10-29 13:53:26,886 - INFO     - Added edge (7, 4)
2025-10-29 13:53:26,886 - INFO     - Added edge (8, 0)
2025-10-29 13:53:26,886 - INFO     - Added edge (8, 1)
2025-10-29 13:53:26,886 - INFO     - Added edge (8, 2)
2025-10-29 13:53:26,886 - INFO     - Added edge (8, 3)
2025-10-29 13:53:26,886 - INFO     - Added edge (8, 4)
2025-10-29 13:53:26,886 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:26,891 - INFO     - 
==========================================================================================
2025-10-29 13:53:26,891 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:26,891 - INFO     - ==========================================================================================
2025-10-29 13:53:26,891 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:26,891 - INFO     -   Input action: 34 (type: int)
2025-10-29 13:53:26,891 - INFO     -   Available edges in graph: 60
2025-10-29 13:53:26,891 - INFO     -   Action index calculation:
2025-10-29 13:53:26,891 - INFO     -     - action % max(num_valid_edges, 1) = 34 % 60 = 34
2025-10-29 13:53:26,892 - INFO     -     - clamped to [0, 59]: 34
2025-10-29 13:53:26,892 - INFO     -   ✓ Extracted merge pair from edge 34: (4, 2)
2025-10-29 13:53:26,892 - INFO     -   ✓ Validation passed
2025-10-29 13:53:26,892 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:26,892 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:26,892 - INFO     -     - Num nodes: 9
2025-10-29 13:53:26,892 - INFO     -     - Num edges: 60
2025-10-29 13:53:26,892 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:26,892 - INFO     -       - Node 4: 2 states
2025-10-29 13:53:26,892 - INFO     -       - Node 2: 2 states
2025-10-29 13:53:26,892 - INFO     -       - Expected product: 4 states
2025-10-29 13:53:26,892 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:26,922 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:53:26,922 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:26,922 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:53:27,023 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:27,023 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:27,023 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:53:27,023 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:27,023 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:27,023 - INFO     -   Calling graph_tracker.merge_nodes([4, 2])...
2025-10-29 13:53:27,023 - INFO     - Attempting merge of nodes 4 and 2...
2025-10-29 13:53:27,023 - INFO     - Successfully merged nodes into new node 9 with 4 states.
2025-10-29 13:53:27,023 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:27,024 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:27,024 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:53:27,024 - INFO     - 
================================================================================
2025-10-29 13:53:27,024 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:53:27,024 - INFO     - ================================================================================
2025-10-29 13:53:27,024 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:27,024 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:53:27,024 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:53:27,025 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:27,025 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:27,025 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:27,025 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:27,025 - INFO     -   - Raw f_after length: 4
2025-10-29 13:53:27,025 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:27,025 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:27,025 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:27,025 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:53:27,025 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:27,025 - INFO     -   - ts1_id: 4
2025-10-29 13:53:27,025 - INFO     -   - ts2_id: 2
2025-10-29 13:53:27,025 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:27,025 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:27,025 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:53:27,025 - INFO     -   - Product space size: 4
2025-10-29 13:53:27,025 - INFO     -   - Using product state mapping
2025-10-29 13:53:27,026 - INFO     -   - f_before_product length: 4
2025-10-29 13:53:27,026 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:53:27,026 - INFO     -   - avg_f_after:  0.7500 (4 valid states)
2025-10-29 13:53:27,026 - INFO     -   - delta: 0.0000
2025-10-29 13:53:27,026 - INFO     -   - f_stability: 1.0 - |0.0000| / 0.7500 = 1.0000
2025-10-29 13:53:27,026 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:27,026 - INFO     -   - Compared 4 values
2025-10-29 13:53:27,026 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:27,026 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:27,026 - INFO     -   - states_before: 4
2025-10-29 13:53:27,026 - INFO     -   - states_after: 4
2025-10-29 13:53:27,026 - INFO     -   - delta_states: 0
2025-10-29 13:53:27,026 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:27,026 - INFO     -   - ts1_transitions: 3
2025-10-29 13:53:27,026 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:27,027 - INFO     -   - merged_transitions: 15
2025-10-29 13:53:27,027 - INFO     -   - transition_density_change: 1.7500
2025-10-29 13:53:27,027 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:27,027 - INFO     -   - search_signals present: True
2025-10-29 13:53:27,027 - INFO     -   - nodes_expanded: 4
2025-10-29 13:53:27,027 - INFO     -   - search_depth: 0
2025-10-29 13:53:27,027 - INFO     -   - solution_cost: 0
2025-10-29 13:53:27,027 - INFO     -   - branching_factor: 3.7500
2025-10-29 13:53:27,027 - INFO     -   - solution_found: True
2025-10-29 13:53:27,027 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:27,027 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:27,027 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:53:27,027 - INFO     -   - TS4(2) + TS2(2) → 4 states
2025-10-29 13:53:27,027 - INFO     -   - f_stability=1.000
2025-10-29 13:53:27,027 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:53:27,027 - INFO     -   - solution_found=True
2025-10-29 13:53:27,027 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:27,027 - INFO     - 
  Extracted signals:
2025-10-29 13:53:27,027 - INFO     -     - iteration: 0
2025-10-29 13:53:27,027 - INFO     -     - states_before: 4
2025-10-29 13:53:27,027 - INFO     -     - states_after: 4
2025-10-29 13:53:27,027 - INFO     -     - delta_states: 0
2025-10-29 13:53:27,027 - INFO     -     - f_value_stability: 1.0000
2025-10-29 13:53:27,027 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:27,027 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:27,027 - INFO     -     - nodes_expanded: 4
2025-10-29 13:53:27,029 - INFO     -     - search_depth: 0
2025-10-29 13:53:27,029 - INFO     -     - solution_cost: 0
2025-10-29 13:53:27,029 - INFO     -     - branching_factor: 3.7500
2025-10-29 13:53:27,029 - INFO     -     - solution_found: True
2025-10-29 13:53:27,029 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:27,029 - INFO     - 
  Computing reward:
2025-10-29 13:53:27,029 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:27,029 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:27,029 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:27,029 - INFO     -   [1] BRANCHING FACTOR: 3.750 → score 0.600 (tolerable)
2025-10-29 13:53:27,029 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:53:27,030 - INFO     -   [3] F-VALUE STABILITY: 0.260
2025-10-29 13:53:27,030 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:27,030 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:27,030 - INFO     - 
  [COMPOSITE]: 0.491
2025-10-29 13:53:27,030 - INFO     -     = 0.300*0.600 (bf)
2025-10-29 13:53:27,030 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:53:27,030 - INFO     -     + 0.350*0.260 (stability)
2025-10-29 13:53:27,030 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:27,030 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:27,030 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:27,030 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:27,030 - INFO     - 
  [FINAL REWARD]: 0.1819
2025-10-29 13:53:27,030 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:27,030 - INFO     -     ✓ Reward computed: 0.1819
2025-10-29 13:53:27,030 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:27,030 - INFO     -     - bf_score                       0.6000
2025-10-29 13:53:27,030 - INFO     -     - depth_score                    0.5000
2025-10-29 13:53:27,030 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:27,030 - INFO     -     - f_stability                    0.2598
2025-10-29 13:53:27,030 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:27,030 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:27,030 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:27,030 - INFO     -     - composite                      0.4909
2025-10-29 13:53:27,030 - INFO     -     - total                          0.1819
2025-10-29 13:53:27,030 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:27,030 - INFO     -   Num remaining nodes: 8
2025-10-29 13:53:27,031 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:53:27,031 - INFO     -   Done: False
2025-10-29 13:53:27,031 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:27,032 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:27,032 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:27,032 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:27,032 - INFO     -     - num_nodes: 8
2025-10-29 13:53:27,032 - INFO     -     - num_edges: 44
2025-10-29 13:53:27,032 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:27,032 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:53:27,032 - INFO     -   After: current_merge_step = 1
2025-10-29 13:53:27,032 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:27,032 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:27,032 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:27,034 - INFO     -   ✓ Step logged
2025-10-29 13:53:27,034 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:27,034 - INFO     -   Returning:
2025-10-29 13:53:27,035 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:27,035 - INFO     -     - reward: 0.1819
2025-10-29 13:53:27,035 - INFO     -     - done: False
2025-10-29 13:53:27,035 - INFO     -     - truncated: False
2025-10-29 13:53:27,035 - INFO     -     - info: 19 keys
2025-10-29 13:53:27,035 - INFO     - ==========================================================================================

2025-10-29 13:53:27,039 - INFO     - 
==========================================================================================
2025-10-29 13:53:27,039 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:27,039 - INFO     - ==========================================================================================
2025-10-29 13:53:27,039 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:27,039 - INFO     -   Input action: 30 (type: int)
2025-10-29 13:53:27,039 - INFO     -   Available edges in graph: 44
2025-10-29 13:53:27,039 - INFO     -   Action index calculation:
2025-10-29 13:53:27,040 - INFO     -     - action % max(num_valid_edges, 1) = 30 % 44 = 30
2025-10-29 13:53:27,040 - INFO     -     - clamped to [0, 43]: 30
2025-10-29 13:53:27,040 - INFO     -   ✓ Extracted merge pair from edge 30: (7, 1)
2025-10-29 13:53:27,040 - INFO     -   ✓ Validation passed
2025-10-29 13:53:27,040 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:27,040 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:27,040 - INFO     -     - Num nodes: 8
2025-10-29 13:53:27,040 - INFO     -     - Num edges: 44
2025-10-29 13:53:27,040 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:27,040 - INFO     -       - Node 7: 5 states
2025-10-29 13:53:27,040 - INFO     -       - Node 1: 2 states
2025-10-29 13:53:27,040 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:27,040 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:27,048 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:53:27,048 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:27,048 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:53:27,149 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:27,149 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:27,149 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:53:27,149 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:27,150 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:27,150 - INFO     -   Calling graph_tracker.merge_nodes([7, 1])...
2025-10-29 13:53:27,150 - INFO     - Attempting merge of nodes 7 and 1...
2025-10-29 13:53:27,150 - INFO     - Successfully merged nodes into new node 10 with 10 states.
2025-10-29 13:53:27,150 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:27,150 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:27,150 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:53:27,150 - INFO     - 
================================================================================
2025-10-29 13:53:27,150 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:53:27,150 - INFO     - ================================================================================
2025-10-29 13:53:27,150 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:27,150 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:53:27,150 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:53:27,151 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:27,151 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:27,151 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:27,151 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:27,151 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:27,151 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:27,151 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:27,151 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:27,151 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:27,151 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:27,151 - INFO     -   - ts1_id: 7
2025-10-29 13:53:27,152 - INFO     -   - ts2_id: 1
2025-10-29 13:53:27,152 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:27,152 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:27,152 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:27,152 - INFO     -   - Product space size: 10
2025-10-29 13:53:27,152 - INFO     -   - Using product state mapping
2025-10-29 13:53:27,152 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:27,152 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:27,152 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:53:27,152 - INFO     -   - delta: 0.5000
2025-10-29 13:53:27,152 - INFO     -   - f_stability: 1.0 - |0.5000| / 2.8000 = 0.8214
2025-10-29 13:53:27,152 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:27,152 - INFO     -   - Compared 7 values
2025-10-29 13:53:27,153 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:27,153 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:27,153 - INFO     -   - states_before: 10
2025-10-29 13:53:27,153 - INFO     -   - states_after: 10
2025-10-29 13:53:27,153 - INFO     -   - delta_states: 0
2025-10-29 13:53:27,153 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:27,153 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:27,153 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:27,153 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:27,153 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:27,153 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:27,153 - INFO     -   - search_signals present: True
2025-10-29 13:53:27,153 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:27,153 - INFO     -   - search_depth: 1
2025-10-29 13:53:27,153 - INFO     -   - solution_cost: 2
2025-10-29 13:53:27,153 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:27,154 - INFO     -   - solution_found: True
2025-10-29 13:53:27,154 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:27,154 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:27,154 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:53:27,154 - INFO     -   - TS7(5) + TS1(2) → 10 states
2025-10-29 13:53:27,154 - INFO     -   - f_stability=0.821
2025-10-29 13:53:27,154 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:27,154 - INFO     -   - solution_found=True
2025-10-29 13:53:27,154 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:27,154 - INFO     - 
  Extracted signals:
2025-10-29 13:53:27,154 - INFO     -     - iteration: 1
2025-10-29 13:53:27,154 - INFO     -     - states_before: 10
2025-10-29 13:53:27,154 - INFO     -     - states_after: 10
2025-10-29 13:53:27,154 - INFO     -     - delta_states: 0
2025-10-29 13:53:27,155 - INFO     -     - f_value_stability: 0.8214
2025-10-29 13:53:27,155 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:27,155 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:27,155 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:27,155 - INFO     -     - search_depth: 1
2025-10-29 13:53:27,155 - INFO     -     - solution_cost: 2
2025-10-29 13:53:27,155 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:27,155 - INFO     -     - solution_found: True
2025-10-29 13:53:27,155 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:27,155 - INFO     - 
  Computing reward:
2025-10-29 13:53:27,155 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:27,155 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:27,155 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:27,155 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:27,155 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:53:27,156 - INFO     -   [3] F-VALUE STABILITY: 0.593
2025-10-29 13:53:27,156 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:27,156 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:27,156 - INFO     - 
  [COMPOSITE]: 0.680
2025-10-29 13:53:27,156 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:27,156 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:53:27,156 - INFO     -     + 0.350*0.593 (stability)
2025-10-29 13:53:27,156 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:27,156 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:27,156 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:27,156 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:27,156 - INFO     - 
  [FINAL REWARD]: 0.7602
2025-10-29 13:53:27,156 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:27,156 - INFO     -     ✓ Reward computed: 0.7602
2025-10-29 13:53:27,156 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:27,156 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:27,157 - INFO     -     - depth_score                    0.9119
2025-10-29 13:53:27,157 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:27,157 - INFO     -     - f_stability                    0.5935
2025-10-29 13:53:27,157 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:27,157 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:27,157 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:27,157 - INFO     -     - composite                      0.6801
2025-10-29 13:53:27,157 - INFO     -     - total                          0.7602
2025-10-29 13:53:27,157 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:27,157 - INFO     -   Num remaining nodes: 7
2025-10-29 13:53:27,157 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:53:27,157 - INFO     -   Done: False
2025-10-29 13:53:27,157 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:27,159 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:27,159 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:27,159 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:27,159 - INFO     -     - num_nodes: 7
2025-10-29 13:53:27,159 - INFO     -     - num_edges: 36
2025-10-29 13:53:27,159 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:27,159 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:53:27,159 - INFO     -   After: current_merge_step = 2
2025-10-29 13:53:27,159 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:27,159 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:27,159 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:27,160 - INFO     -   ✓ Step logged
2025-10-29 13:53:27,160 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:27,161 - INFO     -   Returning:
2025-10-29 13:53:27,161 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:27,161 - INFO     -     - reward: 0.7602
2025-10-29 13:53:27,161 - INFO     -     - done: False
2025-10-29 13:53:27,161 - INFO     -     - truncated: False
2025-10-29 13:53:27,161 - INFO     -     - info: 19 keys
2025-10-29 13:53:27,161 - INFO     - ==========================================================================================

2025-10-29 13:53:27,165 - INFO     - 
==========================================================================================
2025-10-29 13:53:27,166 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:27,166 - INFO     - ==========================================================================================
2025-10-29 13:53:27,166 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:27,166 - INFO     -   Input action: 12 (type: int)
2025-10-29 13:53:27,166 - INFO     -   Available edges in graph: 36
2025-10-29 13:53:27,166 - INFO     -   Action index calculation:
2025-10-29 13:53:27,166 - INFO     -     - action % max(num_valid_edges, 1) = 12 % 36 = 12
2025-10-29 13:53:27,166 - INFO     -     - clamped to [0, 35]: 12
2025-10-29 13:53:27,166 - INFO     -   ✓ Extracted merge pair from edge 12: (5, 0)
2025-10-29 13:53:27,166 - INFO     -   ✓ Validation passed
2025-10-29 13:53:27,166 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:27,166 - INFO     -     - Total states before merge: 33
2025-10-29 13:53:27,166 - INFO     -     - Num nodes: 7
2025-10-29 13:53:27,166 - INFO     -     - Num edges: 36
2025-10-29 13:53:27,167 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:27,167 - INFO     -       - Node 5: 5 states
2025-10-29 13:53:27,167 - INFO     -       - Node 0: 2 states
2025-10-29 13:53:27,167 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:27,167 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:27,174 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:53:27,174 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:27,174 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:53:27,275 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:27,276 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:27,276 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:53:27,276 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:27,276 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:27,276 - INFO     -   Calling graph_tracker.merge_nodes([5, 0])...
2025-10-29 13:53:27,276 - INFO     - Attempting merge of nodes 5 and 0...
2025-10-29 13:53:27,276 - INFO     - Successfully merged nodes into new node 11 with 10 states.
2025-10-29 13:53:27,276 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:27,276 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:27,276 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:53:27,276 - INFO     - 
================================================================================
2025-10-29 13:53:27,277 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:53:27,277 - INFO     - ================================================================================
2025-10-29 13:53:27,277 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:27,277 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:53:27,277 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:53:27,277 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:27,277 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:27,277 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:27,277 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:27,277 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:27,278 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:27,278 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:27,278 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:27,278 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:27,278 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:27,278 - INFO     -   - ts1_id: 5
2025-10-29 13:53:27,278 - INFO     -   - ts2_id: 0
2025-10-29 13:53:27,278 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:27,278 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:27,278 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:27,278 - INFO     -   - Product space size: 10
2025-10-29 13:53:27,278 - INFO     -   - Using product state mapping
2025-10-29 13:53:27,278 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:27,278 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:27,278 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:53:27,278 - INFO     -   - delta: 0.8000
2025-10-29 13:53:27,279 - INFO     -   - f_stability: 1.0 - |0.8000| / 2.8000 = 0.7143
2025-10-29 13:53:27,279 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:27,279 - INFO     -   - Compared 7 values
2025-10-29 13:53:27,279 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:27,279 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:27,279 - INFO     -   - states_before: 10
2025-10-29 13:53:27,279 - INFO     -   - states_after: 10
2025-10-29 13:53:27,279 - INFO     -   - delta_states: 0
2025-10-29 13:53:27,279 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:27,279 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:27,279 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:27,279 - INFO     -   - merged_transitions: 37
2025-10-29 13:53:27,279 - INFO     -   - transition_density_change: 1.9000
2025-10-29 13:53:27,279 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:27,281 - INFO     -   - search_signals present: True
2025-10-29 13:53:27,281 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:27,281 - INFO     -   - search_depth: 2
2025-10-29 13:53:27,281 - INFO     -   - solution_cost: 2
2025-10-29 13:53:27,281 - INFO     -   - branching_factor: 3.7000
2025-10-29 13:53:27,281 - INFO     -   - solution_found: True
2025-10-29 13:53:27,281 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:27,281 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:27,281 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:53:27,282 - INFO     -   - TS5(5) + TS0(2) → 10 states
2025-10-29 13:53:27,282 - INFO     -   - f_stability=0.714
2025-10-29 13:53:27,282 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:27,282 - INFO     -   - solution_found=True
2025-10-29 13:53:27,282 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:27,282 - INFO     - 
  Extracted signals:
2025-10-29 13:53:27,282 - INFO     -     - iteration: 2
2025-10-29 13:53:27,282 - INFO     -     - states_before: 10
2025-10-29 13:53:27,282 - INFO     -     - states_after: 10
2025-10-29 13:53:27,282 - INFO     -     - delta_states: 0
2025-10-29 13:53:27,282 - INFO     -     - f_value_stability: 0.7143
2025-10-29 13:53:27,282 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:27,282 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:27,282 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:27,282 - INFO     -     - search_depth: 2
2025-10-29 13:53:27,282 - INFO     -     - solution_cost: 2
2025-10-29 13:53:27,282 - INFO     -     - branching_factor: 3.7000
2025-10-29 13:53:27,282 - INFO     -     - solution_found: True
2025-10-29 13:53:27,282 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:27,283 - INFO     - 
  Computing reward:
2025-10-29 13:53:27,283 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:27,283 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:27,283 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:27,283 - INFO     -   [1] BRANCHING FACTOR: 3.700 → score 0.607 (tolerable)
2025-10-29 13:53:27,283 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:27,283 - INFO     -   [3] F-VALUE STABILITY: 0.459
2025-10-29 13:53:27,283 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:27,283 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:27,283 - INFO     - 
  [COMPOSITE]: 0.635
2025-10-29 13:53:27,283 - INFO     -     = 0.300*0.607 (bf)
2025-10-29 13:53:27,283 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:27,284 - INFO     -     + 0.350*0.459 (stability)
2025-10-29 13:53:27,284 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:27,284 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:27,284 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:27,284 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:27,284 - INFO     - 
  [FINAL REWARD]: 0.5693
2025-10-29 13:53:27,284 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:27,284 - INFO     -     ✓ Reward computed: 0.5693
2025-10-29 13:53:27,284 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:27,284 - INFO     -     - bf_score                       0.6067
2025-10-29 13:53:27,284 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:27,284 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:27,284 - INFO     -     - f_stability                    0.4588
2025-10-29 13:53:27,284 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:27,284 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:27,284 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:27,284 - INFO     -     - composite                      0.6347
2025-10-29 13:53:27,285 - INFO     -     - total                          0.5693
2025-10-29 13:53:27,285 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:27,285 - INFO     -   Num remaining nodes: 6
2025-10-29 13:53:27,285 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:53:27,285 - INFO     -   Done: False
2025-10-29 13:53:27,285 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:27,286 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:27,286 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:27,286 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:27,286 - INFO     -     - num_nodes: 6
2025-10-29 13:53:27,286 - INFO     -     - num_edges: 28
2025-10-29 13:53:27,286 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:27,286 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:53:27,286 - INFO     -   After: current_merge_step = 3
2025-10-29 13:53:27,286 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:27,286 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:27,286 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:27,288 - INFO     -   ✓ Step logged
2025-10-29 13:53:27,289 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:27,289 - INFO     -   Returning:
2025-10-29 13:53:27,289 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:27,289 - INFO     -     - reward: 0.5693
2025-10-29 13:53:27,289 - INFO     -     - done: False
2025-10-29 13:53:27,289 - INFO     -     - truncated: False
2025-10-29 13:53:27,289 - INFO     -     - info: 19 keys
2025-10-29 13:53:27,289 - INFO     - ==========================================================================================

2025-10-29 13:53:27,293 - INFO     - 
==========================================================================================
2025-10-29 13:53:27,293 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:27,293 - INFO     - ==========================================================================================
2025-10-29 13:53:27,293 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:27,293 - INFO     -   Input action: 18 (type: int)
2025-10-29 13:53:27,293 - INFO     -   Available edges in graph: 28
2025-10-29 13:53:27,294 - INFO     -   Action index calculation:
2025-10-29 13:53:27,294 - INFO     -     - action % max(num_valid_edges, 1) = 18 % 28 = 18
2025-10-29 13:53:27,294 - INFO     -     - clamped to [0, 27]: 18
2025-10-29 13:53:27,294 - INFO     -   ✓ Extracted merge pair from edge 18: (10, 3)
2025-10-29 13:53:27,294 - INFO     -   ✓ Validation passed
2025-10-29 13:53:27,294 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:27,294 - INFO     -     - Total states before merge: 36
2025-10-29 13:53:27,294 - INFO     -     - Num nodes: 6
2025-10-29 13:53:27,294 - INFO     -     - Num edges: 28
2025-10-29 13:53:27,294 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:27,294 - INFO     -       - Node 10: 10 states
2025-10-29 13:53:27,294 - INFO     -       - Node 3: 2 states
2025-10-29 13:53:27,294 - INFO     -       - Expected product: 20 states
2025-10-29 13:53:27,294 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:27,300 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:53:27,300 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:27,300 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:53:27,401 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:27,401 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:27,401 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:53:27,402 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:27,402 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:27,402 - INFO     -   Calling graph_tracker.merge_nodes([10, 3])...
2025-10-29 13:53:27,402 - INFO     - Attempting merge of nodes 10 and 3...
2025-10-29 13:53:27,402 - INFO     - Successfully merged nodes into new node 12 with 20 states.
2025-10-29 13:53:27,402 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:27,402 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:27,402 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:53:27,402 - INFO     - 
================================================================================
2025-10-29 13:53:27,402 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:53:27,402 - INFO     - ================================================================================
2025-10-29 13:53:27,403 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:27,403 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:53:27,403 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:53:27,403 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:27,403 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:27,403 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:53:27,403 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:27,403 - INFO     -   - Raw f_after length: 20
2025-10-29 13:53:27,403 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:27,404 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:53:27,404 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:27,404 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:53:27,404 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:27,404 - INFO     -   - ts1_id: 10
2025-10-29 13:53:27,404 - INFO     -   - ts2_id: 3
2025-10-29 13:53:27,404 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:27,404 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:27,404 - INFO     -   - ts1_size: 10, ts2_size: 2
2025-10-29 13:53:27,404 - INFO     -   - Product space size: 20
2025-10-29 13:53:27,404 - INFO     -   - Using product state mapping
2025-10-29 13:53:27,404 - INFO     -   - f_before_product length: 20
2025-10-29 13:53:27,404 - INFO     -   - avg_f_before: 3.3000 (20 valid states)
2025-10-29 13:53:27,404 - INFO     -   - avg_f_after:  4.1000 (20 valid states)
2025-10-29 13:53:27,405 - INFO     -   - delta: 0.8000
2025-10-29 13:53:27,405 - INFO     -   - f_stability: 1.0 - |0.8000| / 3.3000 = 0.7576
2025-10-29 13:53:27,405 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:27,405 - INFO     -   - Compared 12 values
2025-10-29 13:53:27,405 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:27,405 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:27,405 - INFO     -   - states_before: 20
2025-10-29 13:53:27,405 - INFO     -   - states_after: 20
2025-10-29 13:53:27,405 - INFO     -   - delta_states: 0
2025-10-29 13:53:27,405 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:27,405 - INFO     -   - ts1_transitions: 40
2025-10-29 13:53:27,405 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:27,405 - INFO     -   - merged_transitions: 128
2025-10-29 13:53:27,405 - INFO     -   - transition_density_change: 4.1500
2025-10-29 13:53:27,405 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:27,406 - INFO     -   - search_signals present: True
2025-10-29 13:53:27,406 - INFO     -   - nodes_expanded: 20
2025-10-29 13:53:27,406 - INFO     -   - search_depth: 2
2025-10-29 13:53:27,406 - INFO     -   - solution_cost: 2
2025-10-29 13:53:27,406 - INFO     -   - branching_factor: 6.4000
2025-10-29 13:53:27,406 - INFO     -   - solution_found: True
2025-10-29 13:53:27,406 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:27,406 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:27,406 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:53:27,406 - INFO     -   - TS10(10) + TS3(2) → 20 states
2025-10-29 13:53:27,406 - INFO     -   - f_stability=0.758
2025-10-29 13:53:27,406 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:53:27,406 - INFO     -   - solution_found=True
2025-10-29 13:53:27,406 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:27,407 - INFO     - 
  Extracted signals:
2025-10-29 13:53:27,407 - INFO     -     - iteration: 3
2025-10-29 13:53:27,407 - INFO     -     - states_before: 20
2025-10-29 13:53:27,407 - INFO     -     - states_after: 20
2025-10-29 13:53:27,407 - INFO     -     - delta_states: 0
2025-10-29 13:53:27,407 - INFO     -     - f_value_stability: 0.7576
2025-10-29 13:53:27,407 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:27,407 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:27,407 - INFO     -     - nodes_expanded: 20
2025-10-29 13:53:27,407 - INFO     -     - search_depth: 2
2025-10-29 13:53:27,407 - INFO     -     - solution_cost: 2
2025-10-29 13:53:27,407 - INFO     -     - branching_factor: 6.4000
2025-10-29 13:53:27,407 - INFO     -     - solution_found: True
2025-10-29 13:53:27,407 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:27,407 - INFO     - 
  Computing reward:
2025-10-29 13:53:27,407 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:27,407 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:27,407 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:27,409 - INFO     -   [1] BRANCHING FACTOR: 6.400 → score 0.260 (high BF, minimal credit)
2025-10-29 13:53:27,409 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:27,409 - INFO     -   [3] F-VALUE STABILITY: 0.763
2025-10-29 13:53:27,409 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:27,409 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:27,409 - INFO     - 
  [COMPOSITE]: 0.637
2025-10-29 13:53:27,409 - INFO     -     = 0.300*0.260 (bf)
2025-10-29 13:53:27,409 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:27,409 - INFO     -     + 0.350*0.763 (stability)
2025-10-29 13:53:27,409 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:27,409 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:27,409 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:27,409 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:27,410 - INFO     - 
  [FINAL REWARD]: 0.7744
2025-10-29 13:53:27,410 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:27,410 - INFO     -     ✓ Reward computed: 0.7744
2025-10-29 13:53:27,410 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:27,410 - INFO     -     - bf_score                       0.2600
2025-10-29 13:53:27,410 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:27,410 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:27,410 - INFO     -     - f_stability                    0.7632
2025-10-29 13:53:27,410 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:27,410 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:27,410 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:27,410 - INFO     -     - composite                      0.6372
2025-10-29 13:53:27,410 - INFO     -     - total                          0.7744
2025-10-29 13:53:27,410 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:27,410 - INFO     -   Num remaining nodes: 5
2025-10-29 13:53:27,410 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:53:27,411 - INFO     -   Done: False
2025-10-29 13:53:27,411 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:27,411 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:27,411 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:27,411 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:27,412 - INFO     -     - num_nodes: 5
2025-10-29 13:53:27,412 - INFO     -     - num_edges: 18
2025-10-29 13:53:27,412 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:27,412 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:53:27,412 - INFO     -   After: current_merge_step = 4
2025-10-29 13:53:27,412 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:27,412 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:27,412 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:27,413 - INFO     -   ✓ Step logged
2025-10-29 13:53:27,413 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:27,413 - INFO     -   Returning:
2025-10-29 13:53:27,413 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:27,413 - INFO     -     - reward: 0.7744
2025-10-29 13:53:27,413 - INFO     -     - done: False
2025-10-29 13:53:27,413 - INFO     -     - truncated: False
2025-10-29 13:53:27,413 - INFO     -     - info: 19 keys
2025-10-29 13:53:27,413 - INFO     - ==========================================================================================

2025-10-29 13:53:27,418 - INFO     - 
==========================================================================================
2025-10-29 13:53:27,418 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:27,418 - INFO     - ==========================================================================================
2025-10-29 13:53:27,418 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:27,418 - INFO     -   Input action: 15 (type: int)
2025-10-29 13:53:27,418 - INFO     -   Available edges in graph: 18
2025-10-29 13:53:27,418 - INFO     -   Action index calculation:
2025-10-29 13:53:27,418 - INFO     -     - action % max(num_valid_edges, 1) = 15 % 18 = 15
2025-10-29 13:53:27,418 - INFO     -     - clamped to [0, 17]: 15
2025-10-29 13:53:27,418 - INFO     -   ✓ Extracted merge pair from edge 15: (12, 6)
2025-10-29 13:53:27,418 - INFO     -   ✓ Validation passed
2025-10-29 13:53:27,418 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:27,418 - INFO     -     - Total states before merge: 44
2025-10-29 13:53:27,418 - INFO     -     - Num nodes: 5
2025-10-29 13:53:27,419 - INFO     -     - Num edges: 18
2025-10-29 13:53:27,419 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:27,419 - INFO     -       - Node 12: 20 states
2025-10-29 13:53:27,419 - INFO     -       - Node 6: 5 states
2025-10-29 13:53:27,419 - INFO     -       - Expected product: 100 states
2025-10-29 13:53:27,419 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:27,425 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:53:27,425 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:27,425 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:53:27,526 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:27,526 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:27,526 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:53:27,527 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:27,527 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:27,527 - INFO     -   Calling graph_tracker.merge_nodes([12, 6])...
2025-10-29 13:53:27,527 - INFO     - Attempting merge of nodes 12 and 6...
2025-10-29 13:53:27,527 - INFO     - Successfully merged nodes into new node 13 with 100 states.
2025-10-29 13:53:27,527 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:27,527 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:27,527 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:53:27,528 - INFO     - 
================================================================================
2025-10-29 13:53:27,528 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:53:27,528 - INFO     - ================================================================================
2025-10-29 13:53:27,528 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:27,528 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:53:27,528 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:53:27,528 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:27,528 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:27,528 - INFO     -   - Raw ts1_f length: 20
2025-10-29 13:53:27,528 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:27,529 - INFO     -   - Raw f_after length: 100
2025-10-29 13:53:27,529 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:27,529 - INFO     -   - ts1_valid: 20 / 20 (removed 0)
2025-10-29 13:53:27,529 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:27,529 - INFO     -   - after_valid: 100 / 100 (removed 0)
2025-10-29 13:53:27,529 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:27,529 - INFO     -   - ts1_id: 12
2025-10-29 13:53:27,529 - INFO     -   - ts2_id: 6
2025-10-29 13:53:27,529 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:27,529 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:27,529 - INFO     -   - ts1_size: 20, ts2_size: 5
2025-10-29 13:53:27,529 - INFO     -   - Product space size: 100
2025-10-29 13:53:27,529 - INFO     -   - Using product state mapping
2025-10-29 13:53:27,529 - INFO     -   - f_before_product length: 100
2025-10-29 13:53:27,530 - INFO     -   - avg_f_before: 4.4300 (100 valid states)
2025-10-29 13:53:27,530 - INFO     -   - avg_f_after:  7.0800 (100 valid states)
2025-10-29 13:53:27,530 - INFO     -   - delta: 2.6500
2025-10-29 13:53:27,530 - INFO     -   - f_stability: 1.0 - |2.6500| / 4.4300 = 0.4018
2025-10-29 13:53:27,530 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:27,530 - INFO     -   - Compared 25 values
2025-10-29 13:53:27,530 - INFO     -   - Significant changes (> 5.0): 3
2025-10-29 13:53:27,530 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:27,530 - INFO     -   - states_before: 100
2025-10-29 13:53:27,530 - INFO     -   - states_after: 100
2025-10-29 13:53:27,530 - INFO     -   - delta_states: 0
2025-10-29 13:53:27,530 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:27,530 - INFO     -   - ts1_transitions: 128
2025-10-29 13:53:27,531 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:27,531 - INFO     -   - merged_transitions: 750
2025-10-29 13:53:27,531 - INFO     -   - transition_density_change: 6.0900
2025-10-29 13:53:27,531 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:27,531 - INFO     -   - search_signals present: True
2025-10-29 13:53:27,531 - INFO     -   - nodes_expanded: 100
2025-10-29 13:53:27,531 - INFO     -   - search_depth: 3
2025-10-29 13:53:27,531 - INFO     -   - solution_cost: 2
2025-10-29 13:53:27,531 - INFO     -   - branching_factor: 7.5000
2025-10-29 13:53:27,531 - INFO     -   - solution_found: True
2025-10-29 13:53:27,531 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:27,531 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:27,531 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:53:27,531 - INFO     -   - TS12(20) + TS6(5) → 100 states
2025-10-29 13:53:27,531 - INFO     -   - f_stability=0.402
2025-10-29 13:53:27,531 - INFO     -   - A* nodes_expanded=100
2025-10-29 13:53:27,531 - INFO     -   - solution_found=True
2025-10-29 13:53:27,531 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:27,531 - INFO     - 
  Extracted signals:
2025-10-29 13:53:27,531 - INFO     -     - iteration: 4
2025-10-29 13:53:27,531 - INFO     -     - states_before: 100
2025-10-29 13:53:27,531 - INFO     -     - states_after: 100
2025-10-29 13:53:27,531 - INFO     -     - delta_states: 0
2025-10-29 13:53:27,531 - INFO     -     - f_value_stability: 0.4018
2025-10-29 13:53:27,533 - INFO     -     - num_significant_f_changes: 3
2025-10-29 13:53:27,533 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:27,533 - INFO     -     - nodes_expanded: 100
2025-10-29 13:53:27,533 - INFO     -     - search_depth: 3
2025-10-29 13:53:27,533 - INFO     -     - solution_cost: 2
2025-10-29 13:53:27,533 - INFO     -     - branching_factor: 7.5000
2025-10-29 13:53:27,533 - INFO     -     - solution_found: True
2025-10-29 13:53:27,533 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:27,533 - INFO     - 
  Computing reward:
2025-10-29 13:53:27,533 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:27,533 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:27,533 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:27,533 - INFO     -   [1] BRANCHING FACTOR: 7.500 → score 0.150 (high BF, minimal credit)
2025-10-29 13:53:27,533 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:27,533 - INFO     -   [3] F-VALUE STABILITY: 0.169
2025-10-29 13:53:27,533 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:27,533 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:27,533 - INFO     - 
  [COMPOSITE]: 0.389
2025-10-29 13:53:27,533 - INFO     -     = 0.300*0.150 (bf)
2025-10-29 13:53:27,534 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:27,534 - INFO     -     + 0.350*0.169 (stability)
2025-10-29 13:53:27,534 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:27,534 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:27,534 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:27,534 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:27,534 - INFO     - 
  [FINAL REWARD]: -0.0224
2025-10-29 13:53:27,534 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:27,534 - INFO     -     ✓ Reward computed: -0.0224
2025-10-29 13:53:27,534 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:27,534 - INFO     -     - bf_score                       0.1500
2025-10-29 13:53:27,534 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:27,534 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:27,534 - INFO     -     - f_stability                    0.1687
2025-10-29 13:53:27,534 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:27,534 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:27,534 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:27,535 - INFO     -     - composite                      0.3888
2025-10-29 13:53:27,535 - INFO     -     - total                          -0.0224
2025-10-29 13:53:27,535 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:27,535 - INFO     -   Num remaining nodes: 4
2025-10-29 13:53:27,535 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:53:27,535 - INFO     -   Done: False
2025-10-29 13:53:27,535 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:27,536 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:27,536 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:27,536 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:27,536 - INFO     -     - num_nodes: 4
2025-10-29 13:53:27,536 - INFO     -     - num_edges: 12
2025-10-29 13:53:27,536 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:27,536 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:53:27,536 - INFO     -   After: current_merge_step = 5
2025-10-29 13:53:27,536 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:27,537 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:27,537 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:27,537 - INFO     -   ✓ Step logged
2025-10-29 13:53:27,537 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:27,537 - INFO     -   Returning:
2025-10-29 13:53:27,537 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:27,537 - INFO     -     - reward: -0.0224
2025-10-29 13:53:27,538 - INFO     -     - done: False
2025-10-29 13:53:27,538 - INFO     -     - truncated: False
2025-10-29 13:53:27,538 - INFO     -     - info: 19 keys
2025-10-29 13:53:27,538 - INFO     - ==========================================================================================

2025-10-29 13:53:27,542 - INFO     - 
==========================================================================================
2025-10-29 13:53:27,542 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:27,542 - INFO     - ==========================================================================================
2025-10-29 13:53:27,542 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:27,542 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:53:27,542 - INFO     -   Available edges in graph: 12
2025-10-29 13:53:27,542 - INFO     -   Action index calculation:
2025-10-29 13:53:27,542 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 12 = 2
2025-10-29 13:53:27,542 - INFO     -     - clamped to [0, 11]: 2
2025-10-29 13:53:27,542 - INFO     -   ✓ Extracted merge pair from edge 2: (8, 13)
2025-10-29 13:53:27,542 - INFO     -   ✓ Validation passed
2025-10-29 13:53:27,542 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:27,543 - INFO     -     - Total states before merge: 119
2025-10-29 13:53:27,543 - INFO     -     - Num nodes: 4
2025-10-29 13:53:27,543 - INFO     -     - Num edges: 12
2025-10-29 13:53:27,543 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:27,543 - INFO     -       - Node 8: 5 states
2025-10-29 13:53:27,543 - INFO     -       - Node 13: 100 states
2025-10-29 13:53:27,543 - INFO     -       - Expected product: 500 states
2025-10-29 13:53:27,543 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:27,548 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:53:27,548 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:27,549 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:53:27,650 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:27,650 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:27,650 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:53:27,654 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:27,654 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:27,654 - INFO     -   Calling graph_tracker.merge_nodes([8, 13])...
2025-10-29 13:53:27,655 - INFO     - Attempting merge of nodes 8 and 13...
2025-10-29 13:53:27,655 - INFO     - Successfully merged nodes into new node 14 with 500 states.
2025-10-29 13:53:27,655 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:27,655 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:27,655 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:53:27,655 - INFO     - 
================================================================================
2025-10-29 13:53:27,655 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:53:27,655 - INFO     - ================================================================================
2025-10-29 13:53:27,655 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:27,655 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:53:27,655 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:53:27,656 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:27,656 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:27,656 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:27,656 - INFO     -   - Raw ts2_f length: 100
2025-10-29 13:53:27,656 - INFO     -   - Raw f_after length: 500
2025-10-29 13:53:27,656 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:27,656 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:27,656 - INFO     -   - ts2_valid: 100 / 100 (removed -100)
2025-10-29 13:53:27,657 - INFO     -   - after_valid: 500 / 500 (removed 0)
2025-10-29 13:53:27,657 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:27,657 - INFO     -   - ts1_id: 8
2025-10-29 13:53:27,657 - INFO     -   - ts2_id: 13
2025-10-29 13:53:27,657 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:27,657 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:27,657 - INFO     -   - ts1_size: 5, ts2_size: 100
2025-10-29 13:53:27,657 - INFO     -   - Product space size: 500
2025-10-29 13:53:27,657 - INFO     -   - Using product state mapping
2025-10-29 13:53:27,658 - INFO     -   - f_before_product length: 500
2025-10-29 13:53:27,659 - INFO     -   - avg_f_before: 7.1460 (500 valid states)
2025-10-29 13:53:27,659 - INFO     -   - avg_f_after:  10.1400 (500 valid states)
2025-10-29 13:53:27,659 - INFO     -   - delta: 2.9940
2025-10-29 13:53:27,659 - INFO     -   - f_stability: 1.0 - |2.9940| / 7.1460 = 0.5810
2025-10-29 13:53:27,659 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:27,659 - INFO     -   - Compared 105 values
2025-10-29 13:53:27,659 - INFO     -   - Significant changes (> 5.0): 8
2025-10-29 13:53:27,659 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:27,659 - INFO     -   - states_before: 500
2025-10-29 13:53:27,659 - INFO     -   - states_after: 500
2025-10-29 13:53:27,659 - INFO     -   - delta_states: 0
2025-10-29 13:53:27,659 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:27,659 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:27,659 - INFO     -   - ts2_transitions: 750
2025-10-29 13:53:27,659 - INFO     -   - merged_transitions: 3800
2025-10-29 13:53:27,659 - INFO     -   - transition_density_change: 6.0740
2025-10-29 13:53:27,660 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:27,660 - INFO     -   - search_signals present: True
2025-10-29 13:53:27,660 - INFO     -   - nodes_expanded: 500
2025-10-29 13:53:27,660 - INFO     -   - search_depth: 5
2025-10-29 13:53:27,660 - INFO     -   - solution_cost: 2
2025-10-29 13:53:27,660 - INFO     -   - branching_factor: 7.6000
2025-10-29 13:53:27,660 - INFO     -   - solution_found: True
2025-10-29 13:53:27,660 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:27,660 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:27,660 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:53:27,660 - INFO     -   - TS8(5) + TS13(100) → 500 states
2025-10-29 13:53:27,661 - INFO     -   - f_stability=0.581
2025-10-29 13:53:27,661 - INFO     -   - A* nodes_expanded=500
2025-10-29 13:53:27,661 - INFO     -   - solution_found=True
2025-10-29 13:53:27,661 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:27,661 - INFO     - 
  Extracted signals:
2025-10-29 13:53:27,661 - INFO     -     - iteration: 5
2025-10-29 13:53:27,661 - INFO     -     - states_before: 500
2025-10-29 13:53:27,661 - INFO     -     - states_after: 500
2025-10-29 13:53:27,661 - INFO     -     - delta_states: 0
2025-10-29 13:53:27,661 - INFO     -     - f_value_stability: 0.5810
2025-10-29 13:53:27,661 - INFO     -     - num_significant_f_changes: 8
2025-10-29 13:53:27,661 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:27,661 - INFO     -     - nodes_expanded: 500
2025-10-29 13:53:27,661 - INFO     -     - search_depth: 5
2025-10-29 13:53:27,661 - INFO     -     - solution_cost: 2
2025-10-29 13:53:27,661 - INFO     -     - branching_factor: 7.6000
2025-10-29 13:53:27,661 - INFO     -     - solution_found: True
2025-10-29 13:53:27,662 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:27,662 - INFO     - 
  Computing reward:
2025-10-29 13:53:27,662 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:27,662 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:27,662 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:27,662 - INFO     -   [1] BRANCHING FACTOR: 7.600 → score 0.140 (high BF, minimal credit)
2025-10-29 13:53:27,662 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:27,662 - INFO     -   [3] F-VALUE STABILITY: 0.647
2025-10-29 13:53:27,662 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:27,663 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:27,663 - INFO     - 
  [COMPOSITE]: 0.543
2025-10-29 13:53:27,663 - INFO     -     = 0.300*0.140 (bf)
2025-10-29 13:53:27,663 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:27,663 - INFO     -     + 0.350*0.647 (stability)
2025-10-29 13:53:27,663 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:27,663 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:27,663 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:27,664 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:27,664 - INFO     - 
  [FINAL REWARD]: 0.4856
2025-10-29 13:53:27,664 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:27,664 - INFO     -     ✓ Reward computed: 0.4856
2025-10-29 13:53:27,664 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:27,664 - INFO     -     - bf_score                       0.1400
2025-10-29 13:53:27,664 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:27,664 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:27,664 - INFO     -     - f_stability                    0.6468
2025-10-29 13:53:27,664 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:27,665 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:27,665 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:27,665 - INFO     -     - composite                      0.5428
2025-10-29 13:53:27,665 - INFO     -     - total                          0.4856
2025-10-29 13:53:27,665 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:27,665 - INFO     -   Num remaining nodes: 3
2025-10-29 13:53:27,665 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:53:27,665 - INFO     -   Done: False
2025-10-29 13:53:27,665 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:27,667 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:27,667 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:27,667 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:27,667 - INFO     -     - num_nodes: 3
2025-10-29 13:53:27,667 - INFO     -     - num_edges: 6
2025-10-29 13:53:27,667 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:27,667 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:53:27,667 - INFO     -   After: current_merge_step = 6
2025-10-29 13:53:27,667 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:27,667 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:27,667 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:27,668 - INFO     -   ✓ Step logged
2025-10-29 13:53:27,668 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:27,668 - INFO     -   Returning:
2025-10-29 13:53:27,668 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:27,668 - INFO     -     - reward: 0.4856
2025-10-29 13:53:27,668 - INFO     -     - done: False
2025-10-29 13:53:27,668 - INFO     -     - truncated: False
2025-10-29 13:53:27,668 - INFO     -     - info: 19 keys
2025-10-29 13:53:27,669 - INFO     - ==========================================================================================

2025-10-29 13:53:27,673 - INFO     - 
==========================================================================================
2025-10-29 13:53:27,673 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:27,673 - INFO     - ==========================================================================================
2025-10-29 13:53:27,673 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:27,673 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:53:27,673 - INFO     -   Available edges in graph: 6
2025-10-29 13:53:27,673 - INFO     -   Action index calculation:
2025-10-29 13:53:27,673 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 6 = 0
2025-10-29 13:53:27,673 - INFO     -     - clamped to [0, 5]: 0
2025-10-29 13:53:27,674 - INFO     -   ✓ Extracted merge pair from edge 0: (9, 11)
2025-10-29 13:53:27,674 - INFO     -   ✓ Validation passed
2025-10-29 13:53:27,674 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:27,674 - INFO     -     - Total states before merge: 514
2025-10-29 13:53:27,674 - INFO     -     - Num nodes: 3
2025-10-29 13:53:27,674 - INFO     -     - Num edges: 6
2025-10-29 13:53:27,674 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:27,674 - INFO     -       - Node 9: 4 states
2025-10-29 13:53:27,674 - INFO     -       - Node 11: 10 states
2025-10-29 13:53:27,674 - INFO     -       - Expected product: 40 states
2025-10-29 13:53:27,674 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:27,681 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:53:27,681 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:27,681 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:53:27,782 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:27,782 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:27,783 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:53:27,783 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:27,783 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:27,783 - INFO     -   Calling graph_tracker.merge_nodes([9, 11])...
2025-10-29 13:53:27,783 - INFO     - Attempting merge of nodes 9 and 11...
2025-10-29 13:53:27,783 - INFO     - Successfully merged nodes into new node 15 with 40 states.
2025-10-29 13:53:27,783 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:27,783 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:27,783 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:53:27,783 - INFO     - 
================================================================================
2025-10-29 13:53:27,783 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:53:27,783 - INFO     - ================================================================================
2025-10-29 13:53:27,783 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:27,783 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:53:27,783 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:53:27,784 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:27,784 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:27,784 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:53:27,785 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:27,785 - INFO     -   - Raw f_after length: 40
2025-10-29 13:53:27,785 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:27,785 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:53:27,785 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:27,785 - INFO     -   - after_valid: 40 / 40 (removed 0)
2025-10-29 13:53:27,785 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:27,785 - INFO     -   - ts1_id: 9
2025-10-29 13:53:27,785 - INFO     -   - ts2_id: 11
2025-10-29 13:53:27,785 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:27,785 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:27,785 - INFO     -   - ts1_size: 4, ts2_size: 10
2025-10-29 13:53:27,785 - INFO     -   - Product space size: 40
2025-10-29 13:53:27,785 - INFO     -   - Using product state mapping
2025-10-29 13:53:27,785 - INFO     -   - f_before_product length: 40
2025-10-29 13:53:27,786 - INFO     -   - avg_f_before: 3.6000 (40 valid states)
2025-10-29 13:53:27,786 - INFO     -   - avg_f_after:  5.0000 (40 valid states)
2025-10-29 13:53:27,786 - INFO     -   - delta: 1.4000
2025-10-29 13:53:27,786 - INFO     -   - f_stability: 1.0 - |1.4000| / 3.6000 = 0.6111
2025-10-29 13:53:27,786 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:27,786 - INFO     -   - Compared 14 values
2025-10-29 13:53:27,786 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:27,786 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:27,786 - INFO     -   - states_before: 40
2025-10-29 13:53:27,786 - INFO     -   - states_after: 40
2025-10-29 13:53:27,786 - INFO     -   - delta_states: 0
2025-10-29 13:53:27,787 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:27,787 - INFO     -   - ts1_transitions: 15
2025-10-29 13:53:27,787 - INFO     -   - ts2_transitions: 37
2025-10-29 13:53:27,787 - INFO     -   - merged_transitions: 256
2025-10-29 13:53:27,787 - INFO     -   - transition_density_change: 5.1000
2025-10-29 13:53:27,787 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:27,787 - INFO     -   - search_signals present: True
2025-10-29 13:53:27,787 - INFO     -   - nodes_expanded: 40
2025-10-29 13:53:27,787 - INFO     -   - search_depth: 2
2025-10-29 13:53:27,787 - INFO     -   - solution_cost: 2
2025-10-29 13:53:27,787 - INFO     -   - branching_factor: 6.4000
2025-10-29 13:53:27,787 - INFO     -   - solution_found: True
2025-10-29 13:53:27,787 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:27,787 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:27,788 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:53:27,788 - INFO     -   - TS9(4) + TS11(10) → 40 states
2025-10-29 13:53:27,788 - INFO     -   - f_stability=0.611
2025-10-29 13:53:27,788 - INFO     -   - A* nodes_expanded=40
2025-10-29 13:53:27,788 - INFO     -   - solution_found=True
2025-10-29 13:53:27,788 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:27,788 - INFO     - 
  Extracted signals:
2025-10-29 13:53:27,788 - INFO     -     - iteration: 6
2025-10-29 13:53:27,788 - INFO     -     - states_before: 40
2025-10-29 13:53:27,788 - INFO     -     - states_after: 40
2025-10-29 13:53:27,788 - INFO     -     - delta_states: 0
2025-10-29 13:53:27,788 - INFO     -     - f_value_stability: 0.6111
2025-10-29 13:53:27,788 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:27,788 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:27,788 - INFO     -     - nodes_expanded: 40
2025-10-29 13:53:27,788 - INFO     -     - search_depth: 2
2025-10-29 13:53:27,788 - INFO     -     - solution_cost: 2
2025-10-29 13:53:27,789 - INFO     -     - branching_factor: 6.4000
2025-10-29 13:53:27,789 - INFO     -     - solution_found: True
2025-10-29 13:53:27,789 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:27,789 - INFO     - 
  Computing reward:
2025-10-29 13:53:27,789 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:27,789 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:27,789 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:27,789 - INFO     -   [1] BRANCHING FACTOR: 6.400 → score 0.260 (high BF, minimal credit)
2025-10-29 13:53:27,789 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:27,790 - INFO     -   [3] F-VALUE STABILITY: 0.397
2025-10-29 13:53:27,790 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:27,790 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:27,790 - INFO     - 
  [COMPOSITE]: 0.509
2025-10-29 13:53:27,790 - INFO     -     = 0.300*0.260 (bf)
2025-10-29 13:53:27,790 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:27,790 - INFO     -     + 0.350*0.397 (stability)
2025-10-29 13:53:27,790 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:27,790 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:27,790 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:27,790 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:27,790 - INFO     - 
  [FINAL REWARD]: 0.3178
2025-10-29 13:53:27,790 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:27,790 - INFO     -     ✓ Reward computed: 0.3178
2025-10-29 13:53:27,790 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:27,790 - INFO     -     - bf_score                       0.2600
2025-10-29 13:53:27,791 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:27,791 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:27,791 - INFO     -     - f_stability                    0.3967
2025-10-29 13:53:27,791 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:27,791 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:27,791 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:27,791 - INFO     -     - composite                      0.5089
2025-10-29 13:53:27,791 - INFO     -     - total                          0.3178
2025-10-29 13:53:27,791 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:27,791 - INFO     -   Num remaining nodes: 2
2025-10-29 13:53:27,791 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:53:27,791 - INFO     -   Done: False
2025-10-29 13:53:27,791 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:27,792 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:27,792 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:27,792 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:27,792 - INFO     -     - num_nodes: 2
2025-10-29 13:53:27,792 - INFO     -     - num_edges: 2
2025-10-29 13:53:27,792 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:27,792 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:53:27,792 - INFO     -   After: current_merge_step = 7
2025-10-29 13:53:27,792 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:27,792 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:27,792 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:27,793 - INFO     -   ✓ Step logged
2025-10-29 13:53:27,793 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:27,793 - INFO     -   Returning:
2025-10-29 13:53:27,793 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:27,793 - INFO     -     - reward: 0.3178
2025-10-29 13:53:27,793 - INFO     -     - done: False
2025-10-29 13:53:27,793 - INFO     -     - truncated: False
2025-10-29 13:53:27,794 - INFO     -     - info: 19 keys
2025-10-29 13:53:27,794 - INFO     - ==========================================================================================

2025-10-29 13:53:27,798 - INFO     - 
==========================================================================================
2025-10-29 13:53:27,798 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:27,798 - INFO     - ==========================================================================================
2025-10-29 13:53:27,798 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:27,798 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:53:27,798 - INFO     -   Available edges in graph: 2
2025-10-29 13:53:27,798 - INFO     -   Action index calculation:
2025-10-29 13:53:27,798 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:53:27,798 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:53:27,798 - INFO     -   ✓ Extracted merge pair from edge 0: (14, 15)
2025-10-29 13:53:27,798 - INFO     -   ✓ Validation passed
2025-10-29 13:53:27,798 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:27,798 - INFO     -     - Total states before merge: 540
2025-10-29 13:53:27,798 - INFO     -     - Num nodes: 2
2025-10-29 13:53:27,798 - INFO     -     - Num edges: 2
2025-10-29 13:53:27,798 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:27,798 - INFO     -       - Node 14: 500 states
2025-10-29 13:53:27,798 - INFO     -       - Node 15: 40 states
2025-10-29 13:53:27,798 - INFO     -       - Expected product: 20000 states
2025-10-29 13:53:27,798 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:27,805 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:53:27,805 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:27,805 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:53:27,906 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:27,906 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:27,906 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:53:28,122 - INFO     -   ✓ TS file received after 0.22s
2025-10-29 13:53:28,122 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:28,122 - INFO     -   Calling graph_tracker.merge_nodes([14, 15])...
2025-10-29 13:53:28,122 - INFO     - Attempting merge of nodes 14 and 15...
2025-10-29 13:53:28,122 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:53:28,122 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:28,122 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:28,122 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:53:28,122 - INFO     - 
================================================================================
2025-10-29 13:53:28,122 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:53:28,122 - INFO     - ================================================================================
2025-10-29 13:53:28,122 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:28,122 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:53:28,122 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:53:28,126 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:28,126 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:28,126 - INFO     -   - Raw ts1_f length: 93
2025-10-29 13:53:28,127 - INFO     -   - Raw ts2_f length: 40
2025-10-29 13:53:28,127 - INFO     -   - Raw f_after length: 3720
2025-10-29 13:53:28,127 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:28,127 - INFO     -   - ts1_valid: 93 / 93 (removed 0)
2025-10-29 13:53:28,127 - INFO     -   - ts2_valid: 40 / 40 (removed -40)
2025-10-29 13:53:28,128 - INFO     -   - after_valid: 2172 / 3720 (removed 1548)
2025-10-29 13:53:28,128 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:28,128 - INFO     -   - ts1_id: 14
2025-10-29 13:53:28,128 - INFO     -   - ts2_id: 15
2025-10-29 13:53:28,128 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:28,128 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:28,128 - INFO     -   - ts1_size: 93, ts2_size: 40
2025-10-29 13:53:28,128 - INFO     -   - Product space size: 3720
2025-10-29 13:53:28,128 - INFO     -   - Using product state mapping
2025-10-29 13:53:28,133 - INFO     -   - f_before_product length: 3720
2025-10-29 13:53:28,139 - INFO     -   - avg_f_before: 6.3895 (3720 valid states)
2025-10-29 13:53:28,139 - INFO     -   - avg_f_after:  10.7017 (2172 valid states)
2025-10-29 13:53:28,139 - INFO     -   - delta: 4.3121
2025-10-29 13:53:28,140 - INFO     -   - f_stability: 1.0 - |4.3121| / 6.3895 = 0.3251
2025-10-29 13:53:28,140 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:28,140 - INFO     -   - Compared 133 values
2025-10-29 13:53:28,140 - INFO     -   - Significant changes (> 5.0): 58
2025-10-29 13:53:28,140 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:28,140 - INFO     -   - states_before: 3720
2025-10-29 13:53:28,140 - INFO     -   - states_after: 3720
2025-10-29 13:53:28,140 - INFO     -   - delta_states: 0
2025-10-29 13:53:28,140 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:28,140 - INFO     -   - ts1_transitions: 1011
2025-10-29 13:53:28,140 - INFO     -   - ts2_transitions: 256
2025-10-29 13:53:28,140 - INFO     -   - merged_transitions: 16480
2025-10-29 13:53:28,140 - INFO     -   - transition_density_change: 4.0895
2025-10-29 13:53:28,140 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:28,140 - INFO     -   - search_signals present: True
2025-10-29 13:53:28,140 - INFO     -   - nodes_expanded: 2172
2025-10-29 13:53:28,140 - INFO     -   - search_depth: 5
2025-10-29 13:53:28,140 - INFO     -   - solution_cost: 4
2025-10-29 13:53:28,141 - INFO     -   - branching_factor: 7.5875
2025-10-29 13:53:28,141 - INFO     -   - solution_found: True
2025-10-29 13:53:28,141 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:28,142 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:28,142 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:53:28,142 - INFO     -   - TS14(93) + TS15(40) → 3720 states
2025-10-29 13:53:28,142 - INFO     -   - f_stability=0.325
2025-10-29 13:53:28,142 - INFO     -   - A* nodes_expanded=2172
2025-10-29 13:53:28,142 - INFO     -   - solution_found=True
2025-10-29 13:53:28,142 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:28,142 - INFO     - 
  Extracted signals:
2025-10-29 13:53:28,142 - INFO     -     - iteration: 7
2025-10-29 13:53:28,142 - INFO     -     - states_before: 3720
2025-10-29 13:53:28,142 - INFO     -     - states_after: 3720
2025-10-29 13:53:28,142 - INFO     -     - delta_states: 0
2025-10-29 13:53:28,142 - INFO     -     - f_value_stability: 0.3251
2025-10-29 13:53:28,142 - INFO     -     - num_significant_f_changes: 58
2025-10-29 13:53:28,142 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:28,143 - INFO     -     - nodes_expanded: 2172
2025-10-29 13:53:28,143 - INFO     -     - search_depth: 5
2025-10-29 13:53:28,143 - INFO     -     - solution_cost: 4
2025-10-29 13:53:28,143 - INFO     -     - branching_factor: 7.5875
2025-10-29 13:53:28,143 - INFO     -     - solution_found: True
2025-10-29 13:53:28,143 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:28,143 - INFO     - 
  Computing reward:
2025-10-29 13:53:28,143 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:28,143 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:28,144 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:28,144 - INFO     -   [1] BRANCHING FACTOR: 7.587 → score 0.141 (high BF, minimal credit)
2025-10-29 13:53:28,144 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:28,146 - INFO     -   [3] F-VALUE STABILITY: 0.431
2025-10-29 13:53:28,146 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:28,146 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:28,146 - INFO     - 
  [COMPOSITE]: 0.468
2025-10-29 13:53:28,146 - INFO     -     = 0.300*0.141 (bf)
2025-10-29 13:53:28,146 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:28,146 - INFO     -     + 0.350*0.431 (stability)
2025-10-29 13:53:28,146 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:28,146 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:28,146 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:28,146 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:28,146 - INFO     - 
  [FINAL REWARD]: 0.2354
2025-10-29 13:53:28,146 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:28,146 - INFO     -     ✓ Reward computed: 0.2354
2025-10-29 13:53:28,146 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:28,146 - INFO     -     - bf_score                       0.1413
2025-10-29 13:53:28,147 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:28,147 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:28,147 - INFO     -     - f_stability                    0.4311
2025-10-29 13:53:28,147 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:28,147 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:28,147 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:28,147 - INFO     -     - composite                      0.4677
2025-10-29 13:53:28,147 - INFO     -     - total                          0.2354
2025-10-29 13:53:28,147 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:28,147 - INFO     -   Num remaining nodes: 1
2025-10-29 13:53:28,147 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:53:28,147 - INFO     -   Done: True
2025-10-29 13:53:28,147 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:53:28,147 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:28,148 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:28,148 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:28,148 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:28,148 - INFO     -     - num_nodes: 1
2025-10-29 13:53:28,148 - INFO     -     - num_edges: 0
2025-10-29 13:53:28,148 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:28,148 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:53:28,148 - INFO     -   After: current_merge_step = 8
2025-10-29 13:53:28,148 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:28,148 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:28,148 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:28,149 - INFO     -   ✓ Step logged
2025-10-29 13:53:28,149 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:28,149 - INFO     -   Returning:
2025-10-29 13:53:28,149 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:28,149 - INFO     -     - reward: 0.2354
2025-10-29 13:53:28,149 - INFO     -     - done: True
2025-10-29 13:53:28,149 - INFO     -     - truncated: False
2025-10-29 13:53:28,149 - INFO     -     - info: 19 keys
2025-10-29 13:53:28,149 - INFO     - ==========================================================================================

2025-10-29 13:53:28,241 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:53:28,251 - INFO     - [Handshake] Building FD command:
2025-10-29 13:53:28,251 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:28,251 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_03.pddl
2025-10-29 13:53:28,251 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:53:28,255 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:29,008 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:29,008 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:29,008 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:29,326 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:29,326 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:29,326 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:29,327 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:29,327 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:29,327 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:29,327 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:29,327 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:29,327 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:29,327 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:29,327 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:29,327 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:29,327 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:29,327 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:29,328 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:29,328 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:29,328 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:29,328 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:29,328 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:29,328 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:29,328 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:29,328 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:29,328 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:29,329 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:29,329 - INFO     - Added edge (0, 1)
2025-10-29 13:53:29,329 - INFO     - Added edge (0, 2)
2025-10-29 13:53:29,329 - INFO     - Added edge (0, 3)
2025-10-29 13:53:29,329 - INFO     - Added edge (0, 4)
2025-10-29 13:53:29,329 - INFO     - Added edge (0, 5)
2025-10-29 13:53:29,329 - INFO     - Added edge (0, 6)
2025-10-29 13:53:29,329 - INFO     - Added edge (0, 7)
2025-10-29 13:53:29,329 - INFO     - Added edge (0, 8)
2025-10-29 13:53:29,329 - INFO     - Added edge (1, 0)
2025-10-29 13:53:29,329 - INFO     - Added edge (1, 2)
2025-10-29 13:53:29,329 - INFO     - Added edge (1, 3)
2025-10-29 13:53:29,329 - INFO     - Added edge (1, 4)
2025-10-29 13:53:29,329 - INFO     - Added edge (1, 5)
2025-10-29 13:53:29,329 - INFO     - Added edge (1, 6)
2025-10-29 13:53:29,329 - INFO     - Added edge (1, 7)
2025-10-29 13:53:29,329 - INFO     - Added edge (1, 8)
2025-10-29 13:53:29,329 - INFO     - Added edge (2, 0)
2025-10-29 13:53:29,330 - INFO     - Added edge (2, 1)
2025-10-29 13:53:29,330 - INFO     - Added edge (2, 3)
2025-10-29 13:53:29,330 - INFO     - Added edge (2, 4)
2025-10-29 13:53:29,330 - INFO     - Added edge (2, 5)
2025-10-29 13:53:29,330 - INFO     - Added edge (2, 6)
2025-10-29 13:53:29,330 - INFO     - Added edge (2, 7)
2025-10-29 13:53:29,330 - INFO     - Added edge (2, 8)
2025-10-29 13:53:29,330 - INFO     - Added edge (3, 0)
2025-10-29 13:53:29,330 - INFO     - Added edge (3, 1)
2025-10-29 13:53:29,330 - INFO     - Added edge (3, 2)
2025-10-29 13:53:29,330 - INFO     - Added edge (3, 4)
2025-10-29 13:53:29,330 - INFO     - Added edge (3, 5)
2025-10-29 13:53:29,330 - INFO     - Added edge (3, 6)
2025-10-29 13:53:29,330 - INFO     - Added edge (3, 7)
2025-10-29 13:53:29,330 - INFO     - Added edge (3, 8)
2025-10-29 13:53:29,330 - INFO     - Added edge (4, 0)
2025-10-29 13:53:29,330 - INFO     - Added edge (4, 1)
2025-10-29 13:53:29,330 - INFO     - Added edge (4, 2)
2025-10-29 13:53:29,330 - INFO     - Added edge (4, 3)
2025-10-29 13:53:29,330 - INFO     - Added edge (4, 5)
2025-10-29 13:53:29,330 - INFO     - Added edge (4, 6)
2025-10-29 13:53:29,331 - INFO     - Added edge (4, 7)
2025-10-29 13:53:29,331 - INFO     - Added edge (4, 8)
2025-10-29 13:53:29,331 - INFO     - Added edge (5, 0)
2025-10-29 13:53:29,331 - INFO     - Added edge (5, 1)
2025-10-29 13:53:29,331 - INFO     - Added edge (5, 2)
2025-10-29 13:53:29,331 - INFO     - Added edge (5, 3)
2025-10-29 13:53:29,331 - INFO     - Added edge (5, 4)
2025-10-29 13:53:29,331 - INFO     - Added edge (6, 0)
2025-10-29 13:53:29,331 - INFO     - Added edge (6, 1)
2025-10-29 13:53:29,331 - INFO     - Added edge (6, 2)
2025-10-29 13:53:29,331 - INFO     - Added edge (6, 3)
2025-10-29 13:53:29,331 - INFO     - Added edge (6, 4)
2025-10-29 13:53:29,331 - INFO     - Added edge (7, 0)
2025-10-29 13:53:29,331 - INFO     - Added edge (7, 1)
2025-10-29 13:53:29,331 - INFO     - Added edge (7, 2)
2025-10-29 13:53:29,331 - INFO     - Added edge (7, 3)
2025-10-29 13:53:29,331 - INFO     - Added edge (7, 4)
2025-10-29 13:53:29,332 - INFO     - Added edge (8, 0)
2025-10-29 13:53:29,332 - INFO     - Added edge (8, 1)
2025-10-29 13:53:29,332 - INFO     - Added edge (8, 2)
2025-10-29 13:53:29,332 - INFO     - Added edge (8, 3)
2025-10-29 13:53:29,332 - INFO     - Added edge (8, 4)
2025-10-29 13:53:29,332 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:29,339 - INFO     - 
==========================================================================================
2025-10-29 13:53:29,339 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:29,339 - INFO     - ==========================================================================================
2025-10-29 13:53:29,339 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:29,339 - INFO     -   Input action: 31 (type: int)
2025-10-29 13:53:29,339 - INFO     -   Available edges in graph: 60
2025-10-29 13:53:29,339 - INFO     -   Action index calculation:
2025-10-29 13:53:29,339 - INFO     -     - action % max(num_valid_edges, 1) = 31 % 60 = 31
2025-10-29 13:53:29,339 - INFO     -     - clamped to [0, 59]: 31
2025-10-29 13:53:29,339 - INFO     -   ✓ Extracted merge pair from edge 31: (3, 8)
2025-10-29 13:53:29,339 - INFO     -   ✓ Validation passed
2025-10-29 13:53:29,339 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:29,339 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:29,339 - INFO     -     - Num nodes: 9
2025-10-29 13:53:29,339 - INFO     -     - Num edges: 60
2025-10-29 13:53:29,340 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:29,340 - INFO     -       - Node 3: 2 states
2025-10-29 13:53:29,340 - INFO     -       - Node 8: 5 states
2025-10-29 13:53:29,340 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:29,340 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:29,349 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:53:29,349 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:29,349 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:53:29,450 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:29,450 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:29,451 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:53:29,451 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:29,451 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:29,451 - INFO     -   Calling graph_tracker.merge_nodes([3, 8])...
2025-10-29 13:53:29,451 - INFO     - Attempting merge of nodes 3 and 8...
2025-10-29 13:53:29,451 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:53:29,451 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:29,451 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:29,451 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:53:29,452 - INFO     - 
================================================================================
2025-10-29 13:53:29,452 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:53:29,452 - INFO     - ================================================================================
2025-10-29 13:53:29,452 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:29,452 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:53:29,452 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:53:29,453 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:29,453 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:29,453 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:29,453 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:29,453 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:29,453 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:29,453 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:29,453 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:29,453 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:29,453 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:29,453 - INFO     -   - ts1_id: 3
2025-10-29 13:53:29,453 - INFO     -   - ts2_id: 8
2025-10-29 13:53:29,453 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:29,453 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:29,453 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:53:29,453 - INFO     -   - Product space size: 10
2025-10-29 13:53:29,453 - INFO     -   - Using product state mapping
2025-10-29 13:53:29,454 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:29,454 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:53:29,454 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:53:29,454 - INFO     -   - delta: 0.7000
2025-10-29 13:53:29,454 - INFO     -   - f_stability: 1.0 - |0.7000| / 2.9000 = 0.7586
2025-10-29 13:53:29,454 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:29,454 - INFO     -   - Compared 7 values
2025-10-29 13:53:29,454 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:29,454 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:29,454 - INFO     -   - states_before: 10
2025-10-29 13:53:29,454 - INFO     -   - states_after: 10
2025-10-29 13:53:29,454 - INFO     -   - delta_states: 0
2025-10-29 13:53:29,454 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:29,454 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:29,454 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:29,455 - INFO     -   - merged_transitions: 37
2025-10-29 13:53:29,455 - INFO     -   - transition_density_change: 1.9000
2025-10-29 13:53:29,455 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:29,455 - INFO     -   - search_signals present: True
2025-10-29 13:53:29,455 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:29,455 - INFO     -   - search_depth: 2
2025-10-29 13:53:29,455 - INFO     -   - solution_cost: 0
2025-10-29 13:53:29,455 - INFO     -   - branching_factor: 3.7000
2025-10-29 13:53:29,455 - INFO     -   - solution_found: True
2025-10-29 13:53:29,455 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:29,455 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:29,455 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:53:29,455 - INFO     -   - TS3(2) + TS8(5) → 10 states
2025-10-29 13:53:29,455 - INFO     -   - f_stability=0.759
2025-10-29 13:53:29,456 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:29,456 - INFO     -   - solution_found=True
2025-10-29 13:53:29,456 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:29,456 - INFO     - 
  Extracted signals:
2025-10-29 13:53:29,456 - INFO     -     - iteration: 0
2025-10-29 13:53:29,456 - INFO     -     - states_before: 10
2025-10-29 13:53:29,456 - INFO     -     - states_after: 10
2025-10-29 13:53:29,456 - INFO     -     - delta_states: 0
2025-10-29 13:53:29,456 - INFO     -     - f_value_stability: 0.7586
2025-10-29 13:53:29,456 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:29,456 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:29,456 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:29,456 - INFO     -     - search_depth: 2
2025-10-29 13:53:29,456 - INFO     -     - solution_cost: 0
2025-10-29 13:53:29,456 - INFO     -     - branching_factor: 3.7000
2025-10-29 13:53:29,456 - INFO     -     - solution_found: True
2025-10-29 13:53:29,456 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:29,456 - INFO     - 
  Computing reward:
2025-10-29 13:53:29,457 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:29,457 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:29,457 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:29,457 - INFO     -   [1] BRANCHING FACTOR: 3.700 → score 0.607 (tolerable)
2025-10-29 13:53:29,457 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:29,457 - INFO     -   [3] F-VALUE STABILITY: 0.251
2025-10-29 13:53:29,457 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:29,457 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:29,457 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:53:29,457 - INFO     -     = 0.300*0.607 (bf)
2025-10-29 13:53:29,457 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:29,457 - INFO     -     + 0.350*0.251 (stability)
2025-10-29 13:53:29,458 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:29,458 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:29,458 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:29,458 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:29,458 - INFO     - 
  [FINAL REWARD]: 0.3236
2025-10-29 13:53:29,458 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:29,458 - INFO     -     ✓ Reward computed: 0.3236
2025-10-29 13:53:29,458 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:29,458 - INFO     -     - bf_score                       0.6067
2025-10-29 13:53:29,458 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:29,458 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:29,458 - INFO     -     - f_stability                    0.2507
2025-10-29 13:53:29,458 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:29,458 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:29,458 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:29,458 - INFO     -     - composite                      0.5618
2025-10-29 13:53:29,459 - INFO     -     - total                          0.3236
2025-10-29 13:53:29,459 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:29,459 - INFO     -   Num remaining nodes: 8
2025-10-29 13:53:29,459 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:53:29,459 - INFO     -   Done: False
2025-10-29 13:53:29,459 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:29,460 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:29,460 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:29,460 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:29,460 - INFO     -     - num_nodes: 8
2025-10-29 13:53:29,460 - INFO     -     - num_edges: 50
2025-10-29 13:53:29,460 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:29,460 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:53:29,460 - INFO     -   After: current_merge_step = 1
2025-10-29 13:53:29,460 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:29,460 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:29,460 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:29,462 - INFO     -   ✓ Step logged
2025-10-29 13:53:29,462 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:29,462 - INFO     -   Returning:
2025-10-29 13:53:29,462 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:29,462 - INFO     -     - reward: 0.3236
2025-10-29 13:53:29,462 - INFO     -     - done: False
2025-10-29 13:53:29,462 - INFO     -     - truncated: False
2025-10-29 13:53:29,463 - INFO     -     - info: 19 keys
2025-10-29 13:53:29,463 - INFO     - ==========================================================================================

2025-10-29 13:53:29,467 - INFO     - 
==========================================================================================
2025-10-29 13:53:29,468 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:29,468 - INFO     - ==========================================================================================
2025-10-29 13:53:29,468 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:29,468 - INFO     -   Input action: 30 (type: int)
2025-10-29 13:53:29,468 - INFO     -   Available edges in graph: 50
2025-10-29 13:53:29,468 - INFO     -   Action index calculation:
2025-10-29 13:53:29,468 - INFO     -     - action % max(num_valid_edges, 1) = 30 % 50 = 30
2025-10-29 13:53:29,468 - INFO     -     - clamped to [0, 49]: 30
2025-10-29 13:53:29,468 - INFO     -   ✓ Extracted merge pair from edge 30: (5, 2)
2025-10-29 13:53:29,468 - INFO     -   ✓ Validation passed
2025-10-29 13:53:29,468 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:29,468 - INFO     -     - Total states before merge: 33
2025-10-29 13:53:29,468 - INFO     -     - Num nodes: 8
2025-10-29 13:53:29,468 - INFO     -     - Num edges: 50
2025-10-29 13:53:29,468 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:29,468 - INFO     -       - Node 5: 5 states
2025-10-29 13:53:29,469 - INFO     -       - Node 2: 2 states
2025-10-29 13:53:29,469 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:29,469 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:29,478 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:53:29,478 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:29,479 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:53:29,580 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:29,580 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:29,580 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:53:29,581 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:29,581 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:29,581 - INFO     -   Calling graph_tracker.merge_nodes([5, 2])...
2025-10-29 13:53:29,581 - INFO     - Attempting merge of nodes 5 and 2...
2025-10-29 13:53:29,581 - INFO     - Successfully merged nodes into new node 10 with 10 states.
2025-10-29 13:53:29,581 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:29,581 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:29,581 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:53:29,581 - INFO     - 
================================================================================
2025-10-29 13:53:29,581 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:53:29,581 - INFO     - ================================================================================
2025-10-29 13:53:29,581 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:29,581 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:53:29,581 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:53:29,582 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:29,582 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:29,582 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:29,582 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:29,582 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:29,582 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:29,582 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:29,582 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:29,582 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:29,582 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:29,582 - INFO     -   - ts1_id: 5
2025-10-29 13:53:29,582 - INFO     -   - ts2_id: 2
2025-10-29 13:53:29,583 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:29,583 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:29,583 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:29,583 - INFO     -   - Product space size: 10
2025-10-29 13:53:29,583 - INFO     -   - Using product state mapping
2025-10-29 13:53:29,583 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:29,583 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:29,583 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:53:29,583 - INFO     -   - delta: 0.5000
2025-10-29 13:53:29,583 - INFO     -   - f_stability: 1.0 - |0.5000| / 2.8000 = 0.8214
2025-10-29 13:53:29,583 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:29,583 - INFO     -   - Compared 7 values
2025-10-29 13:53:29,583 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:29,583 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:29,583 - INFO     -   - states_before: 10
2025-10-29 13:53:29,584 - INFO     -   - states_after: 10
2025-10-29 13:53:29,584 - INFO     -   - delta_states: 0
2025-10-29 13:53:29,584 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:29,584 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:29,584 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:29,584 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:29,584 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:29,584 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:29,584 - INFO     -   - search_signals present: True
2025-10-29 13:53:29,584 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:29,584 - INFO     -   - search_depth: 1
2025-10-29 13:53:29,584 - INFO     -   - solution_cost: 2
2025-10-29 13:53:29,584 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:29,584 - INFO     -   - solution_found: True
2025-10-29 13:53:29,584 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:29,584 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:29,585 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:53:29,585 - INFO     -   - TS5(5) + TS2(2) → 10 states
2025-10-29 13:53:29,585 - INFO     -   - f_stability=0.821
2025-10-29 13:53:29,585 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:29,585 - INFO     -   - solution_found=True
2025-10-29 13:53:29,585 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:29,585 - INFO     - 
  Extracted signals:
2025-10-29 13:53:29,585 - INFO     -     - iteration: 1
2025-10-29 13:53:29,585 - INFO     -     - states_before: 10
2025-10-29 13:53:29,585 - INFO     -     - states_after: 10
2025-10-29 13:53:29,585 - INFO     -     - delta_states: 0
2025-10-29 13:53:29,585 - INFO     -     - f_value_stability: 0.8214
2025-10-29 13:53:29,585 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:29,585 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:29,585 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:29,586 - INFO     -     - search_depth: 1
2025-10-29 13:53:29,586 - INFO     -     - solution_cost: 2
2025-10-29 13:53:29,586 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:29,586 - INFO     -     - solution_found: True
2025-10-29 13:53:29,586 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:29,586 - INFO     - 
  Computing reward:
2025-10-29 13:53:29,586 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:29,586 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:29,586 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:29,586 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:29,586 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:53:29,586 - INFO     -   [3] F-VALUE STABILITY: 0.593
2025-10-29 13:53:29,586 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:29,586 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:29,586 - INFO     - 
  [COMPOSITE]: 0.680
2025-10-29 13:53:29,586 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:29,586 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:53:29,586 - INFO     -     + 0.350*0.593 (stability)
2025-10-29 13:53:29,587 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:29,587 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:29,587 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:29,587 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:29,587 - INFO     - 
  [FINAL REWARD]: 0.7602
2025-10-29 13:53:29,587 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:29,587 - INFO     -     ✓ Reward computed: 0.7602
2025-10-29 13:53:29,587 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:29,587 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:29,587 - INFO     -     - depth_score                    0.9119
2025-10-29 13:53:29,587 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:29,587 - INFO     -     - f_stability                    0.5935
2025-10-29 13:53:29,587 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:29,587 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:29,587 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:29,587 - INFO     -     - composite                      0.6801
2025-10-29 13:53:29,587 - INFO     -     - total                          0.7602
2025-10-29 13:53:29,588 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:29,588 - INFO     -   Num remaining nodes: 7
2025-10-29 13:53:29,588 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:53:29,588 - INFO     -   Done: False
2025-10-29 13:53:29,588 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:29,589 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:29,589 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:29,589 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:29,589 - INFO     -     - num_nodes: 7
2025-10-29 13:53:29,589 - INFO     -     - num_edges: 40
2025-10-29 13:53:29,589 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:29,589 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:53:29,589 - INFO     -   After: current_merge_step = 2
2025-10-29 13:53:29,589 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:29,589 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:29,589 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:29,590 - INFO     -   ✓ Step logged
2025-10-29 13:53:29,590 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:29,590 - INFO     -   Returning:
2025-10-29 13:53:29,590 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:29,590 - INFO     -     - reward: 0.7602
2025-10-29 13:53:29,590 - INFO     -     - done: False
2025-10-29 13:53:29,590 - INFO     -     - truncated: False
2025-10-29 13:53:29,590 - INFO     -     - info: 19 keys
2025-10-29 13:53:29,590 - INFO     - ==========================================================================================

2025-10-29 13:53:29,595 - INFO     - 
==========================================================================================
2025-10-29 13:53:29,595 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:29,595 - INFO     - ==========================================================================================
2025-10-29 13:53:29,595 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:29,595 - INFO     -   Input action: 15 (type: int)
2025-10-29 13:53:29,595 - INFO     -   Available edges in graph: 40
2025-10-29 13:53:29,595 - INFO     -   Action index calculation:
2025-10-29 13:53:29,595 - INFO     -     - action % max(num_valid_edges, 1) = 15 % 40 = 15
2025-10-29 13:53:29,595 - INFO     -     - clamped to [0, 39]: 15
2025-10-29 13:53:29,595 - INFO     -   ✓ Extracted merge pair from edge 15: (4, 7)
2025-10-29 13:53:29,595 - INFO     -   ✓ Validation passed
2025-10-29 13:53:29,595 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:29,595 - INFO     -     - Total states before merge: 36
2025-10-29 13:53:29,595 - INFO     -     - Num nodes: 7
2025-10-29 13:53:29,595 - INFO     -     - Num edges: 40
2025-10-29 13:53:29,595 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:29,595 - INFO     -       - Node 4: 2 states
2025-10-29 13:53:29,595 - INFO     -       - Node 7: 5 states
2025-10-29 13:53:29,595 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:29,595 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:29,607 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:53:29,607 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:29,607 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:53:29,708 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:29,708 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:29,708 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:53:29,708 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:29,708 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:29,708 - INFO     -   Calling graph_tracker.merge_nodes([4, 7])...
2025-10-29 13:53:29,708 - INFO     - Attempting merge of nodes 4 and 7...
2025-10-29 13:53:29,708 - INFO     - Successfully merged nodes into new node 11 with 10 states.
2025-10-29 13:53:29,708 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:29,708 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:29,708 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:53:29,708 - INFO     - 
================================================================================
2025-10-29 13:53:29,709 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:53:29,709 - INFO     - ================================================================================
2025-10-29 13:53:29,709 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:29,709 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:53:29,709 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:53:29,709 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:29,709 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:29,709 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:29,709 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:29,709 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:29,709 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:29,710 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:29,710 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:29,710 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:29,710 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:29,710 - INFO     -   - ts1_id: 4
2025-10-29 13:53:29,710 - INFO     -   - ts2_id: 7
2025-10-29 13:53:29,710 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:29,710 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:29,710 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:53:29,710 - INFO     -   - Product space size: 10
2025-10-29 13:53:29,710 - INFO     -   - Using product state mapping
2025-10-29 13:53:29,710 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:29,710 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:29,710 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:53:29,710 - INFO     -   - delta: 0.8000
2025-10-29 13:53:29,711 - INFO     -   - f_stability: 1.0 - |0.8000| / 2.8000 = 0.7143
2025-10-29 13:53:29,711 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:29,711 - INFO     -   - Compared 7 values
2025-10-29 13:53:29,711 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:29,711 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:29,711 - INFO     -   - states_before: 10
2025-10-29 13:53:29,711 - INFO     -   - states_after: 10
2025-10-29 13:53:29,711 - INFO     -   - delta_states: 0
2025-10-29 13:53:29,711 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:29,711 - INFO     -   - ts1_transitions: 3
2025-10-29 13:53:29,711 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:29,711 - INFO     -   - merged_transitions: 27
2025-10-29 13:53:29,711 - INFO     -   - transition_density_change: 1.1000
2025-10-29 13:53:29,711 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:29,712 - INFO     -   - search_signals present: True
2025-10-29 13:53:29,712 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:29,712 - INFO     -   - search_depth: 2
2025-10-29 13:53:29,712 - INFO     -   - solution_cost: 2
2025-10-29 13:53:29,712 - INFO     -   - branching_factor: 2.7000
2025-10-29 13:53:29,712 - INFO     -   - solution_found: True
2025-10-29 13:53:29,712 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:29,712 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:29,712 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:53:29,712 - INFO     -   - TS4(2) + TS7(5) → 10 states
2025-10-29 13:53:29,712 - INFO     -   - f_stability=0.714
2025-10-29 13:53:29,714 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:29,714 - INFO     -   - solution_found=True
2025-10-29 13:53:29,714 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:29,714 - INFO     - 
  Extracted signals:
2025-10-29 13:53:29,714 - INFO     -     - iteration: 2
2025-10-29 13:53:29,714 - INFO     -     - states_before: 10
2025-10-29 13:53:29,714 - INFO     -     - states_after: 10
2025-10-29 13:53:29,714 - INFO     -     - delta_states: 0
2025-10-29 13:53:29,714 - INFO     -     - f_value_stability: 0.7143
2025-10-29 13:53:29,714 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:29,714 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:29,714 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:29,714 - INFO     -     - search_depth: 2
2025-10-29 13:53:29,714 - INFO     -     - solution_cost: 2
2025-10-29 13:53:29,714 - INFO     -     - branching_factor: 2.7000
2025-10-29 13:53:29,714 - INFO     -     - solution_found: True
2025-10-29 13:53:29,714 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:29,715 - INFO     - 
  Computing reward:
2025-10-29 13:53:29,715 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:29,715 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:29,715 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:29,715 - INFO     -   [1] BRANCHING FACTOR: 2.700 → score 0.745 (good (in comfort zone))
2025-10-29 13:53:29,715 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:29,715 - INFO     -   [3] F-VALUE STABILITY: 0.459
2025-10-29 13:53:29,715 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:29,715 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:29,715 - INFO     - 
  [COMPOSITE]: 0.676
2025-10-29 13:53:29,715 - INFO     -     = 0.300*0.745 (bf)
2025-10-29 13:53:29,715 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:29,715 - INFO     -     + 0.350*0.459 (stability)
2025-10-29 13:53:29,715 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:29,716 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:29,716 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:29,716 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:29,716 - INFO     - 
  [FINAL REWARD]: 0.6523
2025-10-29 13:53:29,716 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:29,716 - INFO     -     ✓ Reward computed: 0.6523
2025-10-29 13:53:29,716 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:29,716 - INFO     -     - bf_score                       0.7450
2025-10-29 13:53:29,716 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:29,716 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:29,716 - INFO     -     - f_stability                    0.4588
2025-10-29 13:53:29,716 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:29,716 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:29,716 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:29,716 - INFO     -     - composite                      0.6762
2025-10-29 13:53:29,716 - INFO     -     - total                          0.6523
2025-10-29 13:53:29,717 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:29,717 - INFO     -   Num remaining nodes: 6
2025-10-29 13:53:29,717 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:53:29,717 - INFO     -   Done: False
2025-10-29 13:53:29,717 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:29,717 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:29,718 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:29,718 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:29,718 - INFO     -     - num_nodes: 6
2025-10-29 13:53:29,718 - INFO     -     - num_edges: 30
2025-10-29 13:53:29,718 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:29,718 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:53:29,718 - INFO     -   After: current_merge_step = 3
2025-10-29 13:53:29,718 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:29,718 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:29,718 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:29,720 - INFO     -   ✓ Step logged
2025-10-29 13:53:29,721 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:29,721 - INFO     -   Returning:
2025-10-29 13:53:29,721 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:29,721 - INFO     -     - reward: 0.6523
2025-10-29 13:53:29,721 - INFO     -     - done: False
2025-10-29 13:53:29,721 - INFO     -     - truncated: False
2025-10-29 13:53:29,721 - INFO     -     - info: 19 keys
2025-10-29 13:53:29,721 - INFO     - ==========================================================================================

2025-10-29 13:53:29,725 - INFO     - 
==========================================================================================
2025-10-29 13:53:29,725 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:29,725 - INFO     - ==========================================================================================
2025-10-29 13:53:29,725 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:29,725 - INFO     -   Input action: 19 (type: int)
2025-10-29 13:53:29,725 - INFO     -   Available edges in graph: 30
2025-10-29 13:53:29,725 - INFO     -   Action index calculation:
2025-10-29 13:53:29,725 - INFO     -     - action % max(num_valid_edges, 1) = 19 % 30 = 19
2025-10-29 13:53:29,725 - INFO     -     - clamped to [0, 29]: 19
2025-10-29 13:53:29,725 - INFO     -   ✓ Extracted merge pair from edge 19: (9, 11)
2025-10-29 13:53:29,725 - INFO     -   ✓ Validation passed
2025-10-29 13:53:29,725 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:29,726 - INFO     -     - Total states before merge: 39
2025-10-29 13:53:29,726 - INFO     -     - Num nodes: 6
2025-10-29 13:53:29,726 - INFO     -     - Num edges: 30
2025-10-29 13:53:29,726 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:29,726 - INFO     -       - Node 9: 10 states
2025-10-29 13:53:29,726 - INFO     -       - Node 11: 10 states
2025-10-29 13:53:29,726 - INFO     -       - Expected product: 100 states
2025-10-29 13:53:29,726 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:29,731 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:53:29,731 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:29,731 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:53:29,832 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:29,832 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:29,832 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:53:29,833 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:29,833 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:29,833 - INFO     -   Calling graph_tracker.merge_nodes([9, 11])...
2025-10-29 13:53:29,833 - INFO     - Attempting merge of nodes 9 and 11...
2025-10-29 13:53:29,833 - INFO     - Successfully merged nodes into new node 12 with 100 states.
2025-10-29 13:53:29,834 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:29,834 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:29,834 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:53:29,834 - INFO     - 
================================================================================
2025-10-29 13:53:29,834 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:53:29,834 - INFO     - ================================================================================
2025-10-29 13:53:29,834 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:29,834 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:53:29,834 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:53:29,835 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:29,835 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:29,835 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:53:29,835 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:29,835 - INFO     -   - Raw f_after length: 100
2025-10-29 13:53:29,835 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:29,835 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:53:29,835 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:29,835 - INFO     -   - after_valid: 100 / 100 (removed 0)
2025-10-29 13:53:29,835 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:29,835 - INFO     -   - ts1_id: 9
2025-10-29 13:53:29,835 - INFO     -   - ts2_id: 11
2025-10-29 13:53:29,835 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:29,835 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:29,837 - INFO     -   - ts1_size: 10, ts2_size: 10
2025-10-29 13:53:29,837 - INFO     -   - Product space size: 100
2025-10-29 13:53:29,837 - INFO     -   - Using product state mapping
2025-10-29 13:53:29,837 - INFO     -   - f_before_product length: 100
2025-10-29 13:53:29,837 - INFO     -   - avg_f_before: 4.5900 (100 valid states)
2025-10-29 13:53:29,837 - INFO     -   - avg_f_after:  7.8900 (100 valid states)
2025-10-29 13:53:29,837 - INFO     -   - delta: 3.3000
2025-10-29 13:53:29,837 - INFO     -   - f_stability: 1.0 - |3.3000| / 4.5900 = 0.2810
2025-10-29 13:53:29,837 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:29,837 - INFO     -   - Compared 20 values
2025-10-29 13:53:29,837 - INFO     -   - Significant changes (> 5.0): 2
2025-10-29 13:53:29,837 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:29,837 - INFO     -   - states_before: 100
2025-10-29 13:53:29,837 - INFO     -   - states_after: 100
2025-10-29 13:53:29,838 - INFO     -   - delta_states: 0
2025-10-29 13:53:29,838 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:29,838 - INFO     -   - ts1_transitions: 37
2025-10-29 13:53:29,838 - INFO     -   - ts2_transitions: 27
2025-10-29 13:53:29,838 - INFO     -   - merged_transitions: 460
2025-10-29 13:53:29,838 - INFO     -   - transition_density_change: 3.9600
2025-10-29 13:53:29,838 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:29,838 - INFO     -   - search_signals present: True
2025-10-29 13:53:29,838 - INFO     -   - nodes_expanded: 100
2025-10-29 13:53:29,838 - INFO     -   - search_depth: 4
2025-10-29 13:53:29,838 - INFO     -   - solution_cost: 2
2025-10-29 13:53:29,838 - INFO     -   - branching_factor: 4.6000
2025-10-29 13:53:29,838 - INFO     -   - solution_found: True
2025-10-29 13:53:29,838 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:29,839 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:29,839 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:53:29,839 - INFO     -   - TS9(10) + TS11(10) → 100 states
2025-10-29 13:53:29,839 - INFO     -   - f_stability=0.281
2025-10-29 13:53:29,839 - INFO     -   - A* nodes_expanded=100
2025-10-29 13:53:29,839 - INFO     -   - solution_found=True
2025-10-29 13:53:29,839 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:29,839 - INFO     - 
  Extracted signals:
2025-10-29 13:53:29,839 - INFO     -     - iteration: 3
2025-10-29 13:53:29,839 - INFO     -     - states_before: 100
2025-10-29 13:53:29,839 - INFO     -     - states_after: 100
2025-10-29 13:53:29,839 - INFO     -     - delta_states: 0
2025-10-29 13:53:29,839 - INFO     -     - f_value_stability: 0.2810
2025-10-29 13:53:29,839 - INFO     -     - num_significant_f_changes: 2
2025-10-29 13:53:29,839 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:29,839 - INFO     -     - nodes_expanded: 100
2025-10-29 13:53:29,839 - INFO     -     - search_depth: 4
2025-10-29 13:53:29,839 - INFO     -     - solution_cost: 2
2025-10-29 13:53:29,840 - INFO     -     - branching_factor: 4.6000
2025-10-29 13:53:29,840 - INFO     -     - solution_found: True
2025-10-29 13:53:29,840 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:29,840 - WARNING  -     ⚠️  Poor F-stability: 0.2810
2025-10-29 13:53:29,840 - INFO     - 
  Computing reward:
2025-10-29 13:53:29,840 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:29,840 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:29,840 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:29,840 - INFO     -   [1] BRANCHING FACTOR: 4.600 → score 0.487 (tolerable)
2025-10-29 13:53:29,840 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:53:29,840 - INFO     -   [3] F-VALUE STABILITY: 0.159
2025-10-29 13:53:29,840 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:29,840 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:29,841 - INFO     - 
  [COMPOSITE]: 0.481
2025-10-29 13:53:29,841 - INFO     -     = 0.300*0.487 (bf)
2025-10-29 13:53:29,841 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:53:29,841 - INFO     -     + 0.350*0.159 (stability)
2025-10-29 13:53:29,841 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:29,841 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:29,841 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:29,841 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:29,841 - INFO     - 
  [FINAL REWARD]: 0.1612
2025-10-29 13:53:29,841 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:29,841 - INFO     -     ✓ Reward computed: 0.1612
2025-10-29 13:53:29,841 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:29,841 - INFO     -     - bf_score                       0.4867
2025-10-29 13:53:29,841 - INFO     -     - depth_score                    0.7953
2025-10-29 13:53:29,841 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:29,841 - INFO     -     - f_stability                    0.1587
2025-10-29 13:53:29,842 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:29,842 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:29,842 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:29,842 - INFO     -     - composite                      0.4806
2025-10-29 13:53:29,842 - INFO     -     - total                          0.1612
2025-10-29 13:53:29,842 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:29,842 - INFO     -   Num remaining nodes: 5
2025-10-29 13:53:29,842 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:53:29,842 - INFO     -   Done: False
2025-10-29 13:53:29,842 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:29,843 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:29,843 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:29,843 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:29,843 - INFO     -     - num_nodes: 5
2025-10-29 13:53:29,843 - INFO     -     - num_edges: 20
2025-10-29 13:53:29,843 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:29,843 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:53:29,843 - INFO     -   After: current_merge_step = 4
2025-10-29 13:53:29,843 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:29,843 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:29,843 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:29,844 - INFO     -   ✓ Step logged
2025-10-29 13:53:29,844 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:29,844 - INFO     -   Returning:
2025-10-29 13:53:29,844 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:29,844 - INFO     -     - reward: 0.1612
2025-10-29 13:53:29,844 - INFO     -     - done: False
2025-10-29 13:53:29,844 - INFO     -     - truncated: False
2025-10-29 13:53:29,844 - INFO     -     - info: 19 keys
2025-10-29 13:53:29,845 - INFO     - ==========================================================================================

2025-10-29 13:53:29,849 - INFO     - 
==========================================================================================
2025-10-29 13:53:29,849 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:29,849 - INFO     - ==========================================================================================
2025-10-29 13:53:29,849 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:29,849 - INFO     -   Input action: 5 (type: int)
2025-10-29 13:53:29,849 - INFO     -   Available edges in graph: 20
2025-10-29 13:53:29,850 - INFO     -   Action index calculation:
2025-10-29 13:53:29,850 - INFO     -     - action % max(num_valid_edges, 1) = 5 % 20 = 5
2025-10-29 13:53:29,850 - INFO     -     - clamped to [0, 19]: 5
2025-10-29 13:53:29,850 - INFO     -   ✓ Extracted merge pair from edge 5: (1, 6)
2025-10-29 13:53:29,850 - INFO     -   ✓ Validation passed
2025-10-29 13:53:29,850 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:29,850 - INFO     -     - Total states before merge: 119
2025-10-29 13:53:29,850 - INFO     -     - Num nodes: 5
2025-10-29 13:53:29,850 - INFO     -     - Num edges: 20
2025-10-29 13:53:29,850 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:29,850 - INFO     -       - Node 1: 2 states
2025-10-29 13:53:29,850 - INFO     -       - Node 6: 5 states
2025-10-29 13:53:29,850 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:29,850 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:29,856 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:53:29,856 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:29,856 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:53:29,958 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:29,958 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:29,958 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:53:29,958 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:29,959 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:29,959 - INFO     -   Calling graph_tracker.merge_nodes([1, 6])...
2025-10-29 13:53:29,959 - INFO     - Attempting merge of nodes 1 and 6...
2025-10-29 13:53:29,959 - INFO     - Successfully merged nodes into new node 13 with 10 states.
2025-10-29 13:53:29,959 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:29,959 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:29,959 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:53:29,959 - INFO     - 
================================================================================
2025-10-29 13:53:29,959 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:53:29,959 - INFO     - ================================================================================
2025-10-29 13:53:29,959 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:29,959 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:53:29,959 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:53:29,960 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:29,960 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:29,960 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:29,960 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:29,960 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:29,960 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:29,960 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:29,960 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:29,960 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:29,960 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:29,960 - INFO     -   - ts1_id: 1
2025-10-29 13:53:29,960 - INFO     -   - ts2_id: 6
2025-10-29 13:53:29,960 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:29,960 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:29,960 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:53:29,961 - INFO     -   - Product space size: 10
2025-10-29 13:53:29,961 - INFO     -   - Using product state mapping
2025-10-29 13:53:29,961 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:29,961 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:53:29,961 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:53:29,961 - INFO     -   - delta: 0.7000
2025-10-29 13:53:29,961 - INFO     -   - f_stability: 1.0 - |0.7000| / 2.9000 = 0.7586
2025-10-29 13:53:29,961 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:29,961 - INFO     -   - Compared 7 values
2025-10-29 13:53:29,961 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:29,961 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:29,961 - INFO     -   - states_before: 10
2025-10-29 13:53:29,961 - INFO     -   - states_after: 10
2025-10-29 13:53:29,961 - INFO     -   - delta_states: 0
2025-10-29 13:53:29,961 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:29,961 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:29,961 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:29,961 - INFO     -   - merged_transitions: 37
2025-10-29 13:53:29,961 - INFO     -   - transition_density_change: 1.9000
2025-10-29 13:53:29,961 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:29,961 - INFO     -   - search_signals present: True
2025-10-29 13:53:29,961 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:29,962 - INFO     -   - search_depth: 2
2025-10-29 13:53:29,962 - INFO     -   - solution_cost: 0
2025-10-29 13:53:29,962 - INFO     -   - branching_factor: 3.7000
2025-10-29 13:53:29,962 - INFO     -   - solution_found: True
2025-10-29 13:53:29,962 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:29,962 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:29,962 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:53:29,962 - INFO     -   - TS1(2) + TS6(5) → 10 states
2025-10-29 13:53:29,962 - INFO     -   - f_stability=0.759
2025-10-29 13:53:29,962 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:29,962 - INFO     -   - solution_found=True
2025-10-29 13:53:29,963 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:29,963 - INFO     - 
  Extracted signals:
2025-10-29 13:53:29,963 - INFO     -     - iteration: 4
2025-10-29 13:53:29,963 - INFO     -     - states_before: 10
2025-10-29 13:53:29,963 - INFO     -     - states_after: 10
2025-10-29 13:53:29,963 - INFO     -     - delta_states: 0
2025-10-29 13:53:29,963 - INFO     -     - f_value_stability: 0.7586
2025-10-29 13:53:29,963 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:29,963 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:29,963 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:29,963 - INFO     -     - search_depth: 2
2025-10-29 13:53:29,963 - INFO     -     - solution_cost: 0
2025-10-29 13:53:29,963 - INFO     -     - branching_factor: 3.7000
2025-10-29 13:53:29,963 - INFO     -     - solution_found: True
2025-10-29 13:53:29,963 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:29,963 - INFO     - 
  Computing reward:
2025-10-29 13:53:29,963 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:29,964 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:29,964 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:29,964 - INFO     -   [1] BRANCHING FACTOR: 3.700 → score 0.607 (tolerable)
2025-10-29 13:53:29,964 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:29,964 - INFO     -   [3] F-VALUE STABILITY: 0.251
2025-10-29 13:53:29,964 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:29,964 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:29,964 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:53:29,964 - INFO     -     = 0.300*0.607 (bf)
2025-10-29 13:53:29,964 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:29,964 - INFO     -     + 0.350*0.251 (stability)
2025-10-29 13:53:29,964 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:29,964 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:29,965 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:29,965 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:29,965 - INFO     - 
  [FINAL REWARD]: 0.3236
2025-10-29 13:53:29,965 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:29,965 - INFO     -     ✓ Reward computed: 0.3236
2025-10-29 13:53:29,965 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:29,965 - INFO     -     - bf_score                       0.6067
2025-10-29 13:53:29,965 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:29,965 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:29,965 - INFO     -     - f_stability                    0.2507
2025-10-29 13:53:29,965 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:29,965 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:29,965 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:29,965 - INFO     -     - composite                      0.5618
2025-10-29 13:53:29,965 - INFO     -     - total                          0.3236
2025-10-29 13:53:29,965 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:29,966 - INFO     -   Num remaining nodes: 4
2025-10-29 13:53:29,966 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:53:29,966 - INFO     -   Done: False
2025-10-29 13:53:29,966 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:29,966 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:29,966 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:29,966 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:29,967 - INFO     -     - num_nodes: 4
2025-10-29 13:53:29,967 - INFO     -     - num_edges: 12
2025-10-29 13:53:29,967 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:29,967 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:53:29,967 - INFO     -   After: current_merge_step = 5
2025-10-29 13:53:29,967 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:29,967 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:29,967 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:29,967 - INFO     -   ✓ Step logged
2025-10-29 13:53:29,968 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:29,968 - INFO     -   Returning:
2025-10-29 13:53:29,968 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:29,968 - INFO     -     - reward: 0.3236
2025-10-29 13:53:29,968 - INFO     -     - done: False
2025-10-29 13:53:29,969 - INFO     -     - truncated: False
2025-10-29 13:53:29,969 - INFO     -     - info: 19 keys
2025-10-29 13:53:29,969 - INFO     - ==========================================================================================

2025-10-29 13:53:29,973 - INFO     - 
==========================================================================================
2025-10-29 13:53:29,973 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:29,973 - INFO     - ==========================================================================================
2025-10-29 13:53:29,973 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:29,973 - INFO     -   Input action: 11 (type: int)
2025-10-29 13:53:29,974 - INFO     -   Available edges in graph: 12
2025-10-29 13:53:29,974 - INFO     -   Action index calculation:
2025-10-29 13:53:29,974 - INFO     -     - action % max(num_valid_edges, 1) = 11 % 12 = 11
2025-10-29 13:53:29,974 - INFO     -     - clamped to [0, 11]: 11
2025-10-29 13:53:29,974 - INFO     -   ✓ Extracted merge pair from edge 11: (13, 12)
2025-10-29 13:53:29,974 - INFO     -   ✓ Validation passed
2025-10-29 13:53:29,974 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:29,974 - INFO     -     - Total states before merge: 122
2025-10-29 13:53:29,974 - INFO     -     - Num nodes: 4
2025-10-29 13:53:29,974 - INFO     -     - Num edges: 12
2025-10-29 13:53:29,974 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:29,974 - INFO     -       - Node 13: 10 states
2025-10-29 13:53:29,974 - INFO     -       - Node 12: 100 states
2025-10-29 13:53:29,974 - INFO     -       - Expected product: 1000 states
2025-10-29 13:53:29,974 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:29,978 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:53:29,979 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:29,979 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:53:30,080 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:30,080 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:30,080 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:53:30,085 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:53:30,085 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:30,085 - INFO     -   Calling graph_tracker.merge_nodes([13, 12])...
2025-10-29 13:53:30,085 - INFO     - Attempting merge of nodes 13 and 12...
2025-10-29 13:53:30,085 - INFO     - Successfully merged nodes into new node 14 with 1000 states.
2025-10-29 13:53:30,085 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:30,085 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:30,085 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:53:30,085 - INFO     - 
================================================================================
2025-10-29 13:53:30,085 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:53:30,085 - INFO     - ================================================================================
2025-10-29 13:53:30,085 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:30,086 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:53:30,086 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:53:30,087 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:30,087 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:30,087 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:53:30,087 - INFO     -   - Raw ts2_f length: 100
2025-10-29 13:53:30,087 - INFO     -   - Raw f_after length: 1000
2025-10-29 13:53:30,087 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:30,087 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:53:30,087 - INFO     -   - ts2_valid: 100 / 100 (removed -100)
2025-10-29 13:53:30,087 - INFO     -   - after_valid: 1000 / 1000 (removed 0)
2025-10-29 13:53:30,087 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:30,087 - INFO     -   - ts1_id: 13
2025-10-29 13:53:30,087 - INFO     -   - ts2_id: 12
2025-10-29 13:53:30,087 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:30,089 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:30,089 - INFO     -   - ts1_size: 10, ts2_size: 100
2025-10-29 13:53:30,089 - INFO     -   - Product space size: 1000
2025-10-29 13:53:30,089 - INFO     -   - Using product state mapping
2025-10-29 13:53:30,090 - INFO     -   - f_before_product length: 1000
2025-10-29 13:53:30,092 - INFO     -   - avg_f_before: 8.0310 (1000 valid states)
2025-10-29 13:53:30,092 - INFO     -   - avg_f_after:  11.7700 (1000 valid states)
2025-10-29 13:53:30,092 - INFO     -   - delta: 3.7390
2025-10-29 13:53:30,092 - INFO     -   - f_stability: 1.0 - |3.7390| / 8.0310 = 0.5344
2025-10-29 13:53:30,092 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:30,093 - INFO     -   - Compared 110 values
2025-10-29 13:53:30,093 - INFO     -   - Significant changes (> 5.0): 48
2025-10-29 13:53:30,093 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:30,093 - INFO     -   - states_before: 1000
2025-10-29 13:53:30,093 - INFO     -   - states_after: 1000
2025-10-29 13:53:30,093 - INFO     -   - delta_states: 0
2025-10-29 13:53:30,093 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:30,093 - INFO     -   - ts1_transitions: 37
2025-10-29 13:53:30,093 - INFO     -   - ts2_transitions: 460
2025-10-29 13:53:30,093 - INFO     -   - merged_transitions: 6300
2025-10-29 13:53:30,093 - INFO     -   - transition_density_change: 5.8030
2025-10-29 13:53:30,093 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:30,093 - INFO     -   - search_signals present: True
2025-10-29 13:53:30,093 - INFO     -   - nodes_expanded: 1000
2025-10-29 13:53:30,093 - INFO     -   - search_depth: 5
2025-10-29 13:53:30,093 - INFO     -   - solution_cost: 2
2025-10-29 13:53:30,093 - INFO     -   - branching_factor: 6.3000
2025-10-29 13:53:30,094 - INFO     -   - solution_found: True
2025-10-29 13:53:30,094 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:30,094 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:30,094 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:53:30,094 - INFO     -   - TS13(10) + TS12(100) → 1000 states
2025-10-29 13:53:30,094 - INFO     -   - f_stability=0.534
2025-10-29 13:53:30,094 - INFO     -   - A* nodes_expanded=1000
2025-10-29 13:53:30,094 - INFO     -   - solution_found=True
2025-10-29 13:53:30,095 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:30,095 - INFO     - 
  Extracted signals:
2025-10-29 13:53:30,095 - INFO     -     - iteration: 5
2025-10-29 13:53:30,095 - INFO     -     - states_before: 1000
2025-10-29 13:53:30,095 - INFO     -     - states_after: 1000
2025-10-29 13:53:30,095 - INFO     -     - delta_states: 0
2025-10-29 13:53:30,095 - INFO     -     - f_value_stability: 0.5344
2025-10-29 13:53:30,095 - INFO     -     - num_significant_f_changes: 48
2025-10-29 13:53:30,095 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:30,095 - INFO     -     - nodes_expanded: 1000
2025-10-29 13:53:30,095 - INFO     -     - search_depth: 5
2025-10-29 13:53:30,095 - INFO     -     - solution_cost: 2
2025-10-29 13:53:30,095 - INFO     -     - branching_factor: 6.3000
2025-10-29 13:53:30,095 - INFO     -     - solution_found: True
2025-10-29 13:53:30,095 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:30,096 - INFO     - 
  Computing reward:
2025-10-29 13:53:30,096 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:30,096 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:30,096 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:30,096 - INFO     -   [1] BRANCHING FACTOR: 6.300 → score 0.270 (high BF, minimal credit)
2025-10-29 13:53:30,096 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:30,097 - INFO     -   [3] F-VALUE STABILITY: 0.605
2025-10-29 13:53:30,097 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:30,097 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:30,097 - INFO     - 
  [COMPOSITE]: 0.567
2025-10-29 13:53:30,097 - INFO     -     = 0.300*0.270 (bf)
2025-10-29 13:53:30,097 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:30,097 - INFO     -     + 0.350*0.605 (stability)
2025-10-29 13:53:30,097 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:30,097 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:30,097 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:30,097 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:30,098 - INFO     - 
  [FINAL REWARD]: 0.5344
2025-10-29 13:53:30,098 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:30,098 - INFO     -     ✓ Reward computed: 0.5344
2025-10-29 13:53:30,098 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:30,098 - INFO     -     - bf_score                       0.2700
2025-10-29 13:53:30,098 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:30,098 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:30,098 - INFO     -     - f_stability                    0.6051
2025-10-29 13:53:30,098 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:30,098 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:30,098 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:30,098 - INFO     -     - composite                      0.5672
2025-10-29 13:53:30,098 - INFO     -     - total                          0.5344
2025-10-29 13:53:30,098 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:30,099 - INFO     -   Num remaining nodes: 3
2025-10-29 13:53:30,099 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:53:30,099 - INFO     -   Done: False
2025-10-29 13:53:30,099 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:30,099 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:30,099 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:30,099 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:30,099 - INFO     -     - num_nodes: 3
2025-10-29 13:53:30,099 - INFO     -     - num_edges: 6
2025-10-29 13:53:30,099 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:30,100 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:53:30,100 - INFO     -   After: current_merge_step = 6
2025-10-29 13:53:30,100 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:30,100 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:30,100 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:30,100 - INFO     -   ✓ Step logged
2025-10-29 13:53:30,100 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:30,101 - INFO     -   Returning:
2025-10-29 13:53:30,101 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:30,101 - INFO     -     - reward: 0.5344
2025-10-29 13:53:30,101 - INFO     -     - done: False
2025-10-29 13:53:30,101 - INFO     -     - truncated: False
2025-10-29 13:53:30,101 - INFO     -     - info: 19 keys
2025-10-29 13:53:30,101 - INFO     - ==========================================================================================

2025-10-29 13:53:30,106 - INFO     - 
==========================================================================================
2025-10-29 13:53:30,106 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:30,106 - INFO     - ==========================================================================================
2025-10-29 13:53:30,106 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:30,106 - INFO     -   Input action: 5 (type: int)
2025-10-29 13:53:30,106 - INFO     -   Available edges in graph: 6
2025-10-29 13:53:30,106 - INFO     -   Action index calculation:
2025-10-29 13:53:30,106 - INFO     -     - action % max(num_valid_edges, 1) = 5 % 6 = 5
2025-10-29 13:53:30,106 - INFO     -     - clamped to [0, 5]: 5
2025-10-29 13:53:30,106 - INFO     -   ✓ Extracted merge pair from edge 5: (14, 10)
2025-10-29 13:53:30,106 - INFO     -   ✓ Validation passed
2025-10-29 13:53:30,106 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:30,106 - INFO     -     - Total states before merge: 1012
2025-10-29 13:53:30,106 - INFO     -     - Num nodes: 3
2025-10-29 13:53:30,106 - INFO     -     - Num edges: 6
2025-10-29 13:53:30,106 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:30,106 - INFO     -       - Node 14: 1000 states
2025-10-29 13:53:30,107 - INFO     -       - Node 10: 10 states
2025-10-29 13:53:30,107 - INFO     -       - Expected product: 10000 states
2025-10-29 13:53:30,107 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:30,114 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:53:30,114 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:30,114 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:53:30,215 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:30,215 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:30,215 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:53:30,483 - INFO     -   ✓ TS file received after 0.27s
2025-10-29 13:53:30,483 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:30,483 - INFO     -   Calling graph_tracker.merge_nodes([14, 10])...
2025-10-29 13:53:30,483 - INFO     - Attempting merge of nodes 14 and 10...
2025-10-29 13:53:30,484 - INFO     - Successfully merged nodes into new node 15 with 10000 states.
2025-10-29 13:53:30,484 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:30,485 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:30,485 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:53:30,485 - INFO     - 
================================================================================
2025-10-29 13:53:30,485 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:53:30,485 - INFO     - ================================================================================
2025-10-29 13:53:30,485 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:30,485 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:53:30,486 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:53:30,493 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:30,493 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:30,493 - INFO     -   - Raw ts1_f length: 398
2025-10-29 13:53:30,493 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:30,493 - INFO     -   - Raw f_after length: 3980
2025-10-29 13:53:30,493 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:30,494 - INFO     -   - ts1_valid: 398 / 398 (removed 0)
2025-10-29 13:53:30,494 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:30,496 - INFO     -   - after_valid: 2776 / 3980 (removed 1204)
2025-10-29 13:53:30,496 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:30,496 - INFO     -   - ts1_id: 14
2025-10-29 13:53:30,496 - INFO     -   - ts2_id: 10
2025-10-29 13:53:30,496 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:30,496 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:30,497 - INFO     -   - ts1_size: 398, ts2_size: 10
2025-10-29 13:53:30,497 - INFO     -   - Product space size: 3980
2025-10-29 13:53:30,497 - INFO     -   - Using product state mapping
2025-10-29 13:53:30,503 - INFO     -   - f_before_product length: 3980
2025-10-29 13:53:30,514 - INFO     -   - avg_f_before: 8.1651 (3980 valid states)
2025-10-29 13:53:30,514 - INFO     -   - avg_f_after:  19.4319 (2776 valid states)
2025-10-29 13:53:30,514 - INFO     -   - delta: 11.2668
2025-10-29 13:53:30,514 - INFO     -   - f_stability: 1.0 - |11.2668| / 8.1651 = 0.0000
2025-10-29 13:53:30,514 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:30,514 - INFO     -   - Compared 408 values
2025-10-29 13:53:30,514 - INFO     -   - Significant changes (> 5.0): 240
2025-10-29 13:53:30,514 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:30,514 - INFO     -   - states_before: 3980
2025-10-29 13:53:30,514 - INFO     -   - states_after: 3980
2025-10-29 13:53:30,514 - INFO     -   - delta_states: 0
2025-10-29 13:53:30,515 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:30,515 - INFO     -   - ts1_transitions: 4081
2025-10-29 13:53:30,515 - INFO     -   - ts2_transitions: 40
2025-10-29 13:53:30,515 - INFO     -   - merged_transitions: 22696
2025-10-29 13:53:30,515 - INFO     -   - transition_density_change: 4.6671
2025-10-29 13:53:30,515 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:30,515 - INFO     -   - search_signals present: True
2025-10-29 13:53:30,515 - INFO     -   - nodes_expanded: 2776
2025-10-29 13:53:30,515 - INFO     -   - search_depth: 6
2025-10-29 13:53:30,515 - INFO     -   - solution_cost: 4
2025-10-29 13:53:30,515 - INFO     -   - branching_factor: 8.1758
2025-10-29 13:53:30,515 - INFO     -   - solution_found: True
2025-10-29 13:53:30,515 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:30,517 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:30,517 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:53:30,517 - INFO     -   - TS14(398) + TS10(10) → 3980 states
2025-10-29 13:53:30,517 - INFO     -   - f_stability=0.000
2025-10-29 13:53:30,517 - INFO     -   - A* nodes_expanded=2776
2025-10-29 13:53:30,517 - INFO     -   - solution_found=True
2025-10-29 13:53:30,518 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:30,518 - INFO     - 
  Extracted signals:
2025-10-29 13:53:30,518 - INFO     -     - iteration: 6
2025-10-29 13:53:30,518 - INFO     -     - states_before: 3980
2025-10-29 13:53:30,518 - INFO     -     - states_after: 3980
2025-10-29 13:53:30,518 - INFO     -     - delta_states: 0
2025-10-29 13:53:30,518 - INFO     -     - f_value_stability: 0.0000
2025-10-29 13:53:30,518 - INFO     -     - num_significant_f_changes: 240
2025-10-29 13:53:30,518 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:30,518 - INFO     -     - nodes_expanded: 2776
2025-10-29 13:53:30,518 - INFO     -     - search_depth: 6
2025-10-29 13:53:30,518 - INFO     -     - solution_cost: 4
2025-10-29 13:53:30,518 - INFO     -     - branching_factor: 8.1758
2025-10-29 13:53:30,518 - INFO     -     - solution_found: True
2025-10-29 13:53:30,518 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:30,519 - WARNING  -     ⚠️  Poor F-stability: 0.0000
2025-10-29 13:53:30,519 - WARNING  -     ⚠️  High branching factor: 8.1758
2025-10-29 13:53:30,519 - INFO     - 
  Computing reward:
2025-10-29 13:53:30,519 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:30,519 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:30,519 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:30,519 - INFO     -   [1] BRANCHING FACTOR: 8.176 → score 0.100 (high BF, minimal credit)
2025-10-29 13:53:30,519 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:30,520 - INFO     -   [3] F-VALUE STABILITY: 0.000
2025-10-29 13:53:30,520 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:30,520 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:30,520 - INFO     - 
  [COMPOSITE]: 0.301
2025-10-29 13:53:30,522 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:53:30,522 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:30,522 - INFO     -     + 0.350*0.000 (stability)
2025-10-29 13:53:30,522 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:30,522 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:30,522 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:30,522 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:30,522 - WARNING  -   ⚠️  BAD MERGE DETECTED: F-stability extremely poor: 0.000
2025-10-29 13:53:30,523 - INFO     -     + Bad merge penalty: -0.150
2025-10-29 13:53:30,523 - INFO     - 
  [FINAL REWARD]: -0.3490
2025-10-29 13:53:30,523 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:30,523 - INFO     -     ✓ Reward computed: -0.3490
2025-10-29 13:53:30,523 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:30,523 - INFO     -     - bf_score                       0.1000
2025-10-29 13:53:30,523 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:30,523 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:30,523 - INFO     -     - f_stability                    0.0000
2025-10-29 13:53:30,523 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:30,523 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:30,523 - INFO     -     - bad_merge_penalty              -0.1500
2025-10-29 13:53:30,523 - INFO     -     - composite                      0.3005
2025-10-29 13:53:30,523 - INFO     -     - total                          -0.3490
2025-10-29 13:53:30,524 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:30,524 - INFO     -   Num remaining nodes: 2
2025-10-29 13:53:30,524 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:53:30,524 - INFO     -   Done: False
2025-10-29 13:53:30,524 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:30,524 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:30,524 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:30,524 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:30,524 - INFO     -     - num_nodes: 2
2025-10-29 13:53:30,524 - INFO     -     - num_edges: 2
2025-10-29 13:53:30,524 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:30,524 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:53:30,524 - INFO     -   After: current_merge_step = 7
2025-10-29 13:53:30,524 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:30,524 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:30,525 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:30,525 - INFO     -   ✓ Step logged
2025-10-29 13:53:30,525 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:30,525 - INFO     -   Returning:
2025-10-29 13:53:30,525 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:30,525 - INFO     -     - reward: -0.3490
2025-10-29 13:53:30,525 - INFO     -     - done: False
2025-10-29 13:53:30,525 - INFO     -     - truncated: False
2025-10-29 13:53:30,526 - INFO     -     - info: 19 keys
2025-10-29 13:53:30,526 - INFO     - ==========================================================================================

2025-10-29 13:53:30,530 - INFO     - 
==========================================================================================
2025-10-29 13:53:30,530 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:30,530 - INFO     - ==========================================================================================
2025-10-29 13:53:30,530 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:30,530 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:53:30,530 - INFO     -   Available edges in graph: 2
2025-10-29 13:53:30,531 - INFO     -   Action index calculation:
2025-10-29 13:53:30,531 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 2 = 1
2025-10-29 13:53:30,531 - INFO     -     - clamped to [0, 1]: 1
2025-10-29 13:53:30,531 - INFO     -   ✓ Extracted merge pair from edge 1: (15, 0)
2025-10-29 13:53:30,531 - INFO     -   ✓ Validation passed
2025-10-29 13:53:30,531 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:30,531 - INFO     -     - Total states before merge: 10002
2025-10-29 13:53:30,531 - INFO     -     - Num nodes: 2
2025-10-29 13:53:30,531 - INFO     -     - Num edges: 2
2025-10-29 13:53:30,531 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:30,531 - INFO     -       - Node 15: 10000 states
2025-10-29 13:53:30,531 - INFO     -       - Node 0: 2 states
2025-10-29 13:53:30,531 - INFO     -       - Expected product: 20000 states
2025-10-29 13:53:30,531 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:30,541 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:53:30,541 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:30,541 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:53:30,642 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:30,642 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:30,642 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:53:30,669 - INFO     -   ✓ TS file received after 0.03s
2025-10-29 13:53:30,669 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:30,669 - INFO     -   Calling graph_tracker.merge_nodes([15, 0])...
2025-10-29 13:53:30,669 - INFO     - Attempting merge of nodes 15 and 0...
2025-10-29 13:53:30,669 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:53:30,669 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:30,669 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:30,670 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:53:30,670 - INFO     - 
================================================================================
2025-10-29 13:53:30,670 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:53:30,670 - INFO     - ================================================================================
2025-10-29 13:53:30,670 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:30,670 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:53:30,670 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:53:30,673 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:30,674 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:30,674 - INFO     -   - Raw ts1_f length: 1998
2025-10-29 13:53:30,674 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:30,674 - INFO     -   - Raw f_after length: 3996
2025-10-29 13:53:30,674 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:30,675 - INFO     -   - ts1_valid: 1998 / 1998 (removed 0)
2025-10-29 13:53:30,675 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:30,675 - INFO     -   - after_valid: 3315 / 3996 (removed 681)
2025-10-29 13:53:30,677 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:30,677 - INFO     -   - ts1_id: 15
2025-10-29 13:53:30,677 - INFO     -   - ts2_id: 0
2025-10-29 13:53:30,677 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:30,677 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:30,677 - INFO     -   - ts1_size: 1998, ts2_size: 2
2025-10-29 13:53:30,677 - INFO     -   - Product space size: 3996
2025-10-29 13:53:30,677 - INFO     -   - Using product state mapping
2025-10-29 13:53:30,683 - INFO     -   - f_before_product length: 3996
2025-10-29 13:53:30,692 - INFO     -   - avg_f_before: 18.8248 (3996 valid states)
2025-10-29 13:53:30,692 - INFO     -   - avg_f_after:  19.1472 (3315 valid states)
2025-10-29 13:53:30,692 - INFO     -   - delta: 0.3224
2025-10-29 13:53:30,692 - INFO     -   - f_stability: 1.0 - |0.3224| / 18.8248 = 0.9829
2025-10-29 13:53:30,692 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:30,693 - INFO     -   - Compared 2000 values
2025-10-29 13:53:30,693 - INFO     -   - Significant changes (> 5.0): 1072
2025-10-29 13:53:30,693 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:30,693 - INFO     -   - states_before: 3996
2025-10-29 13:53:30,693 - INFO     -   - states_after: 3996
2025-10-29 13:53:30,693 - INFO     -   - delta_states: 0
2025-10-29 13:53:30,693 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:30,693 - INFO     -   - ts1_transitions: 12679
2025-10-29 13:53:30,693 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:30,693 - INFO     -   - merged_transitions: 21775
2025-10-29 13:53:30,693 - INFO     -   - transition_density_change: 2.2750
2025-10-29 13:53:30,693 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:30,693 - INFO     -   - search_signals present: True
2025-10-29 13:53:30,694 - INFO     -   - nodes_expanded: 3315
2025-10-29 13:53:30,694 - INFO     -   - search_depth: 6
2025-10-29 13:53:30,694 - INFO     -   - solution_cost: 4
2025-10-29 13:53:30,694 - INFO     -   - branching_factor: 6.5686
2025-10-29 13:53:30,694 - INFO     -   - solution_found: True
2025-10-29 13:53:30,694 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:30,698 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:30,698 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:53:30,698 - INFO     -   - TS15(1998) + TS0(2) → 3996 states
2025-10-29 13:53:30,698 - INFO     -   - f_stability=0.983
2025-10-29 13:53:30,698 - INFO     -   - A* nodes_expanded=3315
2025-10-29 13:53:30,698 - INFO     -   - solution_found=True
2025-10-29 13:53:30,699 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:30,699 - INFO     - 
  Extracted signals:
2025-10-29 13:53:30,699 - INFO     -     - iteration: 7
2025-10-29 13:53:30,699 - INFO     -     - states_before: 3996
2025-10-29 13:53:30,699 - INFO     -     - states_after: 3996
2025-10-29 13:53:30,699 - INFO     -     - delta_states: 0
2025-10-29 13:53:30,699 - INFO     -     - f_value_stability: 0.9829
2025-10-29 13:53:30,699 - INFO     -     - num_significant_f_changes: 1072
2025-10-29 13:53:30,699 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:30,699 - INFO     -     - nodes_expanded: 3315
2025-10-29 13:53:30,699 - INFO     -     - search_depth: 6
2025-10-29 13:53:30,699 - INFO     -     - solution_cost: 4
2025-10-29 13:53:30,699 - INFO     -     - branching_factor: 6.5686
2025-10-29 13:53:30,699 - INFO     -     - solution_found: True
2025-10-29 13:53:30,699 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:30,701 - INFO     - 
  Computing reward:
2025-10-29 13:53:30,701 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:30,701 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:30,701 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:30,701 - INFO     -   [1] BRANCHING FACTOR: 6.569 → score 0.243 (high BF, minimal credit)
2025-10-29 13:53:30,701 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:30,703 - INFO     -   [3] F-VALUE STABILITY: 1.000
2025-10-29 13:53:30,703 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:30,703 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:30,704 - INFO     - 
  [COMPOSITE]: 0.693
2025-10-29 13:53:30,704 - INFO     -     = 0.300*0.243 (bf)
2025-10-29 13:53:30,704 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:30,704 - INFO     -     + 0.350*1.000 (stability)
2025-10-29 13:53:30,704 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:30,704 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:30,704 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:30,704 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:30,705 - INFO     - 
  [FINAL REWARD]: 0.8868
2025-10-29 13:53:30,705 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:30,706 - INFO     -     ✓ Reward computed: 0.8868
2025-10-29 13:53:30,706 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:30,706 - INFO     -     - bf_score                       0.2431
2025-10-29 13:53:30,706 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:30,706 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:30,706 - INFO     -     - f_stability                    0.9999
2025-10-29 13:53:30,706 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:30,706 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:30,706 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:30,706 - INFO     -     - composite                      0.6934
2025-10-29 13:53:30,706 - INFO     -     - total                          0.8868
2025-10-29 13:53:30,706 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:30,706 - INFO     -   Num remaining nodes: 1
2025-10-29 13:53:30,707 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:53:30,707 - INFO     -   Done: True
2025-10-29 13:53:30,707 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:53:30,707 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:30,707 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:30,707 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:30,707 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:30,707 - INFO     -     - num_nodes: 1
2025-10-29 13:53:30,707 - INFO     -     - num_edges: 0
2025-10-29 13:53:30,707 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:30,708 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:53:30,708 - INFO     -   After: current_merge_step = 8
2025-10-29 13:53:30,708 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:30,708 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:30,708 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:30,709 - INFO     -   ✓ Step logged
2025-10-29 13:53:30,709 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:30,709 - INFO     -   Returning:
2025-10-29 13:53:30,709 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:30,709 - INFO     -     - reward: 0.8868
2025-10-29 13:53:30,709 - INFO     -     - done: True
2025-10-29 13:53:30,709 - INFO     -     - truncated: False
2025-10-29 13:53:30,709 - INFO     -     - info: 19 keys
2025-10-29 13:53:30,709 - INFO     - ==========================================================================================

2025-10-29 13:53:30,781 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:53:30,787 - INFO     - [Handshake] Building FD command:
2025-10-29 13:53:30,787 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:30,787 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_03.pddl
2025-10-29 13:53:30,787 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:53:30,790 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:31,393 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:31,393 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:31,393 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:31,708 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:31,708 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:31,708 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:31,709 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:31,709 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:31,709 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:31,709 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:31,709 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:31,709 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:31,709 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:31,709 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:31,709 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:31,709 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:31,710 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:31,710 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:31,710 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:31,710 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:31,710 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:31,710 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:31,710 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:31,710 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:31,710 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:31,710 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:31,712 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:31,713 - INFO     - Added edge (0, 1)
2025-10-29 13:53:31,713 - INFO     - Added edge (0, 2)
2025-10-29 13:53:31,713 - INFO     - Added edge (0, 3)
2025-10-29 13:53:31,713 - INFO     - Added edge (0, 4)
2025-10-29 13:53:31,713 - INFO     - Added edge (0, 5)
2025-10-29 13:53:31,713 - INFO     - Added edge (0, 6)
2025-10-29 13:53:31,713 - INFO     - Added edge (0, 7)
2025-10-29 13:53:31,713 - INFO     - Added edge (0, 8)
2025-10-29 13:53:31,713 - INFO     - Added edge (1, 0)
2025-10-29 13:53:31,713 - INFO     - Added edge (1, 2)
2025-10-29 13:53:31,713 - INFO     - Added edge (1, 3)
2025-10-29 13:53:31,714 - INFO     - Added edge (1, 4)
2025-10-29 13:53:31,714 - INFO     - Added edge (1, 5)
2025-10-29 13:53:31,714 - INFO     - Added edge (1, 6)
2025-10-29 13:53:31,714 - INFO     - Added edge (1, 7)
2025-10-29 13:53:31,714 - INFO     - Added edge (1, 8)
2025-10-29 13:53:31,714 - INFO     - Added edge (2, 0)
2025-10-29 13:53:31,714 - INFO     - Added edge (2, 1)
2025-10-29 13:53:31,714 - INFO     - Added edge (2, 3)
2025-10-29 13:53:31,714 - INFO     - Added edge (2, 4)
2025-10-29 13:53:31,714 - INFO     - Added edge (2, 5)
2025-10-29 13:53:31,714 - INFO     - Added edge (2, 6)
2025-10-29 13:53:31,714 - INFO     - Added edge (2, 7)
2025-10-29 13:53:31,715 - INFO     - Added edge (2, 8)
2025-10-29 13:53:31,715 - INFO     - Added edge (3, 0)
2025-10-29 13:53:31,715 - INFO     - Added edge (3, 1)
2025-10-29 13:53:31,715 - INFO     - Added edge (3, 2)
2025-10-29 13:53:31,715 - INFO     - Added edge (3, 4)
2025-10-29 13:53:31,715 - INFO     - Added edge (3, 5)
2025-10-29 13:53:31,715 - INFO     - Added edge (3, 6)
2025-10-29 13:53:31,715 - INFO     - Added edge (3, 7)
2025-10-29 13:53:31,715 - INFO     - Added edge (3, 8)
2025-10-29 13:53:31,715 - INFO     - Added edge (4, 0)
2025-10-29 13:53:31,715 - INFO     - Added edge (4, 1)
2025-10-29 13:53:31,715 - INFO     - Added edge (4, 2)
2025-10-29 13:53:31,716 - INFO     - Added edge (4, 3)
2025-10-29 13:53:31,716 - INFO     - Added edge (4, 5)
2025-10-29 13:53:31,716 - INFO     - Added edge (4, 6)
2025-10-29 13:53:31,716 - INFO     - Added edge (4, 7)
2025-10-29 13:53:31,716 - INFO     - Added edge (4, 8)
2025-10-29 13:53:31,716 - INFO     - Added edge (5, 0)
2025-10-29 13:53:31,716 - INFO     - Added edge (5, 1)
2025-10-29 13:53:31,716 - INFO     - Added edge (5, 2)
2025-10-29 13:53:31,716 - INFO     - Added edge (5, 3)
2025-10-29 13:53:31,716 - INFO     - Added edge (5, 4)
2025-10-29 13:53:31,716 - INFO     - Added edge (6, 0)
2025-10-29 13:53:31,717 - INFO     - Added edge (6, 1)
2025-10-29 13:53:31,717 - INFO     - Added edge (6, 2)
2025-10-29 13:53:31,717 - INFO     - Added edge (6, 3)
2025-10-29 13:53:31,717 - INFO     - Added edge (6, 4)
2025-10-29 13:53:31,717 - INFO     - Added edge (7, 0)
2025-10-29 13:53:31,717 - INFO     - Added edge (7, 1)
2025-10-29 13:53:31,717 - INFO     - Added edge (7, 2)
2025-10-29 13:53:31,717 - INFO     - Added edge (7, 3)
2025-10-29 13:53:31,717 - INFO     - Added edge (7, 4)
2025-10-29 13:53:31,717 - INFO     - Added edge (8, 0)
2025-10-29 13:53:31,717 - INFO     - Added edge (8, 1)
2025-10-29 13:53:31,717 - INFO     - Added edge (8, 2)
2025-10-29 13:53:31,717 - INFO     - Added edge (8, 3)
2025-10-29 13:53:31,717 - INFO     - Added edge (8, 4)
2025-10-29 13:53:31,718 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:31,727 - INFO     - 
==========================================================================================
2025-10-29 13:53:31,727 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:31,727 - INFO     - ==========================================================================================
2025-10-29 13:53:31,727 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:31,728 - INFO     -   Input action: 13 (type: int)
2025-10-29 13:53:31,728 - INFO     -   Available edges in graph: 60
2025-10-29 13:53:31,728 - INFO     -   Action index calculation:
2025-10-29 13:53:31,728 - INFO     -     - action % max(num_valid_edges, 1) = 13 % 60 = 13
2025-10-29 13:53:31,728 - INFO     -     - clamped to [0, 59]: 13
2025-10-29 13:53:31,728 - INFO     -   ✓ Extracted merge pair from edge 13: (1, 6)
2025-10-29 13:53:31,728 - INFO     -   ✓ Validation passed
2025-10-29 13:53:31,728 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:31,728 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:31,728 - INFO     -     - Num nodes: 9
2025-10-29 13:53:31,728 - INFO     -     - Num edges: 60
2025-10-29 13:53:31,729 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:31,729 - INFO     -       - Node 1: 2 states
2025-10-29 13:53:31,729 - INFO     -       - Node 6: 5 states
2025-10-29 13:53:31,729 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:31,729 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:31,733 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:53:31,733 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:31,733 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:53:31,835 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:31,835 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:31,835 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:53:31,835 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:31,835 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:31,835 - INFO     -   Calling graph_tracker.merge_nodes([1, 6])...
2025-10-29 13:53:31,836 - INFO     - Attempting merge of nodes 1 and 6...
2025-10-29 13:53:31,836 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:53:31,836 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:31,836 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:31,836 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:53:31,836 - INFO     - 
================================================================================
2025-10-29 13:53:31,836 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:53:31,836 - INFO     - ================================================================================
2025-10-29 13:53:31,836 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:31,837 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:53:31,837 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:53:31,837 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:31,837 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:31,837 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:31,838 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:31,838 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:31,838 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:31,838 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:31,838 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:31,838 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:31,838 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:31,838 - INFO     -   - ts1_id: 1
2025-10-29 13:53:31,838 - INFO     -   - ts2_id: 6
2025-10-29 13:53:31,838 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:31,838 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:31,838 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:53:31,838 - INFO     -   - Product space size: 10
2025-10-29 13:53:31,838 - INFO     -   - Using product state mapping
2025-10-29 13:53:31,838 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:31,838 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:53:31,839 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:53:31,839 - INFO     -   - delta: 0.7000
2025-10-29 13:53:31,839 - INFO     -   - f_stability: 1.0 - |0.7000| / 2.9000 = 0.7586
2025-10-29 13:53:31,839 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:31,839 - INFO     -   - Compared 7 values
2025-10-29 13:53:31,839 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:31,839 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:31,839 - INFO     -   - states_before: 10
2025-10-29 13:53:31,839 - INFO     -   - states_after: 10
2025-10-29 13:53:31,839 - INFO     -   - delta_states: 0
2025-10-29 13:53:31,839 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:31,839 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:31,839 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:31,839 - INFO     -   - merged_transitions: 37
2025-10-29 13:53:31,839 - INFO     -   - transition_density_change: 1.9000
2025-10-29 13:53:31,839 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:31,839 - INFO     -   - search_signals present: True
2025-10-29 13:53:31,839 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:31,839 - INFO     -   - search_depth: 2
2025-10-29 13:53:31,839 - INFO     -   - solution_cost: 0
2025-10-29 13:53:31,839 - INFO     -   - branching_factor: 3.7000
2025-10-29 13:53:31,839 - INFO     -   - solution_found: True
2025-10-29 13:53:31,839 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:31,840 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:31,840 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:53:31,840 - INFO     -   - TS1(2) + TS6(5) → 10 states
2025-10-29 13:53:31,840 - INFO     -   - f_stability=0.759
2025-10-29 13:53:31,841 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:31,841 - INFO     -   - solution_found=True
2025-10-29 13:53:31,841 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:31,841 - INFO     - 
  Extracted signals:
2025-10-29 13:53:31,841 - INFO     -     - iteration: 0
2025-10-29 13:53:31,841 - INFO     -     - states_before: 10
2025-10-29 13:53:31,841 - INFO     -     - states_after: 10
2025-10-29 13:53:31,841 - INFO     -     - delta_states: 0
2025-10-29 13:53:31,841 - INFO     -     - f_value_stability: 0.7586
2025-10-29 13:53:31,841 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:31,841 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:31,841 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:31,841 - INFO     -     - search_depth: 2
2025-10-29 13:53:31,841 - INFO     -     - solution_cost: 0
2025-10-29 13:53:31,841 - INFO     -     - branching_factor: 3.7000
2025-10-29 13:53:31,841 - INFO     -     - solution_found: True
2025-10-29 13:53:31,841 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:31,842 - INFO     - 
  Computing reward:
2025-10-29 13:53:31,842 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:31,842 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:31,842 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:31,842 - INFO     -   [1] BRANCHING FACTOR: 3.700 → score 0.607 (tolerable)
2025-10-29 13:53:31,842 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:31,842 - INFO     -   [3] F-VALUE STABILITY: 0.251
2025-10-29 13:53:31,842 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:31,842 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:31,842 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:53:31,842 - INFO     -     = 0.300*0.607 (bf)
2025-10-29 13:53:31,842 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:31,843 - INFO     -     + 0.350*0.251 (stability)
2025-10-29 13:53:31,843 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:31,843 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:31,843 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:31,843 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:31,843 - INFO     - 
  [FINAL REWARD]: 0.3236
2025-10-29 13:53:31,843 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:31,843 - INFO     -     ✓ Reward computed: 0.3236
2025-10-29 13:53:31,843 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:31,843 - INFO     -     - bf_score                       0.6067
2025-10-29 13:53:31,843 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:31,843 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:31,843 - INFO     -     - f_stability                    0.2507
2025-10-29 13:53:31,843 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:31,844 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:31,844 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:31,844 - INFO     -     - composite                      0.5618
2025-10-29 13:53:31,844 - INFO     -     - total                          0.3236
2025-10-29 13:53:31,844 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:31,844 - INFO     -   Num remaining nodes: 8
2025-10-29 13:53:31,844 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:53:31,844 - INFO     -   Done: False
2025-10-29 13:53:31,844 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:31,845 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:31,845 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:31,845 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:31,846 - INFO     -     - num_nodes: 8
2025-10-29 13:53:31,846 - INFO     -     - num_edges: 50
2025-10-29 13:53:31,846 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:31,846 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:53:31,846 - INFO     -   After: current_merge_step = 1
2025-10-29 13:53:31,846 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:31,846 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:31,846 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:31,847 - INFO     -   ✓ Step logged
2025-10-29 13:53:31,847 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:31,847 - INFO     -   Returning:
2025-10-29 13:53:31,847 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:31,847 - INFO     -     - reward: 0.3236
2025-10-29 13:53:31,847 - INFO     -     - done: False
2025-10-29 13:53:31,847 - INFO     -     - truncated: False
2025-10-29 13:53:31,847 - INFO     -     - info: 19 keys
2025-10-29 13:53:31,847 - INFO     - ==========================================================================================

2025-10-29 13:53:31,853 - INFO     - 
==========================================================================================
2025-10-29 13:53:31,853 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:31,854 - INFO     - ==========================================================================================
2025-10-29 13:53:31,854 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:31,854 - INFO     -   Input action: 42 (type: int)
2025-10-29 13:53:31,854 - INFO     -   Available edges in graph: 50
2025-10-29 13:53:31,854 - INFO     -   Action index calculation:
2025-10-29 13:53:31,854 - INFO     -     - action % max(num_valid_edges, 1) = 42 % 50 = 42
2025-10-29 13:53:31,854 - INFO     -     - clamped to [0, 49]: 42
2025-10-29 13:53:31,854 - INFO     -   ✓ Extracted merge pair from edge 42: (8, 9)
2025-10-29 13:53:31,854 - INFO     -   ✓ Validation passed
2025-10-29 13:53:31,854 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:31,854 - INFO     -     - Total states before merge: 33
2025-10-29 13:53:31,854 - INFO     -     - Num nodes: 8
2025-10-29 13:53:31,854 - INFO     -     - Num edges: 50
2025-10-29 13:53:31,854 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:31,854 - INFO     -       - Node 8: 5 states
2025-10-29 13:53:31,854 - INFO     -       - Node 9: 10 states
2025-10-29 13:53:31,854 - INFO     -       - Expected product: 50 states
2025-10-29 13:53:31,854 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:31,864 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:53:31,864 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:31,864 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:53:31,965 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:31,965 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:31,965 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:53:31,966 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:31,966 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:31,966 - INFO     -   Calling graph_tracker.merge_nodes([8, 9])...
2025-10-29 13:53:31,966 - INFO     - Attempting merge of nodes 8 and 9...
2025-10-29 13:53:31,966 - INFO     - Successfully merged nodes into new node 10 with 50 states.
2025-10-29 13:53:31,966 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:31,968 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:31,968 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:53:31,968 - INFO     - 
================================================================================
2025-10-29 13:53:31,968 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:53:31,968 - INFO     - ================================================================================
2025-10-29 13:53:31,968 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:31,968 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:53:31,968 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:53:31,968 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:31,968 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:31,968 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:31,968 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:31,968 - INFO     -   - Raw f_after length: 50
2025-10-29 13:53:31,968 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:31,968 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:31,968 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:31,968 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:53:31,968 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:31,968 - INFO     -   - ts1_id: 8
2025-10-29 13:53:31,968 - INFO     -   - ts2_id: 9
2025-10-29 13:53:31,968 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:31,968 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:31,968 - INFO     -   - ts1_size: 5, ts2_size: 10
2025-10-29 13:53:31,968 - INFO     -   - Product space size: 50
2025-10-29 13:53:31,968 - INFO     -   - Using product state mapping
2025-10-29 13:53:31,968 - INFO     -   - f_before_product length: 50
2025-10-29 13:53:31,970 - INFO     -   - avg_f_before: 4.2600 (50 valid states)
2025-10-29 13:53:31,970 - INFO     -   - avg_f_after:  6.3800 (50 valid states)
2025-10-29 13:53:31,970 - INFO     -   - delta: 2.1200
2025-10-29 13:53:31,970 - INFO     -   - f_stability: 1.0 - |2.1200| / 4.2600 = 0.5023
2025-10-29 13:53:31,970 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:31,970 - INFO     -   - Compared 15 values
2025-10-29 13:53:31,970 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:31,971 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:31,971 - INFO     -   - states_before: 50
2025-10-29 13:53:31,971 - INFO     -   - states_after: 50
2025-10-29 13:53:31,971 - INFO     -   - delta_states: 0
2025-10-29 13:53:31,971 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:31,971 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:31,971 - INFO     -   - ts2_transitions: 37
2025-10-29 13:53:31,971 - INFO     -   - merged_transitions: 260
2025-10-29 13:53:31,971 - INFO     -   - transition_density_change: 4.2000
2025-10-29 13:53:31,971 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:31,971 - INFO     -   - search_signals present: True
2025-10-29 13:53:31,971 - INFO     -   - nodes_expanded: 50
2025-10-29 13:53:31,971 - INFO     -   - search_depth: 3
2025-10-29 13:53:31,971 - INFO     -   - solution_cost: 0
2025-10-29 13:53:31,971 - INFO     -   - branching_factor: 5.2000
2025-10-29 13:53:31,971 - INFO     -   - solution_found: True
2025-10-29 13:53:31,971 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:31,972 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:31,972 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:53:31,972 - INFO     -   - TS8(5) + TS9(10) → 50 states
2025-10-29 13:53:31,972 - INFO     -   - f_stability=0.502
2025-10-29 13:53:31,972 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:53:31,972 - INFO     -   - solution_found=True
2025-10-29 13:53:31,972 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:31,972 - INFO     - 
  Extracted signals:
2025-10-29 13:53:31,972 - INFO     -     - iteration: 1
2025-10-29 13:53:31,972 - INFO     -     - states_before: 50
2025-10-29 13:53:31,972 - INFO     -     - states_after: 50
2025-10-29 13:53:31,972 - INFO     -     - delta_states: 0
2025-10-29 13:53:31,972 - INFO     -     - f_value_stability: 0.5023
2025-10-29 13:53:31,972 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:31,973 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:31,973 - INFO     -     - nodes_expanded: 50
2025-10-29 13:53:31,973 - INFO     -     - search_depth: 3
2025-10-29 13:53:31,973 - INFO     -     - solution_cost: 0
2025-10-29 13:53:31,973 - INFO     -     - branching_factor: 5.2000
2025-10-29 13:53:31,973 - INFO     -     - solution_found: True
2025-10-29 13:53:31,973 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:31,973 - INFO     - 
  Computing reward:
2025-10-29 13:53:31,973 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:31,973 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:31,973 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:31,973 - INFO     -   [1] BRANCHING FACTOR: 5.200 → score 0.407 (tolerable)
2025-10-29 13:53:31,973 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:31,973 - INFO     -   [3] F-VALUE STABILITY: 0.471
2025-10-29 13:53:31,973 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:31,973 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:31,973 - INFO     - 
  [COMPOSITE]: 0.572
2025-10-29 13:53:31,973 - INFO     -     = 0.300*0.407 (bf)
2025-10-29 13:53:31,973 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:31,974 - INFO     -     + 0.350*0.471 (stability)
2025-10-29 13:53:31,974 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:31,974 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:31,974 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:31,974 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:31,974 - INFO     - 
  [FINAL REWARD]: 0.4433
2025-10-29 13:53:31,974 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:31,974 - INFO     -     ✓ Reward computed: 0.4433
2025-10-29 13:53:31,974 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:31,974 - INFO     -     - bf_score                       0.4067
2025-10-29 13:53:31,974 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:31,974 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:31,974 - INFO     -     - f_stability                    0.4712
2025-10-29 13:53:31,974 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:31,974 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:31,974 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:31,975 - INFO     -     - composite                      0.5717
2025-10-29 13:53:31,975 - INFO     -     - total                          0.4433
2025-10-29 13:53:31,975 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:31,975 - INFO     -   Num remaining nodes: 7
2025-10-29 13:53:31,975 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:53:31,975 - INFO     -   Done: False
2025-10-29 13:53:31,975 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:31,976 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:31,976 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:31,976 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:31,977 - INFO     -     - num_nodes: 7
2025-10-29 13:53:31,977 - INFO     -     - num_edges: 40
2025-10-29 13:53:31,977 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:31,977 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:53:31,977 - INFO     -   After: current_merge_step = 2
2025-10-29 13:53:31,977 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:31,977 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:31,977 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:31,978 - INFO     -   ✓ Step logged
2025-10-29 13:53:31,978 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:31,978 - INFO     -   Returning:
2025-10-29 13:53:31,978 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:31,978 - INFO     -     - reward: 0.4433
2025-10-29 13:53:31,979 - INFO     -     - done: False
2025-10-29 13:53:31,979 - INFO     -     - truncated: False
2025-10-29 13:53:31,979 - INFO     -     - info: 19 keys
2025-10-29 13:53:31,979 - INFO     - ==========================================================================================

2025-10-29 13:53:31,983 - INFO     - 
==========================================================================================
2025-10-29 13:53:31,983 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:31,983 - INFO     - ==========================================================================================
2025-10-29 13:53:31,983 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:31,983 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:53:31,983 - INFO     -   Available edges in graph: 40
2025-10-29 13:53:31,983 - INFO     -   Action index calculation:
2025-10-29 13:53:31,983 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 40 = 3
2025-10-29 13:53:31,983 - INFO     -     - clamped to [0, 39]: 3
2025-10-29 13:53:31,983 - INFO     -   ✓ Extracted merge pair from edge 3: (0, 5)
2025-10-29 13:53:31,983 - INFO     -   ✓ Validation passed
2025-10-29 13:53:31,983 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:31,983 - INFO     -     - Total states before merge: 68
2025-10-29 13:53:31,983 - INFO     -     - Num nodes: 7
2025-10-29 13:53:31,985 - INFO     -     - Num edges: 40
2025-10-29 13:53:31,985 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:31,985 - INFO     -       - Node 0: 2 states
2025-10-29 13:53:31,985 - INFO     -       - Node 5: 5 states
2025-10-29 13:53:31,985 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:31,985 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:31,989 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:53:31,989 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:31,990 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:53:32,091 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:32,091 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:32,091 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:53:32,092 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:32,092 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:32,092 - INFO     -   Calling graph_tracker.merge_nodes([0, 5])...
2025-10-29 13:53:32,092 - INFO     - Attempting merge of nodes 0 and 5...
2025-10-29 13:53:32,092 - INFO     - Successfully merged nodes into new node 11 with 10 states.
2025-10-29 13:53:32,092 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:32,092 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:32,092 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:53:32,092 - INFO     - 
================================================================================
2025-10-29 13:53:32,093 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:53:32,093 - INFO     - ================================================================================
2025-10-29 13:53:32,093 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:32,093 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:53:32,093 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:53:32,093 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:32,093 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:32,093 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:32,093 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:32,094 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:32,094 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:32,094 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:32,094 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:32,094 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:32,094 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:32,094 - INFO     -   - ts1_id: 0
2025-10-29 13:53:32,094 - INFO     -   - ts2_id: 5
2025-10-29 13:53:32,094 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:32,094 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:32,094 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:53:32,094 - INFO     -   - Product space size: 10
2025-10-29 13:53:32,094 - INFO     -   - Using product state mapping
2025-10-29 13:53:32,094 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:32,095 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:32,095 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:53:32,095 - INFO     -   - delta: 0.8000
2025-10-29 13:53:32,095 - INFO     -   - f_stability: 1.0 - |0.8000| / 2.8000 = 0.7143
2025-10-29 13:53:32,095 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:32,095 - INFO     -   - Compared 7 values
2025-10-29 13:53:32,096 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:32,096 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:32,096 - INFO     -   - states_before: 10
2025-10-29 13:53:32,096 - INFO     -   - states_after: 10
2025-10-29 13:53:32,096 - INFO     -   - delta_states: 0
2025-10-29 13:53:32,096 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:32,096 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:32,096 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:32,096 - INFO     -   - merged_transitions: 37
2025-10-29 13:53:32,096 - INFO     -   - transition_density_change: 1.9000
2025-10-29 13:53:32,096 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:32,096 - INFO     -   - search_signals present: True
2025-10-29 13:53:32,096 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:32,096 - INFO     -   - search_depth: 2
2025-10-29 13:53:32,097 - INFO     -   - solution_cost: 2
2025-10-29 13:53:32,097 - INFO     -   - branching_factor: 3.7000
2025-10-29 13:53:32,097 - INFO     -   - solution_found: True
2025-10-29 13:53:32,097 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:32,097 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:32,097 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:53:32,097 - INFO     -   - TS0(2) + TS5(5) → 10 states
2025-10-29 13:53:32,097 - INFO     -   - f_stability=0.714
2025-10-29 13:53:32,097 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:32,097 - INFO     -   - solution_found=True
2025-10-29 13:53:32,098 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:32,098 - INFO     - 
  Extracted signals:
2025-10-29 13:53:32,098 - INFO     -     - iteration: 2
2025-10-29 13:53:32,098 - INFO     -     - states_before: 10
2025-10-29 13:53:32,098 - INFO     -     - states_after: 10
2025-10-29 13:53:32,098 - INFO     -     - delta_states: 0
2025-10-29 13:53:32,098 - INFO     -     - f_value_stability: 0.7143
2025-10-29 13:53:32,098 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:32,098 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:32,098 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:32,098 - INFO     -     - search_depth: 2
2025-10-29 13:53:32,098 - INFO     -     - solution_cost: 2
2025-10-29 13:53:32,098 - INFO     -     - branching_factor: 3.7000
2025-10-29 13:53:32,099 - INFO     -     - solution_found: True
2025-10-29 13:53:32,099 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:32,099 - INFO     - 
  Computing reward:
2025-10-29 13:53:32,099 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:32,099 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:32,099 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:32,099 - INFO     -   [1] BRANCHING FACTOR: 3.700 → score 0.607 (tolerable)
2025-10-29 13:53:32,099 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:32,100 - INFO     -   [3] F-VALUE STABILITY: 0.459
2025-10-29 13:53:32,100 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:32,100 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:32,100 - INFO     - 
  [COMPOSITE]: 0.635
2025-10-29 13:53:32,100 - INFO     -     = 0.300*0.607 (bf)
2025-10-29 13:53:32,100 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:32,100 - INFO     -     + 0.350*0.459 (stability)
2025-10-29 13:53:32,100 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:32,100 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:32,100 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:32,100 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:32,101 - INFO     - 
  [FINAL REWARD]: 0.5693
2025-10-29 13:53:32,101 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:32,101 - INFO     -     ✓ Reward computed: 0.5693
2025-10-29 13:53:32,101 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:32,101 - INFO     -     - bf_score                       0.6067
2025-10-29 13:53:32,101 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:32,101 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:32,101 - INFO     -     - f_stability                    0.4588
2025-10-29 13:53:32,101 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:32,101 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:32,101 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:32,102 - INFO     -     - composite                      0.6347
2025-10-29 13:53:32,102 - INFO     -     - total                          0.5693
2025-10-29 13:53:32,102 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:32,102 - INFO     -   Num remaining nodes: 6
2025-10-29 13:53:32,102 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:53:32,102 - INFO     -   Done: False
2025-10-29 13:53:32,102 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:32,105 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:32,105 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:32,105 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:32,105 - INFO     -     - num_nodes: 6
2025-10-29 13:53:32,105 - INFO     -     - num_edges: 30
2025-10-29 13:53:32,105 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:32,106 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:53:32,106 - INFO     -   After: current_merge_step = 3
2025-10-29 13:53:32,106 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:32,106 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:32,106 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:32,113 - INFO     -   ✓ Step logged
2025-10-29 13:53:32,113 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:32,113 - INFO     -   Returning:
2025-10-29 13:53:32,113 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:32,114 - INFO     -     - reward: 0.5693
2025-10-29 13:53:32,114 - INFO     -     - done: False
2025-10-29 13:53:32,114 - INFO     -     - truncated: False
2025-10-29 13:53:32,114 - INFO     -     - info: 19 keys
2025-10-29 13:53:32,114 - INFO     - ==========================================================================================

2025-10-29 13:53:32,119 - INFO     - 
==========================================================================================
2025-10-29 13:53:32,119 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:32,119 - INFO     - ==========================================================================================
2025-10-29 13:53:32,119 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:32,119 - INFO     -   Input action: 25 (type: int)
2025-10-29 13:53:32,119 - INFO     -   Available edges in graph: 30
2025-10-29 13:53:32,119 - INFO     -   Action index calculation:
2025-10-29 13:53:32,119 - INFO     -     - action % max(num_valid_edges, 1) = 25 % 30 = 25
2025-10-29 13:53:32,119 - INFO     -     - clamped to [0, 29]: 25
2025-10-29 13:53:32,120 - INFO     -   ✓ Extracted merge pair from edge 25: (11, 2)
2025-10-29 13:53:32,120 - INFO     -   ✓ Validation passed
2025-10-29 13:53:32,120 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:32,120 - INFO     -     - Total states before merge: 71
2025-10-29 13:53:32,120 - INFO     -     - Num nodes: 6
2025-10-29 13:53:32,120 - INFO     -     - Num edges: 30
2025-10-29 13:53:32,120 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:32,120 - INFO     -       - Node 11: 10 states
2025-10-29 13:53:32,120 - INFO     -       - Node 2: 2 states
2025-10-29 13:53:32,120 - INFO     -       - Expected product: 20 states
2025-10-29 13:53:32,120 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:32,126 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:53:32,126 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:32,126 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:53:32,227 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:32,228 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:32,228 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:53:32,228 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:32,229 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:32,229 - INFO     -   Calling graph_tracker.merge_nodes([11, 2])...
2025-10-29 13:53:32,229 - INFO     - Attempting merge of nodes 11 and 2...
2025-10-29 13:53:32,229 - INFO     - Successfully merged nodes into new node 12 with 20 states.
2025-10-29 13:53:32,229 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:32,229 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:32,229 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:53:32,229 - INFO     - 
================================================================================
2025-10-29 13:53:32,229 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:53:32,229 - INFO     - ================================================================================
2025-10-29 13:53:32,229 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:32,229 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:53:32,229 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:53:32,230 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:32,230 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:32,230 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:53:32,230 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:32,230 - INFO     -   - Raw f_after length: 20
2025-10-29 13:53:32,230 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:32,230 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:53:32,231 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:32,231 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:53:32,231 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:32,231 - INFO     -   - ts1_id: 11
2025-10-29 13:53:32,231 - INFO     -   - ts2_id: 2
2025-10-29 13:53:32,231 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:32,231 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:32,231 - INFO     -   - ts1_size: 10, ts2_size: 2
2025-10-29 13:53:32,231 - INFO     -   - Product space size: 20
2025-10-29 13:53:32,231 - INFO     -   - Using product state mapping
2025-10-29 13:53:32,231 - INFO     -   - f_before_product length: 20
2025-10-29 13:53:32,231 - INFO     -   - avg_f_before: 3.6000 (20 valid states)
2025-10-29 13:53:32,231 - INFO     -   - avg_f_after:  4.0000 (20 valid states)
2025-10-29 13:53:32,232 - INFO     -   - delta: 0.4000
2025-10-29 13:53:32,232 - INFO     -   - f_stability: 1.0 - |0.4000| / 3.6000 = 0.8889
2025-10-29 13:53:32,232 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:32,232 - INFO     -   - Compared 12 values
2025-10-29 13:53:32,232 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:32,232 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:32,232 - INFO     -   - states_before: 20
2025-10-29 13:53:32,232 - INFO     -   - states_after: 20
2025-10-29 13:53:32,232 - INFO     -   - delta_states: 0
2025-10-29 13:53:32,232 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:32,232 - INFO     -   - ts1_transitions: 37
2025-10-29 13:53:32,232 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:32,232 - INFO     -   - merged_transitions: 122
2025-10-29 13:53:32,232 - INFO     -   - transition_density_change: 4.0000
2025-10-29 13:53:32,233 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:32,233 - INFO     -   - search_signals present: True
2025-10-29 13:53:32,233 - INFO     -   - nodes_expanded: 20
2025-10-29 13:53:32,233 - INFO     -   - search_depth: 2
2025-10-29 13:53:32,233 - INFO     -   - solution_cost: 2
2025-10-29 13:53:32,233 - INFO     -   - branching_factor: 6.1000
2025-10-29 13:53:32,233 - INFO     -   - solution_found: True
2025-10-29 13:53:32,233 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:32,233 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:32,233 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:53:32,233 - INFO     -   - TS11(10) + TS2(2) → 20 states
2025-10-29 13:53:32,233 - INFO     -   - f_stability=0.889
2025-10-29 13:53:32,233 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:53:32,234 - INFO     -   - solution_found=True
2025-10-29 13:53:32,234 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:32,234 - INFO     - 
  Extracted signals:
2025-10-29 13:53:32,234 - INFO     -     - iteration: 3
2025-10-29 13:53:32,234 - INFO     -     - states_before: 20
2025-10-29 13:53:32,234 - INFO     -     - states_after: 20
2025-10-29 13:53:32,234 - INFO     -     - delta_states: 0
2025-10-29 13:53:32,234 - INFO     -     - f_value_stability: 0.8889
2025-10-29 13:53:32,234 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:32,234 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:32,234 - INFO     -     - nodes_expanded: 20
2025-10-29 13:53:32,234 - INFO     -     - search_depth: 2
2025-10-29 13:53:32,234 - INFO     -     - solution_cost: 2
2025-10-29 13:53:32,234 - INFO     -     - branching_factor: 6.1000
2025-10-29 13:53:32,235 - INFO     -     - solution_found: True
2025-10-29 13:53:32,235 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:32,235 - INFO     - 
  Computing reward:
2025-10-29 13:53:32,235 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:32,235 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:32,235 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:32,235 - INFO     -   [1] BRANCHING FACTOR: 6.100 → score 0.290 (high BF, minimal credit)
2025-10-29 13:53:32,235 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:32,235 - INFO     -   [3] F-VALUE STABILITY: 0.715
2025-10-29 13:53:32,235 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:32,235 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:32,235 - INFO     - 
  [COMPOSITE]: 0.629
2025-10-29 13:53:32,236 - INFO     -     = 0.300*0.290 (bf)
2025-10-29 13:53:32,236 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:32,236 - INFO     -     + 0.350*0.715 (stability)
2025-10-29 13:53:32,236 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:32,236 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:32,236 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:32,236 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:32,236 - INFO     - 
  [FINAL REWARD]: 0.7583
2025-10-29 13:53:32,236 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:32,236 - INFO     -     ✓ Reward computed: 0.7583
2025-10-29 13:53:32,236 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:32,236 - INFO     -     - bf_score                       0.2900
2025-10-29 13:53:32,237 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:32,237 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:32,237 - INFO     -     - f_stability                    0.7145
2025-10-29 13:53:32,237 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:32,237 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:32,237 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:32,237 - INFO     -     - composite                      0.6291
2025-10-29 13:53:32,237 - INFO     -     - total                          0.7583
2025-10-29 13:53:32,237 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:32,237 - INFO     -   Num remaining nodes: 5
2025-10-29 13:53:32,237 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:53:32,237 - INFO     -   Done: False
2025-10-29 13:53:32,237 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:32,238 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:32,238 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:32,238 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:32,238 - INFO     -     - num_nodes: 5
2025-10-29 13:53:32,238 - INFO     -     - num_edges: 20
2025-10-29 13:53:32,238 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:32,238 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:53:32,238 - INFO     -   After: current_merge_step = 4
2025-10-29 13:53:32,238 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:32,238 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:32,240 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:32,240 - INFO     -   ✓ Step logged
2025-10-29 13:53:32,240 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:32,240 - INFO     -   Returning:
2025-10-29 13:53:32,240 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:32,240 - INFO     -     - reward: 0.7583
2025-10-29 13:53:32,240 - INFO     -     - done: False
2025-10-29 13:53:32,240 - INFO     -     - truncated: False
2025-10-29 13:53:32,240 - INFO     -     - info: 19 keys
2025-10-29 13:53:32,240 - INFO     - ==========================================================================================

2025-10-29 13:53:32,246 - INFO     - 
==========================================================================================
2025-10-29 13:53:32,246 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:32,247 - INFO     - ==========================================================================================
2025-10-29 13:53:32,247 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:32,247 - INFO     -   Input action: 10 (type: int)
2025-10-29 13:53:32,247 - INFO     -   Available edges in graph: 20
2025-10-29 13:53:32,247 - INFO     -   Action index calculation:
2025-10-29 13:53:32,247 - INFO     -     - action % max(num_valid_edges, 1) = 10 % 20 = 10
2025-10-29 13:53:32,247 - INFO     -     - clamped to [0, 19]: 10
2025-10-29 13:53:32,247 - INFO     -   ✓ Extracted merge pair from edge 10: (7, 10)
2025-10-29 13:53:32,247 - INFO     -   ✓ Validation passed
2025-10-29 13:53:32,247 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:32,247 - INFO     -     - Total states before merge: 79
2025-10-29 13:53:32,247 - INFO     -     - Num nodes: 5
2025-10-29 13:53:32,247 - INFO     -     - Num edges: 20
2025-10-29 13:53:32,247 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:32,248 - INFO     -       - Node 7: 5 states
2025-10-29 13:53:32,248 - INFO     -       - Node 10: 50 states
2025-10-29 13:53:32,248 - INFO     -       - Expected product: 250 states
2025-10-29 13:53:32,248 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:32,259 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:53:32,259 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:32,259 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:53:32,361 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:32,361 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:32,361 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:53:32,365 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:32,365 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:32,365 - INFO     -   Calling graph_tracker.merge_nodes([7, 10])...
2025-10-29 13:53:32,365 - INFO     - Attempting merge of nodes 7 and 10...
2025-10-29 13:53:32,365 - INFO     - Successfully merged nodes into new node 13 with 250 states.
2025-10-29 13:53:32,365 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:32,366 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:32,366 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:53:32,366 - INFO     - 
================================================================================
2025-10-29 13:53:32,366 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:53:32,366 - INFO     - ================================================================================
2025-10-29 13:53:32,366 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:32,366 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:53:32,366 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:53:32,367 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:32,367 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:32,367 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:32,367 - INFO     -   - Raw ts2_f length: 50
2025-10-29 13:53:32,367 - INFO     -   - Raw f_after length: 250
2025-10-29 13:53:32,367 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:32,367 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:32,367 - INFO     -   - ts2_valid: 50 / 50 (removed -50)
2025-10-29 13:53:32,367 - INFO     -   - after_valid: 250 / 250 (removed 0)
2025-10-29 13:53:32,368 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:32,368 - INFO     -   - ts1_id: 7
2025-10-29 13:53:32,368 - INFO     -   - ts2_id: 10
2025-10-29 13:53:32,368 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:32,368 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:32,369 - INFO     -   - ts1_size: 5, ts2_size: 50
2025-10-29 13:53:32,369 - INFO     -   - Product space size: 250
2025-10-29 13:53:32,369 - INFO     -   - Using product state mapping
2025-10-29 13:53:32,370 - INFO     -   - f_before_product length: 250
2025-10-29 13:53:32,371 - INFO     -   - avg_f_before: 6.5200 (250 valid states)
2025-10-29 13:53:32,371 - INFO     -   - avg_f_after:  9.2040 (250 valid states)
2025-10-29 13:53:32,371 - INFO     -   - delta: 2.6840
2025-10-29 13:53:32,371 - INFO     -   - f_stability: 1.0 - |2.6840| / 6.5200 = 0.5883
2025-10-29 13:53:32,372 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:32,372 - INFO     -   - Compared 55 values
2025-10-29 13:53:32,372 - INFO     -   - Significant changes (> 5.0): 2
2025-10-29 13:53:32,372 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:32,372 - INFO     -   - states_before: 250
2025-10-29 13:53:32,372 - INFO     -   - states_after: 250
2025-10-29 13:53:32,372 - INFO     -   - delta_states: 0
2025-10-29 13:53:32,372 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:32,372 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:32,372 - INFO     -   - ts2_transitions: 260
2025-10-29 13:53:32,372 - INFO     -   - merged_transitions: 1675
2025-10-29 13:53:32,372 - INFO     -   - transition_density_change: 5.6080
2025-10-29 13:53:32,373 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:32,373 - INFO     -   - search_signals present: True
2025-10-29 13:53:32,373 - INFO     -   - nodes_expanded: 250
2025-10-29 13:53:32,373 - INFO     -   - search_depth: 4
2025-10-29 13:53:32,373 - INFO     -   - solution_cost: 2
2025-10-29 13:53:32,373 - INFO     -   - branching_factor: 6.7000
2025-10-29 13:53:32,373 - INFO     -   - solution_found: True
2025-10-29 13:53:32,373 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:32,374 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:32,374 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:53:32,374 - INFO     -   - TS7(5) + TS10(50) → 250 states
2025-10-29 13:53:32,375 - INFO     -   - f_stability=0.588
2025-10-29 13:53:32,375 - INFO     -   - A* nodes_expanded=250
2025-10-29 13:53:32,375 - INFO     -   - solution_found=True
2025-10-29 13:53:32,375 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:32,375 - INFO     - 
  Extracted signals:
2025-10-29 13:53:32,375 - INFO     -     - iteration: 4
2025-10-29 13:53:32,376 - INFO     -     - states_before: 250
2025-10-29 13:53:32,376 - INFO     -     - states_after: 250
2025-10-29 13:53:32,376 - INFO     -     - delta_states: 0
2025-10-29 13:53:32,376 - INFO     -     - f_value_stability: 0.5883
2025-10-29 13:53:32,376 - INFO     -     - num_significant_f_changes: 2
2025-10-29 13:53:32,376 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:32,376 - INFO     -     - nodes_expanded: 250
2025-10-29 13:53:32,376 - INFO     -     - search_depth: 4
2025-10-29 13:53:32,377 - INFO     -     - solution_cost: 2
2025-10-29 13:53:32,377 - INFO     -     - branching_factor: 6.7000
2025-10-29 13:53:32,377 - INFO     -     - solution_found: True
2025-10-29 13:53:32,377 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:32,377 - INFO     - 
  Computing reward:
2025-10-29 13:53:32,377 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:32,377 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:32,377 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:32,377 - INFO     -   [1] BRANCHING FACTOR: 6.700 → score 0.230 (high BF, minimal credit)
2025-10-29 13:53:32,378 - INFO     -   [2] SOLUTION QUALITY: depth=4 → score 0.795 + bonus 0.300
2025-10-29 13:53:32,378 - INFO     -   [3] F-VALUE STABILITY: 0.526
2025-10-29 13:53:32,378 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:32,378 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:32,378 - INFO     - 
  [COMPOSITE]: 0.532
2025-10-29 13:53:32,378 - INFO     -     = 0.300*0.230 (bf)
2025-10-29 13:53:32,379 - INFO     -     + 0.200*0.795 (depth)
2025-10-29 13:53:32,379 - INFO     -     + 0.350*0.526 (stability)
2025-10-29 13:53:32,379 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:32,379 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:32,379 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:32,379 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:32,379 - INFO     - 
  [FINAL REWARD]: 0.4640
2025-10-29 13:53:32,379 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:32,379 - INFO     -     ✓ Reward computed: 0.4640
2025-10-29 13:53:32,379 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:32,379 - INFO     -     - bf_score                       0.2300
2025-10-29 13:53:32,379 - INFO     -     - depth_score                    0.7953
2025-10-29 13:53:32,379 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:32,379 - INFO     -     - f_stability                    0.5256
2025-10-29 13:53:32,379 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:32,379 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:32,381 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:32,381 - INFO     -     - composite                      0.5320
2025-10-29 13:53:32,381 - INFO     -     - total                          0.4640
2025-10-29 13:53:32,381 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:32,381 - INFO     -   Num remaining nodes: 4
2025-10-29 13:53:32,381 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:53:32,381 - INFO     -   Done: False
2025-10-29 13:53:32,381 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:32,382 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:32,382 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:32,383 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:32,383 - INFO     -     - num_nodes: 4
2025-10-29 13:53:32,383 - INFO     -     - num_edges: 12
2025-10-29 13:53:32,383 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:32,383 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:53:32,383 - INFO     -   After: current_merge_step = 5
2025-10-29 13:53:32,383 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:32,383 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:32,384 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:32,385 - INFO     -   ✓ Step logged
2025-10-29 13:53:32,385 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:32,385 - INFO     -   Returning:
2025-10-29 13:53:32,385 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:32,386 - INFO     -     - reward: 0.4640
2025-10-29 13:53:32,386 - INFO     -     - done: False
2025-10-29 13:53:32,386 - INFO     -     - truncated: False
2025-10-29 13:53:32,386 - INFO     -     - info: 19 keys
2025-10-29 13:53:32,386 - INFO     - ==========================================================================================

2025-10-29 13:53:32,394 - INFO     - 
==========================================================================================
2025-10-29 13:53:32,394 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:32,394 - INFO     - ==========================================================================================
2025-10-29 13:53:32,394 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:32,394 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:53:32,394 - INFO     -   Available edges in graph: 12
2025-10-29 13:53:32,394 - INFO     -   Action index calculation:
2025-10-29 13:53:32,394 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 12 = 1
2025-10-29 13:53:32,394 - INFO     -     - clamped to [0, 11]: 1
2025-10-29 13:53:32,394 - INFO     -   ✓ Extracted merge pair from edge 1: (3, 12)
2025-10-29 13:53:32,395 - INFO     -   ✓ Validation passed
2025-10-29 13:53:32,395 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:32,395 - INFO     -     - Total states before merge: 274
2025-10-29 13:53:32,395 - INFO     -     - Num nodes: 4
2025-10-29 13:53:32,395 - INFO     -     - Num edges: 12
2025-10-29 13:53:32,395 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:32,395 - INFO     -       - Node 3: 2 states
2025-10-29 13:53:32,395 - INFO     -       - Node 12: 20 states
2025-10-29 13:53:32,395 - INFO     -       - Expected product: 40 states
2025-10-29 13:53:32,395 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:32,406 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:53:32,406 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:32,406 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:53:32,508 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:32,508 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:32,508 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:53:32,508 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:32,508 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:32,508 - INFO     -   Calling graph_tracker.merge_nodes([3, 12])...
2025-10-29 13:53:32,508 - INFO     - Attempting merge of nodes 3 and 12...
2025-10-29 13:53:32,508 - INFO     - Successfully merged nodes into new node 14 with 40 states.
2025-10-29 13:53:32,508 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:32,510 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:32,510 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:53:32,510 - INFO     - 
================================================================================
2025-10-29 13:53:32,510 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:53:32,510 - INFO     - ================================================================================
2025-10-29 13:53:32,510 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:32,510 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:53:32,510 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:53:32,511 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:32,511 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:32,511 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:32,511 - INFO     -   - Raw ts2_f length: 20
2025-10-29 13:53:32,511 - INFO     -   - Raw f_after length: 40
2025-10-29 13:53:32,511 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:32,511 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:32,512 - INFO     -   - ts2_valid: 20 / 20 (removed -20)
2025-10-29 13:53:32,512 - INFO     -   - after_valid: 40 / 40 (removed 0)
2025-10-29 13:53:32,512 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:32,512 - INFO     -   - ts1_id: 3
2025-10-29 13:53:32,512 - INFO     -   - ts2_id: 12
2025-10-29 13:53:32,512 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:32,512 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:32,512 - INFO     -   - ts1_size: 2, ts2_size: 20
2025-10-29 13:53:32,512 - INFO     -   - Product space size: 40
2025-10-29 13:53:32,512 - INFO     -   - Using product state mapping
2025-10-29 13:53:32,512 - INFO     -   - f_before_product length: 40
2025-10-29 13:53:32,513 - INFO     -   - avg_f_before: 4.0000 (40 valid states)
2025-10-29 13:53:32,513 - INFO     -   - avg_f_after:  4.3750 (40 valid states)
2025-10-29 13:53:32,513 - INFO     -   - delta: 0.3750
2025-10-29 13:53:32,513 - INFO     -   - f_stability: 1.0 - |0.3750| / 4.0000 = 0.9062
2025-10-29 13:53:32,513 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:32,513 - INFO     -   - Compared 22 values
2025-10-29 13:53:32,513 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:32,513 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:32,514 - INFO     -   - states_before: 40
2025-10-29 13:53:32,514 - INFO     -   - states_after: 40
2025-10-29 13:53:32,514 - INFO     -   - delta_states: 0
2025-10-29 13:53:32,514 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:32,514 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:32,514 - INFO     -   - ts2_transitions: 122
2025-10-29 13:53:32,514 - INFO     -   - merged_transitions: 380
2025-10-29 13:53:32,514 - INFO     -   - transition_density_change: 6.3250
2025-10-29 13:53:32,514 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:32,514 - INFO     -   - search_signals present: True
2025-10-29 13:53:32,514 - INFO     -   - nodes_expanded: 40
2025-10-29 13:53:32,514 - INFO     -   - search_depth: 2
2025-10-29 13:53:32,514 - INFO     -   - solution_cost: 2
2025-10-29 13:53:32,514 - INFO     -   - branching_factor: 9.5000
2025-10-29 13:53:32,514 - INFO     -   - solution_found: True
2025-10-29 13:53:32,515 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:32,515 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:32,515 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:53:32,515 - INFO     -   - TS3(2) + TS12(20) → 40 states
2025-10-29 13:53:32,515 - INFO     -   - f_stability=0.906
2025-10-29 13:53:32,515 - INFO     -   - A* nodes_expanded=40
2025-10-29 13:53:32,515 - INFO     -   - solution_found=True
2025-10-29 13:53:32,515 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:32,516 - INFO     - 
  Extracted signals:
2025-10-29 13:53:32,516 - INFO     -     - iteration: 5
2025-10-29 13:53:32,516 - INFO     -     - states_before: 40
2025-10-29 13:53:32,516 - INFO     -     - states_after: 40
2025-10-29 13:53:32,516 - INFO     -     - delta_states: 0
2025-10-29 13:53:32,516 - INFO     -     - f_value_stability: 0.9062
2025-10-29 13:53:32,516 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:32,516 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:32,516 - INFO     -     - nodes_expanded: 40
2025-10-29 13:53:32,516 - INFO     -     - search_depth: 2
2025-10-29 13:53:32,516 - INFO     -     - solution_cost: 2
2025-10-29 13:53:32,516 - INFO     -     - branching_factor: 9.5000
2025-10-29 13:53:32,517 - INFO     -     - solution_found: True
2025-10-29 13:53:32,517 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:32,517 - WARNING  -     ⚠️  High branching factor: 9.5000
2025-10-29 13:53:32,517 - INFO     - 
  Computing reward:
2025-10-29 13:53:32,517 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:32,517 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:32,517 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:32,517 - INFO     -   [1] BRANCHING FACTOR: 9.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:53:32,517 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:32,518 - INFO     -   [3] F-VALUE STABILITY: 0.849
2025-10-29 13:53:32,518 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:32,518 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:32,518 - INFO     - 
  [COMPOSITE]: 0.619
2025-10-29 13:53:32,518 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:53:32,519 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:32,519 - INFO     -     + 0.350*0.849 (stability)
2025-10-29 13:53:32,519 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:32,519 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:32,519 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:32,519 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:32,519 - INFO     - 
  [FINAL REWARD]: 0.7387
2025-10-29 13:53:32,519 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:32,519 - INFO     -     ✓ Reward computed: 0.7387
2025-10-29 13:53:32,519 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:32,519 - INFO     -     - bf_score                       0.1000
2025-10-29 13:53:32,519 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:32,520 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:32,520 - INFO     -     - f_stability                    0.8494
2025-10-29 13:53:32,520 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:32,520 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:32,520 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:32,520 - INFO     -     - composite                      0.6193
2025-10-29 13:53:32,520 - INFO     -     - total                          0.7387
2025-10-29 13:53:32,520 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:32,520 - INFO     -   Num remaining nodes: 3
2025-10-29 13:53:32,520 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:53:32,520 - INFO     -   Done: False
2025-10-29 13:53:32,521 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:32,521 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:32,522 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:32,522 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:32,522 - INFO     -     - num_nodes: 3
2025-10-29 13:53:32,522 - INFO     -     - num_edges: 6
2025-10-29 13:53:32,522 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:32,522 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:53:32,522 - INFO     -   After: current_merge_step = 6
2025-10-29 13:53:32,522 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:32,523 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:32,523 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:32,523 - INFO     -   ✓ Step logged
2025-10-29 13:53:32,523 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:32,525 - INFO     -   Returning:
2025-10-29 13:53:32,525 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:32,525 - INFO     -     - reward: 0.7387
2025-10-29 13:53:32,525 - INFO     -     - done: False
2025-10-29 13:53:32,525 - INFO     -     - truncated: False
2025-10-29 13:53:32,525 - INFO     -     - info: 19 keys
2025-10-29 13:53:32,525 - INFO     - ==========================================================================================

2025-10-29 13:53:32,530 - INFO     - 
==========================================================================================
2025-10-29 13:53:32,530 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:32,530 - INFO     - ==========================================================================================
2025-10-29 13:53:32,531 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:32,531 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:53:32,531 - INFO     -   Available edges in graph: 6
2025-10-29 13:53:32,531 - INFO     -   Action index calculation:
2025-10-29 13:53:32,531 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 6 = 2
2025-10-29 13:53:32,531 - INFO     -     - clamped to [0, 5]: 2
2025-10-29 13:53:32,531 - INFO     -   ✓ Extracted merge pair from edge 2: (13, 4)
2025-10-29 13:53:32,531 - INFO     -   ✓ Validation passed
2025-10-29 13:53:32,531 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:32,531 - INFO     -     - Total states before merge: 292
2025-10-29 13:53:32,531 - INFO     -     - Num nodes: 3
2025-10-29 13:53:32,532 - INFO     -     - Num edges: 6
2025-10-29 13:53:32,532 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:32,532 - INFO     -       - Node 13: 250 states
2025-10-29 13:53:32,532 - INFO     -       - Node 4: 2 states
2025-10-29 13:53:32,532 - INFO     -       - Expected product: 500 states
2025-10-29 13:53:32,532 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:32,542 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:53:32,543 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:32,543 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:53:32,644 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:32,644 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:32,644 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:53:32,647 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:32,647 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:32,647 - INFO     -   Calling graph_tracker.merge_nodes([13, 4])...
2025-10-29 13:53:32,647 - INFO     - Attempting merge of nodes 13 and 4...
2025-10-29 13:53:32,647 - INFO     - Successfully merged nodes into new node 15 with 500 states.
2025-10-29 13:53:32,647 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:32,647 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:32,647 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:53:32,647 - INFO     - 
================================================================================
2025-10-29 13:53:32,647 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:53:32,647 - INFO     - ================================================================================
2025-10-29 13:53:32,647 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:32,647 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:53:32,647 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:53:32,649 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:32,649 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:32,649 - INFO     -   - Raw ts1_f length: 250
2025-10-29 13:53:32,649 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:32,649 - INFO     -   - Raw f_after length: 500
2025-10-29 13:53:32,649 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:32,649 - INFO     -   - ts1_valid: 250 / 250 (removed 0)
2025-10-29 13:53:32,649 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:32,649 - INFO     -   - after_valid: 500 / 500 (removed 0)
2025-10-29 13:53:32,649 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:32,650 - INFO     -   - ts1_id: 13
2025-10-29 13:53:32,650 - INFO     -   - ts2_id: 4
2025-10-29 13:53:32,650 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:32,650 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:32,650 - INFO     -   - ts1_size: 250, ts2_size: 2
2025-10-29 13:53:32,650 - INFO     -   - Product space size: 500
2025-10-29 13:53:32,650 - INFO     -   - Using product state mapping
2025-10-29 13:53:32,651 - INFO     -   - f_before_product length: 500
2025-10-29 13:53:32,652 - INFO     -   - avg_f_before: 9.2040 (500 valid states)
2025-10-29 13:53:32,652 - INFO     -   - avg_f_after:  10.3920 (500 valid states)
2025-10-29 13:53:32,652 - INFO     -   - delta: 1.1880
2025-10-29 13:53:32,652 - INFO     -   - f_stability: 1.0 - |1.1880| / 9.2040 = 0.8709
2025-10-29 13:53:32,652 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:32,652 - INFO     -   - Compared 252 values
2025-10-29 13:53:32,652 - INFO     -   - Significant changes (> 5.0): 55
2025-10-29 13:53:32,652 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:32,652 - INFO     -   - states_before: 500
2025-10-29 13:53:32,652 - INFO     -   - states_after: 500
2025-10-29 13:53:32,652 - INFO     -   - delta_states: 0
2025-10-29 13:53:32,652 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:32,653 - INFO     -   - ts1_transitions: 1675
2025-10-29 13:53:32,653 - INFO     -   - ts2_transitions: 3
2025-10-29 13:53:32,653 - INFO     -   - merged_transitions: 2850
2025-10-29 13:53:32,653 - INFO     -   - transition_density_change: 2.3440
2025-10-29 13:53:32,653 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:32,653 - INFO     -   - search_signals present: True
2025-10-29 13:53:32,653 - INFO     -   - nodes_expanded: 500
2025-10-29 13:53:32,653 - INFO     -   - search_depth: 5
2025-10-29 13:53:32,653 - INFO     -   - solution_cost: 2
2025-10-29 13:53:32,653 - INFO     -   - branching_factor: 5.7000
2025-10-29 13:53:32,653 - INFO     -   - solution_found: True
2025-10-29 13:53:32,653 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:32,654 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:32,654 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:53:32,654 - INFO     -   - TS13(250) + TS4(2) → 500 states
2025-10-29 13:53:32,654 - INFO     -   - f_stability=0.871
2025-10-29 13:53:32,654 - INFO     -   - A* nodes_expanded=500
2025-10-29 13:53:32,654 - INFO     -   - solution_found=True
2025-10-29 13:53:32,656 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:32,656 - INFO     - 
  Extracted signals:
2025-10-29 13:53:32,656 - INFO     -     - iteration: 6
2025-10-29 13:53:32,656 - INFO     -     - states_before: 500
2025-10-29 13:53:32,656 - INFO     -     - states_after: 500
2025-10-29 13:53:32,656 - INFO     -     - delta_states: 0
2025-10-29 13:53:32,656 - INFO     -     - f_value_stability: 0.8709
2025-10-29 13:53:32,656 - INFO     -     - num_significant_f_changes: 55
2025-10-29 13:53:32,656 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:32,656 - INFO     -     - nodes_expanded: 500
2025-10-29 13:53:32,656 - INFO     -     - search_depth: 5
2025-10-29 13:53:32,656 - INFO     -     - solution_cost: 2
2025-10-29 13:53:32,656 - INFO     -     - branching_factor: 5.7000
2025-10-29 13:53:32,656 - INFO     -     - solution_found: True
2025-10-29 13:53:32,656 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:32,656 - INFO     - 
  Computing reward:
2025-10-29 13:53:32,656 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:32,656 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:32,657 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:32,657 - INFO     -   [1] BRANCHING FACTOR: 5.700 → score 0.340 (tolerable)
2025-10-29 13:53:32,657 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:32,658 - INFO     -   [3] F-VALUE STABILITY: 0.974
2025-10-29 13:53:32,658 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:32,658 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:32,658 - INFO     - 
  [COMPOSITE]: 0.717
2025-10-29 13:53:32,658 - INFO     -     = 0.300*0.340 (bf)
2025-10-29 13:53:32,658 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:32,658 - INFO     -     + 0.350*0.974 (stability)
2025-10-29 13:53:32,658 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:32,658 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:32,658 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:32,658 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:32,658 - INFO     - 
  [FINAL REWARD]: 0.9345
2025-10-29 13:53:32,658 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:32,658 - INFO     -     ✓ Reward computed: 0.9345
2025-10-29 13:53:32,658 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:32,659 - INFO     -     - bf_score                       0.3400
2025-10-29 13:53:32,659 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:32,659 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:32,659 - INFO     -     - f_stability                    0.9738
2025-10-29 13:53:32,659 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:32,659 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:32,659 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:32,659 - INFO     -     - composite                      0.7172
2025-10-29 13:53:32,659 - INFO     -     - total                          0.9345
2025-10-29 13:53:32,659 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:32,659 - INFO     -   Num remaining nodes: 2
2025-10-29 13:53:32,659 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:53:32,659 - INFO     -   Done: False
2025-10-29 13:53:32,659 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:32,660 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:32,660 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:32,660 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:32,660 - INFO     -     - num_nodes: 2
2025-10-29 13:53:32,660 - INFO     -     - num_edges: 2
2025-10-29 13:53:32,660 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:32,660 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:53:32,660 - INFO     -   After: current_merge_step = 7
2025-10-29 13:53:32,660 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:32,660 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:32,660 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:32,661 - INFO     -   ✓ Step logged
2025-10-29 13:53:32,661 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:32,661 - INFO     -   Returning:
2025-10-29 13:53:32,661 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:32,661 - INFO     -     - reward: 0.9345
2025-10-29 13:53:32,661 - INFO     -     - done: False
2025-10-29 13:53:32,661 - INFO     -     - truncated: False
2025-10-29 13:53:32,661 - INFO     -     - info: 19 keys
2025-10-29 13:53:32,661 - INFO     - ==========================================================================================

2025-10-29 13:53:32,667 - INFO     - 
==========================================================================================
2025-10-29 13:53:32,667 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:32,668 - INFO     - ==========================================================================================
2025-10-29 13:53:32,668 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:32,668 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:53:32,668 - INFO     -   Available edges in graph: 2
2025-10-29 13:53:32,668 - INFO     -   Action index calculation:
2025-10-29 13:53:32,668 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:53:32,668 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:53:32,668 - INFO     -   ✓ Extracted merge pair from edge 0: (14, 15)
2025-10-29 13:53:32,668 - INFO     -   ✓ Validation passed
2025-10-29 13:53:32,668 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:32,668 - INFO     -     - Total states before merge: 540
2025-10-29 13:53:32,668 - INFO     -     - Num nodes: 2
2025-10-29 13:53:32,668 - INFO     -     - Num edges: 2
2025-10-29 13:53:32,668 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:32,668 - INFO     -       - Node 14: 40 states
2025-10-29 13:53:32,669 - INFO     -       - Node 15: 500 states
2025-10-29 13:53:32,669 - INFO     -       - Expected product: 20000 states
2025-10-29 13:53:32,669 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:32,678 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:53:32,679 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:32,679 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:53:32,780 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:32,780 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:32,780 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:53:33,033 - INFO     -   ✓ TS file received after 0.25s
2025-10-29 13:53:33,034 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:33,034 - INFO     -   Calling graph_tracker.merge_nodes([14, 15])...
2025-10-29 13:53:33,034 - INFO     - Attempting merge of nodes 14 and 15...
2025-10-29 13:53:33,034 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:53:33,034 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:33,034 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:33,034 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:53:33,035 - INFO     - 
================================================================================
2025-10-29 13:53:33,035 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:53:33,035 - INFO     - ================================================================================
2025-10-29 13:53:33,035 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:33,035 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:53:33,035 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:53:33,042 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:33,042 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:33,043 - INFO     -   - Raw ts1_f length: 40
2025-10-29 13:53:33,043 - INFO     -   - Raw ts2_f length: 88
2025-10-29 13:53:33,043 - INFO     -   - Raw f_after length: 3520
2025-10-29 13:53:33,043 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:33,043 - INFO     -   - ts1_valid: 40 / 40 (removed 0)
2025-10-29 13:53:33,043 - INFO     -   - ts2_valid: 88 / 88 (removed -88)
2025-10-29 13:53:33,046 - INFO     -   - after_valid: 2160 / 3520 (removed 1360)
2025-10-29 13:53:33,046 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:33,046 - INFO     -   - ts1_id: 14
2025-10-29 13:53:33,046 - INFO     -   - ts2_id: 15
2025-10-29 13:53:33,046 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:33,046 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:33,046 - INFO     -   - ts1_size: 40, ts2_size: 88
2025-10-29 13:53:33,046 - INFO     -   - Product space size: 3520
2025-10-29 13:53:33,047 - INFO     -   - Using product state mapping
2025-10-29 13:53:33,056 - INFO     -   - f_before_product length: 3520
2025-10-29 13:53:33,067 - INFO     -   - avg_f_before: 5.8361 (3520 valid states)
2025-10-29 13:53:33,068 - INFO     -   - avg_f_after:  10.7773 (2160 valid states)
2025-10-29 13:53:33,068 - INFO     -   - delta: 4.9412
2025-10-29 13:53:33,068 - INFO     -   - f_stability: 1.0 - |4.9412| / 5.8361 = 0.1533
2025-10-29 13:53:33,068 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:33,068 - INFO     -   - Compared 128 values
2025-10-29 13:53:33,068 - INFO     -   - Significant changes (> 5.0): 27
2025-10-29 13:53:33,068 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:33,069 - INFO     -   - states_before: 3520
2025-10-29 13:53:33,069 - INFO     -   - states_after: 3520
2025-10-29 13:53:33,069 - INFO     -   - delta_states: 0
2025-10-29 13:53:33,069 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:33,069 - INFO     -   - ts1_transitions: 380
2025-10-29 13:53:33,069 - INFO     -   - ts2_transitions: 828
2025-10-29 13:53:33,069 - INFO     -   - merged_transitions: 17236
2025-10-29 13:53:33,069 - INFO     -   - transition_density_change: 4.5534
2025-10-29 13:53:33,069 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:33,069 - INFO     -   - search_signals present: True
2025-10-29 13:53:33,070 - INFO     -   - nodes_expanded: 2160
2025-10-29 13:53:33,070 - INFO     -   - search_depth: 5
2025-10-29 13:53:33,070 - INFO     -   - solution_cost: 4
2025-10-29 13:53:33,070 - INFO     -   - branching_factor: 7.9796
2025-10-29 13:53:33,070 - INFO     -   - solution_found: True
2025-10-29 13:53:33,070 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:33,072 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:33,072 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:53:33,072 - INFO     -   - TS14(40) + TS15(88) → 3520 states
2025-10-29 13:53:33,072 - INFO     -   - f_stability=0.153
2025-10-29 13:53:33,072 - INFO     -   - A* nodes_expanded=2160
2025-10-29 13:53:33,072 - INFO     -   - solution_found=True
2025-10-29 13:53:33,073 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:33,073 - INFO     - 
  Extracted signals:
2025-10-29 13:53:33,073 - INFO     -     - iteration: 7
2025-10-29 13:53:33,073 - INFO     -     - states_before: 3520
2025-10-29 13:53:33,073 - INFO     -     - states_after: 3520
2025-10-29 13:53:33,073 - INFO     -     - delta_states: 0
2025-10-29 13:53:33,073 - INFO     -     - f_value_stability: 0.1533
2025-10-29 13:53:33,073 - INFO     -     - num_significant_f_changes: 27
2025-10-29 13:53:33,073 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:33,073 - INFO     -     - nodes_expanded: 2160
2025-10-29 13:53:33,074 - INFO     -     - search_depth: 5
2025-10-29 13:53:33,074 - INFO     -     - solution_cost: 4
2025-10-29 13:53:33,074 - INFO     -     - branching_factor: 7.9796
2025-10-29 13:53:33,074 - INFO     -     - solution_found: True
2025-10-29 13:53:33,074 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:33,074 - WARNING  -     ⚠️  Poor F-stability: 0.1533
2025-10-29 13:53:33,075 - INFO     - 
  Computing reward:
2025-10-29 13:53:33,075 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:33,075 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:33,075 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:33,075 - INFO     -   [1] BRANCHING FACTOR: 7.980 → score 0.102 (high BF, minimal credit)
2025-10-29 13:53:33,075 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:33,077 - INFO     -   [3] F-VALUE STABILITY: 0.156
2025-10-29 13:53:33,077 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:33,077 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:33,077 - INFO     - 
  [COMPOSITE]: 0.360
2025-10-29 13:53:33,077 - INFO     -     = 0.300*0.102 (bf)
2025-10-29 13:53:33,077 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:33,077 - INFO     -     + 0.350*0.156 (stability)
2025-10-29 13:53:33,077 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:33,077 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:33,077 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:33,078 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:33,078 - INFO     - 
  [FINAL REWARD]: -0.0805
2025-10-29 13:53:33,078 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:33,078 - INFO     -     ✓ Reward computed: -0.0805
2025-10-29 13:53:33,078 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:33,078 - INFO     -     - bf_score                       0.1020
2025-10-29 13:53:33,079 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:33,079 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:33,079 - INFO     -     - f_stability                    0.1563
2025-10-29 13:53:33,079 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:33,079 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:33,079 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:33,079 - INFO     -     - composite                      0.3597
2025-10-29 13:53:33,079 - INFO     -     - total                          -0.0805
2025-10-29 13:53:33,079 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:33,079 - INFO     -   Num remaining nodes: 1
2025-10-29 13:53:33,079 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:53:33,079 - INFO     -   Done: True
2025-10-29 13:53:33,079 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:53:33,080 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:33,080 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:33,080 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:33,080 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:33,080 - INFO     -     - num_nodes: 1
2025-10-29 13:53:33,080 - INFO     -     - num_edges: 0
2025-10-29 13:53:33,080 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:33,080 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:53:33,080 - INFO     -   After: current_merge_step = 8
2025-10-29 13:53:33,080 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:33,081 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:33,081 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:33,081 - INFO     -   ✓ Step logged
2025-10-29 13:53:33,081 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:33,081 - INFO     -   Returning:
2025-10-29 13:53:33,081 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:33,082 - INFO     -     - reward: -0.0805
2025-10-29 13:53:33,082 - INFO     -     - done: True
2025-10-29 13:53:33,082 - INFO     -     - truncated: False
2025-10-29 13:53:33,082 - INFO     -     - info: 19 keys
2025-10-29 13:53:33,082 - INFO     - ==========================================================================================

2025-10-29 13:53:33,166 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:53:33,174 - INFO     - [Handshake] Building FD command:
2025-10-29 13:53:33,174 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:33,175 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_03.pddl
2025-10-29 13:53:33,175 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:53:33,179 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:33,933 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:33,933 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:33,933 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:34,251 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:34,252 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:34,252 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:34,252 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:34,252 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:34,252 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:34,252 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:34,252 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:34,253 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:34,253 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:34,253 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:34,253 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:34,253 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:34,253 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:34,253 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:34,253 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:34,253 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:34,253 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:34,253 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:34,253 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:34,253 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:34,253 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:34,253 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:34,254 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:34,254 - INFO     - Added edge (0, 1)
2025-10-29 13:53:34,254 - INFO     - Added edge (0, 2)
2025-10-29 13:53:34,254 - INFO     - Added edge (0, 3)
2025-10-29 13:53:34,254 - INFO     - Added edge (0, 4)
2025-10-29 13:53:34,254 - INFO     - Added edge (0, 5)
2025-10-29 13:53:34,254 - INFO     - Added edge (0, 6)
2025-10-29 13:53:34,254 - INFO     - Added edge (0, 7)
2025-10-29 13:53:34,255 - INFO     - Added edge (0, 8)
2025-10-29 13:53:34,255 - INFO     - Added edge (1, 0)
2025-10-29 13:53:34,255 - INFO     - Added edge (1, 2)
2025-10-29 13:53:34,255 - INFO     - Added edge (1, 3)
2025-10-29 13:53:34,255 - INFO     - Added edge (1, 4)
2025-10-29 13:53:34,255 - INFO     - Added edge (1, 5)
2025-10-29 13:53:34,255 - INFO     - Added edge (1, 6)
2025-10-29 13:53:34,255 - INFO     - Added edge (1, 7)
2025-10-29 13:53:34,255 - INFO     - Added edge (1, 8)
2025-10-29 13:53:34,255 - INFO     - Added edge (2, 0)
2025-10-29 13:53:34,255 - INFO     - Added edge (2, 1)
2025-10-29 13:53:34,255 - INFO     - Added edge (2, 3)
2025-10-29 13:53:34,255 - INFO     - Added edge (2, 4)
2025-10-29 13:53:34,255 - INFO     - Added edge (2, 5)
2025-10-29 13:53:34,255 - INFO     - Added edge (2, 6)
2025-10-29 13:53:34,255 - INFO     - Added edge (2, 7)
2025-10-29 13:53:34,255 - INFO     - Added edge (2, 8)
2025-10-29 13:53:34,255 - INFO     - Added edge (3, 0)
2025-10-29 13:53:34,255 - INFO     - Added edge (3, 1)
2025-10-29 13:53:34,255 - INFO     - Added edge (3, 2)
2025-10-29 13:53:34,255 - INFO     - Added edge (3, 4)
2025-10-29 13:53:34,256 - INFO     - Added edge (3, 5)
2025-10-29 13:53:34,256 - INFO     - Added edge (3, 6)
2025-10-29 13:53:34,256 - INFO     - Added edge (3, 7)
2025-10-29 13:53:34,256 - INFO     - Added edge (3, 8)
2025-10-29 13:53:34,256 - INFO     - Added edge (4, 0)
2025-10-29 13:53:34,256 - INFO     - Added edge (4, 1)
2025-10-29 13:53:34,256 - INFO     - Added edge (4, 2)
2025-10-29 13:53:34,256 - INFO     - Added edge (4, 3)
2025-10-29 13:53:34,256 - INFO     - Added edge (4, 5)
2025-10-29 13:53:34,256 - INFO     - Added edge (4, 6)
2025-10-29 13:53:34,256 - INFO     - Added edge (4, 7)
2025-10-29 13:53:34,256 - INFO     - Added edge (4, 8)
2025-10-29 13:53:34,256 - INFO     - Added edge (5, 0)
2025-10-29 13:53:34,256 - INFO     - Added edge (5, 1)
2025-10-29 13:53:34,256 - INFO     - Added edge (5, 2)
2025-10-29 13:53:34,256 - INFO     - Added edge (5, 3)
2025-10-29 13:53:34,256 - INFO     - Added edge (5, 4)
2025-10-29 13:53:34,256 - INFO     - Added edge (6, 0)
2025-10-29 13:53:34,256 - INFO     - Added edge (6, 1)
2025-10-29 13:53:34,256 - INFO     - Added edge (6, 2)
2025-10-29 13:53:34,256 - INFO     - Added edge (6, 3)
2025-10-29 13:53:34,257 - INFO     - Added edge (6, 4)
2025-10-29 13:53:34,257 - INFO     - Added edge (7, 0)
2025-10-29 13:53:34,257 - INFO     - Added edge (7, 1)
2025-10-29 13:53:34,257 - INFO     - Added edge (7, 2)
2025-10-29 13:53:34,257 - INFO     - Added edge (7, 3)
2025-10-29 13:53:34,257 - INFO     - Added edge (7, 4)
2025-10-29 13:53:34,257 - INFO     - Added edge (8, 0)
2025-10-29 13:53:34,257 - INFO     - Added edge (8, 1)
2025-10-29 13:53:34,257 - INFO     - Added edge (8, 2)
2025-10-29 13:53:34,257 - INFO     - Added edge (8, 3)
2025-10-29 13:53:34,257 - INFO     - Added edge (8, 4)
2025-10-29 13:53:34,257 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:34,263 - INFO     - 
==========================================================================================
2025-10-29 13:53:34,263 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:34,263 - INFO     - ==========================================================================================
2025-10-29 13:53:34,263 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:34,263 - INFO     -   Input action: 7 (type: int)
2025-10-29 13:53:34,263 - INFO     -   Available edges in graph: 60
2025-10-29 13:53:34,263 - INFO     -   Action index calculation:
2025-10-29 13:53:34,263 - INFO     -     - action % max(num_valid_edges, 1) = 7 % 60 = 7
2025-10-29 13:53:34,263 - INFO     -     - clamped to [0, 59]: 7
2025-10-29 13:53:34,263 - INFO     -   ✓ Extracted merge pair from edge 7: (0, 8)
2025-10-29 13:53:34,263 - INFO     -   ✓ Validation passed
2025-10-29 13:53:34,263 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:34,263 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:34,263 - INFO     -     - Num nodes: 9
2025-10-29 13:53:34,263 - INFO     -     - Num edges: 60
2025-10-29 13:53:34,263 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:34,263 - INFO     -       - Node 0: 2 states
2025-10-29 13:53:34,263 - INFO     -       - Node 8: 5 states
2025-10-29 13:53:34,265 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:34,265 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:34,270 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:53:34,270 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:34,270 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:53:34,371 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:34,371 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:34,371 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:53:34,371 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:34,371 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:34,371 - INFO     -   Calling graph_tracker.merge_nodes([0, 8])...
2025-10-29 13:53:34,371 - INFO     - Attempting merge of nodes 0 and 8...
2025-10-29 13:53:34,371 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:53:34,371 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:34,371 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:34,371 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:53:34,371 - INFO     - 
================================================================================
2025-10-29 13:53:34,371 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:53:34,371 - INFO     - ================================================================================
2025-10-29 13:53:34,371 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:34,371 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:53:34,371 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:53:34,373 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:34,373 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:34,373 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:34,373 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:34,373 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:34,373 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:34,373 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:34,373 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:34,373 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:34,373 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:34,373 - INFO     -   - ts1_id: 0
2025-10-29 13:53:34,374 - INFO     -   - ts2_id: 8
2025-10-29 13:53:34,374 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:34,374 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:34,374 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:53:34,374 - INFO     -   - Product space size: 10
2025-10-29 13:53:34,374 - INFO     -   - Using product state mapping
2025-10-29 13:53:34,374 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:34,374 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:53:34,374 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:53:34,374 - INFO     -   - delta: 0.4000
2025-10-29 13:53:34,374 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:53:34,374 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:34,374 - INFO     -   - Compared 7 values
2025-10-29 13:53:34,374 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:34,374 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:34,374 - INFO     -   - states_before: 10
2025-10-29 13:53:34,374 - INFO     -   - states_after: 10
2025-10-29 13:53:34,374 - INFO     -   - delta_states: 0
2025-10-29 13:53:34,374 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:34,374 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:34,374 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:34,374 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:34,375 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:34,375 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:34,375 - INFO     -   - search_signals present: True
2025-10-29 13:53:34,375 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:34,375 - INFO     -   - search_depth: 1
2025-10-29 13:53:34,375 - INFO     -   - solution_cost: 0
2025-10-29 13:53:34,375 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:34,375 - INFO     -   - solution_found: True
2025-10-29 13:53:34,375 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:34,375 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:34,375 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:53:34,375 - INFO     -   - TS0(2) + TS8(5) → 10 states
2025-10-29 13:53:34,375 - INFO     -   - f_stability=0.862
2025-10-29 13:53:34,375 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:34,375 - INFO     -   - solution_found=True
2025-10-29 13:53:34,376 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:34,376 - INFO     - 
  Extracted signals:
2025-10-29 13:53:34,376 - INFO     -     - iteration: 0
2025-10-29 13:53:34,376 - INFO     -     - states_before: 10
2025-10-29 13:53:34,376 - INFO     -     - states_after: 10
2025-10-29 13:53:34,376 - INFO     -     - delta_states: 0
2025-10-29 13:53:34,376 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:53:34,376 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:34,376 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:34,376 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:34,376 - INFO     -     - search_depth: 1
2025-10-29 13:53:34,376 - INFO     -     - solution_cost: 0
2025-10-29 13:53:34,376 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:34,376 - INFO     -     - solution_found: True
2025-10-29 13:53:34,376 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:34,376 - INFO     - 
  Computing reward:
2025-10-29 13:53:34,376 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:34,376 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:34,377 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:34,377 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:34,377 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:53:34,377 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:53:34,377 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:34,377 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:34,377 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:53:34,377 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:34,377 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:53:34,377 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:53:34,377 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:34,377 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:34,378 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:34,378 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:34,378 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:53:34,378 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:34,378 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:53:34,378 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:34,379 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:34,379 - INFO     -     - depth_score                    0.9119
2025-10-29 13:53:34,379 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:34,379 - INFO     -     - f_stability                    0.2913
2025-10-29 13:53:34,379 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:34,379 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:34,379 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:34,379 - INFO     -     - composite                      0.5743
2025-10-29 13:53:34,379 - INFO     -     - total                          0.3487
2025-10-29 13:53:34,380 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:34,380 - INFO     -   Num remaining nodes: 8
2025-10-29 13:53:34,380 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:53:34,380 - INFO     -   Done: False
2025-10-29 13:53:34,380 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:34,382 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:34,382 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:34,382 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:34,382 - INFO     -     - num_nodes: 8
2025-10-29 13:53:34,382 - INFO     -     - num_edges: 50
2025-10-29 13:53:34,382 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:34,382 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:53:34,382 - INFO     -   After: current_merge_step = 1
2025-10-29 13:53:34,382 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:34,382 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:34,382 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:34,383 - INFO     -   ✓ Step logged
2025-10-29 13:53:34,383 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:34,383 - INFO     -   Returning:
2025-10-29 13:53:34,383 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:34,384 - INFO     -     - reward: 0.3487
2025-10-29 13:53:34,384 - INFO     -     - done: False
2025-10-29 13:53:34,384 - INFO     -     - truncated: False
2025-10-29 13:53:34,384 - INFO     -     - info: 19 keys
2025-10-29 13:53:34,384 - INFO     - ==========================================================================================

2025-10-29 13:53:34,388 - INFO     - 
==========================================================================================
2025-10-29 13:53:34,388 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:34,388 - INFO     - ==========================================================================================
2025-10-29 13:53:34,388 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:34,389 - INFO     -   Input action: 40 (type: int)
2025-10-29 13:53:34,389 - INFO     -   Available edges in graph: 50
2025-10-29 13:53:34,389 - INFO     -   Action index calculation:
2025-10-29 13:53:34,389 - INFO     -     - action % max(num_valid_edges, 1) = 40 % 50 = 40
2025-10-29 13:53:34,389 - INFO     -     - clamped to [0, 49]: 40
2025-10-29 13:53:34,389 - INFO     -   ✓ Extracted merge pair from edge 40: (7, 3)
2025-10-29 13:53:34,389 - INFO     -   ✓ Validation passed
2025-10-29 13:53:34,389 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:34,389 - INFO     -     - Total states before merge: 33
2025-10-29 13:53:34,389 - INFO     -     - Num nodes: 8
2025-10-29 13:53:34,389 - INFO     -     - Num edges: 50
2025-10-29 13:53:34,389 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:34,389 - INFO     -       - Node 7: 5 states
2025-10-29 13:53:34,389 - INFO     -       - Node 3: 2 states
2025-10-29 13:53:34,389 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:34,389 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:34,394 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:53:34,395 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:34,395 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:53:34,495 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:34,495 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:34,495 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:53:34,496 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:34,496 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:34,496 - INFO     -   Calling graph_tracker.merge_nodes([7, 3])...
2025-10-29 13:53:34,496 - INFO     - Attempting merge of nodes 7 and 3...
2025-10-29 13:53:34,496 - INFO     - Successfully merged nodes into new node 10 with 10 states.
2025-10-29 13:53:34,496 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:34,496 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:34,496 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:53:34,496 - INFO     - 
================================================================================
2025-10-29 13:53:34,496 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:53:34,496 - INFO     - ================================================================================
2025-10-29 13:53:34,496 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:34,496 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:53:34,496 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:53:34,497 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:34,497 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:34,497 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:34,497 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:34,497 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:34,497 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:34,497 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:34,497 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:34,497 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:34,497 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:34,498 - INFO     -   - ts1_id: 7
2025-10-29 13:53:34,498 - INFO     -   - ts2_id: 3
2025-10-29 13:53:34,498 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:34,498 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:34,498 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:34,498 - INFO     -   - Product space size: 10
2025-10-29 13:53:34,498 - INFO     -   - Using product state mapping
2025-10-29 13:53:34,498 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:34,498 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:34,498 - INFO     -   - avg_f_after:  3.7000 (10 valid states)
2025-10-29 13:53:34,498 - INFO     -   - delta: 0.9000
2025-10-29 13:53:34,498 - INFO     -   - f_stability: 1.0 - |0.9000| / 2.8000 = 0.6786
2025-10-29 13:53:34,498 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:34,498 - INFO     -   - Compared 7 values
2025-10-29 13:53:34,498 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:34,499 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:34,499 - INFO     -   - states_before: 10
2025-10-29 13:53:34,499 - INFO     -   - states_after: 10
2025-10-29 13:53:34,499 - INFO     -   - delta_states: 0
2025-10-29 13:53:34,499 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:34,499 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:34,499 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:34,499 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:34,499 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:34,499 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:34,499 - INFO     -   - search_signals present: True
2025-10-29 13:53:34,499 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:34,499 - INFO     -   - search_depth: 2
2025-10-29 13:53:34,499 - INFO     -   - solution_cost: 2
2025-10-29 13:53:34,499 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:34,499 - INFO     -   - solution_found: True
2025-10-29 13:53:34,499 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:34,500 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:34,500 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:53:34,500 - INFO     -   - TS7(5) + TS3(2) → 10 states
2025-10-29 13:53:34,500 - INFO     -   - f_stability=0.679
2025-10-29 13:53:34,500 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:34,500 - INFO     -   - solution_found=True
2025-10-29 13:53:34,500 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:34,500 - INFO     - 
  Extracted signals:
2025-10-29 13:53:34,500 - INFO     -     - iteration: 1
2025-10-29 13:53:34,500 - INFO     -     - states_before: 10
2025-10-29 13:53:34,500 - INFO     -     - states_after: 10
2025-10-29 13:53:34,500 - INFO     -     - delta_states: 0
2025-10-29 13:53:34,500 - INFO     -     - f_value_stability: 0.6786
2025-10-29 13:53:34,501 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:34,501 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:34,501 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:34,501 - INFO     -     - search_depth: 2
2025-10-29 13:53:34,501 - INFO     -     - solution_cost: 2
2025-10-29 13:53:34,501 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:34,501 - INFO     -     - solution_found: True
2025-10-29 13:53:34,501 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:34,501 - INFO     - 
  Computing reward:
2025-10-29 13:53:34,501 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:34,501 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:34,502 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:34,502 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:34,502 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:34,502 - INFO     -   [3] F-VALUE STABILITY: 0.286
2025-10-29 13:53:34,502 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:34,502 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:34,502 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:53:34,502 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:34,503 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:34,503 - INFO     -     + 0.350*0.286 (stability)
2025-10-29 13:53:34,503 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:34,503 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:34,503 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:34,503 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:34,503 - INFO     - 
  [FINAL REWARD]: 0.3244
2025-10-29 13:53:34,503 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:34,503 - INFO     -     ✓ Reward computed: 0.3244
2025-10-29 13:53:34,503 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:34,503 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:34,503 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:34,503 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:34,503 - INFO     -     - f_stability                    0.2862
2025-10-29 13:53:34,503 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:34,503 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:34,504 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:34,504 - INFO     -     - composite                      0.5622
2025-10-29 13:53:34,504 - INFO     -     - total                          0.3244
2025-10-29 13:53:34,504 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:34,504 - INFO     -   Num remaining nodes: 7
2025-10-29 13:53:34,504 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:53:34,505 - INFO     -   Done: False
2025-10-29 13:53:34,505 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:34,506 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:34,506 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:34,506 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:34,506 - INFO     -     - num_nodes: 7
2025-10-29 13:53:34,506 - INFO     -     - num_edges: 40
2025-10-29 13:53:34,506 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:34,506 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:53:34,506 - INFO     -   After: current_merge_step = 2
2025-10-29 13:53:34,506 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:34,507 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:34,507 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:34,507 - INFO     -   ✓ Step logged
2025-10-29 13:53:34,507 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:34,507 - INFO     -   Returning:
2025-10-29 13:53:34,507 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:34,508 - INFO     -     - reward: 0.3244
2025-10-29 13:53:34,508 - INFO     -     - done: False
2025-10-29 13:53:34,508 - INFO     -     - truncated: False
2025-10-29 13:53:34,508 - INFO     -     - info: 19 keys
2025-10-29 13:53:34,508 - INFO     - ==========================================================================================

2025-10-29 13:53:34,512 - INFO     - 
==========================================================================================
2025-10-29 13:53:34,512 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:34,512 - INFO     - ==========================================================================================
2025-10-29 13:53:34,512 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:34,512 - INFO     -   Input action: 22 (type: int)
2025-10-29 13:53:34,512 - INFO     -   Available edges in graph: 40
2025-10-29 13:53:34,512 - INFO     -   Action index calculation:
2025-10-29 13:53:34,512 - INFO     -     - action % max(num_valid_edges, 1) = 22 % 40 = 22
2025-10-29 13:53:34,512 - INFO     -     - clamped to [0, 39]: 22
2025-10-29 13:53:34,512 - INFO     -   ✓ Extracted merge pair from edge 22: (5, 10)
2025-10-29 13:53:34,512 - INFO     -   ✓ Validation passed
2025-10-29 13:53:34,512 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:34,512 - INFO     -     - Total states before merge: 36
2025-10-29 13:53:34,512 - INFO     -     - Num nodes: 7
2025-10-29 13:53:34,512 - INFO     -     - Num edges: 40
2025-10-29 13:53:34,512 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:34,513 - INFO     -       - Node 5: 5 states
2025-10-29 13:53:34,513 - INFO     -       - Node 10: 10 states
2025-10-29 13:53:34,513 - INFO     -       - Expected product: 50 states
2025-10-29 13:53:34,513 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:34,518 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:53:34,518 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:34,519 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:53:34,620 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:34,620 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:34,620 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:53:34,621 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:34,621 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:34,621 - INFO     -   Calling graph_tracker.merge_nodes([5, 10])...
2025-10-29 13:53:34,621 - INFO     - Attempting merge of nodes 5 and 10...
2025-10-29 13:53:34,621 - INFO     - Successfully merged nodes into new node 11 with 50 states.
2025-10-29 13:53:34,621 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:34,621 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:34,621 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:53:34,621 - INFO     - 
================================================================================
2025-10-29 13:53:34,622 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:53:34,622 - INFO     - ================================================================================
2025-10-29 13:53:34,622 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:34,622 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:53:34,622 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:53:34,622 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:34,622 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:34,622 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:34,622 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:34,622 - INFO     -   - Raw f_after length: 50
2025-10-29 13:53:34,622 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:34,623 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:34,623 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:34,623 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:53:34,623 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:34,623 - INFO     -   - ts1_id: 5
2025-10-29 13:53:34,623 - INFO     -   - ts2_id: 10
2025-10-29 13:53:34,623 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:34,623 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:34,623 - INFO     -   - ts1_size: 5, ts2_size: 10
2025-10-29 13:53:34,623 - INFO     -   - Product space size: 50
2025-10-29 13:53:34,623 - INFO     -   - Using product state mapping
2025-10-29 13:53:34,623 - INFO     -   - f_before_product length: 50
2025-10-29 13:53:34,623 - INFO     -   - avg_f_before: 3.9800 (50 valid states)
2025-10-29 13:53:34,623 - INFO     -   - avg_f_after:  6.4600 (50 valid states)
2025-10-29 13:53:34,623 - INFO     -   - delta: 2.4800
2025-10-29 13:53:34,623 - INFO     -   - f_stability: 1.0 - |2.4800| / 3.9800 = 0.3769
2025-10-29 13:53:34,623 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:34,623 - INFO     -   - Compared 15 values
2025-10-29 13:53:34,623 - INFO     -   - Significant changes (> 5.0): 2
2025-10-29 13:53:34,623 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:34,623 - INFO     -   - states_before: 50
2025-10-29 13:53:34,625 - INFO     -   - states_after: 50
2025-10-29 13:53:34,625 - INFO     -   - delta_states: 0
2025-10-29 13:53:34,625 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:34,625 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:34,625 - INFO     -   - ts2_transitions: 40
2025-10-29 13:53:34,625 - INFO     -   - merged_transitions: 275
2025-10-29 13:53:34,625 - INFO     -   - transition_density_change: 4.4400
2025-10-29 13:53:34,625 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:34,625 - INFO     -   - search_signals present: True
2025-10-29 13:53:34,625 - INFO     -   - nodes_expanded: 50
2025-10-29 13:53:34,625 - INFO     -   - search_depth: 3
2025-10-29 13:53:34,625 - INFO     -   - solution_cost: 4
2025-10-29 13:53:34,626 - INFO     -   - branching_factor: 5.5000
2025-10-29 13:53:34,626 - INFO     -   - solution_found: True
2025-10-29 13:53:34,626 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:34,626 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:34,626 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:53:34,626 - INFO     -   - TS5(5) + TS10(10) → 50 states
2025-10-29 13:53:34,626 - INFO     -   - f_stability=0.377
2025-10-29 13:53:34,626 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:53:34,626 - INFO     -   - solution_found=True
2025-10-29 13:53:34,626 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:34,627 - INFO     - 
  Extracted signals:
2025-10-29 13:53:34,627 - INFO     -     - iteration: 2
2025-10-29 13:53:34,627 - INFO     -     - states_before: 50
2025-10-29 13:53:34,627 - INFO     -     - states_after: 50
2025-10-29 13:53:34,627 - INFO     -     - delta_states: 0
2025-10-29 13:53:34,627 - INFO     -     - f_value_stability: 0.3769
2025-10-29 13:53:34,627 - INFO     -     - num_significant_f_changes: 2
2025-10-29 13:53:34,627 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:34,627 - INFO     -     - nodes_expanded: 50
2025-10-29 13:53:34,627 - INFO     -     - search_depth: 3
2025-10-29 13:53:34,627 - INFO     -     - solution_cost: 4
2025-10-29 13:53:34,627 - INFO     -     - branching_factor: 5.5000
2025-10-29 13:53:34,627 - INFO     -     - solution_found: True
2025-10-29 13:53:34,627 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:34,628 - INFO     - 
  Computing reward:
2025-10-29 13:53:34,628 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:34,628 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:34,628 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:34,628 - INFO     -   [1] BRANCHING FACTOR: 5.500 → score 0.367 (tolerable)
2025-10-29 13:53:34,628 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:34,628 - INFO     -   [3] F-VALUE STABILITY: 0.587
2025-10-29 13:53:34,628 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:34,628 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:34,628 - INFO     - 
  [COMPOSITE]: 0.600
2025-10-29 13:53:34,629 - INFO     -     = 0.300*0.367 (bf)
2025-10-29 13:53:34,629 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:34,629 - INFO     -     + 0.350*0.587 (stability)
2025-10-29 13:53:34,629 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:34,629 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:34,629 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:34,629 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:34,629 - INFO     - 
  [FINAL REWARD]: 0.6006
2025-10-29 13:53:34,629 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:34,629 - INFO     -     ✓ Reward computed: 0.6006
2025-10-29 13:53:34,629 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:34,629 - INFO     -     - bf_score                       0.3667
2025-10-29 13:53:34,629 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:34,629 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:34,629 - INFO     -     - f_stability                    0.5874
2025-10-29 13:53:34,630 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:34,630 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:34,630 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:34,630 - INFO     -     - composite                      0.6003
2025-10-29 13:53:34,630 - INFO     -     - total                          0.6006
2025-10-29 13:53:34,630 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:34,630 - INFO     -   Num remaining nodes: 6
2025-10-29 13:53:34,630 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:53:34,630 - INFO     -   Done: False
2025-10-29 13:53:34,630 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:34,631 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:34,631 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:34,631 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:34,631 - INFO     -     - num_nodes: 6
2025-10-29 13:53:34,631 - INFO     -     - num_edges: 30
2025-10-29 13:53:34,631 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:34,631 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:53:34,631 - INFO     -   After: current_merge_step = 3
2025-10-29 13:53:34,632 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:34,632 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:34,632 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:34,634 - INFO     -   ✓ Step logged
2025-10-29 13:53:34,634 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:34,634 - INFO     -   Returning:
2025-10-29 13:53:34,634 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:34,635 - INFO     -     - reward: 0.6006
2025-10-29 13:53:34,635 - INFO     -     - done: False
2025-10-29 13:53:34,635 - INFO     -     - truncated: False
2025-10-29 13:53:34,635 - INFO     -     - info: 19 keys
2025-10-29 13:53:34,635 - INFO     - ==========================================================================================

2025-10-29 13:53:34,639 - INFO     - 
==========================================================================================
2025-10-29 13:53:34,640 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:34,640 - INFO     - ==========================================================================================
2025-10-29 13:53:34,640 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:34,640 - INFO     -   Input action: 7 (type: int)
2025-10-29 13:53:34,640 - INFO     -   Available edges in graph: 30
2025-10-29 13:53:34,640 - INFO     -   Action index calculation:
2025-10-29 13:53:34,640 - INFO     -     - action % max(num_valid_edges, 1) = 7 % 30 = 7
2025-10-29 13:53:34,640 - INFO     -     - clamped to [0, 29]: 7
2025-10-29 13:53:34,640 - INFO     -   ✓ Extracted merge pair from edge 7: (2, 6)
2025-10-29 13:53:34,640 - INFO     -   ✓ Validation passed
2025-10-29 13:53:34,640 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:34,640 - INFO     -     - Total states before merge: 71
2025-10-29 13:53:34,640 - INFO     -     - Num nodes: 6
2025-10-29 13:53:34,640 - INFO     -     - Num edges: 30
2025-10-29 13:53:34,640 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:34,640 - INFO     -       - Node 2: 2 states
2025-10-29 13:53:34,640 - INFO     -       - Node 6: 5 states
2025-10-29 13:53:34,641 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:34,641 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:34,647 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:53:34,647 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:34,647 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:53:34,747 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:34,747 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:34,747 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:53:34,748 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:34,748 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:34,748 - INFO     -   Calling graph_tracker.merge_nodes([2, 6])...
2025-10-29 13:53:34,748 - INFO     - Attempting merge of nodes 2 and 6...
2025-10-29 13:53:34,748 - INFO     - Successfully merged nodes into new node 12 with 10 states.
2025-10-29 13:53:34,748 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:34,748 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:34,748 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:53:34,748 - INFO     - 
================================================================================
2025-10-29 13:53:34,748 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:53:34,748 - INFO     - ================================================================================
2025-10-29 13:53:34,748 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:34,748 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:53:34,748 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:53:34,750 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:34,750 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:34,750 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:34,750 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:34,750 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:34,750 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:34,750 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:34,750 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:34,750 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:34,750 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:34,750 - INFO     -   - ts1_id: 2
2025-10-29 13:53:34,750 - INFO     -   - ts2_id: 6
2025-10-29 13:53:34,750 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:34,750 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:34,750 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:53:34,750 - INFO     -   - Product space size: 10
2025-10-29 13:53:34,750 - INFO     -   - Using product state mapping
2025-10-29 13:53:34,750 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:34,750 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:53:34,750 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:53:34,750 - INFO     -   - delta: 0.4000
2025-10-29 13:53:34,750 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:53:34,750 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:34,750 - INFO     -   - Compared 7 values
2025-10-29 13:53:34,750 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:34,750 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:34,750 - INFO     -   - states_before: 10
2025-10-29 13:53:34,750 - INFO     -   - states_after: 10
2025-10-29 13:53:34,751 - INFO     -   - delta_states: 0
2025-10-29 13:53:34,751 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:34,751 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:34,751 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:34,751 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:34,751 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:34,751 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:34,751 - INFO     -   - search_signals present: True
2025-10-29 13:53:34,751 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:34,751 - INFO     -   - search_depth: 1
2025-10-29 13:53:34,751 - INFO     -   - solution_cost: 0
2025-10-29 13:53:34,752 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:34,752 - INFO     -   - solution_found: True
2025-10-29 13:53:34,752 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:34,752 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:34,752 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:53:34,752 - INFO     -   - TS2(2) + TS6(5) → 10 states
2025-10-29 13:53:34,752 - INFO     -   - f_stability=0.862
2025-10-29 13:53:34,752 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:34,753 - INFO     -   - solution_found=True
2025-10-29 13:53:34,753 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:34,753 - INFO     - 
  Extracted signals:
2025-10-29 13:53:34,753 - INFO     -     - iteration: 3
2025-10-29 13:53:34,753 - INFO     -     - states_before: 10
2025-10-29 13:53:34,753 - INFO     -     - states_after: 10
2025-10-29 13:53:34,753 - INFO     -     - delta_states: 0
2025-10-29 13:53:34,753 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:53:34,753 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:34,753 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:34,753 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:34,753 - INFO     -     - search_depth: 1
2025-10-29 13:53:34,754 - INFO     -     - solution_cost: 0
2025-10-29 13:53:34,754 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:34,754 - INFO     -     - solution_found: True
2025-10-29 13:53:34,754 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:34,754 - INFO     - 
  Computing reward:
2025-10-29 13:53:34,754 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:34,754 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:34,754 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:34,754 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:34,754 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:53:34,755 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:53:34,755 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:34,755 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:34,755 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:53:34,755 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:34,755 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:53:34,755 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:53:34,755 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:34,755 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:34,755 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:34,755 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:34,755 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:53:34,756 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:34,756 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:53:34,756 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:34,756 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:34,756 - INFO     -     - depth_score                    0.9119
2025-10-29 13:53:34,757 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:34,757 - INFO     -     - f_stability                    0.2913
2025-10-29 13:53:34,757 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:34,757 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:34,757 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:34,757 - INFO     -     - composite                      0.5743
2025-10-29 13:53:34,757 - INFO     -     - total                          0.3487
2025-10-29 13:53:34,758 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:34,758 - INFO     -   Num remaining nodes: 5
2025-10-29 13:53:34,758 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:53:34,758 - INFO     -   Done: False
2025-10-29 13:53:34,758 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:34,758 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:34,759 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:34,759 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:34,759 - INFO     -     - num_nodes: 5
2025-10-29 13:53:34,759 - INFO     -     - num_edges: 20
2025-10-29 13:53:34,759 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:34,759 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:53:34,759 - INFO     -   After: current_merge_step = 4
2025-10-29 13:53:34,759 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:34,759 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:34,759 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:34,760 - INFO     -   ✓ Step logged
2025-10-29 13:53:34,760 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:34,760 - INFO     -   Returning:
2025-10-29 13:53:34,760 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:34,760 - INFO     -     - reward: 0.3487
2025-10-29 13:53:34,760 - INFO     -     - done: False
2025-10-29 13:53:34,760 - INFO     -     - truncated: False
2025-10-29 13:53:34,760 - INFO     -     - info: 19 keys
2025-10-29 13:53:34,760 - INFO     - ==========================================================================================

2025-10-29 13:53:34,764 - INFO     - 
==========================================================================================
2025-10-29 13:53:34,764 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:34,764 - INFO     - ==========================================================================================
2025-10-29 13:53:34,764 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:34,764 - INFO     -   Input action: 15 (type: int)
2025-10-29 13:53:34,764 - INFO     -   Available edges in graph: 20
2025-10-29 13:53:34,765 - INFO     -   Action index calculation:
2025-10-29 13:53:34,765 - INFO     -     - action % max(num_valid_edges, 1) = 15 % 20 = 15
2025-10-29 13:53:34,765 - INFO     -     - clamped to [0, 19]: 15
2025-10-29 13:53:34,765 - INFO     -   ✓ Extracted merge pair from edge 15: (11, 12)
2025-10-29 13:53:34,765 - INFO     -   ✓ Validation passed
2025-10-29 13:53:34,765 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:34,765 - INFO     -     - Total states before merge: 74
2025-10-29 13:53:34,765 - INFO     -     - Num nodes: 5
2025-10-29 13:53:34,765 - INFO     -     - Num edges: 20
2025-10-29 13:53:34,765 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:34,765 - INFO     -       - Node 11: 50 states
2025-10-29 13:53:34,765 - INFO     -       - Node 12: 10 states
2025-10-29 13:53:34,765 - INFO     -       - Expected product: 500 states
2025-10-29 13:53:34,765 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:34,772 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:53:34,772 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:34,772 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:53:34,873 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:34,873 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:34,873 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:53:34,877 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:34,877 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:34,877 - INFO     -   Calling graph_tracker.merge_nodes([11, 12])...
2025-10-29 13:53:34,877 - INFO     - Attempting merge of nodes 11 and 12...
2025-10-29 13:53:34,877 - INFO     - Successfully merged nodes into new node 13 with 500 states.
2025-10-29 13:53:34,877 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:34,877 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:34,877 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:53:34,877 - INFO     - 
================================================================================
2025-10-29 13:53:34,877 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:53:34,877 - INFO     - ================================================================================
2025-10-29 13:53:34,878 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:34,878 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:53:34,878 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:53:34,879 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:34,879 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:34,879 - INFO     -   - Raw ts1_f length: 50
2025-10-29 13:53:34,879 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:34,879 - INFO     -   - Raw f_after length: 500
2025-10-29 13:53:34,879 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:34,879 - INFO     -   - ts1_valid: 50 / 50 (removed 0)
2025-10-29 13:53:34,879 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:34,880 - INFO     -   - after_valid: 500 / 500 (removed 0)
2025-10-29 13:53:34,880 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:34,880 - INFO     -   - ts1_id: 11
2025-10-29 13:53:34,880 - INFO     -   - ts2_id: 12
2025-10-29 13:53:34,880 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:34,880 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:34,880 - INFO     -   - ts1_size: 50, ts2_size: 10
2025-10-29 13:53:34,880 - INFO     -   - Product space size: 500
2025-10-29 13:53:34,880 - INFO     -   - Using product state mapping
2025-10-29 13:53:34,881 - INFO     -   - f_before_product length: 500
2025-10-29 13:53:34,882 - INFO     -   - avg_f_before: 6.5140 (500 valid states)
2025-10-29 13:53:34,882 - INFO     -   - avg_f_after:  10.3080 (500 valid states)
2025-10-29 13:53:34,882 - INFO     -   - delta: 3.7940
2025-10-29 13:53:34,883 - INFO     -   - f_stability: 1.0 - |3.7940| / 6.5140 = 0.4176
2025-10-29 13:53:34,883 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:34,883 - INFO     -   - Compared 60 values
2025-10-29 13:53:34,883 - INFO     -   - Significant changes (> 5.0): 23
2025-10-29 13:53:34,883 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:34,883 - INFO     -   - states_before: 500
2025-10-29 13:53:34,883 - INFO     -   - states_after: 500
2025-10-29 13:53:34,883 - INFO     -   - delta_states: 0
2025-10-29 13:53:34,883 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:34,883 - INFO     -   - ts1_transitions: 275
2025-10-29 13:53:34,883 - INFO     -   - ts2_transitions: 40
2025-10-29 13:53:34,883 - INFO     -   - merged_transitions: 3200
2025-10-29 13:53:34,883 - INFO     -   - transition_density_change: 5.7700
2025-10-29 13:53:34,883 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:34,883 - INFO     -   - search_signals present: True
2025-10-29 13:53:34,883 - INFO     -   - nodes_expanded: 500
2025-10-29 13:53:34,884 - INFO     -   - search_depth: 5
2025-10-29 13:53:34,884 - INFO     -   - solution_cost: 4
2025-10-29 13:53:34,884 - INFO     -   - branching_factor: 6.4000
2025-10-29 13:53:34,884 - INFO     -   - solution_found: True
2025-10-29 13:53:34,884 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:34,884 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:34,884 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:53:34,884 - INFO     -   - TS11(50) + TS12(10) → 500 states
2025-10-29 13:53:34,884 - INFO     -   - f_stability=0.418
2025-10-29 13:53:34,884 - INFO     -   - A* nodes_expanded=500
2025-10-29 13:53:34,884 - INFO     -   - solution_found=True
2025-10-29 13:53:34,885 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:34,885 - INFO     - 
  Extracted signals:
2025-10-29 13:53:34,885 - INFO     -     - iteration: 4
2025-10-29 13:53:34,885 - INFO     -     - states_before: 500
2025-10-29 13:53:34,885 - INFO     -     - states_after: 500
2025-10-29 13:53:34,885 - INFO     -     - delta_states: 0
2025-10-29 13:53:34,885 - INFO     -     - f_value_stability: 0.4176
2025-10-29 13:53:34,885 - INFO     -     - num_significant_f_changes: 23
2025-10-29 13:53:34,885 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:34,885 - INFO     -     - nodes_expanded: 500
2025-10-29 13:53:34,885 - INFO     -     - search_depth: 5
2025-10-29 13:53:34,885 - INFO     -     - solution_cost: 4
2025-10-29 13:53:34,885 - INFO     -     - branching_factor: 6.4000
2025-10-29 13:53:34,885 - INFO     -     - solution_found: True
2025-10-29 13:53:34,885 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:34,886 - INFO     - 
  Computing reward:
2025-10-29 13:53:34,886 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:34,886 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:34,886 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:34,886 - INFO     -   [1] BRANCHING FACTOR: 6.400 → score 0.260 (high BF, minimal credit)
2025-10-29 13:53:34,886 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:34,886 - INFO     -   [3] F-VALUE STABILITY: 0.451
2025-10-29 13:53:34,886 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:34,887 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:34,887 - INFO     - 
  [COMPOSITE]: 0.510
2025-10-29 13:53:34,887 - INFO     -     = 0.300*0.260 (bf)
2025-10-29 13:53:34,887 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:34,887 - INFO     -     + 0.350*0.451 (stability)
2025-10-29 13:53:34,887 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:34,887 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:34,887 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:34,887 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:34,887 - INFO     - 
  [FINAL REWARD]: 0.3206
2025-10-29 13:53:34,887 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:34,887 - INFO     -     ✓ Reward computed: 0.3206
2025-10-29 13:53:34,887 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:34,887 - INFO     -     - bf_score                       0.2600
2025-10-29 13:53:34,887 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:34,887 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:34,887 - INFO     -     - f_stability                    0.4511
2025-10-29 13:53:34,887 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:34,887 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:34,887 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:34,887 - INFO     -     - composite                      0.5103
2025-10-29 13:53:34,887 - INFO     -     - total                          0.3206
2025-10-29 13:53:34,887 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:34,887 - INFO     -   Num remaining nodes: 4
2025-10-29 13:53:34,887 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:53:34,887 - INFO     -   Done: False
2025-10-29 13:53:34,889 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:34,889 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:34,889 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:34,889 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:34,889 - INFO     -     - num_nodes: 4
2025-10-29 13:53:34,889 - INFO     -     - num_edges: 12
2025-10-29 13:53:34,890 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:34,890 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:53:34,890 - INFO     -   After: current_merge_step = 5
2025-10-29 13:53:34,890 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:34,890 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:34,890 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:34,890 - INFO     -   ✓ Step logged
2025-10-29 13:53:34,890 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:34,891 - INFO     -   Returning:
2025-10-29 13:53:34,891 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:34,891 - INFO     -     - reward: 0.3206
2025-10-29 13:53:34,891 - INFO     -     - done: False
2025-10-29 13:53:34,891 - INFO     -     - truncated: False
2025-10-29 13:53:34,891 - INFO     -     - info: 19 keys
2025-10-29 13:53:34,891 - INFO     - ==========================================================================================

2025-10-29 13:53:34,895 - INFO     - 
==========================================================================================
2025-10-29 13:53:34,895 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:34,895 - INFO     - ==========================================================================================
2025-10-29 13:53:34,895 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:34,895 - INFO     -   Input action: 5 (type: int)
2025-10-29 13:53:34,895 - INFO     -   Available edges in graph: 12
2025-10-29 13:53:34,896 - INFO     -   Action index calculation:
2025-10-29 13:53:34,896 - INFO     -     - action % max(num_valid_edges, 1) = 5 % 12 = 5
2025-10-29 13:53:34,896 - INFO     -     - clamped to [0, 11]: 5
2025-10-29 13:53:34,896 - INFO     -   ✓ Extracted merge pair from edge 5: (4, 13)
2025-10-29 13:53:34,896 - INFO     -   ✓ Validation passed
2025-10-29 13:53:34,896 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:34,896 - INFO     -     - Total states before merge: 514
2025-10-29 13:53:34,896 - INFO     -     - Num nodes: 4
2025-10-29 13:53:34,896 - INFO     -     - Num edges: 12
2025-10-29 13:53:34,896 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:34,896 - INFO     -       - Node 4: 2 states
2025-10-29 13:53:34,896 - INFO     -       - Node 13: 500 states
2025-10-29 13:53:34,896 - INFO     -       - Expected product: 1000 states
2025-10-29 13:53:34,896 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:34,903 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:53:34,903 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:34,903 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:53:35,004 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:35,004 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:35,004 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:53:35,014 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:53:35,014 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:35,014 - INFO     -   Calling graph_tracker.merge_nodes([4, 13])...
2025-10-29 13:53:35,014 - INFO     - Attempting merge of nodes 4 and 13...
2025-10-29 13:53:35,014 - INFO     - Successfully merged nodes into new node 14 with 1000 states.
2025-10-29 13:53:35,014 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:35,014 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:35,014 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:53:35,014 - INFO     - 
================================================================================
2025-10-29 13:53:35,015 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:53:35,015 - INFO     - ================================================================================
2025-10-29 13:53:35,015 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:35,015 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:53:35,015 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:53:35,017 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:35,017 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:35,017 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:35,017 - INFO     -   - Raw ts2_f length: 500
2025-10-29 13:53:35,017 - INFO     -   - Raw f_after length: 1000
2025-10-29 13:53:35,017 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:35,017 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:35,017 - INFO     -   - ts2_valid: 500 / 500 (removed -500)
2025-10-29 13:53:35,018 - INFO     -   - after_valid: 847 / 1000 (removed 153)
2025-10-29 13:53:35,018 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:35,018 - INFO     -   - ts1_id: 4
2025-10-29 13:53:35,018 - INFO     -   - ts2_id: 13
2025-10-29 13:53:35,018 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:35,018 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:35,018 - INFO     -   - ts1_size: 2, ts2_size: 500
2025-10-29 13:53:35,018 - INFO     -   - Product space size: 1000
2025-10-29 13:53:35,018 - INFO     -   - Using product state mapping
2025-10-29 13:53:35,020 - INFO     -   - f_before_product length: 1000
2025-10-29 13:53:35,023 - INFO     -   - avg_f_before: 10.3080 (1000 valid states)
2025-10-29 13:53:35,023 - INFO     -   - avg_f_after:  11.0413 (847 valid states)
2025-10-29 13:53:35,023 - INFO     -   - delta: 0.7333
2025-10-29 13:53:35,023 - INFO     -   - f_stability: 1.0 - |0.7333| / 10.3080 = 0.9289
2025-10-29 13:53:35,024 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:35,024 - INFO     -   - Compared 502 values
2025-10-29 13:53:35,024 - INFO     -   - Significant changes (> 5.0): 47
2025-10-29 13:53:35,024 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:35,024 - INFO     -   - states_before: 1000
2025-10-29 13:53:35,024 - INFO     -   - states_after: 1000
2025-10-29 13:53:35,024 - INFO     -   - delta_states: 0
2025-10-29 13:53:35,024 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:35,024 - INFO     -   - ts1_transitions: 3
2025-10-29 13:53:35,024 - INFO     -   - ts2_transitions: 3200
2025-10-29 13:53:35,024 - INFO     -   - merged_transitions: 4900
2025-10-29 13:53:35,024 - INFO     -   - transition_density_change: 1.6970
2025-10-29 13:53:35,024 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:35,024 - INFO     -   - search_signals present: True
2025-10-29 13:53:35,025 - INFO     -   - nodes_expanded: 847
2025-10-29 13:53:35,025 - INFO     -   - search_depth: 5
2025-10-29 13:53:35,025 - INFO     -   - solution_cost: 4
2025-10-29 13:53:35,025 - INFO     -   - branching_factor: 5.7851
2025-10-29 13:53:35,025 - INFO     -   - solution_found: True
2025-10-29 13:53:35,025 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:35,026 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:35,026 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:53:35,026 - INFO     -   - TS4(2) + TS13(500) → 1000 states
2025-10-29 13:53:35,026 - INFO     -   - f_stability=0.929
2025-10-29 13:53:35,026 - INFO     -   - A* nodes_expanded=847
2025-10-29 13:53:35,026 - INFO     -   - solution_found=True
2025-10-29 13:53:35,027 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:35,027 - INFO     - 
  Extracted signals:
2025-10-29 13:53:35,027 - INFO     -     - iteration: 5
2025-10-29 13:53:35,027 - INFO     -     - states_before: 1000
2025-10-29 13:53:35,027 - INFO     -     - states_after: 1000
2025-10-29 13:53:35,027 - INFO     -     - delta_states: 0
2025-10-29 13:53:35,027 - INFO     -     - f_value_stability: 0.9289
2025-10-29 13:53:35,027 - INFO     -     - num_significant_f_changes: 47
2025-10-29 13:53:35,027 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:35,027 - INFO     -     - nodes_expanded: 847
2025-10-29 13:53:35,028 - INFO     -     - search_depth: 5
2025-10-29 13:53:35,028 - INFO     -     - solution_cost: 4
2025-10-29 13:53:35,028 - INFO     -     - branching_factor: 5.7851
2025-10-29 13:53:35,028 - INFO     -     - solution_found: True
2025-10-29 13:53:35,028 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:35,028 - INFO     - 
  Computing reward:
2025-10-29 13:53:35,028 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:35,029 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:35,029 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:35,029 - INFO     -   [1] BRANCHING FACTOR: 5.785 → score 0.329 (tolerable)
2025-10-29 13:53:35,029 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:35,030 - INFO     -   [3] F-VALUE STABILITY: 0.929
2025-10-29 13:53:35,030 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:35,030 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:35,030 - INFO     - 
  [COMPOSITE]: 0.698
2025-10-29 13:53:35,030 - INFO     -     = 0.300*0.329 (bf)
2025-10-29 13:53:35,030 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:35,030 - INFO     -     + 0.350*0.929 (stability)
2025-10-29 13:53:35,030 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:35,030 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:35,031 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:35,031 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:35,031 - INFO     - 
  [FINAL REWARD]: 0.8967
2025-10-29 13:53:35,031 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:35,031 - INFO     -     ✓ Reward computed: 0.8967
2025-10-29 13:53:35,031 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:35,031 - INFO     -     - bf_score                       0.3287
2025-10-29 13:53:35,031 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:35,031 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:35,031 - INFO     -     - f_stability                    0.9294
2025-10-29 13:53:35,031 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:35,031 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:35,031 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:35,031 - INFO     -     - composite                      0.6983
2025-10-29 13:53:35,031 - INFO     -     - total                          0.8967
2025-10-29 13:53:35,031 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:35,031 - INFO     -   Num remaining nodes: 3
2025-10-29 13:53:35,031 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:53:35,031 - INFO     -   Done: False
2025-10-29 13:53:35,031 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:35,033 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:35,033 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:35,033 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:35,033 - INFO     -     - num_nodes: 3
2025-10-29 13:53:35,033 - INFO     -     - num_edges: 6
2025-10-29 13:53:35,033 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:35,033 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:53:35,033 - INFO     -   After: current_merge_step = 6
2025-10-29 13:53:35,033 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:35,033 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:35,033 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:35,034 - INFO     -   ✓ Step logged
2025-10-29 13:53:35,034 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:35,034 - INFO     -   Returning:
2025-10-29 13:53:35,034 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:35,034 - INFO     -     - reward: 0.8967
2025-10-29 13:53:35,034 - INFO     -     - done: False
2025-10-29 13:53:35,034 - INFO     -     - truncated: False
2025-10-29 13:53:35,034 - INFO     -     - info: 19 keys
2025-10-29 13:53:35,034 - INFO     - ==========================================================================================

2025-10-29 13:53:35,038 - INFO     - 
==========================================================================================
2025-10-29 13:53:35,038 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:35,039 - INFO     - ==========================================================================================
2025-10-29 13:53:35,039 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:35,039 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:53:35,039 - INFO     -   Available edges in graph: 6
2025-10-29 13:53:35,039 - INFO     -   Action index calculation:
2025-10-29 13:53:35,039 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 6 = 3
2025-10-29 13:53:35,039 - INFO     -     - clamped to [0, 5]: 3
2025-10-29 13:53:35,039 - INFO     -   ✓ Extracted merge pair from edge 3: (9, 14)
2025-10-29 13:53:35,039 - INFO     -   ✓ Validation passed
2025-10-29 13:53:35,039 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:35,039 - INFO     -     - Total states before merge: 1012
2025-10-29 13:53:35,039 - INFO     -     - Num nodes: 3
2025-10-29 13:53:35,039 - INFO     -     - Num edges: 6
2025-10-29 13:53:35,039 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:35,039 - INFO     -       - Node 9: 10 states
2025-10-29 13:53:35,039 - INFO     -       - Node 14: 1000 states
2025-10-29 13:53:35,039 - INFO     -       - Expected product: 10000 states
2025-10-29 13:53:35,039 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:35,046 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:53:35,046 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:35,046 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:53:35,147 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:35,147 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:35,147 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:53:35,169 - INFO     -   ✓ TS file received after 0.02s
2025-10-29 13:53:35,169 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:35,169 - INFO     -   Calling graph_tracker.merge_nodes([9, 14])...
2025-10-29 13:53:35,169 - INFO     - Attempting merge of nodes 9 and 14...
2025-10-29 13:53:35,169 - INFO     - Successfully merged nodes into new node 15 with 10000 states.
2025-10-29 13:53:35,170 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:35,170 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:35,170 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:53:35,170 - INFO     - 
================================================================================
2025-10-29 13:53:35,170 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:53:35,170 - INFO     - ================================================================================
2025-10-29 13:53:35,170 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:35,170 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:53:35,170 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:53:35,174 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:35,174 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:35,174 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:53:35,174 - INFO     -   - Raw ts2_f length: 396
2025-10-29 13:53:35,174 - INFO     -   - Raw f_after length: 3960
2025-10-29 13:53:35,174 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:35,174 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:53:35,174 - INFO     -   - ts2_valid: 396 / 396 (removed -396)
2025-10-29 13:53:35,175 - INFO     -   - after_valid: 990 / 3960 (removed 2970)
2025-10-29 13:53:35,176 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:35,176 - INFO     -   - ts1_id: 9
2025-10-29 13:53:35,176 - INFO     -   - ts2_id: 14
2025-10-29 13:53:35,176 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:35,176 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:35,176 - INFO     -   - ts1_size: 10, ts2_size: 396
2025-10-29 13:53:35,176 - INFO     -   - Product space size: 3960
2025-10-29 13:53:35,176 - INFO     -   - Using product state mapping
2025-10-29 13:53:35,181 - INFO     -   - f_before_product length: 3960
2025-10-29 13:53:35,189 - INFO     -   - avg_f_before: 8.6035 (3960 valid states)
2025-10-29 13:53:35,189 - INFO     -   - avg_f_after:  11.5293 (990 valid states)
2025-10-29 13:53:35,189 - INFO     -   - delta: 2.9258
2025-10-29 13:53:35,189 - INFO     -   - f_stability: 1.0 - |2.9258| / 8.6035 = 0.6599
2025-10-29 13:53:35,189 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:35,189 - INFO     -   - Compared 406 values
2025-10-29 13:53:35,189 - INFO     -   - Significant changes (> 5.0): 78
2025-10-29 13:53:35,189 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:35,189 - INFO     -   - states_before: 3960
2025-10-29 13:53:35,189 - INFO     -   - states_after: 3960
2025-10-29 13:53:35,189 - INFO     -   - delta_states: 0
2025-10-29 13:53:35,189 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:35,189 - INFO     -   - ts1_transitions: 40
2025-10-29 13:53:35,189 - INFO     -   - ts2_transitions: 3045
2025-10-29 13:53:35,189 - INFO     -   - merged_transitions: 21488
2025-10-29 13:53:35,189 - INFO     -   - transition_density_change: 4.6472
2025-10-29 13:53:35,189 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:35,190 - INFO     -   - search_signals present: True
2025-10-29 13:53:35,190 - INFO     -   - nodes_expanded: 990
2025-10-29 13:53:35,190 - INFO     -   - search_depth: 6
2025-10-29 13:53:35,190 - INFO     -   - solution_cost: 4
2025-10-29 13:53:35,190 - INFO     -   - branching_factor: 21.7051
2025-10-29 13:53:35,190 - INFO     -   - solution_found: True
2025-10-29 13:53:35,190 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:35,191 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:35,191 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:53:35,191 - INFO     -   - TS9(10) + TS14(396) → 3960 states
2025-10-29 13:53:35,191 - INFO     -   - f_stability=0.660
2025-10-29 13:53:35,191 - INFO     -   - A* nodes_expanded=990
2025-10-29 13:53:35,191 - INFO     -   - solution_found=True
2025-10-29 13:53:35,191 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:35,191 - INFO     - 
  Extracted signals:
2025-10-29 13:53:35,191 - INFO     -     - iteration: 6
2025-10-29 13:53:35,191 - INFO     -     - states_before: 3960
2025-10-29 13:53:35,191 - INFO     -     - states_after: 3960
2025-10-29 13:53:35,191 - INFO     -     - delta_states: 0
2025-10-29 13:53:35,192 - INFO     -     - f_value_stability: 0.6599
2025-10-29 13:53:35,192 - INFO     -     - num_significant_f_changes: 78
2025-10-29 13:53:35,192 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:35,192 - INFO     -     - nodes_expanded: 990
2025-10-29 13:53:35,192 - INFO     -     - search_depth: 6
2025-10-29 13:53:35,192 - INFO     -     - solution_cost: 4
2025-10-29 13:53:35,192 - INFO     -     - branching_factor: 21.7051
2025-10-29 13:53:35,192 - INFO     -     - solution_found: True
2025-10-29 13:53:35,192 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:35,193 - WARNING  -     ⚠️  High unreachability: 75.0%
2025-10-29 13:53:35,193 - WARNING  -     ⚠️  High branching factor: 21.7051
2025-10-29 13:53:35,193 - INFO     - 
  Computing reward:
2025-10-29 13:53:35,193 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:35,193 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:35,193 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:35,193 - INFO     -   [1] BRANCHING FACTOR: 21.705 → score 0.100 (high BF, minimal credit)
2025-10-29 13:53:35,193 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:35,194 - INFO     -   [3] F-VALUE STABILITY: 0.557
2025-10-29 13:53:35,194 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:35,194 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:35,194 - INFO     - 
  [COMPOSITE]: 0.496
2025-10-29 13:53:35,195 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:53:35,195 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:35,195 - INFO     -     + 0.350*0.557 (stability)
2025-10-29 13:53:35,195 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:35,195 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:35,195 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:35,195 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:35,196 - INFO     - 
  [FINAL REWARD]: 0.3912
2025-10-29 13:53:35,196 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:35,196 - INFO     -     ✓ Reward computed: 0.3912
2025-10-29 13:53:35,196 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:35,196 - INFO     -     - bf_score                       0.1000
2025-10-29 13:53:35,196 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:35,196 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:35,196 - INFO     -     - f_stability                    0.5574
2025-10-29 13:53:35,196 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:35,196 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:35,196 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:35,196 - INFO     -     - composite                      0.4956
2025-10-29 13:53:35,196 - INFO     -     - total                          0.3912
2025-10-29 13:53:35,196 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:35,196 - INFO     -   Num remaining nodes: 2
2025-10-29 13:53:35,197 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:53:35,197 - INFO     -   Done: False
2025-10-29 13:53:35,197 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:35,197 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:35,197 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:35,197 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:35,197 - INFO     -     - num_nodes: 2
2025-10-29 13:53:35,197 - INFO     -     - num_edges: 2
2025-10-29 13:53:35,197 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:35,197 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:53:35,197 - INFO     -   After: current_merge_step = 7
2025-10-29 13:53:35,198 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:35,198 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:35,198 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:35,198 - INFO     -   ✓ Step logged
2025-10-29 13:53:35,198 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:35,198 - INFO     -   Returning:
2025-10-29 13:53:35,198 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:35,199 - INFO     -     - reward: 0.3912
2025-10-29 13:53:35,199 - INFO     -     - done: False
2025-10-29 13:53:35,199 - INFO     -     - truncated: False
2025-10-29 13:53:35,199 - INFO     -     - info: 19 keys
2025-10-29 13:53:35,199 - INFO     - ==========================================================================================

2025-10-29 13:53:35,204 - INFO     - 
==========================================================================================
2025-10-29 13:53:35,204 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:35,204 - INFO     - ==========================================================================================
2025-10-29 13:53:35,204 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:35,204 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:53:35,205 - INFO     -   Available edges in graph: 2
2025-10-29 13:53:35,205 - INFO     -   Action index calculation:
2025-10-29 13:53:35,205 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:53:35,205 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:53:35,205 - INFO     -   ✓ Extracted merge pair from edge 0: (1, 15)
2025-10-29 13:53:35,205 - INFO     -   ✓ Validation passed
2025-10-29 13:53:35,205 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:35,205 - INFO     -     - Total states before merge: 10002
2025-10-29 13:53:35,205 - INFO     -     - Num nodes: 2
2025-10-29 13:53:35,205 - INFO     -     - Num edges: 2
2025-10-29 13:53:35,205 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:35,205 - INFO     -       - Node 1: 2 states
2025-10-29 13:53:35,205 - INFO     -       - Node 15: 10000 states
2025-10-29 13:53:35,205 - INFO     -       - Expected product: 20000 states
2025-10-29 13:53:35,205 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:35,216 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:53:35,216 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:35,216 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:53:35,317 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:35,317 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:35,317 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:53:35,323 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:53:35,323 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:35,323 - INFO     -   Calling graph_tracker.merge_nodes([1, 15])...
2025-10-29 13:53:35,323 - INFO     - Attempting merge of nodes 1 and 15...
2025-10-29 13:53:35,323 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:53:35,323 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:35,323 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:35,323 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:53:35,323 - INFO     - 
================================================================================
2025-10-29 13:53:35,324 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:53:35,324 - INFO     - ================================================================================
2025-10-29 13:53:35,324 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:35,324 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:53:35,324 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:53:35,326 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:35,326 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:35,326 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:35,326 - INFO     -   - Raw ts2_f length: 946
2025-10-29 13:53:35,326 - INFO     -   - Raw f_after length: 1892
2025-10-29 13:53:35,326 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:35,326 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:35,327 - INFO     -   - ts2_valid: 946 / 946 (removed -946)
2025-10-29 13:53:35,328 - INFO     -   - after_valid: 1565 / 1892 (removed 327)
2025-10-29 13:53:35,328 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:35,329 - INFO     -   - ts1_id: 1
2025-10-29 13:53:35,329 - INFO     -   - ts2_id: 15
2025-10-29 13:53:35,329 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:35,329 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:35,329 - INFO     -   - ts1_size: 2, ts2_size: 946
2025-10-29 13:53:35,329 - INFO     -   - Product space size: 1892
2025-10-29 13:53:35,329 - INFO     -   - Using product state mapping
2025-10-29 13:53:35,334 - INFO     -   - f_before_product length: 1892
2025-10-29 13:53:35,340 - INFO     -   - avg_f_before: 11.4440 (1892 valid states)
2025-10-29 13:53:35,340 - INFO     -   - avg_f_after:  12.7642 (1565 valid states)
2025-10-29 13:53:35,340 - INFO     -   - delta: 1.3202
2025-10-29 13:53:35,340 - INFO     -   - f_stability: 1.0 - |1.3202| / 11.4440 = 0.8846
2025-10-29 13:53:35,340 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:35,340 - INFO     -   - Compared 948 values
2025-10-29 13:53:35,340 - INFO     -   - Significant changes (> 5.0): 202
2025-10-29 13:53:35,340 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:35,340 - INFO     -   - states_before: 1892
2025-10-29 13:53:35,340 - INFO     -   - states_after: 1892
2025-10-29 13:53:35,341 - INFO     -   - delta_states: 0
2025-10-29 13:53:35,341 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:35,341 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:35,341 - INFO     -   - ts2_transitions: 3644
2025-10-29 13:53:35,341 - INFO     -   - merged_transitions: 6077
2025-10-29 13:53:35,341 - INFO     -   - transition_density_change: 1.2833
2025-10-29 13:53:35,341 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:35,341 - INFO     -   - search_signals present: True
2025-10-29 13:53:35,341 - INFO     -   - nodes_expanded: 1565
2025-10-29 13:53:35,341 - INFO     -   - search_depth: 7
2025-10-29 13:53:35,341 - INFO     -   - solution_cost: 4
2025-10-29 13:53:35,341 - INFO     -   - branching_factor: 3.8831
2025-10-29 13:53:35,341 - INFO     -   - solution_found: True
2025-10-29 13:53:35,341 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:35,343 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:35,343 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:53:35,343 - INFO     -   - TS1(2) + TS15(946) → 1892 states
2025-10-29 13:53:35,343 - INFO     -   - f_stability=0.885
2025-10-29 13:53:35,343 - INFO     -   - A* nodes_expanded=1565
2025-10-29 13:53:35,343 - INFO     -   - solution_found=True
2025-10-29 13:53:35,343 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:35,343 - INFO     - 
  Extracted signals:
2025-10-29 13:53:35,343 - INFO     -     - iteration: 7
2025-10-29 13:53:35,344 - INFO     -     - states_before: 1892
2025-10-29 13:53:35,344 - INFO     -     - states_after: 1892
2025-10-29 13:53:35,344 - INFO     -     - delta_states: 0
2025-10-29 13:53:35,344 - INFO     -     - f_value_stability: 0.8846
2025-10-29 13:53:35,344 - INFO     -     - num_significant_f_changes: 202
2025-10-29 13:53:35,344 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:35,345 - INFO     -     - nodes_expanded: 1565
2025-10-29 13:53:35,345 - INFO     -     - search_depth: 7
2025-10-29 13:53:35,345 - INFO     -     - solution_cost: 4
2025-10-29 13:53:35,345 - INFO     -     - branching_factor: 3.8831
2025-10-29 13:53:35,345 - INFO     -     - solution_found: True
2025-10-29 13:53:35,345 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:35,346 - INFO     - 
  Computing reward:
2025-10-29 13:53:35,346 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:35,346 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:35,346 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:35,346 - INFO     -   [1] BRANCHING FACTOR: 3.883 → score 0.582 (tolerable)
2025-10-29 13:53:35,346 - INFO     -   [2] SOLUTION QUALITY: depth=7 → score 0.736 + bonus 0.300
2025-10-29 13:53:35,348 - INFO     -   [3] F-VALUE STABILITY: 0.959
2025-10-29 13:53:35,348 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:35,348 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:35,348 - INFO     - 
  [COMPOSITE]: 0.778
2025-10-29 13:53:35,348 - INFO     -     = 0.300*0.582 (bf)
2025-10-29 13:53:35,348 - INFO     -     + 0.200*0.736 (depth)
2025-10-29 13:53:35,348 - INFO     -     + 0.350*0.959 (stability)
2025-10-29 13:53:35,348 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:35,348 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:35,348 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:35,349 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:35,349 - INFO     - 
  [FINAL REWARD]: 1.0000
2025-10-29 13:53:35,349 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:35,349 - INFO     -     ✓ Reward computed: 1.0000
2025-10-29 13:53:35,350 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:35,350 - INFO     -     - bf_score                       0.5823
2025-10-29 13:53:35,350 - INFO     -     - depth_score                    0.7356
2025-10-29 13:53:35,350 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:35,350 - INFO     -     - f_stability                    0.9592
2025-10-29 13:53:35,350 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:35,350 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:35,350 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:35,350 - INFO     -     - composite                      0.7775
2025-10-29 13:53:35,350 - INFO     -     - total                          1.0000
2025-10-29 13:53:35,350 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:35,350 - INFO     -   Num remaining nodes: 1
2025-10-29 13:53:35,351 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:53:35,351 - INFO     -   Done: True
2025-10-29 13:53:35,351 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:53:35,351 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:35,351 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:35,351 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:35,351 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:35,351 - INFO     -     - num_nodes: 1
2025-10-29 13:53:35,351 - INFO     -     - num_edges: 0
2025-10-29 13:53:35,351 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:35,351 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:53:35,352 - INFO     -   After: current_merge_step = 8
2025-10-29 13:53:35,352 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:35,352 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:35,352 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:35,352 - INFO     -   ✓ Step logged
2025-10-29 13:53:35,352 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:35,353 - INFO     -   Returning:
2025-10-29 13:53:35,353 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:35,353 - INFO     -     - reward: 1.0000
2025-10-29 13:53:35,353 - INFO     -     - done: True
2025-10-29 13:53:35,353 - INFO     -     - truncated: False
2025-10-29 13:53:35,353 - INFO     -     - info: 19 keys
2025-10-29 13:53:35,353 - INFO     - ==========================================================================================

2025-10-29 13:53:35,423 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:53:35,431 - INFO     - [Handshake] Building FD command:
2025-10-29 13:53:35,431 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:35,431 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_03.pddl
2025-10-29 13:53:35,431 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:53:35,434 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:36,037 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:36,037 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:36,037 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:36,350 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:36,350 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:36,350 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:36,352 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:36,352 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:36,352 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:36,352 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:36,352 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:36,352 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:36,352 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:36,352 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:36,352 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:36,353 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:36,353 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:36,353 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:36,353 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:36,353 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:36,353 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:36,353 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:36,353 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:36,353 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:36,353 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:36,353 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:36,354 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:36,354 - INFO     - Added edge (0, 1)
2025-10-29 13:53:36,354 - INFO     - Added edge (0, 2)
2025-10-29 13:53:36,354 - INFO     - Added edge (0, 3)
2025-10-29 13:53:36,354 - INFO     - Added edge (0, 4)
2025-10-29 13:53:36,354 - INFO     - Added edge (0, 5)
2025-10-29 13:53:36,354 - INFO     - Added edge (0, 6)
2025-10-29 13:53:36,354 - INFO     - Added edge (0, 7)
2025-10-29 13:53:36,354 - INFO     - Added edge (0, 8)
2025-10-29 13:53:36,354 - INFO     - Added edge (1, 0)
2025-10-29 13:53:36,354 - INFO     - Added edge (1, 2)
2025-10-29 13:53:36,354 - INFO     - Added edge (1, 3)
2025-10-29 13:53:36,354 - INFO     - Added edge (1, 4)
2025-10-29 13:53:36,354 - INFO     - Added edge (1, 5)
2025-10-29 13:53:36,354 - INFO     - Added edge (1, 6)
2025-10-29 13:53:36,354 - INFO     - Added edge (1, 7)
2025-10-29 13:53:36,354 - INFO     - Added edge (1, 8)
2025-10-29 13:53:36,354 - INFO     - Added edge (2, 0)
2025-10-29 13:53:36,354 - INFO     - Added edge (2, 1)
2025-10-29 13:53:36,355 - INFO     - Added edge (2, 3)
2025-10-29 13:53:36,355 - INFO     - Added edge (2, 4)
2025-10-29 13:53:36,355 - INFO     - Added edge (2, 5)
2025-10-29 13:53:36,355 - INFO     - Added edge (2, 6)
2025-10-29 13:53:36,355 - INFO     - Added edge (2, 7)
2025-10-29 13:53:36,355 - INFO     - Added edge (2, 8)
2025-10-29 13:53:36,355 - INFO     - Added edge (3, 0)
2025-10-29 13:53:36,355 - INFO     - Added edge (3, 1)
2025-10-29 13:53:36,355 - INFO     - Added edge (3, 2)
2025-10-29 13:53:36,355 - INFO     - Added edge (3, 4)
2025-10-29 13:53:36,355 - INFO     - Added edge (3, 5)
2025-10-29 13:53:36,355 - INFO     - Added edge (3, 6)
2025-10-29 13:53:36,355 - INFO     - Added edge (3, 7)
2025-10-29 13:53:36,355 - INFO     - Added edge (3, 8)
2025-10-29 13:53:36,355 - INFO     - Added edge (4, 0)
2025-10-29 13:53:36,355 - INFO     - Added edge (4, 1)
2025-10-29 13:53:36,355 - INFO     - Added edge (4, 2)
2025-10-29 13:53:36,355 - INFO     - Added edge (4, 3)
2025-10-29 13:53:36,355 - INFO     - Added edge (4, 5)
2025-10-29 13:53:36,355 - INFO     - Added edge (4, 6)
2025-10-29 13:53:36,357 - INFO     - Added edge (4, 7)
2025-10-29 13:53:36,357 - INFO     - Added edge (4, 8)
2025-10-29 13:53:36,357 - INFO     - Added edge (5, 0)
2025-10-29 13:53:36,357 - INFO     - Added edge (5, 1)
2025-10-29 13:53:36,357 - INFO     - Added edge (5, 2)
2025-10-29 13:53:36,357 - INFO     - Added edge (5, 3)
2025-10-29 13:53:36,357 - INFO     - Added edge (5, 4)
2025-10-29 13:53:36,357 - INFO     - Added edge (6, 0)
2025-10-29 13:53:36,357 - INFO     - Added edge (6, 1)
2025-10-29 13:53:36,357 - INFO     - Added edge (6, 2)
2025-10-29 13:53:36,357 - INFO     - Added edge (6, 3)
2025-10-29 13:53:36,357 - INFO     - Added edge (6, 4)
2025-10-29 13:53:36,357 - INFO     - Added edge (7, 0)
2025-10-29 13:53:36,357 - INFO     - Added edge (7, 1)
2025-10-29 13:53:36,357 - INFO     - Added edge (7, 2)
2025-10-29 13:53:36,357 - INFO     - Added edge (7, 3)
2025-10-29 13:53:36,358 - INFO     - Added edge (7, 4)
2025-10-29 13:53:36,358 - INFO     - Added edge (8, 0)
2025-10-29 13:53:36,358 - INFO     - Added edge (8, 1)
2025-10-29 13:53:36,358 - INFO     - Added edge (8, 2)
2025-10-29 13:53:36,358 - INFO     - Added edge (8, 3)
2025-10-29 13:53:36,358 - INFO     - Added edge (8, 4)
2025-10-29 13:53:36,358 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:36,364 - INFO     - 
==========================================================================================
2025-10-29 13:53:36,364 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:36,364 - INFO     - ==========================================================================================
2025-10-29 13:53:36,364 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:36,364 - INFO     -   Input action: 55 (type: int)
2025-10-29 13:53:36,364 - INFO     -   Available edges in graph: 60
2025-10-29 13:53:36,364 - INFO     -   Action index calculation:
2025-10-29 13:53:36,364 - INFO     -     - action % max(num_valid_edges, 1) = 55 % 60 = 55
2025-10-29 13:53:36,364 - INFO     -     - clamped to [0, 59]: 55
2025-10-29 13:53:36,364 - INFO     -   ✓ Extracted merge pair from edge 55: (8, 0)
2025-10-29 13:53:36,364 - INFO     -   ✓ Validation passed
2025-10-29 13:53:36,365 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:36,365 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:36,365 - INFO     -     - Num nodes: 9
2025-10-29 13:53:36,365 - INFO     -     - Num edges: 60
2025-10-29 13:53:36,365 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:36,365 - INFO     -       - Node 8: 5 states
2025-10-29 13:53:36,365 - INFO     -       - Node 0: 2 states
2025-10-29 13:53:36,365 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:36,365 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:36,375 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:53:36,375 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:36,375 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:53:36,476 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:36,476 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:36,476 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:53:36,476 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:36,476 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:36,476 - INFO     -   Calling graph_tracker.merge_nodes([8, 0])...
2025-10-29 13:53:36,476 - INFO     - Attempting merge of nodes 8 and 0...
2025-10-29 13:53:36,476 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:53:36,476 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:36,476 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:36,477 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:53:36,477 - INFO     - 
================================================================================
2025-10-29 13:53:36,477 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:53:36,477 - INFO     - ================================================================================
2025-10-29 13:53:36,477 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:36,477 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:53:36,477 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:53:36,477 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:36,477 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:36,477 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:36,477 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:36,478 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:36,478 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:36,478 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:36,478 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:36,478 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:36,478 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:36,478 - INFO     -   - ts1_id: 8
2025-10-29 13:53:36,478 - INFO     -   - ts2_id: 0
2025-10-29 13:53:36,478 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:36,478 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:36,478 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:36,478 - INFO     -   - Product space size: 10
2025-10-29 13:53:36,480 - INFO     -   - Using product state mapping
2025-10-29 13:53:36,480 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:36,480 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:53:36,480 - INFO     -   - avg_f_after:  3.3000 (10 valid states)
2025-10-29 13:53:36,480 - INFO     -   - delta: 0.4000
2025-10-29 13:53:36,480 - INFO     -   - f_stability: 1.0 - |0.4000| / 2.9000 = 0.8621
2025-10-29 13:53:36,480 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:36,481 - INFO     -   - Compared 7 values
2025-10-29 13:53:36,481 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:36,481 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:36,481 - INFO     -   - states_before: 10
2025-10-29 13:53:36,481 - INFO     -   - states_after: 10
2025-10-29 13:53:36,481 - INFO     -   - delta_states: 0
2025-10-29 13:53:36,481 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:36,481 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:36,481 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:36,481 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:36,481 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:36,481 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:36,482 - INFO     -   - search_signals present: True
2025-10-29 13:53:36,482 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:36,482 - INFO     -   - search_depth: 1
2025-10-29 13:53:36,482 - INFO     -   - solution_cost: 0
2025-10-29 13:53:36,482 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:36,482 - INFO     -   - solution_found: True
2025-10-29 13:53:36,482 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:36,482 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:36,483 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:53:36,483 - INFO     -   - TS8(5) + TS0(2) → 10 states
2025-10-29 13:53:36,483 - INFO     -   - f_stability=0.862
2025-10-29 13:53:36,483 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:36,483 - INFO     -   - solution_found=True
2025-10-29 13:53:36,483 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:36,483 - INFO     - 
  Extracted signals:
2025-10-29 13:53:36,483 - INFO     -     - iteration: 0
2025-10-29 13:53:36,483 - INFO     -     - states_before: 10
2025-10-29 13:53:36,483 - INFO     -     - states_after: 10
2025-10-29 13:53:36,483 - INFO     -     - delta_states: 0
2025-10-29 13:53:36,484 - INFO     -     - f_value_stability: 0.8621
2025-10-29 13:53:36,484 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:36,484 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:36,484 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:36,484 - INFO     -     - search_depth: 1
2025-10-29 13:53:36,484 - INFO     -     - solution_cost: 0
2025-10-29 13:53:36,484 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:36,484 - INFO     -     - solution_found: True
2025-10-29 13:53:36,484 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:36,484 - INFO     - 
  Computing reward:
2025-10-29 13:53:36,484 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:36,484 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:36,485 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:36,485 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:36,485 - INFO     -   [2] SOLUTION QUALITY: depth=1 → score 0.912 + bonus 0.300
2025-10-29 13:53:36,485 - INFO     -   [3] F-VALUE STABILITY: 0.291
2025-10-29 13:53:36,485 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:36,485 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:36,485 - INFO     - 
  [COMPOSITE]: 0.574
2025-10-29 13:53:36,486 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:36,486 - INFO     -     + 0.200*0.912 (depth)
2025-10-29 13:53:36,486 - INFO     -     + 0.350*0.291 (stability)
2025-10-29 13:53:36,486 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:36,486 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:36,486 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:36,486 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:36,486 - INFO     - 
  [FINAL REWARD]: 0.3487
2025-10-29 13:53:36,487 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:36,487 - INFO     -     ✓ Reward computed: 0.3487
2025-10-29 13:53:36,487 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:36,487 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:36,487 - INFO     -     - depth_score                    0.9119
2025-10-29 13:53:36,487 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:36,487 - INFO     -     - f_stability                    0.2913
2025-10-29 13:53:36,487 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:36,487 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:36,487 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:36,487 - INFO     -     - composite                      0.5743
2025-10-29 13:53:36,487 - INFO     -     - total                          0.3487
2025-10-29 13:53:36,488 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:36,488 - INFO     -   Num remaining nodes: 8
2025-10-29 13:53:36,488 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:53:36,488 - INFO     -   Done: False
2025-10-29 13:53:36,488 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:36,490 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:36,491 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:36,491 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:36,491 - INFO     -     - num_nodes: 8
2025-10-29 13:53:36,491 - INFO     -     - num_edges: 50
2025-10-29 13:53:36,491 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:36,491 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:53:36,491 - INFO     -   After: current_merge_step = 1
2025-10-29 13:53:36,491 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:36,491 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:36,491 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:36,493 - INFO     -   ✓ Step logged
2025-10-29 13:53:36,493 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:36,493 - INFO     -   Returning:
2025-10-29 13:53:36,493 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:36,493 - INFO     -     - reward: 0.3487
2025-10-29 13:53:36,493 - INFO     -     - done: False
2025-10-29 13:53:36,493 - INFO     -     - truncated: False
2025-10-29 13:53:36,493 - INFO     -     - info: 19 keys
2025-10-29 13:53:36,493 - INFO     - ==========================================================================================

2025-10-29 13:53:36,499 - INFO     - 
==========================================================================================
2025-10-29 13:53:36,499 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:36,499 - INFO     - ==========================================================================================
2025-10-29 13:53:36,499 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:36,499 - INFO     -   Input action: 41 (type: int)
2025-10-29 13:53:36,499 - INFO     -   Available edges in graph: 50
2025-10-29 13:53:36,499 - INFO     -   Action index calculation:
2025-10-29 13:53:36,499 - INFO     -     - action % max(num_valid_edges, 1) = 41 % 50 = 41
2025-10-29 13:53:36,499 - INFO     -     - clamped to [0, 49]: 41
2025-10-29 13:53:36,499 - INFO     -   ✓ Extracted merge pair from edge 41: (7, 4)
2025-10-29 13:53:36,499 - INFO     -   ✓ Validation passed
2025-10-29 13:53:36,499 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:36,499 - INFO     -     - Total states before merge: 33
2025-10-29 13:53:36,499 - INFO     -     - Num nodes: 8
2025-10-29 13:53:36,500 - INFO     -     - Num edges: 50
2025-10-29 13:53:36,500 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:36,500 - INFO     -       - Node 7: 5 states
2025-10-29 13:53:36,500 - INFO     -       - Node 4: 2 states
2025-10-29 13:53:36,500 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:36,500 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:36,506 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:53:36,507 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:36,507 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:53:36,607 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:36,607 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:36,607 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:53:36,607 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:36,608 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:36,608 - INFO     -   Calling graph_tracker.merge_nodes([7, 4])...
2025-10-29 13:53:36,608 - INFO     - Attempting merge of nodes 7 and 4...
2025-10-29 13:53:36,608 - INFO     - Successfully merged nodes into new node 10 with 10 states.
2025-10-29 13:53:36,608 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:36,608 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:36,608 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:53:36,608 - INFO     - 
================================================================================
2025-10-29 13:53:36,608 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:53:36,608 - INFO     - ================================================================================
2025-10-29 13:53:36,608 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:36,608 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:53:36,608 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:53:36,609 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:36,609 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:36,609 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:36,609 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:36,609 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:36,609 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:36,609 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:36,609 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:36,609 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:36,609 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:36,609 - INFO     -   - ts1_id: 7
2025-10-29 13:53:36,609 - INFO     -   - ts2_id: 4
2025-10-29 13:53:36,609 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:36,609 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:36,610 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:36,610 - INFO     -   - Product space size: 10
2025-10-29 13:53:36,610 - INFO     -   - Using product state mapping
2025-10-29 13:53:36,610 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:36,610 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:36,610 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:53:36,610 - INFO     -   - delta: 0.8000
2025-10-29 13:53:36,610 - INFO     -   - f_stability: 1.0 - |0.8000| / 2.8000 = 0.7143
2025-10-29 13:53:36,610 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:36,610 - INFO     -   - Compared 7 values
2025-10-29 13:53:36,610 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:36,610 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:36,610 - INFO     -   - states_before: 10
2025-10-29 13:53:36,610 - INFO     -   - states_after: 10
2025-10-29 13:53:36,610 - INFO     -   - delta_states: 0
2025-10-29 13:53:36,610 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:36,611 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:36,611 - INFO     -   - ts2_transitions: 3
2025-10-29 13:53:36,611 - INFO     -   - merged_transitions: 27
2025-10-29 13:53:36,611 - INFO     -   - transition_density_change: 1.1000
2025-10-29 13:53:36,611 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:36,611 - INFO     -   - search_signals present: True
2025-10-29 13:53:36,611 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:36,611 - INFO     -   - search_depth: 2
2025-10-29 13:53:36,611 - INFO     -   - solution_cost: 2
2025-10-29 13:53:36,611 - INFO     -   - branching_factor: 2.7000
2025-10-29 13:53:36,611 - INFO     -   - solution_found: True
2025-10-29 13:53:36,611 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:36,611 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:36,611 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:53:36,612 - INFO     -   - TS7(5) + TS4(2) → 10 states
2025-10-29 13:53:36,612 - INFO     -   - f_stability=0.714
2025-10-29 13:53:36,612 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:36,612 - INFO     -   - solution_found=True
2025-10-29 13:53:36,612 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:36,612 - INFO     - 
  Extracted signals:
2025-10-29 13:53:36,612 - INFO     -     - iteration: 1
2025-10-29 13:53:36,612 - INFO     -     - states_before: 10
2025-10-29 13:53:36,612 - INFO     -     - states_after: 10
2025-10-29 13:53:36,612 - INFO     -     - delta_states: 0
2025-10-29 13:53:36,612 - INFO     -     - f_value_stability: 0.7143
2025-10-29 13:53:36,612 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:36,612 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:36,612 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:36,612 - INFO     -     - search_depth: 2
2025-10-29 13:53:36,612 - INFO     -     - solution_cost: 2
2025-10-29 13:53:36,612 - INFO     -     - branching_factor: 2.7000
2025-10-29 13:53:36,613 - INFO     -     - solution_found: True
2025-10-29 13:53:36,613 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:36,613 - INFO     - 
  Computing reward:
2025-10-29 13:53:36,613 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:36,613 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:36,613 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:36,613 - INFO     -   [1] BRANCHING FACTOR: 2.700 → score 0.745 (good (in comfort zone))
2025-10-29 13:53:36,613 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:36,613 - INFO     -   [3] F-VALUE STABILITY: 0.459
2025-10-29 13:53:36,613 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:36,613 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:36,613 - INFO     - 
  [COMPOSITE]: 0.676
2025-10-29 13:53:36,614 - INFO     -     = 0.300*0.745 (bf)
2025-10-29 13:53:36,614 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:36,614 - INFO     -     + 0.350*0.459 (stability)
2025-10-29 13:53:36,614 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:36,614 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:36,614 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:36,614 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:36,614 - INFO     - 
  [FINAL REWARD]: 0.6523
2025-10-29 13:53:36,614 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:36,614 - INFO     -     ✓ Reward computed: 0.6523
2025-10-29 13:53:36,614 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:36,614 - INFO     -     - bf_score                       0.7450
2025-10-29 13:53:36,614 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:36,614 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:36,614 - INFO     -     - f_stability                    0.4588
2025-10-29 13:53:36,614 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:36,614 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:36,615 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:36,615 - INFO     -     - composite                      0.6762
2025-10-29 13:53:36,615 - INFO     -     - total                          0.6523
2025-10-29 13:53:36,615 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:36,615 - INFO     -   Num remaining nodes: 7
2025-10-29 13:53:36,615 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:53:36,615 - INFO     -   Done: False
2025-10-29 13:53:36,615 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:36,616 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:36,616 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:36,616 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:36,616 - INFO     -     - num_nodes: 7
2025-10-29 13:53:36,616 - INFO     -     - num_edges: 40
2025-10-29 13:53:36,616 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:36,618 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:53:36,618 - INFO     -   After: current_merge_step = 2
2025-10-29 13:53:36,618 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:36,618 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:36,618 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:36,618 - INFO     -   ✓ Step logged
2025-10-29 13:53:36,619 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:36,619 - INFO     -   Returning:
2025-10-29 13:53:36,619 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:36,619 - INFO     -     - reward: 0.6523
2025-10-29 13:53:36,619 - INFO     -     - done: False
2025-10-29 13:53:36,619 - INFO     -     - truncated: False
2025-10-29 13:53:36,619 - INFO     -     - info: 19 keys
2025-10-29 13:53:36,619 - INFO     - ==========================================================================================

2025-10-29 13:53:36,623 - INFO     - 
==========================================================================================
2025-10-29 13:53:36,623 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:36,623 - INFO     - ==========================================================================================
2025-10-29 13:53:36,624 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:36,624 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:53:36,624 - INFO     -   Available edges in graph: 40
2025-10-29 13:53:36,624 - INFO     -   Action index calculation:
2025-10-29 13:53:36,624 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 40 = 2
2025-10-29 13:53:36,624 - INFO     -     - clamped to [0, 39]: 2
2025-10-29 13:53:36,624 - INFO     -   ✓ Extracted merge pair from edge 2: (1, 5)
2025-10-29 13:53:36,624 - INFO     -   ✓ Validation passed
2025-10-29 13:53:36,624 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:36,624 - INFO     -     - Total states before merge: 36
2025-10-29 13:53:36,624 - INFO     -     - Num nodes: 7
2025-10-29 13:53:36,624 - INFO     -     - Num edges: 40
2025-10-29 13:53:36,624 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:36,624 - INFO     -       - Node 1: 2 states
2025-10-29 13:53:36,624 - INFO     -       - Node 5: 5 states
2025-10-29 13:53:36,624 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:36,624 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:36,629 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:53:36,629 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:36,629 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:53:36,730 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:36,730 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:36,730 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:53:36,730 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:36,731 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:36,731 - INFO     -   Calling graph_tracker.merge_nodes([1, 5])...
2025-10-29 13:53:36,731 - INFO     - Attempting merge of nodes 1 and 5...
2025-10-29 13:53:36,731 - INFO     - Successfully merged nodes into new node 11 with 10 states.
2025-10-29 13:53:36,731 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:36,731 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:36,731 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:53:36,731 - INFO     - 
================================================================================
2025-10-29 13:53:36,731 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:53:36,731 - INFO     - ================================================================================
2025-10-29 13:53:36,731 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:36,731 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:53:36,731 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:53:36,732 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:36,732 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:36,732 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:36,732 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:36,732 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:36,732 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:36,732 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:36,732 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:36,732 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:36,732 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:36,733 - INFO     -   - ts1_id: 1
2025-10-29 13:53:36,733 - INFO     -   - ts2_id: 5
2025-10-29 13:53:36,733 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:36,733 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:36,733 - INFO     -   - ts1_size: 2, ts2_size: 5
2025-10-29 13:53:36,733 - INFO     -   - Product space size: 10
2025-10-29 13:53:36,733 - INFO     -   - Using product state mapping
2025-10-29 13:53:36,733 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:36,733 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:36,733 - INFO     -   - avg_f_after:  3.7000 (10 valid states)
2025-10-29 13:53:36,733 - INFO     -   - delta: 0.9000
2025-10-29 13:53:36,733 - INFO     -   - f_stability: 1.0 - |0.9000| / 2.8000 = 0.6786
2025-10-29 13:53:36,733 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:36,734 - INFO     -   - Compared 7 values
2025-10-29 13:53:36,734 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:36,734 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:36,734 - INFO     -   - states_before: 10
2025-10-29 13:53:36,734 - INFO     -   - states_after: 10
2025-10-29 13:53:36,734 - INFO     -   - delta_states: 0
2025-10-29 13:53:36,734 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:36,734 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:36,734 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:36,734 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:36,734 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:36,734 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:36,734 - INFO     -   - search_signals present: True
2025-10-29 13:53:36,734 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:36,734 - INFO     -   - search_depth: 2
2025-10-29 13:53:36,734 - INFO     -   - solution_cost: 2
2025-10-29 13:53:36,734 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:36,734 - INFO     -   - solution_found: True
2025-10-29 13:53:36,734 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:36,735 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:36,735 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:53:36,735 - INFO     -   - TS1(2) + TS5(5) → 10 states
2025-10-29 13:53:36,735 - INFO     -   - f_stability=0.679
2025-10-29 13:53:36,735 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:36,735 - INFO     -   - solution_found=True
2025-10-29 13:53:36,735 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:36,735 - INFO     - 
  Extracted signals:
2025-10-29 13:53:36,735 - INFO     -     - iteration: 2
2025-10-29 13:53:36,735 - INFO     -     - states_before: 10
2025-10-29 13:53:36,735 - INFO     -     - states_after: 10
2025-10-29 13:53:36,735 - INFO     -     - delta_states: 0
2025-10-29 13:53:36,736 - INFO     -     - f_value_stability: 0.6786
2025-10-29 13:53:36,736 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:36,736 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:36,736 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:36,736 - INFO     -     - search_depth: 2
2025-10-29 13:53:36,737 - INFO     -     - solution_cost: 2
2025-10-29 13:53:36,737 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:36,737 - INFO     -     - solution_found: True
2025-10-29 13:53:36,737 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:36,737 - INFO     - 
  Computing reward:
2025-10-29 13:53:36,737 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:36,737 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:36,737 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:36,737 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:36,737 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:36,737 - INFO     -   [3] F-VALUE STABILITY: 0.286
2025-10-29 13:53:36,737 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:36,737 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:36,738 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:53:36,738 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:36,738 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:36,738 - INFO     -     + 0.350*0.286 (stability)
2025-10-29 13:53:36,738 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:36,738 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:36,738 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:36,738 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:36,738 - INFO     - 
  [FINAL REWARD]: 0.3244
2025-10-29 13:53:36,738 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:36,738 - INFO     -     ✓ Reward computed: 0.3244
2025-10-29 13:53:36,738 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:36,738 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:36,738 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:36,738 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:36,738 - INFO     -     - f_stability                    0.2862
2025-10-29 13:53:36,738 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:36,739 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:36,739 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:36,739 - INFO     -     - composite                      0.5622
2025-10-29 13:53:36,739 - INFO     -     - total                          0.3244
2025-10-29 13:53:36,739 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:36,739 - INFO     -   Num remaining nodes: 6
2025-10-29 13:53:36,739 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:53:36,739 - INFO     -   Done: False
2025-10-29 13:53:36,739 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:36,740 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:36,740 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:36,740 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:36,740 - INFO     -     - num_nodes: 6
2025-10-29 13:53:36,740 - INFO     -     - num_edges: 30
2025-10-29 13:53:36,740 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:36,740 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:53:36,740 - INFO     -   After: current_merge_step = 3
2025-10-29 13:53:36,740 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:36,740 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:36,741 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:36,743 - INFO     -   ✓ Step logged
2025-10-29 13:53:36,743 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:36,743 - INFO     -   Returning:
2025-10-29 13:53:36,743 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:36,743 - INFO     -     - reward: 0.3244
2025-10-29 13:53:36,743 - INFO     -     - done: False
2025-10-29 13:53:36,743 - INFO     -     - truncated: False
2025-10-29 13:53:36,744 - INFO     -     - info: 19 keys
2025-10-29 13:53:36,744 - INFO     - ==========================================================================================

2025-10-29 13:53:36,747 - INFO     - 
==========================================================================================
2025-10-29 13:53:36,747 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:36,747 - INFO     - ==========================================================================================
2025-10-29 13:53:36,747 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:36,747 - INFO     -   Input action: 22 (type: int)
2025-10-29 13:53:36,747 - INFO     -   Available edges in graph: 30
2025-10-29 13:53:36,747 - INFO     -   Action index calculation:
2025-10-29 13:53:36,747 - INFO     -     - action % max(num_valid_edges, 1) = 22 % 30 = 22
2025-10-29 13:53:36,747 - INFO     -     - clamped to [0, 29]: 22
2025-10-29 13:53:36,747 - INFO     -   ✓ Extracted merge pair from edge 22: (10, 9)
2025-10-29 13:53:36,747 - INFO     -   ✓ Validation passed
2025-10-29 13:53:36,747 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:36,747 - INFO     -     - Total states before merge: 39
2025-10-29 13:53:36,749 - INFO     -     - Num nodes: 6
2025-10-29 13:53:36,749 - INFO     -     - Num edges: 30
2025-10-29 13:53:36,749 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:36,749 - INFO     -       - Node 10: 10 states
2025-10-29 13:53:36,749 - INFO     -       - Node 9: 10 states
2025-10-29 13:53:36,749 - INFO     -       - Expected product: 100 states
2025-10-29 13:53:36,749 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:36,754 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:53:36,754 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:36,754 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:53:36,855 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:36,855 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:36,855 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:53:36,855 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:36,855 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:36,857 - INFO     -   Calling graph_tracker.merge_nodes([10, 9])...
2025-10-29 13:53:36,857 - INFO     - Attempting merge of nodes 10 and 9...
2025-10-29 13:53:36,857 - INFO     - Successfully merged nodes into new node 12 with 100 states.
2025-10-29 13:53:36,857 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:36,857 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:36,857 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:53:36,857 - INFO     - 
================================================================================
2025-10-29 13:53:36,857 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:53:36,857 - INFO     - ================================================================================
2025-10-29 13:53:36,857 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:36,857 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:53:36,857 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:53:36,858 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:36,858 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:36,858 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:53:36,858 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:36,858 - INFO     -   - Raw f_after length: 100
2025-10-29 13:53:36,858 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:36,858 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:53:36,859 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:36,859 - INFO     -   - after_valid: 100 / 100 (removed 0)
2025-10-29 13:53:36,859 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:36,859 - INFO     -   - ts1_id: 10
2025-10-29 13:53:36,859 - INFO     -   - ts2_id: 9
2025-10-29 13:53:36,859 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:36,859 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:36,859 - INFO     -   - ts1_size: 10, ts2_size: 10
2025-10-29 13:53:36,859 - INFO     -   - Product space size: 100
2025-10-29 13:53:36,859 - INFO     -   - Using product state mapping
2025-10-29 13:53:36,859 - INFO     -   - f_before_product length: 100
2025-10-29 13:53:36,860 - INFO     -   - avg_f_before: 4.3500 (100 valid states)
2025-10-29 13:53:36,860 - INFO     -   - avg_f_after:  6.7200 (100 valid states)
2025-10-29 13:53:36,860 - INFO     -   - delta: 2.3700
2025-10-29 13:53:36,860 - INFO     -   - f_stability: 1.0 - |2.3700| / 4.3500 = 0.4552
2025-10-29 13:53:36,860 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:36,860 - INFO     -   - Compared 20 values
2025-10-29 13:53:36,860 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:36,860 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:36,860 - INFO     -   - states_before: 100
2025-10-29 13:53:36,860 - INFO     -   - states_after: 100
2025-10-29 13:53:36,860 - INFO     -   - delta_states: 0
2025-10-29 13:53:36,860 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:36,860 - INFO     -   - ts1_transitions: 27
2025-10-29 13:53:36,861 - INFO     -   - ts2_transitions: 40
2025-10-29 13:53:36,861 - INFO     -   - merged_transitions: 595
2025-10-29 13:53:36,861 - INFO     -   - transition_density_change: 5.2800
2025-10-29 13:53:36,861 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:36,861 - INFO     -   - search_signals present: True
2025-10-29 13:53:36,861 - INFO     -   - nodes_expanded: 100
2025-10-29 13:53:36,861 - INFO     -   - search_depth: 3
2025-10-29 13:53:36,861 - INFO     -   - solution_cost: 2
2025-10-29 13:53:36,861 - INFO     -   - branching_factor: 5.9500
2025-10-29 13:53:36,861 - INFO     -   - solution_found: True
2025-10-29 13:53:36,861 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:36,861 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:36,861 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:53:36,861 - INFO     -   - TS10(10) + TS9(10) → 100 states
2025-10-29 13:53:36,862 - INFO     -   - f_stability=0.455
2025-10-29 13:53:36,862 - INFO     -   - A* nodes_expanded=100
2025-10-29 13:53:36,862 - INFO     -   - solution_found=True
2025-10-29 13:53:36,862 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:36,862 - INFO     - 
  Extracted signals:
2025-10-29 13:53:36,862 - INFO     -     - iteration: 3
2025-10-29 13:53:36,862 - INFO     -     - states_before: 100
2025-10-29 13:53:36,862 - INFO     -     - states_after: 100
2025-10-29 13:53:36,862 - INFO     -     - delta_states: 0
2025-10-29 13:53:36,862 - INFO     -     - f_value_stability: 0.4552
2025-10-29 13:53:36,862 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:36,862 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:36,862 - INFO     -     - nodes_expanded: 100
2025-10-29 13:53:36,862 - INFO     -     - search_depth: 3
2025-10-29 13:53:36,862 - INFO     -     - solution_cost: 2
2025-10-29 13:53:36,862 - INFO     -     - branching_factor: 5.9500
2025-10-29 13:53:36,862 - INFO     -     - solution_found: True
2025-10-29 13:53:36,862 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:36,863 - INFO     - 
  Computing reward:
2025-10-29 13:53:36,863 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:36,863 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:36,863 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:36,863 - INFO     -   [1] BRANCHING FACTOR: 5.950 → score 0.307 (tolerable)
2025-10-29 13:53:36,863 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:36,864 - INFO     -   [3] F-VALUE STABILITY: 0.363
2025-10-29 13:53:36,864 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:36,864 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:36,864 - INFO     - 
  [COMPOSITE]: 0.504
2025-10-29 13:53:36,864 - INFO     -     = 0.300*0.307 (bf)
2025-10-29 13:53:36,864 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:36,864 - INFO     -     + 0.350*0.363 (stability)
2025-10-29 13:53:36,864 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:36,864 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:36,864 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:36,864 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:36,864 - INFO     - 
  [FINAL REWARD]: 0.3074
2025-10-29 13:53:36,864 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:36,864 - INFO     -     ✓ Reward computed: 0.3074
2025-10-29 13:53:36,864 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:36,864 - INFO     -     - bf_score                       0.3067
2025-10-29 13:53:36,864 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:36,865 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:36,865 - INFO     -     - f_stability                    0.3628
2025-10-29 13:53:36,865 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:36,865 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:36,865 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:36,865 - INFO     -     - composite                      0.5037
2025-10-29 13:53:36,865 - INFO     -     - total                          0.3074
2025-10-29 13:53:36,865 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:36,865 - INFO     -   Num remaining nodes: 5
2025-10-29 13:53:36,865 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:53:36,865 - INFO     -   Done: False
2025-10-29 13:53:36,865 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:36,866 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:36,866 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:36,866 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:36,866 - INFO     -     - num_nodes: 5
2025-10-29 13:53:36,866 - INFO     -     - num_edges: 20
2025-10-29 13:53:36,866 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:36,866 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:53:36,866 - INFO     -   After: current_merge_step = 4
2025-10-29 13:53:36,866 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:36,866 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:36,867 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:36,867 - INFO     -   ✓ Step logged
2025-10-29 13:53:36,867 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:36,867 - INFO     -   Returning:
2025-10-29 13:53:36,867 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:36,867 - INFO     -     - reward: 0.3074
2025-10-29 13:53:36,867 - INFO     -     - done: False
2025-10-29 13:53:36,868 - INFO     -     - truncated: False
2025-10-29 13:53:36,868 - INFO     -     - info: 19 keys
2025-10-29 13:53:36,868 - INFO     - ==========================================================================================

2025-10-29 13:53:36,872 - INFO     - 
==========================================================================================
2025-10-29 13:53:36,872 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:36,872 - INFO     - ==========================================================================================
2025-10-29 13:53:36,872 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:36,872 - INFO     -   Input action: 15 (type: int)
2025-10-29 13:53:36,873 - INFO     -   Available edges in graph: 20
2025-10-29 13:53:36,873 - INFO     -   Action index calculation:
2025-10-29 13:53:36,873 - INFO     -     - action % max(num_valid_edges, 1) = 15 % 20 = 15
2025-10-29 13:53:36,873 - INFO     -     - clamped to [0, 19]: 15
2025-10-29 13:53:36,873 - INFO     -   ✓ Extracted merge pair from edge 15: (11, 12)
2025-10-29 13:53:36,873 - INFO     -   ✓ Validation passed
2025-10-29 13:53:36,873 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:36,873 - INFO     -     - Total states before merge: 119
2025-10-29 13:53:36,873 - INFO     -     - Num nodes: 5
2025-10-29 13:53:36,873 - INFO     -     - Num edges: 20
2025-10-29 13:53:36,873 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:36,873 - INFO     -       - Node 11: 10 states
2025-10-29 13:53:36,873 - INFO     -       - Node 12: 100 states
2025-10-29 13:53:36,873 - INFO     -       - Expected product: 1000 states
2025-10-29 13:53:36,873 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:36,879 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:53:36,881 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:36,881 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:53:36,981 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:36,981 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:36,981 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:53:36,989 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:53:36,989 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:36,989 - INFO     -   Calling graph_tracker.merge_nodes([11, 12])...
2025-10-29 13:53:36,989 - INFO     - Attempting merge of nodes 11 and 12...
2025-10-29 13:53:36,989 - INFO     - Successfully merged nodes into new node 13 with 1000 states.
2025-10-29 13:53:36,989 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:36,989 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:36,990 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:53:36,990 - INFO     - 
================================================================================
2025-10-29 13:53:36,990 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:53:36,990 - INFO     - ================================================================================
2025-10-29 13:53:36,990 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:36,990 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:53:36,990 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:53:36,991 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:36,991 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:36,991 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:53:36,991 - INFO     -   - Raw ts2_f length: 100
2025-10-29 13:53:36,991 - INFO     -   - Raw f_after length: 1000
2025-10-29 13:53:36,991 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:36,992 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:53:36,992 - INFO     -   - ts2_valid: 100 / 100 (removed -100)
2025-10-29 13:53:36,992 - INFO     -   - after_valid: 847 / 1000 (removed 153)
2025-10-29 13:53:36,992 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:36,992 - INFO     -   - ts1_id: 11
2025-10-29 13:53:36,992 - INFO     -   - ts2_id: 12
2025-10-29 13:53:36,992 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:36,993 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:36,993 - INFO     -   - ts1_size: 10, ts2_size: 100
2025-10-29 13:53:36,993 - INFO     -   - Product space size: 1000
2025-10-29 13:53:36,993 - INFO     -   - Using product state mapping
2025-10-29 13:53:36,995 - INFO     -   - f_before_product length: 1000
2025-10-29 13:53:36,998 - INFO     -   - avg_f_before: 6.8850 (1000 valid states)
2025-10-29 13:53:36,998 - INFO     -   - avg_f_after:  11.0413 (847 valid states)
2025-10-29 13:53:36,998 - INFO     -   - delta: 4.1563
2025-10-29 13:53:36,998 - INFO     -   - f_stability: 1.0 - |4.1563| / 6.8850 = 0.3963
2025-10-29 13:53:36,999 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:36,999 - INFO     -   - Compared 110 values
2025-10-29 13:53:36,999 - INFO     -   - Significant changes (> 5.0): 38
2025-10-29 13:53:36,999 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:36,999 - INFO     -   - states_before: 1000
2025-10-29 13:53:36,999 - INFO     -   - states_after: 1000
2025-10-29 13:53:36,999 - INFO     -   - delta_states: 0
2025-10-29 13:53:36,999 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:36,999 - INFO     -   - ts1_transitions: 40
2025-10-29 13:53:36,999 - INFO     -   - ts2_transitions: 595
2025-10-29 13:53:36,999 - INFO     -   - merged_transitions: 4900
2025-10-29 13:53:36,999 - INFO     -   - transition_density_change: 4.2650
2025-10-29 13:53:36,999 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:37,000 - INFO     -   - search_signals present: True
2025-10-29 13:53:37,000 - INFO     -   - nodes_expanded: 847
2025-10-29 13:53:37,000 - INFO     -   - search_depth: 5
2025-10-29 13:53:37,000 - INFO     -   - solution_cost: 4
2025-10-29 13:53:37,000 - INFO     -   - branching_factor: 5.7851
2025-10-29 13:53:37,000 - INFO     -   - solution_found: True
2025-10-29 13:53:37,000 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:37,000 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:37,000 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:53:37,002 - INFO     -   - TS11(10) + TS12(100) → 1000 states
2025-10-29 13:53:37,002 - INFO     -   - f_stability=0.396
2025-10-29 13:53:37,002 - INFO     -   - A* nodes_expanded=847
2025-10-29 13:53:37,002 - INFO     -   - solution_found=True
2025-10-29 13:53:37,002 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:37,002 - INFO     - 
  Extracted signals:
2025-10-29 13:53:37,002 - INFO     -     - iteration: 4
2025-10-29 13:53:37,002 - INFO     -     - states_before: 1000
2025-10-29 13:53:37,002 - INFO     -     - states_after: 1000
2025-10-29 13:53:37,002 - INFO     -     - delta_states: 0
2025-10-29 13:53:37,002 - INFO     -     - f_value_stability: 0.3963
2025-10-29 13:53:37,003 - INFO     -     - num_significant_f_changes: 38
2025-10-29 13:53:37,003 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:37,003 - INFO     -     - nodes_expanded: 847
2025-10-29 13:53:37,003 - INFO     -     - search_depth: 5
2025-10-29 13:53:37,003 - INFO     -     - solution_cost: 4
2025-10-29 13:53:37,003 - INFO     -     - branching_factor: 5.7851
2025-10-29 13:53:37,003 - INFO     -     - solution_found: True
2025-10-29 13:53:37,003 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:37,003 - INFO     - 
  Computing reward:
2025-10-29 13:53:37,003 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:37,003 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:37,004 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:37,004 - INFO     -   [1] BRANCHING FACTOR: 5.785 → score 0.329 (tolerable)
2025-10-29 13:53:37,004 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:37,004 - INFO     -   [3] F-VALUE STABILITY: 0.549
2025-10-29 13:53:37,005 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:37,005 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:37,005 - INFO     - 
  [COMPOSITE]: 0.565
2025-10-29 13:53:37,005 - INFO     -     = 0.300*0.329 (bf)
2025-10-29 13:53:37,005 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:37,005 - INFO     -     + 0.350*0.549 (stability)
2025-10-29 13:53:37,005 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:37,005 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:37,005 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:37,005 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:37,005 - INFO     - 
  [FINAL REWARD]: 0.5304
2025-10-29 13:53:37,006 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:37,006 - INFO     -     ✓ Reward computed: 0.5304
2025-10-29 13:53:37,006 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:37,006 - INFO     -     - bf_score                       0.3287
2025-10-29 13:53:37,006 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:37,006 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:37,006 - INFO     -     - f_stability                    0.5490
2025-10-29 13:53:37,006 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:37,006 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:37,006 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:37,006 - INFO     -     - composite                      0.5652
2025-10-29 13:53:37,006 - INFO     -     - total                          0.5304
2025-10-29 13:53:37,006 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:37,006 - INFO     -   Num remaining nodes: 4
2025-10-29 13:53:37,007 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:53:37,007 - INFO     -   Done: False
2025-10-29 13:53:37,007 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:37,007 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:37,008 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:37,008 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:37,008 - INFO     -     - num_nodes: 4
2025-10-29 13:53:37,008 - INFO     -     - num_edges: 12
2025-10-29 13:53:37,008 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:37,008 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:53:37,008 - INFO     -   After: current_merge_step = 5
2025-10-29 13:53:37,008 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:37,008 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:37,008 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:37,009 - INFO     -   ✓ Step logged
2025-10-29 13:53:37,009 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:37,009 - INFO     -   Returning:
2025-10-29 13:53:37,009 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:37,009 - INFO     -     - reward: 0.5304
2025-10-29 13:53:37,009 - INFO     -     - done: False
2025-10-29 13:53:37,009 - INFO     -     - truncated: False
2025-10-29 13:53:37,009 - INFO     -     - info: 19 keys
2025-10-29 13:53:37,009 - INFO     - ==========================================================================================

2025-10-29 13:53:37,014 - INFO     - 
==========================================================================================
2025-10-29 13:53:37,015 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:37,015 - INFO     - ==========================================================================================
2025-10-29 13:53:37,015 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:37,015 - INFO     -   Input action: 10 (type: int)
2025-10-29 13:53:37,015 - INFO     -   Available edges in graph: 12
2025-10-29 13:53:37,015 - INFO     -   Action index calculation:
2025-10-29 13:53:37,015 - INFO     -     - action % max(num_valid_edges, 1) = 10 % 12 = 10
2025-10-29 13:53:37,015 - INFO     -     - clamped to [0, 11]: 10
2025-10-29 13:53:37,015 - INFO     -   ✓ Extracted merge pair from edge 10: (13, 3)
2025-10-29 13:53:37,015 - INFO     -   ✓ Validation passed
2025-10-29 13:53:37,015 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:37,015 - INFO     -     - Total states before merge: 1009
2025-10-29 13:53:37,015 - INFO     -     - Num nodes: 4
2025-10-29 13:53:37,015 - INFO     -     - Num edges: 12
2025-10-29 13:53:37,015 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:37,016 - INFO     -       - Node 13: 1000 states
2025-10-29 13:53:37,016 - INFO     -       - Node 3: 2 states
2025-10-29 13:53:37,016 - INFO     -       - Expected product: 2000 states
2025-10-29 13:53:37,016 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:37,023 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:53:37,023 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:37,023 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:53:37,124 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:37,124 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:37,124 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:53:37,335 - INFO     -   ✓ TS file received after 0.21s
2025-10-29 13:53:37,335 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:37,335 - INFO     -   Calling graph_tracker.merge_nodes([13, 3])...
2025-10-29 13:53:37,335 - INFO     - Attempting merge of nodes 13 and 3...
2025-10-29 13:53:37,337 - INFO     - Successfully merged nodes into new node 14 with 2000 states.
2025-10-29 13:53:37,337 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:37,337 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:37,337 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:53:37,337 - INFO     - 
================================================================================
2025-10-29 13:53:37,337 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:53:37,337 - INFO     - ================================================================================
2025-10-29 13:53:37,337 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:37,337 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:53:37,337 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:53:37,340 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:37,340 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:37,340 - INFO     -   - Raw ts1_f length: 847
2025-10-29 13:53:37,340 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:37,340 - INFO     -   - Raw f_after length: 1694
2025-10-29 13:53:37,340 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:37,341 - INFO     -   - ts1_valid: 847 / 847 (removed 0)
2025-10-29 13:53:37,341 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:37,342 - INFO     -   - after_valid: 1619 / 1694 (removed 75)
2025-10-29 13:53:37,342 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:37,342 - INFO     -   - ts1_id: 13
2025-10-29 13:53:37,342 - INFO     -   - ts2_id: 3
2025-10-29 13:53:37,342 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:37,342 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:37,342 - INFO     -   - ts1_size: 847, ts2_size: 2
2025-10-29 13:53:37,342 - INFO     -   - Product space size: 1694
2025-10-29 13:53:37,343 - INFO     -   - Using product state mapping
2025-10-29 13:53:37,345 - INFO     -   - f_before_product length: 1694
2025-10-29 13:53:37,350 - INFO     -   - avg_f_before: 11.0413 (1694 valid states)
2025-10-29 13:53:37,350 - INFO     -   - avg_f_after:  12.4157 (1619 valid states)
2025-10-29 13:53:37,350 - INFO     -   - delta: 1.3744
2025-10-29 13:53:37,350 - INFO     -   - f_stability: 1.0 - |1.3744| / 11.0413 = 0.8755
2025-10-29 13:53:37,350 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:37,350 - INFO     -   - Compared 849 values
2025-10-29 13:53:37,350 - INFO     -   - Significant changes (> 5.0): 161
2025-10-29 13:53:37,350 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:37,350 - INFO     -   - states_before: 1694
2025-10-29 13:53:37,350 - INFO     -   - states_after: 1694
2025-10-29 13:53:37,350 - INFO     -   - delta_states: 0
2025-10-29 13:53:37,351 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:37,351 - INFO     -   - ts1_transitions: 4548
2025-10-29 13:53:37,351 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:37,351 - INFO     -   - merged_transitions: 9673
2025-10-29 13:53:37,351 - INFO     -   - transition_density_change: 3.0224
2025-10-29 13:53:37,351 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:37,351 - INFO     -   - search_signals present: True
2025-10-29 13:53:37,351 - INFO     -   - nodes_expanded: 1619
2025-10-29 13:53:37,351 - INFO     -   - search_depth: 6
2025-10-29 13:53:37,351 - INFO     -   - solution_cost: 4
2025-10-29 13:53:37,351 - INFO     -   - branching_factor: 5.9747
2025-10-29 13:53:37,351 - INFO     -   - solution_found: True
2025-10-29 13:53:37,351 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:37,353 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:37,353 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:53:37,353 - INFO     -   - TS13(847) + TS3(2) → 1694 states
2025-10-29 13:53:37,353 - INFO     -   - f_stability=0.876
2025-10-29 13:53:37,353 - INFO     -   - A* nodes_expanded=1619
2025-10-29 13:53:37,353 - INFO     -   - solution_found=True
2025-10-29 13:53:37,354 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:37,354 - INFO     - 
  Extracted signals:
2025-10-29 13:53:37,354 - INFO     -     - iteration: 5
2025-10-29 13:53:37,354 - INFO     -     - states_before: 1694
2025-10-29 13:53:37,354 - INFO     -     - states_after: 1694
2025-10-29 13:53:37,354 - INFO     -     - delta_states: 0
2025-10-29 13:53:37,354 - INFO     -     - f_value_stability: 0.8755
2025-10-29 13:53:37,355 - INFO     -     - num_significant_f_changes: 161
2025-10-29 13:53:37,355 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:37,355 - INFO     -     - nodes_expanded: 1619
2025-10-29 13:53:37,355 - INFO     -     - search_depth: 6
2025-10-29 13:53:37,355 - INFO     -     - solution_cost: 4
2025-10-29 13:53:37,355 - INFO     -     - branching_factor: 5.9747
2025-10-29 13:53:37,355 - INFO     -     - solution_found: True
2025-10-29 13:53:37,355 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:37,356 - INFO     - 
  Computing reward:
2025-10-29 13:53:37,356 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:37,356 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:37,356 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:37,356 - INFO     -   [1] BRANCHING FACTOR: 5.975 → score 0.303 (tolerable)
2025-10-29 13:53:37,356 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:37,358 - INFO     -   [3] F-VALUE STABILITY: 0.847
2025-10-29 13:53:37,358 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:37,359 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:37,359 - INFO     - 
  [COMPOSITE]: 0.658
2025-10-29 13:53:37,359 - INFO     -     = 0.300*0.303 (bf)
2025-10-29 13:53:37,359 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:37,359 - INFO     -     + 0.350*0.847 (stability)
2025-10-29 13:53:37,359 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:37,359 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:37,359 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:37,359 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:37,359 - INFO     - 
  [FINAL REWARD]: 0.8161
2025-10-29 13:53:37,359 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:37,359 - INFO     -     ✓ Reward computed: 0.8161
2025-10-29 13:53:37,359 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:37,359 - INFO     -     - bf_score                       0.3034
2025-10-29 13:53:37,359 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:37,359 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:37,359 - INFO     -     - f_stability                    0.8473
2025-10-29 13:53:37,359 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:37,359 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:37,359 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:37,359 - INFO     -     - composite                      0.6581
2025-10-29 13:53:37,359 - INFO     -     - total                          0.8161
2025-10-29 13:53:37,360 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:37,360 - INFO     -   Num remaining nodes: 3
2025-10-29 13:53:37,360 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:53:37,360 - INFO     -   Done: False
2025-10-29 13:53:37,360 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:37,361 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:37,361 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:37,361 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:37,362 - INFO     -     - num_nodes: 3
2025-10-29 13:53:37,362 - INFO     -     - num_edges: 6
2025-10-29 13:53:37,362 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:37,362 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:53:37,362 - INFO     -   After: current_merge_step = 6
2025-10-29 13:53:37,362 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:37,362 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:37,362 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:37,362 - INFO     -   ✓ Step logged
2025-10-29 13:53:37,362 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:37,363 - INFO     -   Returning:
2025-10-29 13:53:37,363 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:37,363 - INFO     -     - reward: 0.8161
2025-10-29 13:53:37,363 - INFO     -     - done: False
2025-10-29 13:53:37,363 - INFO     -     - truncated: False
2025-10-29 13:53:37,363 - INFO     -     - info: 19 keys
2025-10-29 13:53:37,363 - INFO     - ==========================================================================================

2025-10-29 13:53:37,369 - INFO     - 
==========================================================================================
2025-10-29 13:53:37,370 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:37,370 - INFO     - ==========================================================================================
2025-10-29 13:53:37,370 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:37,370 - INFO     -   Input action: 4 (type: int)
2025-10-29 13:53:37,370 - INFO     -   Available edges in graph: 6
2025-10-29 13:53:37,370 - INFO     -   Action index calculation:
2025-10-29 13:53:37,370 - INFO     -     - action % max(num_valid_edges, 1) = 4 % 6 = 4
2025-10-29 13:53:37,370 - INFO     -     - clamped to [0, 5]: 4
2025-10-29 13:53:37,370 - INFO     -   ✓ Extracted merge pair from edge 4: (14, 2)
2025-10-29 13:53:37,370 - INFO     -   ✓ Validation passed
2025-10-29 13:53:37,370 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:37,370 - INFO     -     - Total states before merge: 2007
2025-10-29 13:53:37,370 - INFO     -     - Num nodes: 3
2025-10-29 13:53:37,370 - INFO     -     - Num edges: 6
2025-10-29 13:53:37,370 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:37,370 - INFO     -       - Node 14: 2000 states
2025-10-29 13:53:37,370 - INFO     -       - Node 2: 2 states
2025-10-29 13:53:37,371 - INFO     -       - Expected product: 4000 states
2025-10-29 13:53:37,371 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:37,381 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:53:37,381 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:37,381 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:53:37,482 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:37,482 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:37,482 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:53:37,732 - INFO     -   ✓ TS file received after 0.25s
2025-10-29 13:53:37,732 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:37,733 - INFO     -   Calling graph_tracker.merge_nodes([14, 2])...
2025-10-29 13:53:37,733 - INFO     - Attempting merge of nodes 14 and 2...
2025-10-29 13:53:37,733 - INFO     - Successfully merged nodes into new node 15 with 4000 states.
2025-10-29 13:53:37,733 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:37,733 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:37,733 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:53:37,733 - INFO     - 
================================================================================
2025-10-29 13:53:37,733 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:53:37,733 - INFO     - ================================================================================
2025-10-29 13:53:37,733 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:37,733 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:53:37,734 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:53:37,738 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:37,738 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:37,738 - INFO     -   - Raw ts1_f length: 1619
2025-10-29 13:53:37,738 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:37,739 - INFO     -   - Raw f_after length: 3238
2025-10-29 13:53:37,739 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:37,739 - INFO     -   - ts1_valid: 1619 / 1619 (removed 0)
2025-10-29 13:53:37,740 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:37,741 - INFO     -   - after_valid: 2984 / 3238 (removed 254)
2025-10-29 13:53:37,741 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:37,741 - INFO     -   - ts1_id: 14
2025-10-29 13:53:37,741 - INFO     -   - ts2_id: 2
2025-10-29 13:53:37,742 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:37,742 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:37,742 - INFO     -   - ts1_size: 1619, ts2_size: 2
2025-10-29 13:53:37,742 - INFO     -   - Product space size: 3238
2025-10-29 13:53:37,742 - INFO     -   - Using product state mapping
2025-10-29 13:53:37,747 - INFO     -   - f_before_product length: 3238
2025-10-29 13:53:37,755 - INFO     -   - avg_f_before: 12.4157 (3238 valid states)
2025-10-29 13:53:37,755 - INFO     -   - avg_f_after:  13.3747 (2984 valid states)
2025-10-29 13:53:37,755 - INFO     -   - delta: 0.9590
2025-10-29 13:53:37,755 - INFO     -   - f_stability: 1.0 - |0.9590| / 12.4157 = 0.9228
2025-10-29 13:53:37,755 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:37,755 - INFO     -   - Compared 1621 values
2025-10-29 13:53:37,755 - INFO     -   - Significant changes (> 5.0): 349
2025-10-29 13:53:37,755 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:37,755 - INFO     -   - states_before: 3238
2025-10-29 13:53:37,755 - INFO     -   - states_after: 3238
2025-10-29 13:53:37,755 - INFO     -   - delta_states: 0
2025-10-29 13:53:37,755 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:37,755 - INFO     -   - ts1_transitions: 9264
2025-10-29 13:53:37,756 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:37,756 - INFO     -   - merged_transitions: 19683
2025-10-29 13:53:37,756 - INFO     -   - transition_density_change: 3.2162
2025-10-29 13:53:37,756 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:37,756 - INFO     -   - search_signals present: True
2025-10-29 13:53:37,757 - INFO     -   - nodes_expanded: 2984
2025-10-29 13:53:37,757 - INFO     -   - search_depth: 6
2025-10-29 13:53:37,757 - INFO     -   - solution_cost: 4
2025-10-29 13:53:37,757 - INFO     -   - branching_factor: 6.5962
2025-10-29 13:53:37,757 - INFO     -   - solution_found: True
2025-10-29 13:53:37,757 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:37,759 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:37,759 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:53:37,759 - INFO     -   - TS14(1619) + TS2(2) → 3238 states
2025-10-29 13:53:37,759 - INFO     -   - f_stability=0.923
2025-10-29 13:53:37,759 - INFO     -   - A* nodes_expanded=2984
2025-10-29 13:53:37,759 - INFO     -   - solution_found=True
2025-10-29 13:53:37,759 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:37,759 - INFO     - 
  Extracted signals:
2025-10-29 13:53:37,760 - INFO     -     - iteration: 6
2025-10-29 13:53:37,760 - INFO     -     - states_before: 3238
2025-10-29 13:53:37,760 - INFO     -     - states_after: 3238
2025-10-29 13:53:37,760 - INFO     -     - delta_states: 0
2025-10-29 13:53:37,760 - INFO     -     - f_value_stability: 0.9228
2025-10-29 13:53:37,760 - INFO     -     - num_significant_f_changes: 349
2025-10-29 13:53:37,760 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:37,760 - INFO     -     - nodes_expanded: 2984
2025-10-29 13:53:37,760 - INFO     -     - search_depth: 6
2025-10-29 13:53:37,760 - INFO     -     - solution_cost: 4
2025-10-29 13:53:37,760 - INFO     -     - branching_factor: 6.5962
2025-10-29 13:53:37,760 - INFO     -     - solution_found: True
2025-10-29 13:53:37,760 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:37,761 - INFO     - 
  Computing reward:
2025-10-29 13:53:37,761 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:37,761 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:37,761 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:37,761 - INFO     -   [1] BRANCHING FACTOR: 6.596 → score 0.240 (high BF, minimal credit)
2025-10-29 13:53:37,761 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:37,763 - INFO     -   [3] F-VALUE STABILITY: 0.980
2025-10-29 13:53:37,763 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:37,763 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:37,763 - INFO     - 
  [COMPOSITE]: 0.686
2025-10-29 13:53:37,764 - INFO     -     = 0.300*0.240 (bf)
2025-10-29 13:53:37,764 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:37,764 - INFO     -     + 0.350*0.980 (stability)
2025-10-29 13:53:37,764 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:37,764 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:37,764 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:37,764 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:37,764 - INFO     - 
  [FINAL REWARD]: 0.8712
2025-10-29 13:53:37,764 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:37,765 - INFO     -     ✓ Reward computed: 0.8712
2025-10-29 13:53:37,765 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:37,765 - INFO     -     - bf_score                       0.2404
2025-10-29 13:53:37,765 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:37,765 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:37,765 - INFO     -     - f_stability                    0.9799
2025-10-29 13:53:37,765 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:37,765 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:37,765 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:37,765 - INFO     -     - composite                      0.6856
2025-10-29 13:53:37,765 - INFO     -     - total                          0.8712
2025-10-29 13:53:37,765 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:37,765 - INFO     -   Num remaining nodes: 2
2025-10-29 13:53:37,765 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:53:37,765 - INFO     -   Done: False
2025-10-29 13:53:37,765 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:37,766 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:37,766 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:37,766 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:37,766 - INFO     -     - num_nodes: 2
2025-10-29 13:53:37,766 - INFO     -     - num_edges: 2
2025-10-29 13:53:37,766 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:37,766 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:53:37,766 - INFO     -   After: current_merge_step = 7
2025-10-29 13:53:37,766 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:37,766 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:37,766 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:37,767 - INFO     -   ✓ Step logged
2025-10-29 13:53:37,767 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:37,767 - INFO     -   Returning:
2025-10-29 13:53:37,767 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:37,767 - INFO     -     - reward: 0.8712
2025-10-29 13:53:37,767 - INFO     -     - done: False
2025-10-29 13:53:37,767 - INFO     -     - truncated: False
2025-10-29 13:53:37,767 - INFO     -     - info: 19 keys
2025-10-29 13:53:37,767 - INFO     - ==========================================================================================

2025-10-29 13:53:37,775 - INFO     - 
==========================================================================================
2025-10-29 13:53:37,775 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:37,775 - INFO     - ==========================================================================================
2025-10-29 13:53:37,775 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:37,775 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:53:37,775 - INFO     -   Available edges in graph: 2
2025-10-29 13:53:37,775 - INFO     -   Action index calculation:
2025-10-29 13:53:37,775 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:53:37,775 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:53:37,775 - INFO     -   ✓ Extracted merge pair from edge 0: (6, 15)
2025-10-29 13:53:37,775 - INFO     -   ✓ Validation passed
2025-10-29 13:53:37,775 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:37,775 - INFO     -     - Total states before merge: 4005
2025-10-29 13:53:37,775 - INFO     -     - Num nodes: 2
2025-10-29 13:53:37,776 - INFO     -     - Num edges: 2
2025-10-29 13:53:37,776 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:37,776 - INFO     -       - Node 6: 5 states
2025-10-29 13:53:37,776 - INFO     -       - Node 15: 4000 states
2025-10-29 13:53:37,776 - INFO     -       - Expected product: 20000 states
2025-10-29 13:53:37,776 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:37,786 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:53:37,787 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:37,787 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:53:37,888 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:37,889 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:37,889 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:53:38,109 - INFO     -   ✓ TS file received after 0.22s
2025-10-29 13:53:38,109 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:38,109 - INFO     -   Calling graph_tracker.merge_nodes([6, 15])...
2025-10-29 13:53:38,109 - INFO     - Attempting merge of nodes 6 and 15...
2025-10-29 13:53:38,109 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:53:38,109 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:38,109 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:38,109 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:53:38,109 - INFO     - 
================================================================================
2025-10-29 13:53:38,111 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:53:38,111 - INFO     - ================================================================================
2025-10-29 13:53:38,111 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:38,111 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:53:38,111 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:53:38,114 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:38,114 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:38,114 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:38,114 - INFO     -   - Raw ts2_f length: 668
2025-10-29 13:53:38,114 - INFO     -   - Raw f_after length: 3340
2025-10-29 13:53:38,115 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:38,115 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:38,115 - INFO     -   - ts2_valid: 668 / 668 (removed -668)
2025-10-29 13:53:38,116 - INFO     -   - after_valid: 2749 / 3340 (removed 591)
2025-10-29 13:53:38,116 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:38,116 - INFO     -   - ts1_id: 6
2025-10-29 13:53:38,116 - INFO     -   - ts2_id: 15
2025-10-29 13:53:38,116 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:38,116 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:38,117 - INFO     -   - ts1_size: 5, ts2_size: 668
2025-10-29 13:53:38,117 - INFO     -   - Product space size: 3340
2025-10-29 13:53:38,117 - INFO     -   - Using product state mapping
2025-10-29 13:53:38,122 - INFO     -   - f_before_product length: 3340
2025-10-29 13:53:38,130 - INFO     -   - avg_f_before: 8.1722 (3340 valid states)
2025-10-29 13:53:38,131 - INFO     -   - avg_f_after:  12.2346 (2749 valid states)
2025-10-29 13:53:38,131 - INFO     -   - delta: 4.0625
2025-10-29 13:53:38,131 - INFO     -   - f_stability: 1.0 - |4.0625| / 8.1722 = 0.5029
2025-10-29 13:53:38,131 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:38,131 - INFO     -   - Compared 673 values
2025-10-29 13:53:38,131 - INFO     -   - Significant changes (> 5.0): 128
2025-10-29 13:53:38,131 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:38,131 - INFO     -   - states_before: 3340
2025-10-29 13:53:38,131 - INFO     -   - states_after: 3340
2025-10-29 13:53:38,131 - INFO     -   - delta_states: 0
2025-10-29 13:53:38,131 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:38,131 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:38,131 - INFO     -   - ts2_transitions: 6703
2025-10-29 13:53:38,131 - INFO     -   - merged_transitions: 19291
2025-10-29 13:53:38,132 - INFO     -   - transition_density_change: 3.7650
2025-10-29 13:53:38,132 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:38,132 - INFO     -   - search_signals present: True
2025-10-29 13:53:38,132 - INFO     -   - nodes_expanded: 2749
2025-10-29 13:53:38,132 - INFO     -   - search_depth: 6
2025-10-29 13:53:38,132 - INFO     -   - solution_cost: 4
2025-10-29 13:53:38,132 - INFO     -   - branching_factor: 7.0175
2025-10-29 13:53:38,132 - INFO     -   - solution_found: True
2025-10-29 13:53:38,132 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:38,133 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:38,134 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:53:38,134 - INFO     -   - TS6(5) + TS15(668) → 3340 states
2025-10-29 13:53:38,134 - INFO     -   - f_stability=0.503
2025-10-29 13:53:38,134 - INFO     -   - A* nodes_expanded=2749
2025-10-29 13:53:38,134 - INFO     -   - solution_found=True
2025-10-29 13:53:38,134 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:38,135 - INFO     - 
  Extracted signals:
2025-10-29 13:53:38,135 - INFO     -     - iteration: 7
2025-10-29 13:53:38,135 - INFO     -     - states_before: 3340
2025-10-29 13:53:38,135 - INFO     -     - states_after: 3340
2025-10-29 13:53:38,135 - INFO     -     - delta_states: 0
2025-10-29 13:53:38,135 - INFO     -     - f_value_stability: 0.5029
2025-10-29 13:53:38,135 - INFO     -     - num_significant_f_changes: 128
2025-10-29 13:53:38,135 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:38,135 - INFO     -     - nodes_expanded: 2749
2025-10-29 13:53:38,135 - INFO     -     - search_depth: 6
2025-10-29 13:53:38,135 - INFO     -     - solution_cost: 4
2025-10-29 13:53:38,136 - INFO     -     - branching_factor: 7.0175
2025-10-29 13:53:38,136 - INFO     -     - solution_found: True
2025-10-29 13:53:38,136 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:38,137 - INFO     - 
  Computing reward:
2025-10-29 13:53:38,137 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:38,138 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:38,138 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:38,138 - INFO     -   [1] BRANCHING FACTOR: 7.017 → score 0.198 (high BF, minimal credit)
2025-10-29 13:53:38,138 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:38,140 - INFO     -   [3] F-VALUE STABILITY: 0.604
2025-10-29 13:53:38,140 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:38,140 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:38,140 - INFO     - 
  [COMPOSITE]: 0.541
2025-10-29 13:53:38,140 - INFO     -     = 0.300*0.198 (bf)
2025-10-29 13:53:38,140 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:38,140 - INFO     -     + 0.350*0.604 (stability)
2025-10-29 13:53:38,140 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:38,140 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:38,140 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:38,140 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:38,141 - INFO     - 
  [FINAL REWARD]: 0.4828
2025-10-29 13:53:38,141 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:38,141 - INFO     -     ✓ Reward computed: 0.4828
2025-10-29 13:53:38,141 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:38,141 - INFO     -     - bf_score                       0.1983
2025-10-29 13:53:38,141 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:38,142 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:38,142 - INFO     -     - f_stability                    0.6040
2025-10-29 13:53:38,142 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:38,142 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:38,142 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:38,142 - INFO     -     - composite                      0.5414
2025-10-29 13:53:38,142 - INFO     -     - total                          0.4828
2025-10-29 13:53:38,142 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:38,142 - INFO     -   Num remaining nodes: 1
2025-10-29 13:53:38,143 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:53:38,143 - INFO     -   Done: True
2025-10-29 13:53:38,143 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:53:38,143 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:38,143 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:38,143 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:38,143 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:38,143 - INFO     -     - num_nodes: 1
2025-10-29 13:53:38,144 - INFO     -     - num_edges: 0
2025-10-29 13:53:38,144 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:38,144 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:53:38,144 - INFO     -   After: current_merge_step = 8
2025-10-29 13:53:38,144 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:38,144 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:38,144 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:38,145 - INFO     -   ✓ Step logged
2025-10-29 13:53:38,145 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:38,145 - INFO     -   Returning:
2025-10-29 13:53:38,145 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:38,145 - INFO     -     - reward: 0.4828
2025-10-29 13:53:38,145 - INFO     -     - done: True
2025-10-29 13:53:38,145 - INFO     -     - truncated: False
2025-10-29 13:53:38,145 - INFO     -     - info: 19 keys
2025-10-29 13:53:38,145 - INFO     - ==========================================================================================

2025-10-29 13:53:38,236 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:53:38,246 - INFO     - [Handshake] Building FD command:
2025-10-29 13:53:38,246 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:38,247 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_03.pddl
2025-10-29 13:53:38,247 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:53:38,251 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:39,004 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:39,004 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:39,004 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:39,316 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:39,316 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:39,317 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:39,318 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:39,318 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:39,318 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:39,318 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:39,318 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:39,318 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:39,318 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:39,318 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:39,318 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:39,318 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:39,318 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:39,318 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:39,318 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:39,318 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:39,318 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:39,318 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:39,319 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:39,319 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:39,319 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:39,319 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:39,320 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:39,320 - INFO     - Added edge (0, 1)
2025-10-29 13:53:39,320 - INFO     - Added edge (0, 2)
2025-10-29 13:53:39,320 - INFO     - Added edge (0, 3)
2025-10-29 13:53:39,320 - INFO     - Added edge (0, 4)
2025-10-29 13:53:39,320 - INFO     - Added edge (0, 5)
2025-10-29 13:53:39,320 - INFO     - Added edge (0, 6)
2025-10-29 13:53:39,320 - INFO     - Added edge (0, 7)
2025-10-29 13:53:39,320 - INFO     - Added edge (0, 8)
2025-10-29 13:53:39,320 - INFO     - Added edge (1, 0)
2025-10-29 13:53:39,320 - INFO     - Added edge (1, 2)
2025-10-29 13:53:39,320 - INFO     - Added edge (1, 3)
2025-10-29 13:53:39,321 - INFO     - Added edge (1, 4)
2025-10-29 13:53:39,321 - INFO     - Added edge (1, 5)
2025-10-29 13:53:39,321 - INFO     - Added edge (1, 6)
2025-10-29 13:53:39,321 - INFO     - Added edge (1, 7)
2025-10-29 13:53:39,321 - INFO     - Added edge (1, 8)
2025-10-29 13:53:39,321 - INFO     - Added edge (2, 0)
2025-10-29 13:53:39,321 - INFO     - Added edge (2, 1)
2025-10-29 13:53:39,321 - INFO     - Added edge (2, 3)
2025-10-29 13:53:39,321 - INFO     - Added edge (2, 4)
2025-10-29 13:53:39,321 - INFO     - Added edge (2, 5)
2025-10-29 13:53:39,321 - INFO     - Added edge (2, 6)
2025-10-29 13:53:39,321 - INFO     - Added edge (2, 7)
2025-10-29 13:53:39,321 - INFO     - Added edge (2, 8)
2025-10-29 13:53:39,321 - INFO     - Added edge (3, 0)
2025-10-29 13:53:39,321 - INFO     - Added edge (3, 1)
2025-10-29 13:53:39,321 - INFO     - Added edge (3, 2)
2025-10-29 13:53:39,321 - INFO     - Added edge (3, 4)
2025-10-29 13:53:39,321 - INFO     - Added edge (3, 5)
2025-10-29 13:53:39,321 - INFO     - Added edge (3, 6)
2025-10-29 13:53:39,321 - INFO     - Added edge (3, 7)
2025-10-29 13:53:39,322 - INFO     - Added edge (3, 8)
2025-10-29 13:53:39,322 - INFO     - Added edge (4, 0)
2025-10-29 13:53:39,322 - INFO     - Added edge (4, 1)
2025-10-29 13:53:39,322 - INFO     - Added edge (4, 2)
2025-10-29 13:53:39,322 - INFO     - Added edge (4, 3)
2025-10-29 13:53:39,322 - INFO     - Added edge (4, 5)
2025-10-29 13:53:39,322 - INFO     - Added edge (4, 6)
2025-10-29 13:53:39,322 - INFO     - Added edge (4, 7)
2025-10-29 13:53:39,322 - INFO     - Added edge (4, 8)
2025-10-29 13:53:39,322 - INFO     - Added edge (5, 0)
2025-10-29 13:53:39,322 - INFO     - Added edge (5, 1)
2025-10-29 13:53:39,322 - INFO     - Added edge (5, 2)
2025-10-29 13:53:39,322 - INFO     - Added edge (5, 3)
2025-10-29 13:53:39,322 - INFO     - Added edge (5, 4)
2025-10-29 13:53:39,322 - INFO     - Added edge (6, 0)
2025-10-29 13:53:39,322 - INFO     - Added edge (6, 1)
2025-10-29 13:53:39,322 - INFO     - Added edge (6, 2)
2025-10-29 13:53:39,322 - INFO     - Added edge (6, 3)
2025-10-29 13:53:39,322 - INFO     - Added edge (6, 4)
2025-10-29 13:53:39,322 - INFO     - Added edge (7, 0)
2025-10-29 13:53:39,322 - INFO     - Added edge (7, 1)
2025-10-29 13:53:39,322 - INFO     - Added edge (7, 2)
2025-10-29 13:53:39,322 - INFO     - Added edge (7, 3)
2025-10-29 13:53:39,323 - INFO     - Added edge (7, 4)
2025-10-29 13:53:39,323 - INFO     - Added edge (8, 0)
2025-10-29 13:53:39,323 - INFO     - Added edge (8, 1)
2025-10-29 13:53:39,323 - INFO     - Added edge (8, 2)
2025-10-29 13:53:39,323 - INFO     - Added edge (8, 3)
2025-10-29 13:53:39,323 - INFO     - Added edge (8, 4)
2025-10-29 13:53:39,323 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:39,329 - INFO     - 
==========================================================================================
2025-10-29 13:53:39,329 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:39,329 - INFO     - ==========================================================================================
2025-10-29 13:53:39,329 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:39,329 - INFO     -   Input action: 41 (type: int)
2025-10-29 13:53:39,329 - INFO     -   Available edges in graph: 60
2025-10-29 13:53:39,329 - INFO     -   Action index calculation:
2025-10-29 13:53:39,329 - INFO     -     - action % max(num_valid_edges, 1) = 41 % 60 = 41
2025-10-29 13:53:39,329 - INFO     -     - clamped to [0, 59]: 41
2025-10-29 13:53:39,329 - INFO     -   ✓ Extracted merge pair from edge 41: (5, 1)
2025-10-29 13:53:39,329 - INFO     -   ✓ Validation passed
2025-10-29 13:53:39,329 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:39,330 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:39,330 - INFO     -     - Num nodes: 9
2025-10-29 13:53:39,330 - INFO     -     - Num edges: 60
2025-10-29 13:53:39,330 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:39,330 - INFO     -       - Node 5: 5 states
2025-10-29 13:53:39,330 - INFO     -       - Node 1: 2 states
2025-10-29 13:53:39,330 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:39,330 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:39,360 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:53:39,360 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:39,360 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:53:39,461 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:39,461 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:39,461 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:53:39,662 - INFO     -   ✓ TS file received after 0.20s
2025-10-29 13:53:39,662 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:39,662 - INFO     -   Calling graph_tracker.merge_nodes([5, 1])...
2025-10-29 13:53:39,662 - INFO     - Attempting merge of nodes 5 and 1...
2025-10-29 13:53:39,662 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:53:39,662 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:39,662 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:39,663 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:53:39,663 - INFO     - 
================================================================================
2025-10-29 13:53:39,663 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:53:39,663 - INFO     - ================================================================================
2025-10-29 13:53:39,663 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:39,663 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:53:39,663 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:53:39,663 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:39,663 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:39,663 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:39,663 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:39,663 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:39,663 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:39,663 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:39,664 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:39,664 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:39,664 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:39,664 - INFO     -   - ts1_id: 5
2025-10-29 13:53:39,664 - INFO     -   - ts2_id: 1
2025-10-29 13:53:39,664 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:39,664 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:39,665 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:39,665 - INFO     -   - Product space size: 10
2025-10-29 13:53:39,665 - INFO     -   - Using product state mapping
2025-10-29 13:53:39,665 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:39,665 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:39,665 - INFO     -   - avg_f_after:  3.7000 (10 valid states)
2025-10-29 13:53:39,665 - INFO     -   - delta: 0.9000
2025-10-29 13:53:39,665 - INFO     -   - f_stability: 1.0 - |0.9000| / 2.8000 = 0.6786
2025-10-29 13:53:39,666 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:39,666 - INFO     -   - Compared 7 values
2025-10-29 13:53:39,666 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:39,666 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:39,666 - INFO     -   - states_before: 10
2025-10-29 13:53:39,666 - INFO     -   - states_after: 10
2025-10-29 13:53:39,666 - INFO     -   - delta_states: 0
2025-10-29 13:53:39,666 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:39,666 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:39,666 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:39,666 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:39,666 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:39,666 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:39,666 - INFO     -   - search_signals present: True
2025-10-29 13:53:39,666 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:39,666 - INFO     -   - search_depth: 2
2025-10-29 13:53:39,666 - INFO     -   - solution_cost: 2
2025-10-29 13:53:39,666 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:39,667 - INFO     -   - solution_found: True
2025-10-29 13:53:39,667 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:39,667 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:39,667 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:53:39,667 - INFO     -   - TS5(5) + TS1(2) → 10 states
2025-10-29 13:53:39,667 - INFO     -   - f_stability=0.679
2025-10-29 13:53:39,667 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:39,667 - INFO     -   - solution_found=True
2025-10-29 13:53:39,667 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:39,667 - INFO     - 
  Extracted signals:
2025-10-29 13:53:39,667 - INFO     -     - iteration: 0
2025-10-29 13:53:39,668 - INFO     -     - states_before: 10
2025-10-29 13:53:39,668 - INFO     -     - states_after: 10
2025-10-29 13:53:39,668 - INFO     -     - delta_states: 0
2025-10-29 13:53:39,668 - INFO     -     - f_value_stability: 0.6786
2025-10-29 13:53:39,668 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:39,668 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:39,668 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:39,668 - INFO     -     - search_depth: 2
2025-10-29 13:53:39,668 - INFO     -     - solution_cost: 2
2025-10-29 13:53:39,668 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:39,668 - INFO     -     - solution_found: True
2025-10-29 13:53:39,668 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:39,668 - INFO     - 
  Computing reward:
2025-10-29 13:53:39,668 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:39,669 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:39,669 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:39,669 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:39,669 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:39,669 - INFO     -   [3] F-VALUE STABILITY: 0.286
2025-10-29 13:53:39,669 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:39,669 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:39,669 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:53:39,669 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:39,669 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:39,669 - INFO     -     + 0.350*0.286 (stability)
2025-10-29 13:53:39,670 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:39,670 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:39,670 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:39,670 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:39,670 - INFO     - 
  [FINAL REWARD]: 0.3244
2025-10-29 13:53:39,670 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:39,670 - INFO     -     ✓ Reward computed: 0.3244
2025-10-29 13:53:39,670 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:39,670 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:39,670 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:39,670 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:39,670 - INFO     -     - f_stability                    0.2862
2025-10-29 13:53:39,670 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:39,670 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:39,670 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:39,670 - INFO     -     - composite                      0.5622
2025-10-29 13:53:39,670 - INFO     -     - total                          0.3244
2025-10-29 13:53:39,670 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:39,671 - INFO     -   Num remaining nodes: 8
2025-10-29 13:53:39,671 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:53:39,671 - INFO     -   Done: False
2025-10-29 13:53:39,671 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:39,672 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:39,672 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:39,672 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:39,672 - INFO     -     - num_nodes: 8
2025-10-29 13:53:39,672 - INFO     -     - num_edges: 50
2025-10-29 13:53:39,672 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:39,672 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:53:39,673 - INFO     -   After: current_merge_step = 1
2025-10-29 13:53:39,673 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:39,673 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:39,673 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:39,674 - INFO     -   ✓ Step logged
2025-10-29 13:53:39,674 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:39,674 - INFO     -   Returning:
2025-10-29 13:53:39,674 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:39,674 - INFO     -     - reward: 0.3244
2025-10-29 13:53:39,674 - INFO     -     - done: False
2025-10-29 13:53:39,674 - INFO     -     - truncated: False
2025-10-29 13:53:39,674 - INFO     -     - info: 19 keys
2025-10-29 13:53:39,675 - INFO     - ==========================================================================================

2025-10-29 13:53:39,679 - INFO     - 
==========================================================================================
2025-10-29 13:53:39,679 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:39,679 - INFO     - ==========================================================================================
2025-10-29 13:53:39,679 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:39,679 - INFO     -   Input action: 31 (type: int)
2025-10-29 13:53:39,679 - INFO     -   Available edges in graph: 50
2025-10-29 13:53:39,679 - INFO     -   Action index calculation:
2025-10-29 13:53:39,679 - INFO     -     - action % max(num_valid_edges, 1) = 31 % 50 = 31
2025-10-29 13:53:39,679 - INFO     -     - clamped to [0, 49]: 31
2025-10-29 13:53:39,679 - INFO     -   ✓ Extracted merge pair from edge 31: (6, 4)
2025-10-29 13:53:39,679 - INFO     -   ✓ Validation passed
2025-10-29 13:53:39,679 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:39,679 - INFO     -     - Total states before merge: 33
2025-10-29 13:53:39,680 - INFO     -     - Num nodes: 8
2025-10-29 13:53:39,680 - INFO     -     - Num edges: 50
2025-10-29 13:53:39,680 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:39,680 - INFO     -       - Node 6: 5 states
2025-10-29 13:53:39,680 - INFO     -       - Node 4: 2 states
2025-10-29 13:53:39,680 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:39,680 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:39,689 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:53:39,689 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:39,689 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:53:39,791 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:39,791 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:39,791 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:53:39,791 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:39,791 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:39,791 - INFO     -   Calling graph_tracker.merge_nodes([6, 4])...
2025-10-29 13:53:39,792 - INFO     - Attempting merge of nodes 6 and 4...
2025-10-29 13:53:39,792 - INFO     - Successfully merged nodes into new node 10 with 10 states.
2025-10-29 13:53:39,792 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:39,792 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:39,792 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:53:39,792 - INFO     - 
================================================================================
2025-10-29 13:53:39,792 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:53:39,792 - INFO     - ================================================================================
2025-10-29 13:53:39,792 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:39,792 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:53:39,792 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:53:39,793 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:39,793 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:39,793 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:39,793 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:39,793 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:39,793 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:39,793 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:39,793 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:39,793 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:39,793 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:39,793 - INFO     -   - ts1_id: 6
2025-10-29 13:53:39,794 - INFO     -   - ts2_id: 4
2025-10-29 13:53:39,794 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:39,794 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:39,794 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:39,794 - INFO     -   - Product space size: 10
2025-10-29 13:53:39,794 - INFO     -   - Using product state mapping
2025-10-29 13:53:39,794 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:39,794 - INFO     -   - avg_f_before: 2.9000 (10 valid states)
2025-10-29 13:53:39,794 - INFO     -   - avg_f_after:  3.6000 (10 valid states)
2025-10-29 13:53:39,794 - INFO     -   - delta: 0.7000
2025-10-29 13:53:39,794 - INFO     -   - f_stability: 1.0 - |0.7000| / 2.9000 = 0.7586
2025-10-29 13:53:39,795 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:39,795 - INFO     -   - Compared 7 values
2025-10-29 13:53:39,795 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:39,795 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:39,795 - INFO     -   - states_before: 10
2025-10-29 13:53:39,795 - INFO     -   - states_after: 10
2025-10-29 13:53:39,795 - INFO     -   - delta_states: 0
2025-10-29 13:53:39,795 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:39,795 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:39,795 - INFO     -   - ts2_transitions: 3
2025-10-29 13:53:39,795 - INFO     -   - merged_transitions: 27
2025-10-29 13:53:39,796 - INFO     -   - transition_density_change: 1.1000
2025-10-29 13:53:39,796 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:39,796 - INFO     -   - search_signals present: True
2025-10-29 13:53:39,796 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:39,796 - INFO     -   - search_depth: 2
2025-10-29 13:53:39,796 - INFO     -   - solution_cost: 0
2025-10-29 13:53:39,796 - INFO     -   - branching_factor: 2.7000
2025-10-29 13:53:39,796 - INFO     -   - solution_found: True
2025-10-29 13:53:39,796 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:39,796 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:39,796 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:53:39,797 - INFO     -   - TS6(5) + TS4(2) → 10 states
2025-10-29 13:53:39,797 - INFO     -   - f_stability=0.759
2025-10-29 13:53:39,797 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:39,797 - INFO     -   - solution_found=True
2025-10-29 13:53:39,797 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:39,797 - INFO     - 
  Extracted signals:
2025-10-29 13:53:39,797 - INFO     -     - iteration: 1
2025-10-29 13:53:39,797 - INFO     -     - states_before: 10
2025-10-29 13:53:39,797 - INFO     -     - states_after: 10
2025-10-29 13:53:39,797 - INFO     -     - delta_states: 0
2025-10-29 13:53:39,797 - INFO     -     - f_value_stability: 0.7586
2025-10-29 13:53:39,797 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:39,797 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:39,797 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:39,797 - INFO     -     - search_depth: 2
2025-10-29 13:53:39,797 - INFO     -     - solution_cost: 0
2025-10-29 13:53:39,797 - INFO     -     - branching_factor: 2.7000
2025-10-29 13:53:39,797 - INFO     -     - solution_found: True
2025-10-29 13:53:39,797 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:39,797 - INFO     - 
  Computing reward:
2025-10-29 13:53:39,797 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:39,798 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:39,798 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:39,798 - INFO     -   [1] BRANCHING FACTOR: 2.700 → score 0.745 (good (in comfort zone))
2025-10-29 13:53:39,798 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:39,798 - INFO     -   [3] F-VALUE STABILITY: 0.251
2025-10-29 13:53:39,798 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:39,798 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:39,798 - INFO     - 
  [COMPOSITE]: 0.603
2025-10-29 13:53:39,798 - INFO     -     = 0.300*0.745 (bf)
2025-10-29 13:53:39,799 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:39,799 - INFO     -     + 0.350*0.251 (stability)
2025-10-29 13:53:39,799 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:39,799 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:39,799 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:39,799 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:39,799 - INFO     - 
  [FINAL REWARD]: 0.4066
2025-10-29 13:53:39,799 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:39,799 - INFO     -     ✓ Reward computed: 0.4066
2025-10-29 13:53:39,799 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:39,799 - INFO     -     - bf_score                       0.7450
2025-10-29 13:53:39,799 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:39,799 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:39,799 - INFO     -     - f_stability                    0.2507
2025-10-29 13:53:39,799 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:39,800 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:39,800 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:39,800 - INFO     -     - composite                      0.6033
2025-10-29 13:53:39,800 - INFO     -     - total                          0.4066
2025-10-29 13:53:39,800 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:39,800 - INFO     -   Num remaining nodes: 7
2025-10-29 13:53:39,800 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:53:39,800 - INFO     -   Done: False
2025-10-29 13:53:39,800 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:39,801 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:39,802 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:39,802 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:39,802 - INFO     -     - num_nodes: 7
2025-10-29 13:53:39,802 - INFO     -     - num_edges: 40
2025-10-29 13:53:39,802 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:39,802 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:53:39,802 - INFO     -   After: current_merge_step = 2
2025-10-29 13:53:39,802 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:39,802 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:39,803 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:39,803 - INFO     -   ✓ Step logged
2025-10-29 13:53:39,804 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:39,804 - INFO     -   Returning:
2025-10-29 13:53:39,804 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:39,804 - INFO     -     - reward: 0.4066
2025-10-29 13:53:39,804 - INFO     -     - done: False
2025-10-29 13:53:39,804 - INFO     -     - truncated: False
2025-10-29 13:53:39,804 - INFO     -     - info: 19 keys
2025-10-29 13:53:39,804 - INFO     - ==========================================================================================

2025-10-29 13:53:39,809 - INFO     - 
==========================================================================================
2025-10-29 13:53:39,809 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:39,810 - INFO     - ==========================================================================================
2025-10-29 13:53:39,810 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:39,810 - INFO     -   Input action: 7 (type: int)
2025-10-29 13:53:39,810 - INFO     -   Available edges in graph: 40
2025-10-29 13:53:39,810 - INFO     -   Action index calculation:
2025-10-29 13:53:39,810 - INFO     -     - action % max(num_valid_edges, 1) = 7 % 40 = 7
2025-10-29 13:53:39,810 - INFO     -     - clamped to [0, 39]: 7
2025-10-29 13:53:39,810 - INFO     -   ✓ Extracted merge pair from edge 7: (2, 3)
2025-10-29 13:53:39,810 - INFO     -   ✓ Validation passed
2025-10-29 13:53:39,810 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:39,811 - INFO     -     - Total states before merge: 36
2025-10-29 13:53:39,811 - INFO     -     - Num nodes: 7
2025-10-29 13:53:39,811 - INFO     -     - Num edges: 40
2025-10-29 13:53:39,811 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:39,811 - INFO     -       - Node 2: 2 states
2025-10-29 13:53:39,811 - INFO     -       - Node 3: 2 states
2025-10-29 13:53:39,811 - INFO     -       - Expected product: 4 states
2025-10-29 13:53:39,811 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:39,819 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:53:39,819 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:39,819 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:53:39,920 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:39,920 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:39,920 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:53:39,921 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:39,921 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:39,921 - INFO     -   Calling graph_tracker.merge_nodes([2, 3])...
2025-10-29 13:53:39,921 - INFO     - Attempting merge of nodes 2 and 3...
2025-10-29 13:53:39,921 - INFO     - Successfully merged nodes into new node 11 with 4 states.
2025-10-29 13:53:39,921 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:39,921 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:39,921 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:53:39,921 - INFO     - 
================================================================================
2025-10-29 13:53:39,921 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:53:39,921 - INFO     - ================================================================================
2025-10-29 13:53:39,921 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:39,921 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:53:39,922 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:53:39,922 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:39,922 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:39,922 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:39,922 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:39,922 - INFO     -   - Raw f_after length: 4
2025-10-29 13:53:39,922 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:39,922 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:39,922 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:39,922 - INFO     -   - after_valid: 4 / 4 (removed 0)
2025-10-29 13:53:39,922 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:39,922 - INFO     -   - ts1_id: 2
2025-10-29 13:53:39,922 - INFO     -   - ts2_id: 3
2025-10-29 13:53:39,923 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:39,923 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:39,923 - INFO     -   - ts1_size: 2, ts2_size: 2
2025-10-29 13:53:39,923 - INFO     -   - Product space size: 4
2025-10-29 13:53:39,923 - INFO     -   - Using product state mapping
2025-10-29 13:53:39,923 - INFO     -   - f_before_product length: 4
2025-10-29 13:53:39,923 - INFO     -   - avg_f_before: 0.7500 (4 valid states)
2025-10-29 13:53:39,923 - INFO     -   - avg_f_after:  1.0000 (4 valid states)
2025-10-29 13:53:39,923 - INFO     -   - delta: 0.2500
2025-10-29 13:53:39,923 - INFO     -   - f_stability: 1.0 - |0.2500| / 0.7500 = 0.6667
2025-10-29 13:53:39,923 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:39,923 - INFO     -   - Compared 4 values
2025-10-29 13:53:39,923 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:39,923 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:39,923 - INFO     -   - states_before: 4
2025-10-29 13:53:39,924 - INFO     -   - states_after: 4
2025-10-29 13:53:39,924 - INFO     -   - delta_states: 0
2025-10-29 13:53:39,924 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:39,924 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:39,924 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:39,924 - INFO     -   - merged_transitions: 20
2025-10-29 13:53:39,924 - INFO     -   - transition_density_change: 2.5000
2025-10-29 13:53:39,924 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:39,924 - INFO     -   - search_signals present: True
2025-10-29 13:53:39,924 - INFO     -   - nodes_expanded: 4
2025-10-29 13:53:39,924 - INFO     -   - search_depth: 0
2025-10-29 13:53:39,924 - INFO     -   - solution_cost: 0
2025-10-29 13:53:39,924 - INFO     -   - branching_factor: 5.0000
2025-10-29 13:53:39,924 - INFO     -   - solution_found: True
2025-10-29 13:53:39,924 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:39,924 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:39,925 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:53:39,925 - INFO     -   - TS2(2) + TS3(2) → 4 states
2025-10-29 13:53:39,925 - INFO     -   - f_stability=0.667
2025-10-29 13:53:39,925 - INFO     -   - A* nodes_expanded=4
2025-10-29 13:53:39,925 - INFO     -   - solution_found=True
2025-10-29 13:53:39,925 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:39,925 - INFO     - 
  Extracted signals:
2025-10-29 13:53:39,925 - INFO     -     - iteration: 2
2025-10-29 13:53:39,925 - INFO     -     - states_before: 4
2025-10-29 13:53:39,925 - INFO     -     - states_after: 4
2025-10-29 13:53:39,925 - INFO     -     - delta_states: 0
2025-10-29 13:53:39,925 - INFO     -     - f_value_stability: 0.6667
2025-10-29 13:53:39,925 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:39,925 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:39,925 - INFO     -     - nodes_expanded: 4
2025-10-29 13:53:39,925 - INFO     -     - search_depth: 0
2025-10-29 13:53:39,925 - INFO     -     - solution_cost: 0
2025-10-29 13:53:39,925 - INFO     -     - branching_factor: 5.0000
2025-10-29 13:53:39,925 - INFO     -     - solution_found: True
2025-10-29 13:53:39,926 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:39,926 - INFO     - 
  Computing reward:
2025-10-29 13:53:39,926 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:39,926 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:39,926 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:39,926 - INFO     -   [1] BRANCHING FACTOR: 5.000 → score 0.433 (tolerable)
2025-10-29 13:53:39,926 - INFO     -   [2] SOLUTION QUALITY: depth=0 → score 0.500 + bonus 0.300
2025-10-29 13:53:39,926 - INFO     -   [3] F-VALUE STABILITY: 0.176
2025-10-29 13:53:39,926 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:39,926 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:39,926 - INFO     - 
  [COMPOSITE]: 0.412
2025-10-29 13:53:39,926 - INFO     -     = 0.300*0.433 (bf)
2025-10-29 13:53:39,926 - INFO     -     + 0.200*0.500 (depth)
2025-10-29 13:53:39,927 - INFO     -     + 0.350*0.176 (stability)
2025-10-29 13:53:39,927 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:39,927 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:39,927 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:39,927 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:39,927 - INFO     - 
  [FINAL REWARD]: 0.0230
2025-10-29 13:53:39,927 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:39,927 - INFO     -     ✓ Reward computed: 0.0230
2025-10-29 13:53:39,927 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:39,927 - INFO     -     - bf_score                       0.4333
2025-10-29 13:53:39,927 - INFO     -     - depth_score                    0.5000
2025-10-29 13:53:39,927 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:39,927 - INFO     -     - f_stability                    0.1757
2025-10-29 13:53:39,927 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:39,927 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:39,927 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:39,927 - INFO     -     - composite                      0.4115
2025-10-29 13:53:39,928 - INFO     -     - total                          0.0230
2025-10-29 13:53:39,928 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:39,928 - INFO     -   Num remaining nodes: 6
2025-10-29 13:53:39,928 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:53:39,928 - INFO     -   Done: False
2025-10-29 13:53:39,928 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:39,929 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:39,929 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:39,929 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:39,929 - INFO     -     - num_nodes: 6
2025-10-29 13:53:39,929 - INFO     -     - num_edges: 28
2025-10-29 13:53:39,929 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:39,929 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:53:39,929 - INFO     -   After: current_merge_step = 3
2025-10-29 13:53:39,929 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:39,929 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:39,929 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:39,932 - INFO     -   ✓ Step logged
2025-10-29 13:53:39,932 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:39,932 - INFO     -   Returning:
2025-10-29 13:53:39,933 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:39,933 - INFO     -     - reward: 0.0230
2025-10-29 13:53:39,933 - INFO     -     - done: False
2025-10-29 13:53:39,933 - INFO     -     - truncated: False
2025-10-29 13:53:39,933 - INFO     -     - info: 19 keys
2025-10-29 13:53:39,933 - INFO     - ==========================================================================================

2025-10-29 13:53:39,937 - INFO     - 
==========================================================================================
2025-10-29 13:53:39,937 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:39,937 - INFO     - ==========================================================================================
2025-10-29 13:53:39,937 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:39,937 - INFO     -   Input action: 13 (type: int)
2025-10-29 13:53:39,937 - INFO     -   Available edges in graph: 28
2025-10-29 13:53:39,937 - INFO     -   Action index calculation:
2025-10-29 13:53:39,937 - INFO     -     - action % max(num_valid_edges, 1) = 13 % 28 = 13
2025-10-29 13:53:39,938 - INFO     -     - clamped to [0, 27]: 13
2025-10-29 13:53:39,938 - INFO     -   ✓ Extracted merge pair from edge 13: (9, 0)
2025-10-29 13:53:39,938 - INFO     -   ✓ Validation passed
2025-10-29 13:53:39,938 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:39,938 - INFO     -     - Total states before merge: 36
2025-10-29 13:53:39,938 - INFO     -     - Num nodes: 6
2025-10-29 13:53:39,938 - INFO     -     - Num edges: 28
2025-10-29 13:53:39,938 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:39,938 - INFO     -       - Node 9: 10 states
2025-10-29 13:53:39,938 - INFO     -       - Node 0: 2 states
2025-10-29 13:53:39,938 - INFO     -       - Expected product: 20 states
2025-10-29 13:53:39,938 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:39,943 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:53:39,944 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:39,944 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:53:40,045 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:40,045 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:40,045 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:53:40,046 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:40,046 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:40,046 - INFO     -   Calling graph_tracker.merge_nodes([9, 0])...
2025-10-29 13:53:40,046 - INFO     - Attempting merge of nodes 9 and 0...
2025-10-29 13:53:40,046 - INFO     - Successfully merged nodes into new node 12 with 20 states.
2025-10-29 13:53:40,046 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:40,047 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:40,047 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:53:40,047 - INFO     - 
================================================================================
2025-10-29 13:53:40,047 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:53:40,047 - INFO     - ================================================================================
2025-10-29 13:53:40,047 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:40,047 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:53:40,047 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:53:40,047 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:40,047 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:40,047 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:53:40,047 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:40,047 - INFO     -   - Raw f_after length: 20
2025-10-29 13:53:40,047 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:40,047 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:53:40,047 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:40,047 - INFO     -   - after_valid: 20 / 20 (removed 0)
2025-10-29 13:53:40,047 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:40,047 - INFO     -   - ts1_id: 9
2025-10-29 13:53:40,048 - INFO     -   - ts2_id: 0
2025-10-29 13:53:40,048 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:40,048 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:40,048 - INFO     -   - ts1_size: 10, ts2_size: 2
2025-10-29 13:53:40,048 - INFO     -   - Product space size: 20
2025-10-29 13:53:40,048 - INFO     -   - Using product state mapping
2025-10-29 13:53:40,048 - INFO     -   - f_before_product length: 20
2025-10-29 13:53:40,048 - INFO     -   - avg_f_before: 3.7000 (20 valid states)
2025-10-29 13:53:40,048 - INFO     -   - avg_f_after:  4.4000 (20 valid states)
2025-10-29 13:53:40,048 - INFO     -   - delta: 0.7000
2025-10-29 13:53:40,048 - INFO     -   - f_stability: 1.0 - |0.7000| / 3.7000 = 0.8108
2025-10-29 13:53:40,048 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:40,049 - INFO     -   - Compared 12 values
2025-10-29 13:53:40,049 - INFO     -   - Significant changes (> 5.0): 2
2025-10-29 13:53:40,049 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:40,049 - INFO     -   - states_before: 20
2025-10-29 13:53:40,049 - INFO     -   - states_after: 20
2025-10-29 13:53:40,049 - INFO     -   - delta_states: 0
2025-10-29 13:53:40,049 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:40,049 - INFO     -   - ts1_transitions: 40
2025-10-29 13:53:40,049 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:40,049 - INFO     -   - merged_transitions: 122
2025-10-29 13:53:40,049 - INFO     -   - transition_density_change: 3.8500
2025-10-29 13:53:40,049 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:40,049 - INFO     -   - search_signals present: True
2025-10-29 13:53:40,049 - INFO     -   - nodes_expanded: 20
2025-10-29 13:53:40,049 - INFO     -   - search_depth: 2
2025-10-29 13:53:40,049 - INFO     -   - solution_cost: 2
2025-10-29 13:53:40,049 - INFO     -   - branching_factor: 6.1000
2025-10-29 13:53:40,049 - INFO     -   - solution_found: True
2025-10-29 13:53:40,049 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:40,051 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:40,051 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:53:40,051 - INFO     -   - TS9(10) + TS0(2) → 20 states
2025-10-29 13:53:40,051 - INFO     -   - f_stability=0.811
2025-10-29 13:53:40,051 - INFO     -   - A* nodes_expanded=20
2025-10-29 13:53:40,051 - INFO     -   - solution_found=True
2025-10-29 13:53:40,051 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:40,051 - INFO     - 
  Extracted signals:
2025-10-29 13:53:40,051 - INFO     -     - iteration: 3
2025-10-29 13:53:40,051 - INFO     -     - states_before: 20
2025-10-29 13:53:40,051 - INFO     -     - states_after: 20
2025-10-29 13:53:40,051 - INFO     -     - delta_states: 0
2025-10-29 13:53:40,051 - INFO     -     - f_value_stability: 0.8108
2025-10-29 13:53:40,051 - INFO     -     - num_significant_f_changes: 2
2025-10-29 13:53:40,051 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:40,052 - INFO     -     - nodes_expanded: 20
2025-10-29 13:53:40,052 - INFO     -     - search_depth: 2
2025-10-29 13:53:40,052 - INFO     -     - solution_cost: 2
2025-10-29 13:53:40,052 - INFO     -     - branching_factor: 6.1000
2025-10-29 13:53:40,052 - INFO     -     - solution_found: True
2025-10-29 13:53:40,052 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:40,052 - INFO     - 
  Computing reward:
2025-10-29 13:53:40,052 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:40,052 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:40,052 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:40,052 - INFO     -   [1] BRANCHING FACTOR: 6.100 → score 0.290 (high BF, minimal credit)
2025-10-29 13:53:40,052 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:40,053 - INFO     -   [3] F-VALUE STABILITY: 0.895
2025-10-29 13:53:40,053 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:40,053 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:40,053 - INFO     - 
  [COMPOSITE]: 0.692
2025-10-29 13:53:40,053 - INFO     -     = 0.300*0.290 (bf)
2025-10-29 13:53:40,053 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:40,053 - INFO     -     + 0.350*0.895 (stability)
2025-10-29 13:53:40,053 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:40,053 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:40,053 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:40,053 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:40,053 - INFO     - 
  [FINAL REWARD]: 0.8848
2025-10-29 13:53:40,053 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:40,053 - INFO     -     ✓ Reward computed: 0.8848
2025-10-29 13:53:40,054 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:40,054 - INFO     -     - bf_score                       0.2900
2025-10-29 13:53:40,054 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:40,054 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:40,054 - INFO     -     - f_stability                    0.8952
2025-10-29 13:53:40,054 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:40,054 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:40,054 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:40,054 - INFO     -     - composite                      0.6924
2025-10-29 13:53:40,054 - INFO     -     - total                          0.8848
2025-10-29 13:53:40,054 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:40,054 - INFO     -   Num remaining nodes: 5
2025-10-29 13:53:40,054 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:53:40,054 - INFO     -   Done: False
2025-10-29 13:53:40,054 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:40,055 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:40,055 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:40,055 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:40,055 - INFO     -     - num_nodes: 5
2025-10-29 13:53:40,055 - INFO     -     - num_edges: 18
2025-10-29 13:53:40,056 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:40,056 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:53:40,056 - INFO     -   After: current_merge_step = 4
2025-10-29 13:53:40,056 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:40,056 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:40,056 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:40,056 - INFO     -   ✓ Step logged
2025-10-29 13:53:40,056 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:40,057 - INFO     -   Returning:
2025-10-29 13:53:40,057 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:40,057 - INFO     -     - reward: 0.8848
2025-10-29 13:53:40,057 - INFO     -     - done: False
2025-10-29 13:53:40,057 - INFO     -     - truncated: False
2025-10-29 13:53:40,057 - INFO     -     - info: 19 keys
2025-10-29 13:53:40,057 - INFO     - ==========================================================================================

2025-10-29 13:53:40,061 - INFO     - 
==========================================================================================
2025-10-29 13:53:40,061 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:40,061 - INFO     - ==========================================================================================
2025-10-29 13:53:40,061 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:40,061 - INFO     -   Input action: 7 (type: int)
2025-10-29 13:53:40,061 - INFO     -   Available edges in graph: 18
2025-10-29 13:53:40,061 - INFO     -   Action index calculation:
2025-10-29 13:53:40,061 - INFO     -     - action % max(num_valid_edges, 1) = 7 % 18 = 7
2025-10-29 13:53:40,062 - INFO     -     - clamped to [0, 17]: 7
2025-10-29 13:53:40,062 - INFO     -   ✓ Extracted merge pair from edge 7: (10, 8)
2025-10-29 13:53:40,062 - INFO     -   ✓ Validation passed
2025-10-29 13:53:40,062 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:40,062 - INFO     -     - Total states before merge: 44
2025-10-29 13:53:40,062 - INFO     -     - Num nodes: 5
2025-10-29 13:53:40,062 - INFO     -     - Num edges: 18
2025-10-29 13:53:40,062 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:40,062 - INFO     -       - Node 10: 10 states
2025-10-29 13:53:40,062 - INFO     -       - Node 8: 5 states
2025-10-29 13:53:40,062 - INFO     -       - Expected product: 50 states
2025-10-29 13:53:40,062 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:40,069 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:53:40,069 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:40,069 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:53:40,170 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:40,170 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:40,170 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:53:40,171 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:40,171 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:40,171 - INFO     -   Calling graph_tracker.merge_nodes([10, 8])...
2025-10-29 13:53:40,171 - INFO     - Attempting merge of nodes 10 and 8...
2025-10-29 13:53:40,171 - INFO     - Successfully merged nodes into new node 13 with 50 states.
2025-10-29 13:53:40,172 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:40,172 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:40,172 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:53:40,172 - INFO     - 
================================================================================
2025-10-29 13:53:40,172 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:53:40,172 - INFO     - ================================================================================
2025-10-29 13:53:40,172 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:40,172 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:53:40,172 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:53:40,172 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:40,172 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:40,172 - INFO     -   - Raw ts1_f length: 10
2025-10-29 13:53:40,172 - INFO     -   - Raw ts2_f length: 5
2025-10-29 13:53:40,174 - INFO     -   - Raw f_after length: 50
2025-10-29 13:53:40,174 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:40,174 - INFO     -   - ts1_valid: 10 / 10 (removed 0)
2025-10-29 13:53:40,174 - INFO     -   - ts2_valid: 5 / 5 (removed -5)
2025-10-29 13:53:40,174 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:53:40,174 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:40,174 - INFO     -   - ts1_id: 10
2025-10-29 13:53:40,174 - INFO     -   - ts2_id: 8
2025-10-29 13:53:40,174 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:40,174 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:40,174 - INFO     -   - ts1_size: 10, ts2_size: 5
2025-10-29 13:53:40,174 - INFO     -   - Product space size: 50
2025-10-29 13:53:40,174 - INFO     -   - Using product state mapping
2025-10-29 13:53:40,175 - INFO     -   - f_before_product length: 50
2025-10-29 13:53:40,175 - INFO     -   - avg_f_before: 4.2600 (50 valid states)
2025-10-29 13:53:40,175 - INFO     -   - avg_f_after:  6.4400 (50 valid states)
2025-10-29 13:53:40,175 - INFO     -   - delta: 2.1800
2025-10-29 13:53:40,175 - INFO     -   - f_stability: 1.0 - |2.1800| / 4.2600 = 0.4883
2025-10-29 13:53:40,175 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:40,176 - INFO     -   - Compared 15 values
2025-10-29 13:53:40,176 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:40,176 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:40,176 - INFO     -   - states_before: 50
2025-10-29 13:53:40,176 - INFO     -   - states_after: 50
2025-10-29 13:53:40,176 - INFO     -   - delta_states: 0
2025-10-29 13:53:40,176 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:40,176 - INFO     -   - ts1_transitions: 27
2025-10-29 13:53:40,176 - INFO     -   - ts2_transitions: 13
2025-10-29 13:53:40,176 - INFO     -   - merged_transitions: 195
2025-10-29 13:53:40,176 - INFO     -   - transition_density_change: 3.1000
2025-10-29 13:53:40,176 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:40,176 - INFO     -   - search_signals present: True
2025-10-29 13:53:40,176 - INFO     -   - nodes_expanded: 50
2025-10-29 13:53:40,176 - INFO     -   - search_depth: 3
2025-10-29 13:53:40,177 - INFO     -   - solution_cost: 0
2025-10-29 13:53:40,177 - INFO     -   - branching_factor: 3.9000
2025-10-29 13:53:40,177 - INFO     -   - solution_found: True
2025-10-29 13:53:40,177 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:40,177 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:40,177 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:53:40,177 - INFO     -   - TS10(10) + TS8(5) → 50 states
2025-10-29 13:53:40,177 - INFO     -   - f_stability=0.488
2025-10-29 13:53:40,177 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:53:40,177 - INFO     -   - solution_found=True
2025-10-29 13:53:40,178 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:40,178 - INFO     - 
  Extracted signals:
2025-10-29 13:53:40,178 - INFO     -     - iteration: 4
2025-10-29 13:53:40,178 - INFO     -     - states_before: 50
2025-10-29 13:53:40,178 - INFO     -     - states_after: 50
2025-10-29 13:53:40,178 - INFO     -     - delta_states: 0
2025-10-29 13:53:40,178 - INFO     -     - f_value_stability: 0.4883
2025-10-29 13:53:40,178 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:40,178 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:40,178 - INFO     -     - nodes_expanded: 50
2025-10-29 13:53:40,178 - INFO     -     - search_depth: 3
2025-10-29 13:53:40,178 - INFO     -     - solution_cost: 0
2025-10-29 13:53:40,178 - INFO     -     - branching_factor: 3.9000
2025-10-29 13:53:40,178 - INFO     -     - solution_found: True
2025-10-29 13:53:40,178 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:40,179 - INFO     - 
  Computing reward:
2025-10-29 13:53:40,179 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:40,179 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:40,179 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:40,179 - INFO     -   [1] BRANCHING FACTOR: 3.900 → score 0.580 (tolerable)
2025-10-29 13:53:40,179 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:40,179 - INFO     -   [3] F-VALUE STABILITY: 0.560
2025-10-29 13:53:40,179 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:40,179 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:40,179 - INFO     - 
  [COMPOSITE]: 0.655
2025-10-29 13:53:40,179 - INFO     -     = 0.300*0.580 (bf)
2025-10-29 13:53:40,179 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:40,179 - INFO     -     + 0.350*0.560 (stability)
2025-10-29 13:53:40,179 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:40,179 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:40,179 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:40,181 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:40,181 - INFO     - 
  [FINAL REWARD]: 0.7092
2025-10-29 13:53:40,181 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:40,181 - INFO     -     ✓ Reward computed: 0.7092
2025-10-29 13:53:40,181 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:40,181 - INFO     -     - bf_score                       0.5800
2025-10-29 13:53:40,181 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:40,181 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:40,181 - INFO     -     - f_stability                    0.5596
2025-10-29 13:53:40,181 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:40,181 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:40,181 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:40,181 - INFO     -     - composite                      0.6546
2025-10-29 13:53:40,181 - INFO     -     - total                          0.7092
2025-10-29 13:53:40,181 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:40,181 - INFO     -   Num remaining nodes: 4
2025-10-29 13:53:40,181 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:53:40,181 - INFO     -   Done: False
2025-10-29 13:53:40,181 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:40,182 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:40,182 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:40,182 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:40,183 - INFO     -     - num_nodes: 4
2025-10-29 13:53:40,183 - INFO     -     - num_edges: 12
2025-10-29 13:53:40,183 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:40,183 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:53:40,183 - INFO     -   After: current_merge_step = 5
2025-10-29 13:53:40,183 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:40,183 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:40,183 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:40,184 - INFO     -   ✓ Step logged
2025-10-29 13:53:40,184 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:40,184 - INFO     -   Returning:
2025-10-29 13:53:40,184 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:40,184 - INFO     -     - reward: 0.7092
2025-10-29 13:53:40,184 - INFO     -     - done: False
2025-10-29 13:53:40,184 - INFO     -     - truncated: False
2025-10-29 13:53:40,184 - INFO     -     - info: 19 keys
2025-10-29 13:53:40,184 - INFO     - ==========================================================================================

2025-10-29 13:53:40,189 - INFO     - 
==========================================================================================
2025-10-29 13:53:40,189 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:40,189 - INFO     - ==========================================================================================
2025-10-29 13:53:40,189 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:40,189 - INFO     -   Input action: 4 (type: int)
2025-10-29 13:53:40,189 - INFO     -   Available edges in graph: 12
2025-10-29 13:53:40,189 - INFO     -   Action index calculation:
2025-10-29 13:53:40,189 - INFO     -     - action % max(num_valid_edges, 1) = 4 % 12 = 4
2025-10-29 13:53:40,189 - INFO     -     - clamped to [0, 11]: 4
2025-10-29 13:53:40,189 - INFO     -   ✓ Extracted merge pair from edge 4: (11, 12)
2025-10-29 13:53:40,189 - INFO     -   ✓ Validation passed
2025-10-29 13:53:40,189 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:40,189 - INFO     -     - Total states before merge: 79
2025-10-29 13:53:40,189 - INFO     -     - Num nodes: 4
2025-10-29 13:53:40,190 - INFO     -     - Num edges: 12
2025-10-29 13:53:40,190 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:40,190 - INFO     -       - Node 11: 4 states
2025-10-29 13:53:40,190 - INFO     -       - Node 12: 20 states
2025-10-29 13:53:40,190 - INFO     -       - Expected product: 80 states
2025-10-29 13:53:40,190 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:40,194 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:53:40,194 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:40,194 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:53:40,296 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:40,296 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:40,296 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:53:40,298 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:40,298 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:40,298 - INFO     -   Calling graph_tracker.merge_nodes([11, 12])...
2025-10-29 13:53:40,298 - INFO     - Attempting merge of nodes 11 and 12...
2025-10-29 13:53:40,298 - INFO     - Successfully merged nodes into new node 14 with 80 states.
2025-10-29 13:53:40,298 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:40,298 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:40,298 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:53:40,298 - INFO     - 
================================================================================
2025-10-29 13:53:40,298 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:53:40,298 - INFO     - ================================================================================
2025-10-29 13:53:40,299 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:40,299 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:53:40,299 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:53:40,299 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:40,299 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:40,300 - INFO     -   - Raw ts1_f length: 4
2025-10-29 13:53:40,300 - INFO     -   - Raw ts2_f length: 20
2025-10-29 13:53:40,300 - INFO     -   - Raw f_after length: 80
2025-10-29 13:53:40,300 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:40,300 - INFO     -   - ts1_valid: 4 / 4 (removed 0)
2025-10-29 13:53:40,300 - INFO     -   - ts2_valid: 20 / 20 (removed -20)
2025-10-29 13:53:40,300 - INFO     -   - after_valid: 80 / 80 (removed 0)
2025-10-29 13:53:40,300 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:40,300 - INFO     -   - ts1_id: 11
2025-10-29 13:53:40,300 - INFO     -   - ts2_id: 12
2025-10-29 13:53:40,300 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:40,301 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:40,301 - INFO     -   - ts1_size: 4, ts2_size: 20
2025-10-29 13:53:40,301 - INFO     -   - Product space size: 80
2025-10-29 13:53:40,301 - INFO     -   - Using product state mapping
2025-10-29 13:53:40,301 - INFO     -   - f_before_product length: 80
2025-10-29 13:53:40,302 - INFO     -   - avg_f_before: 4.4000 (80 valid states)
2025-10-29 13:53:40,302 - INFO     -   - avg_f_after:  5.2375 (80 valid states)
2025-10-29 13:53:40,302 - INFO     -   - delta: 0.8375
2025-10-29 13:53:40,302 - INFO     -   - f_stability: 1.0 - |0.8375| / 4.4000 = 0.8097
2025-10-29 13:53:40,302 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:40,302 - INFO     -   - Compared 24 values
2025-10-29 13:53:40,302 - INFO     -   - Significant changes (> 5.0): 0
2025-10-29 13:53:40,302 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:40,302 - INFO     -   - states_before: 80
2025-10-29 13:53:40,302 - INFO     -   - states_after: 80
2025-10-29 13:53:40,302 - INFO     -   - delta_states: 0
2025-10-29 13:53:40,302 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:40,303 - INFO     -   - ts1_transitions: 20
2025-10-29 13:53:40,303 - INFO     -   - ts2_transitions: 122
2025-10-29 13:53:40,303 - INFO     -   - merged_transitions: 912
2025-10-29 13:53:40,303 - INFO     -   - transition_density_change: 9.6250
2025-10-29 13:53:40,303 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:40,303 - INFO     -   - search_signals present: True
2025-10-29 13:53:40,303 - INFO     -   - nodes_expanded: 80
2025-10-29 13:53:40,303 - INFO     -   - search_depth: 2
2025-10-29 13:53:40,303 - INFO     -   - solution_cost: 2
2025-10-29 13:53:40,303 - INFO     -   - branching_factor: 11.4000
2025-10-29 13:53:40,303 - INFO     -   - solution_found: True
2025-10-29 13:53:40,303 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:40,304 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:40,304 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:53:40,304 - INFO     -   - TS11(4) + TS12(20) → 80 states
2025-10-29 13:53:40,304 - INFO     -   - f_stability=0.810
2025-10-29 13:53:40,304 - INFO     -   - A* nodes_expanded=80
2025-10-29 13:53:40,304 - INFO     -   - solution_found=True
2025-10-29 13:53:40,304 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:40,304 - INFO     - 
  Extracted signals:
2025-10-29 13:53:40,305 - INFO     -     - iteration: 5
2025-10-29 13:53:40,305 - INFO     -     - states_before: 80
2025-10-29 13:53:40,305 - INFO     -     - states_after: 80
2025-10-29 13:53:40,305 - INFO     -     - delta_states: 0
2025-10-29 13:53:40,305 - INFO     -     - f_value_stability: 0.8097
2025-10-29 13:53:40,305 - INFO     -     - num_significant_f_changes: 0
2025-10-29 13:53:40,305 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:40,305 - INFO     -     - nodes_expanded: 80
2025-10-29 13:53:40,305 - INFO     -     - search_depth: 2
2025-10-29 13:53:40,305 - INFO     -     - solution_cost: 2
2025-10-29 13:53:40,306 - INFO     -     - branching_factor: 11.4000
2025-10-29 13:53:40,306 - INFO     -     - solution_found: True
2025-10-29 13:53:40,306 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:40,306 - WARNING  -     ⚠️  High branching factor: 11.4000
2025-10-29 13:53:40,306 - INFO     - 
  Computing reward:
2025-10-29 13:53:40,306 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:40,306 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:40,306 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:40,306 - INFO     -   [1] BRANCHING FACTOR: 11.400 → score 0.100 (high BF, minimal credit)
2025-10-29 13:53:40,306 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:40,307 - INFO     -   [3] F-VALUE STABILITY: 0.798
2025-10-29 13:53:40,307 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:40,307 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:40,307 - INFO     - 
  [COMPOSITE]: 0.601
2025-10-29 13:53:40,307 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:53:40,308 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:40,308 - INFO     -     + 0.350*0.798 (stability)
2025-10-29 13:53:40,308 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:40,308 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:40,308 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:40,308 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:40,308 - INFO     - 
  [FINAL REWARD]: 0.7026
2025-10-29 13:53:40,308 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:40,308 - INFO     -     ✓ Reward computed: 0.7026
2025-10-29 13:53:40,308 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:40,308 - INFO     -     - bf_score                       0.1000
2025-10-29 13:53:40,308 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:40,309 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:40,309 - INFO     -     - f_stability                    0.7979
2025-10-29 13:53:40,309 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:40,309 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:40,309 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:40,309 - INFO     -     - composite                      0.6013
2025-10-29 13:53:40,309 - INFO     -     - total                          0.7026
2025-10-29 13:53:40,309 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:40,310 - INFO     -   Num remaining nodes: 3
2025-10-29 13:53:40,310 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:53:40,310 - INFO     -   Done: False
2025-10-29 13:53:40,310 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:40,310 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:40,310 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:40,310 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:40,310 - INFO     -     - num_nodes: 3
2025-10-29 13:53:40,310 - INFO     -     - num_edges: 6
2025-10-29 13:53:40,311 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:40,311 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:53:40,311 - INFO     -   After: current_merge_step = 6
2025-10-29 13:53:40,311 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:40,311 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:40,311 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:40,311 - INFO     -   ✓ Step logged
2025-10-29 13:53:40,311 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:40,311 - INFO     -   Returning:
2025-10-29 13:53:40,311 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:40,311 - INFO     -     - reward: 0.7026
2025-10-29 13:53:40,311 - INFO     -     - done: False
2025-10-29 13:53:40,311 - INFO     -     - truncated: False
2025-10-29 13:53:40,311 - INFO     -     - info: 19 keys
2025-10-29 13:53:40,311 - INFO     - ==========================================================================================

2025-10-29 13:53:40,316 - INFO     - 
==========================================================================================
2025-10-29 13:53:40,316 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:40,316 - INFO     - ==========================================================================================
2025-10-29 13:53:40,316 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:40,316 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:53:40,316 - INFO     -   Available edges in graph: 6
2025-10-29 13:53:40,316 - INFO     -   Action index calculation:
2025-10-29 13:53:40,316 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 6 = 3
2025-10-29 13:53:40,316 - INFO     -     - clamped to [0, 5]: 3
2025-10-29 13:53:40,316 - INFO     -   ✓ Extracted merge pair from edge 3: (13, 14)
2025-10-29 13:53:40,317 - INFO     -   ✓ Validation passed
2025-10-29 13:53:40,317 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:40,317 - INFO     -     - Total states before merge: 135
2025-10-29 13:53:40,317 - INFO     -     - Num nodes: 3
2025-10-29 13:53:40,317 - INFO     -     - Num edges: 6
2025-10-29 13:53:40,317 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:40,317 - INFO     -       - Node 13: 50 states
2025-10-29 13:53:40,317 - INFO     -       - Node 14: 80 states
2025-10-29 13:53:40,317 - INFO     -       - Expected product: 4000 states
2025-10-29 13:53:40,317 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:40,324 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:53:40,324 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:40,324 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:53:40,425 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:40,425 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:40,425 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:53:40,651 - INFO     -   ✓ TS file received after 0.23s
2025-10-29 13:53:40,651 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:40,651 - INFO     -   Calling graph_tracker.merge_nodes([13, 14])...
2025-10-29 13:53:40,651 - INFO     - Attempting merge of nodes 13 and 14...
2025-10-29 13:53:40,651 - INFO     - Successfully merged nodes into new node 15 with 4000 states.
2025-10-29 13:53:40,651 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:40,651 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:40,651 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:53:40,652 - INFO     - 
================================================================================
2025-10-29 13:53:40,652 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:53:40,652 - INFO     - ================================================================================
2025-10-29 13:53:40,652 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:40,652 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:53:40,652 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:53:40,658 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:40,659 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:40,659 - INFO     -   - Raw ts1_f length: 50
2025-10-29 13:53:40,659 - INFO     -   - Raw ts2_f length: 80
2025-10-29 13:53:40,659 - INFO     -   - Raw f_after length: 4000
2025-10-29 13:53:40,659 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:40,659 - INFO     -   - ts1_valid: 50 / 50 (removed 0)
2025-10-29 13:53:40,659 - INFO     -   - ts2_valid: 80 / 80 (removed -80)
2025-10-29 13:53:40,660 - INFO     -   - after_valid: 2984 / 4000 (removed 1016)
2025-10-29 13:53:40,660 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:40,660 - INFO     -   - ts1_id: 13
2025-10-29 13:53:40,661 - INFO     -   - ts2_id: 14
2025-10-29 13:53:40,661 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:40,661 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:40,661 - INFO     -   - ts1_size: 50, ts2_size: 80
2025-10-29 13:53:40,661 - INFO     -   - Product space size: 4000
2025-10-29 13:53:40,661 - INFO     -   - Using product state mapping
2025-10-29 13:53:40,669 - INFO     -   - f_before_product length: 4000
2025-10-29 13:53:40,682 - INFO     -   - avg_f_before: 7.2108 (4000 valid states)
2025-10-29 13:53:40,682 - INFO     -   - avg_f_after:  13.0416 (2984 valid states)
2025-10-29 13:53:40,682 - INFO     -   - delta: 5.8308
2025-10-29 13:53:40,682 - INFO     -   - f_stability: 1.0 - |5.8308| / 7.2108 = 0.1914
2025-10-29 13:53:40,682 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:40,682 - INFO     -   - Compared 130 values
2025-10-29 13:53:40,682 - INFO     -   - Significant changes (> 5.0): 98
2025-10-29 13:53:40,683 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:40,683 - INFO     -   - states_before: 4000
2025-10-29 13:53:40,683 - INFO     -   - states_after: 4000
2025-10-29 13:53:40,683 - INFO     -   - delta_states: 0
2025-10-29 13:53:40,683 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:40,683 - INFO     -   - ts1_transitions: 195
2025-10-29 13:53:40,683 - INFO     -   - ts2_transitions: 912
2025-10-29 13:53:40,683 - INFO     -   - merged_transitions: 22400
2025-10-29 13:53:40,683 - INFO     -   - transition_density_change: 5.3232
2025-10-29 13:53:40,683 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:40,683 - INFO     -   - search_signals present: True
2025-10-29 13:53:40,683 - INFO     -   - nodes_expanded: 2984
2025-10-29 13:53:40,683 - INFO     -   - search_depth: 6
2025-10-29 13:53:40,683 - INFO     -   - solution_cost: 2
2025-10-29 13:53:40,685 - INFO     -   - branching_factor: 7.5067
2025-10-29 13:53:40,685 - INFO     -   - solution_found: True
2025-10-29 13:53:40,685 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:40,688 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:40,688 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:53:40,688 - INFO     -   - TS13(50) + TS14(80) → 4000 states
2025-10-29 13:53:40,689 - INFO     -   - f_stability=0.191
2025-10-29 13:53:40,689 - INFO     -   - A* nodes_expanded=2984
2025-10-29 13:53:40,689 - INFO     -   - solution_found=True
2025-10-29 13:53:40,690 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:40,690 - INFO     - 
  Extracted signals:
2025-10-29 13:53:40,690 - INFO     -     - iteration: 6
2025-10-29 13:53:40,690 - INFO     -     - states_before: 4000
2025-10-29 13:53:40,690 - INFO     -     - states_after: 4000
2025-10-29 13:53:40,690 - INFO     -     - delta_states: 0
2025-10-29 13:53:40,690 - INFO     -     - f_value_stability: 0.1914
2025-10-29 13:53:40,690 - INFO     -     - num_significant_f_changes: 98
2025-10-29 13:53:40,691 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:40,691 - INFO     -     - nodes_expanded: 2984
2025-10-29 13:53:40,691 - INFO     -     - search_depth: 6
2025-10-29 13:53:40,691 - INFO     -     - solution_cost: 2
2025-10-29 13:53:40,691 - INFO     -     - branching_factor: 7.5067
2025-10-29 13:53:40,691 - INFO     -     - solution_found: True
2025-10-29 13:53:40,691 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:40,691 - WARNING  -     ⚠️  Poor F-stability: 0.1914
2025-10-29 13:53:40,693 - INFO     - 
  Computing reward:
2025-10-29 13:53:40,693 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:40,693 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:40,693 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:40,693 - INFO     -   [1] BRANCHING FACTOR: 7.507 → score 0.149 (high BF, minimal credit)
2025-10-29 13:53:40,693 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:40,695 - INFO     -   [3] F-VALUE STABILITY: 0.139
2025-10-29 13:53:40,695 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:40,696 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:40,696 - INFO     - 
  [COMPOSITE]: 0.364
2025-10-29 13:53:40,696 - INFO     -     = 0.300*0.149 (bf)
2025-10-29 13:53:40,696 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:40,696 - INFO     -     + 0.350*0.139 (stability)
2025-10-29 13:53:40,696 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:40,696 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:40,697 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:40,697 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:40,698 - INFO     - 
  [FINAL REWARD]: -0.0719
2025-10-29 13:53:40,698 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:40,698 - INFO     -     ✓ Reward computed: -0.0719
2025-10-29 13:53:40,698 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:40,698 - INFO     -     - bf_score                       0.1493
2025-10-29 13:53:40,698 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:40,699 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:40,699 - INFO     -     - f_stability                    0.1393
2025-10-29 13:53:40,699 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:40,699 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:40,699 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:40,699 - INFO     -     - composite                      0.3641
2025-10-29 13:53:40,699 - INFO     -     - total                          -0.0719
2025-10-29 13:53:40,700 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:40,700 - INFO     -   Num remaining nodes: 2
2025-10-29 13:53:40,700 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:53:40,700 - INFO     -   Done: False
2025-10-29 13:53:40,700 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:40,701 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:40,701 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:40,701 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:40,701 - INFO     -     - num_nodes: 2
2025-10-29 13:53:40,701 - INFO     -     - num_edges: 2
2025-10-29 13:53:40,701 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:40,701 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:53:40,701 - INFO     -   After: current_merge_step = 7
2025-10-29 13:53:40,702 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:40,702 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:40,702 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:40,703 - INFO     -   ✓ Step logged
2025-10-29 13:53:40,703 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:40,704 - INFO     -   Returning:
2025-10-29 13:53:40,704 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:40,704 - INFO     -     - reward: -0.0719
2025-10-29 13:53:40,704 - INFO     -     - done: False
2025-10-29 13:53:40,704 - INFO     -     - truncated: False
2025-10-29 13:53:40,704 - INFO     -     - info: 19 keys
2025-10-29 13:53:40,704 - INFO     - ==========================================================================================

2025-10-29 13:53:40,713 - INFO     - 
==========================================================================================
2025-10-29 13:53:40,713 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:40,713 - INFO     - ==========================================================================================
2025-10-29 13:53:40,713 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:40,713 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:53:40,713 - INFO     -   Available edges in graph: 2
2025-10-29 13:53:40,713 - INFO     -   Action index calculation:
2025-10-29 13:53:40,713 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:53:40,713 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:53:40,713 - INFO     -   ✓ Extracted merge pair from edge 0: (7, 15)
2025-10-29 13:53:40,713 - INFO     -   ✓ Validation passed
2025-10-29 13:53:40,714 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:40,714 - INFO     -     - Total states before merge: 4005
2025-10-29 13:53:40,714 - INFO     -     - Num nodes: 2
2025-10-29 13:53:40,714 - INFO     -     - Num edges: 2
2025-10-29 13:53:40,714 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:40,714 - INFO     -       - Node 7: 5 states
2025-10-29 13:53:40,714 - INFO     -       - Node 15: 4000 states
2025-10-29 13:53:40,714 - INFO     -       - Expected product: 20000 states
2025-10-29 13:53:40,714 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:40,719 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:53:40,719 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:40,719 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:53:40,821 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:40,821 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:40,821 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:53:41,084 - INFO     -   ✓ TS file received after 0.26s
2025-10-29 13:53:41,084 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:41,084 - INFO     -   Calling graph_tracker.merge_nodes([7, 15])...
2025-10-29 13:53:41,084 - INFO     - Attempting merge of nodes 7 and 15...
2025-10-29 13:53:41,084 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:53:41,085 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:41,085 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:41,085 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:53:41,085 - INFO     - 
================================================================================
2025-10-29 13:53:41,085 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:53:41,085 - INFO     - ================================================================================
2025-10-29 13:53:41,086 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:41,086 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:53:41,086 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:53:41,093 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:41,093 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:41,093 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:41,093 - INFO     -   - Raw ts2_f length: 791
2025-10-29 13:53:41,093 - INFO     -   - Raw f_after length: 3955
2025-10-29 13:53:41,093 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:41,093 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:41,094 - INFO     -   - ts2_valid: 791 / 791 (removed -791)
2025-10-29 13:53:41,096 - INFO     -   - after_valid: 3030 / 3955 (removed 925)
2025-10-29 13:53:41,097 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:41,097 - INFO     -   - ts1_id: 7
2025-10-29 13:53:41,097 - INFO     -   - ts2_id: 15
2025-10-29 13:53:41,097 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:41,097 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:41,097 - INFO     -   - ts1_size: 5, ts2_size: 791
2025-10-29 13:53:41,097 - INFO     -   - Product space size: 3955
2025-10-29 13:53:41,097 - INFO     -   - Using product state mapping
2025-10-29 13:53:41,105 - INFO     -   - f_before_product length: 3955
2025-10-29 13:53:41,114 - INFO     -   - avg_f_before: 9.3740 (3955 valid states)
2025-10-29 13:53:41,114 - INFO     -   - avg_f_after:  14.0122 (3030 valid states)
2025-10-29 13:53:41,114 - INFO     -   - delta: 4.6383
2025-10-29 13:53:41,114 - INFO     -   - f_stability: 1.0 - |4.6383| / 9.3740 = 0.5052
2025-10-29 13:53:41,114 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:41,114 - INFO     -   - Compared 796 values
2025-10-29 13:53:41,114 - INFO     -   - Significant changes (> 5.0): 304
2025-10-29 13:53:41,114 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:41,114 - INFO     -   - states_before: 3955
2025-10-29 13:53:41,114 - INFO     -   - states_after: 3955
2025-10-29 13:53:41,114 - INFO     -   - delta_states: 0
2025-10-29 13:53:41,115 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:41,115 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:41,115 - INFO     -   - ts2_transitions: 7520
2025-10-29 13:53:41,115 - INFO     -   - merged_transitions: 21984
2025-10-29 13:53:41,115 - INFO     -   - transition_density_change: 3.6539
2025-10-29 13:53:41,115 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:41,115 - INFO     -   - search_signals present: True
2025-10-29 13:53:41,115 - INFO     -   - nodes_expanded: 3030
2025-10-29 13:53:41,115 - INFO     -   - search_depth: 7
2025-10-29 13:53:41,115 - INFO     -   - solution_cost: 4
2025-10-29 13:53:41,115 - INFO     -   - branching_factor: 7.2554
2025-10-29 13:53:41,115 - INFO     -   - solution_found: True
2025-10-29 13:53:41,115 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:41,117 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:41,117 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:53:41,117 - INFO     -   - TS7(5) + TS15(791) → 3955 states
2025-10-29 13:53:41,117 - INFO     -   - f_stability=0.505
2025-10-29 13:53:41,117 - INFO     -   - A* nodes_expanded=3030
2025-10-29 13:53:41,117 - INFO     -   - solution_found=True
2025-10-29 13:53:41,117 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:41,117 - INFO     - 
  Extracted signals:
2025-10-29 13:53:41,117 - INFO     -     - iteration: 7
2025-10-29 13:53:41,117 - INFO     -     - states_before: 3955
2025-10-29 13:53:41,117 - INFO     -     - states_after: 3955
2025-10-29 13:53:41,117 - INFO     -     - delta_states: 0
2025-10-29 13:53:41,117 - INFO     -     - f_value_stability: 0.5052
2025-10-29 13:53:41,117 - INFO     -     - num_significant_f_changes: 304
2025-10-29 13:53:41,117 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:41,117 - INFO     -     - nodes_expanded: 3030
2025-10-29 13:53:41,117 - INFO     -     - search_depth: 7
2025-10-29 13:53:41,118 - INFO     -     - solution_cost: 4
2025-10-29 13:53:41,118 - INFO     -     - branching_factor: 7.2554
2025-10-29 13:53:41,118 - INFO     -     - solution_found: True
2025-10-29 13:53:41,118 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:41,118 - INFO     - 
  Computing reward:
2025-10-29 13:53:41,118 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:41,118 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:41,119 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:41,119 - INFO     -   [1] BRANCHING FACTOR: 7.255 → score 0.174 (high BF, minimal credit)
2025-10-29 13:53:41,119 - INFO     -   [2] SOLUTION QUALITY: depth=7 → score 0.736 + bonus 0.300
2025-10-29 13:53:41,120 - INFO     -   [3] F-VALUE STABILITY: 0.628
2025-10-29 13:53:41,120 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:41,120 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:41,120 - INFO     - 
  [COMPOSITE]: 0.539
2025-10-29 13:53:41,120 - INFO     -     = 0.300*0.174 (bf)
2025-10-29 13:53:41,120 - INFO     -     + 0.200*0.736 (depth)
2025-10-29 13:53:41,120 - INFO     -     + 0.350*0.628 (stability)
2025-10-29 13:53:41,120 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:41,120 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:41,121 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:41,121 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:41,121 - INFO     - 
  [FINAL REWARD]: 0.4782
2025-10-29 13:53:41,121 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:41,121 - INFO     -     ✓ Reward computed: 0.4782
2025-10-29 13:53:41,121 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:41,121 - INFO     -     - bf_score                       0.1745
2025-10-29 13:53:41,121 - INFO     -     - depth_score                    0.7356
2025-10-29 13:53:41,122 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:41,122 - INFO     -     - f_stability                    0.6275
2025-10-29 13:53:41,122 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:41,122 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:41,122 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:41,122 - INFO     -     - composite                      0.5391
2025-10-29 13:53:41,122 - INFO     -     - total                          0.4782
2025-10-29 13:53:41,122 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:41,122 - INFO     -   Num remaining nodes: 1
2025-10-29 13:53:41,122 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:53:41,122 - INFO     -   Done: True
2025-10-29 13:53:41,122 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:53:41,122 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:41,122 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:41,122 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:41,122 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:41,123 - INFO     -     - num_nodes: 1
2025-10-29 13:53:41,123 - INFO     -     - num_edges: 0
2025-10-29 13:53:41,123 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:41,123 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:53:41,123 - INFO     -   After: current_merge_step = 8
2025-10-29 13:53:41,123 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:41,123 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:41,123 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:41,123 - INFO     -   ✓ Step logged
2025-10-29 13:53:41,123 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:41,123 - INFO     -   Returning:
2025-10-29 13:53:41,124 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:41,124 - INFO     -     - reward: 0.4782
2025-10-29 13:53:41,124 - INFO     -     - done: True
2025-10-29 13:53:41,124 - INFO     -     - truncated: False
2025-10-29 13:53:41,124 - INFO     -     - info: 19 keys
2025-10-29 13:53:41,124 - INFO     - ==========================================================================================

2025-10-29 13:53:41,207 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:53:41,213 - INFO     - [Handshake] Building FD command:
2025-10-29 13:53:41,213 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:41,213 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_03.pddl
2025-10-29 13:53:41,213 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:53:41,215 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:41,818 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:41,818 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:41,818 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:42,132 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:42,132 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:42,132 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:42,133 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:42,134 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:42,134 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:42,134 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:42,134 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:42,134 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:42,134 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:42,134 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:42,134 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:42,134 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:42,135 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:42,135 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:42,135 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:42,135 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:42,135 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:42,135 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:42,135 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:42,135 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:42,135 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:42,135 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:42,138 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:42,138 - INFO     - Added edge (0, 1)
2025-10-29 13:53:42,138 - INFO     - Added edge (0, 2)
2025-10-29 13:53:42,138 - INFO     - Added edge (0, 3)
2025-10-29 13:53:42,138 - INFO     - Added edge (0, 4)
2025-10-29 13:53:42,138 - INFO     - Added edge (0, 5)
2025-10-29 13:53:42,138 - INFO     - Added edge (0, 6)
2025-10-29 13:53:42,138 - INFO     - Added edge (0, 7)
2025-10-29 13:53:42,138 - INFO     - Added edge (0, 8)
2025-10-29 13:53:42,139 - INFO     - Added edge (1, 0)
2025-10-29 13:53:42,139 - INFO     - Added edge (1, 2)
2025-10-29 13:53:42,139 - INFO     - Added edge (1, 3)
2025-10-29 13:53:42,139 - INFO     - Added edge (1, 4)
2025-10-29 13:53:42,139 - INFO     - Added edge (1, 5)
2025-10-29 13:53:42,139 - INFO     - Added edge (1, 6)
2025-10-29 13:53:42,139 - INFO     - Added edge (1, 7)
2025-10-29 13:53:42,139 - INFO     - Added edge (1, 8)
2025-10-29 13:53:42,139 - INFO     - Added edge (2, 0)
2025-10-29 13:53:42,139 - INFO     - Added edge (2, 1)
2025-10-29 13:53:42,140 - INFO     - Added edge (2, 3)
2025-10-29 13:53:42,140 - INFO     - Added edge (2, 4)
2025-10-29 13:53:42,140 - INFO     - Added edge (2, 5)
2025-10-29 13:53:42,140 - INFO     - Added edge (2, 6)
2025-10-29 13:53:42,140 - INFO     - Added edge (2, 7)
2025-10-29 13:53:42,140 - INFO     - Added edge (2, 8)
2025-10-29 13:53:42,140 - INFO     - Added edge (3, 0)
2025-10-29 13:53:42,140 - INFO     - Added edge (3, 1)
2025-10-29 13:53:42,140 - INFO     - Added edge (3, 2)
2025-10-29 13:53:42,140 - INFO     - Added edge (3, 4)
2025-10-29 13:53:42,140 - INFO     - Added edge (3, 5)
2025-10-29 13:53:42,140 - INFO     - Added edge (3, 6)
2025-10-29 13:53:42,141 - INFO     - Added edge (3, 7)
2025-10-29 13:53:42,141 - INFO     - Added edge (3, 8)
2025-10-29 13:53:42,141 - INFO     - Added edge (4, 0)
2025-10-29 13:53:42,141 - INFO     - Added edge (4, 1)
2025-10-29 13:53:42,141 - INFO     - Added edge (4, 2)
2025-10-29 13:53:42,141 - INFO     - Added edge (4, 3)
2025-10-29 13:53:42,141 - INFO     - Added edge (4, 5)
2025-10-29 13:53:42,141 - INFO     - Added edge (4, 6)
2025-10-29 13:53:42,141 - INFO     - Added edge (4, 7)
2025-10-29 13:53:42,141 - INFO     - Added edge (4, 8)
2025-10-29 13:53:42,141 - INFO     - Added edge (5, 0)
2025-10-29 13:53:42,142 - INFO     - Added edge (5, 1)
2025-10-29 13:53:42,142 - INFO     - Added edge (5, 2)
2025-10-29 13:53:42,142 - INFO     - Added edge (5, 3)
2025-10-29 13:53:42,142 - INFO     - Added edge (5, 4)
2025-10-29 13:53:42,142 - INFO     - Added edge (6, 0)
2025-10-29 13:53:42,142 - INFO     - Added edge (6, 1)
2025-10-29 13:53:42,142 - INFO     - Added edge (6, 2)
2025-10-29 13:53:42,142 - INFO     - Added edge (6, 3)
2025-10-29 13:53:42,142 - INFO     - Added edge (6, 4)
2025-10-29 13:53:42,142 - INFO     - Added edge (7, 0)
2025-10-29 13:53:42,142 - INFO     - Added edge (7, 1)
2025-10-29 13:53:42,143 - INFO     - Added edge (7, 2)
2025-10-29 13:53:42,143 - INFO     - Added edge (7, 3)
2025-10-29 13:53:42,143 - INFO     - Added edge (7, 4)
2025-10-29 13:53:42,143 - INFO     - Added edge (8, 0)
2025-10-29 13:53:42,143 - INFO     - Added edge (8, 1)
2025-10-29 13:53:42,143 - INFO     - Added edge (8, 2)
2025-10-29 13:53:42,143 - INFO     - Added edge (8, 3)
2025-10-29 13:53:42,143 - INFO     - Added edge (8, 4)
2025-10-29 13:53:42,143 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:46,194 - INFO     -     ✓ Training complete (total: 12 steps)
2025-10-29 13:53:46,266 - INFO     - 
✅ Model saved: overfit_experiment_results\gnn_model_trained.zip
2025-10-29 13:53:46,266 - INFO     - 
✅ Training complete (2.9m)
2025-10-29 13:53:46,267 - INFO     - 
--------------------------------------------------------------------------------
2025-10-29 13:53:46,267 - INFO     - >>> PHASE 4: EVALUATION ON TRAINING SET
2025-10-29 13:53:46,267 - INFO     - --------------------------------------------------------------------------------

2025-10-29 13:53:46,693 - INFO     - Model loaded: overfit_experiment_results\gnn_model_trained.zip
2025-10-29 13:53:46,693 - INFO     -   [1/5] problem_small_00.pddl
2025-10-29 13:53:46,693 - INFO     - Environment initialized with:
2025-10-29 13:53:46,693 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:46,693 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_00.pddl
2025-10-29 13:53:46,693 - INFO     -   FD base: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward
2025-10-29 13:53:46,693 - INFO     -   max_states: 4000
2025-10-29 13:53:46,693 - INFO     -   threshold_before_merge: 1
2025-10-29 13:53:46,694 - INFO     - ✓ Initialized reward function: astar_search
2025-10-29 13:53:46,694 - INFO     - ✓ RewardInfoExtractor initialized (output_dir: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output)
2025-10-29 13:53:46,694 - INFO     - ✓ Initialized reward info extractor
2025-10-29 13:53:46,699 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:53:46,703 - WARNING  - ⚠️ Could not delete C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\output.sas: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\eliez\\Desktop\\Studies\\Fall 2025\\0960208 - AI Autonomous\\_AI_Proj_Technion\\downward\\output.sas'
2025-10-29 13:53:46,704 - INFO     - [Handshake] Building FD command:
2025-10-29 13:53:46,704 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:46,704 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_00.pddl
2025-10-29 13:53:46,704 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:53:46,707 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:46,858 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:46,858 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:47,260 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:47,576 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:47,576 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:47,577 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:47,578 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:47,578 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:47,578 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:47,578 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:47,578 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:47,578 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:47,578 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:47,578 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:47,578 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:47,578 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:47,578 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:47,578 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:47,578 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:47,578 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:47,578 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:47,578 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:47,580 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:47,580 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:47,580 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:47,580 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:47,582 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:47,582 - INFO     - Added edge (0, 1)
2025-10-29 13:53:47,582 - INFO     - Added edge (0, 2)
2025-10-29 13:53:47,582 - INFO     - Added edge (0, 3)
2025-10-29 13:53:47,582 - INFO     - Added edge (0, 4)
2025-10-29 13:53:47,582 - INFO     - Added edge (0, 5)
2025-10-29 13:53:47,582 - INFO     - Added edge (0, 6)
2025-10-29 13:53:47,582 - INFO     - Added edge (0, 7)
2025-10-29 13:53:47,582 - INFO     - Added edge (0, 8)
2025-10-29 13:53:47,582 - INFO     - Added edge (1, 0)
2025-10-29 13:53:47,582 - INFO     - Added edge (1, 2)
2025-10-29 13:53:47,582 - INFO     - Added edge (1, 3)
2025-10-29 13:53:47,583 - INFO     - Added edge (1, 4)
2025-10-29 13:53:47,583 - INFO     - Added edge (1, 5)
2025-10-29 13:53:47,583 - INFO     - Added edge (1, 6)
2025-10-29 13:53:47,583 - INFO     - Added edge (1, 7)
2025-10-29 13:53:47,583 - INFO     - Added edge (1, 8)
2025-10-29 13:53:47,583 - INFO     - Added edge (2, 0)
2025-10-29 13:53:47,583 - INFO     - Added edge (2, 1)
2025-10-29 13:53:47,583 - INFO     - Added edge (2, 3)
2025-10-29 13:53:47,583 - INFO     - Added edge (2, 4)
2025-10-29 13:53:47,583 - INFO     - Added edge (2, 5)
2025-10-29 13:53:47,583 - INFO     - Added edge (2, 6)
2025-10-29 13:53:47,583 - INFO     - Added edge (2, 7)
2025-10-29 13:53:47,583 - INFO     - Added edge (2, 8)
2025-10-29 13:53:47,583 - INFO     - Added edge (3, 0)
2025-10-29 13:53:47,583 - INFO     - Added edge (3, 1)
2025-10-29 13:53:47,583 - INFO     - Added edge (3, 2)
2025-10-29 13:53:47,583 - INFO     - Added edge (3, 4)
2025-10-29 13:53:47,583 - INFO     - Added edge (3, 5)
2025-10-29 13:53:47,583 - INFO     - Added edge (3, 6)
2025-10-29 13:53:47,583 - INFO     - Added edge (3, 7)
2025-10-29 13:53:47,583 - INFO     - Added edge (3, 8)
2025-10-29 13:53:47,583 - INFO     - Added edge (4, 0)
2025-10-29 13:53:47,585 - INFO     - Added edge (4, 1)
2025-10-29 13:53:47,585 - INFO     - Added edge (4, 2)
2025-10-29 13:53:47,585 - INFO     - Added edge (4, 3)
2025-10-29 13:53:47,585 - INFO     - Added edge (4, 5)
2025-10-29 13:53:47,585 - INFO     - Added edge (4, 6)
2025-10-29 13:53:47,585 - INFO     - Added edge (4, 7)
2025-10-29 13:53:47,585 - INFO     - Added edge (4, 8)
2025-10-29 13:53:47,585 - INFO     - Added edge (5, 0)
2025-10-29 13:53:47,585 - INFO     - Added edge (5, 1)
2025-10-29 13:53:47,585 - INFO     - Added edge (5, 2)
2025-10-29 13:53:47,585 - INFO     - Added edge (5, 3)
2025-10-29 13:53:47,585 - INFO     - Added edge (5, 4)
2025-10-29 13:53:47,585 - INFO     - Added edge (6, 0)
2025-10-29 13:53:47,585 - INFO     - Added edge (6, 1)
2025-10-29 13:53:47,585 - INFO     - Added edge (6, 2)
2025-10-29 13:53:47,586 - INFO     - Added edge (6, 3)
2025-10-29 13:53:47,586 - INFO     - Added edge (6, 4)
2025-10-29 13:53:47,586 - INFO     - Added edge (7, 0)
2025-10-29 13:53:47,586 - INFO     - Added edge (7, 1)
2025-10-29 13:53:47,586 - INFO     - Added edge (7, 2)
2025-10-29 13:53:47,586 - INFO     - Added edge (7, 3)
2025-10-29 13:53:47,586 - INFO     - Added edge (7, 4)
2025-10-29 13:53:47,586 - INFO     - Added edge (8, 0)
2025-10-29 13:53:47,586 - INFO     - Added edge (8, 1)
2025-10-29 13:53:47,586 - INFO     - Added edge (8, 2)
2025-10-29 13:53:47,586 - INFO     - Added edge (8, 3)
2025-10-29 13:53:47,587 - INFO     - Added edge (8, 4)
2025-10-29 13:53:47,587 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:47,629 - INFO     - 
==========================================================================================
2025-10-29 13:53:47,629 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:47,629 - INFO     - ==========================================================================================
2025-10-29 13:53:47,629 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:47,630 - INFO     -   Input action: 41 (type: int)
2025-10-29 13:53:47,630 - INFO     -   Available edges in graph: 60
2025-10-29 13:53:47,630 - INFO     -   Action index calculation:
2025-10-29 13:53:47,630 - INFO     -     - action % max(num_valid_edges, 1) = 41 % 60 = 41
2025-10-29 13:53:47,630 - INFO     -     - clamped to [0, 59]: 41
2025-10-29 13:53:47,630 - INFO     -   ✓ Extracted merge pair from edge 41: (5, 1)
2025-10-29 13:53:47,630 - INFO     -   ✓ Validation passed
2025-10-29 13:53:47,630 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:47,630 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:47,630 - INFO     -     - Num nodes: 9
2025-10-29 13:53:47,630 - INFO     -     - Num edges: 60
2025-10-29 13:53:47,630 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:47,630 - INFO     -       - Node 5: 5 states
2025-10-29 13:53:47,630 - INFO     -       - Node 1: 2 states
2025-10-29 13:53:47,630 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:47,630 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:47,635 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:53:47,635 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:47,636 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:53:47,737 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:47,737 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:47,737 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:53:47,738 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:47,738 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:47,738 - INFO     -   Calling graph_tracker.merge_nodes([5, 1])...
2025-10-29 13:53:47,738 - INFO     - Attempting merge of nodes 5 and 1...
2025-10-29 13:53:47,738 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:53:47,738 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:47,738 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:47,738 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:53:47,738 - INFO     - 
================================================================================
2025-10-29 13:53:47,738 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:53:47,738 - INFO     - ================================================================================
2025-10-29 13:53:47,738 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:47,738 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:53:47,739 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:53:47,739 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:47,739 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:47,739 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:47,739 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:47,739 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:47,739 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:47,739 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:47,739 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:47,739 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:47,739 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:47,739 - INFO     -   - ts1_id: 5
2025-10-29 13:53:47,739 - INFO     -   - ts2_id: 1
2025-10-29 13:53:47,739 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:47,739 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:47,739 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:47,739 - INFO     -   - Product space size: 10
2025-10-29 13:53:47,739 - INFO     -   - Using product state mapping
2025-10-29 13:53:47,739 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:47,740 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:47,740 - INFO     -   - avg_f_after:  3.7000 (10 valid states)
2025-10-29 13:53:47,740 - INFO     -   - delta: 0.9000
2025-10-29 13:53:47,740 - INFO     -   - f_stability: 1.0 - |0.9000| / 2.8000 = 0.6786
2025-10-29 13:53:47,740 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:47,741 - INFO     -   - Compared 7 values
2025-10-29 13:53:47,741 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:47,741 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:47,741 - INFO     -   - states_before: 10
2025-10-29 13:53:47,741 - INFO     -   - states_after: 10
2025-10-29 13:53:47,741 - INFO     -   - delta_states: 0
2025-10-29 13:53:47,741 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:47,741 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:47,741 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:47,741 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:47,741 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:47,741 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:47,741 - INFO     -   - search_signals present: True
2025-10-29 13:53:47,741 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:47,741 - INFO     -   - search_depth: 2
2025-10-29 13:53:47,741 - INFO     -   - solution_cost: 2
2025-10-29 13:53:47,742 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:47,742 - INFO     -   - solution_found: True
2025-10-29 13:53:47,742 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:47,742 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:47,742 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:53:47,742 - INFO     -   - TS5(5) + TS1(2) → 10 states
2025-10-29 13:53:47,742 - INFO     -   - f_stability=0.679
2025-10-29 13:53:47,742 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:47,742 - INFO     -   - solution_found=True
2025-10-29 13:53:47,742 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:47,742 - INFO     - 
  Extracted signals:
2025-10-29 13:53:47,742 - INFO     -     - iteration: 0
2025-10-29 13:53:47,742 - INFO     -     - states_before: 10
2025-10-29 13:53:47,743 - INFO     -     - states_after: 10
2025-10-29 13:53:47,743 - INFO     -     - delta_states: 0
2025-10-29 13:53:47,743 - INFO     -     - f_value_stability: 0.6786
2025-10-29 13:53:47,743 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:47,743 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:47,743 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:47,743 - INFO     -     - search_depth: 2
2025-10-29 13:53:47,743 - INFO     -     - solution_cost: 2
2025-10-29 13:53:47,743 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:47,743 - INFO     -     - solution_found: True
2025-10-29 13:53:47,743 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:47,743 - INFO     - 
  Computing reward:
2025-10-29 13:53:47,743 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:47,743 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:47,743 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:47,743 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:47,743 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:47,744 - INFO     -   [3] F-VALUE STABILITY: 0.286
2025-10-29 13:53:47,744 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:47,744 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:47,744 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:53:47,744 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:47,744 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:47,744 - INFO     -     + 0.350*0.286 (stability)
2025-10-29 13:53:47,744 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:47,744 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:47,744 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:47,744 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:47,744 - INFO     - 
  [FINAL REWARD]: 0.3244
2025-10-29 13:53:47,744 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:47,745 - INFO     -     ✓ Reward computed: 0.3244
2025-10-29 13:53:47,745 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:47,745 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:47,745 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:47,745 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:47,745 - INFO     -     - f_stability                    0.2862
2025-10-29 13:53:47,745 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:47,745 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:47,745 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:47,745 - INFO     -     - composite                      0.5622
2025-10-29 13:53:47,745 - INFO     -     - total                          0.3244
2025-10-29 13:53:47,745 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:47,745 - INFO     -   Num remaining nodes: 8
2025-10-29 13:53:47,745 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:53:47,745 - INFO     -   Done: False
2025-10-29 13:53:47,746 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:47,747 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:47,747 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:47,747 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:47,747 - INFO     -     - num_nodes: 8
2025-10-29 13:53:47,747 - INFO     -     - num_edges: 50
2025-10-29 13:53:47,747 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:47,747 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:53:47,747 - INFO     -   After: current_merge_step = 1
2025-10-29 13:53:47,747 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:47,747 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:47,748 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:47,748 - INFO     -   ✓ Step logged
2025-10-29 13:53:47,749 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:47,749 - INFO     -   Returning:
2025-10-29 13:53:47,749 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:47,749 - INFO     -     - reward: 0.3244
2025-10-29 13:53:47,749 - INFO     -     - done: False
2025-10-29 13:53:47,749 - INFO     -     - truncated: False
2025-10-29 13:53:47,749 - INFO     -     - info: 19 keys
2025-10-29 13:53:47,749 - INFO     - ==========================================================================================

2025-10-29 13:53:47,756 - INFO     - 
==========================================================================================
2025-10-29 13:53:47,756 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:47,757 - INFO     - ==========================================================================================
2025-10-29 13:53:47,757 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:47,757 - INFO     -   Input action: 32 (type: int)
2025-10-29 13:53:47,757 - INFO     -   Available edges in graph: 50
2025-10-29 13:53:47,757 - INFO     -   Action index calculation:
2025-10-29 13:53:47,757 - INFO     -     - action % max(num_valid_edges, 1) = 32 % 50 = 32
2025-10-29 13:53:47,757 - INFO     -     - clamped to [0, 49]: 32
2025-10-29 13:53:47,757 - INFO     -   ✓ Extracted merge pair from edge 32: (6, 9)
2025-10-29 13:53:47,757 - INFO     -   ✓ Validation passed
2025-10-29 13:53:47,757 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:47,757 - INFO     -     - Total states before merge: 33
2025-10-29 13:53:47,757 - INFO     -     - Num nodes: 8
2025-10-29 13:53:47,757 - INFO     -     - Num edges: 50
2025-10-29 13:53:47,757 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:47,758 - INFO     -       - Node 6: 5 states
2025-10-29 13:53:47,758 - INFO     -       - Node 9: 10 states
2025-10-29 13:53:47,758 - INFO     -       - Expected product: 50 states
2025-10-29 13:53:47,758 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:47,765 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:53:47,765 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:47,765 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:53:47,866 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:47,866 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:47,866 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:53:47,867 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:47,867 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:47,867 - INFO     -   Calling graph_tracker.merge_nodes([6, 9])...
2025-10-29 13:53:47,868 - INFO     - Attempting merge of nodes 6 and 9...
2025-10-29 13:53:47,868 - INFO     - Successfully merged nodes into new node 10 with 50 states.
2025-10-29 13:53:47,868 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:47,868 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:47,868 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:53:47,868 - INFO     - 
================================================================================
2025-10-29 13:53:47,868 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:53:47,868 - INFO     - ================================================================================
2025-10-29 13:53:47,868 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:47,868 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:53:47,868 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:53:47,869 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:47,869 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:47,869 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:47,869 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:47,869 - INFO     -   - Raw f_after length: 50
2025-10-29 13:53:47,869 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:47,870 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:47,870 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:47,870 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:53:47,870 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:47,870 - INFO     -   - ts1_id: 6
2025-10-29 13:53:47,870 - INFO     -   - ts2_id: 9
2025-10-29 13:53:47,870 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:47,870 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:47,870 - INFO     -   - ts1_size: 5, ts2_size: 10
2025-10-29 13:53:47,870 - INFO     -   - Product space size: 50
2025-10-29 13:53:47,870 - INFO     -   - Using product state mapping
2025-10-29 13:53:47,870 - INFO     -   - f_before_product length: 50
2025-10-29 13:53:47,871 - INFO     -   - avg_f_before: 4.1200 (50 valid states)
2025-10-29 13:53:47,871 - INFO     -   - avg_f_after:  6.5200 (50 valid states)
2025-10-29 13:53:47,871 - INFO     -   - delta: 2.4000
2025-10-29 13:53:47,871 - INFO     -   - f_stability: 1.0 - |2.4000| / 4.1200 = 0.4175
2025-10-29 13:53:47,871 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:47,871 - INFO     -   - Compared 15 values
2025-10-29 13:53:47,871 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:47,871 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:47,871 - INFO     -   - states_before: 50
2025-10-29 13:53:47,871 - INFO     -   - states_after: 50
2025-10-29 13:53:47,871 - INFO     -   - delta_states: 0
2025-10-29 13:53:47,871 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:47,871 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:47,871 - INFO     -   - ts2_transitions: 40
2025-10-29 13:53:47,871 - INFO     -   - merged_transitions: 260
2025-10-29 13:53:47,871 - INFO     -   - transition_density_change: 4.1400
2025-10-29 13:53:47,871 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:47,871 - INFO     -   - search_signals present: True
2025-10-29 13:53:47,871 - INFO     -   - nodes_expanded: 50
2025-10-29 13:53:47,871 - INFO     -   - search_depth: 3
2025-10-29 13:53:47,872 - INFO     -   - solution_cost: 2
2025-10-29 13:53:47,872 - INFO     -   - branching_factor: 5.2000
2025-10-29 13:53:47,872 - INFO     -   - solution_found: True
2025-10-29 13:53:47,872 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:47,872 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:47,872 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:53:47,872 - INFO     -   - TS6(5) + TS9(10) → 50 states
2025-10-29 13:53:47,872 - INFO     -   - f_stability=0.417
2025-10-29 13:53:47,872 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:53:47,872 - INFO     -   - solution_found=True
2025-10-29 13:53:47,873 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:47,873 - INFO     - 
  Extracted signals:
2025-10-29 13:53:47,873 - INFO     -     - iteration: 1
2025-10-29 13:53:47,873 - INFO     -     - states_before: 50
2025-10-29 13:53:47,873 - INFO     -     - states_after: 50
2025-10-29 13:53:47,873 - INFO     -     - delta_states: 0
2025-10-29 13:53:47,873 - INFO     -     - f_value_stability: 0.4175
2025-10-29 13:53:47,873 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:47,873 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:47,873 - INFO     -     - nodes_expanded: 50
2025-10-29 13:53:47,873 - INFO     -     - search_depth: 3
2025-10-29 13:53:47,875 - INFO     -     - solution_cost: 2
2025-10-29 13:53:47,875 - INFO     -     - branching_factor: 5.2000
2025-10-29 13:53:47,875 - INFO     -     - solution_found: True
2025-10-29 13:53:47,875 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:47,875 - INFO     - 
  Computing reward:
2025-10-29 13:53:47,875 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:47,875 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:47,875 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:47,875 - INFO     -   [1] BRANCHING FACTOR: 5.200 → score 0.407 (tolerable)
2025-10-29 13:53:47,875 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:47,875 - INFO     -   [3] F-VALUE STABILITY: 0.364
2025-10-29 13:53:47,876 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:47,876 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:47,876 - INFO     - 
  [COMPOSITE]: 0.534
2025-10-29 13:53:47,876 - INFO     -     = 0.300*0.407 (bf)
2025-10-29 13:53:47,876 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:47,876 - INFO     -     + 0.350*0.364 (stability)
2025-10-29 13:53:47,876 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:47,876 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:47,876 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:47,876 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:47,876 - INFO     - 
  [FINAL REWARD]: 0.3684
2025-10-29 13:53:47,876 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:47,876 - INFO     -     ✓ Reward computed: 0.3684
2025-10-29 13:53:47,876 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:47,876 - INFO     -     - bf_score                       0.4067
2025-10-29 13:53:47,876 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:47,877 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:47,877 - INFO     -     - f_stability                    0.3642
2025-10-29 13:53:47,877 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:47,877 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:47,877 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:47,877 - INFO     -     - composite                      0.5342
2025-10-29 13:53:47,877 - INFO     -     - total                          0.3684
2025-10-29 13:53:47,877 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:47,877 - INFO     -   Num remaining nodes: 7
2025-10-29 13:53:47,877 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:53:47,877 - INFO     -   Done: False
2025-10-29 13:53:47,877 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:47,879 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:47,879 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:47,879 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:47,879 - INFO     -     - num_nodes: 7
2025-10-29 13:53:47,879 - INFO     -     - num_edges: 40
2025-10-29 13:53:47,879 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:47,879 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:53:47,879 - INFO     -   After: current_merge_step = 2
2025-10-29 13:53:47,879 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:47,879 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:47,879 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:47,879 - INFO     -   ✓ Step logged
2025-10-29 13:53:47,880 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:47,880 - INFO     -   Returning:
2025-10-29 13:53:47,880 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:47,880 - INFO     -     - reward: 0.3684
2025-10-29 13:53:47,880 - INFO     -     - done: False
2025-10-29 13:53:47,880 - INFO     -     - truncated: False
2025-10-29 13:53:47,880 - INFO     -     - info: 19 keys
2025-10-29 13:53:47,880 - INFO     - ==========================================================================================

2025-10-29 13:53:47,887 - INFO     - 
==========================================================================================
2025-10-29 13:53:47,888 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:47,888 - INFO     - ==========================================================================================
2025-10-29 13:53:47,888 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:47,888 - INFO     -   Input action: 28 (type: int)
2025-10-29 13:53:47,888 - INFO     -   Available edges in graph: 40
2025-10-29 13:53:47,888 - INFO     -   Action index calculation:
2025-10-29 13:53:47,888 - INFO     -     - action % max(num_valid_edges, 1) = 28 % 40 = 28
2025-10-29 13:53:47,888 - INFO     -     - clamped to [0, 39]: 28
2025-10-29 13:53:47,888 - INFO     -   ✓ Extracted merge pair from edge 28: (7, 10)
2025-10-29 13:53:47,889 - INFO     -   ✓ Validation passed
2025-10-29 13:53:47,889 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:47,889 - INFO     -     - Total states before merge: 68
2025-10-29 13:53:47,889 - INFO     -     - Num nodes: 7
2025-10-29 13:53:47,889 - INFO     -     - Num edges: 40
2025-10-29 13:53:47,889 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:47,889 - INFO     -       - Node 7: 5 states
2025-10-29 13:53:47,889 - INFO     -       - Node 10: 50 states
2025-10-29 13:53:47,889 - INFO     -       - Expected product: 250 states
2025-10-29 13:53:47,889 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:47,897 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:53:47,897 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:47,897 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:53:47,998 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:47,998 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:47,998 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:53:48,002 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:48,002 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:48,002 - INFO     -   Calling graph_tracker.merge_nodes([7, 10])...
2025-10-29 13:53:48,002 - INFO     - Attempting merge of nodes 7 and 10...
2025-10-29 13:53:48,002 - INFO     - Successfully merged nodes into new node 11 with 250 states.
2025-10-29 13:53:48,002 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:48,002 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:48,002 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:53:48,003 - INFO     - 
================================================================================
2025-10-29 13:53:48,003 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:53:48,003 - INFO     - ================================================================================
2025-10-29 13:53:48,003 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:48,005 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:53:48,005 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:53:48,006 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:48,006 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:48,006 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:48,007 - INFO     -   - Raw ts2_f length: 50
2025-10-29 13:53:48,007 - INFO     -   - Raw f_after length: 250
2025-10-29 13:53:48,007 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:48,007 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:48,007 - INFO     -   - ts2_valid: 50 / 50 (removed -50)
2025-10-29 13:53:48,007 - INFO     -   - after_valid: 250 / 250 (removed 0)
2025-10-29 13:53:48,007 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:48,007 - INFO     -   - ts1_id: 7
2025-10-29 13:53:48,008 - INFO     -   - ts2_id: 10
2025-10-29 13:53:48,008 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:48,008 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:48,008 - INFO     -   - ts1_size: 5, ts2_size: 50
2025-10-29 13:53:48,008 - INFO     -   - Product space size: 250
2025-10-29 13:53:48,008 - INFO     -   - Using product state mapping
2025-10-29 13:53:48,008 - INFO     -   - f_before_product length: 250
2025-10-29 13:53:48,009 - INFO     -   - avg_f_before: 6.5760 (250 valid states)
2025-10-29 13:53:48,009 - INFO     -   - avg_f_after:  9.3160 (250 valid states)
2025-10-29 13:53:48,009 - INFO     -   - delta: 2.7400
2025-10-29 13:53:48,009 - INFO     -   - f_stability: 1.0 - |2.7400| / 6.5760 = 0.5833
2025-10-29 13:53:48,010 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:48,010 - INFO     -   - Compared 55 values
2025-10-29 13:53:48,010 - INFO     -   - Significant changes (> 5.0): 9
2025-10-29 13:53:48,010 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:48,010 - INFO     -   - states_before: 250
2025-10-29 13:53:48,010 - INFO     -   - states_after: 250
2025-10-29 13:53:48,010 - INFO     -   - delta_states: 0
2025-10-29 13:53:48,010 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:48,010 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:48,010 - INFO     -   - ts2_transitions: 260
2025-10-29 13:53:48,010 - INFO     -   - merged_transitions: 1675
2025-10-29 13:53:48,010 - INFO     -   - transition_density_change: 5.6080
2025-10-29 13:53:48,010 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:48,010 - INFO     -   - search_signals present: True
2025-10-29 13:53:48,010 - INFO     -   - nodes_expanded: 250
2025-10-29 13:53:48,010 - INFO     -   - search_depth: 5
2025-10-29 13:53:48,011 - INFO     -   - solution_cost: 4
2025-10-29 13:53:48,011 - INFO     -   - branching_factor: 6.7000
2025-10-29 13:53:48,011 - INFO     -   - solution_found: True
2025-10-29 13:53:48,011 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:48,011 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:48,011 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:53:48,011 - INFO     -   - TS7(5) + TS10(50) → 250 states
2025-10-29 13:53:48,011 - INFO     -   - f_stability=0.583
2025-10-29 13:53:48,011 - INFO     -   - A* nodes_expanded=250
2025-10-29 13:53:48,011 - INFO     -   - solution_found=True
2025-10-29 13:53:48,011 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:48,011 - INFO     - 
  Extracted signals:
2025-10-29 13:53:48,011 - INFO     -     - iteration: 2
2025-10-29 13:53:48,012 - INFO     -     - states_before: 250
2025-10-29 13:53:48,012 - INFO     -     - states_after: 250
2025-10-29 13:53:48,012 - INFO     -     - delta_states: 0
2025-10-29 13:53:48,012 - INFO     -     - f_value_stability: 0.5833
2025-10-29 13:53:48,012 - INFO     -     - num_significant_f_changes: 9
2025-10-29 13:53:48,012 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:48,012 - INFO     -     - nodes_expanded: 250
2025-10-29 13:53:48,012 - INFO     -     - search_depth: 5
2025-10-29 13:53:48,012 - INFO     -     - solution_cost: 4
2025-10-29 13:53:48,012 - INFO     -     - branching_factor: 6.7000
2025-10-29 13:53:48,012 - INFO     -     - solution_found: True
2025-10-29 13:53:48,012 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:48,012 - INFO     - 
  Computing reward:
2025-10-29 13:53:48,012 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:48,012 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:48,012 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:48,012 - INFO     -   [1] BRANCHING FACTOR: 6.700 → score 0.230 (high BF, minimal credit)
2025-10-29 13:53:48,013 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:48,013 - INFO     -   [3] F-VALUE STABILITY: 0.531
2025-10-29 13:53:48,013 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:48,013 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:48,013 - INFO     - 
  [COMPOSITE]: 0.529
2025-10-29 13:53:48,013 - INFO     -     = 0.300*0.230 (bf)
2025-10-29 13:53:48,013 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:48,013 - INFO     -     + 0.350*0.531 (stability)
2025-10-29 13:53:48,013 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:48,013 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:48,013 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:48,013 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:48,013 - INFO     - 
  [FINAL REWARD]: 0.4587
2025-10-29 13:53:48,014 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:48,014 - INFO     -     ✓ Reward computed: 0.4587
2025-10-29 13:53:48,014 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:48,014 - INFO     -     - bf_score                       0.2300
2025-10-29 13:53:48,014 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:48,014 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:48,014 - INFO     -     - f_stability                    0.5312
2025-10-29 13:53:48,014 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:48,014 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:48,014 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:48,014 - INFO     -     - composite                      0.5293
2025-10-29 13:53:48,014 - INFO     -     - total                          0.4587
2025-10-29 13:53:48,014 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:48,014 - INFO     -   Num remaining nodes: 6
2025-10-29 13:53:48,014 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:53:48,014 - INFO     -   Done: False
2025-10-29 13:53:48,015 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:48,015 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:48,015 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:48,015 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:48,015 - INFO     -     - num_nodes: 6
2025-10-29 13:53:48,015 - INFO     -     - num_edges: 30
2025-10-29 13:53:48,015 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:48,015 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:53:48,015 - INFO     -   After: current_merge_step = 3
2025-10-29 13:53:48,015 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:48,015 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:48,015 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:48,016 - INFO     -   ✓ Step logged
2025-10-29 13:53:48,018 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:48,018 - INFO     -   Returning:
2025-10-29 13:53:48,018 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:48,018 - INFO     -     - reward: 0.4587
2025-10-29 13:53:48,018 - INFO     -     - done: False
2025-10-29 13:53:48,018 - INFO     -     - truncated: False
2025-10-29 13:53:48,018 - INFO     -     - info: 19 keys
2025-10-29 13:53:48,018 - INFO     - ==========================================================================================

2025-10-29 13:53:48,025 - INFO     - 
==========================================================================================
2025-10-29 13:53:48,026 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:48,026 - INFO     - ==========================================================================================
2025-10-29 13:53:48,026 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:48,026 - INFO     -   Input action: 4 (type: int)
2025-10-29 13:53:48,026 - INFO     -   Available edges in graph: 30
2025-10-29 13:53:48,026 - INFO     -   Action index calculation:
2025-10-29 13:53:48,026 - INFO     -     - action % max(num_valid_edges, 1) = 4 % 30 = 4
2025-10-29 13:53:48,026 - INFO     -     - clamped to [0, 29]: 4
2025-10-29 13:53:48,026 - INFO     -   ✓ Extracted merge pair from edge 4: (0, 11)
2025-10-29 13:53:48,026 - INFO     -   ✓ Validation passed
2025-10-29 13:53:48,026 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:48,026 - INFO     -     - Total states before merge: 263
2025-10-29 13:53:48,026 - INFO     -     - Num nodes: 6
2025-10-29 13:53:48,026 - INFO     -     - Num edges: 30
2025-10-29 13:53:48,026 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:48,026 - INFO     -       - Node 0: 2 states
2025-10-29 13:53:48,026 - INFO     -       - Node 11: 250 states
2025-10-29 13:53:48,026 - INFO     -       - Expected product: 500 states
2025-10-29 13:53:48,026 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:48,031 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:53:48,031 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:48,031 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:53:48,132 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:48,132 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:48,132 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:53:48,138 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:53:48,138 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:48,138 - INFO     -   Calling graph_tracker.merge_nodes([0, 11])...
2025-10-29 13:53:48,138 - INFO     - Attempting merge of nodes 0 and 11...
2025-10-29 13:53:48,138 - INFO     - Successfully merged nodes into new node 12 with 500 states.
2025-10-29 13:53:48,138 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:48,139 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:48,139 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:53:48,139 - INFO     - 
================================================================================
2025-10-29 13:53:48,139 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:53:48,139 - INFO     - ================================================================================
2025-10-29 13:53:48,139 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:48,139 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:53:48,139 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:53:48,140 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:48,140 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:48,140 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:48,140 - INFO     -   - Raw ts2_f length: 250
2025-10-29 13:53:48,140 - INFO     -   - Raw f_after length: 500
2025-10-29 13:53:48,140 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:48,140 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:48,141 - INFO     -   - ts2_valid: 250 / 250 (removed -250)
2025-10-29 13:53:48,141 - INFO     -   - after_valid: 500 / 500 (removed 0)
2025-10-29 13:53:48,141 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:48,141 - INFO     -   - ts1_id: 0
2025-10-29 13:53:48,141 - INFO     -   - ts2_id: 11
2025-10-29 13:53:48,141 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:48,141 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:48,141 - INFO     -   - ts1_size: 2, ts2_size: 250
2025-10-29 13:53:48,142 - INFO     -   - Product space size: 500
2025-10-29 13:53:48,142 - INFO     -   - Using product state mapping
2025-10-29 13:53:48,142 - INFO     -   - f_before_product length: 500
2025-10-29 13:53:48,144 - INFO     -   - avg_f_before: 9.3160 (500 valid states)
2025-10-29 13:53:48,144 - INFO     -   - avg_f_after:  10.1320 (500 valid states)
2025-10-29 13:53:48,144 - INFO     -   - delta: 0.8160
2025-10-29 13:53:48,144 - INFO     -   - f_stability: 1.0 - |0.8160| / 9.3160 = 0.9124
2025-10-29 13:53:48,144 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:48,144 - INFO     -   - Compared 252 values
2025-10-29 13:53:48,144 - INFO     -   - Significant changes (> 5.0): 7
2025-10-29 13:53:48,145 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:48,145 - INFO     -   - states_before: 500
2025-10-29 13:53:48,145 - INFO     -   - states_after: 500
2025-10-29 13:53:48,145 - INFO     -   - delta_states: 0
2025-10-29 13:53:48,145 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:48,145 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:48,145 - INFO     -   - ts2_transitions: 1675
2025-10-29 13:53:48,145 - INFO     -   - merged_transitions: 3800
2025-10-29 13:53:48,145 - INFO     -   - transition_density_change: 4.2400
2025-10-29 13:53:48,145 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:48,145 - INFO     -   - search_signals present: True
2025-10-29 13:53:48,145 - INFO     -   - nodes_expanded: 500
2025-10-29 13:53:48,146 - INFO     -   - search_depth: 5
2025-10-29 13:53:48,146 - INFO     -   - solution_cost: 4
2025-10-29 13:53:48,146 - INFO     -   - branching_factor: 7.6000
2025-10-29 13:53:48,146 - INFO     -   - solution_found: True
2025-10-29 13:53:48,146 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:48,146 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:48,146 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:53:48,147 - INFO     -   - TS0(2) + TS11(250) → 500 states
2025-10-29 13:53:48,147 - INFO     -   - f_stability=0.912
2025-10-29 13:53:48,147 - INFO     -   - A* nodes_expanded=500
2025-10-29 13:53:48,147 - INFO     -   - solution_found=True
2025-10-29 13:53:48,147 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:48,147 - INFO     - 
  Extracted signals:
2025-10-29 13:53:48,147 - INFO     -     - iteration: 3
2025-10-29 13:53:48,147 - INFO     -     - states_before: 500
2025-10-29 13:53:48,147 - INFO     -     - states_after: 500
2025-10-29 13:53:48,147 - INFO     -     - delta_states: 0
2025-10-29 13:53:48,147 - INFO     -     - f_value_stability: 0.9124
2025-10-29 13:53:48,147 - INFO     -     - num_significant_f_changes: 7
2025-10-29 13:53:48,147 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:48,147 - INFO     -     - nodes_expanded: 500
2025-10-29 13:53:48,147 - INFO     -     - search_depth: 5
2025-10-29 13:53:48,147 - INFO     -     - solution_cost: 4
2025-10-29 13:53:48,147 - INFO     -     - branching_factor: 7.6000
2025-10-29 13:53:48,147 - INFO     -     - solution_found: True
2025-10-29 13:53:48,147 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:48,147 - INFO     - 
  Computing reward:
2025-10-29 13:53:48,147 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:48,147 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:48,147 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:48,149 - INFO     -   [1] BRANCHING FACTOR: 7.600 → score 0.140 (high BF, minimal credit)
2025-10-29 13:53:48,149 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:48,149 - INFO     -   [3] F-VALUE STABILITY: 0.993
2025-10-29 13:53:48,149 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:48,149 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:48,150 - INFO     - 
  [COMPOSITE]: 0.664
2025-10-29 13:53:48,150 - INFO     -     = 0.300*0.140 (bf)
2025-10-29 13:53:48,150 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:48,150 - INFO     -     + 0.350*0.993 (stability)
2025-10-29 13:53:48,150 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:48,150 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:48,150 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:48,150 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:48,150 - INFO     - 
  [FINAL REWARD]: 0.8279
2025-10-29 13:53:48,150 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:48,150 - INFO     -     ✓ Reward computed: 0.8279
2025-10-29 13:53:48,150 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:48,150 - INFO     -     - bf_score                       0.1400
2025-10-29 13:53:48,151 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:48,151 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:48,151 - INFO     -     - f_stability                    0.9930
2025-10-29 13:53:48,151 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:48,151 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:48,151 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:48,151 - INFO     -     - composite                      0.6640
2025-10-29 13:53:48,151 - INFO     -     - total                          0.8279
2025-10-29 13:53:48,151 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:48,152 - INFO     -   Num remaining nodes: 5
2025-10-29 13:53:48,152 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:53:48,152 - INFO     -   Done: False
2025-10-29 13:53:48,152 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:48,153 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:48,153 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:48,153 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:48,153 - INFO     -     - num_nodes: 5
2025-10-29 13:53:48,153 - INFO     -     - num_edges: 20
2025-10-29 13:53:48,153 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:48,153 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:53:48,153 - INFO     -   After: current_merge_step = 4
2025-10-29 13:53:48,153 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:48,153 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:48,153 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:48,154 - INFO     -   ✓ Step logged
2025-10-29 13:53:48,154 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:48,154 - INFO     -   Returning:
2025-10-29 13:53:48,154 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:48,154 - INFO     -     - reward: 0.8279
2025-10-29 13:53:48,154 - INFO     -     - done: False
2025-10-29 13:53:48,154 - INFO     -     - truncated: False
2025-10-29 13:53:48,155 - INFO     -     - info: 19 keys
2025-10-29 13:53:48,155 - INFO     - ==========================================================================================

2025-10-29 13:53:48,162 - INFO     - 
==========================================================================================
2025-10-29 13:53:48,163 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:48,163 - INFO     - ==========================================================================================
2025-10-29 13:53:48,163 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:48,163 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:53:48,163 - INFO     -   Available edges in graph: 20
2025-10-29 13:53:48,163 - INFO     -   Action index calculation:
2025-10-29 13:53:48,163 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 20 = 3
2025-10-29 13:53:48,163 - INFO     -     - clamped to [0, 19]: 3
2025-10-29 13:53:48,163 - INFO     -   ✓ Extracted merge pair from edge 3: (2, 12)
2025-10-29 13:53:48,163 - INFO     -   ✓ Validation passed
2025-10-29 13:53:48,163 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:48,163 - INFO     -     - Total states before merge: 511
2025-10-29 13:53:48,163 - INFO     -     - Num nodes: 5
2025-10-29 13:53:48,163 - INFO     -     - Num edges: 20
2025-10-29 13:53:48,163 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:48,163 - INFO     -       - Node 2: 2 states
2025-10-29 13:53:48,163 - INFO     -       - Node 12: 500 states
2025-10-29 13:53:48,163 - INFO     -       - Expected product: 1000 states
2025-10-29 13:53:48,163 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:48,169 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:53:48,169 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:48,169 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:53:48,270 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:48,271 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:48,271 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:53:48,301 - INFO     -   ✓ TS file received after 0.03s
2025-10-29 13:53:48,301 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:48,301 - INFO     -   Calling graph_tracker.merge_nodes([2, 12])...
2025-10-29 13:53:48,302 - INFO     - Attempting merge of nodes 2 and 12...
2025-10-29 13:53:48,302 - INFO     - Successfully merged nodes into new node 13 with 1000 states.
2025-10-29 13:53:48,302 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:48,302 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:48,302 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:53:48,302 - INFO     - 
================================================================================
2025-10-29 13:53:48,302 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:53:48,303 - INFO     - ================================================================================
2025-10-29 13:53:48,303 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:48,303 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:53:48,303 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:53:48,306 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:48,307 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:48,307 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:48,307 - INFO     -   - Raw ts2_f length: 500
2025-10-29 13:53:48,307 - INFO     -   - Raw f_after length: 1000
2025-10-29 13:53:48,307 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:48,307 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:48,307 - INFO     -   - ts2_valid: 500 / 500 (removed -500)
2025-10-29 13:53:48,308 - INFO     -   - after_valid: 1000 / 1000 (removed 0)
2025-10-29 13:53:48,308 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:48,308 - INFO     -   - ts1_id: 2
2025-10-29 13:53:48,308 - INFO     -   - ts2_id: 12
2025-10-29 13:53:48,308 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:48,309 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:48,309 - INFO     -   - ts1_size: 2, ts2_size: 500
2025-10-29 13:53:48,309 - INFO     -   - Product space size: 1000
2025-10-29 13:53:48,309 - INFO     -   - Using product state mapping
2025-10-29 13:53:48,312 - INFO     -   - f_before_product length: 1000
2025-10-29 13:53:48,315 - INFO     -   - avg_f_before: 10.1320 (1000 valid states)
2025-10-29 13:53:48,315 - INFO     -   - avg_f_after:  10.9790 (1000 valid states)
2025-10-29 13:53:48,315 - INFO     -   - delta: 0.8470
2025-10-29 13:53:48,316 - INFO     -   - f_stability: 1.0 - |0.8470| / 10.1320 = 0.9164
2025-10-29 13:53:48,316 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:48,317 - INFO     -   - Compared 502 values
2025-10-29 13:53:48,317 - INFO     -   - Significant changes (> 5.0): 23
2025-10-29 13:53:48,317 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:48,317 - INFO     -   - states_before: 1000
2025-10-29 13:53:48,318 - INFO     -   - states_after: 1000
2025-10-29 13:53:48,318 - INFO     -   - delta_states: 0
2025-10-29 13:53:48,318 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:48,318 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:48,318 - INFO     -   - ts2_transitions: 3800
2025-10-29 13:53:48,318 - INFO     -   - merged_transitions: 8500
2025-10-29 13:53:48,319 - INFO     -   - transition_density_change: 4.6950
2025-10-29 13:53:48,319 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:48,319 - INFO     -   - search_signals present: True
2025-10-29 13:53:48,319 - INFO     -   - nodes_expanded: 1000
2025-10-29 13:53:48,319 - INFO     -   - search_depth: 5
2025-10-29 13:53:48,319 - INFO     -   - solution_cost: 4
2025-10-29 13:53:48,319 - INFO     -   - branching_factor: 8.5000
2025-10-29 13:53:48,320 - INFO     -   - solution_found: True
2025-10-29 13:53:48,320 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:48,321 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:48,322 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:53:48,322 - INFO     -   - TS2(2) + TS12(500) → 1000 states
2025-10-29 13:53:48,322 - INFO     -   - f_stability=0.916
2025-10-29 13:53:48,322 - INFO     -   - A* nodes_expanded=1000
2025-10-29 13:53:48,323 - INFO     -   - solution_found=True
2025-10-29 13:53:48,323 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:48,323 - INFO     - 
  Extracted signals:
2025-10-29 13:53:48,323 - INFO     -     - iteration: 4
2025-10-29 13:53:48,323 - INFO     -     - states_before: 1000
2025-10-29 13:53:48,323 - INFO     -     - states_after: 1000
2025-10-29 13:53:48,324 - INFO     -     - delta_states: 0
2025-10-29 13:53:48,324 - INFO     -     - f_value_stability: 0.9164
2025-10-29 13:53:48,324 - INFO     -     - num_significant_f_changes: 23
2025-10-29 13:53:48,324 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:48,324 - INFO     -     - nodes_expanded: 1000
2025-10-29 13:53:48,324 - INFO     -     - search_depth: 5
2025-10-29 13:53:48,324 - INFO     -     - solution_cost: 4
2025-10-29 13:53:48,325 - INFO     -     - branching_factor: 8.5000
2025-10-29 13:53:48,325 - INFO     -     - solution_found: True
2025-10-29 13:53:48,325 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:48,325 - WARNING  -     ⚠️  High branching factor: 8.5000
2025-10-29 13:53:48,325 - INFO     - 
  Computing reward:
2025-10-29 13:53:48,326 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:48,326 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:48,326 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:48,326 - INFO     -   [1] BRANCHING FACTOR: 8.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:53:48,326 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:48,329 - INFO     -   [3] F-VALUE STABILITY: 0.914
2025-10-29 13:53:48,329 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:48,329 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:48,329 - INFO     - 
  [COMPOSITE]: 0.624
2025-10-29 13:53:48,329 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:53:48,329 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:48,329 - INFO     -     + 0.350*0.914 (stability)
2025-10-29 13:53:48,329 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:48,330 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:48,330 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:48,330 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:48,330 - INFO     - 
  [FINAL REWARD]: 0.7485
2025-10-29 13:53:48,330 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:48,330 - INFO     -     ✓ Reward computed: 0.7485
2025-10-29 13:53:48,331 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:48,331 - INFO     -     - bf_score                       0.1000
2025-10-29 13:53:48,331 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:48,331 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:48,331 - INFO     -     - f_stability                    0.9138
2025-10-29 13:53:48,331 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:48,332 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:48,332 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:48,332 - INFO     -     - composite                      0.6243
2025-10-29 13:53:48,332 - INFO     -     - total                          0.7485
2025-10-29 13:53:48,332 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:48,332 - INFO     -   Num remaining nodes: 4
2025-10-29 13:53:48,332 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:53:48,333 - INFO     -   Done: False
2025-10-29 13:53:48,333 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:48,334 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:48,334 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:48,334 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:48,334 - INFO     -     - num_nodes: 4
2025-10-29 13:53:48,334 - INFO     -     - num_edges: 12
2025-10-29 13:53:48,334 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:48,334 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:53:48,335 - INFO     -   After: current_merge_step = 5
2025-10-29 13:53:48,335 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:48,335 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:48,335 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:48,336 - INFO     -   ✓ Step logged
2025-10-29 13:53:48,336 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:48,336 - INFO     -   Returning:
2025-10-29 13:53:48,337 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:48,337 - INFO     -     - reward: 0.7485
2025-10-29 13:53:48,337 - INFO     -     - done: False
2025-10-29 13:53:48,337 - INFO     -     - truncated: False
2025-10-29 13:53:48,337 - INFO     -     - info: 19 keys
2025-10-29 13:53:48,337 - INFO     - ==========================================================================================

2025-10-29 13:53:48,356 - INFO     - 
==========================================================================================
2025-10-29 13:53:48,356 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:48,356 - INFO     - ==========================================================================================
2025-10-29 13:53:48,356 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:48,356 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:53:48,356 - INFO     -   Available edges in graph: 12
2025-10-29 13:53:48,356 - INFO     -   Action index calculation:
2025-10-29 13:53:48,357 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 12 = 2
2025-10-29 13:53:48,357 - INFO     -     - clamped to [0, 11]: 2
2025-10-29 13:53:48,357 - INFO     -   ✓ Extracted merge pair from edge 2: (3, 13)
2025-10-29 13:53:48,357 - INFO     -   ✓ Validation passed
2025-10-29 13:53:48,357 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:48,357 - INFO     -     - Total states before merge: 1009
2025-10-29 13:53:48,357 - INFO     -     - Num nodes: 4
2025-10-29 13:53:48,357 - INFO     -     - Num edges: 12
2025-10-29 13:53:48,357 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:48,357 - INFO     -       - Node 3: 2 states
2025-10-29 13:53:48,357 - INFO     -       - Node 13: 1000 states
2025-10-29 13:53:48,357 - INFO     -       - Expected product: 2000 states
2025-10-29 13:53:48,358 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:48,367 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:53:48,367 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:48,367 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:53:48,471 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:48,471 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:48,471 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:53:48,717 - INFO     -   ✓ TS file received after 0.25s
2025-10-29 13:53:48,717 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:48,718 - INFO     -   Calling graph_tracker.merge_nodes([3, 13])...
2025-10-29 13:53:48,718 - INFO     - Attempting merge of nodes 3 and 13...
2025-10-29 13:53:48,718 - INFO     - Successfully merged nodes into new node 14 with 2000 states.
2025-10-29 13:53:48,719 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:48,719 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:48,719 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:53:48,719 - INFO     - 
================================================================================
2025-10-29 13:53:48,720 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:53:48,720 - INFO     - ================================================================================
2025-10-29 13:53:48,720 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:48,720 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:53:48,720 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:53:48,727 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:48,727 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:48,727 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:48,728 - INFO     -   - Raw ts2_f length: 1000
2025-10-29 13:53:48,728 - INFO     -   - Raw f_after length: 2000
2025-10-29 13:53:48,728 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:48,728 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:48,729 - INFO     -   - ts2_valid: 1000 / 1000 (removed -1000)
2025-10-29 13:53:48,733 - INFO     -   - after_valid: 2000 / 2000 (removed 0)
2025-10-29 13:53:48,734 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:48,734 - INFO     -   - ts1_id: 3
2025-10-29 13:53:48,734 - INFO     -   - ts2_id: 13
2025-10-29 13:53:48,734 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:48,734 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:48,735 - INFO     -   - ts1_size: 2, ts2_size: 1000
2025-10-29 13:53:48,735 - INFO     -   - Product space size: 2000
2025-10-29 13:53:48,735 - INFO     -   - Using product state mapping
2025-10-29 13:53:48,744 - INFO     -   - f_before_product length: 2000
2025-10-29 13:53:48,761 - INFO     -   - avg_f_before: 10.9790 (2000 valid states)
2025-10-29 13:53:48,761 - INFO     -   - avg_f_after:  12.5360 (2000 valid states)
2025-10-29 13:53:48,761 - INFO     -   - delta: 1.5570
2025-10-29 13:53:48,762 - INFO     -   - f_stability: 1.0 - |1.5570| / 10.9790 = 0.8582
2025-10-29 13:53:48,762 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:48,763 - INFO     -   - Compared 1002 values
2025-10-29 13:53:48,763 - INFO     -   - Significant changes (> 5.0): 76
2025-10-29 13:53:48,763 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:48,763 - INFO     -   - states_before: 2000
2025-10-29 13:53:48,764 - INFO     -   - states_after: 2000
2025-10-29 13:53:48,764 - INFO     -   - delta_states: 0
2025-10-29 13:53:48,764 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:48,764 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:48,764 - INFO     -   - ts2_transitions: 8500
2025-10-29 13:53:48,765 - INFO     -   - merged_transitions: 14400
2025-10-29 13:53:48,765 - INFO     -   - transition_density_change: 2.9475
2025-10-29 13:53:48,765 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:48,765 - INFO     -   - search_signals present: True
2025-10-29 13:53:48,766 - INFO     -   - nodes_expanded: 2000
2025-10-29 13:53:48,767 - INFO     -   - search_depth: 6
2025-10-29 13:53:48,767 - INFO     -   - solution_cost: 4
2025-10-29 13:53:48,767 - INFO     -   - branching_factor: 7.2000
2025-10-29 13:53:48,767 - INFO     -   - solution_found: True
2025-10-29 13:53:48,768 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:48,772 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:48,772 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:53:48,773 - INFO     -   - TS3(2) + TS13(1000) → 2000 states
2025-10-29 13:53:48,773 - INFO     -   - f_stability=0.858
2025-10-29 13:53:48,773 - INFO     -   - A* nodes_expanded=2000
2025-10-29 13:53:48,773 - INFO     -   - solution_found=True
2025-10-29 13:53:48,773 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:48,773 - INFO     - 
  Extracted signals:
2025-10-29 13:53:48,773 - INFO     -     - iteration: 5
2025-10-29 13:53:48,774 - INFO     -     - states_before: 2000
2025-10-29 13:53:48,774 - INFO     -     - states_after: 2000
2025-10-29 13:53:48,774 - INFO     -     - delta_states: 0
2025-10-29 13:53:48,775 - INFO     -     - f_value_stability: 0.8582
2025-10-29 13:53:48,775 - INFO     -     - num_significant_f_changes: 76
2025-10-29 13:53:48,775 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:48,775 - INFO     -     - nodes_expanded: 2000
2025-10-29 13:53:48,775 - INFO     -     - search_depth: 6
2025-10-29 13:53:48,775 - INFO     -     - solution_cost: 4
2025-10-29 13:53:48,775 - INFO     -     - branching_factor: 7.2000
2025-10-29 13:53:48,776 - INFO     -     - solution_found: True
2025-10-29 13:53:48,776 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:48,777 - INFO     - 
  Computing reward:
2025-10-29 13:53:48,777 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:48,777 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:48,777 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:48,777 - INFO     -   [1] BRANCHING FACTOR: 7.200 → score 0.180 (high BF, minimal credit)
2025-10-29 13:53:48,777 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:48,779 - INFO     -   [3] F-VALUE STABILITY: 0.900
2025-10-29 13:53:48,780 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:48,780 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:48,780 - INFO     - 
  [COMPOSITE]: 0.640
2025-10-29 13:53:48,780 - INFO     -     = 0.300*0.180 (bf)
2025-10-29 13:53:48,780 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:48,780 - INFO     -     + 0.350*0.900 (stability)
2025-10-29 13:53:48,780 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:48,780 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:48,780 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:48,780 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:48,781 - INFO     - 
  [FINAL REWARD]: 0.7793
2025-10-29 13:53:48,781 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:48,781 - INFO     -     ✓ Reward computed: 0.7793
2025-10-29 13:53:48,781 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:48,781 - INFO     -     - bf_score                       0.1800
2025-10-29 13:53:48,782 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:48,782 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:48,782 - INFO     -     - f_stability                    0.9004
2025-10-29 13:53:48,782 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:48,782 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:48,782 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:48,782 - INFO     -     - composite                      0.6397
2025-10-29 13:53:48,782 - INFO     -     - total                          0.7793
2025-10-29 13:53:48,782 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:48,782 - INFO     -   Num remaining nodes: 3
2025-10-29 13:53:48,783 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:53:48,783 - INFO     -   Done: False
2025-10-29 13:53:48,783 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:48,783 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:48,784 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:48,784 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:48,784 - INFO     -     - num_nodes: 3
2025-10-29 13:53:48,784 - INFO     -     - num_edges: 6
2025-10-29 13:53:48,785 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:48,785 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:53:48,785 - INFO     -   After: current_merge_step = 6
2025-10-29 13:53:48,785 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:48,785 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:48,785 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:48,786 - INFO     -   ✓ Step logged
2025-10-29 13:53:48,786 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:48,786 - INFO     -   Returning:
2025-10-29 13:53:48,786 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:48,786 - INFO     -     - reward: 0.7793
2025-10-29 13:53:48,786 - INFO     -     - done: False
2025-10-29 13:53:48,786 - INFO     -     - truncated: False
2025-10-29 13:53:48,786 - INFO     -     - info: 19 keys
2025-10-29 13:53:48,786 - INFO     - ==========================================================================================

2025-10-29 13:53:48,794 - INFO     - 
==========================================================================================
2025-10-29 13:53:48,794 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:48,794 - INFO     - ==========================================================================================
2025-10-29 13:53:48,794 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:48,795 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:53:48,795 - INFO     -   Available edges in graph: 6
2025-10-29 13:53:48,795 - INFO     -   Action index calculation:
2025-10-29 13:53:48,795 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 6 = 1
2025-10-29 13:53:48,795 - INFO     -     - clamped to [0, 5]: 1
2025-10-29 13:53:48,795 - INFO     -   ✓ Extracted merge pair from edge 1: (4, 14)
2025-10-29 13:53:48,795 - INFO     -   ✓ Validation passed
2025-10-29 13:53:48,795 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:48,795 - INFO     -     - Total states before merge: 2007
2025-10-29 13:53:48,795 - INFO     -     - Num nodes: 3
2025-10-29 13:53:48,795 - INFO     -     - Num edges: 6
2025-10-29 13:53:48,795 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:48,795 - INFO     -       - Node 4: 2 states
2025-10-29 13:53:48,795 - INFO     -       - Node 14: 2000 states
2025-10-29 13:53:48,795 - INFO     -       - Expected product: 4000 states
2025-10-29 13:53:48,795 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:48,805 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:53:48,805 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:48,805 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:53:48,906 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:48,906 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:48,906 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:53:49,138 - INFO     -   ✓ TS file received after 0.23s
2025-10-29 13:53:49,138 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:49,138 - INFO     -   Calling graph_tracker.merge_nodes([4, 14])...
2025-10-29 13:53:49,139 - INFO     - Attempting merge of nodes 4 and 14...
2025-10-29 13:53:49,139 - INFO     - Successfully merged nodes into new node 15 with 4000 states.
2025-10-29 13:53:49,139 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:49,139 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:49,139 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:53:49,139 - INFO     - 
================================================================================
2025-10-29 13:53:49,139 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:53:49,139 - INFO     - ================================================================================
2025-10-29 13:53:49,139 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:49,139 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:53:49,139 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:53:49,145 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:49,145 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:49,145 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:49,145 - INFO     -   - Raw ts2_f length: 2000
2025-10-29 13:53:49,145 - INFO     -   - Raw f_after length: 4000
2025-10-29 13:53:49,145 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:49,145 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:49,147 - INFO     -   - ts2_valid: 2000 / 2000 (removed -2000)
2025-10-29 13:53:49,148 - INFO     -   - after_valid: 2984 / 4000 (removed 1016)
2025-10-29 13:53:49,148 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:49,148 - INFO     -   - ts1_id: 4
2025-10-29 13:53:49,148 - INFO     -   - ts2_id: 14
2025-10-29 13:53:49,148 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:49,148 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:49,148 - INFO     -   - ts1_size: 2, ts2_size: 2000
2025-10-29 13:53:49,148 - INFO     -   - Product space size: 4000
2025-10-29 13:53:49,148 - INFO     -   - Using product state mapping
2025-10-29 13:53:49,154 - INFO     -   - f_before_product length: 4000
2025-10-29 13:53:49,163 - INFO     -   - avg_f_before: 12.5360 (4000 valid states)
2025-10-29 13:53:49,163 - INFO     -   - avg_f_after:  13.3747 (2984 valid states)
2025-10-29 13:53:49,163 - INFO     -   - delta: 0.8387
2025-10-29 13:53:49,163 - INFO     -   - f_stability: 1.0 - |0.8387| / 12.5360 = 0.9331
2025-10-29 13:53:49,163 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:49,163 - INFO     -   - Compared 2002 values
2025-10-29 13:53:49,163 - INFO     -   - Significant changes (> 5.0): 287
2025-10-29 13:53:49,163 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:49,163 - INFO     -   - states_before: 4000
2025-10-29 13:53:49,163 - INFO     -   - states_after: 4000
2025-10-29 13:53:49,163 - INFO     -   - delta_states: 0
2025-10-29 13:53:49,163 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:49,163 - INFO     -   - ts1_transitions: 3
2025-10-29 13:53:49,164 - INFO     -   - ts2_transitions: 14400
2025-10-29 13:53:49,164 - INFO     -   - merged_transitions: 22400
2025-10-29 13:53:49,164 - INFO     -   - transition_density_change: 1.9992
2025-10-29 13:53:49,164 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:49,164 - INFO     -   - search_signals present: True
2025-10-29 13:53:49,164 - INFO     -   - nodes_expanded: 2984
2025-10-29 13:53:49,164 - INFO     -   - search_depth: 6
2025-10-29 13:53:49,164 - INFO     -   - solution_cost: 4
2025-10-29 13:53:49,164 - INFO     -   - branching_factor: 7.5067
2025-10-29 13:53:49,164 - INFO     -   - solution_found: True
2025-10-29 13:53:49,164 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:49,166 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:49,166 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:53:49,166 - INFO     -   - TS4(2) + TS14(2000) → 4000 states
2025-10-29 13:53:49,166 - INFO     -   - f_stability=0.933
2025-10-29 13:53:49,166 - INFO     -   - A* nodes_expanded=2984
2025-10-29 13:53:49,166 - INFO     -   - solution_found=True
2025-10-29 13:53:49,167 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:49,167 - INFO     - 
  Extracted signals:
2025-10-29 13:53:49,167 - INFO     -     - iteration: 6
2025-10-29 13:53:49,167 - INFO     -     - states_before: 4000
2025-10-29 13:53:49,167 - INFO     -     - states_after: 4000
2025-10-29 13:53:49,167 - INFO     -     - delta_states: 0
2025-10-29 13:53:49,167 - INFO     -     - f_value_stability: 0.9331
2025-10-29 13:53:49,167 - INFO     -     - num_significant_f_changes: 287
2025-10-29 13:53:49,167 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:49,167 - INFO     -     - nodes_expanded: 2984
2025-10-29 13:53:49,167 - INFO     -     - search_depth: 6
2025-10-29 13:53:49,167 - INFO     -     - solution_cost: 4
2025-10-29 13:53:49,167 - INFO     -     - branching_factor: 7.5067
2025-10-29 13:53:49,167 - INFO     -     - solution_found: True
2025-10-29 13:53:49,167 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:49,169 - INFO     - 
  Computing reward:
2025-10-29 13:53:49,170 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:49,170 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:49,170 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:49,170 - INFO     -   [1] BRANCHING FACTOR: 7.507 → score 0.149 (high BF, minimal credit)
2025-10-29 13:53:49,170 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:49,172 - INFO     -   [3] F-VALUE STABILITY: 0.931
2025-10-29 13:53:49,172 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:49,172 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:49,172 - INFO     - 
  [COMPOSITE]: 0.641
2025-10-29 13:53:49,172 - INFO     -     = 0.300*0.149 (bf)
2025-10-29 13:53:49,172 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:49,172 - INFO     -     + 0.350*0.931 (stability)
2025-10-29 13:53:49,172 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:49,172 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:49,172 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:49,172 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:49,173 - INFO     - 
  [FINAL REWARD]: 0.7826
2025-10-29 13:53:49,173 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:49,173 - INFO     -     ✓ Reward computed: 0.7826
2025-10-29 13:53:49,173 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:49,173 - INFO     -     - bf_score                       0.1493
2025-10-29 13:53:49,173 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:49,173 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:49,173 - INFO     -     - f_stability                    0.9314
2025-10-29 13:53:49,173 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:49,174 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:49,174 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:49,174 - INFO     -     - composite                      0.6413
2025-10-29 13:53:49,174 - INFO     -     - total                          0.7826
2025-10-29 13:53:49,174 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:49,174 - INFO     -   Num remaining nodes: 2
2025-10-29 13:53:49,174 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:53:49,174 - INFO     -   Done: False
2025-10-29 13:53:49,174 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:49,174 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:49,174 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:49,174 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:49,174 - INFO     -     - num_nodes: 2
2025-10-29 13:53:49,174 - INFO     -     - num_edges: 2
2025-10-29 13:53:49,175 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:49,175 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:53:49,175 - INFO     -   After: current_merge_step = 7
2025-10-29 13:53:49,175 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:49,175 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:49,175 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:49,176 - INFO     -   ✓ Step logged
2025-10-29 13:53:49,176 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:49,176 - INFO     -   Returning:
2025-10-29 13:53:49,176 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:49,176 - INFO     -     - reward: 0.7826
2025-10-29 13:53:49,176 - INFO     -     - done: False
2025-10-29 13:53:49,176 - INFO     -     - truncated: False
2025-10-29 13:53:49,176 - INFO     -     - info: 19 keys
2025-10-29 13:53:49,176 - INFO     - ==========================================================================================

2025-10-29 13:53:49,184 - INFO     - 
==========================================================================================
2025-10-29 13:53:49,184 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:49,184 - INFO     - ==========================================================================================
2025-10-29 13:53:49,184 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:49,184 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:53:49,184 - INFO     -   Available edges in graph: 2
2025-10-29 13:53:49,185 - INFO     -   Action index calculation:
2025-10-29 13:53:49,185 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:53:49,185 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:53:49,185 - INFO     -   ✓ Extracted merge pair from edge 0: (8, 15)
2025-10-29 13:53:49,185 - INFO     -   ✓ Validation passed
2025-10-29 13:53:49,185 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:49,185 - INFO     -     - Total states before merge: 4005
2025-10-29 13:53:49,185 - INFO     -     - Num nodes: 2
2025-10-29 13:53:49,185 - INFO     -     - Num edges: 2
2025-10-29 13:53:49,185 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:49,185 - INFO     -       - Node 8: 5 states
2025-10-29 13:53:49,185 - INFO     -       - Node 15: 4000 states
2025-10-29 13:53:49,185 - INFO     -       - Expected product: 20000 states
2025-10-29 13:53:49,186 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:49,195 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:53:49,195 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:49,195 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:53:49,296 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:49,296 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:49,296 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:53:49,546 - INFO     -   ✓ TS file received after 0.25s
2025-10-29 13:53:49,546 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:49,546 - INFO     -   Calling graph_tracker.merge_nodes([8, 15])...
2025-10-29 13:53:49,546 - INFO     - Attempting merge of nodes 8 and 15...
2025-10-29 13:53:49,546 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:53:49,546 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:49,546 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:49,546 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:53:49,546 - INFO     - 
================================================================================
2025-10-29 13:53:49,547 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:53:49,547 - INFO     - ================================================================================
2025-10-29 13:53:49,547 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:49,547 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:53:49,547 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:53:49,552 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:49,552 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:49,552 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:49,554 - INFO     -   - Raw ts2_f length: 668
2025-10-29 13:53:49,554 - INFO     -   - Raw f_after length: 3340
2025-10-29 13:53:49,554 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:49,554 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:49,554 - INFO     -   - ts2_valid: 668 / 668 (removed -668)
2025-10-29 13:53:49,556 - INFO     -   - after_valid: 2749 / 3340 (removed 591)
2025-10-29 13:53:49,556 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:49,556 - INFO     -   - ts1_id: 8
2025-10-29 13:53:49,556 - INFO     -   - ts2_id: 15
2025-10-29 13:53:49,557 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:49,557 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:49,557 - INFO     -   - ts1_size: 5, ts2_size: 668
2025-10-29 13:53:49,557 - INFO     -   - Product space size: 3340
2025-10-29 13:53:49,557 - INFO     -   - Using product state mapping
2025-10-29 13:53:49,563 - INFO     -   - f_before_product length: 3340
2025-10-29 13:53:49,571 - INFO     -   - avg_f_before: 8.1722 (3340 valid states)
2025-10-29 13:53:49,571 - INFO     -   - avg_f_after:  12.2346 (2749 valid states)
2025-10-29 13:53:49,571 - INFO     -   - delta: 4.0625
2025-10-29 13:53:49,571 - INFO     -   - f_stability: 1.0 - |4.0625| / 8.1722 = 0.5029
2025-10-29 13:53:49,571 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:49,571 - INFO     -   - Compared 673 values
2025-10-29 13:53:49,571 - INFO     -   - Significant changes (> 5.0): 130
2025-10-29 13:53:49,571 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:49,571 - INFO     -   - states_before: 3340
2025-10-29 13:53:49,571 - INFO     -   - states_after: 3340
2025-10-29 13:53:49,571 - INFO     -   - delta_states: 0
2025-10-29 13:53:49,571 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:49,571 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:49,571 - INFO     -   - ts2_transitions: 6703
2025-10-29 13:53:49,572 - INFO     -   - merged_transitions: 19291
2025-10-29 13:53:49,572 - INFO     -   - transition_density_change: 3.7650
2025-10-29 13:53:49,572 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:49,572 - INFO     -   - search_signals present: True
2025-10-29 13:53:49,572 - INFO     -   - nodes_expanded: 2749
2025-10-29 13:53:49,572 - INFO     -   - search_depth: 6
2025-10-29 13:53:49,572 - INFO     -   - solution_cost: 4
2025-10-29 13:53:49,572 - INFO     -   - branching_factor: 7.0175
2025-10-29 13:53:49,572 - INFO     -   - solution_found: True
2025-10-29 13:53:49,572 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:49,574 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:49,574 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:53:49,574 - INFO     -   - TS8(5) + TS15(668) → 3340 states
2025-10-29 13:53:49,574 - INFO     -   - f_stability=0.503
2025-10-29 13:53:49,574 - INFO     -   - A* nodes_expanded=2749
2025-10-29 13:53:49,574 - INFO     -   - solution_found=True
2025-10-29 13:53:49,574 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:49,574 - INFO     - 
  Extracted signals:
2025-10-29 13:53:49,574 - INFO     -     - iteration: 7
2025-10-29 13:53:49,574 - INFO     -     - states_before: 3340
2025-10-29 13:53:49,574 - INFO     -     - states_after: 3340
2025-10-29 13:53:49,574 - INFO     -     - delta_states: 0
2025-10-29 13:53:49,575 - INFO     -     - f_value_stability: 0.5029
2025-10-29 13:53:49,575 - INFO     -     - num_significant_f_changes: 130
2025-10-29 13:53:49,575 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:49,575 - INFO     -     - nodes_expanded: 2749
2025-10-29 13:53:49,575 - INFO     -     - search_depth: 6
2025-10-29 13:53:49,575 - INFO     -     - solution_cost: 4
2025-10-29 13:53:49,575 - INFO     -     - branching_factor: 7.0175
2025-10-29 13:53:49,575 - INFO     -     - solution_found: True
2025-10-29 13:53:49,575 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:49,575 - INFO     - 
  Computing reward:
2025-10-29 13:53:49,575 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:49,575 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:49,575 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:49,575 - INFO     -   [1] BRANCHING FACTOR: 7.017 → score 0.198 (high BF, minimal credit)
2025-10-29 13:53:49,575 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:49,577 - INFO     -   [3] F-VALUE STABILITY: 0.604
2025-10-29 13:53:49,578 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:49,578 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:49,578 - INFO     - 
  [COMPOSITE]: 0.541
2025-10-29 13:53:49,578 - INFO     -     = 0.300*0.198 (bf)
2025-10-29 13:53:49,578 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:49,578 - INFO     -     + 0.350*0.604 (stability)
2025-10-29 13:53:49,578 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:49,578 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:49,578 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:49,578 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:49,578 - INFO     - 
  [FINAL REWARD]: 0.4828
2025-10-29 13:53:49,578 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:49,578 - INFO     -     ✓ Reward computed: 0.4828
2025-10-29 13:53:49,578 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:49,578 - INFO     -     - bf_score                       0.1983
2025-10-29 13:53:49,578 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:49,578 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:49,578 - INFO     -     - f_stability                    0.6040
2025-10-29 13:53:49,579 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:49,579 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:49,579 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:49,579 - INFO     -     - composite                      0.5414
2025-10-29 13:53:49,579 - INFO     -     - total                          0.4828
2025-10-29 13:53:49,579 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:49,579 - INFO     -   Num remaining nodes: 1
2025-10-29 13:53:49,579 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:53:49,579 - INFO     -   Done: True
2025-10-29 13:53:49,579 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:53:49,579 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:49,580 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:49,580 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:49,580 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:49,580 - INFO     -     - num_nodes: 1
2025-10-29 13:53:49,580 - INFO     -     - num_edges: 0
2025-10-29 13:53:49,580 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:49,580 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:53:49,580 - INFO     -   After: current_merge_step = 8
2025-10-29 13:53:49,580 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:49,580 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:49,580 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:49,580 - INFO     -   ✓ Step logged
2025-10-29 13:53:49,582 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:49,582 - INFO     -   Returning:
2025-10-29 13:53:49,582 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:49,582 - INFO     -     - reward: 0.4828
2025-10-29 13:53:49,582 - INFO     -     - done: True
2025-10-29 13:53:49,582 - INFO     -     - truncated: False
2025-10-29 13:53:49,582 - INFO     -     - info: 19 keys
2025-10-29 13:53:49,582 - INFO     - ==========================================================================================

2025-10-29 13:53:49,583 - INFO     -     ✓ Reward: 4.7728, Time: 2.89s
2025-10-29 13:53:49,583 - INFO     -   [2/5] problem_small_01.pddl
2025-10-29 13:53:49,583 - INFO     - Environment initialized with:
2025-10-29 13:53:49,583 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:49,583 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_01.pddl
2025-10-29 13:53:49,583 - INFO     -   FD base: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward
2025-10-29 13:53:49,584 - INFO     -   max_states: 4000
2025-10-29 13:53:49,584 - INFO     -   threshold_before_merge: 1
2025-10-29 13:53:49,584 - INFO     - ✓ Initialized reward function: astar_search
2025-10-29 13:53:49,584 - INFO     - ✓ RewardInfoExtractor initialized (output_dir: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output)
2025-10-29 13:53:49,584 - INFO     - ✓ Initialized reward info extractor
2025-10-29 13:53:49,661 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:53:49,667 - INFO     - [Handshake] Building FD command:
2025-10-29 13:53:49,667 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:49,667 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_01.pddl
2025-10-29 13:53:49,667 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:53:49,670 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:50,273 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:50,273 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:50,274 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:50,592 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:50,592 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:50,592 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:50,592 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:50,593 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:50,593 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:50,593 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:50,593 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:50,593 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:50,593 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:50,593 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:50,593 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:50,593 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:50,593 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:50,593 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:50,593 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:50,593 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:50,593 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:50,593 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:50,593 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:50,593 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:50,593 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:50,594 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:50,594 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:50,595 - INFO     - Added edge (0, 1)
2025-10-29 13:53:50,595 - INFO     - Added edge (0, 2)
2025-10-29 13:53:50,595 - INFO     - Added edge (0, 3)
2025-10-29 13:53:50,595 - INFO     - Added edge (0, 4)
2025-10-29 13:53:50,595 - INFO     - Added edge (0, 5)
2025-10-29 13:53:50,595 - INFO     - Added edge (0, 6)
2025-10-29 13:53:50,595 - INFO     - Added edge (0, 7)
2025-10-29 13:53:50,595 - INFO     - Added edge (0, 8)
2025-10-29 13:53:50,595 - INFO     - Added edge (1, 0)
2025-10-29 13:53:50,595 - INFO     - Added edge (1, 2)
2025-10-29 13:53:50,595 - INFO     - Added edge (1, 3)
2025-10-29 13:53:50,595 - INFO     - Added edge (1, 4)
2025-10-29 13:53:50,595 - INFO     - Added edge (1, 5)
2025-10-29 13:53:50,595 - INFO     - Added edge (1, 6)
2025-10-29 13:53:50,595 - INFO     - Added edge (1, 7)
2025-10-29 13:53:50,595 - INFO     - Added edge (1, 8)
2025-10-29 13:53:50,595 - INFO     - Added edge (2, 0)
2025-10-29 13:53:50,595 - INFO     - Added edge (2, 1)
2025-10-29 13:53:50,595 - INFO     - Added edge (2, 3)
2025-10-29 13:53:50,595 - INFO     - Added edge (2, 4)
2025-10-29 13:53:50,595 - INFO     - Added edge (2, 5)
2025-10-29 13:53:50,595 - INFO     - Added edge (2, 6)
2025-10-29 13:53:50,595 - INFO     - Added edge (2, 7)
2025-10-29 13:53:50,596 - INFO     - Added edge (2, 8)
2025-10-29 13:53:50,596 - INFO     - Added edge (3, 0)
2025-10-29 13:53:50,596 - INFO     - Added edge (3, 1)
2025-10-29 13:53:50,596 - INFO     - Added edge (3, 2)
2025-10-29 13:53:50,596 - INFO     - Added edge (3, 4)
2025-10-29 13:53:50,596 - INFO     - Added edge (3, 5)
2025-10-29 13:53:50,596 - INFO     - Added edge (3, 6)
2025-10-29 13:53:50,596 - INFO     - Added edge (3, 7)
2025-10-29 13:53:50,596 - INFO     - Added edge (3, 8)
2025-10-29 13:53:50,596 - INFO     - Added edge (4, 0)
2025-10-29 13:53:50,596 - INFO     - Added edge (4, 1)
2025-10-29 13:53:50,597 - INFO     - Added edge (4, 2)
2025-10-29 13:53:50,597 - INFO     - Added edge (4, 3)
2025-10-29 13:53:50,597 - INFO     - Added edge (4, 5)
2025-10-29 13:53:50,597 - INFO     - Added edge (4, 6)
2025-10-29 13:53:50,597 - INFO     - Added edge (4, 7)
2025-10-29 13:53:50,597 - INFO     - Added edge (4, 8)
2025-10-29 13:53:50,597 - INFO     - Added edge (5, 0)
2025-10-29 13:53:50,597 - INFO     - Added edge (5, 1)
2025-10-29 13:53:50,597 - INFO     - Added edge (5, 2)
2025-10-29 13:53:50,597 - INFO     - Added edge (5, 3)
2025-10-29 13:53:50,597 - INFO     - Added edge (5, 4)
2025-10-29 13:53:50,597 - INFO     - Added edge (6, 0)
2025-10-29 13:53:50,597 - INFO     - Added edge (6, 1)
2025-10-29 13:53:50,597 - INFO     - Added edge (6, 2)
2025-10-29 13:53:50,597 - INFO     - Added edge (6, 3)
2025-10-29 13:53:50,597 - INFO     - Added edge (6, 4)
2025-10-29 13:53:50,597 - INFO     - Added edge (7, 0)
2025-10-29 13:53:50,597 - INFO     - Added edge (7, 1)
2025-10-29 13:53:50,597 - INFO     - Added edge (7, 2)
2025-10-29 13:53:50,597 - INFO     - Added edge (7, 3)
2025-10-29 13:53:50,597 - INFO     - Added edge (7, 4)
2025-10-29 13:53:50,597 - INFO     - Added edge (8, 0)
2025-10-29 13:53:50,597 - INFO     - Added edge (8, 1)
2025-10-29 13:53:50,597 - INFO     - Added edge (8, 2)
2025-10-29 13:53:50,597 - INFO     - Added edge (8, 3)
2025-10-29 13:53:50,597 - INFO     - Added edge (8, 4)
2025-10-29 13:53:50,597 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:50,605 - INFO     - 
==========================================================================================
2025-10-29 13:53:50,605 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:50,605 - INFO     - ==========================================================================================
2025-10-29 13:53:50,605 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:50,605 - INFO     -   Input action: 41 (type: int)
2025-10-29 13:53:50,605 - INFO     -   Available edges in graph: 60
2025-10-29 13:53:50,605 - INFO     -   Action index calculation:
2025-10-29 13:53:50,605 - INFO     -     - action % max(num_valid_edges, 1) = 41 % 60 = 41
2025-10-29 13:53:50,605 - INFO     -     - clamped to [0, 59]: 41
2025-10-29 13:53:50,605 - INFO     -   ✓ Extracted merge pair from edge 41: (5, 1)
2025-10-29 13:53:50,605 - INFO     -   ✓ Validation passed
2025-10-29 13:53:50,605 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:50,606 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:50,606 - INFO     -     - Num nodes: 9
2025-10-29 13:53:50,606 - INFO     -     - Num edges: 60
2025-10-29 13:53:50,606 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:50,606 - INFO     -       - Node 5: 5 states
2025-10-29 13:53:50,606 - INFO     -       - Node 1: 2 states
2025-10-29 13:53:50,606 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:50,606 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:50,611 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:53:50,612 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:50,612 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:53:50,712 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:50,713 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:50,713 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:53:50,713 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:50,713 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:50,713 - INFO     -   Calling graph_tracker.merge_nodes([5, 1])...
2025-10-29 13:53:50,713 - INFO     - Attempting merge of nodes 5 and 1...
2025-10-29 13:53:50,713 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:53:50,713 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:50,714 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:50,714 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:53:50,714 - INFO     - 
================================================================================
2025-10-29 13:53:50,714 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:53:50,714 - INFO     - ================================================================================
2025-10-29 13:53:50,714 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:50,714 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:53:50,714 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:53:50,714 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:50,715 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:50,715 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:50,715 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:50,715 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:50,715 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:50,715 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:50,715 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:50,715 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:50,715 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:50,715 - INFO     -   - ts1_id: 5
2025-10-29 13:53:50,715 - INFO     -   - ts2_id: 1
2025-10-29 13:53:50,715 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:50,715 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:50,715 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:50,715 - INFO     -   - Product space size: 10
2025-10-29 13:53:50,715 - INFO     -   - Using product state mapping
2025-10-29 13:53:50,715 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:50,716 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:50,716 - INFO     -   - avg_f_after:  3.7000 (10 valid states)
2025-10-29 13:53:50,716 - INFO     -   - delta: 0.9000
2025-10-29 13:53:50,716 - INFO     -   - f_stability: 1.0 - |0.9000| / 2.8000 = 0.6786
2025-10-29 13:53:50,716 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:50,716 - INFO     -   - Compared 7 values
2025-10-29 13:53:50,716 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:50,716 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:50,716 - INFO     -   - states_before: 10
2025-10-29 13:53:50,716 - INFO     -   - states_after: 10
2025-10-29 13:53:50,716 - INFO     -   - delta_states: 0
2025-10-29 13:53:50,716 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:50,716 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:50,716 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:50,716 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:50,716 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:50,717 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:50,717 - INFO     -   - search_signals present: True
2025-10-29 13:53:50,717 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:50,717 - INFO     -   - search_depth: 2
2025-10-29 13:53:50,717 - INFO     -   - solution_cost: 2
2025-10-29 13:53:50,717 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:50,717 - INFO     -   - solution_found: True
2025-10-29 13:53:50,717 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:50,717 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:50,717 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:53:50,717 - INFO     -   - TS5(5) + TS1(2) → 10 states
2025-10-29 13:53:50,717 - INFO     -   - f_stability=0.679
2025-10-29 13:53:50,717 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:50,717 - INFO     -   - solution_found=True
2025-10-29 13:53:50,717 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:50,717 - INFO     - 
  Extracted signals:
2025-10-29 13:53:50,717 - INFO     -     - iteration: 0
2025-10-29 13:53:50,717 - INFO     -     - states_before: 10
2025-10-29 13:53:50,717 - INFO     -     - states_after: 10
2025-10-29 13:53:50,717 - INFO     -     - delta_states: 0
2025-10-29 13:53:50,717 - INFO     -     - f_value_stability: 0.6786
2025-10-29 13:53:50,717 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:50,717 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:50,718 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:50,718 - INFO     -     - search_depth: 2
2025-10-29 13:53:50,718 - INFO     -     - solution_cost: 2
2025-10-29 13:53:50,718 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:50,718 - INFO     -     - solution_found: True
2025-10-29 13:53:50,718 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:50,718 - INFO     - 
  Computing reward:
2025-10-29 13:53:50,718 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:50,718 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:50,718 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:50,718 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:50,718 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:50,718 - INFO     -   [3] F-VALUE STABILITY: 0.286
2025-10-29 13:53:50,719 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:50,719 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:50,719 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:53:50,719 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:50,719 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:50,719 - INFO     -     + 0.350*0.286 (stability)
2025-10-29 13:53:50,719 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:50,719 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:50,719 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:50,719 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:50,719 - INFO     - 
  [FINAL REWARD]: 0.3244
2025-10-29 13:53:50,719 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:50,719 - INFO     -     ✓ Reward computed: 0.3244
2025-10-29 13:53:50,719 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:50,719 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:50,719 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:50,719 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:50,719 - INFO     -     - f_stability                    0.2862
2025-10-29 13:53:50,719 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:50,720 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:50,720 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:50,720 - INFO     -     - composite                      0.5622
2025-10-29 13:53:50,720 - INFO     -     - total                          0.3244
2025-10-29 13:53:50,720 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:50,720 - INFO     -   Num remaining nodes: 8
2025-10-29 13:53:50,720 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:53:50,720 - INFO     -   Done: False
2025-10-29 13:53:50,720 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:50,722 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:50,722 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:50,722 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:50,722 - INFO     -     - num_nodes: 8
2025-10-29 13:53:50,722 - INFO     -     - num_edges: 50
2025-10-29 13:53:50,722 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:50,722 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:53:50,722 - INFO     -   After: current_merge_step = 1
2025-10-29 13:53:50,722 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:50,722 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:50,722 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:50,723 - INFO     -   ✓ Step logged
2025-10-29 13:53:50,723 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:50,723 - INFO     -   Returning:
2025-10-29 13:53:50,723 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:50,723 - INFO     -     - reward: 0.3244
2025-10-29 13:53:50,723 - INFO     -     - done: False
2025-10-29 13:53:50,724 - INFO     -     - truncated: False
2025-10-29 13:53:50,724 - INFO     -     - info: 19 keys
2025-10-29 13:53:50,724 - INFO     - ==========================================================================================

2025-10-29 13:53:50,730 - INFO     - 
==========================================================================================
2025-10-29 13:53:50,730 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:50,730 - INFO     - ==========================================================================================
2025-10-29 13:53:50,730 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:50,730 - INFO     -   Input action: 32 (type: int)
2025-10-29 13:53:50,730 - INFO     -   Available edges in graph: 50
2025-10-29 13:53:50,730 - INFO     -   Action index calculation:
2025-10-29 13:53:50,731 - INFO     -     - action % max(num_valid_edges, 1) = 32 % 50 = 32
2025-10-29 13:53:50,731 - INFO     -     - clamped to [0, 49]: 32
2025-10-29 13:53:50,731 - INFO     -   ✓ Extracted merge pair from edge 32: (6, 9)
2025-10-29 13:53:50,731 - INFO     -   ✓ Validation passed
2025-10-29 13:53:50,731 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:50,731 - INFO     -     - Total states before merge: 33
2025-10-29 13:53:50,731 - INFO     -     - Num nodes: 8
2025-10-29 13:53:50,731 - INFO     -     - Num edges: 50
2025-10-29 13:53:50,731 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:50,731 - INFO     -       - Node 6: 5 states
2025-10-29 13:53:50,731 - INFO     -       - Node 9: 10 states
2025-10-29 13:53:50,731 - INFO     -       - Expected product: 50 states
2025-10-29 13:53:50,731 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:50,740 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:53:50,740 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:50,740 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:53:50,841 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:50,841 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:50,841 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:53:50,842 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:50,842 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:50,843 - INFO     -   Calling graph_tracker.merge_nodes([6, 9])...
2025-10-29 13:53:50,843 - INFO     - Attempting merge of nodes 6 and 9...
2025-10-29 13:53:50,843 - INFO     - Successfully merged nodes into new node 10 with 50 states.
2025-10-29 13:53:50,843 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:50,843 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:50,843 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:53:50,843 - INFO     - 
================================================================================
2025-10-29 13:53:50,843 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:53:50,843 - INFO     - ================================================================================
2025-10-29 13:53:50,843 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:50,843 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:53:50,843 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:53:50,844 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:50,844 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:50,844 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:50,844 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:50,844 - INFO     -   - Raw f_after length: 50
2025-10-29 13:53:50,844 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:50,844 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:50,845 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:50,845 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:53:50,845 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:50,845 - INFO     -   - ts1_id: 6
2025-10-29 13:53:50,845 - INFO     -   - ts2_id: 9
2025-10-29 13:53:50,845 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:50,845 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:50,845 - INFO     -   - ts1_size: 5, ts2_size: 10
2025-10-29 13:53:50,845 - INFO     -   - Product space size: 50
2025-10-29 13:53:50,845 - INFO     -   - Using product state mapping
2025-10-29 13:53:50,845 - INFO     -   - f_before_product length: 50
2025-10-29 13:53:50,846 - INFO     -   - avg_f_before: 4.1200 (50 valid states)
2025-10-29 13:53:50,846 - INFO     -   - avg_f_after:  6.5200 (50 valid states)
2025-10-29 13:53:50,846 - INFO     -   - delta: 2.4000
2025-10-29 13:53:50,846 - INFO     -   - f_stability: 1.0 - |2.4000| / 4.1200 = 0.4175
2025-10-29 13:53:50,846 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:50,846 - INFO     -   - Compared 15 values
2025-10-29 13:53:50,846 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:50,846 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:50,846 - INFO     -   - states_before: 50
2025-10-29 13:53:50,846 - INFO     -   - states_after: 50
2025-10-29 13:53:50,846 - INFO     -   - delta_states: 0
2025-10-29 13:53:50,846 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:50,847 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:50,847 - INFO     -   - ts2_transitions: 40
2025-10-29 13:53:50,847 - INFO     -   - merged_transitions: 260
2025-10-29 13:53:50,847 - INFO     -   - transition_density_change: 4.1400
2025-10-29 13:53:50,847 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:50,847 - INFO     -   - search_signals present: True
2025-10-29 13:53:50,847 - INFO     -   - nodes_expanded: 50
2025-10-29 13:53:50,847 - INFO     -   - search_depth: 3
2025-10-29 13:53:50,847 - INFO     -   - solution_cost: 2
2025-10-29 13:53:50,847 - INFO     -   - branching_factor: 5.2000
2025-10-29 13:53:50,847 - INFO     -   - solution_found: True
2025-10-29 13:53:50,847 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:50,847 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:50,847 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:53:50,847 - INFO     -   - TS6(5) + TS9(10) → 50 states
2025-10-29 13:53:50,847 - INFO     -   - f_stability=0.417
2025-10-29 13:53:50,848 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:53:50,848 - INFO     -   - solution_found=True
2025-10-29 13:53:50,848 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:50,848 - INFO     - 
  Extracted signals:
2025-10-29 13:53:50,848 - INFO     -     - iteration: 1
2025-10-29 13:53:50,849 - INFO     -     - states_before: 50
2025-10-29 13:53:50,849 - INFO     -     - states_after: 50
2025-10-29 13:53:50,849 - INFO     -     - delta_states: 0
2025-10-29 13:53:50,849 - INFO     -     - f_value_stability: 0.4175
2025-10-29 13:53:50,849 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:50,849 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:50,849 - INFO     -     - nodes_expanded: 50
2025-10-29 13:53:50,849 - INFO     -     - search_depth: 3
2025-10-29 13:53:50,849 - INFO     -     - solution_cost: 2
2025-10-29 13:53:50,849 - INFO     -     - branching_factor: 5.2000
2025-10-29 13:53:50,849 - INFO     -     - solution_found: True
2025-10-29 13:53:50,849 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:50,849 - INFO     - 
  Computing reward:
2025-10-29 13:53:50,849 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:50,849 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:50,849 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:50,850 - INFO     -   [1] BRANCHING FACTOR: 5.200 → score 0.407 (tolerable)
2025-10-29 13:53:50,850 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:50,850 - INFO     -   [3] F-VALUE STABILITY: 0.364
2025-10-29 13:53:50,850 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:50,851 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:50,851 - INFO     - 
  [COMPOSITE]: 0.534
2025-10-29 13:53:50,851 - INFO     -     = 0.300*0.407 (bf)
2025-10-29 13:53:50,851 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:50,851 - INFO     -     + 0.350*0.364 (stability)
2025-10-29 13:53:50,851 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:50,851 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:50,851 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:50,851 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:50,851 - INFO     - 
  [FINAL REWARD]: 0.3684
2025-10-29 13:53:50,851 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:50,851 - INFO     -     ✓ Reward computed: 0.3684
2025-10-29 13:53:50,851 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:50,851 - INFO     -     - bf_score                       0.4067
2025-10-29 13:53:50,851 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:50,851 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:50,851 - INFO     -     - f_stability                    0.3642
2025-10-29 13:53:50,851 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:50,852 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:50,852 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:50,852 - INFO     -     - composite                      0.5342
2025-10-29 13:53:50,852 - INFO     -     - total                          0.3684
2025-10-29 13:53:50,852 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:50,852 - INFO     -   Num remaining nodes: 7
2025-10-29 13:53:50,852 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:53:50,852 - INFO     -   Done: False
2025-10-29 13:53:50,852 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:50,853 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:50,853 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:50,853 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:50,853 - INFO     -     - num_nodes: 7
2025-10-29 13:53:50,853 - INFO     -     - num_edges: 40
2025-10-29 13:53:50,853 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:50,853 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:53:50,854 - INFO     -   After: current_merge_step = 2
2025-10-29 13:53:50,854 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:50,854 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:50,854 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:50,855 - INFO     -   ✓ Step logged
2025-10-29 13:53:50,855 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:50,855 - INFO     -   Returning:
2025-10-29 13:53:50,855 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:50,855 - INFO     -     - reward: 0.3684
2025-10-29 13:53:50,855 - INFO     -     - done: False
2025-10-29 13:53:50,855 - INFO     -     - truncated: False
2025-10-29 13:53:50,855 - INFO     -     - info: 19 keys
2025-10-29 13:53:50,855 - INFO     - ==========================================================================================

2025-10-29 13:53:50,861 - INFO     - 
==========================================================================================
2025-10-29 13:53:50,861 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:50,862 - INFO     - ==========================================================================================
2025-10-29 13:53:50,862 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:50,862 - INFO     -   Input action: 28 (type: int)
2025-10-29 13:53:50,862 - INFO     -   Available edges in graph: 40
2025-10-29 13:53:50,862 - INFO     -   Action index calculation:
2025-10-29 13:53:50,862 - INFO     -     - action % max(num_valid_edges, 1) = 28 % 40 = 28
2025-10-29 13:53:50,862 - INFO     -     - clamped to [0, 39]: 28
2025-10-29 13:53:50,862 - INFO     -   ✓ Extracted merge pair from edge 28: (7, 10)
2025-10-29 13:53:50,862 - INFO     -   ✓ Validation passed
2025-10-29 13:53:50,862 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:50,862 - INFO     -     - Total states before merge: 68
2025-10-29 13:53:50,862 - INFO     -     - Num nodes: 7
2025-10-29 13:53:50,862 - INFO     -     - Num edges: 40
2025-10-29 13:53:50,862 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:50,862 - INFO     -       - Node 7: 5 states
2025-10-29 13:53:50,862 - INFO     -       - Node 10: 50 states
2025-10-29 13:53:50,863 - INFO     -       - Expected product: 250 states
2025-10-29 13:53:50,863 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:50,868 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:53:50,868 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:50,868 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:53:50,968 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:50,969 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:50,969 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:53:50,971 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:50,971 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:50,971 - INFO     -   Calling graph_tracker.merge_nodes([7, 10])...
2025-10-29 13:53:50,971 - INFO     - Attempting merge of nodes 7 and 10...
2025-10-29 13:53:50,971 - INFO     - Successfully merged nodes into new node 11 with 250 states.
2025-10-29 13:53:50,972 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:50,972 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:50,972 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:53:50,972 - INFO     - 
================================================================================
2025-10-29 13:53:50,972 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:53:50,972 - INFO     - ================================================================================
2025-10-29 13:53:50,972 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:50,972 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:53:50,972 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:53:50,973 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:50,973 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:50,973 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:50,973 - INFO     -   - Raw ts2_f length: 50
2025-10-29 13:53:50,973 - INFO     -   - Raw f_after length: 250
2025-10-29 13:53:50,973 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:50,973 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:50,973 - INFO     -   - ts2_valid: 50 / 50 (removed -50)
2025-10-29 13:53:50,973 - INFO     -   - after_valid: 250 / 250 (removed 0)
2025-10-29 13:53:50,973 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:50,973 - INFO     -   - ts1_id: 7
2025-10-29 13:53:50,973 - INFO     -   - ts2_id: 10
2025-10-29 13:53:50,973 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:50,973 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:50,973 - INFO     -   - ts1_size: 5, ts2_size: 50
2025-10-29 13:53:50,974 - INFO     -   - Product space size: 250
2025-10-29 13:53:50,974 - INFO     -   - Using product state mapping
2025-10-29 13:53:50,974 - INFO     -   - f_before_product length: 250
2025-10-29 13:53:50,975 - INFO     -   - avg_f_before: 6.5760 (250 valid states)
2025-10-29 13:53:50,976 - INFO     -   - avg_f_after:  9.3160 (250 valid states)
2025-10-29 13:53:50,976 - INFO     -   - delta: 2.7400
2025-10-29 13:53:50,976 - INFO     -   - f_stability: 1.0 - |2.7400| / 6.5760 = 0.5833
2025-10-29 13:53:50,976 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:50,976 - INFO     -   - Compared 55 values
2025-10-29 13:53:50,976 - INFO     -   - Significant changes (> 5.0): 9
2025-10-29 13:53:50,976 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:50,976 - INFO     -   - states_before: 250
2025-10-29 13:53:50,976 - INFO     -   - states_after: 250
2025-10-29 13:53:50,976 - INFO     -   - delta_states: 0
2025-10-29 13:53:50,976 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:50,976 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:50,976 - INFO     -   - ts2_transitions: 260
2025-10-29 13:53:50,977 - INFO     -   - merged_transitions: 1675
2025-10-29 13:53:50,977 - INFO     -   - transition_density_change: 5.6080
2025-10-29 13:53:50,977 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:50,977 - INFO     -   - search_signals present: True
2025-10-29 13:53:50,977 - INFO     -   - nodes_expanded: 250
2025-10-29 13:53:50,977 - INFO     -   - search_depth: 5
2025-10-29 13:53:50,977 - INFO     -   - solution_cost: 4
2025-10-29 13:53:50,977 - INFO     -   - branching_factor: 6.7000
2025-10-29 13:53:50,977 - INFO     -   - solution_found: True
2025-10-29 13:53:50,977 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:50,978 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:50,978 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:53:50,978 - INFO     -   - TS7(5) + TS10(50) → 250 states
2025-10-29 13:53:50,978 - INFO     -   - f_stability=0.583
2025-10-29 13:53:50,978 - INFO     -   - A* nodes_expanded=250
2025-10-29 13:53:50,978 - INFO     -   - solution_found=True
2025-10-29 13:53:50,978 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:50,978 - INFO     - 
  Extracted signals:
2025-10-29 13:53:50,978 - INFO     -     - iteration: 2
2025-10-29 13:53:50,978 - INFO     -     - states_before: 250
2025-10-29 13:53:50,978 - INFO     -     - states_after: 250
2025-10-29 13:53:50,978 - INFO     -     - delta_states: 0
2025-10-29 13:53:50,978 - INFO     -     - f_value_stability: 0.5833
2025-10-29 13:53:50,978 - INFO     -     - num_significant_f_changes: 9
2025-10-29 13:53:50,979 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:50,979 - INFO     -     - nodes_expanded: 250
2025-10-29 13:53:50,979 - INFO     -     - search_depth: 5
2025-10-29 13:53:50,979 - INFO     -     - solution_cost: 4
2025-10-29 13:53:50,979 - INFO     -     - branching_factor: 6.7000
2025-10-29 13:53:50,979 - INFO     -     - solution_found: True
2025-10-29 13:53:50,979 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:50,979 - INFO     - 
  Computing reward:
2025-10-29 13:53:50,979 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:50,979 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:50,979 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:50,979 - INFO     -   [1] BRANCHING FACTOR: 6.700 → score 0.230 (high BF, minimal credit)
2025-10-29 13:53:50,979 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:50,979 - INFO     -   [3] F-VALUE STABILITY: 0.531
2025-10-29 13:53:50,979 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:50,979 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:50,981 - INFO     - 
  [COMPOSITE]: 0.529
2025-10-29 13:53:50,981 - INFO     -     = 0.300*0.230 (bf)
2025-10-29 13:53:50,981 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:50,981 - INFO     -     + 0.350*0.531 (stability)
2025-10-29 13:53:50,981 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:50,981 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:50,981 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:50,981 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:50,981 - INFO     - 
  [FINAL REWARD]: 0.4587
2025-10-29 13:53:50,981 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:50,981 - INFO     -     ✓ Reward computed: 0.4587
2025-10-29 13:53:50,981 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:50,981 - INFO     -     - bf_score                       0.2300
2025-10-29 13:53:50,981 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:50,981 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:50,981 - INFO     -     - f_stability                    0.5312
2025-10-29 13:53:50,981 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:50,981 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:50,981 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:50,981 - INFO     -     - composite                      0.5293
2025-10-29 13:53:50,982 - INFO     -     - total                          0.4587
2025-10-29 13:53:50,982 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:50,982 - INFO     -   Num remaining nodes: 6
2025-10-29 13:53:50,982 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:53:50,982 - INFO     -   Done: False
2025-10-29 13:53:50,982 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:50,983 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:50,983 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:50,983 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:50,983 - INFO     -     - num_nodes: 6
2025-10-29 13:53:50,983 - INFO     -     - num_edges: 30
2025-10-29 13:53:50,983 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:50,983 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:53:50,983 - INFO     -   After: current_merge_step = 3
2025-10-29 13:53:50,983 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:50,983 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:50,983 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:50,987 - INFO     -   ✓ Step logged
2025-10-29 13:53:50,987 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:50,987 - INFO     -   Returning:
2025-10-29 13:53:50,987 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:50,987 - INFO     -     - reward: 0.4587
2025-10-29 13:53:50,987 - INFO     -     - done: False
2025-10-29 13:53:50,987 - INFO     -     - truncated: False
2025-10-29 13:53:50,987 - INFO     -     - info: 19 keys
2025-10-29 13:53:50,987 - INFO     - ==========================================================================================

2025-10-29 13:53:50,995 - INFO     - 
==========================================================================================
2025-10-29 13:53:50,995 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:50,995 - INFO     - ==========================================================================================
2025-10-29 13:53:50,995 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:50,995 - INFO     -   Input action: 4 (type: int)
2025-10-29 13:53:50,995 - INFO     -   Available edges in graph: 30
2025-10-29 13:53:50,995 - INFO     -   Action index calculation:
2025-10-29 13:53:50,995 - INFO     -     - action % max(num_valid_edges, 1) = 4 % 30 = 4
2025-10-29 13:53:50,995 - INFO     -     - clamped to [0, 29]: 4
2025-10-29 13:53:50,995 - INFO     -   ✓ Extracted merge pair from edge 4: (0, 11)
2025-10-29 13:53:50,995 - INFO     -   ✓ Validation passed
2025-10-29 13:53:50,996 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:50,996 - INFO     -     - Total states before merge: 263
2025-10-29 13:53:50,996 - INFO     -     - Num nodes: 6
2025-10-29 13:53:50,996 - INFO     -     - Num edges: 30
2025-10-29 13:53:50,996 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:50,996 - INFO     -       - Node 0: 2 states
2025-10-29 13:53:50,996 - INFO     -       - Node 11: 250 states
2025-10-29 13:53:50,996 - INFO     -       - Expected product: 500 states
2025-10-29 13:53:50,996 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:51,002 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:53:51,002 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:51,002 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:53:51,102 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:51,102 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:51,102 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:53:51,109 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:53:51,109 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:51,109 - INFO     -   Calling graph_tracker.merge_nodes([0, 11])...
2025-10-29 13:53:51,109 - INFO     - Attempting merge of nodes 0 and 11...
2025-10-29 13:53:51,109 - INFO     - Successfully merged nodes into new node 12 with 500 states.
2025-10-29 13:53:51,109 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:51,110 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:51,110 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:53:51,110 - INFO     - 
================================================================================
2025-10-29 13:53:51,110 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:53:51,110 - INFO     - ================================================================================
2025-10-29 13:53:51,110 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:51,110 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:53:51,110 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:53:51,111 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:51,111 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:51,111 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:51,111 - INFO     -   - Raw ts2_f length: 250
2025-10-29 13:53:51,112 - INFO     -   - Raw f_after length: 500
2025-10-29 13:53:51,112 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:51,112 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:51,112 - INFO     -   - ts2_valid: 250 / 250 (removed -250)
2025-10-29 13:53:51,113 - INFO     -   - after_valid: 500 / 500 (removed 0)
2025-10-29 13:53:51,113 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:51,113 - INFO     -   - ts1_id: 0
2025-10-29 13:53:51,113 - INFO     -   - ts2_id: 11
2025-10-29 13:53:51,113 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:51,113 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:51,113 - INFO     -   - ts1_size: 2, ts2_size: 250
2025-10-29 13:53:51,113 - INFO     -   - Product space size: 500
2025-10-29 13:53:51,113 - INFO     -   - Using product state mapping
2025-10-29 13:53:51,114 - INFO     -   - f_before_product length: 500
2025-10-29 13:53:51,116 - INFO     -   - avg_f_before: 9.3160 (500 valid states)
2025-10-29 13:53:51,116 - INFO     -   - avg_f_after:  10.1320 (500 valid states)
2025-10-29 13:53:51,116 - INFO     -   - delta: 0.8160
2025-10-29 13:53:51,116 - INFO     -   - f_stability: 1.0 - |0.8160| / 9.3160 = 0.9124
2025-10-29 13:53:51,116 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:51,116 - INFO     -   - Compared 252 values
2025-10-29 13:53:51,116 - INFO     -   - Significant changes (> 5.0): 7
2025-10-29 13:53:51,116 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:51,116 - INFO     -   - states_before: 500
2025-10-29 13:53:51,116 - INFO     -   - states_after: 500
2025-10-29 13:53:51,117 - INFO     -   - delta_states: 0
2025-10-29 13:53:51,117 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:51,117 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:51,117 - INFO     -   - ts2_transitions: 1675
2025-10-29 13:53:51,117 - INFO     -   - merged_transitions: 3800
2025-10-29 13:53:51,117 - INFO     -   - transition_density_change: 4.2400
2025-10-29 13:53:51,117 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:51,117 - INFO     -   - search_signals present: True
2025-10-29 13:53:51,117 - INFO     -   - nodes_expanded: 500
2025-10-29 13:53:51,117 - INFO     -   - search_depth: 5
2025-10-29 13:53:51,117 - INFO     -   - solution_cost: 4
2025-10-29 13:53:51,117 - INFO     -   - branching_factor: 7.6000
2025-10-29 13:53:51,118 - INFO     -   - solution_found: True
2025-10-29 13:53:51,118 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:51,118 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:51,119 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:53:51,119 - INFO     -   - TS0(2) + TS11(250) → 500 states
2025-10-29 13:53:51,119 - INFO     -   - f_stability=0.912
2025-10-29 13:53:51,119 - INFO     -   - A* nodes_expanded=500
2025-10-29 13:53:51,119 - INFO     -   - solution_found=True
2025-10-29 13:53:51,119 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:51,119 - INFO     - 
  Extracted signals:
2025-10-29 13:53:51,119 - INFO     -     - iteration: 3
2025-10-29 13:53:51,119 - INFO     -     - states_before: 500
2025-10-29 13:53:51,119 - INFO     -     - states_after: 500
2025-10-29 13:53:51,119 - INFO     -     - delta_states: 0
2025-10-29 13:53:51,119 - INFO     -     - f_value_stability: 0.9124
2025-10-29 13:53:51,119 - INFO     -     - num_significant_f_changes: 7
2025-10-29 13:53:51,120 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:51,120 - INFO     -     - nodes_expanded: 500
2025-10-29 13:53:51,120 - INFO     -     - search_depth: 5
2025-10-29 13:53:51,120 - INFO     -     - solution_cost: 4
2025-10-29 13:53:51,120 - INFO     -     - branching_factor: 7.6000
2025-10-29 13:53:51,120 - INFO     -     - solution_found: True
2025-10-29 13:53:51,120 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:51,120 - INFO     - 
  Computing reward:
2025-10-29 13:53:51,120 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:51,120 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:51,120 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:51,121 - INFO     -   [1] BRANCHING FACTOR: 7.600 → score 0.140 (high BF, minimal credit)
2025-10-29 13:53:51,121 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:51,121 - INFO     -   [3] F-VALUE STABILITY: 0.993
2025-10-29 13:53:51,122 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:51,122 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:51,122 - INFO     - 
  [COMPOSITE]: 0.664
2025-10-29 13:53:51,122 - INFO     -     = 0.300*0.140 (bf)
2025-10-29 13:53:51,122 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:51,122 - INFO     -     + 0.350*0.993 (stability)
2025-10-29 13:53:51,122 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:51,122 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:51,122 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:51,122 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:51,122 - INFO     - 
  [FINAL REWARD]: 0.8279
2025-10-29 13:53:51,123 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:51,123 - INFO     -     ✓ Reward computed: 0.8279
2025-10-29 13:53:51,123 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:51,123 - INFO     -     - bf_score                       0.1400
2025-10-29 13:53:51,123 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:51,123 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:51,123 - INFO     -     - f_stability                    0.9930
2025-10-29 13:53:51,123 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:51,123 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:51,123 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:51,123 - INFO     -     - composite                      0.6640
2025-10-29 13:53:51,123 - INFO     -     - total                          0.8279
2025-10-29 13:53:51,123 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:51,123 - INFO     -   Num remaining nodes: 5
2025-10-29 13:53:51,123 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:53:51,123 - INFO     -   Done: False
2025-10-29 13:53:51,125 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:51,126 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:51,126 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:51,126 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:51,126 - INFO     -     - num_nodes: 5
2025-10-29 13:53:51,126 - INFO     -     - num_edges: 20
2025-10-29 13:53:51,126 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:51,126 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:53:51,126 - INFO     -   After: current_merge_step = 4
2025-10-29 13:53:51,127 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:51,127 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:51,127 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:51,128 - INFO     -   ✓ Step logged
2025-10-29 13:53:51,128 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:51,128 - INFO     -   Returning:
2025-10-29 13:53:51,128 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:51,128 - INFO     -     - reward: 0.8279
2025-10-29 13:53:51,128 - INFO     -     - done: False
2025-10-29 13:53:51,128 - INFO     -     - truncated: False
2025-10-29 13:53:51,129 - INFO     -     - info: 19 keys
2025-10-29 13:53:51,129 - INFO     - ==========================================================================================

2025-10-29 13:53:51,138 - INFO     - 
==========================================================================================
2025-10-29 13:53:51,138 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:51,138 - INFO     - ==========================================================================================
2025-10-29 13:53:51,139 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:51,139 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:53:51,139 - INFO     -   Available edges in graph: 20
2025-10-29 13:53:51,139 - INFO     -   Action index calculation:
2025-10-29 13:53:51,139 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 20 = 3
2025-10-29 13:53:51,139 - INFO     -     - clamped to [0, 19]: 3
2025-10-29 13:53:51,139 - INFO     -   ✓ Extracted merge pair from edge 3: (2, 12)
2025-10-29 13:53:51,139 - INFO     -   ✓ Validation passed
2025-10-29 13:53:51,139 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:51,139 - INFO     -     - Total states before merge: 511
2025-10-29 13:53:51,139 - INFO     -     - Num nodes: 5
2025-10-29 13:53:51,139 - INFO     -     - Num edges: 20
2025-10-29 13:53:51,140 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:51,140 - INFO     -       - Node 2: 2 states
2025-10-29 13:53:51,140 - INFO     -       - Node 12: 500 states
2025-10-29 13:53:51,140 - INFO     -       - Expected product: 1000 states
2025-10-29 13:53:51,140 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:51,149 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:53:51,149 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:51,149 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:53:51,250 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:51,250 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:51,250 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:53:51,259 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:53:51,259 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:51,259 - INFO     -   Calling graph_tracker.merge_nodes([2, 12])...
2025-10-29 13:53:51,259 - INFO     - Attempting merge of nodes 2 and 12...
2025-10-29 13:53:51,259 - INFO     - Successfully merged nodes into new node 13 with 1000 states.
2025-10-29 13:53:51,259 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:51,260 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:51,260 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:53:51,260 - INFO     - 
================================================================================
2025-10-29 13:53:51,260 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:53:51,260 - INFO     - ================================================================================
2025-10-29 13:53:51,260 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:51,260 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:53:51,260 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:53:51,262 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:51,262 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:51,262 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:51,262 - INFO     -   - Raw ts2_f length: 500
2025-10-29 13:53:51,262 - INFO     -   - Raw f_after length: 1000
2025-10-29 13:53:51,262 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:51,262 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:51,262 - INFO     -   - ts2_valid: 500 / 500 (removed -500)
2025-10-29 13:53:51,263 - INFO     -   - after_valid: 1000 / 1000 (removed 0)
2025-10-29 13:53:51,263 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:51,263 - INFO     -   - ts1_id: 2
2025-10-29 13:53:51,263 - INFO     -   - ts2_id: 12
2025-10-29 13:53:51,263 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:51,263 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:51,264 - INFO     -   - ts1_size: 2, ts2_size: 500
2025-10-29 13:53:51,264 - INFO     -   - Product space size: 1000
2025-10-29 13:53:51,264 - INFO     -   - Using product state mapping
2025-10-29 13:53:51,266 - INFO     -   - f_before_product length: 1000
2025-10-29 13:53:51,269 - INFO     -   - avg_f_before: 10.1320 (1000 valid states)
2025-10-29 13:53:51,269 - INFO     -   - avg_f_after:  10.9790 (1000 valid states)
2025-10-29 13:53:51,269 - INFO     -   - delta: 0.8470
2025-10-29 13:53:51,269 - INFO     -   - f_stability: 1.0 - |0.8470| / 10.1320 = 0.9164
2025-10-29 13:53:51,269 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:51,269 - INFO     -   - Compared 502 values
2025-10-29 13:53:51,270 - INFO     -   - Significant changes (> 5.0): 23
2025-10-29 13:53:51,270 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:51,270 - INFO     -   - states_before: 1000
2025-10-29 13:53:51,270 - INFO     -   - states_after: 1000
2025-10-29 13:53:51,270 - INFO     -   - delta_states: 0
2025-10-29 13:53:51,270 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:51,270 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:51,270 - INFO     -   - ts2_transitions: 3800
2025-10-29 13:53:51,270 - INFO     -   - merged_transitions: 8500
2025-10-29 13:53:51,270 - INFO     -   - transition_density_change: 4.6950
2025-10-29 13:53:51,270 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:51,270 - INFO     -   - search_signals present: True
2025-10-29 13:53:51,270 - INFO     -   - nodes_expanded: 1000
2025-10-29 13:53:51,271 - INFO     -   - search_depth: 5
2025-10-29 13:53:51,271 - INFO     -   - solution_cost: 4
2025-10-29 13:53:51,271 - INFO     -   - branching_factor: 8.5000
2025-10-29 13:53:51,271 - INFO     -   - solution_found: True
2025-10-29 13:53:51,271 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:51,272 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:51,272 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:53:51,272 - INFO     -   - TS2(2) + TS12(500) → 1000 states
2025-10-29 13:53:51,272 - INFO     -   - f_stability=0.916
2025-10-29 13:53:51,272 - INFO     -   - A* nodes_expanded=1000
2025-10-29 13:53:51,272 - INFO     -   - solution_found=True
2025-10-29 13:53:51,272 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:51,272 - INFO     - 
  Extracted signals:
2025-10-29 13:53:51,272 - INFO     -     - iteration: 4
2025-10-29 13:53:51,272 - INFO     -     - states_before: 1000
2025-10-29 13:53:51,272 - INFO     -     - states_after: 1000
2025-10-29 13:53:51,272 - INFO     -     - delta_states: 0
2025-10-29 13:53:51,272 - INFO     -     - f_value_stability: 0.9164
2025-10-29 13:53:51,272 - INFO     -     - num_significant_f_changes: 23
2025-10-29 13:53:51,272 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:51,272 - INFO     -     - nodes_expanded: 1000
2025-10-29 13:53:51,273 - INFO     -     - search_depth: 5
2025-10-29 13:53:51,273 - INFO     -     - solution_cost: 4
2025-10-29 13:53:51,273 - INFO     -     - branching_factor: 8.5000
2025-10-29 13:53:51,273 - INFO     -     - solution_found: True
2025-10-29 13:53:51,273 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:51,273 - WARNING  -     ⚠️  High branching factor: 8.5000
2025-10-29 13:53:51,273 - INFO     - 
  Computing reward:
2025-10-29 13:53:51,273 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:51,273 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:51,273 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:51,273 - INFO     -   [1] BRANCHING FACTOR: 8.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:53:51,273 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:51,274 - INFO     -   [3] F-VALUE STABILITY: 0.914
2025-10-29 13:53:51,274 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:51,274 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:51,274 - INFO     - 
  [COMPOSITE]: 0.624
2025-10-29 13:53:51,274 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:53:51,274 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:51,275 - INFO     -     + 0.350*0.914 (stability)
2025-10-29 13:53:51,275 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:51,275 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:51,275 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:51,275 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:51,275 - INFO     - 
  [FINAL REWARD]: 0.7485
2025-10-29 13:53:51,275 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:51,275 - INFO     -     ✓ Reward computed: 0.7485
2025-10-29 13:53:51,275 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:51,275 - INFO     -     - bf_score                       0.1000
2025-10-29 13:53:51,275 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:51,275 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:51,276 - INFO     -     - f_stability                    0.9138
2025-10-29 13:53:51,276 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:51,276 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:51,276 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:51,276 - INFO     -     - composite                      0.6243
2025-10-29 13:53:51,276 - INFO     -     - total                          0.7485
2025-10-29 13:53:51,276 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:51,276 - INFO     -   Num remaining nodes: 4
2025-10-29 13:53:51,276 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:53:51,276 - INFO     -   Done: False
2025-10-29 13:53:51,276 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:51,277 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:51,277 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:51,277 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:51,277 - INFO     -     - num_nodes: 4
2025-10-29 13:53:51,277 - INFO     -     - num_edges: 12
2025-10-29 13:53:51,277 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:51,277 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:53:51,277 - INFO     -   After: current_merge_step = 5
2025-10-29 13:53:51,277 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:51,277 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:51,278 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:51,278 - INFO     -   ✓ Step logged
2025-10-29 13:53:51,278 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:51,278 - INFO     -   Returning:
2025-10-29 13:53:51,278 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:51,278 - INFO     -     - reward: 0.7485
2025-10-29 13:53:51,279 - INFO     -     - done: False
2025-10-29 13:53:51,279 - INFO     -     - truncated: False
2025-10-29 13:53:51,279 - INFO     -     - info: 19 keys
2025-10-29 13:53:51,279 - INFO     - ==========================================================================================

2025-10-29 13:53:51,286 - INFO     - 
==========================================================================================
2025-10-29 13:53:51,286 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:51,286 - INFO     - ==========================================================================================
2025-10-29 13:53:51,286 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:51,286 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:53:51,286 - INFO     -   Available edges in graph: 12
2025-10-29 13:53:51,286 - INFO     -   Action index calculation:
2025-10-29 13:53:51,286 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 12 = 2
2025-10-29 13:53:51,287 - INFO     -     - clamped to [0, 11]: 2
2025-10-29 13:53:51,287 - INFO     -   ✓ Extracted merge pair from edge 2: (3, 13)
2025-10-29 13:53:51,287 - INFO     -   ✓ Validation passed
2025-10-29 13:53:51,287 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:51,287 - INFO     -     - Total states before merge: 1009
2025-10-29 13:53:51,287 - INFO     -     - Num nodes: 4
2025-10-29 13:53:51,287 - INFO     -     - Num edges: 12
2025-10-29 13:53:51,287 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:51,287 - INFO     -       - Node 3: 2 states
2025-10-29 13:53:51,287 - INFO     -       - Node 13: 1000 states
2025-10-29 13:53:51,287 - INFO     -       - Expected product: 2000 states
2025-10-29 13:53:51,287 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:51,294 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:53:51,294 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:51,294 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:53:51,395 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:51,395 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:51,395 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:53:51,642 - INFO     -   ✓ TS file received after 0.25s
2025-10-29 13:53:51,643 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:51,643 - INFO     -   Calling graph_tracker.merge_nodes([3, 13])...
2025-10-29 13:53:51,643 - INFO     - Attempting merge of nodes 3 and 13...
2025-10-29 13:53:51,643 - INFO     - Successfully merged nodes into new node 14 with 2000 states.
2025-10-29 13:53:51,644 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:51,645 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:51,645 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:53:51,645 - INFO     - 
================================================================================
2025-10-29 13:53:51,645 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:53:51,646 - INFO     - ================================================================================
2025-10-29 13:53:51,646 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:51,646 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:53:51,646 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:53:51,654 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:51,654 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:51,654 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:51,655 - INFO     -   - Raw ts2_f length: 1000
2025-10-29 13:53:51,656 - INFO     -   - Raw f_after length: 2000
2025-10-29 13:53:51,656 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:51,656 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:51,657 - INFO     -   - ts2_valid: 1000 / 1000 (removed -1000)
2025-10-29 13:53:51,660 - INFO     -   - after_valid: 2000 / 2000 (removed 0)
2025-10-29 13:53:51,660 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:51,660 - INFO     -   - ts1_id: 3
2025-10-29 13:53:51,660 - INFO     -   - ts2_id: 13
2025-10-29 13:53:51,660 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:51,660 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:51,661 - INFO     -   - ts1_size: 2, ts2_size: 1000
2025-10-29 13:53:51,661 - INFO     -   - Product space size: 2000
2025-10-29 13:53:51,661 - INFO     -   - Using product state mapping
2025-10-29 13:53:51,666 - INFO     -   - f_before_product length: 2000
2025-10-29 13:53:51,675 - INFO     -   - avg_f_before: 10.9790 (2000 valid states)
2025-10-29 13:53:51,675 - INFO     -   - avg_f_after:  12.5360 (2000 valid states)
2025-10-29 13:53:51,675 - INFO     -   - delta: 1.5570
2025-10-29 13:53:51,675 - INFO     -   - f_stability: 1.0 - |1.5570| / 10.9790 = 0.8582
2025-10-29 13:53:51,675 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:51,675 - INFO     -   - Compared 1002 values
2025-10-29 13:53:51,675 - INFO     -   - Significant changes (> 5.0): 76
2025-10-29 13:53:51,676 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:51,676 - INFO     -   - states_before: 2000
2025-10-29 13:53:51,676 - INFO     -   - states_after: 2000
2025-10-29 13:53:51,676 - INFO     -   - delta_states: 0
2025-10-29 13:53:51,676 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:51,676 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:51,676 - INFO     -   - ts2_transitions: 8500
2025-10-29 13:53:51,676 - INFO     -   - merged_transitions: 14400
2025-10-29 13:53:51,676 - INFO     -   - transition_density_change: 2.9475
2025-10-29 13:53:51,676 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:51,676 - INFO     -   - search_signals present: True
2025-10-29 13:53:51,677 - INFO     -   - nodes_expanded: 2000
2025-10-29 13:53:51,677 - INFO     -   - search_depth: 6
2025-10-29 13:53:51,677 - INFO     -   - solution_cost: 4
2025-10-29 13:53:51,677 - INFO     -   - branching_factor: 7.2000
2025-10-29 13:53:51,677 - INFO     -   - solution_found: True
2025-10-29 13:53:51,677 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:51,678 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:51,678 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:53:51,679 - INFO     -   - TS3(2) + TS13(1000) → 2000 states
2025-10-29 13:53:51,679 - INFO     -   - f_stability=0.858
2025-10-29 13:53:51,679 - INFO     -   - A* nodes_expanded=2000
2025-10-29 13:53:51,679 - INFO     -   - solution_found=True
2025-10-29 13:53:51,679 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:51,679 - INFO     - 
  Extracted signals:
2025-10-29 13:53:51,679 - INFO     -     - iteration: 5
2025-10-29 13:53:51,679 - INFO     -     - states_before: 2000
2025-10-29 13:53:51,679 - INFO     -     - states_after: 2000
2025-10-29 13:53:51,679 - INFO     -     - delta_states: 0
2025-10-29 13:53:51,679 - INFO     -     - f_value_stability: 0.8582
2025-10-29 13:53:51,680 - INFO     -     - num_significant_f_changes: 76
2025-10-29 13:53:51,680 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:51,680 - INFO     -     - nodes_expanded: 2000
2025-10-29 13:53:51,680 - INFO     -     - search_depth: 6
2025-10-29 13:53:51,680 - INFO     -     - solution_cost: 4
2025-10-29 13:53:51,680 - INFO     -     - branching_factor: 7.2000
2025-10-29 13:53:51,680 - INFO     -     - solution_found: True
2025-10-29 13:53:51,680 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:51,681 - INFO     - 
  Computing reward:
2025-10-29 13:53:51,681 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:51,681 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:51,681 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:51,681 - INFO     -   [1] BRANCHING FACTOR: 7.200 → score 0.180 (high BF, minimal credit)
2025-10-29 13:53:51,681 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:51,682 - INFO     -   [3] F-VALUE STABILITY: 0.900
2025-10-29 13:53:51,682 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:51,682 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:51,682 - INFO     - 
  [COMPOSITE]: 0.640
2025-10-29 13:53:51,682 - INFO     -     = 0.300*0.180 (bf)
2025-10-29 13:53:51,683 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:51,683 - INFO     -     + 0.350*0.900 (stability)
2025-10-29 13:53:51,683 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:51,683 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:51,683 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:51,683 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:51,683 - INFO     - 
  [FINAL REWARD]: 0.7793
2025-10-29 13:53:51,683 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:51,683 - INFO     -     ✓ Reward computed: 0.7793
2025-10-29 13:53:51,684 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:51,684 - INFO     -     - bf_score                       0.1800
2025-10-29 13:53:51,684 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:51,684 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:51,684 - INFO     -     - f_stability                    0.9004
2025-10-29 13:53:51,684 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:51,684 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:51,684 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:51,684 - INFO     -     - composite                      0.6397
2025-10-29 13:53:51,684 - INFO     -     - total                          0.7793
2025-10-29 13:53:51,684 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:51,684 - INFO     -   Num remaining nodes: 3
2025-10-29 13:53:51,684 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:53:51,684 - INFO     -   Done: False
2025-10-29 13:53:51,685 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:51,685 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:51,685 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:51,685 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:51,685 - INFO     -     - num_nodes: 3
2025-10-29 13:53:51,685 - INFO     -     - num_edges: 6
2025-10-29 13:53:51,685 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:51,685 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:53:51,685 - INFO     -   After: current_merge_step = 6
2025-10-29 13:53:51,685 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:51,685 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:51,685 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:51,687 - INFO     -   ✓ Step logged
2025-10-29 13:53:51,687 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:51,687 - INFO     -   Returning:
2025-10-29 13:53:51,687 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:51,687 - INFO     -     - reward: 0.7793
2025-10-29 13:53:51,687 - INFO     -     - done: False
2025-10-29 13:53:51,687 - INFO     -     - truncated: False
2025-10-29 13:53:51,687 - INFO     -     - info: 19 keys
2025-10-29 13:53:51,687 - INFO     - ==========================================================================================

2025-10-29 13:53:51,693 - INFO     - 
==========================================================================================
2025-10-29 13:53:51,693 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:51,694 - INFO     - ==========================================================================================
2025-10-29 13:53:51,694 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:51,694 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:53:51,694 - INFO     -   Available edges in graph: 6
2025-10-29 13:53:51,694 - INFO     -   Action index calculation:
2025-10-29 13:53:51,694 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 6 = 1
2025-10-29 13:53:51,694 - INFO     -     - clamped to [0, 5]: 1
2025-10-29 13:53:51,694 - INFO     -   ✓ Extracted merge pair from edge 1: (4, 14)
2025-10-29 13:53:51,694 - INFO     -   ✓ Validation passed
2025-10-29 13:53:51,694 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:51,694 - INFO     -     - Total states before merge: 2007
2025-10-29 13:53:51,694 - INFO     -     - Num nodes: 3
2025-10-29 13:53:51,694 - INFO     -     - Num edges: 6
2025-10-29 13:53:51,694 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:51,694 - INFO     -       - Node 4: 2 states
2025-10-29 13:53:51,694 - INFO     -       - Node 14: 2000 states
2025-10-29 13:53:51,694 - INFO     -       - Expected product: 4000 states
2025-10-29 13:53:51,695 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:51,704 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:53:51,704 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:51,705 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:53:51,805 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:51,805 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:51,805 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:53:52,071 - INFO     -   ✓ TS file received after 0.27s
2025-10-29 13:53:52,072 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:52,072 - INFO     -   Calling graph_tracker.merge_nodes([4, 14])...
2025-10-29 13:53:52,072 - INFO     - Attempting merge of nodes 4 and 14...
2025-10-29 13:53:52,072 - INFO     - Successfully merged nodes into new node 15 with 4000 states.
2025-10-29 13:53:52,072 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:52,072 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:52,073 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:53:52,073 - INFO     - 
================================================================================
2025-10-29 13:53:52,073 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:53:52,073 - INFO     - ================================================================================
2025-10-29 13:53:52,073 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:52,073 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:53:52,073 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:53:52,079 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:52,079 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:52,079 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:52,080 - INFO     -   - Raw ts2_f length: 2000
2025-10-29 13:53:52,080 - INFO     -   - Raw f_after length: 4000
2025-10-29 13:53:52,080 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:52,080 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:52,081 - INFO     -   - ts2_valid: 2000 / 2000 (removed -2000)
2025-10-29 13:53:52,083 - INFO     -   - after_valid: 2984 / 4000 (removed 1016)
2025-10-29 13:53:52,083 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:52,083 - INFO     -   - ts1_id: 4
2025-10-29 13:53:52,083 - INFO     -   - ts2_id: 14
2025-10-29 13:53:52,083 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:52,083 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:52,083 - INFO     -   - ts1_size: 2, ts2_size: 2000
2025-10-29 13:53:52,083 - INFO     -   - Product space size: 4000
2025-10-29 13:53:52,083 - INFO     -   - Using product state mapping
2025-10-29 13:53:52,090 - INFO     -   - f_before_product length: 4000
2025-10-29 13:53:52,098 - INFO     -   - avg_f_before: 12.5360 (4000 valid states)
2025-10-29 13:53:52,098 - INFO     -   - avg_f_after:  13.3747 (2984 valid states)
2025-10-29 13:53:52,098 - INFO     -   - delta: 0.8387
2025-10-29 13:53:52,098 - INFO     -   - f_stability: 1.0 - |0.8387| / 12.5360 = 0.9331
2025-10-29 13:53:52,098 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:52,099 - INFO     -   - Compared 2002 values
2025-10-29 13:53:52,099 - INFO     -   - Significant changes (> 5.0): 287
2025-10-29 13:53:52,099 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:52,099 - INFO     -   - states_before: 4000
2025-10-29 13:53:52,099 - INFO     -   - states_after: 4000
2025-10-29 13:53:52,099 - INFO     -   - delta_states: 0
2025-10-29 13:53:52,099 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:52,099 - INFO     -   - ts1_transitions: 3
2025-10-29 13:53:52,099 - INFO     -   - ts2_transitions: 14400
2025-10-29 13:53:52,099 - INFO     -   - merged_transitions: 22400
2025-10-29 13:53:52,099 - INFO     -   - transition_density_change: 1.9992
2025-10-29 13:53:52,099 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:52,099 - INFO     -   - search_signals present: True
2025-10-29 13:53:52,099 - INFO     -   - nodes_expanded: 2984
2025-10-29 13:53:52,099 - INFO     -   - search_depth: 6
2025-10-29 13:53:52,100 - INFO     -   - solution_cost: 4
2025-10-29 13:53:52,100 - INFO     -   - branching_factor: 7.5067
2025-10-29 13:53:52,105 - INFO     -   - solution_found: True
2025-10-29 13:53:52,105 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:52,110 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:52,110 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:53:52,110 - INFO     -   - TS4(2) + TS14(2000) → 4000 states
2025-10-29 13:53:52,110 - INFO     -   - f_stability=0.933
2025-10-29 13:53:52,110 - INFO     -   - A* nodes_expanded=2984
2025-10-29 13:53:52,110 - INFO     -   - solution_found=True
2025-10-29 13:53:52,110 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:52,110 - INFO     - 
  Extracted signals:
2025-10-29 13:53:52,110 - INFO     -     - iteration: 6
2025-10-29 13:53:52,111 - INFO     -     - states_before: 4000
2025-10-29 13:53:52,111 - INFO     -     - states_after: 4000
2025-10-29 13:53:52,111 - INFO     -     - delta_states: 0
2025-10-29 13:53:52,111 - INFO     -     - f_value_stability: 0.9331
2025-10-29 13:53:52,111 - INFO     -     - num_significant_f_changes: 287
2025-10-29 13:53:52,111 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:52,111 - INFO     -     - nodes_expanded: 2984
2025-10-29 13:53:52,111 - INFO     -     - search_depth: 6
2025-10-29 13:53:52,111 - INFO     -     - solution_cost: 4
2025-10-29 13:53:52,111 - INFO     -     - branching_factor: 7.5067
2025-10-29 13:53:52,111 - INFO     -     - solution_found: True
2025-10-29 13:53:52,111 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:52,112 - INFO     - 
  Computing reward:
2025-10-29 13:53:52,112 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:52,113 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:52,113 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:52,113 - INFO     -   [1] BRANCHING FACTOR: 7.507 → score 0.149 (high BF, minimal credit)
2025-10-29 13:53:52,113 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:52,115 - INFO     -   [3] F-VALUE STABILITY: 0.931
2025-10-29 13:53:52,116 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:52,116 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:52,116 - INFO     - 
  [COMPOSITE]: 0.641
2025-10-29 13:53:52,116 - INFO     -     = 0.300*0.149 (bf)
2025-10-29 13:53:52,116 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:52,116 - INFO     -     + 0.350*0.931 (stability)
2025-10-29 13:53:52,116 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:52,116 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:52,116 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:52,116 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:52,117 - INFO     - 
  [FINAL REWARD]: 0.7826
2025-10-29 13:53:52,118 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:52,118 - INFO     -     ✓ Reward computed: 0.7826
2025-10-29 13:53:52,118 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:52,118 - INFO     -     - bf_score                       0.1493
2025-10-29 13:53:52,118 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:52,118 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:52,118 - INFO     -     - f_stability                    0.9314
2025-10-29 13:53:52,118 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:52,118 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:52,118 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:52,118 - INFO     -     - composite                      0.6413
2025-10-29 13:53:52,118 - INFO     -     - total                          0.7826
2025-10-29 13:53:52,118 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:52,118 - INFO     -   Num remaining nodes: 2
2025-10-29 13:53:52,119 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:53:52,119 - INFO     -   Done: False
2025-10-29 13:53:52,119 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:52,119 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:52,119 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:52,119 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:52,119 - INFO     -     - num_nodes: 2
2025-10-29 13:53:52,119 - INFO     -     - num_edges: 2
2025-10-29 13:53:52,119 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:52,119 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:53:52,119 - INFO     -   After: current_merge_step = 7
2025-10-29 13:53:52,119 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:52,119 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:52,119 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:52,120 - INFO     -   ✓ Step logged
2025-10-29 13:53:52,120 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:52,120 - INFO     -   Returning:
2025-10-29 13:53:52,120 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:52,121 - INFO     -     - reward: 0.7826
2025-10-29 13:53:52,121 - INFO     -     - done: False
2025-10-29 13:53:52,121 - INFO     -     - truncated: False
2025-10-29 13:53:52,121 - INFO     -     - info: 19 keys
2025-10-29 13:53:52,121 - INFO     - ==========================================================================================

2025-10-29 13:53:52,128 - INFO     - 
==========================================================================================
2025-10-29 13:53:52,128 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:52,128 - INFO     - ==========================================================================================
2025-10-29 13:53:52,128 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:52,128 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:53:52,128 - INFO     -   Available edges in graph: 2
2025-10-29 13:53:52,128 - INFO     -   Action index calculation:
2025-10-29 13:53:52,128 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:53:52,128 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:53:52,128 - INFO     -   ✓ Extracted merge pair from edge 0: (8, 15)
2025-10-29 13:53:52,128 - INFO     -   ✓ Validation passed
2025-10-29 13:53:52,128 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:52,129 - INFO     -     - Total states before merge: 4005
2025-10-29 13:53:52,129 - INFO     -     - Num nodes: 2
2025-10-29 13:53:52,129 - INFO     -     - Num edges: 2
2025-10-29 13:53:52,129 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:52,129 - INFO     -       - Node 8: 5 states
2025-10-29 13:53:52,129 - INFO     -       - Node 15: 4000 states
2025-10-29 13:53:52,129 - INFO     -       - Expected product: 20000 states
2025-10-29 13:53:52,129 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:52,135 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:53:52,135 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:52,135 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:53:52,236 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:52,236 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:52,236 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:53:52,478 - INFO     -   ✓ TS file received after 0.24s
2025-10-29 13:53:52,478 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:52,478 - INFO     -   Calling graph_tracker.merge_nodes([8, 15])...
2025-10-29 13:53:52,479 - INFO     - Attempting merge of nodes 8 and 15...
2025-10-29 13:53:52,479 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:53:52,479 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:52,479 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:52,479 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:53:52,479 - INFO     - 
================================================================================
2025-10-29 13:53:52,479 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:53:52,479 - INFO     - ================================================================================
2025-10-29 13:53:52,479 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:52,479 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:53:52,479 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:53:52,483 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:52,483 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:52,483 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:52,483 - INFO     -   - Raw ts2_f length: 668
2025-10-29 13:53:52,483 - INFO     -   - Raw f_after length: 3340
2025-10-29 13:53:52,483 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:52,483 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:52,484 - INFO     -   - ts2_valid: 668 / 668 (removed -668)
2025-10-29 13:53:52,485 - INFO     -   - after_valid: 2749 / 3340 (removed 591)
2025-10-29 13:53:52,485 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:52,485 - INFO     -   - ts1_id: 8
2025-10-29 13:53:52,485 - INFO     -   - ts2_id: 15
2025-10-29 13:53:52,485 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:52,486 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:52,486 - INFO     -   - ts1_size: 5, ts2_size: 668
2025-10-29 13:53:52,486 - INFO     -   - Product space size: 3340
2025-10-29 13:53:52,486 - INFO     -   - Using product state mapping
2025-10-29 13:53:52,490 - INFO     -   - f_before_product length: 3340
2025-10-29 13:53:52,497 - INFO     -   - avg_f_before: 8.1722 (3340 valid states)
2025-10-29 13:53:52,497 - INFO     -   - avg_f_after:  12.2346 (2749 valid states)
2025-10-29 13:53:52,497 - INFO     -   - delta: 4.0625
2025-10-29 13:53:52,497 - INFO     -   - f_stability: 1.0 - |4.0625| / 8.1722 = 0.5029
2025-10-29 13:53:52,497 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:52,497 - INFO     -   - Compared 673 values
2025-10-29 13:53:52,498 - INFO     -   - Significant changes (> 5.0): 130
2025-10-29 13:53:52,498 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:52,498 - INFO     -   - states_before: 3340
2025-10-29 13:53:52,498 - INFO     -   - states_after: 3340
2025-10-29 13:53:52,498 - INFO     -   - delta_states: 0
2025-10-29 13:53:52,498 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:52,498 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:52,498 - INFO     -   - ts2_transitions: 6703
2025-10-29 13:53:52,498 - INFO     -   - merged_transitions: 19291
2025-10-29 13:53:52,498 - INFO     -   - transition_density_change: 3.7650
2025-10-29 13:53:52,498 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:52,498 - INFO     -   - search_signals present: True
2025-10-29 13:53:52,498 - INFO     -   - nodes_expanded: 2749
2025-10-29 13:53:52,498 - INFO     -   - search_depth: 6
2025-10-29 13:53:52,498 - INFO     -   - solution_cost: 4
2025-10-29 13:53:52,498 - INFO     -   - branching_factor: 7.0175
2025-10-29 13:53:52,498 - INFO     -   - solution_found: True
2025-10-29 13:53:52,498 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:52,500 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:52,500 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:53:52,500 - INFO     -   - TS8(5) + TS15(668) → 3340 states
2025-10-29 13:53:52,500 - INFO     -   - f_stability=0.503
2025-10-29 13:53:52,500 - INFO     -   - A* nodes_expanded=2749
2025-10-29 13:53:52,500 - INFO     -   - solution_found=True
2025-10-29 13:53:52,500 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:52,500 - INFO     - 
  Extracted signals:
2025-10-29 13:53:52,500 - INFO     -     - iteration: 7
2025-10-29 13:53:52,500 - INFO     -     - states_before: 3340
2025-10-29 13:53:52,500 - INFO     -     - states_after: 3340
2025-10-29 13:53:52,500 - INFO     -     - delta_states: 0
2025-10-29 13:53:52,501 - INFO     -     - f_value_stability: 0.5029
2025-10-29 13:53:52,501 - INFO     -     - num_significant_f_changes: 130
2025-10-29 13:53:52,501 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:52,501 - INFO     -     - nodes_expanded: 2749
2025-10-29 13:53:52,501 - INFO     -     - search_depth: 6
2025-10-29 13:53:52,501 - INFO     -     - solution_cost: 4
2025-10-29 13:53:52,501 - INFO     -     - branching_factor: 7.0175
2025-10-29 13:53:52,501 - INFO     -     - solution_found: True
2025-10-29 13:53:52,501 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:52,501 - INFO     - 
  Computing reward:
2025-10-29 13:53:52,501 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:52,502 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:52,502 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:52,502 - INFO     -   [1] BRANCHING FACTOR: 7.017 → score 0.198 (high BF, minimal credit)
2025-10-29 13:53:52,502 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:52,503 - INFO     -   [3] F-VALUE STABILITY: 0.604
2025-10-29 13:53:52,503 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:52,503 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:52,503 - INFO     - 
  [COMPOSITE]: 0.541
2025-10-29 13:53:52,503 - INFO     -     = 0.300*0.198 (bf)
2025-10-29 13:53:52,503 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:52,503 - INFO     -     + 0.350*0.604 (stability)
2025-10-29 13:53:52,503 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:52,503 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:52,503 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:52,503 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:52,503 - INFO     - 
  [FINAL REWARD]: 0.4828
2025-10-29 13:53:52,503 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:52,503 - INFO     -     ✓ Reward computed: 0.4828
2025-10-29 13:53:52,503 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:52,503 - INFO     -     - bf_score                       0.1983
2025-10-29 13:53:52,504 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:52,504 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:52,505 - INFO     -     - f_stability                    0.6040
2025-10-29 13:53:52,505 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:52,505 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:52,505 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:52,505 - INFO     -     - composite                      0.5414
2025-10-29 13:53:52,505 - INFO     -     - total                          0.4828
2025-10-29 13:53:52,505 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:52,505 - INFO     -   Num remaining nodes: 1
2025-10-29 13:53:52,505 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:53:52,505 - INFO     -   Done: True
2025-10-29 13:53:52,505 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:53:52,505 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:52,506 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:52,506 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:52,506 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:52,506 - INFO     -     - num_nodes: 1
2025-10-29 13:53:52,506 - INFO     -     - num_edges: 0
2025-10-29 13:53:52,506 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:52,506 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:53:52,506 - INFO     -   After: current_merge_step = 8
2025-10-29 13:53:52,506 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:52,506 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:52,506 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:52,507 - INFO     -   ✓ Step logged
2025-10-29 13:53:52,507 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:52,507 - INFO     -   Returning:
2025-10-29 13:53:52,507 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:52,507 - INFO     -     - reward: 0.4828
2025-10-29 13:53:52,507 - INFO     -     - done: True
2025-10-29 13:53:52,507 - INFO     -     - truncated: False
2025-10-29 13:53:52,507 - INFO     -     - info: 19 keys
2025-10-29 13:53:52,507 - INFO     - ==========================================================================================

2025-10-29 13:53:52,508 - INFO     -     ✓ Reward: 4.7728, Time: 2.92s
2025-10-29 13:53:52,509 - INFO     -   [3/5] problem_small_02.pddl
2025-10-29 13:53:52,509 - INFO     - Environment initialized with:
2025-10-29 13:53:52,509 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:52,509 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_02.pddl
2025-10-29 13:53:52,509 - INFO     -   FD base: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward
2025-10-29 13:53:52,509 - INFO     -   max_states: 4000
2025-10-29 13:53:52,509 - INFO     -   threshold_before_merge: 1
2025-10-29 13:53:52,509 - INFO     - ✓ Initialized reward function: astar_search
2025-10-29 13:53:52,509 - INFO     - ✓ RewardInfoExtractor initialized (output_dir: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output)
2025-10-29 13:53:52,509 - INFO     - ✓ Initialized reward info extractor
2025-10-29 13:53:52,594 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:53:52,601 - INFO     - [Handshake] Building FD command:
2025-10-29 13:53:52,601 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:52,601 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_02.pddl
2025-10-29 13:53:52,601 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:53:52,604 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:53,206 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:53,207 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:53,207 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:53,519 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:53,519 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:53,519 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:53,519 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:53,520 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:53,520 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:53,520 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:53,520 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:53,520 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:53,520 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:53,520 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:53,520 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:53,520 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:53,520 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:53,520 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:53,520 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:53,520 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:53,520 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:53,520 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:53,520 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:53,520 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:53,520 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:53,521 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:53,522 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:53,522 - INFO     - Added edge (0, 1)
2025-10-29 13:53:53,522 - INFO     - Added edge (0, 2)
2025-10-29 13:53:53,522 - INFO     - Added edge (0, 3)
2025-10-29 13:53:53,522 - INFO     - Added edge (0, 4)
2025-10-29 13:53:53,522 - INFO     - Added edge (0, 5)
2025-10-29 13:53:53,522 - INFO     - Added edge (0, 6)
2025-10-29 13:53:53,522 - INFO     - Added edge (0, 7)
2025-10-29 13:53:53,522 - INFO     - Added edge (0, 8)
2025-10-29 13:53:53,522 - INFO     - Added edge (1, 0)
2025-10-29 13:53:53,522 - INFO     - Added edge (1, 2)
2025-10-29 13:53:53,522 - INFO     - Added edge (1, 3)
2025-10-29 13:53:53,522 - INFO     - Added edge (1, 4)
2025-10-29 13:53:53,522 - INFO     - Added edge (1, 5)
2025-10-29 13:53:53,522 - INFO     - Added edge (1, 6)
2025-10-29 13:53:53,522 - INFO     - Added edge (1, 7)
2025-10-29 13:53:53,522 - INFO     - Added edge (1, 8)
2025-10-29 13:53:53,522 - INFO     - Added edge (2, 0)
2025-10-29 13:53:53,522 - INFO     - Added edge (2, 1)
2025-10-29 13:53:53,522 - INFO     - Added edge (2, 3)
2025-10-29 13:53:53,522 - INFO     - Added edge (2, 4)
2025-10-29 13:53:53,522 - INFO     - Added edge (2, 5)
2025-10-29 13:53:53,522 - INFO     - Added edge (2, 6)
2025-10-29 13:53:53,522 - INFO     - Added edge (2, 7)
2025-10-29 13:53:53,523 - INFO     - Added edge (2, 8)
2025-10-29 13:53:53,523 - INFO     - Added edge (3, 0)
2025-10-29 13:53:53,523 - INFO     - Added edge (3, 1)
2025-10-29 13:53:53,523 - INFO     - Added edge (3, 2)
2025-10-29 13:53:53,523 - INFO     - Added edge (3, 4)
2025-10-29 13:53:53,523 - INFO     - Added edge (3, 5)
2025-10-29 13:53:53,523 - INFO     - Added edge (3, 6)
2025-10-29 13:53:53,523 - INFO     - Added edge (3, 7)
2025-10-29 13:53:53,523 - INFO     - Added edge (3, 8)
2025-10-29 13:53:53,523 - INFO     - Added edge (4, 0)
2025-10-29 13:53:53,523 - INFO     - Added edge (4, 1)
2025-10-29 13:53:53,523 - INFO     - Added edge (4, 2)
2025-10-29 13:53:53,523 - INFO     - Added edge (4, 3)
2025-10-29 13:53:53,523 - INFO     - Added edge (4, 5)
2025-10-29 13:53:53,523 - INFO     - Added edge (4, 6)
2025-10-29 13:53:53,525 - INFO     - Added edge (4, 7)
2025-10-29 13:53:53,525 - INFO     - Added edge (4, 8)
2025-10-29 13:53:53,525 - INFO     - Added edge (5, 0)
2025-10-29 13:53:53,525 - INFO     - Added edge (5, 1)
2025-10-29 13:53:53,525 - INFO     - Added edge (5, 2)
2025-10-29 13:53:53,525 - INFO     - Added edge (5, 3)
2025-10-29 13:53:53,525 - INFO     - Added edge (5, 4)
2025-10-29 13:53:53,525 - INFO     - Added edge (6, 0)
2025-10-29 13:53:53,525 - INFO     - Added edge (6, 1)
2025-10-29 13:53:53,526 - INFO     - Added edge (6, 2)
2025-10-29 13:53:53,526 - INFO     - Added edge (6, 3)
2025-10-29 13:53:53,526 - INFO     - Added edge (6, 4)
2025-10-29 13:53:53,526 - INFO     - Added edge (7, 0)
2025-10-29 13:53:53,526 - INFO     - Added edge (7, 1)
2025-10-29 13:53:53,526 - INFO     - Added edge (7, 2)
2025-10-29 13:53:53,526 - INFO     - Added edge (7, 3)
2025-10-29 13:53:53,526 - INFO     - Added edge (7, 4)
2025-10-29 13:53:53,526 - INFO     - Added edge (8, 0)
2025-10-29 13:53:53,526 - INFO     - Added edge (8, 1)
2025-10-29 13:53:53,526 - INFO     - Added edge (8, 2)
2025-10-29 13:53:53,527 - INFO     - Added edge (8, 3)
2025-10-29 13:53:53,527 - INFO     - Added edge (8, 4)
2025-10-29 13:53:53,527 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:53,534 - INFO     - 
==========================================================================================
2025-10-29 13:53:53,534 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:53,534 - INFO     - ==========================================================================================
2025-10-29 13:53:53,534 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:53,534 - INFO     -   Input action: 41 (type: int)
2025-10-29 13:53:53,534 - INFO     -   Available edges in graph: 60
2025-10-29 13:53:53,534 - INFO     -   Action index calculation:
2025-10-29 13:53:53,534 - INFO     -     - action % max(num_valid_edges, 1) = 41 % 60 = 41
2025-10-29 13:53:53,534 - INFO     -     - clamped to [0, 59]: 41
2025-10-29 13:53:53,535 - INFO     -   ✓ Extracted merge pair from edge 41: (5, 1)
2025-10-29 13:53:53,535 - INFO     -   ✓ Validation passed
2025-10-29 13:53:53,535 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:53,535 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:53,535 - INFO     -     - Num nodes: 9
2025-10-29 13:53:53,535 - INFO     -     - Num edges: 60
2025-10-29 13:53:53,535 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:53,535 - INFO     -       - Node 5: 5 states
2025-10-29 13:53:53,535 - INFO     -       - Node 1: 2 states
2025-10-29 13:53:53,535 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:53,535 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:53,540 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:53:53,540 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:53,540 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:53:53,641 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:53,641 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:53,641 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:53:53,642 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:53,642 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:53,642 - INFO     -   Calling graph_tracker.merge_nodes([5, 1])...
2025-10-29 13:53:53,642 - INFO     - Attempting merge of nodes 5 and 1...
2025-10-29 13:53:53,642 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:53:53,642 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:53,642 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:53,642 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:53:53,642 - INFO     - 
================================================================================
2025-10-29 13:53:53,642 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:53:53,642 - INFO     - ================================================================================
2025-10-29 13:53:53,642 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:53,642 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:53:53,642 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:53:53,643 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:53,643 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:53,643 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:53,643 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:53,643 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:53,643 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:53,643 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:53,643 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:53,643 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:53,643 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:53,643 - INFO     -   - ts1_id: 5
2025-10-29 13:53:53,643 - INFO     -   - ts2_id: 1
2025-10-29 13:53:53,643 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:53,643 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:53,644 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:53,644 - INFO     -   - Product space size: 10
2025-10-29 13:53:53,644 - INFO     -   - Using product state mapping
2025-10-29 13:53:53,644 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:53,644 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:53,644 - INFO     -   - avg_f_after:  3.7000 (10 valid states)
2025-10-29 13:53:53,644 - INFO     -   - delta: 0.9000
2025-10-29 13:53:53,644 - INFO     -   - f_stability: 1.0 - |0.9000| / 2.8000 = 0.6786
2025-10-29 13:53:53,644 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:53,644 - INFO     -   - Compared 7 values
2025-10-29 13:53:53,644 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:53,644 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:53,645 - INFO     -   - states_before: 10
2025-10-29 13:53:53,645 - INFO     -   - states_after: 10
2025-10-29 13:53:53,645 - INFO     -   - delta_states: 0
2025-10-29 13:53:53,645 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:53,645 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:53,645 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:53,645 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:53,645 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:53,645 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:53,645 - INFO     -   - search_signals present: True
2025-10-29 13:53:53,645 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:53,645 - INFO     -   - search_depth: 2
2025-10-29 13:53:53,645 - INFO     -   - solution_cost: 2
2025-10-29 13:53:53,645 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:53,645 - INFO     -   - solution_found: True
2025-10-29 13:53:53,645 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:53,645 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:53,646 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:53:53,646 - INFO     -   - TS5(5) + TS1(2) → 10 states
2025-10-29 13:53:53,646 - INFO     -   - f_stability=0.679
2025-10-29 13:53:53,646 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:53,646 - INFO     -   - solution_found=True
2025-10-29 13:53:53,646 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:53,646 - INFO     - 
  Extracted signals:
2025-10-29 13:53:53,646 - INFO     -     - iteration: 0
2025-10-29 13:53:53,646 - INFO     -     - states_before: 10
2025-10-29 13:53:53,646 - INFO     -     - states_after: 10
2025-10-29 13:53:53,646 - INFO     -     - delta_states: 0
2025-10-29 13:53:53,646 - INFO     -     - f_value_stability: 0.6786
2025-10-29 13:53:53,646 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:53,646 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:53,646 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:53,646 - INFO     -     - search_depth: 2
2025-10-29 13:53:53,646 - INFO     -     - solution_cost: 2
2025-10-29 13:53:53,647 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:53,647 - INFO     -     - solution_found: True
2025-10-29 13:53:53,647 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:53,647 - INFO     - 
  Computing reward:
2025-10-29 13:53:53,647 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:53,647 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:53,647 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:53,647 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:53,647 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:53,647 - INFO     -   [3] F-VALUE STABILITY: 0.286
2025-10-29 13:53:53,647 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:53,647 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:53,647 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:53:53,647 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:53,647 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:53,648 - INFO     -     + 0.350*0.286 (stability)
2025-10-29 13:53:53,648 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:53,648 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:53,648 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:53,648 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:53,648 - INFO     - 
  [FINAL REWARD]: 0.3244
2025-10-29 13:53:53,648 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:53,648 - INFO     -     ✓ Reward computed: 0.3244
2025-10-29 13:53:53,648 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:53,648 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:53,648 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:53,648 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:53,648 - INFO     -     - f_stability                    0.2862
2025-10-29 13:53:53,648 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:53,648 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:53,648 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:53,648 - INFO     -     - composite                      0.5622
2025-10-29 13:53:53,648 - INFO     -     - total                          0.3244
2025-10-29 13:53:53,649 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:53,649 - INFO     -   Num remaining nodes: 8
2025-10-29 13:53:53,649 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:53:53,649 - INFO     -   Done: False
2025-10-29 13:53:53,649 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:53,650 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:53,651 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:53,651 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:53,651 - INFO     -     - num_nodes: 8
2025-10-29 13:53:53,651 - INFO     -     - num_edges: 50
2025-10-29 13:53:53,651 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:53,651 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:53:53,651 - INFO     -   After: current_merge_step = 1
2025-10-29 13:53:53,651 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:53,651 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:53,651 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:53,652 - INFO     -   ✓ Step logged
2025-10-29 13:53:53,652 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:53,652 - INFO     -   Returning:
2025-10-29 13:53:53,652 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:53,652 - INFO     -     - reward: 0.3244
2025-10-29 13:53:53,652 - INFO     -     - done: False
2025-10-29 13:53:53,652 - INFO     -     - truncated: False
2025-10-29 13:53:53,653 - INFO     -     - info: 19 keys
2025-10-29 13:53:53,653 - INFO     - ==========================================================================================

2025-10-29 13:53:53,658 - INFO     - 
==========================================================================================
2025-10-29 13:53:53,658 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:53,658 - INFO     - ==========================================================================================
2025-10-29 13:53:53,658 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:53,659 - INFO     -   Input action: 32 (type: int)
2025-10-29 13:53:53,659 - INFO     -   Available edges in graph: 50
2025-10-29 13:53:53,659 - INFO     -   Action index calculation:
2025-10-29 13:53:53,659 - INFO     -     - action % max(num_valid_edges, 1) = 32 % 50 = 32
2025-10-29 13:53:53,659 - INFO     -     - clamped to [0, 49]: 32
2025-10-29 13:53:53,659 - INFO     -   ✓ Extracted merge pair from edge 32: (6, 9)
2025-10-29 13:53:53,659 - INFO     -   ✓ Validation passed
2025-10-29 13:53:53,659 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:53,659 - INFO     -     - Total states before merge: 33
2025-10-29 13:53:53,659 - INFO     -     - Num nodes: 8
2025-10-29 13:53:53,659 - INFO     -     - Num edges: 50
2025-10-29 13:53:53,659 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:53,659 - INFO     -       - Node 6: 5 states
2025-10-29 13:53:53,659 - INFO     -       - Node 9: 10 states
2025-10-29 13:53:53,659 - INFO     -       - Expected product: 50 states
2025-10-29 13:53:53,659 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:53,666 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:53:53,666 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:53,666 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:53:53,767 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:53,767 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:53,767 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:53:53,768 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:53,768 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:53,768 - INFO     -   Calling graph_tracker.merge_nodes([6, 9])...
2025-10-29 13:53:53,768 - INFO     - Attempting merge of nodes 6 and 9...
2025-10-29 13:53:53,768 - INFO     - Successfully merged nodes into new node 10 with 50 states.
2025-10-29 13:53:53,768 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:53,768 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:53,768 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:53:53,768 - INFO     - 
================================================================================
2025-10-29 13:53:53,768 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:53:53,768 - INFO     - ================================================================================
2025-10-29 13:53:53,768 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:53,768 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:53:53,768 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:53:53,769 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:53,769 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:53,769 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:53,769 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:53,769 - INFO     -   - Raw f_after length: 50
2025-10-29 13:53:53,769 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:53,769 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:53,769 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:53,769 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:53:53,769 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:53,769 - INFO     -   - ts1_id: 6
2025-10-29 13:53:53,769 - INFO     -   - ts2_id: 9
2025-10-29 13:53:53,770 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:53,770 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:53,770 - INFO     -   - ts1_size: 5, ts2_size: 10
2025-10-29 13:53:53,770 - INFO     -   - Product space size: 50
2025-10-29 13:53:53,770 - INFO     -   - Using product state mapping
2025-10-29 13:53:53,770 - INFO     -   - f_before_product length: 50
2025-10-29 13:53:53,770 - INFO     -   - avg_f_before: 4.1200 (50 valid states)
2025-10-29 13:53:53,770 - INFO     -   - avg_f_after:  6.5200 (50 valid states)
2025-10-29 13:53:53,770 - INFO     -   - delta: 2.4000
2025-10-29 13:53:53,770 - INFO     -   - f_stability: 1.0 - |2.4000| / 4.1200 = 0.4175
2025-10-29 13:53:53,770 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:53,770 - INFO     -   - Compared 15 values
2025-10-29 13:53:53,770 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:53,771 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:53,771 - INFO     -   - states_before: 50
2025-10-29 13:53:53,771 - INFO     -   - states_after: 50
2025-10-29 13:53:53,771 - INFO     -   - delta_states: 0
2025-10-29 13:53:53,771 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:53,771 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:53,771 - INFO     -   - ts2_transitions: 40
2025-10-29 13:53:53,771 - INFO     -   - merged_transitions: 260
2025-10-29 13:53:53,771 - INFO     -   - transition_density_change: 4.1400
2025-10-29 13:53:53,771 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:53,771 - INFO     -   - search_signals present: True
2025-10-29 13:53:53,771 - INFO     -   - nodes_expanded: 50
2025-10-29 13:53:53,771 - INFO     -   - search_depth: 3
2025-10-29 13:53:53,771 - INFO     -   - solution_cost: 2
2025-10-29 13:53:53,771 - INFO     -   - branching_factor: 5.2000
2025-10-29 13:53:53,771 - INFO     -   - solution_found: True
2025-10-29 13:53:53,771 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:53,772 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:53,772 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:53:53,772 - INFO     -   - TS6(5) + TS9(10) → 50 states
2025-10-29 13:53:53,772 - INFO     -   - f_stability=0.417
2025-10-29 13:53:53,772 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:53:53,772 - INFO     -   - solution_found=True
2025-10-29 13:53:53,772 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:53,772 - INFO     - 
  Extracted signals:
2025-10-29 13:53:53,772 - INFO     -     - iteration: 1
2025-10-29 13:53:53,772 - INFO     -     - states_before: 50
2025-10-29 13:53:53,772 - INFO     -     - states_after: 50
2025-10-29 13:53:53,772 - INFO     -     - delta_states: 0
2025-10-29 13:53:53,772 - INFO     -     - f_value_stability: 0.4175
2025-10-29 13:53:53,772 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:53,772 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:53,773 - INFO     -     - nodes_expanded: 50
2025-10-29 13:53:53,773 - INFO     -     - search_depth: 3
2025-10-29 13:53:53,773 - INFO     -     - solution_cost: 2
2025-10-29 13:53:53,773 - INFO     -     - branching_factor: 5.2000
2025-10-29 13:53:53,773 - INFO     -     - solution_found: True
2025-10-29 13:53:53,773 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:53,773 - INFO     - 
  Computing reward:
2025-10-29 13:53:53,773 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:53,773 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:53,773 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:53,773 - INFO     -   [1] BRANCHING FACTOR: 5.200 → score 0.407 (tolerable)
2025-10-29 13:53:53,773 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:53,773 - INFO     -   [3] F-VALUE STABILITY: 0.364
2025-10-29 13:53:53,774 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:53,774 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:53,774 - INFO     - 
  [COMPOSITE]: 0.534
2025-10-29 13:53:53,774 - INFO     -     = 0.300*0.407 (bf)
2025-10-29 13:53:53,774 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:53,774 - INFO     -     + 0.350*0.364 (stability)
2025-10-29 13:53:53,774 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:53,774 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:53,774 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:53,774 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:53,774 - INFO     - 
  [FINAL REWARD]: 0.3684
2025-10-29 13:53:53,774 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:53,775 - INFO     -     ✓ Reward computed: 0.3684
2025-10-29 13:53:53,775 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:53,775 - INFO     -     - bf_score                       0.4067
2025-10-29 13:53:53,775 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:53,775 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:53,775 - INFO     -     - f_stability                    0.3642
2025-10-29 13:53:53,775 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:53,775 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:53,775 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:53,775 - INFO     -     - composite                      0.5342
2025-10-29 13:53:53,775 - INFO     -     - total                          0.3684
2025-10-29 13:53:53,775 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:53,775 - INFO     -   Num remaining nodes: 7
2025-10-29 13:53:53,775 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:53:53,775 - INFO     -   Done: False
2025-10-29 13:53:53,775 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:53,778 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:53,778 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:53,778 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:53,778 - INFO     -     - num_nodes: 7
2025-10-29 13:53:53,778 - INFO     -     - num_edges: 40
2025-10-29 13:53:53,778 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:53,778 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:53:53,778 - INFO     -   After: current_merge_step = 2
2025-10-29 13:53:53,778 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:53,778 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:53,778 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:53,779 - INFO     -   ✓ Step logged
2025-10-29 13:53:53,779 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:53,779 - INFO     -   Returning:
2025-10-29 13:53:53,779 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:53,779 - INFO     -     - reward: 0.3684
2025-10-29 13:53:53,779 - INFO     -     - done: False
2025-10-29 13:53:53,779 - INFO     -     - truncated: False
2025-10-29 13:53:53,779 - INFO     -     - info: 19 keys
2025-10-29 13:53:53,780 - INFO     - ==========================================================================================

2025-10-29 13:53:53,786 - INFO     - 
==========================================================================================
2025-10-29 13:53:53,787 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:53,787 - INFO     - ==========================================================================================
2025-10-29 13:53:53,787 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:53,787 - INFO     -   Input action: 28 (type: int)
2025-10-29 13:53:53,787 - INFO     -   Available edges in graph: 40
2025-10-29 13:53:53,787 - INFO     -   Action index calculation:
2025-10-29 13:53:53,787 - INFO     -     - action % max(num_valid_edges, 1) = 28 % 40 = 28
2025-10-29 13:53:53,787 - INFO     -     - clamped to [0, 39]: 28
2025-10-29 13:53:53,787 - INFO     -   ✓ Extracted merge pair from edge 28: (7, 10)
2025-10-29 13:53:53,787 - INFO     -   ✓ Validation passed
2025-10-29 13:53:53,787 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:53,787 - INFO     -     - Total states before merge: 68
2025-10-29 13:53:53,787 - INFO     -     - Num nodes: 7
2025-10-29 13:53:53,787 - INFO     -     - Num edges: 40
2025-10-29 13:53:53,787 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:53,787 - INFO     -       - Node 7: 5 states
2025-10-29 13:53:53,787 - INFO     -       - Node 10: 50 states
2025-10-29 13:53:53,787 - INFO     -       - Expected product: 250 states
2025-10-29 13:53:53,787 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:53,793 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:53:53,793 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:53,793 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:53:53,894 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:53,894 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:53,894 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:53:53,897 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:53,897 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:53,897 - INFO     -   Calling graph_tracker.merge_nodes([7, 10])...
2025-10-29 13:53:53,897 - INFO     - Attempting merge of nodes 7 and 10...
2025-10-29 13:53:53,897 - INFO     - Successfully merged nodes into new node 11 with 250 states.
2025-10-29 13:53:53,897 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:53,897 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:53,897 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:53:53,897 - INFO     - 
================================================================================
2025-10-29 13:53:53,897 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:53:53,897 - INFO     - ================================================================================
2025-10-29 13:53:53,897 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:53,897 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:53:53,897 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:53:53,898 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:53,898 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:53,899 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:53,899 - INFO     -   - Raw ts2_f length: 50
2025-10-29 13:53:53,899 - INFO     -   - Raw f_after length: 250
2025-10-29 13:53:53,899 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:53,899 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:53,899 - INFO     -   - ts2_valid: 50 / 50 (removed -50)
2025-10-29 13:53:53,899 - INFO     -   - after_valid: 250 / 250 (removed 0)
2025-10-29 13:53:53,899 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:53,899 - INFO     -   - ts1_id: 7
2025-10-29 13:53:53,899 - INFO     -   - ts2_id: 10
2025-10-29 13:53:53,899 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:53,899 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:53,899 - INFO     -   - ts1_size: 5, ts2_size: 50
2025-10-29 13:53:53,899 - INFO     -   - Product space size: 250
2025-10-29 13:53:53,899 - INFO     -   - Using product state mapping
2025-10-29 13:53:53,900 - INFO     -   - f_before_product length: 250
2025-10-29 13:53:53,901 - INFO     -   - avg_f_before: 6.5760 (250 valid states)
2025-10-29 13:53:53,901 - INFO     -   - avg_f_after:  9.3160 (250 valid states)
2025-10-29 13:53:53,901 - INFO     -   - delta: 2.7400
2025-10-29 13:53:53,901 - INFO     -   - f_stability: 1.0 - |2.7400| / 6.5760 = 0.5833
2025-10-29 13:53:53,901 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:53,901 - INFO     -   - Compared 55 values
2025-10-29 13:53:53,901 - INFO     -   - Significant changes (> 5.0): 9
2025-10-29 13:53:53,901 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:53,901 - INFO     -   - states_before: 250
2025-10-29 13:53:53,902 - INFO     -   - states_after: 250
2025-10-29 13:53:53,902 - INFO     -   - delta_states: 0
2025-10-29 13:53:53,902 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:53,902 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:53,902 - INFO     -   - ts2_transitions: 260
2025-10-29 13:53:53,902 - INFO     -   - merged_transitions: 1675
2025-10-29 13:53:53,902 - INFO     -   - transition_density_change: 5.6080
2025-10-29 13:53:53,902 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:53,902 - INFO     -   - search_signals present: True
2025-10-29 13:53:53,902 - INFO     -   - nodes_expanded: 250
2025-10-29 13:53:53,902 - INFO     -   - search_depth: 5
2025-10-29 13:53:53,902 - INFO     -   - solution_cost: 4
2025-10-29 13:53:53,902 - INFO     -   - branching_factor: 6.7000
2025-10-29 13:53:53,902 - INFO     -   - solution_found: True
2025-10-29 13:53:53,902 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:53,903 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:53,903 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:53:53,903 - INFO     -   - TS7(5) + TS10(50) → 250 states
2025-10-29 13:53:53,903 - INFO     -   - f_stability=0.583
2025-10-29 13:53:53,903 - INFO     -   - A* nodes_expanded=250
2025-10-29 13:53:53,903 - INFO     -   - solution_found=True
2025-10-29 13:53:53,903 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:53,903 - INFO     - 
  Extracted signals:
2025-10-29 13:53:53,904 - INFO     -     - iteration: 2
2025-10-29 13:53:53,904 - INFO     -     - states_before: 250
2025-10-29 13:53:53,904 - INFO     -     - states_after: 250
2025-10-29 13:53:53,904 - INFO     -     - delta_states: 0
2025-10-29 13:53:53,904 - INFO     -     - f_value_stability: 0.5833
2025-10-29 13:53:53,904 - INFO     -     - num_significant_f_changes: 9
2025-10-29 13:53:53,904 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:53,904 - INFO     -     - nodes_expanded: 250
2025-10-29 13:53:53,904 - INFO     -     - search_depth: 5
2025-10-29 13:53:53,904 - INFO     -     - solution_cost: 4
2025-10-29 13:53:53,904 - INFO     -     - branching_factor: 6.7000
2025-10-29 13:53:53,904 - INFO     -     - solution_found: True
2025-10-29 13:53:53,905 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:53,905 - INFO     - 
  Computing reward:
2025-10-29 13:53:53,905 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:53,905 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:53,905 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:53,905 - INFO     -   [1] BRANCHING FACTOR: 6.700 → score 0.230 (high BF, minimal credit)
2025-10-29 13:53:53,905 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:53,906 - INFO     -   [3] F-VALUE STABILITY: 0.531
2025-10-29 13:53:53,906 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:53,906 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:53,906 - INFO     - 
  [COMPOSITE]: 0.529
2025-10-29 13:53:53,906 - INFO     -     = 0.300*0.230 (bf)
2025-10-29 13:53:53,906 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:53,906 - INFO     -     + 0.350*0.531 (stability)
2025-10-29 13:53:53,906 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:53,906 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:53,906 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:53,906 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:53,906 - INFO     - 
  [FINAL REWARD]: 0.4587
2025-10-29 13:53:53,907 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:53,907 - INFO     -     ✓ Reward computed: 0.4587
2025-10-29 13:53:53,907 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:53,907 - INFO     -     - bf_score                       0.2300
2025-10-29 13:53:53,907 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:53,907 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:53,907 - INFO     -     - f_stability                    0.5312
2025-10-29 13:53:53,907 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:53,907 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:53,907 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:53,907 - INFO     -     - composite                      0.5293
2025-10-29 13:53:53,907 - INFO     -     - total                          0.4587
2025-10-29 13:53:53,907 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:53,907 - INFO     -   Num remaining nodes: 6
2025-10-29 13:53:53,907 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:53:53,908 - INFO     -   Done: False
2025-10-29 13:53:53,908 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:53,909 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:53,910 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:53,910 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:53,910 - INFO     -     - num_nodes: 6
2025-10-29 13:53:53,910 - INFO     -     - num_edges: 30
2025-10-29 13:53:53,910 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:53,910 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:53:53,910 - INFO     -   After: current_merge_step = 3
2025-10-29 13:53:53,910 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:53,910 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:53,910 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:53,913 - INFO     -   ✓ Step logged
2025-10-29 13:53:53,913 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:53,913 - INFO     -   Returning:
2025-10-29 13:53:53,913 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:53,913 - INFO     -     - reward: 0.4587
2025-10-29 13:53:53,913 - INFO     -     - done: False
2025-10-29 13:53:53,913 - INFO     -     - truncated: False
2025-10-29 13:53:53,914 - INFO     -     - info: 19 keys
2025-10-29 13:53:53,914 - INFO     - ==========================================================================================

2025-10-29 13:53:53,921 - INFO     - 
==========================================================================================
2025-10-29 13:53:53,921 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:53,921 - INFO     - ==========================================================================================
2025-10-29 13:53:53,921 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:53,921 - INFO     -   Input action: 4 (type: int)
2025-10-29 13:53:53,922 - INFO     -   Available edges in graph: 30
2025-10-29 13:53:53,922 - INFO     -   Action index calculation:
2025-10-29 13:53:53,922 - INFO     -     - action % max(num_valid_edges, 1) = 4 % 30 = 4
2025-10-29 13:53:53,922 - INFO     -     - clamped to [0, 29]: 4
2025-10-29 13:53:53,922 - INFO     -   ✓ Extracted merge pair from edge 4: (0, 11)
2025-10-29 13:53:53,922 - INFO     -   ✓ Validation passed
2025-10-29 13:53:53,922 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:53,922 - INFO     -     - Total states before merge: 263
2025-10-29 13:53:53,922 - INFO     -     - Num nodes: 6
2025-10-29 13:53:53,922 - INFO     -     - Num edges: 30
2025-10-29 13:53:53,922 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:53,922 - INFO     -       - Node 0: 2 states
2025-10-29 13:53:53,922 - INFO     -       - Node 11: 250 states
2025-10-29 13:53:53,922 - INFO     -       - Expected product: 500 states
2025-10-29 13:53:53,923 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:53,927 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:53:53,928 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:53,928 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:53:54,029 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:54,029 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:54,029 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:53:54,034 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:53:54,034 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:54,034 - INFO     -   Calling graph_tracker.merge_nodes([0, 11])...
2025-10-29 13:53:54,034 - INFO     - Attempting merge of nodes 0 and 11...
2025-10-29 13:53:54,034 - INFO     - Successfully merged nodes into new node 12 with 500 states.
2025-10-29 13:53:54,034 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:54,034 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:54,034 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:53:54,034 - INFO     - 
================================================================================
2025-10-29 13:53:54,034 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:53:54,035 - INFO     - ================================================================================
2025-10-29 13:53:54,035 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:54,035 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:53:54,035 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:53:54,036 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:54,036 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:54,036 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:54,036 - INFO     -   - Raw ts2_f length: 250
2025-10-29 13:53:54,036 - INFO     -   - Raw f_after length: 500
2025-10-29 13:53:54,036 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:54,036 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:54,036 - INFO     -   - ts2_valid: 250 / 250 (removed -250)
2025-10-29 13:53:54,036 - INFO     -   - after_valid: 500 / 500 (removed 0)
2025-10-29 13:53:54,036 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:54,036 - INFO     -   - ts1_id: 0
2025-10-29 13:53:54,037 - INFO     -   - ts2_id: 11
2025-10-29 13:53:54,037 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:54,037 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:54,037 - INFO     -   - ts1_size: 2, ts2_size: 250
2025-10-29 13:53:54,037 - INFO     -   - Product space size: 500
2025-10-29 13:53:54,037 - INFO     -   - Using product state mapping
2025-10-29 13:53:54,037 - INFO     -   - f_before_product length: 500
2025-10-29 13:53:54,039 - INFO     -   - avg_f_before: 9.3160 (500 valid states)
2025-10-29 13:53:54,039 - INFO     -   - avg_f_after:  10.1320 (500 valid states)
2025-10-29 13:53:54,039 - INFO     -   - delta: 0.8160
2025-10-29 13:53:54,039 - INFO     -   - f_stability: 1.0 - |0.8160| / 9.3160 = 0.9124
2025-10-29 13:53:54,039 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:54,039 - INFO     -   - Compared 252 values
2025-10-29 13:53:54,039 - INFO     -   - Significant changes (> 5.0): 7
2025-10-29 13:53:54,039 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:54,039 - INFO     -   - states_before: 500
2025-10-29 13:53:54,039 - INFO     -   - states_after: 500
2025-10-29 13:53:54,040 - INFO     -   - delta_states: 0
2025-10-29 13:53:54,040 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:54,040 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:54,040 - INFO     -   - ts2_transitions: 1675
2025-10-29 13:53:54,040 - INFO     -   - merged_transitions: 3800
2025-10-29 13:53:54,040 - INFO     -   - transition_density_change: 4.2400
2025-10-29 13:53:54,040 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:54,040 - INFO     -   - search_signals present: True
2025-10-29 13:53:54,040 - INFO     -   - nodes_expanded: 500
2025-10-29 13:53:54,040 - INFO     -   - search_depth: 5
2025-10-29 13:53:54,040 - INFO     -   - solution_cost: 4
2025-10-29 13:53:54,040 - INFO     -   - branching_factor: 7.6000
2025-10-29 13:53:54,040 - INFO     -   - solution_found: True
2025-10-29 13:53:54,040 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:54,042 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:54,042 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:53:54,042 - INFO     -   - TS0(2) + TS11(250) → 500 states
2025-10-29 13:53:54,042 - INFO     -   - f_stability=0.912
2025-10-29 13:53:54,042 - INFO     -   - A* nodes_expanded=500
2025-10-29 13:53:54,042 - INFO     -   - solution_found=True
2025-10-29 13:53:54,042 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:54,042 - INFO     - 
  Extracted signals:
2025-10-29 13:53:54,042 - INFO     -     - iteration: 3
2025-10-29 13:53:54,043 - INFO     -     - states_before: 500
2025-10-29 13:53:54,043 - INFO     -     - states_after: 500
2025-10-29 13:53:54,043 - INFO     -     - delta_states: 0
2025-10-29 13:53:54,043 - INFO     -     - f_value_stability: 0.9124
2025-10-29 13:53:54,043 - INFO     -     - num_significant_f_changes: 7
2025-10-29 13:53:54,043 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:54,043 - INFO     -     - nodes_expanded: 500
2025-10-29 13:53:54,043 - INFO     -     - search_depth: 5
2025-10-29 13:53:54,043 - INFO     -     - solution_cost: 4
2025-10-29 13:53:54,043 - INFO     -     - branching_factor: 7.6000
2025-10-29 13:53:54,043 - INFO     -     - solution_found: True
2025-10-29 13:53:54,043 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:54,043 - INFO     - 
  Computing reward:
2025-10-29 13:53:54,043 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:54,043 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:54,043 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:54,044 - INFO     -   [1] BRANCHING FACTOR: 7.600 → score 0.140 (high BF, minimal credit)
2025-10-29 13:53:54,044 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:54,044 - INFO     -   [3] F-VALUE STABILITY: 0.993
2025-10-29 13:53:54,044 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:54,044 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:54,044 - INFO     - 
  [COMPOSITE]: 0.664
2025-10-29 13:53:54,044 - INFO     -     = 0.300*0.140 (bf)
2025-10-29 13:53:54,044 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:54,044 - INFO     -     + 0.350*0.993 (stability)
2025-10-29 13:53:54,044 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:54,045 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:54,045 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:54,045 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:54,045 - INFO     - 
  [FINAL REWARD]: 0.8279
2025-10-29 13:53:54,045 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:54,045 - INFO     -     ✓ Reward computed: 0.8279
2025-10-29 13:53:54,045 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:54,045 - INFO     -     - bf_score                       0.1400
2025-10-29 13:53:54,045 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:54,045 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:54,045 - INFO     -     - f_stability                    0.9930
2025-10-29 13:53:54,045 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:54,045 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:54,045 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:54,046 - INFO     -     - composite                      0.6640
2025-10-29 13:53:54,046 - INFO     -     - total                          0.8279
2025-10-29 13:53:54,046 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:54,046 - INFO     -   Num remaining nodes: 5
2025-10-29 13:53:54,046 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:53:54,046 - INFO     -   Done: False
2025-10-29 13:53:54,046 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:54,047 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:54,047 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:54,047 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:54,047 - INFO     -     - num_nodes: 5
2025-10-29 13:53:54,047 - INFO     -     - num_edges: 20
2025-10-29 13:53:54,047 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:54,047 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:53:54,047 - INFO     -   After: current_merge_step = 4
2025-10-29 13:53:54,047 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:54,047 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:54,047 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:54,048 - INFO     -   ✓ Step logged
2025-10-29 13:53:54,048 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:54,048 - INFO     -   Returning:
2025-10-29 13:53:54,048 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:54,048 - INFO     -     - reward: 0.8279
2025-10-29 13:53:54,048 - INFO     -     - done: False
2025-10-29 13:53:54,048 - INFO     -     - truncated: False
2025-10-29 13:53:54,048 - INFO     -     - info: 19 keys
2025-10-29 13:53:54,048 - INFO     - ==========================================================================================

2025-10-29 13:53:54,056 - INFO     - 
==========================================================================================
2025-10-29 13:53:54,056 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:54,056 - INFO     - ==========================================================================================
2025-10-29 13:53:54,056 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:54,056 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:53:54,056 - INFO     -   Available edges in graph: 20
2025-10-29 13:53:54,056 - INFO     -   Action index calculation:
2025-10-29 13:53:54,056 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 20 = 3
2025-10-29 13:53:54,056 - INFO     -     - clamped to [0, 19]: 3
2025-10-29 13:53:54,056 - INFO     -   ✓ Extracted merge pair from edge 3: (2, 12)
2025-10-29 13:53:54,056 - INFO     -   ✓ Validation passed
2025-10-29 13:53:54,056 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:54,056 - INFO     -     - Total states before merge: 511
2025-10-29 13:53:54,056 - INFO     -     - Num nodes: 5
2025-10-29 13:53:54,057 - INFO     -     - Num edges: 20
2025-10-29 13:53:54,057 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:54,057 - INFO     -       - Node 2: 2 states
2025-10-29 13:53:54,057 - INFO     -       - Node 12: 500 states
2025-10-29 13:53:54,057 - INFO     -       - Expected product: 1000 states
2025-10-29 13:53:54,057 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:54,063 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:53:54,063 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:54,063 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:53:54,165 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:54,165 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:54,165 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:53:54,176 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:53:54,176 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:54,176 - INFO     -   Calling graph_tracker.merge_nodes([2, 12])...
2025-10-29 13:53:54,176 - INFO     - Attempting merge of nodes 2 and 12...
2025-10-29 13:53:54,176 - INFO     - Successfully merged nodes into new node 13 with 1000 states.
2025-10-29 13:53:54,176 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:54,176 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:54,176 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:53:54,176 - INFO     - 
================================================================================
2025-10-29 13:53:54,176 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:53:54,176 - INFO     - ================================================================================
2025-10-29 13:53:54,176 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:54,176 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:53:54,177 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:53:54,178 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:54,178 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:54,178 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:54,178 - INFO     -   - Raw ts2_f length: 500
2025-10-29 13:53:54,178 - INFO     -   - Raw f_after length: 1000
2025-10-29 13:53:54,178 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:54,178 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:54,178 - INFO     -   - ts2_valid: 500 / 500 (removed -500)
2025-10-29 13:53:54,179 - INFO     -   - after_valid: 1000 / 1000 (removed 0)
2025-10-29 13:53:54,179 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:54,179 - INFO     -   - ts1_id: 2
2025-10-29 13:53:54,179 - INFO     -   - ts2_id: 12
2025-10-29 13:53:54,179 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:54,179 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:54,179 - INFO     -   - ts1_size: 2, ts2_size: 500
2025-10-29 13:53:54,179 - INFO     -   - Product space size: 1000
2025-10-29 13:53:54,179 - INFO     -   - Using product state mapping
2025-10-29 13:53:54,181 - INFO     -   - f_before_product length: 1000
2025-10-29 13:53:54,183 - INFO     -   - avg_f_before: 10.1320 (1000 valid states)
2025-10-29 13:53:54,183 - INFO     -   - avg_f_after:  10.9790 (1000 valid states)
2025-10-29 13:53:54,183 - INFO     -   - delta: 0.8470
2025-10-29 13:53:54,183 - INFO     -   - f_stability: 1.0 - |0.8470| / 10.1320 = 0.9164
2025-10-29 13:53:54,183 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:54,183 - INFO     -   - Compared 502 values
2025-10-29 13:53:54,183 - INFO     -   - Significant changes (> 5.0): 23
2025-10-29 13:53:54,183 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:54,183 - INFO     -   - states_before: 1000
2025-10-29 13:53:54,183 - INFO     -   - states_after: 1000
2025-10-29 13:53:54,183 - INFO     -   - delta_states: 0
2025-10-29 13:53:54,183 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:54,185 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:54,185 - INFO     -   - ts2_transitions: 3800
2025-10-29 13:53:54,185 - INFO     -   - merged_transitions: 8500
2025-10-29 13:53:54,185 - INFO     -   - transition_density_change: 4.6950
2025-10-29 13:53:54,185 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:54,185 - INFO     -   - search_signals present: True
2025-10-29 13:53:54,185 - INFO     -   - nodes_expanded: 1000
2025-10-29 13:53:54,185 - INFO     -   - search_depth: 5
2025-10-29 13:53:54,185 - INFO     -   - solution_cost: 4
2025-10-29 13:53:54,185 - INFO     -   - branching_factor: 8.5000
2025-10-29 13:53:54,185 - INFO     -   - solution_found: True
2025-10-29 13:53:54,185 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:54,186 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:54,186 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:53:54,186 - INFO     -   - TS2(2) + TS12(500) → 1000 states
2025-10-29 13:53:54,186 - INFO     -   - f_stability=0.916
2025-10-29 13:53:54,186 - INFO     -   - A* nodes_expanded=1000
2025-10-29 13:53:54,187 - INFO     -   - solution_found=True
2025-10-29 13:53:54,187 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:54,187 - INFO     - 
  Extracted signals:
2025-10-29 13:53:54,187 - INFO     -     - iteration: 4
2025-10-29 13:53:54,187 - INFO     -     - states_before: 1000
2025-10-29 13:53:54,187 - INFO     -     - states_after: 1000
2025-10-29 13:53:54,187 - INFO     -     - delta_states: 0
2025-10-29 13:53:54,187 - INFO     -     - f_value_stability: 0.9164
2025-10-29 13:53:54,187 - INFO     -     - num_significant_f_changes: 23
2025-10-29 13:53:54,187 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:54,187 - INFO     -     - nodes_expanded: 1000
2025-10-29 13:53:54,187 - INFO     -     - search_depth: 5
2025-10-29 13:53:54,187 - INFO     -     - solution_cost: 4
2025-10-29 13:53:54,187 - INFO     -     - branching_factor: 8.5000
2025-10-29 13:53:54,187 - INFO     -     - solution_found: True
2025-10-29 13:53:54,187 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:54,188 - WARNING  -     ⚠️  High branching factor: 8.5000
2025-10-29 13:53:54,188 - INFO     - 
  Computing reward:
2025-10-29 13:53:54,188 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:54,188 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:54,188 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:54,188 - INFO     -   [1] BRANCHING FACTOR: 8.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:53:54,188 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:54,189 - INFO     -   [3] F-VALUE STABILITY: 0.914
2025-10-29 13:53:54,189 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:54,189 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:54,189 - INFO     - 
  [COMPOSITE]: 0.624
2025-10-29 13:53:54,189 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:53:54,189 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:54,189 - INFO     -     + 0.350*0.914 (stability)
2025-10-29 13:53:54,189 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:54,189 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:54,189 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:54,189 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:54,189 - INFO     - 
  [FINAL REWARD]: 0.7485
2025-10-29 13:53:54,189 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:54,189 - INFO     -     ✓ Reward computed: 0.7485
2025-10-29 13:53:54,189 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:54,189 - INFO     -     - bf_score                       0.1000
2025-10-29 13:53:54,189 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:54,189 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:54,190 - INFO     -     - f_stability                    0.9138
2025-10-29 13:53:54,190 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:54,190 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:54,190 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:54,190 - INFO     -     - composite                      0.6243
2025-10-29 13:53:54,190 - INFO     -     - total                          0.7485
2025-10-29 13:53:54,190 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:54,190 - INFO     -   Num remaining nodes: 4
2025-10-29 13:53:54,190 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:53:54,190 - INFO     -   Done: False
2025-10-29 13:53:54,190 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:54,191 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:54,191 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:54,191 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:54,191 - INFO     -     - num_nodes: 4
2025-10-29 13:53:54,191 - INFO     -     - num_edges: 12
2025-10-29 13:53:54,191 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:54,191 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:53:54,191 - INFO     -   After: current_merge_step = 5
2025-10-29 13:53:54,191 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:54,191 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:54,191 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:54,192 - INFO     -   ✓ Step logged
2025-10-29 13:53:54,192 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:54,192 - INFO     -   Returning:
2025-10-29 13:53:54,192 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:54,192 - INFO     -     - reward: 0.7485
2025-10-29 13:53:54,192 - INFO     -     - done: False
2025-10-29 13:53:54,192 - INFO     -     - truncated: False
2025-10-29 13:53:54,192 - INFO     -     - info: 19 keys
2025-10-29 13:53:54,192 - INFO     - ==========================================================================================

2025-10-29 13:53:54,200 - INFO     - 
==========================================================================================
2025-10-29 13:53:54,200 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:54,200 - INFO     - ==========================================================================================
2025-10-29 13:53:54,200 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:54,200 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:53:54,200 - INFO     -   Available edges in graph: 12
2025-10-29 13:53:54,200 - INFO     -   Action index calculation:
2025-10-29 13:53:54,200 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 12 = 2
2025-10-29 13:53:54,200 - INFO     -     - clamped to [0, 11]: 2
2025-10-29 13:53:54,200 - INFO     -   ✓ Extracted merge pair from edge 2: (3, 13)
2025-10-29 13:53:54,200 - INFO     -   ✓ Validation passed
2025-10-29 13:53:54,200 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:54,201 - INFO     -     - Total states before merge: 1009
2025-10-29 13:53:54,201 - INFO     -     - Num nodes: 4
2025-10-29 13:53:54,201 - INFO     -     - Num edges: 12
2025-10-29 13:53:54,201 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:54,201 - INFO     -       - Node 3: 2 states
2025-10-29 13:53:54,201 - INFO     -       - Node 13: 1000 states
2025-10-29 13:53:54,201 - INFO     -       - Expected product: 2000 states
2025-10-29 13:53:54,201 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:54,207 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:53:54,207 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:54,207 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:53:54,308 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:54,308 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:54,308 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:53:54,324 - INFO     -   ✓ TS file received after 0.02s
2025-10-29 13:53:54,324 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:54,325 - INFO     -   Calling graph_tracker.merge_nodes([3, 13])...
2025-10-29 13:53:54,325 - INFO     - Attempting merge of nodes 3 and 13...
2025-10-29 13:53:54,325 - INFO     - Successfully merged nodes into new node 14 with 2000 states.
2025-10-29 13:53:54,325 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:54,325 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:54,325 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:53:54,325 - INFO     - 
================================================================================
2025-10-29 13:53:54,325 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:53:54,325 - INFO     - ================================================================================
2025-10-29 13:53:54,325 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:54,325 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:53:54,325 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:53:54,329 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:54,329 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:54,329 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:54,329 - INFO     -   - Raw ts2_f length: 1000
2025-10-29 13:53:54,329 - INFO     -   - Raw f_after length: 2000
2025-10-29 13:53:54,329 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:54,329 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:54,330 - INFO     -   - ts2_valid: 1000 / 1000 (removed -1000)
2025-10-29 13:53:54,331 - INFO     -   - after_valid: 2000 / 2000 (removed 0)
2025-10-29 13:53:54,331 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:54,331 - INFO     -   - ts1_id: 3
2025-10-29 13:53:54,331 - INFO     -   - ts2_id: 13
2025-10-29 13:53:54,331 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:54,331 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:54,331 - INFO     -   - ts1_size: 2, ts2_size: 1000
2025-10-29 13:53:54,331 - INFO     -   - Product space size: 2000
2025-10-29 13:53:54,331 - INFO     -   - Using product state mapping
2025-10-29 13:53:54,336 - INFO     -   - f_before_product length: 2000
2025-10-29 13:53:54,343 - INFO     -   - avg_f_before: 10.9790 (2000 valid states)
2025-10-29 13:53:54,343 - INFO     -   - avg_f_after:  12.5360 (2000 valid states)
2025-10-29 13:53:54,343 - INFO     -   - delta: 1.5570
2025-10-29 13:53:54,343 - INFO     -   - f_stability: 1.0 - |1.5570| / 10.9790 = 0.8582
2025-10-29 13:53:54,343 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:54,343 - INFO     -   - Compared 1002 values
2025-10-29 13:53:54,343 - INFO     -   - Significant changes (> 5.0): 76
2025-10-29 13:53:54,343 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:54,343 - INFO     -   - states_before: 2000
2025-10-29 13:53:54,343 - INFO     -   - states_after: 2000
2025-10-29 13:53:54,343 - INFO     -   - delta_states: 0
2025-10-29 13:53:54,343 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:54,344 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:54,344 - INFO     -   - ts2_transitions: 8500
2025-10-29 13:53:54,344 - INFO     -   - merged_transitions: 14400
2025-10-29 13:53:54,344 - INFO     -   - transition_density_change: 2.9475
2025-10-29 13:53:54,344 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:54,344 - INFO     -   - search_signals present: True
2025-10-29 13:53:54,344 - INFO     -   - nodes_expanded: 2000
2025-10-29 13:53:54,344 - INFO     -   - search_depth: 6
2025-10-29 13:53:54,344 - INFO     -   - solution_cost: 4
2025-10-29 13:53:54,344 - INFO     -   - branching_factor: 7.2000
2025-10-29 13:53:54,344 - INFO     -   - solution_found: True
2025-10-29 13:53:54,344 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:54,346 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:54,346 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:53:54,346 - INFO     -   - TS3(2) + TS13(1000) → 2000 states
2025-10-29 13:53:54,346 - INFO     -   - f_stability=0.858
2025-10-29 13:53:54,346 - INFO     -   - A* nodes_expanded=2000
2025-10-29 13:53:54,346 - INFO     -   - solution_found=True
2025-10-29 13:53:54,346 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:54,346 - INFO     - 
  Extracted signals:
2025-10-29 13:53:54,346 - INFO     -     - iteration: 5
2025-10-29 13:53:54,346 - INFO     -     - states_before: 2000
2025-10-29 13:53:54,346 - INFO     -     - states_after: 2000
2025-10-29 13:53:54,346 - INFO     -     - delta_states: 0
2025-10-29 13:53:54,346 - INFO     -     - f_value_stability: 0.8582
2025-10-29 13:53:54,346 - INFO     -     - num_significant_f_changes: 76
2025-10-29 13:53:54,347 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:54,347 - INFO     -     - nodes_expanded: 2000
2025-10-29 13:53:54,347 - INFO     -     - search_depth: 6
2025-10-29 13:53:54,347 - INFO     -     - solution_cost: 4
2025-10-29 13:53:54,347 - INFO     -     - branching_factor: 7.2000
2025-10-29 13:53:54,347 - INFO     -     - solution_found: True
2025-10-29 13:53:54,347 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:54,347 - INFO     - 
  Computing reward:
2025-10-29 13:53:54,347 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:54,347 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:54,347 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:54,347 - INFO     -   [1] BRANCHING FACTOR: 7.200 → score 0.180 (high BF, minimal credit)
2025-10-29 13:53:54,348 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:54,349 - INFO     -   [3] F-VALUE STABILITY: 0.900
2025-10-29 13:53:54,349 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:54,349 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:54,349 - INFO     - 
  [COMPOSITE]: 0.640
2025-10-29 13:53:54,349 - INFO     -     = 0.300*0.180 (bf)
2025-10-29 13:53:54,349 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:54,349 - INFO     -     + 0.350*0.900 (stability)
2025-10-29 13:53:54,349 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:54,349 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:54,349 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:54,349 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:54,350 - INFO     - 
  [FINAL REWARD]: 0.7793
2025-10-29 13:53:54,350 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:54,350 - INFO     -     ✓ Reward computed: 0.7793
2025-10-29 13:53:54,350 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:54,350 - INFO     -     - bf_score                       0.1800
2025-10-29 13:53:54,350 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:54,350 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:54,350 - INFO     -     - f_stability                    0.9004
2025-10-29 13:53:54,350 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:54,350 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:54,350 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:54,350 - INFO     -     - composite                      0.6397
2025-10-29 13:53:54,350 - INFO     -     - total                          0.7793
2025-10-29 13:53:54,350 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:54,350 - INFO     -   Num remaining nodes: 3
2025-10-29 13:53:54,351 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:53:54,351 - INFO     -   Done: False
2025-10-29 13:53:54,351 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:54,351 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:54,351 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:54,351 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:54,351 - INFO     -     - num_nodes: 3
2025-10-29 13:53:54,351 - INFO     -     - num_edges: 6
2025-10-29 13:53:54,351 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:54,351 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:53:54,352 - INFO     -   After: current_merge_step = 6
2025-10-29 13:53:54,352 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:54,352 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:54,352 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:54,353 - INFO     -   ✓ Step logged
2025-10-29 13:53:54,353 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:54,353 - INFO     -   Returning:
2025-10-29 13:53:54,353 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:54,353 - INFO     -     - reward: 0.7793
2025-10-29 13:53:54,353 - INFO     -     - done: False
2025-10-29 13:53:54,353 - INFO     -     - truncated: False
2025-10-29 13:53:54,353 - INFO     -     - info: 19 keys
2025-10-29 13:53:54,353 - INFO     - ==========================================================================================

2025-10-29 13:53:54,360 - INFO     - 
==========================================================================================
2025-10-29 13:53:54,360 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:54,360 - INFO     - ==========================================================================================
2025-10-29 13:53:54,360 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:54,360 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:53:54,360 - INFO     -   Available edges in graph: 6
2025-10-29 13:53:54,360 - INFO     -   Action index calculation:
2025-10-29 13:53:54,360 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 6 = 1
2025-10-29 13:53:54,360 - INFO     -     - clamped to [0, 5]: 1
2025-10-29 13:53:54,360 - INFO     -   ✓ Extracted merge pair from edge 1: (4, 14)
2025-10-29 13:53:54,360 - INFO     -   ✓ Validation passed
2025-10-29 13:53:54,360 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:54,361 - INFO     -     - Total states before merge: 2007
2025-10-29 13:53:54,361 - INFO     -     - Num nodes: 3
2025-10-29 13:53:54,361 - INFO     -     - Num edges: 6
2025-10-29 13:53:54,361 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:54,361 - INFO     -       - Node 4: 2 states
2025-10-29 13:53:54,361 - INFO     -       - Node 14: 2000 states
2025-10-29 13:53:54,361 - INFO     -       - Expected product: 4000 states
2025-10-29 13:53:54,361 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:54,371 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:53:54,371 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:54,371 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:53:54,472 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:54,472 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:54,472 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:53:54,696 - INFO     -   ✓ TS file received after 0.22s
2025-10-29 13:53:54,696 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:54,696 - INFO     -   Calling graph_tracker.merge_nodes([4, 14])...
2025-10-29 13:53:54,696 - INFO     - Attempting merge of nodes 4 and 14...
2025-10-29 13:53:54,696 - INFO     - Successfully merged nodes into new node 15 with 4000 states.
2025-10-29 13:53:54,696 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:54,696 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:54,696 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:53:54,698 - INFO     - 
================================================================================
2025-10-29 13:53:54,698 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:53:54,698 - INFO     - ================================================================================
2025-10-29 13:53:54,698 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:54,698 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:53:54,698 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:53:54,702 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:54,702 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:54,702 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:54,702 - INFO     -   - Raw ts2_f length: 2000
2025-10-29 13:53:54,702 - INFO     -   - Raw f_after length: 4000
2025-10-29 13:53:54,702 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:54,702 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:54,703 - INFO     -   - ts2_valid: 2000 / 2000 (removed -2000)
2025-10-29 13:53:54,705 - INFO     -   - after_valid: 2984 / 4000 (removed 1016)
2025-10-29 13:53:54,705 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:54,705 - INFO     -   - ts1_id: 4
2025-10-29 13:53:54,706 - INFO     -   - ts2_id: 14
2025-10-29 13:53:54,706 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:54,706 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:54,706 - INFO     -   - ts1_size: 2, ts2_size: 2000
2025-10-29 13:53:54,706 - INFO     -   - Product space size: 4000
2025-10-29 13:53:54,706 - INFO     -   - Using product state mapping
2025-10-29 13:53:54,711 - INFO     -   - f_before_product length: 4000
2025-10-29 13:53:54,722 - INFO     -   - avg_f_before: 12.5360 (4000 valid states)
2025-10-29 13:53:54,722 - INFO     -   - avg_f_after:  13.3747 (2984 valid states)
2025-10-29 13:53:54,722 - INFO     -   - delta: 0.8387
2025-10-29 13:53:54,723 - INFO     -   - f_stability: 1.0 - |0.8387| / 12.5360 = 0.9331
2025-10-29 13:53:54,723 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:54,723 - INFO     -   - Compared 2002 values
2025-10-29 13:53:54,723 - INFO     -   - Significant changes (> 5.0): 287
2025-10-29 13:53:54,723 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:54,723 - INFO     -   - states_before: 4000
2025-10-29 13:53:54,723 - INFO     -   - states_after: 4000
2025-10-29 13:53:54,723 - INFO     -   - delta_states: 0
2025-10-29 13:53:54,723 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:54,723 - INFO     -   - ts1_transitions: 3
2025-10-29 13:53:54,723 - INFO     -   - ts2_transitions: 14400
2025-10-29 13:53:54,723 - INFO     -   - merged_transitions: 22400
2025-10-29 13:53:54,723 - INFO     -   - transition_density_change: 1.9992
2025-10-29 13:53:54,723 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:54,723 - INFO     -   - search_signals present: True
2025-10-29 13:53:54,723 - INFO     -   - nodes_expanded: 2984
2025-10-29 13:53:54,723 - INFO     -   - search_depth: 6
2025-10-29 13:53:54,724 - INFO     -   - solution_cost: 4
2025-10-29 13:53:54,724 - INFO     -   - branching_factor: 7.5067
2025-10-29 13:53:54,724 - INFO     -   - solution_found: True
2025-10-29 13:53:54,724 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:54,728 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:54,729 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:53:54,729 - INFO     -   - TS4(2) + TS14(2000) → 4000 states
2025-10-29 13:53:54,729 - INFO     -   - f_stability=0.933
2025-10-29 13:53:54,729 - INFO     -   - A* nodes_expanded=2984
2025-10-29 13:53:54,729 - INFO     -   - solution_found=True
2025-10-29 13:53:54,729 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:54,729 - INFO     - 
  Extracted signals:
2025-10-29 13:53:54,729 - INFO     -     - iteration: 6
2025-10-29 13:53:54,729 - INFO     -     - states_before: 4000
2025-10-29 13:53:54,730 - INFO     -     - states_after: 4000
2025-10-29 13:53:54,730 - INFO     -     - delta_states: 0
2025-10-29 13:53:54,730 - INFO     -     - f_value_stability: 0.9331
2025-10-29 13:53:54,730 - INFO     -     - num_significant_f_changes: 287
2025-10-29 13:53:54,730 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:54,730 - INFO     -     - nodes_expanded: 2984
2025-10-29 13:53:54,730 - INFO     -     - search_depth: 6
2025-10-29 13:53:54,730 - INFO     -     - solution_cost: 4
2025-10-29 13:53:54,730 - INFO     -     - branching_factor: 7.5067
2025-10-29 13:53:54,730 - INFO     -     - solution_found: True
2025-10-29 13:53:54,730 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:54,731 - INFO     - 
  Computing reward:
2025-10-29 13:53:54,731 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:54,731 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:54,731 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:54,731 - INFO     -   [1] BRANCHING FACTOR: 7.507 → score 0.149 (high BF, minimal credit)
2025-10-29 13:53:54,731 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:54,734 - INFO     -   [3] F-VALUE STABILITY: 0.931
2025-10-29 13:53:54,734 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:54,735 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:54,735 - INFO     - 
  [COMPOSITE]: 0.641
2025-10-29 13:53:54,735 - INFO     -     = 0.300*0.149 (bf)
2025-10-29 13:53:54,735 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:54,735 - INFO     -     + 0.350*0.931 (stability)
2025-10-29 13:53:54,735 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:54,735 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:54,735 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:54,735 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:54,737 - INFO     - 
  [FINAL REWARD]: 0.7826
2025-10-29 13:53:54,737 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:54,737 - INFO     -     ✓ Reward computed: 0.7826
2025-10-29 13:53:54,737 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:54,737 - INFO     -     - bf_score                       0.1493
2025-10-29 13:53:54,737 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:54,738 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:54,738 - INFO     -     - f_stability                    0.9314
2025-10-29 13:53:54,738 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:54,738 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:54,738 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:54,738 - INFO     -     - composite                      0.6413
2025-10-29 13:53:54,738 - INFO     -     - total                          0.7826
2025-10-29 13:53:54,738 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:54,738 - INFO     -   Num remaining nodes: 2
2025-10-29 13:53:54,738 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:53:54,738 - INFO     -   Done: False
2025-10-29 13:53:54,738 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:54,738 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:54,738 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:54,738 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:54,743 - INFO     -     - num_nodes: 2
2025-10-29 13:53:54,743 - INFO     -     - num_edges: 2
2025-10-29 13:53:54,743 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:54,743 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:53:54,743 - INFO     -   After: current_merge_step = 7
2025-10-29 13:53:54,743 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:54,743 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:54,743 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:54,743 - INFO     -   ✓ Step logged
2025-10-29 13:53:54,744 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:54,744 - INFO     -   Returning:
2025-10-29 13:53:54,744 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:54,744 - INFO     -     - reward: 0.7826
2025-10-29 13:53:54,744 - INFO     -     - done: False
2025-10-29 13:53:54,744 - INFO     -     - truncated: False
2025-10-29 13:53:54,744 - INFO     -     - info: 19 keys
2025-10-29 13:53:54,744 - INFO     - ==========================================================================================

2025-10-29 13:53:54,752 - INFO     - 
==========================================================================================
2025-10-29 13:53:54,752 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:54,752 - INFO     - ==========================================================================================
2025-10-29 13:53:54,752 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:54,752 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:53:54,752 - INFO     -   Available edges in graph: 2
2025-10-29 13:53:54,752 - INFO     -   Action index calculation:
2025-10-29 13:53:54,753 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:53:54,753 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:53:54,753 - INFO     -   ✓ Extracted merge pair from edge 0: (8, 15)
2025-10-29 13:53:54,753 - INFO     -   ✓ Validation passed
2025-10-29 13:53:54,753 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:54,753 - INFO     -     - Total states before merge: 4005
2025-10-29 13:53:54,753 - INFO     -     - Num nodes: 2
2025-10-29 13:53:54,753 - INFO     -     - Num edges: 2
2025-10-29 13:53:54,753 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:54,753 - INFO     -       - Node 8: 5 states
2025-10-29 13:53:54,753 - INFO     -       - Node 15: 4000 states
2025-10-29 13:53:54,753 - INFO     -       - Expected product: 20000 states
2025-10-29 13:53:54,753 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:54,767 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:53:54,768 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:54,768 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:53:54,869 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:54,869 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:54,870 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:53:55,126 - INFO     -   ✓ TS file received after 0.26s
2025-10-29 13:53:55,127 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:55,127 - INFO     -   Calling graph_tracker.merge_nodes([8, 15])...
2025-10-29 13:53:55,127 - INFO     - Attempting merge of nodes 8 and 15...
2025-10-29 13:53:55,127 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:53:55,127 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:55,127 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:55,128 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:53:55,128 - INFO     - 
================================================================================
2025-10-29 13:53:55,128 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:53:55,128 - INFO     - ================================================================================
2025-10-29 13:53:55,128 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:55,128 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:53:55,128 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:53:55,133 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:55,133 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:55,133 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:55,133 - INFO     -   - Raw ts2_f length: 668
2025-10-29 13:53:55,133 - INFO     -   - Raw f_after length: 3340
2025-10-29 13:53:55,134 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:55,134 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:55,134 - INFO     -   - ts2_valid: 668 / 668 (removed -668)
2025-10-29 13:53:55,136 - INFO     -   - after_valid: 2749 / 3340 (removed 591)
2025-10-29 13:53:55,136 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:55,136 - INFO     -   - ts1_id: 8
2025-10-29 13:53:55,136 - INFO     -   - ts2_id: 15
2025-10-29 13:53:55,136 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:55,136 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:55,136 - INFO     -   - ts1_size: 5, ts2_size: 668
2025-10-29 13:53:55,137 - INFO     -   - Product space size: 3340
2025-10-29 13:53:55,137 - INFO     -   - Using product state mapping
2025-10-29 13:53:55,143 - INFO     -   - f_before_product length: 3340
2025-10-29 13:53:55,151 - INFO     -   - avg_f_before: 8.1722 (3340 valid states)
2025-10-29 13:53:55,151 - INFO     -   - avg_f_after:  12.2346 (2749 valid states)
2025-10-29 13:53:55,151 - INFO     -   - delta: 4.0625
2025-10-29 13:53:55,151 - INFO     -   - f_stability: 1.0 - |4.0625| / 8.1722 = 0.5029
2025-10-29 13:53:55,151 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:55,151 - INFO     -   - Compared 673 values
2025-10-29 13:53:55,151 - INFO     -   - Significant changes (> 5.0): 130
2025-10-29 13:53:55,151 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:55,151 - INFO     -   - states_before: 3340
2025-10-29 13:53:55,151 - INFO     -   - states_after: 3340
2025-10-29 13:53:55,151 - INFO     -   - delta_states: 0
2025-10-29 13:53:55,151 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:55,152 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:55,152 - INFO     -   - ts2_transitions: 6703
2025-10-29 13:53:55,152 - INFO     -   - merged_transitions: 19291
2025-10-29 13:53:55,152 - INFO     -   - transition_density_change: 3.7650
2025-10-29 13:53:55,152 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:55,152 - INFO     -   - search_signals present: True
2025-10-29 13:53:55,152 - INFO     -   - nodes_expanded: 2749
2025-10-29 13:53:55,152 - INFO     -   - search_depth: 6
2025-10-29 13:53:55,152 - INFO     -   - solution_cost: 4
2025-10-29 13:53:55,152 - INFO     -   - branching_factor: 7.0175
2025-10-29 13:53:55,152 - INFO     -   - solution_found: True
2025-10-29 13:53:55,152 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:55,154 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:55,154 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:53:55,154 - INFO     -   - TS8(5) + TS15(668) → 3340 states
2025-10-29 13:53:55,154 - INFO     -   - f_stability=0.503
2025-10-29 13:53:55,154 - INFO     -   - A* nodes_expanded=2749
2025-10-29 13:53:55,154 - INFO     -   - solution_found=True
2025-10-29 13:53:55,154 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:55,154 - INFO     - 
  Extracted signals:
2025-10-29 13:53:55,154 - INFO     -     - iteration: 7
2025-10-29 13:53:55,154 - INFO     -     - states_before: 3340
2025-10-29 13:53:55,155 - INFO     -     - states_after: 3340
2025-10-29 13:53:55,155 - INFO     -     - delta_states: 0
2025-10-29 13:53:55,155 - INFO     -     - f_value_stability: 0.5029
2025-10-29 13:53:55,155 - INFO     -     - num_significant_f_changes: 130
2025-10-29 13:53:55,155 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:55,155 - INFO     -     - nodes_expanded: 2749
2025-10-29 13:53:55,155 - INFO     -     - search_depth: 6
2025-10-29 13:53:55,155 - INFO     -     - solution_cost: 4
2025-10-29 13:53:55,155 - INFO     -     - branching_factor: 7.0175
2025-10-29 13:53:55,155 - INFO     -     - solution_found: True
2025-10-29 13:53:55,155 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:55,156 - INFO     - 
  Computing reward:
2025-10-29 13:53:55,156 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:55,156 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:55,156 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:55,156 - INFO     -   [1] BRANCHING FACTOR: 7.017 → score 0.198 (high BF, minimal credit)
2025-10-29 13:53:55,156 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:55,157 - INFO     -   [3] F-VALUE STABILITY: 0.604
2025-10-29 13:53:55,157 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:55,157 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:55,157 - INFO     - 
  [COMPOSITE]: 0.541
2025-10-29 13:53:55,157 - INFO     -     = 0.300*0.198 (bf)
2025-10-29 13:53:55,157 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:55,157 - INFO     -     + 0.350*0.604 (stability)
2025-10-29 13:53:55,157 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:55,157 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:55,157 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:55,157 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:55,158 - INFO     - 
  [FINAL REWARD]: 0.4828
2025-10-29 13:53:55,158 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:55,158 - INFO     -     ✓ Reward computed: 0.4828
2025-10-29 13:53:55,158 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:55,158 - INFO     -     - bf_score                       0.1983
2025-10-29 13:53:55,158 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:55,158 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:55,158 - INFO     -     - f_stability                    0.6040
2025-10-29 13:53:55,158 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:55,158 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:55,159 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:55,159 - INFO     -     - composite                      0.5414
2025-10-29 13:53:55,159 - INFO     -     - total                          0.4828
2025-10-29 13:53:55,159 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:55,159 - INFO     -   Num remaining nodes: 1
2025-10-29 13:53:55,159 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:53:55,159 - INFO     -   Done: True
2025-10-29 13:53:55,159 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:53:55,159 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:55,159 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:55,159 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:55,159 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:55,159 - INFO     -     - num_nodes: 1
2025-10-29 13:53:55,159 - INFO     -     - num_edges: 0
2025-10-29 13:53:55,159 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:55,159 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:53:55,160 - INFO     -   After: current_merge_step = 8
2025-10-29 13:53:55,160 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:55,160 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:55,160 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:55,160 - INFO     -   ✓ Step logged
2025-10-29 13:53:55,160 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:55,161 - INFO     -   Returning:
2025-10-29 13:53:55,161 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:55,161 - INFO     -     - reward: 0.4828
2025-10-29 13:53:55,161 - INFO     -     - done: True
2025-10-29 13:53:55,161 - INFO     -     - truncated: False
2025-10-29 13:53:55,161 - INFO     -     - info: 19 keys
2025-10-29 13:53:55,161 - INFO     - ==========================================================================================

2025-10-29 13:53:55,162 - INFO     -     ✓ Reward: 4.7728, Time: 2.65s
2025-10-29 13:53:55,162 - INFO     -   [4/5] problem_small_03.pddl
2025-10-29 13:53:55,163 - INFO     - Environment initialized with:
2025-10-29 13:53:55,163 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:55,163 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_03.pddl
2025-10-29 13:53:55,163 - INFO     -   FD base: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward
2025-10-29 13:53:55,163 - INFO     -   max_states: 4000
2025-10-29 13:53:55,163 - INFO     -   threshold_before_merge: 1
2025-10-29 13:53:55,163 - INFO     - ✓ Initialized reward function: astar_search
2025-10-29 13:53:55,163 - INFO     - ✓ RewardInfoExtractor initialized (output_dir: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output)
2025-10-29 13:53:55,163 - INFO     - ✓ Initialized reward info extractor
2025-10-29 13:53:55,246 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:53:55,253 - INFO     - [Handshake] Building FD command:
2025-10-29 13:53:55,253 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:55,253 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_03.pddl
2025-10-29 13:53:55,253 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:53:55,256 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:55,858 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:55,858 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:55,858 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:56,186 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:56,191 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:56,191 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:56,193 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:56,193 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:56,193 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:56,193 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:56,193 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:56,193 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:56,193 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:56,194 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:56,194 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:56,194 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:56,194 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:56,194 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:56,194 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:56,194 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:56,194 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:56,194 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:56,195 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:56,195 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:56,195 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:56,195 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:56,196 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:56,197 - INFO     - Added edge (0, 1)
2025-10-29 13:53:56,197 - INFO     - Added edge (0, 2)
2025-10-29 13:53:56,197 - INFO     - Added edge (0, 3)
2025-10-29 13:53:56,197 - INFO     - Added edge (0, 4)
2025-10-29 13:53:56,197 - INFO     - Added edge (0, 5)
2025-10-29 13:53:56,197 - INFO     - Added edge (0, 6)
2025-10-29 13:53:56,197 - INFO     - Added edge (0, 7)
2025-10-29 13:53:56,197 - INFO     - Added edge (0, 8)
2025-10-29 13:53:56,197 - INFO     - Added edge (1, 0)
2025-10-29 13:53:56,197 - INFO     - Added edge (1, 2)
2025-10-29 13:53:56,197 - INFO     - Added edge (1, 3)
2025-10-29 13:53:56,197 - INFO     - Added edge (1, 4)
2025-10-29 13:53:56,197 - INFO     - Added edge (1, 5)
2025-10-29 13:53:56,198 - INFO     - Added edge (1, 6)
2025-10-29 13:53:56,198 - INFO     - Added edge (1, 7)
2025-10-29 13:53:56,198 - INFO     - Added edge (1, 8)
2025-10-29 13:53:56,198 - INFO     - Added edge (2, 0)
2025-10-29 13:53:56,198 - INFO     - Added edge (2, 1)
2025-10-29 13:53:56,198 - INFO     - Added edge (2, 3)
2025-10-29 13:53:56,198 - INFO     - Added edge (2, 4)
2025-10-29 13:53:56,198 - INFO     - Added edge (2, 5)
2025-10-29 13:53:56,198 - INFO     - Added edge (2, 6)
2025-10-29 13:53:56,198 - INFO     - Added edge (2, 7)
2025-10-29 13:53:56,198 - INFO     - Added edge (2, 8)
2025-10-29 13:53:56,198 - INFO     - Added edge (3, 0)
2025-10-29 13:53:56,198 - INFO     - Added edge (3, 1)
2025-10-29 13:53:56,198 - INFO     - Added edge (3, 2)
2025-10-29 13:53:56,198 - INFO     - Added edge (3, 4)
2025-10-29 13:53:56,198 - INFO     - Added edge (3, 5)
2025-10-29 13:53:56,198 - INFO     - Added edge (3, 6)
2025-10-29 13:53:56,198 - INFO     - Added edge (3, 7)
2025-10-29 13:53:56,198 - INFO     - Added edge (3, 8)
2025-10-29 13:53:56,198 - INFO     - Added edge (4, 0)
2025-10-29 13:53:56,199 - INFO     - Added edge (4, 1)
2025-10-29 13:53:56,199 - INFO     - Added edge (4, 2)
2025-10-29 13:53:56,199 - INFO     - Added edge (4, 3)
2025-10-29 13:53:56,199 - INFO     - Added edge (4, 5)
2025-10-29 13:53:56,199 - INFO     - Added edge (4, 6)
2025-10-29 13:53:56,199 - INFO     - Added edge (4, 7)
2025-10-29 13:53:56,199 - INFO     - Added edge (4, 8)
2025-10-29 13:53:56,199 - INFO     - Added edge (5, 0)
2025-10-29 13:53:56,199 - INFO     - Added edge (5, 1)
2025-10-29 13:53:56,199 - INFO     - Added edge (5, 2)
2025-10-29 13:53:56,199 - INFO     - Added edge (5, 3)
2025-10-29 13:53:56,199 - INFO     - Added edge (5, 4)
2025-10-29 13:53:56,199 - INFO     - Added edge (6, 0)
2025-10-29 13:53:56,199 - INFO     - Added edge (6, 1)
2025-10-29 13:53:56,199 - INFO     - Added edge (6, 2)
2025-10-29 13:53:56,199 - INFO     - Added edge (6, 3)
2025-10-29 13:53:56,199 - INFO     - Added edge (6, 4)
2025-10-29 13:53:56,199 - INFO     - Added edge (7, 0)
2025-10-29 13:53:56,199 - INFO     - Added edge (7, 1)
2025-10-29 13:53:56,199 - INFO     - Added edge (7, 2)
2025-10-29 13:53:56,199 - INFO     - Added edge (7, 3)
2025-10-29 13:53:56,199 - INFO     - Added edge (7, 4)
2025-10-29 13:53:56,199 - INFO     - Added edge (8, 0)
2025-10-29 13:53:56,199 - INFO     - Added edge (8, 1)
2025-10-29 13:53:56,199 - INFO     - Added edge (8, 2)
2025-10-29 13:53:56,199 - INFO     - Added edge (8, 3)
2025-10-29 13:53:56,199 - INFO     - Added edge (8, 4)
2025-10-29 13:53:56,199 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:56,208 - INFO     - 
==========================================================================================
2025-10-29 13:53:56,208 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:56,208 - INFO     - ==========================================================================================
2025-10-29 13:53:56,208 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:56,208 - INFO     -   Input action: 41 (type: int)
2025-10-29 13:53:56,208 - INFO     -   Available edges in graph: 60
2025-10-29 13:53:56,208 - INFO     -   Action index calculation:
2025-10-29 13:53:56,208 - INFO     -     - action % max(num_valid_edges, 1) = 41 % 60 = 41
2025-10-29 13:53:56,208 - INFO     -     - clamped to [0, 59]: 41
2025-10-29 13:53:56,208 - INFO     -   ✓ Extracted merge pair from edge 41: (5, 1)
2025-10-29 13:53:56,208 - INFO     -   ✓ Validation passed
2025-10-29 13:53:56,209 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:56,209 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:56,209 - INFO     -     - Num nodes: 9
2025-10-29 13:53:56,209 - INFO     -     - Num edges: 60
2025-10-29 13:53:56,209 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:56,209 - INFO     -       - Node 5: 5 states
2025-10-29 13:53:56,209 - INFO     -       - Node 1: 2 states
2025-10-29 13:53:56,209 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:56,209 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:56,214 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:53:56,214 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:56,214 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:53:56,315 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:56,315 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:56,315 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:53:56,315 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:56,315 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:56,315 - INFO     -   Calling graph_tracker.merge_nodes([5, 1])...
2025-10-29 13:53:56,316 - INFO     - Attempting merge of nodes 5 and 1...
2025-10-29 13:53:56,316 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:53:56,316 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:56,316 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:56,316 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:53:56,316 - INFO     - 
================================================================================
2025-10-29 13:53:56,316 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:53:56,316 - INFO     - ================================================================================
2025-10-29 13:53:56,316 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:56,316 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:53:56,316 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:53:56,317 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:56,317 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:56,317 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:56,317 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:56,317 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:56,317 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:56,317 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:56,317 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:56,317 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:56,318 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:56,318 - INFO     -   - ts1_id: 5
2025-10-29 13:53:56,318 - INFO     -   - ts2_id: 1
2025-10-29 13:53:56,318 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:56,318 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:56,318 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:56,318 - INFO     -   - Product space size: 10
2025-10-29 13:53:56,318 - INFO     -   - Using product state mapping
2025-10-29 13:53:56,318 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:56,318 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:56,318 - INFO     -   - avg_f_after:  3.7000 (10 valid states)
2025-10-29 13:53:56,318 - INFO     -   - delta: 0.9000
2025-10-29 13:53:56,318 - INFO     -   - f_stability: 1.0 - |0.9000| / 2.8000 = 0.6786
2025-10-29 13:53:56,318 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:56,318 - INFO     -   - Compared 7 values
2025-10-29 13:53:56,319 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:56,319 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:56,319 - INFO     -   - states_before: 10
2025-10-29 13:53:56,319 - INFO     -   - states_after: 10
2025-10-29 13:53:56,319 - INFO     -   - delta_states: 0
2025-10-29 13:53:56,319 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:56,319 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:56,319 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:56,319 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:56,319 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:56,319 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:56,319 - INFO     -   - search_signals present: True
2025-10-29 13:53:56,319 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:56,319 - INFO     -   - search_depth: 2
2025-10-29 13:53:56,319 - INFO     -   - solution_cost: 2
2025-10-29 13:53:56,319 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:56,319 - INFO     -   - solution_found: True
2025-10-29 13:53:56,319 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:56,320 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:56,320 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:53:56,320 - INFO     -   - TS5(5) + TS1(2) → 10 states
2025-10-29 13:53:56,321 - INFO     -   - f_stability=0.679
2025-10-29 13:53:56,321 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:56,321 - INFO     -   - solution_found=True
2025-10-29 13:53:56,321 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:56,321 - INFO     - 
  Extracted signals:
2025-10-29 13:53:56,321 - INFO     -     - iteration: 0
2025-10-29 13:53:56,321 - INFO     -     - states_before: 10
2025-10-29 13:53:56,321 - INFO     -     - states_after: 10
2025-10-29 13:53:56,321 - INFO     -     - delta_states: 0
2025-10-29 13:53:56,322 - INFO     -     - f_value_stability: 0.6786
2025-10-29 13:53:56,322 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:56,322 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:56,322 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:56,322 - INFO     -     - search_depth: 2
2025-10-29 13:53:56,322 - INFO     -     - solution_cost: 2
2025-10-29 13:53:56,322 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:56,322 - INFO     -     - solution_found: True
2025-10-29 13:53:56,322 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:56,322 - INFO     - 
  Computing reward:
2025-10-29 13:53:56,322 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:56,322 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:56,322 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:56,322 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:56,323 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:56,323 - INFO     -   [3] F-VALUE STABILITY: 0.286
2025-10-29 13:53:56,323 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:56,323 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:56,323 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:53:56,323 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:56,323 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:56,323 - INFO     -     + 0.350*0.286 (stability)
2025-10-29 13:53:56,323 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:56,324 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:56,324 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:56,324 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:56,324 - INFO     - 
  [FINAL REWARD]: 0.3244
2025-10-29 13:53:56,324 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:56,324 - INFO     -     ✓ Reward computed: 0.3244
2025-10-29 13:53:56,324 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:56,324 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:56,324 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:56,324 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:56,324 - INFO     -     - f_stability                    0.2862
2025-10-29 13:53:56,324 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:56,324 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:56,324 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:56,324 - INFO     -     - composite                      0.5622
2025-10-29 13:53:56,324 - INFO     -     - total                          0.3244
2025-10-29 13:53:56,324 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:56,325 - INFO     -   Num remaining nodes: 8
2025-10-29 13:53:56,325 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:53:56,325 - INFO     -   Done: False
2025-10-29 13:53:56,325 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:56,326 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:56,326 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:56,326 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:56,326 - INFO     -     - num_nodes: 8
2025-10-29 13:53:56,326 - INFO     -     - num_edges: 50
2025-10-29 13:53:56,326 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:56,326 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:53:56,327 - INFO     -   After: current_merge_step = 1
2025-10-29 13:53:56,327 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:56,327 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:56,327 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:56,328 - INFO     -   ✓ Step logged
2025-10-29 13:53:56,328 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:56,328 - INFO     -   Returning:
2025-10-29 13:53:56,328 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:56,328 - INFO     -     - reward: 0.3244
2025-10-29 13:53:56,328 - INFO     -     - done: False
2025-10-29 13:53:56,328 - INFO     -     - truncated: False
2025-10-29 13:53:56,328 - INFO     -     - info: 19 keys
2025-10-29 13:53:56,328 - INFO     - ==========================================================================================

2025-10-29 13:53:56,334 - INFO     - 
==========================================================================================
2025-10-29 13:53:56,334 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:56,334 - INFO     - ==========================================================================================
2025-10-29 13:53:56,334 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:56,334 - INFO     -   Input action: 32 (type: int)
2025-10-29 13:53:56,334 - INFO     -   Available edges in graph: 50
2025-10-29 13:53:56,334 - INFO     -   Action index calculation:
2025-10-29 13:53:56,334 - INFO     -     - action % max(num_valid_edges, 1) = 32 % 50 = 32
2025-10-29 13:53:56,334 - INFO     -     - clamped to [0, 49]: 32
2025-10-29 13:53:56,334 - INFO     -   ✓ Extracted merge pair from edge 32: (6, 9)
2025-10-29 13:53:56,335 - INFO     -   ✓ Validation passed
2025-10-29 13:53:56,335 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:56,335 - INFO     -     - Total states before merge: 33
2025-10-29 13:53:56,335 - INFO     -     - Num nodes: 8
2025-10-29 13:53:56,335 - INFO     -     - Num edges: 50
2025-10-29 13:53:56,335 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:56,335 - INFO     -       - Node 6: 5 states
2025-10-29 13:53:56,335 - INFO     -       - Node 9: 10 states
2025-10-29 13:53:56,335 - INFO     -       - Expected product: 50 states
2025-10-29 13:53:56,335 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:56,342 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:53:56,342 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:56,342 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:53:56,443 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:56,443 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:56,443 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:53:56,445 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:56,445 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:56,445 - INFO     -   Calling graph_tracker.merge_nodes([6, 9])...
2025-10-29 13:53:56,445 - INFO     - Attempting merge of nodes 6 and 9...
2025-10-29 13:53:56,445 - INFO     - Successfully merged nodes into new node 10 with 50 states.
2025-10-29 13:53:56,445 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:56,445 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:56,445 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:53:56,445 - INFO     - 
================================================================================
2025-10-29 13:53:56,446 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:53:56,446 - INFO     - ================================================================================
2025-10-29 13:53:56,446 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:56,446 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:53:56,446 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:53:56,447 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:56,447 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:56,447 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:56,447 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:56,447 - INFO     -   - Raw f_after length: 50
2025-10-29 13:53:56,447 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:56,447 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:56,447 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:56,447 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:53:56,447 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:56,448 - INFO     -   - ts1_id: 6
2025-10-29 13:53:56,448 - INFO     -   - ts2_id: 9
2025-10-29 13:53:56,448 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:56,448 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:56,448 - INFO     -   - ts1_size: 5, ts2_size: 10
2025-10-29 13:53:56,448 - INFO     -   - Product space size: 50
2025-10-29 13:53:56,448 - INFO     -   - Using product state mapping
2025-10-29 13:53:56,448 - INFO     -   - f_before_product length: 50
2025-10-29 13:53:56,449 - INFO     -   - avg_f_before: 4.1200 (50 valid states)
2025-10-29 13:53:56,449 - INFO     -   - avg_f_after:  6.5200 (50 valid states)
2025-10-29 13:53:56,449 - INFO     -   - delta: 2.4000
2025-10-29 13:53:56,449 - INFO     -   - f_stability: 1.0 - |2.4000| / 4.1200 = 0.4175
2025-10-29 13:53:56,449 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:56,449 - INFO     -   - Compared 15 values
2025-10-29 13:53:56,449 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:56,450 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:56,450 - INFO     -   - states_before: 50
2025-10-29 13:53:56,450 - INFO     -   - states_after: 50
2025-10-29 13:53:56,450 - INFO     -   - delta_states: 0
2025-10-29 13:53:56,450 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:56,450 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:56,450 - INFO     -   - ts2_transitions: 40
2025-10-29 13:53:56,450 - INFO     -   - merged_transitions: 260
2025-10-29 13:53:56,450 - INFO     -   - transition_density_change: 4.1400
2025-10-29 13:53:56,450 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:56,450 - INFO     -   - search_signals present: True
2025-10-29 13:53:56,450 - INFO     -   - nodes_expanded: 50
2025-10-29 13:53:56,450 - INFO     -   - search_depth: 3
2025-10-29 13:53:56,451 - INFO     -   - solution_cost: 2
2025-10-29 13:53:56,451 - INFO     -   - branching_factor: 5.2000
2025-10-29 13:53:56,451 - INFO     -   - solution_found: True
2025-10-29 13:53:56,451 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:56,451 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:56,451 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:53:56,451 - INFO     -   - TS6(5) + TS9(10) → 50 states
2025-10-29 13:53:56,451 - INFO     -   - f_stability=0.417
2025-10-29 13:53:56,451 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:53:56,451 - INFO     -   - solution_found=True
2025-10-29 13:53:56,451 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:56,451 - INFO     - 
  Extracted signals:
2025-10-29 13:53:56,453 - INFO     -     - iteration: 1
2025-10-29 13:53:56,453 - INFO     -     - states_before: 50
2025-10-29 13:53:56,453 - INFO     -     - states_after: 50
2025-10-29 13:53:56,453 - INFO     -     - delta_states: 0
2025-10-29 13:53:56,453 - INFO     -     - f_value_stability: 0.4175
2025-10-29 13:53:56,453 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:56,453 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:56,453 - INFO     -     - nodes_expanded: 50
2025-10-29 13:53:56,453 - INFO     -     - search_depth: 3
2025-10-29 13:53:56,453 - INFO     -     - solution_cost: 2
2025-10-29 13:53:56,453 - INFO     -     - branching_factor: 5.2000
2025-10-29 13:53:56,453 - INFO     -     - solution_found: True
2025-10-29 13:53:56,454 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:56,454 - INFO     - 
  Computing reward:
2025-10-29 13:53:56,454 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:56,454 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:56,454 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:56,454 - INFO     -   [1] BRANCHING FACTOR: 5.200 → score 0.407 (tolerable)
2025-10-29 13:53:56,454 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:56,454 - INFO     -   [3] F-VALUE STABILITY: 0.364
2025-10-29 13:53:56,454 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:56,454 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:56,454 - INFO     - 
  [COMPOSITE]: 0.534
2025-10-29 13:53:56,454 - INFO     -     = 0.300*0.407 (bf)
2025-10-29 13:53:56,455 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:56,455 - INFO     -     + 0.350*0.364 (stability)
2025-10-29 13:53:56,455 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:56,455 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:56,455 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:56,455 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:56,455 - INFO     - 
  [FINAL REWARD]: 0.3684
2025-10-29 13:53:56,455 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:56,455 - INFO     -     ✓ Reward computed: 0.3684
2025-10-29 13:53:56,455 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:56,456 - INFO     -     - bf_score                       0.4067
2025-10-29 13:53:56,456 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:56,456 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:56,456 - INFO     -     - f_stability                    0.3642
2025-10-29 13:53:56,456 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:56,456 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:56,456 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:56,456 - INFO     -     - composite                      0.5342
2025-10-29 13:53:56,456 - INFO     -     - total                          0.3684
2025-10-29 13:53:56,456 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:56,457 - INFO     -   Num remaining nodes: 7
2025-10-29 13:53:56,457 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:53:56,457 - INFO     -   Done: False
2025-10-29 13:53:56,457 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:56,459 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:56,459 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:56,459 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:56,459 - INFO     -     - num_nodes: 7
2025-10-29 13:53:56,459 - INFO     -     - num_edges: 40
2025-10-29 13:53:56,459 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:56,460 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:53:56,460 - INFO     -   After: current_merge_step = 2
2025-10-29 13:53:56,460 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:56,460 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:56,460 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:56,461 - INFO     -   ✓ Step logged
2025-10-29 13:53:56,461 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:56,461 - INFO     -   Returning:
2025-10-29 13:53:56,461 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:56,461 - INFO     -     - reward: 0.3684
2025-10-29 13:53:56,461 - INFO     -     - done: False
2025-10-29 13:53:56,461 - INFO     -     - truncated: False
2025-10-29 13:53:56,461 - INFO     -     - info: 19 keys
2025-10-29 13:53:56,461 - INFO     - ==========================================================================================

2025-10-29 13:53:56,470 - INFO     - 
==========================================================================================
2025-10-29 13:53:56,470 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:56,470 - INFO     - ==========================================================================================
2025-10-29 13:53:56,470 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:56,470 - INFO     -   Input action: 28 (type: int)
2025-10-29 13:53:56,470 - INFO     -   Available edges in graph: 40
2025-10-29 13:53:56,470 - INFO     -   Action index calculation:
2025-10-29 13:53:56,471 - INFO     -     - action % max(num_valid_edges, 1) = 28 % 40 = 28
2025-10-29 13:53:56,471 - INFO     -     - clamped to [0, 39]: 28
2025-10-29 13:53:56,471 - INFO     -   ✓ Extracted merge pair from edge 28: (7, 10)
2025-10-29 13:53:56,471 - INFO     -   ✓ Validation passed
2025-10-29 13:53:56,471 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:56,471 - INFO     -     - Total states before merge: 68
2025-10-29 13:53:56,471 - INFO     -     - Num nodes: 7
2025-10-29 13:53:56,471 - INFO     -     - Num edges: 40
2025-10-29 13:53:56,471 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:56,472 - INFO     -       - Node 7: 5 states
2025-10-29 13:53:56,472 - INFO     -       - Node 10: 50 states
2025-10-29 13:53:56,472 - INFO     -       - Expected product: 250 states
2025-10-29 13:53:56,472 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:56,477 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:53:56,477 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:56,477 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:53:56,578 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:56,578 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:56,578 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:53:56,581 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:56,581 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:56,581 - INFO     -   Calling graph_tracker.merge_nodes([7, 10])...
2025-10-29 13:53:56,581 - INFO     - Attempting merge of nodes 7 and 10...
2025-10-29 13:53:56,581 - INFO     - Successfully merged nodes into new node 11 with 250 states.
2025-10-29 13:53:56,581 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:56,581 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:56,581 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:53:56,581 - INFO     - 
================================================================================
2025-10-29 13:53:56,581 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:53:56,581 - INFO     - ================================================================================
2025-10-29 13:53:56,582 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:56,582 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:53:56,582 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:53:56,582 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:56,582 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:56,582 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:56,582 - INFO     -   - Raw ts2_f length: 50
2025-10-29 13:53:56,582 - INFO     -   - Raw f_after length: 250
2025-10-29 13:53:56,583 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:56,583 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:56,583 - INFO     -   - ts2_valid: 50 / 50 (removed -50)
2025-10-29 13:53:56,583 - INFO     -   - after_valid: 250 / 250 (removed 0)
2025-10-29 13:53:56,583 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:56,583 - INFO     -   - ts1_id: 7
2025-10-29 13:53:56,583 - INFO     -   - ts2_id: 10
2025-10-29 13:53:56,583 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:56,583 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:56,583 - INFO     -   - ts1_size: 5, ts2_size: 50
2025-10-29 13:53:56,583 - INFO     -   - Product space size: 250
2025-10-29 13:53:56,583 - INFO     -   - Using product state mapping
2025-10-29 13:53:56,583 - INFO     -   - f_before_product length: 250
2025-10-29 13:53:56,585 - INFO     -   - avg_f_before: 6.5760 (250 valid states)
2025-10-29 13:53:56,585 - INFO     -   - avg_f_after:  9.3160 (250 valid states)
2025-10-29 13:53:56,585 - INFO     -   - delta: 2.7400
2025-10-29 13:53:56,585 - INFO     -   - f_stability: 1.0 - |2.7400| / 6.5760 = 0.5833
2025-10-29 13:53:56,585 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:56,585 - INFO     -   - Compared 55 values
2025-10-29 13:53:56,585 - INFO     -   - Significant changes (> 5.0): 9
2025-10-29 13:53:56,585 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:56,585 - INFO     -   - states_before: 250
2025-10-29 13:53:56,585 - INFO     -   - states_after: 250
2025-10-29 13:53:56,585 - INFO     -   - delta_states: 0
2025-10-29 13:53:56,585 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:56,585 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:56,586 - INFO     -   - ts2_transitions: 260
2025-10-29 13:53:56,586 - INFO     -   - merged_transitions: 1675
2025-10-29 13:53:56,586 - INFO     -   - transition_density_change: 5.6080
2025-10-29 13:53:56,586 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:56,586 - INFO     -   - search_signals present: True
2025-10-29 13:53:56,586 - INFO     -   - nodes_expanded: 250
2025-10-29 13:53:56,586 - INFO     -   - search_depth: 5
2025-10-29 13:53:56,586 - INFO     -   - solution_cost: 4
2025-10-29 13:53:56,586 - INFO     -   - branching_factor: 6.7000
2025-10-29 13:53:56,586 - INFO     -   - solution_found: True
2025-10-29 13:53:56,586 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:56,587 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:56,587 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:53:56,587 - INFO     -   - TS7(5) + TS10(50) → 250 states
2025-10-29 13:53:56,587 - INFO     -   - f_stability=0.583
2025-10-29 13:53:56,587 - INFO     -   - A* nodes_expanded=250
2025-10-29 13:53:56,587 - INFO     -   - solution_found=True
2025-10-29 13:53:56,587 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:56,587 - INFO     - 
  Extracted signals:
2025-10-29 13:53:56,587 - INFO     -     - iteration: 2
2025-10-29 13:53:56,587 - INFO     -     - states_before: 250
2025-10-29 13:53:56,587 - INFO     -     - states_after: 250
2025-10-29 13:53:56,587 - INFO     -     - delta_states: 0
2025-10-29 13:53:56,588 - INFO     -     - f_value_stability: 0.5833
2025-10-29 13:53:56,588 - INFO     -     - num_significant_f_changes: 9
2025-10-29 13:53:56,588 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:56,588 - INFO     -     - nodes_expanded: 250
2025-10-29 13:53:56,588 - INFO     -     - search_depth: 5
2025-10-29 13:53:56,588 - INFO     -     - solution_cost: 4
2025-10-29 13:53:56,588 - INFO     -     - branching_factor: 6.7000
2025-10-29 13:53:56,588 - INFO     -     - solution_found: True
2025-10-29 13:53:56,588 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:56,588 - INFO     - 
  Computing reward:
2025-10-29 13:53:56,588 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:56,588 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:56,588 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:56,588 - INFO     -   [1] BRANCHING FACTOR: 6.700 → score 0.230 (high BF, minimal credit)
2025-10-29 13:53:56,588 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:56,589 - INFO     -   [3] F-VALUE STABILITY: 0.531
2025-10-29 13:53:56,589 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:56,589 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:56,589 - INFO     - 
  [COMPOSITE]: 0.529
2025-10-29 13:53:56,589 - INFO     -     = 0.300*0.230 (bf)
2025-10-29 13:53:56,589 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:56,589 - INFO     -     + 0.350*0.531 (stability)
2025-10-29 13:53:56,589 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:56,589 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:56,589 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:56,589 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:56,590 - INFO     - 
  [FINAL REWARD]: 0.4587
2025-10-29 13:53:56,590 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:56,590 - INFO     -     ✓ Reward computed: 0.4587
2025-10-29 13:53:56,590 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:56,590 - INFO     -     - bf_score                       0.2300
2025-10-29 13:53:56,590 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:56,590 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:56,590 - INFO     -     - f_stability                    0.5312
2025-10-29 13:53:56,590 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:56,590 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:56,590 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:56,590 - INFO     -     - composite                      0.5293
2025-10-29 13:53:56,590 - INFO     -     - total                          0.4587
2025-10-29 13:53:56,590 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:56,590 - INFO     -   Num remaining nodes: 6
2025-10-29 13:53:56,590 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:53:56,590 - INFO     -   Done: False
2025-10-29 13:53:56,590 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:56,592 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:56,592 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:56,592 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:56,592 - INFO     -     - num_nodes: 6
2025-10-29 13:53:56,592 - INFO     -     - num_edges: 30
2025-10-29 13:53:56,592 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:56,593 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:53:56,593 - INFO     -   After: current_merge_step = 3
2025-10-29 13:53:56,593 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:56,593 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:56,593 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:56,596 - INFO     -   ✓ Step logged
2025-10-29 13:53:56,596 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:56,596 - INFO     -   Returning:
2025-10-29 13:53:56,596 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:56,596 - INFO     -     - reward: 0.4587
2025-10-29 13:53:56,596 - INFO     -     - done: False
2025-10-29 13:53:56,596 - INFO     -     - truncated: False
2025-10-29 13:53:56,596 - INFO     -     - info: 19 keys
2025-10-29 13:53:56,596 - INFO     - ==========================================================================================

2025-10-29 13:53:56,603 - INFO     - 
==========================================================================================
2025-10-29 13:53:56,603 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:56,603 - INFO     - ==========================================================================================
2025-10-29 13:53:56,603 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:56,603 - INFO     -   Input action: 4 (type: int)
2025-10-29 13:53:56,603 - INFO     -   Available edges in graph: 30
2025-10-29 13:53:56,603 - INFO     -   Action index calculation:
2025-10-29 13:53:56,603 - INFO     -     - action % max(num_valid_edges, 1) = 4 % 30 = 4
2025-10-29 13:53:56,603 - INFO     -     - clamped to [0, 29]: 4
2025-10-29 13:53:56,603 - INFO     -   ✓ Extracted merge pair from edge 4: (0, 11)
2025-10-29 13:53:56,603 - INFO     -   ✓ Validation passed
2025-10-29 13:53:56,603 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:56,603 - INFO     -     - Total states before merge: 263
2025-10-29 13:53:56,604 - INFO     -     - Num nodes: 6
2025-10-29 13:53:56,604 - INFO     -     - Num edges: 30
2025-10-29 13:53:56,604 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:56,604 - INFO     -       - Node 0: 2 states
2025-10-29 13:53:56,604 - INFO     -       - Node 11: 250 states
2025-10-29 13:53:56,604 - INFO     -       - Expected product: 500 states
2025-10-29 13:53:56,604 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:56,609 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:53:56,609 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:56,609 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:53:56,710 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:56,710 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:56,711 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:53:56,715 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:56,715 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:56,715 - INFO     -   Calling graph_tracker.merge_nodes([0, 11])...
2025-10-29 13:53:56,715 - INFO     - Attempting merge of nodes 0 and 11...
2025-10-29 13:53:56,715 - INFO     - Successfully merged nodes into new node 12 with 500 states.
2025-10-29 13:53:56,715 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:56,715 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:56,716 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:53:56,716 - INFO     - 
================================================================================
2025-10-29 13:53:56,716 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:53:56,716 - INFO     - ================================================================================
2025-10-29 13:53:56,716 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:56,716 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:53:56,716 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:53:56,717 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:56,717 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:56,717 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:56,717 - INFO     -   - Raw ts2_f length: 250
2025-10-29 13:53:56,717 - INFO     -   - Raw f_after length: 500
2025-10-29 13:53:56,717 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:56,717 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:56,717 - INFO     -   - ts2_valid: 250 / 250 (removed -250)
2025-10-29 13:53:56,718 - INFO     -   - after_valid: 500 / 500 (removed 0)
2025-10-29 13:53:56,718 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:56,718 - INFO     -   - ts1_id: 0
2025-10-29 13:53:56,718 - INFO     -   - ts2_id: 11
2025-10-29 13:53:56,718 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:56,718 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:56,718 - INFO     -   - ts1_size: 2, ts2_size: 250
2025-10-29 13:53:56,718 - INFO     -   - Product space size: 500
2025-10-29 13:53:56,718 - INFO     -   - Using product state mapping
2025-10-29 13:53:56,719 - INFO     -   - f_before_product length: 500
2025-10-29 13:53:56,720 - INFO     -   - avg_f_before: 9.3160 (500 valid states)
2025-10-29 13:53:56,720 - INFO     -   - avg_f_after:  10.1320 (500 valid states)
2025-10-29 13:53:56,720 - INFO     -   - delta: 0.8160
2025-10-29 13:53:56,720 - INFO     -   - f_stability: 1.0 - |0.8160| / 9.3160 = 0.9124
2025-10-29 13:53:56,720 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:56,721 - INFO     -   - Compared 252 values
2025-10-29 13:53:56,721 - INFO     -   - Significant changes (> 5.0): 7
2025-10-29 13:53:56,721 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:56,721 - INFO     -   - states_before: 500
2025-10-29 13:53:56,721 - INFO     -   - states_after: 500
2025-10-29 13:53:56,721 - INFO     -   - delta_states: 0
2025-10-29 13:53:56,721 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:56,721 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:56,721 - INFO     -   - ts2_transitions: 1675
2025-10-29 13:53:56,721 - INFO     -   - merged_transitions: 3800
2025-10-29 13:53:56,721 - INFO     -   - transition_density_change: 4.2400
2025-10-29 13:53:56,721 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:56,721 - INFO     -   - search_signals present: True
2025-10-29 13:53:56,721 - INFO     -   - nodes_expanded: 500
2025-10-29 13:53:56,721 - INFO     -   - search_depth: 5
2025-10-29 13:53:56,722 - INFO     -   - solution_cost: 4
2025-10-29 13:53:56,722 - INFO     -   - branching_factor: 7.6000
2025-10-29 13:53:56,722 - INFO     -   - solution_found: True
2025-10-29 13:53:56,722 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:56,722 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:56,722 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:53:56,722 - INFO     -   - TS0(2) + TS11(250) → 500 states
2025-10-29 13:53:56,722 - INFO     -   - f_stability=0.912
2025-10-29 13:53:56,722 - INFO     -   - A* nodes_expanded=500
2025-10-29 13:53:56,722 - INFO     -   - solution_found=True
2025-10-29 13:53:56,723 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:56,723 - INFO     - 
  Extracted signals:
2025-10-29 13:53:56,723 - INFO     -     - iteration: 3
2025-10-29 13:53:56,723 - INFO     -     - states_before: 500
2025-10-29 13:53:56,723 - INFO     -     - states_after: 500
2025-10-29 13:53:56,723 - INFO     -     - delta_states: 0
2025-10-29 13:53:56,723 - INFO     -     - f_value_stability: 0.9124
2025-10-29 13:53:56,723 - INFO     -     - num_significant_f_changes: 7
2025-10-29 13:53:56,723 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:56,723 - INFO     -     - nodes_expanded: 500
2025-10-29 13:53:56,723 - INFO     -     - search_depth: 5
2025-10-29 13:53:56,723 - INFO     -     - solution_cost: 4
2025-10-29 13:53:56,723 - INFO     -     - branching_factor: 7.6000
2025-10-29 13:53:56,723 - INFO     -     - solution_found: True
2025-10-29 13:53:56,723 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:56,723 - INFO     - 
  Computing reward:
2025-10-29 13:53:56,724 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:56,724 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:56,724 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:56,724 - INFO     -   [1] BRANCHING FACTOR: 7.600 → score 0.140 (high BF, minimal credit)
2025-10-29 13:53:56,724 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:56,724 - INFO     -   [3] F-VALUE STABILITY: 0.993
2025-10-29 13:53:56,724 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:56,724 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:56,724 - INFO     - 
  [COMPOSITE]: 0.664
2025-10-29 13:53:56,724 - INFO     -     = 0.300*0.140 (bf)
2025-10-29 13:53:56,725 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:56,725 - INFO     -     + 0.350*0.993 (stability)
2025-10-29 13:53:56,725 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:56,725 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:56,725 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:56,725 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:56,725 - INFO     - 
  [FINAL REWARD]: 0.8279
2025-10-29 13:53:56,725 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:56,725 - INFO     -     ✓ Reward computed: 0.8279
2025-10-29 13:53:56,725 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:56,725 - INFO     -     - bf_score                       0.1400
2025-10-29 13:53:56,725 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:56,726 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:56,726 - INFO     -     - f_stability                    0.9930
2025-10-29 13:53:56,726 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:56,726 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:56,726 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:56,726 - INFO     -     - composite                      0.6640
2025-10-29 13:53:56,726 - INFO     -     - total                          0.8279
2025-10-29 13:53:56,726 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:56,726 - INFO     -   Num remaining nodes: 5
2025-10-29 13:53:56,726 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:53:56,726 - INFO     -   Done: False
2025-10-29 13:53:56,726 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:56,727 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:56,727 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:56,727 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:56,727 - INFO     -     - num_nodes: 5
2025-10-29 13:53:56,727 - INFO     -     - num_edges: 20
2025-10-29 13:53:56,727 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:56,727 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:53:56,727 - INFO     -   After: current_merge_step = 4
2025-10-29 13:53:56,727 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:56,727 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:56,727 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:56,728 - INFO     -   ✓ Step logged
2025-10-29 13:53:56,728 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:56,728 - INFO     -   Returning:
2025-10-29 13:53:56,728 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:56,728 - INFO     -     - reward: 0.8279
2025-10-29 13:53:56,730 - INFO     -     - done: False
2025-10-29 13:53:56,730 - INFO     -     - truncated: False
2025-10-29 13:53:56,730 - INFO     -     - info: 19 keys
2025-10-29 13:53:56,730 - INFO     - ==========================================================================================

2025-10-29 13:53:56,737 - INFO     - 
==========================================================================================
2025-10-29 13:53:56,737 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:56,737 - INFO     - ==========================================================================================
2025-10-29 13:53:56,737 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:56,737 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:53:56,737 - INFO     -   Available edges in graph: 20
2025-10-29 13:53:56,737 - INFO     -   Action index calculation:
2025-10-29 13:53:56,737 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 20 = 3
2025-10-29 13:53:56,737 - INFO     -     - clamped to [0, 19]: 3
2025-10-29 13:53:56,738 - INFO     -   ✓ Extracted merge pair from edge 3: (2, 12)
2025-10-29 13:53:56,738 - INFO     -   ✓ Validation passed
2025-10-29 13:53:56,738 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:56,738 - INFO     -     - Total states before merge: 511
2025-10-29 13:53:56,738 - INFO     -     - Num nodes: 5
2025-10-29 13:53:56,738 - INFO     -     - Num edges: 20
2025-10-29 13:53:56,738 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:56,738 - INFO     -       - Node 2: 2 states
2025-10-29 13:53:56,738 - INFO     -       - Node 12: 500 states
2025-10-29 13:53:56,738 - INFO     -       - Expected product: 1000 states
2025-10-29 13:53:56,738 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:56,745 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:53:56,746 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:56,746 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:53:56,847 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:56,847 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:56,847 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:53:56,854 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:53:56,854 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:56,854 - INFO     -   Calling graph_tracker.merge_nodes([2, 12])...
2025-10-29 13:53:56,854 - INFO     - Attempting merge of nodes 2 and 12...
2025-10-29 13:53:56,854 - INFO     - Successfully merged nodes into new node 13 with 1000 states.
2025-10-29 13:53:56,854 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:56,854 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:56,854 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:53:56,854 - INFO     - 
================================================================================
2025-10-29 13:53:56,854 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:53:56,854 - INFO     - ================================================================================
2025-10-29 13:53:56,854 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:56,854 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:53:56,855 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:53:56,856 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:56,856 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:56,856 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:56,856 - INFO     -   - Raw ts2_f length: 500
2025-10-29 13:53:56,856 - INFO     -   - Raw f_after length: 1000
2025-10-29 13:53:56,856 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:56,856 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:56,856 - INFO     -   - ts2_valid: 500 / 500 (removed -500)
2025-10-29 13:53:56,857 - INFO     -   - after_valid: 1000 / 1000 (removed 0)
2025-10-29 13:53:56,857 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:56,857 - INFO     -   - ts1_id: 2
2025-10-29 13:53:56,857 - INFO     -   - ts2_id: 12
2025-10-29 13:53:56,857 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:56,857 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:56,857 - INFO     -   - ts1_size: 2, ts2_size: 500
2025-10-29 13:53:56,857 - INFO     -   - Product space size: 1000
2025-10-29 13:53:56,857 - INFO     -   - Using product state mapping
2025-10-29 13:53:56,859 - INFO     -   - f_before_product length: 1000
2025-10-29 13:53:56,862 - INFO     -   - avg_f_before: 10.1320 (1000 valid states)
2025-10-29 13:53:56,862 - INFO     -   - avg_f_after:  10.9790 (1000 valid states)
2025-10-29 13:53:56,863 - INFO     -   - delta: 0.8470
2025-10-29 13:53:56,863 - INFO     -   - f_stability: 1.0 - |0.8470| / 10.1320 = 0.9164
2025-10-29 13:53:56,863 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:56,863 - INFO     -   - Compared 502 values
2025-10-29 13:53:56,863 - INFO     -   - Significant changes (> 5.0): 23
2025-10-29 13:53:56,863 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:56,863 - INFO     -   - states_before: 1000
2025-10-29 13:53:56,863 - INFO     -   - states_after: 1000
2025-10-29 13:53:56,863 - INFO     -   - delta_states: 0
2025-10-29 13:53:56,863 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:56,863 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:56,863 - INFO     -   - ts2_transitions: 3800
2025-10-29 13:53:56,864 - INFO     -   - merged_transitions: 8500
2025-10-29 13:53:56,864 - INFO     -   - transition_density_change: 4.6950
2025-10-29 13:53:56,864 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:56,864 - INFO     -   - search_signals present: True
2025-10-29 13:53:56,864 - INFO     -   - nodes_expanded: 1000
2025-10-29 13:53:56,864 - INFO     -   - search_depth: 5
2025-10-29 13:53:56,864 - INFO     -   - solution_cost: 4
2025-10-29 13:53:56,864 - INFO     -   - branching_factor: 8.5000
2025-10-29 13:53:56,864 - INFO     -   - solution_found: True
2025-10-29 13:53:56,864 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:56,865 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:56,865 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:53:56,865 - INFO     -   - TS2(2) + TS12(500) → 1000 states
2025-10-29 13:53:56,866 - INFO     -   - f_stability=0.916
2025-10-29 13:53:56,866 - INFO     -   - A* nodes_expanded=1000
2025-10-29 13:53:56,866 - INFO     -   - solution_found=True
2025-10-29 13:53:56,866 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:56,866 - INFO     - 
  Extracted signals:
2025-10-29 13:53:56,866 - INFO     -     - iteration: 4
2025-10-29 13:53:56,866 - INFO     -     - states_before: 1000
2025-10-29 13:53:56,866 - INFO     -     - states_after: 1000
2025-10-29 13:53:56,866 - INFO     -     - delta_states: 0
2025-10-29 13:53:56,866 - INFO     -     - f_value_stability: 0.9164
2025-10-29 13:53:56,866 - INFO     -     - num_significant_f_changes: 23
2025-10-29 13:53:56,866 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:56,866 - INFO     -     - nodes_expanded: 1000
2025-10-29 13:53:56,866 - INFO     -     - search_depth: 5
2025-10-29 13:53:56,866 - INFO     -     - solution_cost: 4
2025-10-29 13:53:56,867 - INFO     -     - branching_factor: 8.5000
2025-10-29 13:53:56,867 - INFO     -     - solution_found: True
2025-10-29 13:53:56,867 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:56,867 - WARNING  -     ⚠️  High branching factor: 8.5000
2025-10-29 13:53:56,867 - INFO     - 
  Computing reward:
2025-10-29 13:53:56,867 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:56,867 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:56,867 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:56,867 - INFO     -   [1] BRANCHING FACTOR: 8.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:53:56,868 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:56,868 - INFO     -   [3] F-VALUE STABILITY: 0.914
2025-10-29 13:53:56,868 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:56,869 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:56,869 - INFO     - 
  [COMPOSITE]: 0.624
2025-10-29 13:53:56,869 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:53:56,869 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:56,869 - INFO     -     + 0.350*0.914 (stability)
2025-10-29 13:53:56,869 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:56,869 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:56,869 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:56,869 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:56,869 - INFO     - 
  [FINAL REWARD]: 0.7485
2025-10-29 13:53:56,869 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:56,870 - INFO     -     ✓ Reward computed: 0.7485
2025-10-29 13:53:56,870 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:56,870 - INFO     -     - bf_score                       0.1000
2025-10-29 13:53:56,870 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:56,870 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:56,870 - INFO     -     - f_stability                    0.9138
2025-10-29 13:53:56,870 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:56,870 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:56,870 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:56,870 - INFO     -     - composite                      0.6243
2025-10-29 13:53:56,870 - INFO     -     - total                          0.7485
2025-10-29 13:53:56,870 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:56,870 - INFO     -   Num remaining nodes: 4
2025-10-29 13:53:56,870 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:53:56,871 - INFO     -   Done: False
2025-10-29 13:53:56,871 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:56,871 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:56,871 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:56,871 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:56,871 - INFO     -     - num_nodes: 4
2025-10-29 13:53:56,871 - INFO     -     - num_edges: 12
2025-10-29 13:53:56,871 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:56,871 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:53:56,871 - INFO     -   After: current_merge_step = 5
2025-10-29 13:53:56,871 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:56,871 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:56,873 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:56,873 - INFO     -   ✓ Step logged
2025-10-29 13:53:56,873 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:56,873 - INFO     -   Returning:
2025-10-29 13:53:56,874 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:56,874 - INFO     -     - reward: 0.7485
2025-10-29 13:53:56,874 - INFO     -     - done: False
2025-10-29 13:53:56,874 - INFO     -     - truncated: False
2025-10-29 13:53:56,874 - INFO     -     - info: 19 keys
2025-10-29 13:53:56,874 - INFO     - ==========================================================================================

2025-10-29 13:53:56,881 - INFO     - 
==========================================================================================
2025-10-29 13:53:56,881 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:56,881 - INFO     - ==========================================================================================
2025-10-29 13:53:56,881 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:56,881 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:53:56,881 - INFO     -   Available edges in graph: 12
2025-10-29 13:53:56,881 - INFO     -   Action index calculation:
2025-10-29 13:53:56,882 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 12 = 2
2025-10-29 13:53:56,882 - INFO     -     - clamped to [0, 11]: 2
2025-10-29 13:53:56,882 - INFO     -   ✓ Extracted merge pair from edge 2: (3, 13)
2025-10-29 13:53:56,882 - INFO     -   ✓ Validation passed
2025-10-29 13:53:56,882 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:56,882 - INFO     -     - Total states before merge: 1009
2025-10-29 13:53:56,882 - INFO     -     - Num nodes: 4
2025-10-29 13:53:56,882 - INFO     -     - Num edges: 12
2025-10-29 13:53:56,882 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:56,882 - INFO     -       - Node 3: 2 states
2025-10-29 13:53:56,882 - INFO     -       - Node 13: 1000 states
2025-10-29 13:53:56,882 - INFO     -       - Expected product: 2000 states
2025-10-29 13:53:56,882 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:56,892 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:53:56,892 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:56,892 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:53:56,992 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:56,992 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:56,992 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:53:57,239 - INFO     -   ✓ TS file received after 0.25s
2025-10-29 13:53:57,240 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:57,240 - INFO     -   Calling graph_tracker.merge_nodes([3, 13])...
2025-10-29 13:53:57,240 - INFO     - Attempting merge of nodes 3 and 13...
2025-10-29 13:53:57,241 - INFO     - Successfully merged nodes into new node 14 with 2000 states.
2025-10-29 13:53:57,241 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:57,241 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:57,241 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:53:57,241 - INFO     - 
================================================================================
2025-10-29 13:53:57,242 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:53:57,242 - INFO     - ================================================================================
2025-10-29 13:53:57,242 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:57,242 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:53:57,242 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:53:57,248 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:57,249 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:57,249 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:57,249 - INFO     -   - Raw ts2_f length: 1000
2025-10-29 13:53:57,249 - INFO     -   - Raw f_after length: 2000
2025-10-29 13:53:57,249 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:57,250 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:57,251 - INFO     -   - ts2_valid: 1000 / 1000 (removed -1000)
2025-10-29 13:53:57,253 - INFO     -   - after_valid: 2000 / 2000 (removed 0)
2025-10-29 13:53:57,253 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:57,254 - INFO     -   - ts1_id: 3
2025-10-29 13:53:57,254 - INFO     -   - ts2_id: 13
2025-10-29 13:53:57,254 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:57,254 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:57,254 - INFO     -   - ts1_size: 2, ts2_size: 1000
2025-10-29 13:53:57,254 - INFO     -   - Product space size: 2000
2025-10-29 13:53:57,254 - INFO     -   - Using product state mapping
2025-10-29 13:53:57,260 - INFO     -   - f_before_product length: 2000
2025-10-29 13:53:57,267 - INFO     -   - avg_f_before: 10.9790 (2000 valid states)
2025-10-29 13:53:57,267 - INFO     -   - avg_f_after:  12.5360 (2000 valid states)
2025-10-29 13:53:57,267 - INFO     -   - delta: 1.5570
2025-10-29 13:53:57,267 - INFO     -   - f_stability: 1.0 - |1.5570| / 10.9790 = 0.8582
2025-10-29 13:53:57,267 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:57,268 - INFO     -   - Compared 1002 values
2025-10-29 13:53:57,268 - INFO     -   - Significant changes (> 5.0): 76
2025-10-29 13:53:57,268 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:57,268 - INFO     -   - states_before: 2000
2025-10-29 13:53:57,268 - INFO     -   - states_after: 2000
2025-10-29 13:53:57,268 - INFO     -   - delta_states: 0
2025-10-29 13:53:57,268 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:57,268 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:57,268 - INFO     -   - ts2_transitions: 8500
2025-10-29 13:53:57,268 - INFO     -   - merged_transitions: 14400
2025-10-29 13:53:57,269 - INFO     -   - transition_density_change: 2.9475
2025-10-29 13:53:57,269 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:57,269 - INFO     -   - search_signals present: True
2025-10-29 13:53:57,269 - INFO     -   - nodes_expanded: 2000
2025-10-29 13:53:57,269 - INFO     -   - search_depth: 6
2025-10-29 13:53:57,269 - INFO     -   - solution_cost: 4
2025-10-29 13:53:57,269 - INFO     -   - branching_factor: 7.2000
2025-10-29 13:53:57,269 - INFO     -   - solution_found: True
2025-10-29 13:53:57,269 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:57,271 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:57,271 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:53:57,271 - INFO     -   - TS3(2) + TS13(1000) → 2000 states
2025-10-29 13:53:57,271 - INFO     -   - f_stability=0.858
2025-10-29 13:53:57,271 - INFO     -   - A* nodes_expanded=2000
2025-10-29 13:53:57,271 - INFO     -   - solution_found=True
2025-10-29 13:53:57,271 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:57,271 - INFO     - 
  Extracted signals:
2025-10-29 13:53:57,271 - INFO     -     - iteration: 5
2025-10-29 13:53:57,272 - INFO     -     - states_before: 2000
2025-10-29 13:53:57,272 - INFO     -     - states_after: 2000
2025-10-29 13:53:57,272 - INFO     -     - delta_states: 0
2025-10-29 13:53:57,272 - INFO     -     - f_value_stability: 0.8582
2025-10-29 13:53:57,272 - INFO     -     - num_significant_f_changes: 76
2025-10-29 13:53:57,272 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:57,272 - INFO     -     - nodes_expanded: 2000
2025-10-29 13:53:57,272 - INFO     -     - search_depth: 6
2025-10-29 13:53:57,272 - INFO     -     - solution_cost: 4
2025-10-29 13:53:57,272 - INFO     -     - branching_factor: 7.2000
2025-10-29 13:53:57,272 - INFO     -     - solution_found: True
2025-10-29 13:53:57,272 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:57,273 - INFO     - 
  Computing reward:
2025-10-29 13:53:57,273 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:57,273 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:57,273 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:57,273 - INFO     -   [1] BRANCHING FACTOR: 7.200 → score 0.180 (high BF, minimal credit)
2025-10-29 13:53:57,273 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:57,274 - INFO     -   [3] F-VALUE STABILITY: 0.900
2025-10-29 13:53:57,275 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:57,275 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:57,275 - INFO     - 
  [COMPOSITE]: 0.640
2025-10-29 13:53:57,275 - INFO     -     = 0.300*0.180 (bf)
2025-10-29 13:53:57,275 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:57,275 - INFO     -     + 0.350*0.900 (stability)
2025-10-29 13:53:57,275 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:57,275 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:57,275 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:57,275 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:57,276 - INFO     - 
  [FINAL REWARD]: 0.7793
2025-10-29 13:53:57,276 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:57,276 - INFO     -     ✓ Reward computed: 0.7793
2025-10-29 13:53:57,276 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:57,276 - INFO     -     - bf_score                       0.1800
2025-10-29 13:53:57,276 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:57,276 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:57,276 - INFO     -     - f_stability                    0.9004
2025-10-29 13:53:57,276 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:57,276 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:57,276 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:57,276 - INFO     -     - composite                      0.6397
2025-10-29 13:53:57,277 - INFO     -     - total                          0.7793
2025-10-29 13:53:57,277 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:57,277 - INFO     -   Num remaining nodes: 3
2025-10-29 13:53:57,277 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:53:57,277 - INFO     -   Done: False
2025-10-29 13:53:57,277 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:57,277 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:57,277 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:57,278 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:57,278 - INFO     -     - num_nodes: 3
2025-10-29 13:53:57,278 - INFO     -     - num_edges: 6
2025-10-29 13:53:57,278 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:57,278 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:53:57,278 - INFO     -   After: current_merge_step = 6
2025-10-29 13:53:57,278 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:57,278 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:57,278 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:57,279 - INFO     -   ✓ Step logged
2025-10-29 13:53:57,279 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:57,279 - INFO     -   Returning:
2025-10-29 13:53:57,279 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:57,279 - INFO     -     - reward: 0.7793
2025-10-29 13:53:57,279 - INFO     -     - done: False
2025-10-29 13:53:57,279 - INFO     -     - truncated: False
2025-10-29 13:53:57,279 - INFO     -     - info: 19 keys
2025-10-29 13:53:57,279 - INFO     - ==========================================================================================

2025-10-29 13:53:57,286 - INFO     - 
==========================================================================================
2025-10-29 13:53:57,286 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:57,286 - INFO     - ==========================================================================================
2025-10-29 13:53:57,286 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:57,286 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:53:57,286 - INFO     -   Available edges in graph: 6
2025-10-29 13:53:57,286 - INFO     -   Action index calculation:
2025-10-29 13:53:57,286 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 6 = 1
2025-10-29 13:53:57,286 - INFO     -     - clamped to [0, 5]: 1
2025-10-29 13:53:57,286 - INFO     -   ✓ Extracted merge pair from edge 1: (4, 14)
2025-10-29 13:53:57,286 - INFO     -   ✓ Validation passed
2025-10-29 13:53:57,286 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:57,286 - INFO     -     - Total states before merge: 2007
2025-10-29 13:53:57,286 - INFO     -     - Num nodes: 3
2025-10-29 13:53:57,286 - INFO     -     - Num edges: 6
2025-10-29 13:53:57,287 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:57,287 - INFO     -       - Node 4: 2 states
2025-10-29 13:53:57,287 - INFO     -       - Node 14: 2000 states
2025-10-29 13:53:57,287 - INFO     -       - Expected product: 4000 states
2025-10-29 13:53:57,287 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:57,296 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:53:57,296 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:57,296 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:53:57,398 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:57,398 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:57,398 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:53:57,621 - INFO     -   ✓ TS file received after 0.22s
2025-10-29 13:53:57,621 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:57,621 - INFO     -   Calling graph_tracker.merge_nodes([4, 14])...
2025-10-29 13:53:57,621 - INFO     - Attempting merge of nodes 4 and 14...
2025-10-29 13:53:57,621 - INFO     - Successfully merged nodes into new node 15 with 4000 states.
2025-10-29 13:53:57,621 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:57,621 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:57,621 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:53:57,621 - INFO     - 
================================================================================
2025-10-29 13:53:57,621 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:53:57,622 - INFO     - ================================================================================
2025-10-29 13:53:57,622 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:57,622 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:53:57,622 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:53:57,626 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:57,626 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:57,626 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:57,626 - INFO     -   - Raw ts2_f length: 2000
2025-10-29 13:53:57,626 - INFO     -   - Raw f_after length: 4000
2025-10-29 13:53:57,627 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:57,627 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:57,627 - INFO     -   - ts2_valid: 2000 / 2000 (removed -2000)
2025-10-29 13:53:57,629 - INFO     -   - after_valid: 2984 / 4000 (removed 1016)
2025-10-29 13:53:57,630 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:57,630 - INFO     -   - ts1_id: 4
2025-10-29 13:53:57,630 - INFO     -   - ts2_id: 14
2025-10-29 13:53:57,630 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:57,630 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:57,630 - INFO     -   - ts1_size: 2, ts2_size: 2000
2025-10-29 13:53:57,630 - INFO     -   - Product space size: 4000
2025-10-29 13:53:57,630 - INFO     -   - Using product state mapping
2025-10-29 13:53:57,636 - INFO     -   - f_before_product length: 4000
2025-10-29 13:53:57,643 - INFO     -   - avg_f_before: 12.5360 (4000 valid states)
2025-10-29 13:53:57,643 - INFO     -   - avg_f_after:  13.3747 (2984 valid states)
2025-10-29 13:53:57,643 - INFO     -   - delta: 0.8387
2025-10-29 13:53:57,643 - INFO     -   - f_stability: 1.0 - |0.8387| / 12.5360 = 0.9331
2025-10-29 13:53:57,643 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:57,644 - INFO     -   - Compared 2002 values
2025-10-29 13:53:57,644 - INFO     -   - Significant changes (> 5.0): 287
2025-10-29 13:53:57,644 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:57,644 - INFO     -   - states_before: 4000
2025-10-29 13:53:57,644 - INFO     -   - states_after: 4000
2025-10-29 13:53:57,644 - INFO     -   - delta_states: 0
2025-10-29 13:53:57,644 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:57,644 - INFO     -   - ts1_transitions: 3
2025-10-29 13:53:57,644 - INFO     -   - ts2_transitions: 14400
2025-10-29 13:53:57,644 - INFO     -   - merged_transitions: 22400
2025-10-29 13:53:57,644 - INFO     -   - transition_density_change: 1.9992
2025-10-29 13:53:57,644 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:57,644 - INFO     -   - search_signals present: True
2025-10-29 13:53:57,644 - INFO     -   - nodes_expanded: 2984
2025-10-29 13:53:57,644 - INFO     -   - search_depth: 6
2025-10-29 13:53:57,644 - INFO     -   - solution_cost: 4
2025-10-29 13:53:57,645 - INFO     -   - branching_factor: 7.5067
2025-10-29 13:53:57,645 - INFO     -   - solution_found: True
2025-10-29 13:53:57,645 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:57,647 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:57,647 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:53:57,647 - INFO     -   - TS4(2) + TS14(2000) → 4000 states
2025-10-29 13:53:57,647 - INFO     -   - f_stability=0.933
2025-10-29 13:53:57,647 - INFO     -   - A* nodes_expanded=2984
2025-10-29 13:53:57,647 - INFO     -   - solution_found=True
2025-10-29 13:53:57,647 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:57,647 - INFO     - 
  Extracted signals:
2025-10-29 13:53:57,647 - INFO     -     - iteration: 6
2025-10-29 13:53:57,647 - INFO     -     - states_before: 4000
2025-10-29 13:53:57,647 - INFO     -     - states_after: 4000
2025-10-29 13:53:57,647 - INFO     -     - delta_states: 0
2025-10-29 13:53:57,647 - INFO     -     - f_value_stability: 0.9331
2025-10-29 13:53:57,647 - INFO     -     - num_significant_f_changes: 287
2025-10-29 13:53:57,647 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:57,647 - INFO     -     - nodes_expanded: 2984
2025-10-29 13:53:57,648 - INFO     -     - search_depth: 6
2025-10-29 13:53:57,648 - INFO     -     - solution_cost: 4
2025-10-29 13:53:57,648 - INFO     -     - branching_factor: 7.5067
2025-10-29 13:53:57,648 - INFO     -     - solution_found: True
2025-10-29 13:53:57,648 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:57,648 - INFO     - 
  Computing reward:
2025-10-29 13:53:57,648 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:57,648 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:57,648 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:57,649 - INFO     -   [1] BRANCHING FACTOR: 7.507 → score 0.149 (high BF, minimal credit)
2025-10-29 13:53:57,649 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:57,650 - INFO     -   [3] F-VALUE STABILITY: 0.931
2025-10-29 13:53:57,650 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:57,650 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:57,650 - INFO     - 
  [COMPOSITE]: 0.641
2025-10-29 13:53:57,650 - INFO     -     = 0.300*0.149 (bf)
2025-10-29 13:53:57,650 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:57,650 - INFO     -     + 0.350*0.931 (stability)
2025-10-29 13:53:57,650 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:57,651 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:57,651 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:57,651 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:57,651 - INFO     - 
  [FINAL REWARD]: 0.7826
2025-10-29 13:53:57,651 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:57,651 - INFO     -     ✓ Reward computed: 0.7826
2025-10-29 13:53:57,651 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:57,651 - INFO     -     - bf_score                       0.1493
2025-10-29 13:53:57,651 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:57,651 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:57,651 - INFO     -     - f_stability                    0.9314
2025-10-29 13:53:57,651 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:57,651 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:57,651 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:57,651 - INFO     -     - composite                      0.6413
2025-10-29 13:53:57,651 - INFO     -     - total                          0.7826
2025-10-29 13:53:57,651 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:57,653 - INFO     -   Num remaining nodes: 2
2025-10-29 13:53:57,653 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:53:57,653 - INFO     -   Done: False
2025-10-29 13:53:57,653 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:57,653 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:57,653 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:57,653 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:57,653 - INFO     -     - num_nodes: 2
2025-10-29 13:53:57,653 - INFO     -     - num_edges: 2
2025-10-29 13:53:57,653 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:57,653 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:53:57,653 - INFO     -   After: current_merge_step = 7
2025-10-29 13:53:57,653 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:57,654 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:57,654 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:57,654 - INFO     -   ✓ Step logged
2025-10-29 13:53:57,655 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:57,655 - INFO     -   Returning:
2025-10-29 13:53:57,655 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:57,655 - INFO     -     - reward: 0.7826
2025-10-29 13:53:57,655 - INFO     -     - done: False
2025-10-29 13:53:57,655 - INFO     -     - truncated: False
2025-10-29 13:53:57,655 - INFO     -     - info: 19 keys
2025-10-29 13:53:57,655 - INFO     - ==========================================================================================

2025-10-29 13:53:57,661 - INFO     - 
==========================================================================================
2025-10-29 13:53:57,661 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:57,661 - INFO     - ==========================================================================================
2025-10-29 13:53:57,661 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:57,661 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:53:57,662 - INFO     -   Available edges in graph: 2
2025-10-29 13:53:57,662 - INFO     -   Action index calculation:
2025-10-29 13:53:57,662 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:53:57,662 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:53:57,662 - INFO     -   ✓ Extracted merge pair from edge 0: (8, 15)
2025-10-29 13:53:57,662 - INFO     -   ✓ Validation passed
2025-10-29 13:53:57,662 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:57,662 - INFO     -     - Total states before merge: 4005
2025-10-29 13:53:57,662 - INFO     -     - Num nodes: 2
2025-10-29 13:53:57,662 - INFO     -     - Num edges: 2
2025-10-29 13:53:57,662 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:57,662 - INFO     -       - Node 8: 5 states
2025-10-29 13:53:57,662 - INFO     -       - Node 15: 4000 states
2025-10-29 13:53:57,662 - INFO     -       - Expected product: 20000 states
2025-10-29 13:53:57,662 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:57,669 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:53:57,669 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:57,669 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:53:57,770 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:57,770 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:57,770 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:53:57,786 - INFO     -   ✓ TS file received after 0.02s
2025-10-29 13:53:57,786 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:57,786 - INFO     -   Calling graph_tracker.merge_nodes([8, 15])...
2025-10-29 13:53:57,786 - INFO     - Attempting merge of nodes 8 and 15...
2025-10-29 13:53:57,786 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:53:57,786 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:57,786 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:57,786 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:53:57,786 - INFO     - 
================================================================================
2025-10-29 13:53:57,786 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:53:57,786 - INFO     - ================================================================================
2025-10-29 13:53:57,786 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:57,786 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:53:57,787 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:53:57,789 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:57,789 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:57,790 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:57,790 - INFO     -   - Raw ts2_f length: 668
2025-10-29 13:53:57,790 - INFO     -   - Raw f_after length: 3340
2025-10-29 13:53:57,790 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:57,790 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:57,790 - INFO     -   - ts2_valid: 668 / 668 (removed -668)
2025-10-29 13:53:57,791 - INFO     -   - after_valid: 2749 / 3340 (removed 591)
2025-10-29 13:53:57,791 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:57,791 - INFO     -   - ts1_id: 8
2025-10-29 13:53:57,791 - INFO     -   - ts2_id: 15
2025-10-29 13:53:57,791 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:57,792 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:57,792 - INFO     -   - ts1_size: 5, ts2_size: 668
2025-10-29 13:53:57,792 - INFO     -   - Product space size: 3340
2025-10-29 13:53:57,792 - INFO     -   - Using product state mapping
2025-10-29 13:53:57,796 - INFO     -   - f_before_product length: 3340
2025-10-29 13:53:57,803 - INFO     -   - avg_f_before: 8.1722 (3340 valid states)
2025-10-29 13:53:57,804 - INFO     -   - avg_f_after:  12.2346 (2749 valid states)
2025-10-29 13:53:57,804 - INFO     -   - delta: 4.0625
2025-10-29 13:53:57,804 - INFO     -   - f_stability: 1.0 - |4.0625| / 8.1722 = 0.5029
2025-10-29 13:53:57,804 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:57,804 - INFO     -   - Compared 673 values
2025-10-29 13:53:57,804 - INFO     -   - Significant changes (> 5.0): 130
2025-10-29 13:53:57,804 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:57,804 - INFO     -   - states_before: 3340
2025-10-29 13:53:57,804 - INFO     -   - states_after: 3340
2025-10-29 13:53:57,804 - INFO     -   - delta_states: 0
2025-10-29 13:53:57,804 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:57,804 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:57,804 - INFO     -   - ts2_transitions: 6703
2025-10-29 13:53:57,805 - INFO     -   - merged_transitions: 19291
2025-10-29 13:53:57,805 - INFO     -   - transition_density_change: 3.7650
2025-10-29 13:53:57,805 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:57,805 - INFO     -   - search_signals present: True
2025-10-29 13:53:57,805 - INFO     -   - nodes_expanded: 2749
2025-10-29 13:53:57,805 - INFO     -   - search_depth: 6
2025-10-29 13:53:57,805 - INFO     -   - solution_cost: 4
2025-10-29 13:53:57,805 - INFO     -   - branching_factor: 7.0175
2025-10-29 13:53:57,805 - INFO     -   - solution_found: True
2025-10-29 13:53:57,805 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:57,807 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:57,807 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:53:57,807 - INFO     -   - TS8(5) + TS15(668) → 3340 states
2025-10-29 13:53:57,807 - INFO     -   - f_stability=0.503
2025-10-29 13:53:57,807 - INFO     -   - A* nodes_expanded=2749
2025-10-29 13:53:57,807 - INFO     -   - solution_found=True
2025-10-29 13:53:57,807 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:57,807 - INFO     - 
  Extracted signals:
2025-10-29 13:53:57,807 - INFO     -     - iteration: 7
2025-10-29 13:53:57,807 - INFO     -     - states_before: 3340
2025-10-29 13:53:57,807 - INFO     -     - states_after: 3340
2025-10-29 13:53:57,807 - INFO     -     - delta_states: 0
2025-10-29 13:53:57,807 - INFO     -     - f_value_stability: 0.5029
2025-10-29 13:53:57,807 - INFO     -     - num_significant_f_changes: 130
2025-10-29 13:53:57,807 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:57,808 - INFO     -     - nodes_expanded: 2749
2025-10-29 13:53:57,808 - INFO     -     - search_depth: 6
2025-10-29 13:53:57,808 - INFO     -     - solution_cost: 4
2025-10-29 13:53:57,808 - INFO     -     - branching_factor: 7.0175
2025-10-29 13:53:57,808 - INFO     -     - solution_found: True
2025-10-29 13:53:57,808 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:57,808 - INFO     - 
  Computing reward:
2025-10-29 13:53:57,808 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:57,810 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:57,810 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:57,810 - INFO     -   [1] BRANCHING FACTOR: 7.017 → score 0.198 (high BF, minimal credit)
2025-10-29 13:53:57,810 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:57,811 - INFO     -   [3] F-VALUE STABILITY: 0.604
2025-10-29 13:53:57,811 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:57,812 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:57,812 - INFO     - 
  [COMPOSITE]: 0.541
2025-10-29 13:53:57,812 - INFO     -     = 0.300*0.198 (bf)
2025-10-29 13:53:57,812 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:57,812 - INFO     -     + 0.350*0.604 (stability)
2025-10-29 13:53:57,812 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:57,812 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:57,812 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:57,812 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:57,813 - INFO     - 
  [FINAL REWARD]: 0.4828
2025-10-29 13:53:57,813 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:57,813 - INFO     -     ✓ Reward computed: 0.4828
2025-10-29 13:53:57,814 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:57,814 - INFO     -     - bf_score                       0.1983
2025-10-29 13:53:57,814 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:57,814 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:57,814 - INFO     -     - f_stability                    0.6040
2025-10-29 13:53:57,814 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:57,814 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:57,814 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:57,814 - INFO     -     - composite                      0.5414
2025-10-29 13:53:57,814 - INFO     -     - total                          0.4828
2025-10-29 13:53:57,814 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:57,814 - INFO     -   Num remaining nodes: 1
2025-10-29 13:53:57,815 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:53:57,815 - INFO     -   Done: True
2025-10-29 13:53:57,815 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:53:57,815 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:57,815 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:57,815 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:57,815 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:57,815 - INFO     -     - num_nodes: 1
2025-10-29 13:53:57,815 - INFO     -     - num_edges: 0
2025-10-29 13:53:57,816 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:57,816 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:53:57,816 - INFO     -   After: current_merge_step = 8
2025-10-29 13:53:57,816 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:57,816 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:57,816 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:57,816 - INFO     -   ✓ Step logged
2025-10-29 13:53:57,817 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:57,817 - INFO     -   Returning:
2025-10-29 13:53:57,817 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:57,817 - INFO     -     - reward: 0.4828
2025-10-29 13:53:57,817 - INFO     -     - done: True
2025-10-29 13:53:57,817 - INFO     -     - truncated: False
2025-10-29 13:53:57,817 - INFO     -     - info: 19 keys
2025-10-29 13:53:57,817 - INFO     - ==========================================================================================

2025-10-29 13:53:57,818 - INFO     -     ✓ Reward: 4.7728, Time: 2.65s
2025-10-29 13:53:57,818 - INFO     -   [5/5] problem_small_04.pddl
2025-10-29 13:53:57,819 - INFO     - Environment initialized with:
2025-10-29 13:53:57,819 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:57,819 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_04.pddl
2025-10-29 13:53:57,819 - INFO     -   FD base: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward
2025-10-29 13:53:57,819 - INFO     -   max_states: 4000
2025-10-29 13:53:57,819 - INFO     -   threshold_before_merge: 1
2025-10-29 13:53:57,819 - INFO     - ✓ Initialized reward function: astar_search
2025-10-29 13:53:57,819 - INFO     - ✓ RewardInfoExtractor initialized (output_dir: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output)
2025-10-29 13:53:57,819 - INFO     - ✓ Initialized reward info extractor
2025-10-29 13:53:57,901 - INFO     - [Handshake] Cleaning up old files...
2025-10-29 13:53:57,907 - INFO     - [Handshake] Building FD command:
2025-10-29 13:53:57,907 - INFO     -   Domain:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\domain.pddl
2025-10-29 13:53:57,907 - INFO     -   Problem: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\benchmarks\blocksworld\small\problem_small_04.pddl
2025-10-29 13:53:57,908 - INFO     - [Handshake] FD Command: python "C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\builds/release/bin/translate/translate.py" "C:\Use...
2025-10-29 13:53:57,914 - INFO     - [Handshake] Waiting for translator to produce 'output.sas'...
2025-10-29 13:53:58,516 - INFO     - [Handshake] 'output.sas' is ready.
2025-10-29 13:53:58,516 - INFO     - [Handshake] Waiting for planner to produce initial JSONs...
2025-10-29 13:53:58,516 - INFO     - [Handshake] Initial JSONs found. Verifying and copying...
2025-10-29 13:53:58,831 - INFO     - [Handshake] Handshake complete.
2025-10-29 13:53:58,831 - INFO     - Initializing GraphTracker...
2025-10-29 13:53:58,831 - INFO     - Loading atomic systems from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merged_transition_systems.json'...
2025-10-29 13:53:58,833 - INFO     - ✓ Adding atomic node 0 for variable 0
2025-10-29 13:53:58,833 - INFO     -    → Node 0 has 2 states
2025-10-29 13:53:58,833 - INFO     - ✓ Adding atomic node 1 for variable 1
2025-10-29 13:53:58,833 - INFO     -    → Node 1 has 2 states
2025-10-29 13:53:58,833 - INFO     - ✓ Adding atomic node 2 for variable 2
2025-10-29 13:53:58,833 - INFO     -    → Node 2 has 2 states
2025-10-29 13:53:58,833 - INFO     - ✓ Adding atomic node 3 for variable 3
2025-10-29 13:53:58,834 - INFO     -    → Node 3 has 2 states
2025-10-29 13:53:58,834 - INFO     - ✓ Adding atomic node 4 for variable 4
2025-10-29 13:53:58,834 - INFO     -    → Node 4 has 2 states
2025-10-29 13:53:58,834 - INFO     - ✓ Adding atomic node 5 for variable 5
2025-10-29 13:53:58,834 - INFO     -    → Node 5 has 5 states
2025-10-29 13:53:58,834 - INFO     - ✓ Adding atomic node 6 for variable 6
2025-10-29 13:53:58,834 - INFO     -    → Node 6 has 5 states
2025-10-29 13:53:58,834 - INFO     - ✓ Adding atomic node 7 for variable 7
2025-10-29 13:53:58,834 - INFO     -    → Node 7 has 5 states
2025-10-29 13:53:58,834 - INFO     - ✓ Adding atomic node 8 for variable 8
2025-10-29 13:53:58,834 - INFO     -    → Node 8 has 5 states
2025-10-29 13:53:58,834 - INFO     - Loaded 9 atomic systems. Next node ID set to 9.
2025-10-29 13:53:58,835 - INFO     - Loading causal edges from 'C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\causal_graph.json'...
2025-10-29 13:53:58,836 - INFO     - Current graph nodes before adding edges: [0, 1, 2, 3, 4, 5, 6, 7, 8]
2025-10-29 13:53:58,836 - INFO     - Added edge (0, 1)
2025-10-29 13:53:58,836 - INFO     - Added edge (0, 2)
2025-10-29 13:53:58,837 - INFO     - Added edge (0, 3)
2025-10-29 13:53:58,837 - INFO     - Added edge (0, 4)
2025-10-29 13:53:58,837 - INFO     - Added edge (0, 5)
2025-10-29 13:53:58,837 - INFO     - Added edge (0, 6)
2025-10-29 13:53:58,837 - INFO     - Added edge (0, 7)
2025-10-29 13:53:58,837 - INFO     - Added edge (0, 8)
2025-10-29 13:53:58,837 - INFO     - Added edge (1, 0)
2025-10-29 13:53:58,837 - INFO     - Added edge (1, 2)
2025-10-29 13:53:58,837 - INFO     - Added edge (1, 3)
2025-10-29 13:53:58,837 - INFO     - Added edge (1, 4)
2025-10-29 13:53:58,837 - INFO     - Added edge (1, 5)
2025-10-29 13:53:58,838 - INFO     - Added edge (1, 6)
2025-10-29 13:53:58,838 - INFO     - Added edge (1, 7)
2025-10-29 13:53:58,838 - INFO     - Added edge (1, 8)
2025-10-29 13:53:58,838 - INFO     - Added edge (2, 0)
2025-10-29 13:53:58,838 - INFO     - Added edge (2, 1)
2025-10-29 13:53:58,838 - INFO     - Added edge (2, 3)
2025-10-29 13:53:58,838 - INFO     - Added edge (2, 4)
2025-10-29 13:53:58,838 - INFO     - Added edge (2, 5)
2025-10-29 13:53:58,838 - INFO     - Added edge (2, 6)
2025-10-29 13:53:58,838 - INFO     - Added edge (2, 7)
2025-10-29 13:53:58,838 - INFO     - Added edge (2, 8)
2025-10-29 13:53:58,839 - INFO     - Added edge (3, 0)
2025-10-29 13:53:58,839 - INFO     - Added edge (3, 1)
2025-10-29 13:53:58,839 - INFO     - Added edge (3, 2)
2025-10-29 13:53:58,839 - INFO     - Added edge (3, 4)
2025-10-29 13:53:58,839 - INFO     - Added edge (3, 5)
2025-10-29 13:53:58,839 - INFO     - Added edge (3, 6)
2025-10-29 13:53:58,839 - INFO     - Added edge (3, 7)
2025-10-29 13:53:58,839 - INFO     - Added edge (3, 8)
2025-10-29 13:53:58,839 - INFO     - Added edge (4, 0)
2025-10-29 13:53:58,839 - INFO     - Added edge (4, 1)
2025-10-29 13:53:58,839 - INFO     - Added edge (4, 2)
2025-10-29 13:53:58,840 - INFO     - Added edge (4, 3)
2025-10-29 13:53:58,840 - INFO     - Added edge (4, 5)
2025-10-29 13:53:58,840 - INFO     - Added edge (4, 6)
2025-10-29 13:53:58,840 - INFO     - Added edge (4, 7)
2025-10-29 13:53:58,840 - INFO     - Added edge (4, 8)
2025-10-29 13:53:58,840 - INFO     - Added edge (5, 0)
2025-10-29 13:53:58,841 - INFO     - Added edge (5, 1)
2025-10-29 13:53:58,841 - INFO     - Added edge (5, 2)
2025-10-29 13:53:58,841 - INFO     - Added edge (5, 3)
2025-10-29 13:53:58,841 - INFO     - Added edge (5, 4)
2025-10-29 13:53:58,841 - INFO     - Added edge (6, 0)
2025-10-29 13:53:58,841 - INFO     - Added edge (6, 1)
2025-10-29 13:53:58,841 - INFO     - Added edge (6, 2)
2025-10-29 13:53:58,842 - INFO     - Added edge (6, 3)
2025-10-29 13:53:58,842 - INFO     - Added edge (6, 4)
2025-10-29 13:53:58,842 - INFO     - Added edge (7, 0)
2025-10-29 13:53:58,842 - INFO     - Added edge (7, 1)
2025-10-29 13:53:58,842 - INFO     - Added edge (7, 2)
2025-10-29 13:53:58,842 - INFO     - Added edge (7, 3)
2025-10-29 13:53:58,842 - INFO     - Added edge (7, 4)
2025-10-29 13:53:58,842 - INFO     - Added edge (8, 0)
2025-10-29 13:53:58,842 - INFO     - Added edge (8, 1)
2025-10-29 13:53:58,842 - INFO     - Added edge (8, 2)
2025-10-29 13:53:58,842 - INFO     - Added edge (8, 3)
2025-10-29 13:53:58,842 - INFO     - Added edge (8, 4)
2025-10-29 13:53:58,842 - INFO     - Loaded 60 causal edges. Final edge count: 60
2025-10-29 13:53:58,853 - INFO     - 
==========================================================================================
2025-10-29 13:53:58,853 - INFO     - STEP 0: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:58,853 - INFO     - ==========================================================================================
2025-10-29 13:53:58,853 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:58,853 - INFO     -   Input action: 41 (type: int)
2025-10-29 13:53:58,853 - INFO     -   Available edges in graph: 60
2025-10-29 13:53:58,854 - INFO     -   Action index calculation:
2025-10-29 13:53:58,854 - INFO     -     - action % max(num_valid_edges, 1) = 41 % 60 = 41
2025-10-29 13:53:58,854 - INFO     -     - clamped to [0, 59]: 41
2025-10-29 13:53:58,854 - INFO     -   ✓ Extracted merge pair from edge 41: (5, 1)
2025-10-29 13:53:58,854 - INFO     -   ✓ Validation passed
2025-10-29 13:53:58,854 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:58,854 - INFO     -     - Total states before merge: 30
2025-10-29 13:53:58,854 - INFO     -     - Num nodes: 9
2025-10-29 13:53:58,854 - INFO     -     - Num edges: 60
2025-10-29 13:53:58,854 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:58,854 - INFO     -       - Node 5: 5 states
2025-10-29 13:53:58,854 - INFO     -       - Node 1: 2 states
2025-10-29 13:53:58,854 - INFO     -       - Expected product: 10 states
2025-10-29 13:53:58,855 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:58,863 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_0.json
2025-10-29 13:53:58,863 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:58,865 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_0.json
2025-10-29 13:53:58,965 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:58,965 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:58,965 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_0.json
2025-10-29 13:53:58,966 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:58,966 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:58,966 - INFO     -   Calling graph_tracker.merge_nodes([5, 1])...
2025-10-29 13:53:58,966 - INFO     - Attempting merge of nodes 5 and 1...
2025-10-29 13:53:58,966 - INFO     - Successfully merged nodes into new node 9 with 10 states.
2025-10-29 13:53:58,966 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:58,966 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:58,966 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=0)...
2025-10-29 13:53:58,966 - INFO     - 
================================================================================
2025-10-29 13:53:58,966 - INFO     - [EXTRACT] Iteration 0: Extracting merge info
2025-10-29 13:53:58,966 - INFO     - ================================================================================
2025-10-29 13:53:58,966 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:58,966 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_0.json
2025-10-29 13:53:58,966 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_0.json
2025-10-29 13:53:58,967 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:58,967 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:58,967 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:58,967 - INFO     -   - Raw ts2_f length: 2
2025-10-29 13:53:58,967 - INFO     -   - Raw f_after length: 10
2025-10-29 13:53:58,967 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:58,967 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:58,967 - INFO     -   - ts2_valid: 2 / 2 (removed -2)
2025-10-29 13:53:58,967 - INFO     -   - after_valid: 10 / 10 (removed 0)
2025-10-29 13:53:58,967 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:58,967 - INFO     -   - ts1_id: 5
2025-10-29 13:53:58,967 - INFO     -   - ts2_id: 1
2025-10-29 13:53:58,968 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:58,968 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:58,968 - INFO     -   - ts1_size: 5, ts2_size: 2
2025-10-29 13:53:58,968 - INFO     -   - Product space size: 10
2025-10-29 13:53:58,968 - INFO     -   - Using product state mapping
2025-10-29 13:53:58,968 - INFO     -   - f_before_product length: 10
2025-10-29 13:53:58,968 - INFO     -   - avg_f_before: 2.8000 (10 valid states)
2025-10-29 13:53:58,968 - INFO     -   - avg_f_after:  3.7000 (10 valid states)
2025-10-29 13:53:58,968 - INFO     -   - delta: 0.9000
2025-10-29 13:53:58,968 - INFO     -   - f_stability: 1.0 - |0.9000| / 2.8000 = 0.6786
2025-10-29 13:53:58,968 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:58,968 - INFO     -   - Compared 7 values
2025-10-29 13:53:58,968 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:58,968 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:58,968 - INFO     -   - states_before: 10
2025-10-29 13:53:58,968 - INFO     -   - states_after: 10
2025-10-29 13:53:58,969 - INFO     -   - delta_states: 0
2025-10-29 13:53:58,969 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:58,969 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:58,969 - INFO     -   - ts2_transitions: 5
2025-10-29 13:53:58,969 - INFO     -   - merged_transitions: 40
2025-10-29 13:53:58,969 - INFO     -   - transition_density_change: 2.2000
2025-10-29 13:53:58,969 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:58,970 - INFO     -   - search_signals present: True
2025-10-29 13:53:58,970 - INFO     -   - nodes_expanded: 10
2025-10-29 13:53:58,970 - INFO     -   - search_depth: 2
2025-10-29 13:53:58,970 - INFO     -   - solution_cost: 2
2025-10-29 13:53:58,970 - INFO     -   - branching_factor: 4.0000
2025-10-29 13:53:58,970 - INFO     -   - solution_found: True
2025-10-29 13:53:58,970 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:58,970 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:58,970 - INFO     - 
[SUMMARY] Iteration 0:
2025-10-29 13:53:58,970 - INFO     -   - TS5(5) + TS1(2) → 10 states
2025-10-29 13:53:58,970 - INFO     -   - f_stability=0.679
2025-10-29 13:53:58,970 - INFO     -   - A* nodes_expanded=10
2025-10-29 13:53:58,971 - INFO     -   - solution_found=True
2025-10-29 13:53:58,971 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:58,971 - INFO     - 
  Extracted signals:
2025-10-29 13:53:58,971 - INFO     -     - iteration: 0
2025-10-29 13:53:58,971 - INFO     -     - states_before: 10
2025-10-29 13:53:58,971 - INFO     -     - states_after: 10
2025-10-29 13:53:58,971 - INFO     -     - delta_states: 0
2025-10-29 13:53:58,971 - INFO     -     - f_value_stability: 0.6786
2025-10-29 13:53:58,971 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:58,971 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:58,971 - INFO     -     - nodes_expanded: 10
2025-10-29 13:53:58,971 - INFO     -     - search_depth: 2
2025-10-29 13:53:58,971 - INFO     -     - solution_cost: 2
2025-10-29 13:53:58,971 - INFO     -     - branching_factor: 4.0000
2025-10-29 13:53:58,971 - INFO     -     - solution_found: True
2025-10-29 13:53:58,971 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:58,971 - INFO     - 
  Computing reward:
2025-10-29 13:53:58,971 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:58,971 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:58,972 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:58,972 - INFO     -   [1] BRANCHING FACTOR: 4.000 → score 0.567 (tolerable)
2025-10-29 13:53:58,972 - INFO     -   [2] SOLUTION QUALITY: depth=2 → score 0.860 + bonus 0.300
2025-10-29 13:53:58,972 - INFO     -   [3] F-VALUE STABILITY: 0.286
2025-10-29 13:53:58,972 - INFO     -       → poor stability (but not penalized heavily), bonus: -0.100
2025-10-29 13:53:58,972 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:58,972 - INFO     - 
  [COMPOSITE]: 0.562
2025-10-29 13:53:58,972 - INFO     -     = 0.300*0.567 (bf)
2025-10-29 13:53:58,972 - INFO     -     + 0.200*0.860 (depth)
2025-10-29 13:53:58,972 - INFO     -     + 0.350*0.286 (stability)
2025-10-29 13:53:58,972 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:58,972 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:58,972 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:58,972 - INFO     -     + Stability bonus: -0.100
2025-10-29 13:53:58,974 - INFO     - 
  [FINAL REWARD]: 0.3244
2025-10-29 13:53:58,974 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:58,974 - INFO     -     ✓ Reward computed: 0.3244
2025-10-29 13:53:58,974 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:58,974 - INFO     -     - bf_score                       0.5667
2025-10-29 13:53:58,974 - INFO     -     - depth_score                    0.8603
2025-10-29 13:53:58,974 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:58,974 - INFO     -     - f_stability                    0.2862
2025-10-29 13:53:58,974 - INFO     -     - stability_bonus                -0.1000
2025-10-29 13:53:58,974 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:58,974 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:58,974 - INFO     -     - composite                      0.5622
2025-10-29 13:53:58,974 - INFO     -     - total                          0.3244
2025-10-29 13:53:58,974 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:58,974 - INFO     -   Num remaining nodes: 8
2025-10-29 13:53:58,975 - INFO     -   Current merge step: 0 / 50
2025-10-29 13:53:58,975 - INFO     -   Done: False
2025-10-29 13:53:58,975 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:58,976 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:58,976 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:58,976 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:58,976 - INFO     -     - num_nodes: 8
2025-10-29 13:53:58,976 - INFO     -     - num_edges: 50
2025-10-29 13:53:58,976 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:58,977 - INFO     -   Before: current_merge_step = 0
2025-10-29 13:53:58,977 - INFO     -   After: current_merge_step = 1
2025-10-29 13:53:58,977 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:58,977 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:58,977 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:58,978 - INFO     -   ✓ Step logged
2025-10-29 13:53:58,978 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:58,978 - INFO     -   Returning:
2025-10-29 13:53:58,978 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:58,978 - INFO     -     - reward: 0.3244
2025-10-29 13:53:58,978 - INFO     -     - done: False
2025-10-29 13:53:58,978 - INFO     -     - truncated: False
2025-10-29 13:53:58,978 - INFO     -     - info: 19 keys
2025-10-29 13:53:58,978 - INFO     - ==========================================================================================

2025-10-29 13:53:58,984 - INFO     - 
==========================================================================================
2025-10-29 13:53:58,984 - INFO     - STEP 1: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:58,984 - INFO     - ==========================================================================================
2025-10-29 13:53:58,984 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:58,985 - INFO     -   Input action: 32 (type: int)
2025-10-29 13:53:58,985 - INFO     -   Available edges in graph: 50
2025-10-29 13:53:58,985 - INFO     -   Action index calculation:
2025-10-29 13:53:58,985 - INFO     -     - action % max(num_valid_edges, 1) = 32 % 50 = 32
2025-10-29 13:53:58,985 - INFO     -     - clamped to [0, 49]: 32
2025-10-29 13:53:58,985 - INFO     -   ✓ Extracted merge pair from edge 32: (6, 9)
2025-10-29 13:53:58,985 - INFO     -   ✓ Validation passed
2025-10-29 13:53:58,985 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:58,985 - INFO     -     - Total states before merge: 33
2025-10-29 13:53:58,985 - INFO     -     - Num nodes: 8
2025-10-29 13:53:58,985 - INFO     -     - Num edges: 50
2025-10-29 13:53:58,985 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:58,985 - INFO     -       - Node 6: 5 states
2025-10-29 13:53:58,985 - INFO     -       - Node 9: 10 states
2025-10-29 13:53:58,985 - INFO     -       - Expected product: 50 states
2025-10-29 13:53:58,985 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:58,991 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_1.json
2025-10-29 13:53:58,991 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:58,991 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_1.json
2025-10-29 13:53:59,091 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:59,091 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:59,091 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_1.json
2025-10-29 13:53:59,093 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:59,093 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:59,093 - INFO     -   Calling graph_tracker.merge_nodes([6, 9])...
2025-10-29 13:53:59,093 - INFO     - Attempting merge of nodes 6 and 9...
2025-10-29 13:53:59,093 - INFO     - Successfully merged nodes into new node 10 with 50 states.
2025-10-29 13:53:59,093 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:59,093 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:59,093 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=1)...
2025-10-29 13:53:59,093 - INFO     - 
================================================================================
2025-10-29 13:53:59,093 - INFO     - [EXTRACT] Iteration 1: Extracting merge info
2025-10-29 13:53:59,093 - INFO     - ================================================================================
2025-10-29 13:53:59,093 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:59,093 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_1.json
2025-10-29 13:53:59,093 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_1.json
2025-10-29 13:53:59,093 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:59,093 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:59,093 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:59,095 - INFO     -   - Raw ts2_f length: 10
2025-10-29 13:53:59,095 - INFO     -   - Raw f_after length: 50
2025-10-29 13:53:59,095 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:59,095 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:59,095 - INFO     -   - ts2_valid: 10 / 10 (removed -10)
2025-10-29 13:53:59,095 - INFO     -   - after_valid: 50 / 50 (removed 0)
2025-10-29 13:53:59,095 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:59,095 - INFO     -   - ts1_id: 6
2025-10-29 13:53:59,095 - INFO     -   - ts2_id: 9
2025-10-29 13:53:59,095 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:59,095 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:59,095 - INFO     -   - ts1_size: 5, ts2_size: 10
2025-10-29 13:53:59,095 - INFO     -   - Product space size: 50
2025-10-29 13:53:59,095 - INFO     -   - Using product state mapping
2025-10-29 13:53:59,095 - INFO     -   - f_before_product length: 50
2025-10-29 13:53:59,096 - INFO     -   - avg_f_before: 4.1200 (50 valid states)
2025-10-29 13:53:59,096 - INFO     -   - avg_f_after:  6.5200 (50 valid states)
2025-10-29 13:53:59,096 - INFO     -   - delta: 2.4000
2025-10-29 13:53:59,096 - INFO     -   - f_stability: 1.0 - |2.4000| / 4.1200 = 0.4175
2025-10-29 13:53:59,096 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:59,096 - INFO     -   - Compared 15 values
2025-10-29 13:53:59,096 - INFO     -   - Significant changes (> 5.0): 1
2025-10-29 13:53:59,096 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:59,096 - INFO     -   - states_before: 50
2025-10-29 13:53:59,096 - INFO     -   - states_after: 50
2025-10-29 13:53:59,096 - INFO     -   - delta_states: 0
2025-10-29 13:53:59,096 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:59,096 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:59,096 - INFO     -   - ts2_transitions: 40
2025-10-29 13:53:59,096 - INFO     -   - merged_transitions: 260
2025-10-29 13:53:59,097 - INFO     -   - transition_density_change: 4.1400
2025-10-29 13:53:59,097 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:59,097 - INFO     -   - search_signals present: True
2025-10-29 13:53:59,097 - INFO     -   - nodes_expanded: 50
2025-10-29 13:53:59,097 - INFO     -   - search_depth: 3
2025-10-29 13:53:59,097 - INFO     -   - solution_cost: 2
2025-10-29 13:53:59,097 - INFO     -   - branching_factor: 5.2000
2025-10-29 13:53:59,097 - INFO     -   - solution_found: True
2025-10-29 13:53:59,097 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:59,098 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:59,098 - INFO     - 
[SUMMARY] Iteration 1:
2025-10-29 13:53:59,098 - INFO     -   - TS6(5) + TS9(10) → 50 states
2025-10-29 13:53:59,098 - INFO     -   - f_stability=0.417
2025-10-29 13:53:59,098 - INFO     -   - A* nodes_expanded=50
2025-10-29 13:53:59,098 - INFO     -   - solution_found=True
2025-10-29 13:53:59,098 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:59,098 - INFO     - 
  Extracted signals:
2025-10-29 13:53:59,098 - INFO     -     - iteration: 1
2025-10-29 13:53:59,099 - INFO     -     - states_before: 50
2025-10-29 13:53:59,099 - INFO     -     - states_after: 50
2025-10-29 13:53:59,099 - INFO     -     - delta_states: 0
2025-10-29 13:53:59,099 - INFO     -     - f_value_stability: 0.4175
2025-10-29 13:53:59,099 - INFO     -     - num_significant_f_changes: 1
2025-10-29 13:53:59,099 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:59,099 - INFO     -     - nodes_expanded: 50
2025-10-29 13:53:59,099 - INFO     -     - search_depth: 3
2025-10-29 13:53:59,099 - INFO     -     - solution_cost: 2
2025-10-29 13:53:59,099 - INFO     -     - branching_factor: 5.2000
2025-10-29 13:53:59,099 - INFO     -     - solution_found: True
2025-10-29 13:53:59,099 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:59,099 - INFO     - 
  Computing reward:
2025-10-29 13:53:59,099 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:59,099 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:59,099 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:59,099 - INFO     -   [1] BRANCHING FACTOR: 5.200 → score 0.407 (tolerable)
2025-10-29 13:53:59,100 - INFO     -   [2] SOLUTION QUALITY: depth=3 → score 0.824 + bonus 0.300
2025-10-29 13:53:59,100 - INFO     -   [3] F-VALUE STABILITY: 0.364
2025-10-29 13:53:59,100 - INFO     -       → acceptable stability, bonus: 0.000
2025-10-29 13:53:59,100 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:59,100 - INFO     - 
  [COMPOSITE]: 0.534
2025-10-29 13:53:59,100 - INFO     -     = 0.300*0.407 (bf)
2025-10-29 13:53:59,100 - INFO     -     + 0.200*0.824 (depth)
2025-10-29 13:53:59,100 - INFO     -     + 0.350*0.364 (stability)
2025-10-29 13:53:59,100 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:59,100 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:59,100 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:59,100 - INFO     -     + Stability bonus: 0.000
2025-10-29 13:53:59,100 - INFO     - 
  [FINAL REWARD]: 0.3684
2025-10-29 13:53:59,100 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:59,100 - INFO     -     ✓ Reward computed: 0.3684
2025-10-29 13:53:59,101 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:59,101 - INFO     -     - bf_score                       0.4067
2025-10-29 13:53:59,101 - INFO     -     - depth_score                    0.8237
2025-10-29 13:53:59,101 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:59,101 - INFO     -     - f_stability                    0.3642
2025-10-29 13:53:59,101 - INFO     -     - stability_bonus                0.0000
2025-10-29 13:53:59,101 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:59,101 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:59,101 - INFO     -     - composite                      0.5342
2025-10-29 13:53:59,102 - INFO     -     - total                          0.3684
2025-10-29 13:53:59,102 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:59,102 - INFO     -   Num remaining nodes: 7
2025-10-29 13:53:59,102 - INFO     -   Current merge step: 1 / 50
2025-10-29 13:53:59,102 - INFO     -   Done: False
2025-10-29 13:53:59,102 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:59,103 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:59,103 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:59,103 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:59,103 - INFO     -     - num_nodes: 7
2025-10-29 13:53:59,103 - INFO     -     - num_edges: 40
2025-10-29 13:53:59,103 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:59,103 - INFO     -   Before: current_merge_step = 1
2025-10-29 13:53:59,103 - INFO     -   After: current_merge_step = 2
2025-10-29 13:53:59,103 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:59,103 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:59,103 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:59,105 - INFO     -   ✓ Step logged
2025-10-29 13:53:59,105 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:59,105 - INFO     -   Returning:
2025-10-29 13:53:59,105 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:59,105 - INFO     -     - reward: 0.3684
2025-10-29 13:53:59,105 - INFO     -     - done: False
2025-10-29 13:53:59,105 - INFO     -     - truncated: False
2025-10-29 13:53:59,105 - INFO     -     - info: 19 keys
2025-10-29 13:53:59,105 - INFO     - ==========================================================================================

2025-10-29 13:53:59,111 - INFO     - 
==========================================================================================
2025-10-29 13:53:59,111 - INFO     - STEP 2: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:59,111 - INFO     - ==========================================================================================
2025-10-29 13:53:59,111 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:59,111 - INFO     -   Input action: 28 (type: int)
2025-10-29 13:53:59,111 - INFO     -   Available edges in graph: 40
2025-10-29 13:53:59,111 - INFO     -   Action index calculation:
2025-10-29 13:53:59,111 - INFO     -     - action % max(num_valid_edges, 1) = 28 % 40 = 28
2025-10-29 13:53:59,111 - INFO     -     - clamped to [0, 39]: 28
2025-10-29 13:53:59,111 - INFO     -   ✓ Extracted merge pair from edge 28: (7, 10)
2025-10-29 13:53:59,111 - INFO     -   ✓ Validation passed
2025-10-29 13:53:59,112 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:59,112 - INFO     -     - Total states before merge: 68
2025-10-29 13:53:59,112 - INFO     -     - Num nodes: 7
2025-10-29 13:53:59,112 - INFO     -     - Num edges: 40
2025-10-29 13:53:59,112 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:59,112 - INFO     -       - Node 7: 5 states
2025-10-29 13:53:59,112 - INFO     -       - Node 10: 50 states
2025-10-29 13:53:59,112 - INFO     -       - Expected product: 250 states
2025-10-29 13:53:59,112 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:59,119 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_2.json
2025-10-29 13:53:59,120 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:59,120 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_2.json
2025-10-29 13:53:59,220 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:59,220 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:59,220 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_2.json
2025-10-29 13:53:59,224 - INFO     -   ✓ TS file received after 0.00s
2025-10-29 13:53:59,224 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:59,224 - INFO     -   Calling graph_tracker.merge_nodes([7, 10])...
2025-10-29 13:53:59,224 - INFO     - Attempting merge of nodes 7 and 10...
2025-10-29 13:53:59,224 - INFO     - Successfully merged nodes into new node 11 with 250 states.
2025-10-29 13:53:59,224 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:59,224 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:59,224 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=2)...
2025-10-29 13:53:59,224 - INFO     - 
================================================================================
2025-10-29 13:53:59,224 - INFO     - [EXTRACT] Iteration 2: Extracting merge info
2025-10-29 13:53:59,225 - INFO     - ================================================================================
2025-10-29 13:53:59,225 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:59,225 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_2.json
2025-10-29 13:53:59,225 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_2.json
2025-10-29 13:53:59,225 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:59,226 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:59,226 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:53:59,226 - INFO     -   - Raw ts2_f length: 50
2025-10-29 13:53:59,226 - INFO     -   - Raw f_after length: 250
2025-10-29 13:53:59,226 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:59,226 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:53:59,226 - INFO     -   - ts2_valid: 50 / 50 (removed -50)
2025-10-29 13:53:59,226 - INFO     -   - after_valid: 250 / 250 (removed 0)
2025-10-29 13:53:59,226 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:59,226 - INFO     -   - ts1_id: 7
2025-10-29 13:53:59,226 - INFO     -   - ts2_id: 10
2025-10-29 13:53:59,226 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:59,226 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:59,226 - INFO     -   - ts1_size: 5, ts2_size: 50
2025-10-29 13:53:59,226 - INFO     -   - Product space size: 250
2025-10-29 13:53:59,226 - INFO     -   - Using product state mapping
2025-10-29 13:53:59,226 - INFO     -   - f_before_product length: 250
2025-10-29 13:53:59,227 - INFO     -   - avg_f_before: 6.5760 (250 valid states)
2025-10-29 13:53:59,227 - INFO     -   - avg_f_after:  9.3160 (250 valid states)
2025-10-29 13:53:59,227 - INFO     -   - delta: 2.7400
2025-10-29 13:53:59,227 - INFO     -   - f_stability: 1.0 - |2.7400| / 6.5760 = 0.5833
2025-10-29 13:53:59,227 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:59,227 - INFO     -   - Compared 55 values
2025-10-29 13:53:59,227 - INFO     -   - Significant changes (> 5.0): 9
2025-10-29 13:53:59,228 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:59,228 - INFO     -   - states_before: 250
2025-10-29 13:53:59,228 - INFO     -   - states_after: 250
2025-10-29 13:53:59,228 - INFO     -   - delta_states: 0
2025-10-29 13:53:59,228 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:59,228 - INFO     -   - ts1_transitions: 13
2025-10-29 13:53:59,228 - INFO     -   - ts2_transitions: 260
2025-10-29 13:53:59,228 - INFO     -   - merged_transitions: 1675
2025-10-29 13:53:59,228 - INFO     -   - transition_density_change: 5.6080
2025-10-29 13:53:59,228 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:59,228 - INFO     -   - search_signals present: True
2025-10-29 13:53:59,228 - INFO     -   - nodes_expanded: 250
2025-10-29 13:53:59,228 - INFO     -   - search_depth: 5
2025-10-29 13:53:59,228 - INFO     -   - solution_cost: 4
2025-10-29 13:53:59,228 - INFO     -   - branching_factor: 6.7000
2025-10-29 13:53:59,228 - INFO     -   - solution_found: True
2025-10-29 13:53:59,228 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:59,229 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:59,229 - INFO     - 
[SUMMARY] Iteration 2:
2025-10-29 13:53:59,229 - INFO     -   - TS7(5) + TS10(50) → 250 states
2025-10-29 13:53:59,229 - INFO     -   - f_stability=0.583
2025-10-29 13:53:59,229 - INFO     -   - A* nodes_expanded=250
2025-10-29 13:53:59,229 - INFO     -   - solution_found=True
2025-10-29 13:53:59,229 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:59,229 - INFO     - 
  Extracted signals:
2025-10-29 13:53:59,229 - INFO     -     - iteration: 2
2025-10-29 13:53:59,229 - INFO     -     - states_before: 250
2025-10-29 13:53:59,229 - INFO     -     - states_after: 250
2025-10-29 13:53:59,229 - INFO     -     - delta_states: 0
2025-10-29 13:53:59,230 - INFO     -     - f_value_stability: 0.5833
2025-10-29 13:53:59,230 - INFO     -     - num_significant_f_changes: 9
2025-10-29 13:53:59,230 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:59,230 - INFO     -     - nodes_expanded: 250
2025-10-29 13:53:59,230 - INFO     -     - search_depth: 5
2025-10-29 13:53:59,230 - INFO     -     - solution_cost: 4
2025-10-29 13:53:59,230 - INFO     -     - branching_factor: 6.7000
2025-10-29 13:53:59,230 - INFO     -     - solution_found: True
2025-10-29 13:53:59,230 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:59,230 - INFO     - 
  Computing reward:
2025-10-29 13:53:59,230 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:59,230 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:59,230 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:59,230 - INFO     -   [1] BRANCHING FACTOR: 6.700 → score 0.230 (high BF, minimal credit)
2025-10-29 13:53:59,230 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:59,231 - INFO     -   [3] F-VALUE STABILITY: 0.531
2025-10-29 13:53:59,231 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:53:59,231 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:59,231 - INFO     - 
  [COMPOSITE]: 0.529
2025-10-29 13:53:59,231 - INFO     -     = 0.300*0.230 (bf)
2025-10-29 13:53:59,231 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:59,231 - INFO     -     + 0.350*0.531 (stability)
2025-10-29 13:53:59,231 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:59,231 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:59,231 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:59,231 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:53:59,231 - INFO     - 
  [FINAL REWARD]: 0.4587
2025-10-29 13:53:59,232 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:59,232 - INFO     -     ✓ Reward computed: 0.4587
2025-10-29 13:53:59,232 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:59,232 - INFO     -     - bf_score                       0.2300
2025-10-29 13:53:59,232 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:59,232 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:59,232 - INFO     -     - f_stability                    0.5312
2025-10-29 13:53:59,232 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:53:59,232 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:59,232 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:59,232 - INFO     -     - composite                      0.5293
2025-10-29 13:53:59,232 - INFO     -     - total                          0.4587
2025-10-29 13:53:59,232 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:59,232 - INFO     -   Num remaining nodes: 6
2025-10-29 13:53:59,232 - INFO     -   Current merge step: 2 / 50
2025-10-29 13:53:59,232 - INFO     -   Done: False
2025-10-29 13:53:59,233 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:59,233 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:59,233 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:59,234 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:59,234 - INFO     -     - num_nodes: 6
2025-10-29 13:53:59,234 - INFO     -     - num_edges: 30
2025-10-29 13:53:59,234 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:59,234 - INFO     -   Before: current_merge_step = 2
2025-10-29 13:53:59,234 - INFO     -   After: current_merge_step = 3
2025-10-29 13:53:59,234 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:59,234 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:59,234 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:59,235 - INFO     -   ✓ Step logged
2025-10-29 13:53:59,237 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:59,237 - INFO     -   Returning:
2025-10-29 13:53:59,237 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:59,237 - INFO     -     - reward: 0.4587
2025-10-29 13:53:59,237 - INFO     -     - done: False
2025-10-29 13:53:59,237 - INFO     -     - truncated: False
2025-10-29 13:53:59,237 - INFO     -     - info: 19 keys
2025-10-29 13:53:59,237 - INFO     - ==========================================================================================

2025-10-29 13:53:59,243 - INFO     - 
==========================================================================================
2025-10-29 13:53:59,243 - INFO     - STEP 3: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:59,243 - INFO     - ==========================================================================================
2025-10-29 13:53:59,243 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:59,243 - INFO     -   Input action: 4 (type: int)
2025-10-29 13:53:59,243 - INFO     -   Available edges in graph: 30
2025-10-29 13:53:59,243 - INFO     -   Action index calculation:
2025-10-29 13:53:59,243 - INFO     -     - action % max(num_valid_edges, 1) = 4 % 30 = 4
2025-10-29 13:53:59,243 - INFO     -     - clamped to [0, 29]: 4
2025-10-29 13:53:59,243 - INFO     -   ✓ Extracted merge pair from edge 4: (0, 11)
2025-10-29 13:53:59,243 - INFO     -   ✓ Validation passed
2025-10-29 13:53:59,243 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:59,244 - INFO     -     - Total states before merge: 263
2025-10-29 13:53:59,244 - INFO     -     - Num nodes: 6
2025-10-29 13:53:59,244 - INFO     -     - Num edges: 30
2025-10-29 13:53:59,244 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:59,244 - INFO     -       - Node 0: 2 states
2025-10-29 13:53:59,244 - INFO     -       - Node 11: 250 states
2025-10-29 13:53:59,244 - INFO     -       - Expected product: 500 states
2025-10-29 13:53:59,244 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:59,249 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_3.json
2025-10-29 13:53:59,249 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:59,249 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_3.json
2025-10-29 13:53:59,350 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:59,350 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:59,350 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_3.json
2025-10-29 13:53:59,355 - INFO     -   ✓ TS file received after 0.01s
2025-10-29 13:53:59,355 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:59,355 - INFO     -   Calling graph_tracker.merge_nodes([0, 11])...
2025-10-29 13:53:59,355 - INFO     - Attempting merge of nodes 0 and 11...
2025-10-29 13:53:59,355 - INFO     - Successfully merged nodes into new node 12 with 500 states.
2025-10-29 13:53:59,355 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:59,357 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:59,357 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=3)...
2025-10-29 13:53:59,357 - INFO     - 
================================================================================
2025-10-29 13:53:59,357 - INFO     - [EXTRACT] Iteration 3: Extracting merge info
2025-10-29 13:53:59,357 - INFO     - ================================================================================
2025-10-29 13:53:59,357 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:59,357 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_3.json
2025-10-29 13:53:59,357 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_3.json
2025-10-29 13:53:59,358 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:59,358 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:59,358 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:59,358 - INFO     -   - Raw ts2_f length: 250
2025-10-29 13:53:59,358 - INFO     -   - Raw f_after length: 500
2025-10-29 13:53:59,358 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:59,358 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:59,358 - INFO     -   - ts2_valid: 250 / 250 (removed -250)
2025-10-29 13:53:59,359 - INFO     -   - after_valid: 500 / 500 (removed 0)
2025-10-29 13:53:59,359 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:59,359 - INFO     -   - ts1_id: 0
2025-10-29 13:53:59,359 - INFO     -   - ts2_id: 11
2025-10-29 13:53:59,359 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:59,359 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:59,359 - INFO     -   - ts1_size: 2, ts2_size: 250
2025-10-29 13:53:59,359 - INFO     -   - Product space size: 500
2025-10-29 13:53:59,359 - INFO     -   - Using product state mapping
2025-10-29 13:53:59,361 - INFO     -   - f_before_product length: 500
2025-10-29 13:53:59,362 - INFO     -   - avg_f_before: 9.3160 (500 valid states)
2025-10-29 13:53:59,362 - INFO     -   - avg_f_after:  10.1320 (500 valid states)
2025-10-29 13:53:59,362 - INFO     -   - delta: 0.8160
2025-10-29 13:53:59,362 - INFO     -   - f_stability: 1.0 - |0.8160| / 9.3160 = 0.9124
2025-10-29 13:53:59,363 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:59,363 - INFO     -   - Compared 252 values
2025-10-29 13:53:59,363 - INFO     -   - Significant changes (> 5.0): 7
2025-10-29 13:53:59,363 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:59,363 - INFO     -   - states_before: 500
2025-10-29 13:53:59,363 - INFO     -   - states_after: 500
2025-10-29 13:53:59,363 - INFO     -   - delta_states: 0
2025-10-29 13:53:59,363 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:59,363 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:59,363 - INFO     -   - ts2_transitions: 1675
2025-10-29 13:53:59,364 - INFO     -   - merged_transitions: 3800
2025-10-29 13:53:59,364 - INFO     -   - transition_density_change: 4.2400
2025-10-29 13:53:59,364 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:59,364 - INFO     -   - search_signals present: True
2025-10-29 13:53:59,364 - INFO     -   - nodes_expanded: 500
2025-10-29 13:53:59,364 - INFO     -   - search_depth: 5
2025-10-29 13:53:59,364 - INFO     -   - solution_cost: 4
2025-10-29 13:53:59,364 - INFO     -   - branching_factor: 7.6000
2025-10-29 13:53:59,364 - INFO     -   - solution_found: True
2025-10-29 13:53:59,364 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:59,365 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:59,365 - INFO     - 
[SUMMARY] Iteration 3:
2025-10-29 13:53:59,365 - INFO     -   - TS0(2) + TS11(250) → 500 states
2025-10-29 13:53:59,365 - INFO     -   - f_stability=0.912
2025-10-29 13:53:59,366 - INFO     -   - A* nodes_expanded=500
2025-10-29 13:53:59,366 - INFO     -   - solution_found=True
2025-10-29 13:53:59,366 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:59,366 - INFO     - 
  Extracted signals:
2025-10-29 13:53:59,366 - INFO     -     - iteration: 3
2025-10-29 13:53:59,366 - INFO     -     - states_before: 500
2025-10-29 13:53:59,366 - INFO     -     - states_after: 500
2025-10-29 13:53:59,366 - INFO     -     - delta_states: 0
2025-10-29 13:53:59,366 - INFO     -     - f_value_stability: 0.9124
2025-10-29 13:53:59,366 - INFO     -     - num_significant_f_changes: 7
2025-10-29 13:53:59,366 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:59,366 - INFO     -     - nodes_expanded: 500
2025-10-29 13:53:59,367 - INFO     -     - search_depth: 5
2025-10-29 13:53:59,367 - INFO     -     - solution_cost: 4
2025-10-29 13:53:59,367 - INFO     -     - branching_factor: 7.6000
2025-10-29 13:53:59,367 - INFO     -     - solution_found: True
2025-10-29 13:53:59,367 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:59,367 - INFO     - 
  Computing reward:
2025-10-29 13:53:59,367 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:59,367 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:59,367 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:59,367 - INFO     -   [1] BRANCHING FACTOR: 7.600 → score 0.140 (high BF, minimal credit)
2025-10-29 13:53:59,367 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:59,369 - INFO     -   [3] F-VALUE STABILITY: 0.993
2025-10-29 13:53:59,369 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:59,369 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:59,369 - INFO     - 
  [COMPOSITE]: 0.664
2025-10-29 13:53:59,369 - INFO     -     = 0.300*0.140 (bf)
2025-10-29 13:53:59,369 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:59,370 - INFO     -     + 0.350*0.993 (stability)
2025-10-29 13:53:59,370 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:59,370 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:59,370 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:59,370 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:59,370 - INFO     - 
  [FINAL REWARD]: 0.8279
2025-10-29 13:53:59,370 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:59,370 - INFO     -     ✓ Reward computed: 0.8279
2025-10-29 13:53:59,370 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:59,370 - INFO     -     - bf_score                       0.1400
2025-10-29 13:53:59,370 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:59,370 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:59,370 - INFO     -     - f_stability                    0.9930
2025-10-29 13:53:59,370 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:59,371 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:59,371 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:59,371 - INFO     -     - composite                      0.6640
2025-10-29 13:53:59,371 - INFO     -     - total                          0.8279
2025-10-29 13:53:59,371 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:59,371 - INFO     -   Num remaining nodes: 5
2025-10-29 13:53:59,371 - INFO     -   Current merge step: 3 / 50
2025-10-29 13:53:59,371 - INFO     -   Done: False
2025-10-29 13:53:59,371 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:59,372 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:59,373 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:59,373 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:59,373 - INFO     -     - num_nodes: 5
2025-10-29 13:53:59,373 - INFO     -     - num_edges: 20
2025-10-29 13:53:59,373 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:59,373 - INFO     -   Before: current_merge_step = 3
2025-10-29 13:53:59,373 - INFO     -   After: current_merge_step = 4
2025-10-29 13:53:59,373 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:59,373 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:59,373 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:59,374 - INFO     -   ✓ Step logged
2025-10-29 13:53:59,374 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:59,374 - INFO     -   Returning:
2025-10-29 13:53:59,374 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:59,374 - INFO     -     - reward: 0.8279
2025-10-29 13:53:59,374 - INFO     -     - done: False
2025-10-29 13:53:59,374 - INFO     -     - truncated: False
2025-10-29 13:53:59,375 - INFO     -     - info: 19 keys
2025-10-29 13:53:59,375 - INFO     - ==========================================================================================

2025-10-29 13:53:59,383 - INFO     - 
==========================================================================================
2025-10-29 13:53:59,383 - INFO     - STEP 4: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:59,384 - INFO     - ==========================================================================================
2025-10-29 13:53:59,384 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:59,384 - INFO     -   Input action: 3 (type: int)
2025-10-29 13:53:59,384 - INFO     -   Available edges in graph: 20
2025-10-29 13:53:59,384 - INFO     -   Action index calculation:
2025-10-29 13:53:59,384 - INFO     -     - action % max(num_valid_edges, 1) = 3 % 20 = 3
2025-10-29 13:53:59,384 - INFO     -     - clamped to [0, 19]: 3
2025-10-29 13:53:59,384 - INFO     -   ✓ Extracted merge pair from edge 3: (2, 12)
2025-10-29 13:53:59,384 - INFO     -   ✓ Validation passed
2025-10-29 13:53:59,384 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:59,384 - INFO     -     - Total states before merge: 511
2025-10-29 13:53:59,384 - INFO     -     - Num nodes: 5
2025-10-29 13:53:59,384 - INFO     -     - Num edges: 20
2025-10-29 13:53:59,385 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:59,385 - INFO     -       - Node 2: 2 states
2025-10-29 13:53:59,385 - INFO     -       - Node 12: 500 states
2025-10-29 13:53:59,385 - INFO     -       - Expected product: 1000 states
2025-10-29 13:53:59,385 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:59,390 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_4.json
2025-10-29 13:53:59,390 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:59,390 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_4.json
2025-10-29 13:53:59,491 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:59,491 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:59,491 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_4.json
2025-10-29 13:53:59,510 - INFO     -   ✓ TS file received after 0.02s
2025-10-29 13:53:59,510 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:59,510 - INFO     -   Calling graph_tracker.merge_nodes([2, 12])...
2025-10-29 13:53:59,510 - INFO     - Attempting merge of nodes 2 and 12...
2025-10-29 13:53:59,510 - INFO     - Successfully merged nodes into new node 13 with 1000 states.
2025-10-29 13:53:59,510 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:59,510 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:59,511 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=4)...
2025-10-29 13:53:59,511 - INFO     - 
================================================================================
2025-10-29 13:53:59,511 - INFO     - [EXTRACT] Iteration 4: Extracting merge info
2025-10-29 13:53:59,511 - INFO     - ================================================================================
2025-10-29 13:53:59,511 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:59,511 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_4.json
2025-10-29 13:53:59,511 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_4.json
2025-10-29 13:53:59,514 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:59,514 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:59,514 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:59,514 - INFO     -   - Raw ts2_f length: 500
2025-10-29 13:53:59,514 - INFO     -   - Raw f_after length: 1000
2025-10-29 13:53:59,514 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:59,514 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:59,515 - INFO     -   - ts2_valid: 500 / 500 (removed -500)
2025-10-29 13:53:59,515 - INFO     -   - after_valid: 1000 / 1000 (removed 0)
2025-10-29 13:53:59,516 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:59,516 - INFO     -   - ts1_id: 2
2025-10-29 13:53:59,516 - INFO     -   - ts2_id: 12
2025-10-29 13:53:59,516 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:59,516 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:59,516 - INFO     -   - ts1_size: 2, ts2_size: 500
2025-10-29 13:53:59,516 - INFO     -   - Product space size: 1000
2025-10-29 13:53:59,516 - INFO     -   - Using product state mapping
2025-10-29 13:53:59,518 - INFO     -   - f_before_product length: 1000
2025-10-29 13:53:59,522 - INFO     -   - avg_f_before: 10.1320 (1000 valid states)
2025-10-29 13:53:59,523 - INFO     -   - avg_f_after:  10.9790 (1000 valid states)
2025-10-29 13:53:59,523 - INFO     -   - delta: 0.8470
2025-10-29 13:53:59,523 - INFO     -   - f_stability: 1.0 - |0.8470| / 10.1320 = 0.9164
2025-10-29 13:53:59,523 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:59,523 - INFO     -   - Compared 502 values
2025-10-29 13:53:59,523 - INFO     -   - Significant changes (> 5.0): 23
2025-10-29 13:53:59,523 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:59,523 - INFO     -   - states_before: 1000
2025-10-29 13:53:59,523 - INFO     -   - states_after: 1000
2025-10-29 13:53:59,523 - INFO     -   - delta_states: 0
2025-10-29 13:53:59,524 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:59,524 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:59,524 - INFO     -   - ts2_transitions: 3800
2025-10-29 13:53:59,524 - INFO     -   - merged_transitions: 8500
2025-10-29 13:53:59,524 - INFO     -   - transition_density_change: 4.6950
2025-10-29 13:53:59,524 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:59,524 - INFO     -   - search_signals present: True
2025-10-29 13:53:59,524 - INFO     -   - nodes_expanded: 1000
2025-10-29 13:53:59,524 - INFO     -   - search_depth: 5
2025-10-29 13:53:59,524 - INFO     -   - solution_cost: 4
2025-10-29 13:53:59,524 - INFO     -   - branching_factor: 8.5000
2025-10-29 13:53:59,524 - INFO     -   - solution_found: True
2025-10-29 13:53:59,525 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:59,526 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:59,526 - INFO     - 
[SUMMARY] Iteration 4:
2025-10-29 13:53:59,526 - INFO     -   - TS2(2) + TS12(500) → 1000 states
2025-10-29 13:53:59,526 - INFO     -   - f_stability=0.916
2025-10-29 13:53:59,526 - INFO     -   - A* nodes_expanded=1000
2025-10-29 13:53:59,526 - INFO     -   - solution_found=True
2025-10-29 13:53:59,526 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:59,526 - INFO     - 
  Extracted signals:
2025-10-29 13:53:59,526 - INFO     -     - iteration: 4
2025-10-29 13:53:59,527 - INFO     -     - states_before: 1000
2025-10-29 13:53:59,527 - INFO     -     - states_after: 1000
2025-10-29 13:53:59,527 - INFO     -     - delta_states: 0
2025-10-29 13:53:59,527 - INFO     -     - f_value_stability: 0.9164
2025-10-29 13:53:59,527 - INFO     -     - num_significant_f_changes: 23
2025-10-29 13:53:59,527 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:59,527 - INFO     -     - nodes_expanded: 1000
2025-10-29 13:53:59,527 - INFO     -     - search_depth: 5
2025-10-29 13:53:59,527 - INFO     -     - solution_cost: 4
2025-10-29 13:53:59,527 - INFO     -     - branching_factor: 8.5000
2025-10-29 13:53:59,527 - INFO     -     - solution_found: True
2025-10-29 13:53:59,527 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:59,528 - WARNING  -     ⚠️  High branching factor: 8.5000
2025-10-29 13:53:59,528 - INFO     - 
  Computing reward:
2025-10-29 13:53:59,528 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:59,528 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:59,528 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:59,528 - INFO     -   [1] BRANCHING FACTOR: 8.500 → score 0.100 (high BF, minimal credit)
2025-10-29 13:53:59,528 - INFO     -   [2] SOLUTION QUALITY: depth=5 → score 0.772 + bonus 0.300
2025-10-29 13:53:59,529 - INFO     -   [3] F-VALUE STABILITY: 0.914
2025-10-29 13:53:59,529 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:59,529 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:59,529 - INFO     - 
  [COMPOSITE]: 0.624
2025-10-29 13:53:59,530 - INFO     -     = 0.300*0.100 (bf)
2025-10-29 13:53:59,530 - INFO     -     + 0.200*0.772 (depth)
2025-10-29 13:53:59,530 - INFO     -     + 0.350*0.914 (stability)
2025-10-29 13:53:59,530 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:59,530 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:59,530 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:59,530 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:59,530 - INFO     - 
  [FINAL REWARD]: 0.7485
2025-10-29 13:53:59,530 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:59,530 - INFO     -     ✓ Reward computed: 0.7485
2025-10-29 13:53:59,530 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:59,531 - INFO     -     - bf_score                       0.1000
2025-10-29 13:53:59,531 - INFO     -     - depth_score                    0.7721
2025-10-29 13:53:59,531 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:59,531 - INFO     -     - f_stability                    0.9138
2025-10-29 13:53:59,531 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:59,531 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:59,531 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:59,531 - INFO     -     - composite                      0.6243
2025-10-29 13:53:59,531 - INFO     -     - total                          0.7485
2025-10-29 13:53:59,531 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:59,531 - INFO     -   Num remaining nodes: 4
2025-10-29 13:53:59,531 - INFO     -   Current merge step: 4 / 50
2025-10-29 13:53:59,531 - INFO     -   Done: False
2025-10-29 13:53:59,532 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:59,532 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:59,532 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:59,532 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:59,533 - INFO     -     - num_nodes: 4
2025-10-29 13:53:59,533 - INFO     -     - num_edges: 12
2025-10-29 13:53:59,533 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:59,533 - INFO     -   Before: current_merge_step = 4
2025-10-29 13:53:59,533 - INFO     -   After: current_merge_step = 5
2025-10-29 13:53:59,533 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:59,533 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:59,533 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:59,534 - INFO     -   ✓ Step logged
2025-10-29 13:53:59,534 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:59,534 - INFO     -   Returning:
2025-10-29 13:53:59,534 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:59,534 - INFO     -     - reward: 0.7485
2025-10-29 13:53:59,534 - INFO     -     - done: False
2025-10-29 13:53:59,534 - INFO     -     - truncated: False
2025-10-29 13:53:59,534 - INFO     -     - info: 19 keys
2025-10-29 13:53:59,534 - INFO     - ==========================================================================================

2025-10-29 13:53:59,544 - INFO     - 
==========================================================================================
2025-10-29 13:53:59,544 - INFO     - STEP 5: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:59,544 - INFO     - ==========================================================================================
2025-10-29 13:53:59,544 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:59,544 - INFO     -   Input action: 2 (type: int)
2025-10-29 13:53:59,545 - INFO     -   Available edges in graph: 12
2025-10-29 13:53:59,545 - INFO     -   Action index calculation:
2025-10-29 13:53:59,545 - INFO     -     - action % max(num_valid_edges, 1) = 2 % 12 = 2
2025-10-29 13:53:59,545 - INFO     -     - clamped to [0, 11]: 2
2025-10-29 13:53:59,545 - INFO     -   ✓ Extracted merge pair from edge 2: (3, 13)
2025-10-29 13:53:59,545 - INFO     -   ✓ Validation passed
2025-10-29 13:53:59,545 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:59,545 - INFO     -     - Total states before merge: 1009
2025-10-29 13:53:59,545 - INFO     -     - Num nodes: 4
2025-10-29 13:53:59,545 - INFO     -     - Num edges: 12
2025-10-29 13:53:59,545 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:59,545 - INFO     -       - Node 3: 2 states
2025-10-29 13:53:59,546 - INFO     -       - Node 13: 1000 states
2025-10-29 13:53:59,546 - INFO     -       - Expected product: 2000 states
2025-10-29 13:53:59,546 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:59,550 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_5.json
2025-10-29 13:53:59,550 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:59,550 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_5.json
2025-10-29 13:53:59,651 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:59,651 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:59,651 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_5.json
2025-10-29 13:53:59,669 - INFO     -   ✓ TS file received after 0.02s
2025-10-29 13:53:59,669 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:53:59,669 - INFO     -   Calling graph_tracker.merge_nodes([3, 13])...
2025-10-29 13:53:59,669 - INFO     - Attempting merge of nodes 3 and 13...
2025-10-29 13:53:59,669 - INFO     - Successfully merged nodes into new node 14 with 2000 states.
2025-10-29 13:53:59,669 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:53:59,669 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:53:59,669 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=5)...
2025-10-29 13:53:59,669 - INFO     - 
================================================================================
2025-10-29 13:53:59,670 - INFO     - [EXTRACT] Iteration 5: Extracting merge info
2025-10-29 13:53:59,670 - INFO     - ================================================================================
2025-10-29 13:53:59,670 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:53:59,670 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_5.json
2025-10-29 13:53:59,670 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_5.json
2025-10-29 13:53:59,671 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:53:59,672 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:53:59,672 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:53:59,672 - INFO     -   - Raw ts2_f length: 1000
2025-10-29 13:53:59,672 - INFO     -   - Raw f_after length: 2000
2025-10-29 13:53:59,672 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:53:59,672 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:53:59,672 - INFO     -   - ts2_valid: 1000 / 1000 (removed -1000)
2025-10-29 13:53:59,673 - INFO     -   - after_valid: 2000 / 2000 (removed 0)
2025-10-29 13:53:59,673 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:53:59,673 - INFO     -   - ts1_id: 3
2025-10-29 13:53:59,673 - INFO     -   - ts2_id: 13
2025-10-29 13:53:59,673 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:53:59,673 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:53:59,673 - INFO     -   - ts1_size: 2, ts2_size: 1000
2025-10-29 13:53:59,674 - INFO     -   - Product space size: 2000
2025-10-29 13:53:59,674 - INFO     -   - Using product state mapping
2025-10-29 13:53:59,677 - INFO     -   - f_before_product length: 2000
2025-10-29 13:53:59,682 - INFO     -   - avg_f_before: 10.9790 (2000 valid states)
2025-10-29 13:53:59,682 - INFO     -   - avg_f_after:  12.5360 (2000 valid states)
2025-10-29 13:53:59,682 - INFO     -   - delta: 1.5570
2025-10-29 13:53:59,682 - INFO     -   - f_stability: 1.0 - |1.5570| / 10.9790 = 0.8582
2025-10-29 13:53:59,682 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:53:59,683 - INFO     -   - Compared 1002 values
2025-10-29 13:53:59,683 - INFO     -   - Significant changes (> 5.0): 76
2025-10-29 13:53:59,683 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:53:59,683 - INFO     -   - states_before: 2000
2025-10-29 13:53:59,683 - INFO     -   - states_after: 2000
2025-10-29 13:53:59,683 - INFO     -   - delta_states: 0
2025-10-29 13:53:59,683 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:53:59,683 - INFO     -   - ts1_transitions: 5
2025-10-29 13:53:59,683 - INFO     -   - ts2_transitions: 8500
2025-10-29 13:53:59,683 - INFO     -   - merged_transitions: 14400
2025-10-29 13:53:59,683 - INFO     -   - transition_density_change: 2.9475
2025-10-29 13:53:59,684 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:53:59,684 - INFO     -   - search_signals present: True
2025-10-29 13:53:59,684 - INFO     -   - nodes_expanded: 2000
2025-10-29 13:53:59,684 - INFO     -   - search_depth: 6
2025-10-29 13:53:59,684 - INFO     -   - solution_cost: 4
2025-10-29 13:53:59,684 - INFO     -   - branching_factor: 7.2000
2025-10-29 13:53:59,684 - INFO     -   - solution_found: True
2025-10-29 13:53:59,684 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:53:59,686 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:53:59,686 - INFO     - 
[SUMMARY] Iteration 5:
2025-10-29 13:53:59,687 - INFO     -   - TS3(2) + TS13(1000) → 2000 states
2025-10-29 13:53:59,687 - INFO     -   - f_stability=0.858
2025-10-29 13:53:59,687 - INFO     -   - A* nodes_expanded=2000
2025-10-29 13:53:59,687 - INFO     -   - solution_found=True
2025-10-29 13:53:59,687 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:53:59,687 - INFO     - 
  Extracted signals:
2025-10-29 13:53:59,687 - INFO     -     - iteration: 5
2025-10-29 13:53:59,687 - INFO     -     - states_before: 2000
2025-10-29 13:53:59,687 - INFO     -     - states_after: 2000
2025-10-29 13:53:59,687 - INFO     -     - delta_states: 0
2025-10-29 13:53:59,688 - INFO     -     - f_value_stability: 0.8582
2025-10-29 13:53:59,688 - INFO     -     - num_significant_f_changes: 76
2025-10-29 13:53:59,688 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:53:59,688 - INFO     -     - nodes_expanded: 2000
2025-10-29 13:53:59,688 - INFO     -     - search_depth: 6
2025-10-29 13:53:59,688 - INFO     -     - solution_cost: 4
2025-10-29 13:53:59,688 - INFO     -     - branching_factor: 7.2000
2025-10-29 13:53:59,688 - INFO     -     - solution_found: True
2025-10-29 13:53:59,688 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:53:59,689 - INFO     - 
  Computing reward:
2025-10-29 13:53:59,689 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:53:59,689 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:53:59,689 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:53:59,689 - INFO     -   [1] BRANCHING FACTOR: 7.200 → score 0.180 (high BF, minimal credit)
2025-10-29 13:53:59,689 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:53:59,691 - INFO     -   [3] F-VALUE STABILITY: 0.900
2025-10-29 13:53:59,691 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:53:59,691 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:53:59,691 - INFO     - 
  [COMPOSITE]: 0.640
2025-10-29 13:53:59,691 - INFO     -     = 0.300*0.180 (bf)
2025-10-29 13:53:59,691 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:53:59,691 - INFO     -     + 0.350*0.900 (stability)
2025-10-29 13:53:59,691 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:53:59,691 - INFO     - 
  [BONUSES]:
2025-10-29 13:53:59,691 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:53:59,691 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:53:59,693 - INFO     - 
  [FINAL REWARD]: 0.7793
2025-10-29 13:53:59,693 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:53:59,693 - INFO     -     ✓ Reward computed: 0.7793
2025-10-29 13:53:59,693 - INFO     - 
  Reward component breakdown:
2025-10-29 13:53:59,693 - INFO     -     - bf_score                       0.1800
2025-10-29 13:53:59,693 - INFO     -     - depth_score                    0.7525
2025-10-29 13:53:59,693 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:53:59,693 - INFO     -     - f_stability                    0.9004
2025-10-29 13:53:59,694 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:53:59,694 - INFO     -     - state_score                    0.8000
2025-10-29 13:53:59,694 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:53:59,694 - INFO     -     - composite                      0.6397
2025-10-29 13:53:59,694 - INFO     -     - total                          0.7793
2025-10-29 13:53:59,694 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:53:59,694 - INFO     -   Num remaining nodes: 3
2025-10-29 13:53:59,694 - INFO     -   Current merge step: 5 / 50
2025-10-29 13:53:59,694 - INFO     -   Done: False
2025-10-29 13:53:59,694 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:53:59,694 - INFO     -   ✓ Observation built successfully
2025-10-29 13:53:59,694 - INFO     -     - x shape: (100, 19)
2025-10-29 13:53:59,694 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:53:59,694 - INFO     -     - num_nodes: 3
2025-10-29 13:53:59,694 - INFO     -     - num_edges: 6
2025-10-29 13:53:59,694 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:53:59,694 - INFO     -   Before: current_merge_step = 5
2025-10-29 13:53:59,694 - INFO     -   After: current_merge_step = 6
2025-10-29 13:53:59,695 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:53:59,695 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:53:59,695 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:53:59,695 - INFO     -   ✓ Step logged
2025-10-29 13:53:59,695 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:53:59,695 - INFO     -   Returning:
2025-10-29 13:53:59,695 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:53:59,696 - INFO     -     - reward: 0.7793
2025-10-29 13:53:59,696 - INFO     -     - done: False
2025-10-29 13:53:59,696 - INFO     -     - truncated: False
2025-10-29 13:53:59,696 - INFO     -     - info: 19 keys
2025-10-29 13:53:59,696 - INFO     - ==========================================================================================

2025-10-29 13:53:59,703 - INFO     - 
==========================================================================================
2025-10-29 13:53:59,703 - INFO     - STEP 6: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:53:59,703 - INFO     - ==========================================================================================
2025-10-29 13:53:59,703 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:53:59,703 - INFO     -   Input action: 1 (type: int)
2025-10-29 13:53:59,703 - INFO     -   Available edges in graph: 6
2025-10-29 13:53:59,703 - INFO     -   Action index calculation:
2025-10-29 13:53:59,703 - INFO     -     - action % max(num_valid_edges, 1) = 1 % 6 = 1
2025-10-29 13:53:59,703 - INFO     -     - clamped to [0, 5]: 1
2025-10-29 13:53:59,703 - INFO     -   ✓ Extracted merge pair from edge 1: (4, 14)
2025-10-29 13:53:59,703 - INFO     -   ✓ Validation passed
2025-10-29 13:53:59,703 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:53:59,704 - INFO     -     - Total states before merge: 2007
2025-10-29 13:53:59,704 - INFO     -     - Num nodes: 3
2025-10-29 13:53:59,704 - INFO     -     - Num edges: 6
2025-10-29 13:53:59,704 - INFO     - 
    Nodes being merged:
2025-10-29 13:53:59,704 - INFO     -       - Node 4: 2 states
2025-10-29 13:53:59,704 - INFO     -       - Node 14: 2000 states
2025-10-29 13:53:59,704 - INFO     -       - Expected product: 4000 states
2025-10-29 13:53:59,704 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:53:59,708 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_6.json
2025-10-29 13:53:59,708 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:53:59,708 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_6.json
2025-10-29 13:53:59,809 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:53:59,809 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:53:59,809 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_6.json
2025-10-29 13:54:00,030 - INFO     -   ✓ TS file received after 0.22s
2025-10-29 13:54:00,030 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:54:00,030 - INFO     -   Calling graph_tracker.merge_nodes([4, 14])...
2025-10-29 13:54:00,030 - INFO     - Attempting merge of nodes 4 and 14...
2025-10-29 13:54:00,030 - INFO     - Successfully merged nodes into new node 15 with 4000 states.
2025-10-29 13:54:00,030 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:54:00,030 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:54:00,030 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=6)...
2025-10-29 13:54:00,030 - INFO     - 
================================================================================
2025-10-29 13:54:00,030 - INFO     - [EXTRACT] Iteration 6: Extracting merge info
2025-10-29 13:54:00,030 - INFO     - ================================================================================
2025-10-29 13:54:00,030 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:54:00,031 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_6.json
2025-10-29 13:54:00,031 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_6.json
2025-10-29 13:54:00,034 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:54:00,035 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:54:00,035 - INFO     -   - Raw ts1_f length: 2
2025-10-29 13:54:00,035 - INFO     -   - Raw ts2_f length: 2000
2025-10-29 13:54:00,035 - INFO     -   - Raw f_after length: 4000
2025-10-29 13:54:00,035 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:54:00,035 - INFO     -   - ts1_valid: 2 / 2 (removed 0)
2025-10-29 13:54:00,036 - INFO     -   - ts2_valid: 2000 / 2000 (removed -2000)
2025-10-29 13:54:00,037 - INFO     -   - after_valid: 2984 / 4000 (removed 1016)
2025-10-29 13:54:00,038 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:54:00,038 - INFO     -   - ts1_id: 4
2025-10-29 13:54:00,038 - INFO     -   - ts2_id: 14
2025-10-29 13:54:00,038 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:54:00,038 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:54:00,038 - INFO     -   - ts1_size: 2, ts2_size: 2000
2025-10-29 13:54:00,038 - INFO     -   - Product space size: 4000
2025-10-29 13:54:00,038 - INFO     -   - Using product state mapping
2025-10-29 13:54:00,044 - INFO     -   - f_before_product length: 4000
2025-10-29 13:54:00,053 - INFO     -   - avg_f_before: 12.5360 (4000 valid states)
2025-10-29 13:54:00,053 - INFO     -   - avg_f_after:  13.3747 (2984 valid states)
2025-10-29 13:54:00,053 - INFO     -   - delta: 0.8387
2025-10-29 13:54:00,053 - INFO     -   - f_stability: 1.0 - |0.8387| / 12.5360 = 0.9331
2025-10-29 13:54:00,053 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:54:00,054 - INFO     -   - Compared 2002 values
2025-10-29 13:54:00,054 - INFO     -   - Significant changes (> 5.0): 287
2025-10-29 13:54:00,054 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:54:00,054 - INFO     -   - states_before: 4000
2025-10-29 13:54:00,054 - INFO     -   - states_after: 4000
2025-10-29 13:54:00,054 - INFO     -   - delta_states: 0
2025-10-29 13:54:00,054 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:54:00,054 - INFO     -   - ts1_transitions: 3
2025-10-29 13:54:00,054 - INFO     -   - ts2_transitions: 14400
2025-10-29 13:54:00,054 - INFO     -   - merged_transitions: 22400
2025-10-29 13:54:00,054 - INFO     -   - transition_density_change: 1.9992
2025-10-29 13:54:00,054 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:54:00,054 - INFO     -   - search_signals present: True
2025-10-29 13:54:00,054 - INFO     -   - nodes_expanded: 2984
2025-10-29 13:54:00,054 - INFO     -   - search_depth: 6
2025-10-29 13:54:00,054 - INFO     -   - solution_cost: 4
2025-10-29 13:54:00,055 - INFO     -   - branching_factor: 7.5067
2025-10-29 13:54:00,055 - INFO     -   - solution_found: True
2025-10-29 13:54:00,055 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:54:00,057 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:54:00,057 - INFO     - 
[SUMMARY] Iteration 6:
2025-10-29 13:54:00,057 - INFO     -   - TS4(2) + TS14(2000) → 4000 states
2025-10-29 13:54:00,057 - INFO     -   - f_stability=0.933
2025-10-29 13:54:00,057 - INFO     -   - A* nodes_expanded=2984
2025-10-29 13:54:00,058 - INFO     -   - solution_found=True
2025-10-29 13:54:00,058 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:54:00,058 - INFO     - 
  Extracted signals:
2025-10-29 13:54:00,058 - INFO     -     - iteration: 6
2025-10-29 13:54:00,058 - INFO     -     - states_before: 4000
2025-10-29 13:54:00,058 - INFO     -     - states_after: 4000
2025-10-29 13:54:00,058 - INFO     -     - delta_states: 0
2025-10-29 13:54:00,058 - INFO     -     - f_value_stability: 0.9331
2025-10-29 13:54:00,058 - INFO     -     - num_significant_f_changes: 287
2025-10-29 13:54:00,058 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:54:00,058 - INFO     -     - nodes_expanded: 2984
2025-10-29 13:54:00,058 - INFO     -     - search_depth: 6
2025-10-29 13:54:00,058 - INFO     -     - solution_cost: 4
2025-10-29 13:54:00,059 - INFO     -     - branching_factor: 7.5067
2025-10-29 13:54:00,059 - INFO     -     - solution_found: True
2025-10-29 13:54:00,059 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:54:00,059 - INFO     - 
  Computing reward:
2025-10-29 13:54:00,059 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:54:00,060 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:54:00,060 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:54:00,060 - INFO     -   [1] BRANCHING FACTOR: 7.507 → score 0.149 (high BF, minimal credit)
2025-10-29 13:54:00,060 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:54:00,062 - INFO     -   [3] F-VALUE STABILITY: 0.931
2025-10-29 13:54:00,062 - INFO     -       → excellent stability, bonus: 0.200
2025-10-29 13:54:00,062 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:54:00,062 - INFO     - 
  [COMPOSITE]: 0.641
2025-10-29 13:54:00,062 - INFO     -     = 0.300*0.149 (bf)
2025-10-29 13:54:00,062 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:54:00,062 - INFO     -     + 0.350*0.931 (stability)
2025-10-29 13:54:00,062 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:54:00,062 - INFO     - 
  [BONUSES]:
2025-10-29 13:54:00,062 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:54:00,062 - INFO     -     + Stability bonus: 0.200
2025-10-29 13:54:00,063 - INFO     - 
  [FINAL REWARD]: 0.7826
2025-10-29 13:54:00,063 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:54:00,063 - INFO     -     ✓ Reward computed: 0.7826
2025-10-29 13:54:00,063 - INFO     - 
  Reward component breakdown:
2025-10-29 13:54:00,063 - INFO     -     - bf_score                       0.1493
2025-10-29 13:54:00,063 - INFO     -     - depth_score                    0.7525
2025-10-29 13:54:00,063 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:54:00,063 - INFO     -     - f_stability                    0.9314
2025-10-29 13:54:00,064 - INFO     -     - stability_bonus                0.2000
2025-10-29 13:54:00,064 - INFO     -     - state_score                    0.8000
2025-10-29 13:54:00,064 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:54:00,064 - INFO     -     - composite                      0.6413
2025-10-29 13:54:00,064 - INFO     -     - total                          0.7826
2025-10-29 13:54:00,064 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:54:00,064 - INFO     -   Num remaining nodes: 2
2025-10-29 13:54:00,064 - INFO     -   Current merge step: 6 / 50
2025-10-29 13:54:00,064 - INFO     -   Done: False
2025-10-29 13:54:00,064 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:54:00,065 - INFO     -   ✓ Observation built successfully
2025-10-29 13:54:00,065 - INFO     -     - x shape: (100, 19)
2025-10-29 13:54:00,065 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:54:00,065 - INFO     -     - num_nodes: 2
2025-10-29 13:54:00,065 - INFO     -     - num_edges: 2
2025-10-29 13:54:00,065 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:54:00,065 - INFO     -   Before: current_merge_step = 6
2025-10-29 13:54:00,065 - INFO     -   After: current_merge_step = 7
2025-10-29 13:54:00,065 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:54:00,065 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:54:00,065 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:54:00,066 - INFO     -   ✓ Step logged
2025-10-29 13:54:00,066 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:54:00,066 - INFO     -   Returning:
2025-10-29 13:54:00,066 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:54:00,066 - INFO     -     - reward: 0.7826
2025-10-29 13:54:00,066 - INFO     -     - done: False
2025-10-29 13:54:00,066 - INFO     -     - truncated: False
2025-10-29 13:54:00,066 - INFO     -     - info: 19 keys
2025-10-29 13:54:00,066 - INFO     - ==========================================================================================

2025-10-29 13:54:00,074 - INFO     - 
==========================================================================================
2025-10-29 13:54:00,074 - INFO     - STEP 7: REAL MODE MERGE WITH BAD MERGE DETECTION
2025-10-29 13:54:00,074 - INFO     - ==========================================================================================
2025-10-29 13:54:00,074 - INFO     - 
[PHASE 1] INPUT VALIDATION & ACTION EXTRACTION
2025-10-29 13:54:00,074 - INFO     -   Input action: 0 (type: int)
2025-10-29 13:54:00,074 - INFO     -   Available edges in graph: 2
2025-10-29 13:54:00,074 - INFO     -   Action index calculation:
2025-10-29 13:54:00,074 - INFO     -     - action % max(num_valid_edges, 1) = 0 % 2 = 0
2025-10-29 13:54:00,074 - INFO     -     - clamped to [0, 1]: 0
2025-10-29 13:54:00,075 - INFO     -   ✓ Extracted merge pair from edge 0: (8, 15)
2025-10-29 13:54:00,075 - INFO     -   ✓ Validation passed
2025-10-29 13:54:00,075 - INFO     - 
[PHASE 2] PRE-MERGE STATE ANALYSIS
2025-10-29 13:54:00,075 - INFO     -     - Total states before merge: 4005
2025-10-29 13:54:00,075 - INFO     -     - Num nodes: 2
2025-10-29 13:54:00,075 - INFO     -     - Num edges: 2
2025-10-29 13:54:00,075 - INFO     - 
    Nodes being merged:
2025-10-29 13:54:00,075 - INFO     -       - Node 8: 5 states
2025-10-29 13:54:00,075 - INFO     -       - Node 15: 4000 states
2025-10-29 13:54:00,075 - INFO     -       - Expected product: 20000 states
2025-10-29 13:54:00,075 - INFO     - 
[PHASE 3] WRITE MERGE DECISION
2025-10-29 13:54:00,080 - INFO     -   ✓ Wrote merge decision: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\gnn_output\merge_7.json
2025-10-29 13:54:00,080 - INFO     - 
[PHASE 4] WAIT FOR FD ACKNOWLEDGMENT
2025-10-29 13:54:00,080 - INFO     -   Expected ACK file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\gnn_ack_7.json
2025-10-29 13:54:00,181 - INFO     -   ✓ ACK received after 0.10s
2025-10-29 13:54:00,181 - INFO     - 
[PHASE 5] WAIT FOR UPDATED TS FILE
2025-10-29 13:54:00,181 - INFO     -   Expected TS file: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\ts_7.json
2025-10-29 13:54:00,201 - INFO     -   ✓ TS file received after 0.02s
2025-10-29 13:54:00,201 - INFO     - 
[PHASE 6] UPDATE GRAPH TRACKER
2025-10-29 13:54:00,201 - INFO     -   Calling graph_tracker.merge_nodes([8, 15])...
2025-10-29 13:54:00,201 - INFO     - Attempting merge of nodes 8 and 15...
2025-10-29 13:54:00,201 - INFO     - Successfully merged nodes into new node 16 with 20000 states.
2025-10-29 13:54:00,203 - INFO     -   ✓ Merged in graph tracker
2025-10-29 13:54:00,203 - INFO     - 
[PHASE 7] EXTRACT SIGNALS & COMPUTE REWARD
2025-10-29 13:54:00,203 - INFO     -   Calling reward_info_extractor.extract_merge_info(iteration=7)...
2025-10-29 13:54:00,203 - INFO     - 
================================================================================
2025-10-29 13:54:00,203 - INFO     - [EXTRACT] Iteration 7: Extracting merge info
2025-10-29 13:54:00,203 - INFO     - ================================================================================
2025-10-29 13:54:00,203 - INFO     - 
[LOAD] Loading files...
2025-10-29 13:54:00,203 - INFO     -   - before: C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_before_7.json
2025-10-29 13:54:00,203 - INFO     -   - after:  C:\Users\eliez\Desktop\Studies\Fall 2025\0960208 - AI Autonomous\_AI_Proj_Technion\downward\fd_output\merge_after_7.json
2025-10-29 13:54:00,207 - INFO     - [LOAD] ✓ Both files loaded successfully
2025-10-29 13:54:00,207 - INFO     - 
[F-VALUES] Extracting F-values...
2025-10-29 13:54:00,207 - INFO     -   - Raw ts1_f length: 5
2025-10-29 13:54:00,207 - INFO     -   - Raw ts2_f length: 668
2025-10-29 13:54:00,207 - INFO     -   - Raw f_after length: 3340
2025-10-29 13:54:00,207 - INFO     - 
[VALIDATE] Filtering invalid F-values...
2025-10-29 13:54:00,207 - INFO     -   - ts1_valid: 5 / 5 (removed 0)
2025-10-29 13:54:00,208 - INFO     -   - ts2_valid: 668 / 668 (removed -668)
2025-10-29 13:54:00,210 - INFO     -   - after_valid: 2749 / 3340 (removed 591)
2025-10-29 13:54:00,210 - INFO     - 
[IDS] Extracting TS IDs...
2025-10-29 13:54:00,210 - INFO     -   - ts1_id: 8
2025-10-29 13:54:00,210 - INFO     -   - ts2_id: 15
2025-10-29 13:54:00,210 - INFO     - [IDS] ✓ IDs are different
2025-10-29 13:54:00,210 - INFO     - 
[STABILITY] Computing F-stability...
2025-10-29 13:54:00,210 - INFO     -   - ts1_size: 5, ts2_size: 668
2025-10-29 13:54:00,210 - INFO     -   - Product space size: 3340
2025-10-29 13:54:00,210 - INFO     -   - Using product state mapping
2025-10-29 13:54:00,216 - INFO     -   - f_before_product length: 3340
2025-10-29 13:54:00,223 - INFO     -   - avg_f_before: 8.1722 (3340 valid states)
2025-10-29 13:54:00,223 - INFO     -   - avg_f_after:  12.2346 (2749 valid states)
2025-10-29 13:54:00,223 - INFO     -   - delta: 4.0625
2025-10-29 13:54:00,223 - INFO     -   - f_stability: 1.0 - |4.0625| / 8.1722 = 0.5029
2025-10-29 13:54:00,223 - INFO     - 
[CHANGES] Counting significant F-changes (threshold: 5.0)...
2025-10-29 13:54:00,223 - INFO     -   - Compared 673 values
2025-10-29 13:54:00,223 - INFO     -   - Significant changes (> 5.0): 130
2025-10-29 13:54:00,223 - INFO     - 
[SIZES] Extracting sizes and transitions...
2025-10-29 13:54:00,223 - INFO     -   - states_before: 3340
2025-10-29 13:54:00,223 - INFO     -   - states_after: 3340
2025-10-29 13:54:00,223 - INFO     -   - delta_states: 0
2025-10-29 13:54:00,224 - INFO     -   - state_explosion_penalty: 0.0000
2025-10-29 13:54:00,224 - INFO     -   - ts1_transitions: 13
2025-10-29 13:54:00,224 - INFO     -   - ts2_transitions: 6703
2025-10-29 13:54:00,224 - INFO     -   - merged_transitions: 19291
2025-10-29 13:54:00,224 - INFO     -   - transition_density_change: 3.7650
2025-10-29 13:54:00,224 - INFO     - 
[A*] Extracting A* search signals...
2025-10-29 13:54:00,224 - INFO     -   - search_signals present: True
2025-10-29 13:54:00,224 - INFO     -   - nodes_expanded: 2749
2025-10-29 13:54:00,224 - INFO     -   - search_depth: 6
2025-10-29 13:54:00,225 - INFO     -   - solution_cost: 4
2025-10-29 13:54:00,225 - INFO     -   - branching_factor: 7.0175
2025-10-29 13:54:00,225 - INFO     -   - solution_found: True
2025-10-29 13:54:00,225 - INFO     - 
[CREATE] Creating MergeInfo object...
2025-10-29 13:54:00,228 - INFO     - [CREATE] ✓ MergeInfo created
2025-10-29 13:54:00,228 - INFO     - 
[SUMMARY] Iteration 7:
2025-10-29 13:54:00,228 - INFO     -   - TS8(5) + TS15(668) → 3340 states
2025-10-29 13:54:00,228 - INFO     -   - f_stability=0.503
2025-10-29 13:54:00,228 - INFO     -   - A* nodes_expanded=2749
2025-10-29 13:54:00,229 - INFO     -   - solution_found=True
2025-10-29 13:54:00,229 - INFO     -   ✓ Merge info extracted successfully
2025-10-29 13:54:00,229 - INFO     - 
  Extracted signals:
2025-10-29 13:54:00,229 - INFO     -     - iteration: 7
2025-10-29 13:54:00,229 - INFO     -     - states_before: 3340
2025-10-29 13:54:00,229 - INFO     -     - states_after: 3340
2025-10-29 13:54:00,229 - INFO     -     - delta_states: 0
2025-10-29 13:54:00,229 - INFO     -     - f_value_stability: 0.5029
2025-10-29 13:54:00,229 - INFO     -     - num_significant_f_changes: 130
2025-10-29 13:54:00,230 - INFO     -     - state_explosion_penalty: 0.0000
2025-10-29 13:54:00,230 - INFO     -     - nodes_expanded: 2749
2025-10-29 13:54:00,230 - INFO     -     - search_depth: 6
2025-10-29 13:54:00,230 - INFO     -     - solution_cost: 4
2025-10-29 13:54:00,230 - INFO     -     - branching_factor: 7.0175
2025-10-29 13:54:00,230 - INFO     -     - solution_found: True
2025-10-29 13:54:00,230 - INFO     - 
  [BAD MERGE DIAGNOSTIC CHECKS]:
2025-10-29 13:54:00,231 - INFO     - 
  Computing reward:
2025-10-29 13:54:00,231 - INFO     -     - Reward function: EnhancedAStarSearchReward
2025-10-29 13:54:00,231 - INFO     -     - Calling compute() with merge_info and signals...
2025-10-29 13:54:00,231 - INFO     - 
[REWARD] Computing EnhancedAStarSearchReward
2025-10-29 13:54:00,231 - INFO     -   [1] BRANCHING FACTOR: 7.017 → score 0.198 (high BF, minimal credit)
2025-10-29 13:54:00,231 - INFO     -   [2] SOLUTION QUALITY: depth=6 → score 0.753 + bonus 0.300
2025-10-29 13:54:00,233 - INFO     -   [3] F-VALUE STABILITY: 0.604
2025-10-29 13:54:00,233 - INFO     -       → good stability, bonus: 0.100
2025-10-29 13:54:00,233 - INFO     -   [4] STATE CONTROL: ratio=0.000 → score 0.800 (minor increase (acceptable))
2025-10-29 13:54:00,233 - INFO     - 
  [COMPOSITE]: 0.541
2025-10-29 13:54:00,233 - INFO     -     = 0.300*0.198 (bf)
2025-10-29 13:54:00,233 - INFO     -     + 0.200*0.753 (depth)
2025-10-29 13:54:00,233 - INFO     -     + 0.350*0.604 (stability)
2025-10-29 13:54:00,233 - INFO     -     + 0.150*0.800 (state)
2025-10-29 13:54:00,233 - INFO     - 
  [BONUSES]:
2025-10-29 13:54:00,233 - INFO     -     + Solution bonus: 0.300
2025-10-29 13:54:00,234 - INFO     -     + Stability bonus: 0.100
2025-10-29 13:54:00,234 - INFO     - 
  [FINAL REWARD]: 0.4828
2025-10-29 13:54:00,234 - INFO     -   [RANGE]: [-1.0, +1.0] (clipped)

2025-10-29 13:54:00,234 - INFO     -     ✓ Reward computed: 0.4828
2025-10-29 13:54:00,234 - INFO     - 
  Reward component breakdown:
2025-10-29 13:54:00,234 - INFO     -     - bf_score                       0.1983
2025-10-29 13:54:00,235 - INFO     -     - depth_score                    0.7525
2025-10-29 13:54:00,235 - INFO     -     - solution_bonus                 0.3000
2025-10-29 13:54:00,235 - INFO     -     - f_stability                    0.6040
2025-10-29 13:54:00,235 - INFO     -     - stability_bonus                0.1000
2025-10-29 13:54:00,235 - INFO     -     - state_score                    0.8000
2025-10-29 13:54:00,235 - INFO     -     - bad_merge_penalty              0.0000
2025-10-29 13:54:00,235 - INFO     -     - composite                      0.5414
2025-10-29 13:54:00,235 - INFO     -     - total                          0.4828
2025-10-29 13:54:00,235 - INFO     - 
[PHASE 8] TERMINATION CHECK
2025-10-29 13:54:00,235 - INFO     -   Num remaining nodes: 1
2025-10-29 13:54:00,235 - INFO     -   Current merge step: 7 / 50
2025-10-29 13:54:00,235 - INFO     -   Done: True
2025-10-29 13:54:00,235 - INFO     -   Reason: Only 1 node(s) remaining
2025-10-29 13:54:00,235 - INFO     - 
[PHASE 9] BUILD OBSERVATION
2025-10-29 13:54:00,236 - INFO     -   ✓ Observation built successfully
2025-10-29 13:54:00,236 - INFO     -     - x shape: (100, 19)
2025-10-29 13:54:00,236 - INFO     -     - edge_index shape: (2, 1000)
2025-10-29 13:54:00,236 - INFO     -     - num_nodes: 1
2025-10-29 13:54:00,236 - INFO     -     - num_edges: 0
2025-10-29 13:54:00,236 - INFO     - 
[PHASE 10] STEP COUNTER INCREMENT
2025-10-29 13:54:00,236 - INFO     -   Before: current_merge_step = 7
2025-10-29 13:54:00,236 - INFO     -   After: current_merge_step = 8
2025-10-29 13:54:00,236 - INFO     - 
[PHASE 11] BUILD INFO DICT & LOG STEP
2025-10-29 13:54:00,236 - INFO     - [VALIDATE] ✅ All signals valid
2025-10-29 13:54:00,236 - INFO     -   ✓ Added merge_info to info dict
2025-10-29 13:54:00,237 - INFO     -   ✓ Step logged
2025-10-29 13:54:00,237 - INFO     - 
[PHASE 12] RETURN RESULT
2025-10-29 13:54:00,237 - INFO     -   Returning:
2025-10-29 13:54:00,237 - INFO     -     - obs: shape (100, 19)
2025-10-29 13:54:00,237 - INFO     -     - reward: 0.4828
2025-10-29 13:54:00,237 - INFO     -     - done: True
2025-10-29 13:54:00,237 - INFO     -     - truncated: False
2025-10-29 13:54:00,238 - INFO     -     - info: 19 keys
2025-10-29 13:54:00,238 - INFO     - ==========================================================================================

2025-10-29 13:54:00,239 - INFO     -     ✓ Reward: 4.7728, Time: 2.42s
2025-10-29 13:54:00,239 - INFO     - 
✅ Evaluation complete (14.0s)
2025-10-29 13:54:00,239 - INFO     - 
--------------------------------------------------------------------------------
2025-10-29 13:54:00,240 - INFO     - >>> PHASE 5: RESULTS
2025-10-29 13:54:00,240 - INFO     - --------------------------------------------------------------------------------

2025-10-29 13:54:00,240 - INFO     - 
Experiment Results:
2025-10-29 13:54:00,240 - INFO     -   Solve Rate: 100.0%
2025-10-29 13:54:00,240 - INFO     -   Avg Reward: 4.7728
2025-10-29 13:54:00,240 - INFO     -   Avg Time: 2.71s
2025-10-29 13:54:00,240 - INFO     -   Problems Solved: 5/5
2025-10-29 13:54:00,241 - INFO     - ✓ Results saved: overfit_experiment_results\results.json
2025-10-29 13:54:00,242 - INFO     - ✓ Results saved: overfit_experiment_results\results.txt
2025-10-29 13:54:00,243 - INFO     - 
==========================================================================================
2025-10-29 13:54:00,243 - INFO     - // EXPERIMENT COMPLETE
2025-10-29 13:54:00,243 - INFO     - ==========================================================================================

2025-10-29 13:54:00,244 - INFO     - ✅ Overfit experiment completed successfully!
2025-10-29 13:54:00,244 - INFO     -    Results: overfit_experiment_results/
2025-10-29 13:54:00,244 - INFO     -    Model: overfit_experiment_results\gnn_model_trained.zip
